{
  "abstract" : "Improve test reliability and coverage when working with location-based code.",
  "codeExamples" : [
    {
      "code" : "import XCTest\nimport CoreLocation\n\nfinal class SampleAppTests: XCTestCase {\n\n  func testExample() throws {\n    XCUIDevice.shared.location = XCUILocation(location: CLLocation(latitude: 37.334886, longitude: -122.008988))\n\t\/\/ Launch your app and run the test.\n  }\n}",
      "language" : "swift"
    }
  ],
  "contentHash" : "26e1f4740c9b4552b8959559f4fc2541a05b62532d055840f7a1e213d9078634",
  "crawledAt" : "2025-12-04T02:40:56Z",
  "id" : "9DD634F4-A1B6-4979-9D6B-A97DA92C54CC",
  "kind" : "article",
  "language" : "swift",
  "overview" : "## Overview\n\nAutomated tests are most reliable when you control all of the inputs to the code under test. When testing code that works with location APIs, use specific values for coordinates and locations so that the outcome of the tests doesn’t depend on the physical location of the device running the tests.\n\nTest your code with different simulated locations to improve the test coverage of your location-handling code.\n\n### Simulate a static device location\n\nIf your app uses [doc:\/\/com.apple.documentation\/documentation\/CoreLocation] or [doc:\/\/com.apple.documentation\/documentation\/MapKit], the app’s behavior under test can depend on the device’s location. Configure your test plan to simulate a predetermined location so tests run with repeatable inputs. To set a simulated location in a test plan, follow these steps:\n\nFor more information on configuring test plans, see [doc:\/\/com.apple.Xcode\/documentation\/Xcode\/organizing-tests-to-improve-feedback].\n\n### Replay a previously recorded journey\n\nTest features of your app that work with changes to the device’s location by setting the simulated location to a GPX file. Xcode uses the GPX file to replay a journey while your tests are running, updating the simulated location, elevation, and velocity of the device to replicate the recorded journey. To add a GPX file to your workspace, follow these steps:\n\nXcode uses the added GPX file to simulate locations in tests. You can add multiple GPX files and choose between them using the Simulated Location setting in the test plan configuration.\n\n### Construct locations for unit tests\n\nWhen testing your app’s location-handling logic, you don’t need to use [doc:\/\/com.apple.documentation\/documentation\/CoreLocation\/CLLocationManager] or get the device’s location. You can construct instances of [doc:\/\/com.apple.documentation\/documentation\/CoreLocation\/CLLocationCoordinate2D] with known values for the coordinate’s latitude and longitude in the test. Pass these instances to the code under test, and validate that your code behaves as expected for the given values.\n\n### Set a simulated location for UI automation\n\nIn your UI automation tests, update the simulated device location by setting the shared [doc:\/\/com.apple.documentation\/documentation\/XCTest\/XCUIDevice] location to an instance of [doc:\/\/com.apple.documentation\/documentation\/XCTest\/XCUILocation].",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/Xcode\/simulating-location-in-tests\ncrawled: 2025-12-04T02:40:56Z\n---\n\n# Simulating location in tests\n\n**Article**\n\nImprove test reliability and coverage when working with location-based code.\n\n## Overview\n\nAutomated tests are most reliable when you control all of the inputs to the code under test. When testing code that works with location APIs, use specific values for coordinates and locations so that the outcome of the tests doesn’t depend on the physical location of the device running the tests.\n\nTest your code with different simulated locations to improve the test coverage of your location-handling code.\n\n### Simulate a static device location\n\nIf your app uses [doc:\/\/com.apple.documentation\/documentation\/CoreLocation] or [doc:\/\/com.apple.documentation\/documentation\/MapKit], the app’s behavior under test can depend on the device’s location. Configure your test plan to simulate a predetermined location so tests run with repeatable inputs. To set a simulated location in a test plan, follow these steps:\n\n1. Open Xcode.\n2. Choose Product > Test Plan > Edit Test Plan.\n3. In the test plan editor pane, choose Configuration.\n4. Under Localization, click Simulated Location and choose a location from the menu.\n\nFor more information on configuring test plans, see [doc:\/\/com.apple.Xcode\/documentation\/Xcode\/organizing-tests-to-improve-feedback].\n\n\n\n### Replay a previously recorded journey\n\nTest features of your app that work with changes to the device’s location by setting the simulated location to a GPX file. Xcode uses the GPX file to replay a journey while your tests are running, updating the simulated location, elevation, and velocity of the device to replicate the recorded journey. To add a GPX file to your workspace, follow these steps:\n\n1. Open Xcode.\n2. Choose Product > Test Plan > Edit Test Plan.\n3. In the test plan editor pane, choose Configuration.\n4. Under Localization, click Simulated Location and choose Add GPX File to Workspace.\n5. Navigate to your GPX file and click Add.\n\nXcode uses the added GPX file to simulate locations in tests. You can add multiple GPX files and choose between them using the Simulated Location setting in the test plan configuration.\n\n### Construct locations for unit tests\n\nWhen testing your app’s location-handling logic, you don’t need to use [doc:\/\/com.apple.documentation\/documentation\/CoreLocation\/CLLocationManager] or get the device’s location. You can construct instances of [doc:\/\/com.apple.documentation\/documentation\/CoreLocation\/CLLocationCoordinate2D] with known values for the coordinate’s latitude and longitude in the test. Pass these instances to the code under test, and validate that your code behaves as expected for the given values.\n\n### Set a simulated location for UI automation\n\nIn your UI automation tests, update the simulated device location by setting the shared [doc:\/\/com.apple.documentation\/documentation\/XCTest\/XCUIDevice] location to an instance of [doc:\/\/com.apple.documentation\/documentation\/XCTest\/XCUILocation].\n\n```swift\nimport XCTest\nimport CoreLocation\n\nfinal class SampleAppTests: XCTestCase {\n\n  func testExample() throws {\n    XCUIDevice.shared.location = XCUILocation(location: CLLocation(latitude: 37.334886, longitude: -122.008988))\n\t\/\/ Launch your app and run the test.\n  }\n}\n```\n\n",
  "sections" : [

  ],
  "source" : "appleJSON",
  "title" : "Simulating location in tests",
  "url" : "https:\/\/developer.apple.com\/documentation\/Xcode\/simulating-location-in-tests"
}