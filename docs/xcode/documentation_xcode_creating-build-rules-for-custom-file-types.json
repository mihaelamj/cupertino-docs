{
  "abstract" : "Tell Xcode how to build your project’s custom file types, and provide dependency information to optimize the build process for each file.",
  "codeExamples" : [

  ],
  "contentHash" : "e928842abe545121ebd8a93f0dd28cdae147e60e80b75c303fcbd44b63dd28db",
  "crawledAt" : "2025-12-04T01:08:34Z",
  "id" : "A1E61667-FE99-4BEC-9A80-BC51C0366DDE",
  "kind" : "article",
  "language" : "swift",
  "overview" : "## Overview\n\nThe code and resource files in a project are typically in an editable format that a running app can’t use directly. During a build, Xcode transforms the files you’ve been editing into a suitable runtime format. For example, it compiles your code files into machine instructions for a specific device. Each transformation requires a specific tool, and Xcode uses your project’s build rules, or the built-in build rules, to select the correct tool for each file type.\n\nA build rule maps a specific file type to the tools Xcode needs to generate the required output for that file. For example, one build rule compiles `.swift` files into executable code using the Swift compiler. Xcode contains built-in rules for many file types, including both code files and resource files. You can create additional rules to transform other file types into an appropriate final form, or override a built-in rule to use a different tool.\n\n### Add a new build rule for a custom file type\n\nIf your project contains file types not covered by Xcode’s built-in build rules, you can add new build rules to address those types. To create a new build rule:\n\n\n\nA build rule can use either a custom shell script or an existing tool to process files. If you use an existing tool to handle your custom file types, select that tool from the build rule’s Using field. For example, if your input files contain source code that a built-in compiler can handle, select the compiler from the list.\n\n### Specify the match criteria for source files\n\nTo match custom file types, select the “Source files with names matching” option in the Process field and specify a custom pattern string. Specify pattern strings that follow the same rules as the `fnmatch` function in the Standard C library. For example, to match all files with the names `myfile.c` and `myfile.h`, specify the string `*\/myfile.c *\/myfile.h`. During a build, Xcode compares the full path of each project file against the specified pattern. When a match occurs, the system executes your custom script code.\n\nFor information about pattern matching using the `fnmatch` function, see the man page for that function.\n\n### Specify the input and output files for your shell script\n\nWhen Xcode detects one of your custom file types, it executes the shell script associated with the matching build rule. In your script, get the path to the source file from the `SCRIPT_INPUT_FILE` environment variable, and begin processing the file. If your script requires additional input data, such as build configuration files, specify those files in the Input Files section of your build rule, and access them using environment variables.\n\nYour script code takes an input source file and generates an appropriate output file. For example, a script that compiles source code might generate an object file with machine instructions. You specify the output files for your script in the Output Files section of your build rule. Most scripts generate only one output file, but you can specify multiple files when appropriate. Xcode determines when to rebuild your source files based on the output files that you declare. When the source file is newer than the output files, Xcode rebuilds it. If you don’t specify any output files, Xcode builds your source file every time, regardless of whether the source file changed.\n\nWhen you specify input and output files in your build rule, use the following variables to compose the path and filename information. For example, you might use `$(DERIVED_FILE_DIR)\/$(INPUT_FILE_BASE).compiledData` to specify an output file based on the name of the original source file.\n\n### Access script-related files from environment variables\n\nShell scripts have access to the current target’s build settings and the input and output files associated with the build rule. Before executing your build rule’s script, Xcode configures the shell environment with several environment variables. To access the build rule’s input and output files, use the environment variables in the following table.\n\nFor a list of build setting environment variables, see [doc:\/\/com.apple.Xcode\/documentation\/Xcode\/build-settings-reference].\n\n### Specify additional build dependencies for your source file\n\nTo improve performance during incremental builds, Xcode rebuilds only the files that require a rebuild. To determine whether a file requires a rebuild, Xcode evaluates the following criteria:\n\nXcode determines whether a source file changed by comparing the modification date of that file to the modification date of its output file. If the source file is newer, or if the output file doesn’t exist, Xcode builds the source file.\n\nAnalyzing the dependencies between source files is more complicated, but is important to ensure builds are correct. If a source file imports headers or other files, the tool that builds the source file reports the relationship to Xcode. For your custom file types, you report dependencies by generating a set of makefile rules for Xcode to execute.\n\nTo report dependency rules for your custom source files, enable the “Use discovered dependency file” option in your build rule. Xcode suggests a default naming pattern for your dependency files, but you can change the name to match your tool’s output. In your script code, create the dependency file during each build cycle, and save the file with the appropriate name.\n\nCreate the actual files in your script code when you build custom files. Fill the contents of each dependencies file with a set of makefile rules. The Xcode build system analyzes these rules at build time to determine whether it needs to rebuild the matching source file.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/Xcode\/creating-build-rules-for-custom-file-types\ncrawled: 2025-12-04T01:08:34Z\n---\n\n# Creating build rules for custom file types\n\n**Article**\n\nTell Xcode how to build your project’s custom file types, and provide dependency information to optimize the build process for each file.\n\n## Overview\n\nThe code and resource files in a project are typically in an editable format that a running app can’t use directly. During a build, Xcode transforms the files you’ve been editing into a suitable runtime format. For example, it compiles your code files into machine instructions for a specific device. Each transformation requires a specific tool, and Xcode uses your project’s build rules, or the built-in build rules, to select the correct tool for each file type.\n\nA build rule maps a specific file type to the tools Xcode needs to generate the required output for that file. For example, one build rule compiles `.swift` files into executable code using the Swift compiler. Xcode contains built-in rules for many file types, including both code files and resource files. You can create additional rules to transform other file types into an appropriate final form, or override a built-in rule to use a different tool.\n\n\n\n### Add a new build rule for a custom file type\n\nIf your project contains file types not covered by Xcode’s built-in build rules, you can add new build rules to address those types. To create a new build rule:\n\n1. In the project editor, select the target that contains your custom files.\n2. Click the Build Rules tab.\n3. Click the Add button (+) to create a new rule.\n4. In the Process field, specify a filename matching string.\n5. In the script text field, specify your custom script code.\n\n\n\nA build rule can use either a custom shell script or an existing tool to process files. If you use an existing tool to handle your custom file types, select that tool from the build rule’s Using field. For example, if your input files contain source code that a built-in compiler can handle, select the compiler from the list.\n\n### Specify the match criteria for source files\n\nTo match custom file types, select the “Source files with names matching” option in the Process field and specify a custom pattern string. Specify pattern strings that follow the same rules as the `fnmatch` function in the Standard C library. For example, to match all files with the names `myfile.c` and `myfile.h`, specify the string `*\/myfile.c *\/myfile.h`. During a build, Xcode compares the full path of each project file against the specified pattern. When a match occurs, the system executes your custom script code.\n\n\n\nFor information about pattern matching using the `fnmatch` function, see the man page for that function.\n\n### Specify the input and output files for your shell script\n\nWhen Xcode detects one of your custom file types, it executes the shell script associated with the matching build rule. In your script, get the path to the source file from the `SCRIPT_INPUT_FILE` environment variable, and begin processing the file. If your script requires additional input data, such as build configuration files, specify those files in the Input Files section of your build rule, and access them using environment variables.\n\nYour script code takes an input source file and generates an appropriate output file. For example, a script that compiles source code might generate an object file with machine instructions. You specify the output files for your script in the Output Files section of your build rule. Most scripts generate only one output file, but you can specify multiple files when appropriate. Xcode determines when to rebuild your source files based on the output files that you declare. When the source file is newer than the output files, Xcode rebuilds it. If you don’t specify any output files, Xcode builds your source file every time, regardless of whether the source file changed.\n\nWhen you specify input and output files in your build rule, use the following variables to compose the path and filename information. For example, you might use `$(DERIVED_FILE_DIR)\/$(INPUT_FILE_BASE).compiledData` to specify an output file based on the name of the original source file.\n\n\n\n\n\n### Access script-related files from environment variables\n\nShell scripts have access to the current target’s build settings and the input and output files associated with the build rule. Before executing your build rule’s script, Xcode configures the shell environment with several environment variables. To access the build rule’s input and output files, use the environment variables in the following table.\n\n\n\n\n\nFor a list of build setting environment variables, see [doc:\/\/com.apple.Xcode\/documentation\/Xcode\/build-settings-reference].\n\n### Specify additional build dependencies for your source file\n\nTo improve performance during incremental builds, Xcode rebuilds only the files that require a rebuild. To determine whether a file requires a rebuild, Xcode evaluates the following criteria:\n\n- Did the contents of the source file change?\n- Does the source file depend on any other files that changed?\n\nXcode determines whether a source file changed by comparing the modification date of that file to the modification date of its output file. If the source file is newer, or if the output file doesn’t exist, Xcode builds the source file.\n\nAnalyzing the dependencies between source files is more complicated, but is important to ensure builds are correct. If a source file imports headers or other files, the tool that builds the source file reports the relationship to Xcode. For your custom file types, you report dependencies by generating a set of makefile rules for Xcode to execute.\n\nTo report dependency rules for your custom source files, enable the “Use discovered dependency file” option in your build rule. Xcode suggests a default naming pattern for your dependency files, but you can change the name to match your tool’s output. In your script code, create the dependency file during each build cycle, and save the file with the appropriate name.\n\nCreate the actual files in your script code when you build custom files. Fill the contents of each dependencies file with a set of makefile rules. The Xcode build system analyzes these rules at build time to determine whether it needs to rebuild the matching source file.\n\n## Build customization\n\n- **Customizing the build schemes for a project**: Specify which targets to build, and customize the settings Xcode uses to build, run, test, and profile those targets.\n- **Customizing the build phases of a target**: Specify the tasks to perform during a build, including the source files to compile, the scripts to run, and the resources to include in the final product.\n- **Running custom scripts during a build**: Execute custom shell scripts during the build process, and run tools or other commands that your project requires.\n- **Running code on a specific platform or OS version**: Add conditional compilation markers around code that requires a particular family of devices or minimum operating system version to run.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Specify which targets to build, and customize the settings Xcode uses to build, run, test, and profile those targets.",
          "name" : "Customizing the build schemes for a project",
          "url" : "https:\/\/developer.apple.com\/documentation\/Xcode\/customizing-the-build-schemes-for-a-project"
        },
        {
          "description" : "Specify the tasks to perform during a build, including the source files to compile, the scripts to run, and the resources to include in the final product.",
          "name" : "Customizing the build phases of a target",
          "url" : "https:\/\/developer.apple.com\/documentation\/Xcode\/customizing-the-build-phases-of-a-target"
        },
        {
          "description" : "Execute custom shell scripts during the build process, and run tools or other commands that your project requires.",
          "name" : "Running custom scripts during a build",
          "url" : "https:\/\/developer.apple.com\/documentation\/Xcode\/running-custom-scripts-during-a-build"
        },
        {
          "description" : "Add conditional compilation markers around code that requires a particular family of devices or minimum operating system version to run.",
          "name" : "Running code on a specific platform or OS version",
          "url" : "https:\/\/developer.apple.com\/documentation\/Xcode\/running-code-on-a-specific-version"
        }
      ],
      "title" : "Build customization"
    }
  ],
  "source" : "appleJSON",
  "title" : "Creating build rules for custom file types",
  "url" : "https:\/\/developer.apple.com\/documentation\/Xcode\/creating-build-rules-for-custom-file-types"
}