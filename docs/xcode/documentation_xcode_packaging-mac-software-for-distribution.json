{
  "abstract" : "Build a zip archive, disk image, or installer package for distributing your Mac software.",
  "codeExamples" : [
    {
      "code" : "% ditto -c -k --keepParent <PathToDirectory> <PathToZip>"
    },
    {
      "code" : "% security find-identity -v               \n  1) 6210ECCC616B6A72F238DE6FDDFDA1A06DEFF9FB \"3rd Party Mac Developer Installer: …\"\n  2) C32E0E68CE92936D5532E21BAAD8CFF4A6D9BAA1 \"Developer ID Installer: …\"\n     2 valid identities found"
    },
    {
      "code" : "% productbuild --sign <Identity> --component <PathToApp> \/Applications <PathToPackage>"
    },
    {
      "code" : "% hdiutil create -srcFolder <ProductDirectory> -o <DiskImageFile>"
    },
    {
      "code" : "% codesign -s <CodeSigningIdentity> --timestamp -i <Identifier> <DiskImageFile>"
    },
    {
      "code" : "% xcrun stapler staple FlyingAnimals.dmg"
    }
  ],
  "contentHash" : "4911cd43c651e51f4b4c59b91942fd9aa4225c6e568e47e64fdb19673e1c54d2",
  "crawledAt" : "2025-12-03T04:17:14Z",
  "id" : "F2DD1F2A-4936-4138-95F6-791E05DD6336",
  "kind" : "article",
  "language" : "swift",
  "overview" : "## Overview\n\nXcode handles many common scenarios for Mac software distribution, such as uploading your app to the Mac App Store. Some products that you build with Xcode or with third-party developer tools require other steps for distribution. These products include the following:\n\nIf you can’t build and distribute your product using Xcode alone, choose a container format and package your product for distribution. If you distribute your product directly (in other words, through a channel other than the Mac App Store), you sign your code for distribution and create a distribution container file, then notarize the container file. You may consider automating this process to repeat it for each version of your app. For more information, see [doc:\/\/com.apple.Xcode\/documentation\/Xcode\/creating-distribution-signed-code-for-the-mac].\n\n## Decide on a container format\n\nTo get started, decide on your container format. Mac products support two distribution channels:\n\nTo distribute an app in the Mac App Store, you submit the app as an installer package. For direct distribution, you have a choice of various container formats, the most common being:\n\nYou can nest these containers. For example, you might want to ship an app inside an installer package on a disk image. To nest containers, work from the lowest-level container to the highest-level container, following the instructions for each container at each step.\n\nSign your code, and sign each nested container that supports signing. For example, if you ship an app inside an installer package on a disk image, sign the app, create the installer package, sign that package, create the disk image, and then sign the disk image. For more information about signing code for distribution, see [doc:\/\/com.apple.Xcode\/documentation\/Xcode\/creating-distribution-signed-code-for-the-mac].\n\n## Build a zip archive\n\nIf you choose to distribute your product in a zip archive, use the `ditto` command-line tool to create that archive:\n\nIn this example command, `<PathToDirectory>` is the path to the directory you create in step 1, and `<PathToZip>` is the location where `ditto` should create the zip archive. You can’t sign zip archives, but you can sign their contents.\n\n## Build an Installer package\n\nIf you choose to distribute your product in an Installer package, start by determining your Installer signing identity. Choose the right identity for your distribution channel:\n\nFor information on how to set up these Installer-signing identities, see [https:\/\/developer.apple.com\/help\/account\/].\n\nRun the following command to confirm that your Installer-signing identity is present and correct:\n\nThe `-v` argument filters for valid identities only. If the Installer-signing identity you need isn’t listed, see [https:\/\/developer.apple.com\/help\/account\/].\n\nIf your product consists of a single app, use the `productbuild` tool to create a simple Installer package for it. The following is the simplest use of `productbuild`, sufficient for submitting your app to the Mac App Store:\n\nMake the following substitutions to this command:\n\nIf you have a more complex product, you’ll need a more complex Installer package.  For more details on how to work with Installer packages, see the manual pages for `productbuild`, `productsign`, `pkgbuild`, and `pkgutil`.  For instructions on how to read a manual page, see [doc:\/\/com.apple.documentation\/documentation\/os\/reading-unix-manual-pages].\n\n## Build a disk image file\n\nIf you choose to distribute your product in a disk image file (`.dmg`), follow these steps:\n\nIn this command, `<ProductDirectory>` is the directory you created in step 1, and `<DiskImageFile>` is the path where `hdiutil` creates the disk image file.\n\nIn this command, `<CodeSigningIdentity>` is your Developer ID application code-signing identity (for example, `Developer ID Application: <TeamID>`), `<Identifier>` is the code-signing identifier you chose in step 4, and `<DiskImageFile>` is the path to the disk image you created in step 3. Use a code-signing identity, not an installer-signing identity.\n\nFor more information on code-signing identities, see “Confirm your code-signing identity” in [doc:\/\/com.apple.Xcode\/documentation\/Xcode\/creating-distribution-signed-code-for-the-mac].\n\nYou can use a third-party tool to configure a disk image for distribution. For example, the tool might arrange the icons, set a background image, and add a symlink to the Applications folder.  If you use a third-party tool, make sure that the resulting disk image:\n\n## Submit your app to the Mac App Store\n\nIf you’re creating an app for the Mac App Store, submit your signed installer package using either the `altool` command-line tool or the Transporter app.  For detailed instructions, see [https:\/\/help.apple.com\/app-store-connect\/#\/devb1c185036].\n\n## Notarize your product\n\nIf you distribute your product directly, notarize the file you intend to distribute to your users. For more information, see [doc:\/\/com.apple.documentation\/documentation\/Security\/customizing-the-notarization-workflow]. Skip the “Export a package for notarization” section because you already have the file that you want to submit.\n\nIf you distribute your product using nested containers, only notarize the outermost container. For example, if you have an app inside an installer package on a disk image, sign the app, sign the installer package, and sign the disk image, but only notarize the disk image.\n\nIf you use a third-party installer tool, refer to [doc:\/\/com.apple.documentation\/documentation\/Security\/customizing-the-notarization-workflow].\n\n## Staple your product\n\nOnce you’ve notarized your product, staple the resulting ticket to the file you intend to distribute. For information about how to do this for an app within a zip archive, see “Staple the Ticket to Your Distribution” in [doc:\/\/com.apple.documentation\/documentation\/Security\/customizing-the-notarization-workflow]. The other common container formats, installer packages and disk images, support stapling directly.  For example, to staple a ticket to a disk image:\n\nIf you don’t staple the ticket to your distribution file, Gatekeeper might block a user from installing or using your product while their Mac is offline.\n\n## Test your distributed product\n\nFor products that you distribute directly, test that the product works correctly when you use it from the installer package, disk image, or zip file you created. If possible, do this testing on a different Mac than the one where you develop the software, so that development data doesn’t affect the test outcomes. Consider these scenarios:\n\nFor products that you distribute as zip files or disk image files, consider these additional scenarios:",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/Xcode\/packaging-mac-software-for-distribution\ncrawled: 2025-12-03T04:17:14Z\n---\n\n# Packaging Mac software for distribution\n\n**Article**\n\nBuild a zip archive, disk image, or installer package for distributing your Mac software.\n\n## Overview\n\nXcode handles many common scenarios for Mac software distribution, such as uploading your app to the Mac App Store. Some products that you build with Xcode or with third-party developer tools require other steps for distribution. These products include the following:\n\n- Products that aren’t apps\n- Products that include multiple components, for example, an app with an associated daemon\n- Products you distribute directly\n- Products you build with third-party developer tools\n\nIf you can’t build and distribute your product using Xcode alone, choose a container format and package your product for distribution. If you distribute your product directly (in other words, through a channel other than the Mac App Store), you sign your code for distribution and create a distribution container file, then notarize the container file. You may consider automating this process to repeat it for each version of your app. For more information, see [doc:\/\/com.apple.Xcode\/documentation\/Xcode\/creating-distribution-signed-code-for-the-mac].\n\n\n\n## Decide on a container format\n\nTo get started, decide on your container format. Mac products support two distribution channels:\n\n- You can distribute apps in the Mac App Store.\n- You can use Developer ID signing to distribute apps and other products directly, outside of the Mac App Store.\n\nTo distribute an app in the Mac App Store, you submit the app as an installer package. For direct distribution, you have a choice of various container formats, the most common being:\n\n\n\nYou can nest these containers. For example, you might want to ship an app inside an installer package on a disk image. To nest containers, work from the lowest-level container to the highest-level container, following the instructions for each container at each step.\n\nSign your code, and sign each nested container that supports signing. For example, if you ship an app inside an installer package on a disk image, sign the app, create the installer package, sign that package, create the disk image, and then sign the disk image. For more information about signing code for distribution, see [doc:\/\/com.apple.Xcode\/documentation\/Xcode\/creating-distribution-signed-code-for-the-mac].\n\n## Build a zip archive\n\nIf you choose to distribute your product in a zip archive, use the `ditto` command-line tool to create that archive:\n\n1. Create a directory that holds everything you want to distribute.\n2. Run the `ditto` tool as shown below:\n\n```\n% ditto -c -k --keepParent <PathToDirectory> <PathToZip>\n```\n\nIn this example command, `<PathToDirectory>` is the path to the directory you create in step 1, and `<PathToZip>` is the location where `ditto` should create the zip archive. You can’t sign zip archives, but you can sign their contents.\n\n## Build an Installer package\n\nIf you choose to distribute your product in an Installer package, start by determining your Installer signing identity. Choose the right identity for your distribution channel:\n\n- If you’re distributing an app on the Mac App Store, use a Mac Installer Distribution signing identity. This is named `3rd Party Mac Developer Installer: <TeamID>`, where `<TeamID>` identifies your team.\n- If you’re distributing a product independently, use a Developer ID Installer-signing identity. This is named `Developer ID Installer: <TeamID>`, where `<TeamID>` identifies your team.\n\nFor information on how to set up these Installer-signing identities, see [https:\/\/developer.apple.com\/help\/account\/].\n\nRun the following command to confirm that your Installer-signing identity is present and correct:\n\n```\n% security find-identity -v               \n  1) 6210ECCC616B6A72F238DE6FDDFDA1A06DEFF9FB \"3rd Party Mac Developer Installer: …\"\n  2) C32E0E68CE92936D5532E21BAAD8CFF4A6D9BAA1 \"Developer ID Installer: …\"\n     2 valid identities found\n```\n\nThe `-v` argument filters for valid identities only. If the Installer-signing identity you need isn’t listed, see [https:\/\/developer.apple.com\/help\/account\/].\n\n\n\nIf your product consists of a single app, use the `productbuild` tool to create a simple Installer package for it. The following is the simplest use of `productbuild`, sufficient for submitting your app to the Mac App Store:\n\n```\n% productbuild --sign <Identity> --component <PathToApp> \/Applications <PathToPackage>\n```\n\nMake the following substitutions to this command:\n\n\n\nIf you have a more complex product, you’ll need a more complex Installer package.  For more details on how to work with Installer packages, see the manual pages for `productbuild`, `productsign`, `pkgbuild`, and `pkgutil`.  For instructions on how to read a manual page, see [doc:\/\/com.apple.documentation\/documentation\/os\/reading-unix-manual-pages].\n\n## Build a disk image file\n\nIf you choose to distribute your product in a disk image file (`.dmg`), follow these steps:\n\n1. Create a directory to act as the source for the root directory of your disk image’s volume.\n2. Populate that directory with the items you want to distribute.  If you’re creating a script to automate this process, use `ditto` rather than `cp` because `ditto` preserves symlinks.\n3. Use the `hdiutil` command below to create the disk image file:\n\n```\n% hdiutil create -srcFolder <ProductDirectory> -o <DiskImageFile>\n```\n\nIn this command, `<ProductDirectory>` is the directory you created in step 1, and `<DiskImageFile>` is the path where `hdiutil` creates the disk image file.\n\n1. Decide on a code-signing identifier for this disk image. If you’re signing bundled code, construct a code-signing identifier using your code’s bundle ID as the prefix followed by a unique string. Otherwise, construct the prefix by following the steps in Sign each code item in [doc:\/\/com.apple.Xcode\/documentation\/Xcode\/creating-distribution-signed-code-for-the-mac]. Use a unique code-signing identifier that differs from the identifiers on your other products, including code-bundle identifiers.\n2. Use the `codesign` command below to sign the disk image:\n\n```\n% codesign -s <CodeSigningIdentity> --timestamp -i <Identifier> <DiskImageFile>\n```\n\nIn this command, `<CodeSigningIdentity>` is your Developer ID application code-signing identity (for example, `Developer ID Application: <TeamID>`), `<Identifier>` is the code-signing identifier you chose in step 4, and `<DiskImageFile>` is the path to the disk image you created in step 3. Use a code-signing identity, not an installer-signing identity.\n\nFor more information on code-signing identities, see “Confirm your code-signing identity” in [doc:\/\/com.apple.Xcode\/documentation\/Xcode\/creating-distribution-signed-code-for-the-mac].\n\nYou can use a third-party tool to configure a disk image for distribution. For example, the tool might arrange the icons, set a background image, and add a symlink to the Applications folder.  If you use a third-party tool, make sure that the resulting disk image:\n\n- Is signed with your Developer ID Application code-signing identity\n- Is a UDIF-format read-only zip-compressed disk image (type `UDZO`)\n\n## Submit your app to the Mac App Store\n\nIf you’re creating an app for the Mac App Store, submit your signed installer package using either the `altool` command-line tool or the Transporter app.  For detailed instructions, see [https:\/\/help.apple.com\/app-store-connect\/#\/devb1c185036].\n\n## Notarize your product\n\nIf you distribute your product directly, notarize the file you intend to distribute to your users. For more information, see [doc:\/\/com.apple.documentation\/documentation\/Security\/customizing-the-notarization-workflow]. Skip the “Export a package for notarization” section because you already have the file that you want to submit.\n\nIf you distribute your product using nested containers, only notarize the outermost container. For example, if you have an app inside an installer package on a disk image, sign the app, sign the installer package, and sign the disk image, but only notarize the disk image.\n\nIf you use a third-party installer tool, refer to [doc:\/\/com.apple.documentation\/documentation\/Security\/customizing-the-notarization-workflow].\n\n## Staple your product\n\nOnce you’ve notarized your product, staple the resulting ticket to the file you intend to distribute. For information about how to do this for an app within a zip archive, see “Staple the Ticket to Your Distribution” in [doc:\/\/com.apple.documentation\/documentation\/Security\/customizing-the-notarization-workflow]. The other common container formats, installer packages and disk images, support stapling directly.  For example, to staple a ticket to a disk image:\n\n```\n% xcrun stapler staple FlyingAnimals.dmg\n```\n\nIf you don’t staple the ticket to your distribution file, Gatekeeper might block a user from installing or using your product while their Mac is offline.\n\n## Test your distributed product\n\nFor products that you distribute directly, test that the product works correctly when you use it from the installer package, disk image, or zip file you created. If possible, do this testing on a different Mac than the one where you develop the software, so that development data doesn’t affect the test outcomes. Consider these scenarios:\n\n- A fresh distribution, on a Mac where your product hasn’t been used before\n- An upgrade distribution, on a Mac where the person has already used an older version of your product (consider both the situations where the new version replaces the old version, and the new version is in a different location than the old version)\n- A duplicate distribution, on a Mac that already contains the same version of your product in a different location\n- A distribution where the person using your app is signed in to a different account on the Mac than the person who installed the app\n\nFor products that you distribute as zip files or disk image files, consider these additional scenarios:\n\n- The person opens your app without moving it to a different location. In this situation, when the person first opens your app, Gatekeeper randomizes its path as returned from [doc:\/\/com.apple.documentation\/documentation\/Foundation\/Bundle\/bundleURL] and other API. This measure stops your app from accessing resources outside its bundle (and therefore not sealed by its code signature) using a relative path, as an attacker could control those resources to change your app’s behavior. Gatekeeper only performs this *translocation* on first launch, so test the behavior on a subsequent launch too.\n- The person moves your app to a different location, then launches it. Gatekeeper doesn’t translocate your app’s path in this case.\n\n## Distribution and release\n\n- **Distributing your app for beta testing and releases**: Release your app to beta testers and users.\n- **Distributing your app to registered devices**: Register devices in your developer account and deploy your app to them for testing.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Release your app to beta testers and users.",
          "name" : "Distributing your app for beta testing and releases",
          "url" : "https:\/\/developer.apple.com\/documentation\/Xcode\/distributing-your-app-for-beta-testing-and-releases"
        },
        {
          "description" : "Register devices in your developer account and deploy your app to them for testing.",
          "name" : "Distributing your app to registered devices",
          "url" : "https:\/\/developer.apple.com\/documentation\/Xcode\/distributing-your-app-to-registered-devices"
        }
      ],
      "title" : "Distribution and release"
    }
  ],
  "source" : "appleJSON",
  "title" : "Packaging Mac software for distribution",
  "url" : "https:\/\/developer.apple.com\/documentation\/Xcode\/packaging-mac-software-for-distribution"
}