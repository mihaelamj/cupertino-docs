{
  "abstract" : "Catch performance issues using the Metal Performance HUD while your app runs.",
  "codeExamples" : [
    {
      "code" : "metal-HUD: <first-frame-number-integer>,<graphics-memory-usage-float>,<process-memory-usage-float>,<first-frame-present-interval-float>,<first-frame-gpu-time-float>,...<last-frame-present-interval-float>,<last-frame-gpu-time-float>"
    },
    {
      "code" : "[com.apple.metal.hud:Logging] CompileShader: name: ParticleVs compilation-time: 5496250 cached: 0\n[com.apple.metal.hud:Logging] CompileShader: name: ParticlePs compilation-time: 6335000 cached: 0"
    }
  ],
  "contentHash" : "80f34cae1871fea90691a2b75ab98dd2282b1a66bd5e9fa69f91e0678f2670ea",
  "crawledAt" : "2025-12-02T19:54:31Z",
  "id" : "9F607A61-55F7-4162-9824-BF2F63092F51",
  "kind" : "article",
  "language" : "swift",
  "overview" : "## Overview\n\nThe Metal Performance HUD (heads-up display) adds a real-time overlay to your app that displays and, optionally, logs common graphics performance information. The overlay helps you spot subtle performance issues, such as large variations in rendering time, so you can find the perfect scope to capture in Xcode (see [doc:\/\/com.apple.Xcode\/documentation\/Xcode\/Capturing-a-Metal-workload-in-Xcode]) or in Instruments (see [doc:\/\/com.apple.Xcode\/documentation\/Xcode\/Analyzing-the-performance-of-your-Metal-app]).\n\n\n\nBy default, the top of the HUD shows the Metal device, resolution, an indicator for whether the present mode is direct or composited, the amount of memory allocated by the app and Metal, and whether Game Mode is turned on or off (see [https:\/\/support.apple.com\/en-us\/105118]).\n\nThe bottom section of the HUD shows the average frames per second (FPS), GPU time, and frame interval. Below the frame interval is a chart graphing the frame interval from the past 120 frames.\n\n\n\nYou can also customize the HUD to include more metrics. To learn more, see [doc:\/\/com.apple.Xcode\/documentation\/Xcode\/Customizing-metal-performance-hud].\n\nFor more information about the metrics provided by the HUD, see [doc:\/\/com.apple.Xcode\/documentation\/Xcode\/Understanding-metal-performance-hud-metrics].\n\n### Enable the HUD and logging in Xcode\n\nFollow these steps to enable the Metal Performance HUD using the runtime diagnostics options in the scheme settings:\n\nNow, Xcode enables the Metal Performance HUD runtime each time you run your scheme.\n\nYou can also optionally enable the output of per-frame statistics to the console by selecting the Log Graphics Overview option.\n\n\n\n### Enable the HUD and logging with environment variables\n\nYou can enable the Metal Performance HUD and logging by setting the following environment variables on your Metal app:\n\n### Enable the HUD and logging on a device\n\nYou can enable the Metal Performance HUD and logging on an iOS, iPadOS, or tvOS device in the Developer settings by following these steps:\n\nThe Metal Performance HUD appears for apps you build and install yourself to your development devices.\n\nThe following screenshot shows the options in iOS:\n\n\n\nThe following screenshot shows the options in tvOS:\n\n\n\n### Enable the HUD and logging with information property list and user defaults\n\nAlternatively, you can enable the HUD and logging programmatically with one of the following methods:\n\n### Utilize the logging capabilities\n\nIf you enable logging, once per second as your app runs, the HUD writes data in the following format to the console:\n\nFor example, the HUD writes the following data to the console while running the [doc:\/\/com.apple.documentation\/documentation\/Metal\/rendering-a-scene-with-deferred-lighting-in-swift] sample code project:\n\n\n\nWhen you enable shader compiler logging, as your app runs, the Metal HUD emits signposts for each compiled shader. The subsystem is `com.apple.metal.hud` and the category is `Logging`.\n\n### Understand encoder GPU time tracking\n\nYou can turn on encoder GPU time tracking by ticking the `Enable Encoder GPU Time Tracking` option in the configuration panel or by setting `MTL_HUD_ENCODER_TIMING_ENABLED` to `1` in the environment variable.\n\nWith encoder GPU time tracking, the Metal Performance HUD leverages [doc:\/\/com.apple.documentation\/documentation\/Metal\/gpu-counters-and-counter-sample-buffers] to track GPU timing for each command encoder to provide enhanced GPU time reporting.\n\nEncoder GPU time measures GPU activity by tracking the start and end times of work within individual encoder stages (vertex, fragment, and compute). This differs from standard GPU time, which captures the overall duration of command buffers. For command buffers containing many encoders, there may be idle periods in between encoders that can inflate the standard GPU time, providing a less accurate measure of actual GPU workload.\n\nThe overlay shows the encoder GPU time as well as the GPU time and the percentage to the total frame time for each encoder type. Below the timing metrics, a GPU timeline visualizes the GPU execution of the last three frames, updating every second.\n\n\n\nWith the encoder GPU time tracking enabled, the Metal Performance HUD also tracks command buffer and encoder labels. Two new optional metrics become available: Top Labeled Command Buffers and Top Labeled Encoders. These metrics show the three most GPU-intensive command buffers and encoders by label, helping you quickly pinpoint potential performance bottlenecks.\n\n\n\n### Display the value range of metrics\n\nYou can visualize the range of common metrics in the overlay by enabling the Show Metrics Value Range option in the configuration panel or by setting `MTL_HUD_SHOW_VALUE_RANGE` to `1` in the environment variable.\n\nWith this option, the HUD visualizes common metrics in three columns:\n\n",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/Xcode\/Monitoring-your-Metal-apps-graphics-performance\ncrawled: 2025-12-02T19:54:31Z\n---\n\n# Monitoring your Metal app’s graphics performance\n\n**Article**\n\nCatch performance issues using the Metal Performance HUD while your app runs.\n\n## Overview\n\nThe Metal Performance HUD (heads-up display) adds a real-time overlay to your app that displays and, optionally, logs common graphics performance information. The overlay helps you spot subtle performance issues, such as large variations in rendering time, so you can find the perfect scope to capture in Xcode (see [doc:\/\/com.apple.Xcode\/documentation\/Xcode\/Capturing-a-Metal-workload-in-Xcode]) or in Instruments (see [doc:\/\/com.apple.Xcode\/documentation\/Xcode\/Analyzing-the-performance-of-your-Metal-app]).\n\n\n\nBy default, the top of the HUD shows the Metal device, resolution, an indicator for whether the present mode is direct or composited, the amount of memory allocated by the app and Metal, and whether Game Mode is turned on or off (see [https:\/\/support.apple.com\/en-us\/105118]).\n\nThe bottom section of the HUD shows the average frames per second (FPS), GPU time, and frame interval. Below the frame interval is a chart graphing the frame interval from the past 120 frames.\n\n\n\nYou can also customize the HUD to include more metrics. To learn more, see [doc:\/\/com.apple.Xcode\/documentation\/Xcode\/Customizing-metal-performance-hud].\n\nFor more information about the metrics provided by the HUD, see [doc:\/\/com.apple.Xcode\/documentation\/Xcode\/Understanding-metal-performance-hud-metrics].\n\n### Enable the HUD and logging in Xcode\n\nFollow these steps to enable the Metal Performance HUD using the runtime diagnostics options in the scheme settings:\n\n1. In the Xcode toolbar, choose Edit Scheme from the Scheme menu. Alternatively, choose Product > Scheme > Edit Scheme. \n2. In the scheme action panel, select Run.\n3. In the action setting tab, click Diagnostics.\n4. Select Show Graphics Overview to enable the Metal Performance HUD, and click Close. \n\nNow, Xcode enables the Metal Performance HUD runtime each time you run your scheme.\n\nYou can also optionally enable the output of per-frame statistics to the console by selecting the Log Graphics Overview option.\n\n\n\n\n\n### Enable the HUD and logging with environment variables\n\nYou can enable the Metal Performance HUD and logging by setting the following environment variables on your Metal app:\n\n\n\n### Enable the HUD and logging on a device\n\nYou can enable the Metal Performance HUD and logging on an iOS, iPadOS, or tvOS device in the Developer settings by following these steps:\n\n1. Open the Settings app.\n2. Select Developer.\n3. Under Graphics HUD, toggle the Show Graphics HUD option to enable the Metal Performance HUD.\n4. Toggle the Log Graphics Performance option to enable logging.\n\nThe Metal Performance HUD appears for apps you build and install yourself to your development devices.\n\n\n\nThe following screenshot shows the options in iOS:\n\n\n\nThe following screenshot shows the options in tvOS:\n\n\n\n### Enable the HUD and logging with information property list and user defaults\n\nAlternatively, you can enable the HUD and logging programmatically with one of the following methods:\n\n- Add `MetalHudEnabled` to your app’s `Info.plist` file.\n- Add `MetalHUDForceEnabled=1` in your app’s [doc:\/\/com.apple.documentation\/documentation\/Foundation\/UserDefaults].\n\n### Utilize the logging capabilities\n\nIf you enable logging, once per second as your app runs, the HUD writes data in the following format to the console:\n\n```\nmetal-HUD: <first-frame-number-integer>,<graphics-memory-usage-float>,<process-memory-usage-float>,<first-frame-present-interval-float>,<first-frame-gpu-time-float>,...<last-frame-present-interval-float>,<last-frame-gpu-time-float>\n```\n\nFor example, the HUD writes the following data to the console while running the [doc:\/\/com.apple.documentation\/documentation\/Metal\/rendering-a-scene-with-deferred-lighting-in-swift] sample code project:\n\n\n\nWhen you enable shader compiler logging, as your app runs, the Metal HUD emits signposts for each compiled shader. The subsystem is `com.apple.metal.hud` and the category is `Logging`.\n\n```\n[com.apple.metal.hud:Logging] CompileShader: name: ParticleVs compilation-time: 5496250 cached: 0\n[com.apple.metal.hud:Logging] CompileShader: name: ParticlePs compilation-time: 6335000 cached: 0\n```\n\n### Understand encoder GPU time tracking\n\nYou can turn on encoder GPU time tracking by ticking the `Enable Encoder GPU Time Tracking` option in the configuration panel or by setting `MTL_HUD_ENCODER_TIMING_ENABLED` to `1` in the environment variable.\n\nWith encoder GPU time tracking, the Metal Performance HUD leverages [doc:\/\/com.apple.documentation\/documentation\/Metal\/gpu-counters-and-counter-sample-buffers] to track GPU timing for each command encoder to provide enhanced GPU time reporting.\n\n\n\nEncoder GPU time measures GPU activity by tracking the start and end times of work within individual encoder stages (vertex, fragment, and compute). This differs from standard GPU time, which captures the overall duration of command buffers. For command buffers containing many encoders, there may be idle periods in between encoders that can inflate the standard GPU time, providing a less accurate measure of actual GPU workload.\n\nThe overlay shows the encoder GPU time as well as the GPU time and the percentage to the total frame time for each encoder type. Below the timing metrics, a GPU timeline visualizes the GPU execution of the last three frames, updating every second.\n\n\n\nWith the encoder GPU time tracking enabled, the Metal Performance HUD also tracks command buffer and encoder labels. Two new optional metrics become available: Top Labeled Command Buffers and Top Labeled Encoders. These metrics show the three most GPU-intensive command buffers and encoders by label, helping you quickly pinpoint potential performance bottlenecks.\n\n\n\n### Display the value range of metrics\n\nYou can visualize the range of common metrics in the overlay by enabling the Show Metrics Value Range option in the configuration panel or by setting `MTL_HUD_SHOW_VALUE_RANGE` to `1` in the environment variable.\n\nWith this option, the HUD visualizes common metrics in three columns:\n\n- The first column contains the average value of the last 120 frames.\n- The second column contains the minimum values of the last 1200 frames.\n- The third column contains the maximum values of the last 1200 frames.\n\n\n\n## Runtime diagnostics\n\n- **Inspecting live resources at runtime**: Validate your resources by viewing the contents of your textures and buffers while debugging your Metal app.\n- **Validating your app’s Metal API usage**: Catch runtime issues in your Metal app using API Validation.\n- **Validating your app’s Metal shader usage**: Catch common shader runtime issues using Shader Validation while your app is running.\n- **Customizing the Metal Performance HUD**: Modify the appearance of your Metal heads-up display to monitor your graphics performance.\n- **Understanding the Metal Performance HUD metrics**: Learn what each of the metrics reported by the heads-up display indicates.\n- **Gaining performance insights with the Metal Performance HUD**: Catch potential performance issues while your app runs using the Metal heads-up display.\n- **Generating performance reports with the Metal Performance HUD**: Record your app’s performance using the heads-up display.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Validate your resources by viewing the contents of your textures and buffers while debugging your Metal app.",
          "name" : "Inspecting live resources at runtime",
          "url" : "https:\/\/developer.apple.com\/documentation\/Xcode\/Inspecting-live-resources-at-runtime"
        },
        {
          "description" : "Catch runtime issues in your Metal app using API Validation.",
          "name" : "Validating your app’s Metal API usage",
          "url" : "https:\/\/developer.apple.com\/documentation\/Xcode\/Validating-your-apps-Metal-API-usage"
        },
        {
          "description" : "Catch common shader runtime issues using Shader Validation while your app is running.",
          "name" : "Validating your app’s Metal shader usage",
          "url" : "https:\/\/developer.apple.com\/documentation\/Xcode\/Validating-your-apps-Metal-shader-usage"
        },
        {
          "description" : "Modify the appearance of your Metal heads-up display to monitor your graphics performance.",
          "name" : "Customizing the Metal Performance HUD",
          "url" : "https:\/\/developer.apple.com\/documentation\/Xcode\/Customizing-metal-performance-hud"
        },
        {
          "description" : "Learn what each of the metrics reported by the heads-up display indicates.",
          "name" : "Understanding the Metal Performance HUD metrics",
          "url" : "https:\/\/developer.apple.com\/documentation\/Xcode\/Understanding-metal-performance-hud-metrics"
        },
        {
          "description" : "Catch potential performance issues while your app runs using the Metal heads-up display.",
          "name" : "Gaining performance insights with the Metal Performance HUD",
          "url" : "https:\/\/developer.apple.com\/documentation\/Xcode\/Gaining-performance-insights-with-metal-performance-hud"
        },
        {
          "description" : "Record your app’s performance using the heads-up display.",
          "name" : "Generating performance reports with the Metal Performance HUD",
          "url" : "https:\/\/developer.apple.com\/documentation\/Xcode\/Generating-performance-reports-with-metal-performance-hud"
        }
      ],
      "title" : "Runtime diagnostics"
    }
  ],
  "source" : "appleJSON",
  "title" : "Monitoring your Metal app’s graphics performance",
  "url" : "https:\/\/developer.apple.com\/documentation\/Xcode\/Monitoring-your-Metal-apps-graphics-performance"
}