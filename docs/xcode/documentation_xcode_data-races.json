{
  "abstract" : "Detects unsynchronized access to mutable state across multiple threads.",
  "codeExamples" : [
    {
      "code" : "var message: String? = nil\nvar messageIsAvailable: Bool = false\n\/\/ Executed on Thread #1\nfunc producer() {\n    message = \"hello!\"\n    messageIsAvailable = true\n}\n\/\/ Executed on Thread #2\nfunc consumer() {\n    repeat {\n        usleep(1000)\n    } while !messageIsAvailable\n    print(message)\n}",
      "language" : "swift"
    }
  ],
  "contentHash" : "d8981114bd0a0f8ab92885e208e607dc97f717e07c3221efc82143761d8df8f0",
  "crawledAt" : "2025-12-02T06:10:59Z",
  "id" : "E5E1A617-2431-4EE6-9B60-1BA7FAF4F7FE",
  "kind" : "article",
  "overview" : "## Overview\n\nUse this check to detect when multiple threads access the same memory without synchronization, and at least one access is a write. Available in Xcode 8 and later.\n\n### Data race with producer and consumer functions\n\nIn the following example, the `producer()` function sets the global variable `message`, and the `consumer()` function waits for a flag to set before printing the message. Because `producer()` executes on one thread and `consumer()` executes on another thread, their execution can be concurrent, creating a data race.\n\n#### Solution\n\nUse [doc:\/\/com.apple.documentation\/documentation\/Dispatch] APIs to coordinate access to `message` across multiple threads.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/Xcode\/data-races\ncrawled: 2025-12-02T06:10:59Z\n---\n\n# Data races\n\n**Article**\n\nDetects unsynchronized access to mutable state across multiple threads.\n\n## Overview\n\nUse this check to detect when multiple threads access the same memory without synchronization, and at least one access is a write. Available in Xcode 8 and later.\n\n### Data race with producer and consumer functions\n\nIn the following example, the `producer()` function sets the global variable `message`, and the `consumer()` function waits for a flag to set before printing the message. Because `producer()` executes on one thread and `consumer()` executes on another thread, their execution can be concurrent, creating a data race.\n\n```swift\nvar message: String? = nil\nvar messageIsAvailable: Bool = false\n\/\/ Executed on Thread #1\nfunc producer() {\n    message = \"hello!\"\n    messageIsAvailable = true\n}\n\/\/ Executed on Thread #2\nfunc consumer() {\n    repeat {\n        usleep(1000)\n    } while !messageIsAvailable\n    print(message)\n}\n```\n\n#### Solution\n\nUse [doc:\/\/com.apple.documentation\/documentation\/Dispatch] APIs to coordinate access to `message` across multiple threads.\n\n## Thread Sanitizer\n\n- **Swift access races**: Detects unsynchronized access to mutable state across multiple threads in Swift.\n- **Races on collections and other APIs**: Detects when one thread accesses a mutable object while another thread is writing to it.\n- **Uninitialized mutexes**: Detects when you use an uninitialized mutex.\n- **Thread leaks**: Detects when you don’t close threads after use.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Detects unsynchronized access to mutable state across multiple threads in Swift.",
          "name" : "Swift access races",
          "url" : "https:\/\/developer.apple.com\/documentation\/Xcode\/swift-access-races"
        },
        {
          "description" : "Detects when one thread accesses a mutable object while another thread is writing to it.",
          "name" : "Races on collections and other APIs",
          "url" : "https:\/\/developer.apple.com\/documentation\/Xcode\/races-on-collections-and-other-apis"
        },
        {
          "description" : "Detects when you use an uninitialized mutex.",
          "name" : "Uninitialized mutexes",
          "url" : "https:\/\/developer.apple.com\/documentation\/Xcode\/uninitialized-mutexes"
        },
        {
          "description" : "Detects when you don’t close threads after use.",
          "name" : "Thread leaks",
          "url" : "https:\/\/developer.apple.com\/documentation\/Xcode\/thread-leaks"
        }
      ],
      "title" : "Thread Sanitizer"
    }
  ],
  "source" : "appleJSON",
  "title" : "Data races",
  "url" : "https:\/\/developer.apple.com\/documentation\/Xcode\/data-races"
}