{
  "abstract" : "Detects when code accesses a misaligned pointer or creates a misaligned reference.",
  "codeExamples" : [
    {
      "code" : "int8_t *buffer = malloc(64);\nint32_t *pointer = (int32_t *)(buffer + 1);\n*pointer = 42; \/\/ Error: misaligned integer pointer assignment",
      "language" : "occ"
    },
    {
      "code" : "int8_t *buffer = malloc(64);\nint32_t value = 42;\nmemcpy(buffer + 1, &value, sizeof(int32_t)); \/\/ Correct",
      "language" : "occ"
    },
    {
      "code" : "struct A {\n    int32_t i32;\n    int64_t i64;\n};\nint8_t *buffer = malloc(32);\nstruct A *pointer = (struct A *)(buffer + 1);\npointer->i32 = 7; \/\/ Error: pointer is misaligned",
      "language" : "swift"
    },
    {
      "code" : "struct A { ... } __attribute__((packed));",
      "language" : "occ"
    }
  ],
  "contentHash" : "25efe722cc45c34d92ebee5d49ba74696dfd47202a4342ed4d0c1bb81d6b0940",
  "crawledAt" : "2025-12-04T02:40:30Z",
  "id" : "6AD07F7F-1861-436A-93A1-39EBCDFA79B1",
  "kind" : "article",
  "language" : "swift",
  "overview" : "## Overview\n\nIn Xcode 9 and later, you can use this check to detect reads from, or writes to, a misaligned pointer, or when you create a misaligned reference. A pointer misaligns if its address isn’t a multiple of its type’s alignment. Dereferencing a misaligned pointer has undefined behavior, and may result in a crash or degraded performance.\n\nAlignment violations occur frequently in code that serializes or deserializes data. Avoid this issue by using a serialization format that preserves data alignment.\n\n### Misaligned integer pointer assignment in C\n\nIn the following example, the `pointer` variable must have 4-byte alignment, but has only 1-byte alignment:\n\n#### Solution\n\nUse an assignment function like `memcpy`, which can work with unaligned inputs.\n\n### Misaligned structure pointer assignment in C\n\nIn the following example, the `pointer` variable must have 8-byte alignment, but has only 1-byte alignment:\n\n#### Solution\n\nOne solution is to pack the structure. In the following example, the packed `A` structure prevents the compiler from adding padding between members:",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/Xcode\/misaligned-pointer\ncrawled: 2025-12-04T02:40:30Z\n---\n\n# Misaligned pointer\n\n**Article**\n\nDetects when code accesses a misaligned pointer or creates a misaligned reference.\n\n## Overview\n\nIn Xcode 9 and later, you can use this check to detect reads from, or writes to, a misaligned pointer, or when you create a misaligned reference. A pointer misaligns if its address isn’t a multiple of its type’s alignment. Dereferencing a misaligned pointer has undefined behavior, and may result in a crash or degraded performance.\n\nAlignment violations occur frequently in code that serializes or deserializes data. Avoid this issue by using a serialization format that preserves data alignment.\n\n### Misaligned integer pointer assignment in C\n\nIn the following example, the `pointer` variable must have 4-byte alignment, but has only 1-byte alignment:\n\n```occ\nint8_t *buffer = malloc(64);\nint32_t *pointer = (int32_t *)(buffer + 1);\n*pointer = 42; \/\/ Error: misaligned integer pointer assignment\n```\n\n#### Solution\n\nUse an assignment function like `memcpy`, which can work with unaligned inputs.\n\n```occ\nint8_t *buffer = malloc(64);\nint32_t value = 42;\nmemcpy(buffer + 1, &value, sizeof(int32_t)); \/\/ Correct\n```\n\n\n\n### Misaligned structure pointer assignment in C\n\nIn the following example, the `pointer` variable must have 8-byte alignment, but has only 1-byte alignment:\n\n```swift\nstruct A {\n    int32_t i32;\n    int64_t i64;\n};\nint8_t *buffer = malloc(32);\nstruct A *pointer = (struct A *)(buffer + 1);\npointer->i32 = 7; \/\/ Error: pointer is misaligned\n```\n\n#### Solution\n\nOne solution is to pack the structure. In the following example, the packed `A` structure prevents the compiler from adding padding between members:\n\n```occ\nstruct A { ... } __attribute__((packed));\n```\n\n\n\n## Undefined Behavior Sanitizer\n\n- **Invalid Boolean value**: Detects when a program accesses a Boolean variable and its value isn’t true or false.\n- **Out-of-bounds array access**: Detects out-of-bounds access of arrays.\n- **Invalid enumeration value**: Detects when an enumeration variable has an invalid value.\n- **Reaching of unreachable point**: Detects when a program reaches an unreachable point.\n- **Dynamic type violation**: Detects when an object has the wrong dynamic type.\n- **Invalid float cast**: Detects out-of-range casts to, from, or between floating-point types.\n- **Division by zero**: Detects division where the divisor is zero.\n- **Nonnull argument violation**: Detects when an argument incorrectly receives a null value.\n- **Nonnull return value violation**: Detects when a function incorrectly returns null.\n- **Nonnull variable assignment violation**: Detects when you incorrectly assign null to a variable.\n- **Null reference creation and null pointer dereference**: Detects the creation of null references and null pointer dereferences.\n- **Invalid object size**: Detects invalid pointer casts due to differences in the sizes of types.\n- **Invalid shift**: Detects invalid and overflowing shifts.\n- **Integer overflow**: Detects overflow in arithmetic.\n- **Invalid variable-length array**: Detects negative array bounds.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Detects when a program accesses a Boolean variable and its value isn’t true or false.",
          "name" : "Invalid Boolean value",
          "url" : "https:\/\/developer.apple.com\/documentation\/Xcode\/invalid-boolean"
        },
        {
          "description" : "Detects out-of-bounds access of arrays.",
          "name" : "Out-of-bounds array access",
          "url" : "https:\/\/developer.apple.com\/documentation\/Xcode\/out-of-bounds-array-access"
        },
        {
          "description" : "Detects when an enumeration variable has an invalid value.",
          "name" : "Invalid enumeration value",
          "url" : "https:\/\/developer.apple.com\/documentation\/Xcode\/invalid-enumeration-value"
        },
        {
          "description" : "Detects when a program reaches an unreachable point.",
          "name" : "Reaching of unreachable point",
          "url" : "https:\/\/developer.apple.com\/documentation\/Xcode\/reaching-of-unreachable-point"
        },
        {
          "description" : "Detects when an object has the wrong dynamic type.",
          "name" : "Dynamic type violation",
          "url" : "https:\/\/developer.apple.com\/documentation\/Xcode\/dynamic-type-violation"
        },
        {
          "description" : "Detects out-of-range casts to, from, or between floating-point types.",
          "name" : "Invalid float cast",
          "url" : "https:\/\/developer.apple.com\/documentation\/Xcode\/invalid-float-cast"
        },
        {
          "description" : "Detects division where the divisor is zero.",
          "name" : "Division by zero",
          "url" : "https:\/\/developer.apple.com\/documentation\/Xcode\/division-by-zero"
        },
        {
          "description" : "Detects when an argument incorrectly receives a null value.",
          "name" : "Nonnull argument violation",
          "url" : "https:\/\/developer.apple.com\/documentation\/Xcode\/nonnull-argument-violation"
        },
        {
          "description" : "Detects when a function incorrectly returns null.",
          "name" : "Nonnull return value violation",
          "url" : "https:\/\/developer.apple.com\/documentation\/Xcode\/nonnull-return-value-violation"
        },
        {
          "description" : "Detects when you incorrectly assign null to a variable.",
          "name" : "Nonnull variable assignment violation",
          "url" : "https:\/\/developer.apple.com\/documentation\/Xcode\/nonnull-variable-assignment-violation"
        },
        {
          "description" : "Detects the creation of null references and null pointer dereferences.",
          "name" : "Null reference creation and null pointer dereference",
          "url" : "https:\/\/developer.apple.com\/documentation\/Xcode\/null-reference-creation-and-null-pointer-dereference"
        },
        {
          "description" : "Detects invalid pointer casts due to differences in the sizes of types.",
          "name" : "Invalid object size",
          "url" : "https:\/\/developer.apple.com\/documentation\/Xcode\/invalid-object-size"
        },
        {
          "description" : "Detects invalid and overflowing shifts.",
          "name" : "Invalid shift",
          "url" : "https:\/\/developer.apple.com\/documentation\/Xcode\/invalid-shift"
        },
        {
          "description" : "Detects overflow in arithmetic.",
          "name" : "Integer overflow",
          "url" : "https:\/\/developer.apple.com\/documentation\/Xcode\/integer-overflow"
        },
        {
          "description" : "Detects negative array bounds.",
          "name" : "Invalid variable-length array",
          "url" : "https:\/\/developer.apple.com\/documentation\/Xcode\/invalid-variable-length-array"
        }
      ],
      "title" : "Undefined Behavior Sanitizer"
    }
  ],
  "source" : "appleJSON",
  "title" : "Misaligned pointer",
  "url" : "https:\/\/developer.apple.com\/documentation\/Xcode\/misaligned-pointer"
}