{
  "abstract" : "Avoid crashes and potentially insecure situations associated with Mach messages.",
  "codeExamples" : [

  ],
  "contentHash" : "ee8f155725e7109d96bc28430710ff3d13dc0e6edae72b3b9be7b1fe9d71d67b",
  "crawledAt" : "2025-12-03T03:55:03Z",
  "id" : "2F2A734B-121B-4A68-8C7B-F9FF8DBADF40",
  "kind" : "article",
  "language" : "swift",
  "overview" : "## Overview\n\nMach ports represent low-level inter-process communication (IPC) capabilities on the system, and as such are a fundamental and powerful construct. An attacker who gains access to a Mach port for your app or extension potentially gains a lot of privileges they can use to attack your app and other resources on the system.\n\nHigher-level IPC mechanisms, including the Mach Interface Generator (MIG) and [doc:\/\/com.apple.documentation\/documentation\/XPC], are designed to mitigate many of the security issues related to Mach IPC. Using Mach IPC traps directly doesn’t take advantage of these mitigations, and is very difficult to do correctly. Adopt the [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Entitlements\/com.apple.security.hardened-process.platform-restrictions] entitlement in the Enhanced Security capability to turn potentially insecure misuse of Mach and VM APIs into crashes, and use the crash reports to diagnose and fix or remove the potentially insecure code.\n\n### Replace Mach IPC traps with other IPC mechanisms\n\nThe easiest way to fix potentially insecure use of Mach IPC traps is to completely avoid using the API. Instead, use a different IPC mechanism that avoids the potentially insecure situations, for example, [doc:\/\/com.apple.documentation\/documentation\/XPC].\n\n### Diagnose crashes due to additional run-time platform restrictions\n\nIf your process has the [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Entitlements\/com.apple.security.hardened-process.platform-restrictions] entitlement with a value of at least `1` and the system detects a potentially insecure use of Mach IPC, the system crashes your process. The crash report has an exception type of `EXC_GUARD`, and exception subtype of `GUARD_TYPE_MACH_PORT`. The exception message in the crash report is one of these values:",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/Xcode\/conforming-to-mach-ipc-security-restrictions\ncrawled: 2025-12-03T03:55:03Z\n---\n\n# Conforming to Mach IPC security restrictions\n\n**Article**\n\nAvoid crashes and potentially insecure situations associated with Mach messages.\n\n## Overview\n\nMach ports represent low-level inter-process communication (IPC) capabilities on the system, and as such are a fundamental and powerful construct. An attacker who gains access to a Mach port for your app or extension potentially gains a lot of privileges they can use to attack your app and other resources on the system.\n\nHigher-level IPC mechanisms, including the Mach Interface Generator (MIG) and [doc:\/\/com.apple.documentation\/documentation\/XPC], are designed to mitigate many of the security issues related to Mach IPC. Using Mach IPC traps directly doesn’t take advantage of these mitigations, and is very difficult to do correctly. Adopt the [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Entitlements\/com.apple.security.hardened-process.platform-restrictions] entitlement in the Enhanced Security capability to turn potentially insecure misuse of Mach and VM APIs into crashes, and use the crash reports to diagnose and fix or remove the potentially insecure code.\n\n### Replace Mach IPC traps with other IPC mechanisms\n\nThe easiest way to fix potentially insecure use of Mach IPC traps is to completely avoid using the API. Instead, use a different IPC mechanism that avoids the potentially insecure situations, for example, [doc:\/\/com.apple.documentation\/documentation\/XPC].\n\n### Diagnose crashes due to additional run-time platform restrictions\n\nIf your process has the [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Entitlements\/com.apple.security.hardened-process.platform-restrictions] entitlement with a value of at least `1` and the system detects a potentially insecure use of Mach IPC, the system crashes your process. The crash report has an exception type of `EXC_GUARD`, and exception subtype of `GUARD_TYPE_MACH_PORT`. The exception message in the crash report is one of these values:\n\n\n\n## Security and privacy\n\n- **Verifying the origin of your XCFrameworks**: Discover who signed a framework, and take action when that changes.\n- **Enabling enhanced security for your app**: Detect out-of-bounds memory access, use of freed memory, and other potential vulnerabilities.\n- **Creating enhanced security helper extensions**: Reduce opportunities for an attacker to target your app through its extensions.\n- **Adopting type-aware memory allocation**: Reduce the opportunities to treat pointers as data in your code.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Discover who signed a framework, and take action when that changes.",
          "name" : "Verifying the origin of your XCFrameworks",
          "url" : "https:\/\/developer.apple.com\/documentation\/Xcode\/verifying-the-origin-of-your-xcframeworks"
        },
        {
          "description" : "Detect out-of-bounds memory access, use of freed memory, and other potential vulnerabilities.",
          "name" : "Enabling enhanced security for your app",
          "url" : "https:\/\/developer.apple.com\/documentation\/Xcode\/enabling-enhanced-security-for-your-app"
        },
        {
          "description" : "Reduce opportunities for an attacker to target your app through its extensions.",
          "name" : "Creating enhanced security helper extensions",
          "url" : "https:\/\/developer.apple.com\/documentation\/Xcode\/creating-enhanced-security-helper-extensions"
        },
        {
          "description" : "Reduce the opportunities to treat pointers as data in your code.",
          "name" : "Adopting type-aware memory allocation",
          "url" : "https:\/\/developer.apple.com\/documentation\/Xcode\/adopting-type-aware-memory-allocation"
        }
      ],
      "title" : "Security and privacy"
    }
  ],
  "source" : "appleJSON",
  "title" : "Conforming to Mach IPC security restrictions",
  "url" : "https:\/\/developer.apple.com\/documentation\/Xcode\/conforming-to-mach-ipc-security-restrictions"
}