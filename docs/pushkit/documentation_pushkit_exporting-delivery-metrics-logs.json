{
  "abstract" : "Download and analyze push-notification metrics.",
  "codeExamples" : [
    {
      "code" : "curl --compressed -X GET \"https:\/\/example.com\/download\/data.csv\" -o export.csv"
    }
  ],
  "contentHash" : "589468bdd064017c956cefdf84c9e518db12b6b15b3bedcce2a0b9ae512a9638",
  "crawledAt" : "2025-12-05T17:38:00Z",
  "id" : "97913811-1308-41C7-A12C-20CCC29AE89C",
  "kind" : "article",
  "language" : "swift",
  "module" : "PushKit",
  "overview" : "## Overview\n\nUse the CloudKit Console to export Apple Push Notification service (APNs) delivery metrics logs for your apps. To download the push notification metrics report, create a data export token, request data from iCloud Web Services, and download the results when the request completes. For more information about CloudKit and CloudKit Console, see [https:\/\/developer.apple.com\/icloud\/cloudkit\/].\n\nThe push-notification metrics report includes aggregated, rounded metrics on notification states as your notifications pass through APNs. It shows multiple notification statuses, such as `delivered`, `stored`, and `discarded`. It also provides insights into various statistics for notifications, including a detailed breakdown based on push type.\n\n## Create a data export token\n\nTo access log data for your apps, create a data export token by following these steps:\n\nThe token you create is restricted to your developer account, and only gives you access to the APNs data set for the specified app.\n\n## Create a data export request\n\nMake an HTTPS `POST` request to the data export request endpoint at:\n\nSubstitute these values:\n\nSupply your data export token in the `X-Apple-CloudKit-Management-Token` header, and provide a JSON object in the body with these fields:\n\nThe server responds with a JSON object that contains these fields:\n\nThe data export request endpoint might return the following HTTP status codes that represent errors:\n\nYou can request a download that covers the same date range as a previous download. If you make a repeat request within 24 hours, the server returns the same status URL as the original request. If you make a repeat request after 24 hours, the server creates a new request with a new status URL, and any events within the requested time range that are logged after the original request was made are included in the new report.\n\n## Check the status of your data export\n\nMake an HTTPS `GET` request to the status URL, passing your data export token in the `X-Apple-CloudKit-Management-Token` header. The server responds with a JSON object that contains these fields:\n\nThe data export status endpoint might return the following HTTP status codes that represent errors:\n\n## Download the exported data\n\nMake an HTTPS `GET` request to URL in the status object’s `downloadDetails.dataUrl` field to receive a CSV file that contains your exported data:\n\nThe CSV file contains these fields:\n\nApple’s servers retain the exported data for six months. To re-download the data, make another `GET` request to the status URL and download the data from the new download URL.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/PushKit\/exporting-delivery-metrics-logs\ncrawled: 2025-12-05T17:38:00Z\n---\n\n# Exporting delivery metrics logs\n\n**Article**\n\nDownload and analyze push-notification metrics.\n\n## Overview\n\nUse the CloudKit Console to export Apple Push Notification service (APNs) delivery metrics logs for your apps. To download the push notification metrics report, create a data export token, request data from iCloud Web Services, and download the results when the request completes. For more information about CloudKit and CloudKit Console, see [https:\/\/developer.apple.com\/icloud\/cloudkit\/].\n\nThe push-notification metrics report includes aggregated, rounded metrics on notification states as your notifications pass through APNs. It shows multiple notification statuses, such as `delivered`, `stored`, and `discarded`. It also provides insights into various statistics for notifications, including a detailed breakdown based on push type.\n\n\n\n## Create a data export token\n\nTo access log data for your apps, create a data export token by following these steps:\n\n1. Navigate to [https:\/\/icloud.developer.apple.com\/dashboard\/notifications\/teams?settings=account] and log in.\n2. Click Tokens.\n3. Click Create Data Export Token.\n4. Give the token a name and an optional description.\n5. Choose the bundle identifier for the app for which you want to download data.\n6. Choose the Delivery Metrics dataset.\n7. Set an expiration date for the token, up to a maximum of six months in the future.\n8. Click Create Data Export Token.\n9. Securely store the token that you created in step 8.\n\n\n\nThe token you create is restricted to your developer account, and only gives you access to the APNs data set for the specified app.\n\n## Create a data export request\n\nMake an HTTPS `POST` request to the data export request endpoint at:\n\n- `https:\/\/api.icloud.apple.com\/v1\/dataExports\/apns\/teams\/{teamId}\/appId\/{appId}\/datasetName\/deliverymetrics\/request`\n\nSubstitute these values:\n\n\n\nSupply your data export token in the `X-Apple-CloudKit-Management-Token` header, and provide a JSON object in the body with these fields:\n\n\n\nThe server responds with a JSON object that contains these fields:\n\n\n\n\n\nThe data export request endpoint might return the following HTTP status codes that represent errors:\n\n\n\nYou can request a download that covers the same date range as a previous download. If you make a repeat request within 24 hours, the server returns the same status URL as the original request. If you make a repeat request after 24 hours, the server creates a new request with a new status URL, and any events within the requested time range that are logged after the original request was made are included in the new report.\n\n\n\n## Check the status of your data export\n\nMake an HTTPS `GET` request to the status URL, passing your data export token in the `X-Apple-CloudKit-Management-Token` header. The server responds with a JSON object that contains these fields:\n\n\n\n\n\nThe data export status endpoint might return the following HTTP status codes that represent errors:\n\n\n\n## Download the exported data\n\nMake an HTTPS `GET` request to URL in the status object’s `downloadDetails.dataUrl` field to receive a CSV file that contains your exported data:\n\n```\ncurl --compressed -X GET \"https:\/\/example.com\/download\/data.csv\" -o export.csv\n```\n\nThe CSV file contains these fields:\n\n\n\nApple’s servers retain the exported data for six months. To re-download the data, make another `GET` request to the status URL and download the data from the new download URL.\n\n## Data export\n\n- **Exporting broadcast push notification metrics**: Discover how many people subscribe to your broadcast channels, and how many messages they receive.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Discover how many people subscribe to your broadcast channels, and how many messages they receive.",
          "name" : "Exporting broadcast push notification metrics",
          "url" : "https:\/\/developer.apple.com\/documentation\/PushKit\/exporting-broadcast-push-notification-metrics"
        }
      ],
      "title" : "Data export"
    }
  ],
  "source" : "appleJSON",
  "title" : "Exporting delivery metrics logs",
  "url" : "https:\/\/developer.apple.com\/documentation\/PushKit\/exporting-delivery-metrics-logs"
}