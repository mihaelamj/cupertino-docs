{
  "abstract" : "Creates a geometry source whose vertex data resides in the specified Metal buffer, allowing modification through a Metal compute shader.",
  "codeExamples" : [
    {
      "code" : "\/\/ Create and fill a buffer.\nid <MTLDevice> device = self.scnView.device;\nself.geometryBuffer = [device newBufferWithBytes:myData length:myLength options:myOptions];\n\/\/ Create a geometry source from the buffer.\nSCNGeometrySource *source = [SCNGeometrySource geometrySourceWithBuffer:buffer\n                             vertexFormat:myVertexFormat\n                                 semantic:SCNGeometrySourceSemanticVertex\n                              vertexCount:myVertexCount\n                               dataOffset:0\n                               dataStride:0];",
      "language" : "objc"
    },
    {
      "code" : "- (void)renderer:(id <SCNSceneRenderer>)aRenderer willRenderScene:(SCNScene *)scene atTime:(NSTimeInterval)time {\n     \/\/ Get a command buffer and compute encoder from the view (or other renderer).\n     id<MTLCommandBuffer> myCommandBuffer = [aRenderer.commandQueue commandBuffer];\n     id<MTLComputeCommandEncoder> myComputeEncoder = [myCommandBuffer computeCommandEncoder];\n \n     \/\/ Configure the compute command encoder.\n     \/\/ (Note pipeline state is preconfigured outside of the render loop.)\n     [myComputeEncoder setComputePipelineState:self.pipelineState];\n     [myComputeEncoder setBuffer:self.geometryBuffer offset:0 atIndex:0];\n \n     \/\/ Schedule the compute command and commit the command buffer.\n     [myComputeEncoder dispatchThreadgroups:myThreadgroupCount\n                      threadsPerThreadgroup:myThreadCount];\n     [myComputeEncoder endEncoding];\n     [myCommandBuffer commit];\n}",
      "language" : "objc"
    }
  ],
  "contentHash" : "832e06bbda0606279057ec3b76ecb1d9d2667629424acba1297545d28a0f4631",
  "crawledAt" : "2025-12-04T21:36:32Z",
  "declaration" : {
    "code" : "convenience init(buffer: any MTLBuffer, vertexFormat: MTLVertexFormat, semantic: SCNGeometrySource.Semantic, vertexCount: Int, dataOffset offset: Int, dataStride stride: Int)",
    "language" : "swift"
  },
  "id" : "E75205E9-5F93-460F-A7E5-EE4CA173224F",
  "kind" : "unknown",
  "language" : "swift",
  "module" : "SceneKit",
  "overview" : "## Return Value\n\nA new geometry source object.\n\n## Discussion\n\nUse this method to create a geometry source whose underlying data can be modified at render time by a Metal compute shader running on the GPU. To create a [doc:\/\/com.apple.documentation\/documentation\/Metal\/MTLBuffer] object for use with a geometry source, use the [doc:\/\/com.apple.scenekit\/documentation\/SceneKit\/SCNSceneRenderer\/device] property of the SceneKit view (or other renderer) responsible for drawing your scene.\n\nThen, to modify the buffer’s contents at render time, implement a scene renderer delegate and schedule a compute command encoder during a render delegate method such as [doc:\/\/com.apple.scenekit\/documentation\/SceneKit\/SCNSceneRendererDelegate\/renderer(_:willRenderScene:atTime:)].",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "tvOS",
    "visionOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/SceneKit\/SCNGeometrySource\/init(buffer:vertexFormat:semantic:vertexCount:dataOffset:dataStride:)\ncrawled: 2025-12-04T21:36:32Z\n---\n\n# init(buffer:vertexFormat:semantic:vertexCount:dataOffset:dataStride:)\n\n**Initializer**\n\nCreates a geometry source whose vertex data resides in the specified Metal buffer, allowing modification through a Metal compute shader.\n\n## Declaration\n\n```swift\nconvenience init(buffer: any MTLBuffer, vertexFormat: MTLVertexFormat, semantic: SCNGeometrySource.Semantic, vertexCount: Int, dataOffset offset: Int, dataStride stride: Int)\n```\n\n## Parameters\n\n- **buffer**: A Metal buffer containing per-vertex data for the geometry source.\n- **vertexFormat**: The type of per-vertex data in the buffer. A [doc:\/\/com.apple.documentation\/documentation\/Metal\/MTLVertexFormat] value defines the number of components for each vector in the geometry source and the data type and size of each component.\n- **semantic**: The semantic value (or attribute) that the geometry source describes for each vertex. See Geometry Semantic Identifiers for available values.\n- **vertexCount**: The number of vertices in the geometry source.\n- **offset**: The offset, in bytes, from the beginning of the data to the first vector component to be used in the geometry source.\n- **stride**: The number of bytes from each vector to the next in the data.\n\n## Return Value\n\nA new geometry source object.\n\n## Discussion\n\nUse this method to create a geometry source whose underlying data can be modified at render time by a Metal compute shader running on the GPU. To create a [doc:\/\/com.apple.documentation\/documentation\/Metal\/MTLBuffer] object for use with a geometry source, use the [doc:\/\/com.apple.scenekit\/documentation\/SceneKit\/SCNSceneRenderer\/device] property of the SceneKit view (or other renderer) responsible for drawing your scene.\n\n```objc\n\/\/ Create and fill a buffer.\nid <MTLDevice> device = self.scnView.device;\nself.geometryBuffer = [device newBufferWithBytes:myData length:myLength options:myOptions];\n\/\/ Create a geometry source from the buffer.\nSCNGeometrySource *source = [SCNGeometrySource geometrySourceWithBuffer:buffer\n                             vertexFormat:myVertexFormat\n                                 semantic:SCNGeometrySourceSemanticVertex\n                              vertexCount:myVertexCount\n                               dataOffset:0\n                               dataStride:0];\n```\n\nThen, to modify the buffer’s contents at render time, implement a scene renderer delegate and schedule a compute command encoder during a render delegate method such as [doc:\/\/com.apple.scenekit\/documentation\/SceneKit\/SCNSceneRendererDelegate\/renderer(_:willRenderScene:atTime:)].\n\n```objc\n- (void)renderer:(id <SCNSceneRenderer>)aRenderer willRenderScene:(SCNScene *)scene atTime:(NSTimeInterval)time {\n     \/\/ Get a command buffer and compute encoder from the view (or other renderer).\n     id<MTLCommandBuffer> myCommandBuffer = [aRenderer.commandQueue commandBuffer];\n     id<MTLComputeCommandEncoder> myComputeEncoder = [myCommandBuffer computeCommandEncoder];\n \n     \/\/ Configure the compute command encoder.\n     \/\/ (Note pipeline state is preconfigured outside of the render loop.)\n     [myComputeEncoder setComputePipelineState:self.pipelineState];\n     [myComputeEncoder setBuffer:self.geometryBuffer offset:0 atIndex:0];\n \n     \/\/ Schedule the compute command and commit the command buffer.\n     [myComputeEncoder dispatchThreadgroups:myThreadgroupCount\n                      threadsPerThreadgroup:myThreadCount];\n     [myComputeEncoder endEncoding];\n     [myCommandBuffer commit];\n}\n```\n\n\n\n",
  "sections" : [

  ],
  "source" : "appleJSON",
  "title" : "init(buffer:vertexFormat:semantic:vertexCount:dataOffset:dataStride:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/SceneKit\/SCNGeometrySource\/init(buffer:vertexFormat:semantic:vertexCount:dataOffset:dataStride:)"
}