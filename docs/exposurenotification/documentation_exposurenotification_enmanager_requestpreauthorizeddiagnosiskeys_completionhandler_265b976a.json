{
  "abstract" : "Requests diagnosis keys after the user authorizes sharing them.",
  "codeExamples" : [

  ],
  "contentHash" : "c736c1f2851141406bcab437c17117055e49cae58d3c61a2e3bbaea29bd34650",
  "crawledAt" : "2025-12-02T19:47:42Z",
  "declaration" : {
    "code" : "func requestPreAuthorizedDiagnosisKeys(completionHandler: @escaping ((any Error)?) -> Void)",
    "language" : "swift"
  },
  "id" : "112E25D8-6BF5-4C83-AC2B-1906D783305E",
  "kind" : "method",
  "language" : "swift",
  "module" : "Exposure Notification",
  "overview" : "## Discussion\n\nIf the user authorizes sharing of diagnosis keys and receives a positive test result within five days, call this method to retrieve the preauthorized keys, but only after informing the user of the positive result. [doc:\/\/com.apple.exposurenotification\/documentation\/ExposureNotification\/ENDiagnosisKeysAvailableHandler] receives the keys when the user unlocks their device. Subsequent calls to this method have no effect. If more than five days pass after the user authorizes sharing of their keys, or if the user declines to share their keys, the completion handler returns an error.",
  "platforms" : [
    "iOS",
    "iPadOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/ExposureNotification\/ENManager\/requestPreAuthorizedDiagnosisKeys(completionHandler:)\ncrawled: 2025-12-02T19:47:42Z\n---\n\n# requestPreAuthorizedDiagnosisKeys(completionHandler:)\n\n**Instance Method**\n\nRequests diagnosis keys after the user authorizes sharing them.\n\n## Declaration\n\n```swift\nfunc requestPreAuthorizedDiagnosisKeys(completionHandler: @escaping ((any Error)?) -> Void)\n```\n\n```swift\nfunc requestPreAuthorizedDiagnosisKeys() async throws\n```\n\n## Parameters\n\n- **completionHandler**: The completion handler the framework calls when the method completes.\n\n## Discussion\n\n\n\nIf the user authorizes sharing of diagnosis keys and receives a positive test result within five days, call this method to retrieve the preauthorized keys, but only after informing the user of the positive result. [doc:\/\/com.apple.exposurenotification\/documentation\/ExposureNotification\/ENDiagnosisKeysAvailableHandler] receives the keys when the user unlocks their device. Subsequent calls to this method have no effect. If more than five days pass after the user authorizes sharing of their keys, or if the user declines to share their keys, the completion handler returns an error.\n\n\n\n## Preauthorizing Exposure Keys\n\n- **preAuthorizeDiagnosisKeys(completionHandler:)**: Allows users to authorize a one-time release of diagnosis keys within five days of the authorization.\n- **ENDiagnosisKeysAvailableHandler**: The handler the system invokes after requesting diagnosis keys.\n- **diagnosisKeysAvailableHandler**: The handler that receives available diagnosis keys after a successful preauthorization.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Allows users to authorize a one-time release of diagnosis keys within five days of the authorization.",
          "name" : "preAuthorizeDiagnosisKeys(completionHandler:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/ExposureNotification\/ENManager\/preAuthorizeDiagnosisKeys(completionHandler:)"
        },
        {
          "description" : "The handler the system invokes after requesting diagnosis keys.",
          "name" : "ENDiagnosisKeysAvailableHandler",
          "url" : "https:\/\/developer.apple.com\/documentation\/ExposureNotification\/ENDiagnosisKeysAvailableHandler"
        },
        {
          "description" : "The handler that receives available diagnosis keys after a successful preauthorization.",
          "name" : "diagnosisKeysAvailableHandler",
          "url" : "https:\/\/developer.apple.com\/documentation\/ExposureNotification\/ENManager\/diagnosisKeysAvailableHandler"
        }
      ],
      "title" : "Preauthorizing Exposure Keys"
    }
  ],
  "source" : "appleJSON",
  "title" : "requestPreAuthorizedDiagnosisKeys(completionHandler:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/ExposureNotification\/ENManager\/requestPreAuthorizedDiagnosisKeys(completionHandler:)"
}