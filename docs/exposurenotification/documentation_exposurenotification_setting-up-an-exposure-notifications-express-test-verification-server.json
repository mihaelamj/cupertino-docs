{
  "abstract" : "Validate positive diagnoses for app-less exposure notifications.",
  "codeExamples" : [

  ],
  "contentHash" : "6be1cd5b6b1c4b5e176e8fc600e10dc4d098f5a60166a52f6ec06c54419d50ad",
  "crawledAt" : "2025-12-02T19:47:27Z",
  "id" : "3C736C91-630F-4823-8292-2C5728552FF5",
  "kind" : "article",
  "language" : "swift",
  "module" : "Exposure Notification",
  "overview" : "## Overview\n\nExposure Notifications Express requires a Public Health Authority (PHA) to have a test verification server that verifies positive diagnoses received from a test center or other healthcare provider. A test verification server includes a mechanism to request a verification code for users with a positive COVID-19 test result. The test verification server also has APIs that allow Exposure Notifications Express to authenticate the user’s positive diagnosis before uploading exposure keys to the PHA’s key server\n\nGoogle has created a reference implementation of a [https:\/\/github.com\/google\/exposure-notifications-verification-server] that you can use as a starting point or as a reference while implementing your own test verification server.\n\n### Configure the Test Verification Server\n\nExposure Notifications Express works by reading configuration values for a PHA from Apple Business Registry (ABR). It uses these configuration values to locate a PHA’s servers and to adjust its calculations and behavior based on the values entered by that PHA. To set up a test verification server to work with Exposure Notifications Express, a PHA specifies the following values:\n\nTo see all of the configuration options available with Exposure Notifications Express, see [doc:\/\/com.apple.exposurenotification\/documentation\/ExposureNotification\/configuring-exposure-notifications].\n\n### Generate Verification Codes on Request\n\nPHAs use the test verification server to generate verification codes for positive test results. The verification code may be an 8-digit number that can be read over the phone or a deep link that can be texted or emailed to the user. A test verification server can use any one-time password algorithm to generate a verification code as long as the resulting code uniquely identifies one test result.\n\n### Exchange Verification Codes for Tokens\n\nTest verification servers must provide an endpoint to allow an iPhone to exchange a verification code for a long-term authentication token. PHAs register the URL for this endpoint with ABR as the Test Verification URL (`testVerificationURL`). This endpoint expects a JSON dictionary as the body of an HTTP POST request.\n\nThis endpoint supports one key in the request dictionary:\n\nRequests must also include a custom HTTP header field called `X-API-Key`, with its value set to the test verification server’s secret API key. Test verification servers reject requests without this header or if the value in the header doesn’t match the API key registered with ABR.\n\nThe test verification server responds to these requests by returning a JSON dictionary in the body of the response. Here are the keys that the response dictionary uses:\n\n### Respond to Verification Certificate Requests\n\nBefore uploading keys to the key server, Exposure Notifications Express contacts the verification server at the Test Verification Certificate URL (`testVerificationCertificateURL`) registered with ABR to get a certificate and metadata for the key batch.\n\nThe test verification server expects requests to this URL to contain a JSON dictionary in the body of an HTTP POST request. Here are the keys that dictionary supports:\n\nRequests to this URL must also include a custom HTTP header field called `X-API-Key`, with its value set to the test verification server’s API key. Test verification servers reject requests without this header, or with the wrong value in the header.\n\nThe test validation server responds to requests by returning JSON in the body of the response. Here are the keys for that response dictionary:",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/ExposureNotification\/setting-up-an-exposure-notifications-express-test-verification-server\ncrawled: 2025-12-02T19:47:27Z\n---\n\n# Setting Up an Exposure Notifications Express Test Verification Server\n\n**Article**\n\nValidate positive diagnoses for app-less exposure notifications.\n\n## Overview\n\nExposure Notifications Express requires a Public Health Authority (PHA) to have a test verification server that verifies positive diagnoses received from a test center or other healthcare provider. A test verification server includes a mechanism to request a verification code for users with a positive COVID-19 test result. The test verification server also has APIs that allow Exposure Notifications Express to authenticate the user’s positive diagnosis before uploading exposure keys to the PHA’s key server\n\nGoogle has created a reference implementation of a [https:\/\/github.com\/google\/exposure-notifications-verification-server] that you can use as a starting point or as a reference while implementing your own test verification server.\n\n### Configure the Test Verification Server\n\nExposure Notifications Express works by reading configuration values for a PHA from Apple Business Registry (ABR). It uses these configuration values to locate a PHA’s servers and to adjust its calculations and behavior based on the values entered by that PHA. To set up a test verification server to work with Exposure Notifications Express, a PHA specifies the following values:\n\n- **Test Verification Intro Message**: The `testVerificationIntroMessage` is a string that iOS presents to the user to explain the purpose of test verification and key upload.\n- **Test Verification URL**: Exposure Notifications Express uses the `testVerificationURL` to exchange verification codes for long-term authentication tokens.\n- **Test Verification Certificate URL**: Exposure Notifications Express uses the `testVerificationCertificateURL` to upload an HMAC and long-term authentication token and receive back a certificate and key metadata.\n- **Test Verification API Key**: iOS needs the value in `testVerificationAPIKey` to communicate with your test verification server.\n- **Verification Code Learn More URL**: Exposure Notifications Express presents the `verificationCodeLearnMoreURL` to the user when they have received a positive diagnosis. The link contains information on how to use the verification code and provides way to request help if the user experiences problems.\n\nTo see all of the configuration options available with Exposure Notifications Express, see [doc:\/\/com.apple.exposurenotification\/documentation\/ExposureNotification\/configuring-exposure-notifications].\n\n### Generate Verification Codes on Request\n\nPHAs use the test verification server to generate verification codes for positive test results. The verification code may be an 8-digit number that can be read over the phone or a deep link that can be texted or emailed to the user. A test verification server can use any one-time password algorithm to generate a verification code as long as the resulting code uniquely identifies one test result.\n\n\n\n### Exchange Verification Codes for Tokens\n\nTest verification servers must provide an endpoint to allow an iPhone to exchange a verification code for a long-term authentication token. PHAs register the URL for this endpoint with ABR as the Test Verification URL (`testVerificationURL`). This endpoint expects a JSON dictionary as the body of an HTTP POST request.\n\nThis endpoint supports one key in the request dictionary:\n\n\n\nRequests must also include a custom HTTP header field called `X-API-Key`, with its value set to the test verification server’s secret API key. Test verification servers reject requests without this header or if the value in the header doesn’t match the API key registered with ABR.\n\nThe test verification server responds to these requests by returning a JSON dictionary in the body of the response. Here are the keys that the response dictionary uses:\n\n\n\n### Respond to Verification Certificate Requests\n\nBefore uploading keys to the key server, Exposure Notifications Express contacts the verification server at the Test Verification Certificate URL (`testVerificationCertificateURL`) registered with ABR to get a certificate and metadata for the key batch.\n\nThe test verification server expects requests to this URL to contain a JSON dictionary in the body of an HTTP POST request. Here are the keys that dictionary supports:\n\n\n\nRequests to this URL must also include a custom HTTP header field called `X-API-Key`, with its value set to the test verification server’s API key. Test verification servers reject requests without this header, or with the wrong value in the header.\n\nThe test validation server responds to requests by returning JSON in the body of the response. Here are the keys for that response dictionary:\n\n\n\n## Server Configuration\n\n- **Configuring a Key Server for Exposure Notifications Express**: Support exposure key upload and download for app-less exposure notifications.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Support exposure key upload and download for app-less exposure notifications.",
          "name" : "Configuring a Key Server for Exposure Notifications Express",
          "url" : "https:\/\/developer.apple.com\/documentation\/ExposureNotification\/configuring-a-key-server-for-exposure-notifications-express"
        }
      ],
      "title" : "Server Configuration"
    }
  ],
  "source" : "appleJSON",
  "title" : "Setting Up an Exposure Notifications Express Test Verification Server",
  "url" : "https:\/\/developer.apple.com\/documentation\/ExposureNotification\/setting-up-an-exposure-notifications-express-test-verification-server"
}