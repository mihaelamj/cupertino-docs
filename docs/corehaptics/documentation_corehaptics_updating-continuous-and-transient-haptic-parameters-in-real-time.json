{
  "abstract" : "Generate continuous and transient haptic patterns in response to user touch.",
  "codeExamples" : [
    {
      "code" : "\/\/ Start the haptic engine for the first time.\ndo {\n    try self.engine.start()\n} catch {\n    print(\"Failed to start the engine: \\(error)\")\n}",
      "language" : "swift"
    },
    {
      "code" : "\/\/ Create an intensity parameter:\nlet intensity = CHHapticEventParameter(parameterID: .hapticIntensity,\n                                       value: initialIntensity)\n\n\/\/ Create a sharpness parameter:\nlet sharpness = CHHapticEventParameter(parameterID: .hapticSharpness,\n                                       value: initialSharpness)\n\n\/\/ Create a continuous event with a long duration from the parameters.\nlet continuousEvent = CHHapticEvent(eventType: .hapticContinuous,\n                                    parameters: [intensity, sharpness],\n                                    relativeTime: 0,\n                                    duration: 100)\n\ndo {\n    \/\/ Create a pattern from the continuous haptic event.\n    let pattern = try CHHapticPattern(events: [continuousEvent], parameters: [])\n    \n    \/\/ Create a player from the continuous haptic pattern.\n    continuousPlayer = try engine.makeAdvancedPlayer(with: pattern)\n    \n} catch let error {\n    print(\"Pattern Player Creation Error: \\(error)\")\n}\n\ncontinuousPlayer.completionHandler = { _ in\n    DispatchQueue.main.async {\n        \/\/ Restore original color.\n        self.continuousPalette.backgroundColor = self.padColor\n    }\n}",
      "language" : "swift"
    },
    {
      "code" : "\/\/ Normalize coordinates to a [0, 1] spectrum.\nlet normalizedLocation = normalizeCoordinates(clippedLocation, toView: view)\n\n\/\/ The intensity should be highest at the top, opposite of the iOS y-axis direction, so subtract.\nlet eventIntensity: Float = 1 - Float(normalizedLocation.y)\n\n\/\/ The sharpness spectrum is 0 to 1. Map the x-coordinate to that range.\nlet eventSharpness: Float = Float(normalizedLocation.x)",
      "language" : "swift"
    },
    {
      "code" : "\/\/ Create dynamic parameters for the updated intensity & sharpness.\nlet intensityParameter = CHHapticDynamicParameter(parameterID: .hapticIntensityControl,\n                                                  value: dynamicIntensity,\n                                                  relativeTime: 0)\n\nlet sharpnessParameter = CHHapticDynamicParameter(parameterID: .hapticSharpnessControl,\n                                                  value: dynamicSharpness,\n                                                  relativeTime: 0)\n\n\/\/ Send dynamic parameters to the haptic player.\ndo {\n    try continuousPlayer.sendParameters([intensityParameter, sharpnessParameter],\n                                        atTime: 0)\n} catch let error {\n    print(\"Dynamic Parameter Error: \\(error)\")\n}",
      "language" : "swift"
    },
    {
      "code" : "\/\/ Stop playing the haptic pattern.\ndo {\n    try continuousPlayer.stop(atTime: CHHapticTimeImmediate)\n} catch let error {\n    print(\"Error stopping the continuous haptic player: \\(error)\")\n}",
      "language" : "swift"
    },
    {
      "code" : "timer.schedule(deadline: .now() + .milliseconds(750), repeating: .milliseconds(600))\ntimer.setEventHandler() { [unowned self] in\n    \n    \/\/ Recalibrate sharpness and intensity each time the timer fires.\n    let newLocation = press.location(in: self.transientPalette)\n    let (sharpness, intensity) = self.sharpnessAndIntensityAt(location: newLocation, in: self.transientPalette)\n    \n    self.playHapticTransient(time: CHHapticTimeImmediate,\n                             intensity: intensity,\n                             sharpness: sharpness)\n}",
      "language" : "swift"
    },
    {
      "code" : "\/\/ Create an event (static) parameter to represent the haptic's intensity.\nlet intensityParameter = CHHapticEventParameter(parameterID: .hapticIntensity,\n                                                value: intensity)\n\n\/\/ Create an event (static) parameter to represent the haptic's sharpness.\nlet sharpnessParameter = CHHapticEventParameter(parameterID: .hapticSharpness,\n                                                value: sharpness)\n\n\/\/ Create an event to represent the transient haptic pattern.\nlet event = CHHapticEvent(eventType: .hapticTransient,\n                          parameters: [intensityParameter, sharpnessParameter],\n                          relativeTime: 0)\n\n\/\/ Create a pattern from the haptic event.\ndo {\n    let pattern = try CHHapticPattern(events: [event], parameters: [])\n    \n    \/\/ Create a player to play the haptic pattern.\n    let player = try engine.makePlayer(with: pattern)\n    try player.start(atTime: CHHapticTimeImmediate) \/\/ Play now.\n} catch let error {\n    print(\"Error creating a haptic transient pattern: \\(error)\")\n}",
      "language" : "swift"
    }
  ],
  "contentHash" : "1a85796f2f9b64cdd8f9610f6ccfb3eaee03989890cbbb2c749be934e6c6b821",
  "crawledAt" : "2025-12-02T15:47:57Z",
  "id" : "2D1CBA24-7812-443F-B23E-DB474CCFDDA4",
  "kind" : "unknown",
  "language" : "swift",
  "module" : "Core Haptics",
  "overview" : "## Overview\n\nThis sample, HapticPalette, defines a two-dimensional touch area, where the x-axis varies the haptic pattern’s sharpness, and the y-axis maps to haptic intensity. Use this interface to explore the range of haptic patterns that you can create with Core Haptics. By sliding your finger inside the bounded area, you can vary the parameters of the generated haptic pattern.\n\n\n\n### Configure the App to Play Haptics\n\nThis sample checks for device compatibility and sets up an instance of [doc:\/\/com.apple.corehaptics\/documentation\/CoreHaptics\/CHHapticEngine] on launch. Before proceeding, start the engine, so it can begin accepting haptics requests.\n\nSee [doc:\/\/com.apple.corehaptics\/documentation\/CoreHaptics\/preparing-your-app-to-play-haptics] for more information about setting up the engine.\n\n### Create a Continuous Haptic Pattern\n\nAs the app demonstrates, you can create a sustained vibration by generating a continuous haptic pattern of nonzero duration. When you first create the pattern, on app launch, set the intensity and sharpness through an event parameter.\n\nThe sample app allows you to change the continuous pattern’s intensity and sharpness by dragging your finger inside the region labeled Continuous. This region is a view that translates the touch coordinates into normalized intensity and sharpness values. To enable this behavior, the code attaches a [doc:\/\/com.apple.documentation\/documentation\/UIKit\/UILongPressGestureRecognizer] to each palette view. When the user begins to drag a finger in the view, the gesture handler maps the touch coordinates to intensity and sharpness values.\n\nThe normalized mapping converts the user’s finger location to the available spectrum. Using these normalized values, you can create intensity and sharpness events that determine how the haptic pattern feels to the user. In this example, touching the palette area in the upper-right corner generates a crisp haptic vibration at full strength.\n\nThe app retains the original pattern player instead of creating a new one with each change. To tell the continuous haptic pattern player to change or modulate its haptic as it’s playing, send dynamic parameters to the player.\n\n### Alter the Continuous Haptic Pattern by Sending Dynamic Parameters\n\nTo vary a continuous haptic pattern, send dynamic parameters of class [doc:\/\/com.apple.corehaptics\/documentation\/CoreHaptics\/CHHapticDynamicParameter] to the original pattern. This modifies the haptic pattern as it’s playing. In this example, the dynamic parameters for intensity and sharpness immediately change the haptic pattern’s strength and character to follow the user’s finger.\n\nOnly when the gesture ends does the app stop the pattern player.\n\nWhen the app sends the continuous pattern player a dynamic parameter, the value of that parameter changes immediately, resulting in a viscerally different haptic pattern on the device. If your app needs to change the parameter value gradually, consider scheduling a [doc:\/\/com.apple.corehaptics\/documentation\/CoreHaptics\/CHHapticParameterCurve].\n\n### Create a Transient Haptic Pattern\n\nThe bottom half of the screen generates transient haptic experiences. A transient haptic event is momentary. This sample generates a transient haptic pattern when the gesture begins. It’s also helpful to generate subsequent transient haptic patterns if the user continues to interact with the interface. As long as the user’s finger remains inside the transient zone, the app continues to create a new transient haptic pattern based on the latest sharpness and intensity values. To accomplish this spacing, you use a dispatch timer to separate the transient haptic patterns by a time interval of 600 milliseconds, so they feel distinct.\n\nAsk the engine to create a player from the transient pattern when the timer fires, and then play it.\n\nCreating haptic pattern players is inexpensive, so you don’t need to keep them around. Even if the user slides rapidly across the touch zone, the engine creates players, plays them, and discards them without lag.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/CoreHaptics\/updating-continuous-and-transient-haptic-parameters-in-real-time\ncrawled: 2025-12-02T15:47:57Z\n---\n\n# Updating Continuous and Transient Haptic Parameters in Real Time\n\n**Sample Code**\n\nGenerate continuous and transient haptic patterns in response to user touch.\n\n## Overview\n\nThis sample, HapticPalette, defines a two-dimensional touch area, where the x-axis varies the haptic pattern’s sharpness, and the y-axis maps to haptic intensity. Use this interface to explore the range of haptic patterns that you can create with Core Haptics. By sliding your finger inside the bounded area, you can vary the parameters of the generated haptic pattern.\n\n\n\n\n\n### Configure the App to Play Haptics\n\nThis sample checks for device compatibility and sets up an instance of [doc:\/\/com.apple.corehaptics\/documentation\/CoreHaptics\/CHHapticEngine] on launch. Before proceeding, start the engine, so it can begin accepting haptics requests.\n\n```swift\n\/\/ Start the haptic engine for the first time.\ndo {\n    try self.engine.start()\n} catch {\n    print(\"Failed to start the engine: \\(error)\")\n}\n```\n\nSee [doc:\/\/com.apple.corehaptics\/documentation\/CoreHaptics\/preparing-your-app-to-play-haptics] for more information about setting up the engine.\n\n### Create a Continuous Haptic Pattern\n\nAs the app demonstrates, you can create a sustained vibration by generating a continuous haptic pattern of nonzero duration. When you first create the pattern, on app launch, set the intensity and sharpness through an event parameter.\n\n```swift\n\/\/ Create an intensity parameter:\nlet intensity = CHHapticEventParameter(parameterID: .hapticIntensity,\n                                       value: initialIntensity)\n\n\/\/ Create a sharpness parameter:\nlet sharpness = CHHapticEventParameter(parameterID: .hapticSharpness,\n                                       value: initialSharpness)\n\n\/\/ Create a continuous event with a long duration from the parameters.\nlet continuousEvent = CHHapticEvent(eventType: .hapticContinuous,\n                                    parameters: [intensity, sharpness],\n                                    relativeTime: 0,\n                                    duration: 100)\n\ndo {\n    \/\/ Create a pattern from the continuous haptic event.\n    let pattern = try CHHapticPattern(events: [continuousEvent], parameters: [])\n    \n    \/\/ Create a player from the continuous haptic pattern.\n    continuousPlayer = try engine.makeAdvancedPlayer(with: pattern)\n    \n} catch let error {\n    print(\"Pattern Player Creation Error: \\(error)\")\n}\n\ncontinuousPlayer.completionHandler = { _ in\n    DispatchQueue.main.async {\n        \/\/ Restore original color.\n        self.continuousPalette.backgroundColor = self.padColor\n    }\n}\n```\n\nThe sample app allows you to change the continuous pattern’s intensity and sharpness by dragging your finger inside the region labeled Continuous. This region is a view that translates the touch coordinates into normalized intensity and sharpness values. To enable this behavior, the code attaches a [doc:\/\/com.apple.documentation\/documentation\/UIKit\/UILongPressGestureRecognizer] to each palette view. When the user begins to drag a finger in the view, the gesture handler maps the touch coordinates to intensity and sharpness values.\n\n```swift\n\/\/ Normalize coordinates to a [0, 1] spectrum.\nlet normalizedLocation = normalizeCoordinates(clippedLocation, toView: view)\n\n\/\/ The intensity should be highest at the top, opposite of the iOS y-axis direction, so subtract.\nlet eventIntensity: Float = 1 - Float(normalizedLocation.y)\n\n\/\/ The sharpness spectrum is 0 to 1. Map the x-coordinate to that range.\nlet eventSharpness: Float = Float(normalizedLocation.x)\n```\n\nThe normalized mapping converts the user’s finger location to the available spectrum. Using these normalized values, you can create intensity and sharpness events that determine how the haptic pattern feels to the user. In this example, touching the palette area in the upper-right corner generates a crisp haptic vibration at full strength.\n\nThe app retains the original pattern player instead of creating a new one with each change. To tell the continuous haptic pattern player to change or modulate its haptic as it’s playing, send dynamic parameters to the player.\n\n### Alter the Continuous Haptic Pattern by Sending Dynamic Parameters\n\nTo vary a continuous haptic pattern, send dynamic parameters of class [doc:\/\/com.apple.corehaptics\/documentation\/CoreHaptics\/CHHapticDynamicParameter] to the original pattern. This modifies the haptic pattern as it’s playing. In this example, the dynamic parameters for intensity and sharpness immediately change the haptic pattern’s strength and character to follow the user’s finger.\n\n```swift\n\/\/ Create dynamic parameters for the updated intensity & sharpness.\nlet intensityParameter = CHHapticDynamicParameter(parameterID: .hapticIntensityControl,\n                                                  value: dynamicIntensity,\n                                                  relativeTime: 0)\n\nlet sharpnessParameter = CHHapticDynamicParameter(parameterID: .hapticSharpnessControl,\n                                                  value: dynamicSharpness,\n                                                  relativeTime: 0)\n\n\/\/ Send dynamic parameters to the haptic player.\ndo {\n    try continuousPlayer.sendParameters([intensityParameter, sharpnessParameter],\n                                        atTime: 0)\n} catch let error {\n    print(\"Dynamic Parameter Error: \\(error)\")\n}\n```\n\n\n\nOnly when the gesture ends does the app stop the pattern player.\n\n```swift\n\/\/ Stop playing the haptic pattern.\ndo {\n    try continuousPlayer.stop(atTime: CHHapticTimeImmediate)\n} catch let error {\n    print(\"Error stopping the continuous haptic player: \\(error)\")\n}\n```\n\nWhen the app sends the continuous pattern player a dynamic parameter, the value of that parameter changes immediately, resulting in a viscerally different haptic pattern on the device. If your app needs to change the parameter value gradually, consider scheduling a [doc:\/\/com.apple.corehaptics\/documentation\/CoreHaptics\/CHHapticParameterCurve].\n\n### Create a Transient Haptic Pattern\n\nThe bottom half of the screen generates transient haptic experiences. A transient haptic event is momentary. This sample generates a transient haptic pattern when the gesture begins. It’s also helpful to generate subsequent transient haptic patterns if the user continues to interact with the interface. As long as the user’s finger remains inside the transient zone, the app continues to create a new transient haptic pattern based on the latest sharpness and intensity values. To accomplish this spacing, you use a dispatch timer to separate the transient haptic patterns by a time interval of 600 milliseconds, so they feel distinct.\n\n```swift\ntimer.schedule(deadline: .now() + .milliseconds(750), repeating: .milliseconds(600))\ntimer.setEventHandler() { [unowned self] in\n    \n    \/\/ Recalibrate sharpness and intensity each time the timer fires.\n    let newLocation = press.location(in: self.transientPalette)\n    let (sharpness, intensity) = self.sharpnessAndIntensityAt(location: newLocation, in: self.transientPalette)\n    \n    self.playHapticTransient(time: CHHapticTimeImmediate,\n                             intensity: intensity,\n                             sharpness: sharpness)\n}\n```\n\nAsk the engine to create a player from the transient pattern when the timer fires, and then play it.\n\n```swift\n\/\/ Create an event (static) parameter to represent the haptic's intensity.\nlet intensityParameter = CHHapticEventParameter(parameterID: .hapticIntensity,\n                                                value: intensity)\n\n\/\/ Create an event (static) parameter to represent the haptic's sharpness.\nlet sharpnessParameter = CHHapticEventParameter(parameterID: .hapticSharpness,\n                                                value: sharpness)\n\n\/\/ Create an event to represent the transient haptic pattern.\nlet event = CHHapticEvent(eventType: .hapticTransient,\n                          parameters: [intensityParameter, sharpnessParameter],\n                          relativeTime: 0)\n\n\/\/ Create a pattern from the haptic event.\ndo {\n    let pattern = try CHHapticPattern(events: [event], parameters: [])\n    \n    \/\/ Create a player to play the haptic pattern.\n    let player = try engine.makePlayer(with: pattern)\n    try player.start(atTime: CHHapticTimeImmediate) \/\/ Play now.\n} catch let error {\n    print(\"Error creating a haptic transient pattern: \\(error)\")\n}\n```\n\nCreating haptic pattern players is inexpensive, so you don’t need to keep them around. Even if the user slides rapidly across the touch zone, the engine creates players, plays them, and discards them without lag.\n\n\n\n## Programmatic haptics\n\n- **Delivering Rich App Experiences with Haptics**: Enhance your app’s experience by incorporating haptic and sound feedback into key interactive moments.\n- **Playing Collision-Based Haptic Patterns**: Play a custom haptic pattern whose strength depends on an object’s collision speed.\n- **CHHapticEvent**: An object that describes a single haptic or audio event.\n- **CHHapticEventParameter**: A static parameter value that represents a single property of the haptic pattern.\n- **CHHapticDynamicParameter**: A value that you send to a haptic pattern player to alter a property value during playback.\n- **CHHapticParameterCurve**: A curve that you send to a haptic pattern player to alter a property value gradually during playback.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Enhance your app’s experience by incorporating haptic and sound feedback into key interactive moments.",
          "name" : "Delivering Rich App Experiences with Haptics",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreHaptics\/delivering-rich-app-experiences-with-haptics"
        },
        {
          "description" : "Play a custom haptic pattern whose strength depends on an object’s collision speed.",
          "name" : "Playing Collision-Based Haptic Patterns",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreHaptics\/playing-collision-based-haptic-patterns"
        },
        {
          "description" : "An object that describes a single haptic or audio event.",
          "name" : "CHHapticEvent",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreHaptics\/CHHapticEvent"
        },
        {
          "description" : "A static parameter value that represents a single property of the haptic pattern.",
          "name" : "CHHapticEventParameter",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreHaptics\/CHHapticEventParameter"
        },
        {
          "description" : "A value that you send to a haptic pattern player to alter a property value during playback.",
          "name" : "CHHapticDynamicParameter",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreHaptics\/CHHapticDynamicParameter"
        },
        {
          "description" : "A curve that you send to a haptic pattern player to alter a property value gradually during playback.",
          "name" : "CHHapticParameterCurve",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreHaptics\/CHHapticParameterCurve"
        }
      ],
      "title" : "Programmatic haptics"
    }
  ],
  "source" : "appleJSON",
  "title" : "Updating Continuous and Transient Haptic Parameters in Real Time",
  "url" : "https:\/\/developer.apple.com\/documentation\/CoreHaptics\/updating-continuous-and-transient-haptic-parameters-in-real-time"
}