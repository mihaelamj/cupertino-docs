{
  "abstract" : "Sample predesigned Apple Haptic Audio Pattern files, and learn how to play your own.",
  "codeExamples" : [
    {
      "code" : "\/\/ Create and configure a haptic engine.\ndo {\n    \/\/ Associate the haptic engine with the default audio session\n    \/\/ to ensure the correct behavior when playing audio-based haptics.\n    let audioSession = AVAudioSession.sharedInstance()\n    engine = try CHHapticEngine(audioSession: audioSession)\n} catch let error {\n    print(\"Engine Creation Error: \\(error)\")\n}",
      "language" : "swift"
    },
    {
      "code" : "\/\/ Express the path to the AHAP file before attempting to load it.\nguard let path = Bundle.main.path(forResource: filename, ofType: \"ahap\") else {\n    return\n}",
      "language" : "swift"
    },
    {
      "code" : "\/\/ Start the engine in case it's idle.\ntry engine?.start()",
      "language" : "swift"
    },
    {
      "code" : "\/\/ Tell the engine to play a pattern.\ntry engine?.playPattern(from: URL(fileURLWithPath: path))",
      "language" : "swift"
    },
    {
      "code" : "advancedPlayer = try hapticEngine.makeAdvancedPlayer(with: ahapPattern)\nadvancedPlayer.loopEnabled = true",
      "language" : "swift"
    }
  ],
  "contentHash" : "4ab7cbd5a5a93402dfee0fd05fa46b6e7279c6aa398f5927de3f639fc56e135c",
  "crawledAt" : "2025-12-02T15:29:46Z",
  "id" : "77C05923-1EC9-45F0-970E-BA23C1478D7D",
  "kind" : "unknown",
  "language" : "swift",
  "module" : "Core Haptics",
  "overview" : "## Overview\n\nThis app, HapticSampler, describes how to load files formatted as Apple Haptic Audio Pattern (AHAP). AHAP files are JSON-compliant dictionary representations of haptic and audio patterns that you can compose in a text editor, or any program that exports content in the JSON format.\n\nThe user interface, defined in `Main.storyboard`, consists of eight buttons, each of which loads and plays a different haptic pattern. AHAP files for eight custom patterns are bundled in the Xcode project. For example, the Sparkle.ahap file defines a haptic pattern with the following intensity and sharpness variations:\n\n\n\nYou can examine and modify the AHAP file parameters in Xcode or a text editor.\n\n### Configure the App to Play Haptics\n\nHapticSampler checks for device compatibility and sets up an instance of [doc:\/\/com.apple.corehaptics\/documentation\/CoreHaptics\/CHHapticEngine] on launch.\n\nSee [doc:\/\/com.apple.corehaptics\/documentation\/CoreHaptics\/preparing-your-app-to-play-haptics] for more information about setting up the engine.\n\n### Start the Haptic Engine\n\nAll AHAPs in the sample are included in the app bundle, so build a URL to the desired file by searching in the main bundle, as you might do for other included assets like audio files.\n\nTap one of the buttons in the app to load the AHAP file associated with that button. Because the engine may not be started at that time, the app starts the engine as soon as a button is tapped.\n\n### Play the AHAP\n\nAssuming the engine has started, call the engine’s method, [doc:\/\/com.apple.corehaptics\/documentation\/CoreHaptics\/CHHapticEngine\/playPattern(from:)-6m9m5], passing it the URL to playing the file.\n\nThis method of playback follows a *fire and forget* model; each haptic pattern plays until it reaches its end, then stops automatically.\n\nOnce the haptic starts playing, you can’t stop it, and pressing other buttons layers those haptics on top of any existing haptic patterns in the middle of playback. This layering allows you to combine a haptic pattern with a more continuous intent, like the rumble of thunder, with a more impulse-driven haptic pattern built from transient taps, like the strike of lightning.\n\nCore Haptics layers simultaneously playing haptics automatically. If you don’t want the layering, your app should wait out the duration of the first haptic before starting subsequent haptic players.\n\n### Create Advanced Pattern Players for More Granular Control\n\nTo have more granular control over individual haptics, such as configuring their pausing, resuming, and seeking behavior, create and maintain advanced pattern players using [doc:\/\/com.apple.corehaptics\/documentation\/CoreHaptics\/CHHapticAdvancedPatternPlayer] instead of using [doc:\/\/com.apple.corehaptics\/documentation\/CoreHaptics\/CHHapticEngine\/playPattern(from:)-6m9m5].\n\n### Compose Your Own Haptic\n\nTo compose your own haptic pattern, begin by modifying one of the AHAP files included in the project. You can copy components of it for producing a transient haptic pattern or a continuous haptic pattern, then build your own haptic by combining and modifying those pieces.\n\nAlternatively, you can write an AHAP file from scratch in a text editor, using the example AHAP files as a reference for proper nesting of event, pattern, and parameter dictionaries. For more information about the AHAP file format and the parameter keys that the format supports, see Representing Haptic Patterns in AHAP Files.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/CoreHaptics\/playing-a-custom-haptic-pattern-from-a-file\ncrawled: 2025-12-02T15:29:46Z\n---\n\n# Playing a Custom Haptic Pattern from a File\n\n**Sample Code**\n\nSample predesigned Apple Haptic Audio Pattern files, and learn how to play your own.\n\n## Overview\n\nThis app, HapticSampler, describes how to load files formatted as Apple Haptic Audio Pattern (AHAP). AHAP files are JSON-compliant dictionary representations of haptic and audio patterns that you can compose in a text editor, or any program that exports content in the JSON format.\n\nThe user interface, defined in `Main.storyboard`, consists of eight buttons, each of which loads and plays a different haptic pattern. AHAP files for eight custom patterns are bundled in the Xcode project. For example, the Sparkle.ahap file defines a haptic pattern with the following intensity and sharpness variations:\n\n\n\nYou can examine and modify the AHAP file parameters in Xcode or a text editor.\n\n\n\n### Configure the App to Play Haptics\n\nHapticSampler checks for device compatibility and sets up an instance of [doc:\/\/com.apple.corehaptics\/documentation\/CoreHaptics\/CHHapticEngine] on launch.\n\n```swift\n\/\/ Create and configure a haptic engine.\ndo {\n    \/\/ Associate the haptic engine with the default audio session\n    \/\/ to ensure the correct behavior when playing audio-based haptics.\n    let audioSession = AVAudioSession.sharedInstance()\n    engine = try CHHapticEngine(audioSession: audioSession)\n} catch let error {\n    print(\"Engine Creation Error: \\(error)\")\n}\n```\n\nSee [doc:\/\/com.apple.corehaptics\/documentation\/CoreHaptics\/preparing-your-app-to-play-haptics] for more information about setting up the engine.\n\n### Start the Haptic Engine\n\nAll AHAPs in the sample are included in the app bundle, so build a URL to the desired file by searching in the main bundle, as you might do for other included assets like audio files.\n\n```swift\n\/\/ Express the path to the AHAP file before attempting to load it.\nguard let path = Bundle.main.path(forResource: filename, ofType: \"ahap\") else {\n    return\n}\n```\n\nTap one of the buttons in the app to load the AHAP file associated with that button. Because the engine may not be started at that time, the app starts the engine as soon as a button is tapped.\n\n```swift\n\/\/ Start the engine in case it's idle.\ntry engine?.start()\n```\n\n### Play the AHAP\n\nAssuming the engine has started, call the engine’s method, [doc:\/\/com.apple.corehaptics\/documentation\/CoreHaptics\/CHHapticEngine\/playPattern(from:)-6m9m5], passing it the URL to playing the file.\n\n```swift\n\/\/ Tell the engine to play a pattern.\ntry engine?.playPattern(from: URL(fileURLWithPath: path))\n```\n\nThis method of playback follows a *fire and forget* model; each haptic pattern plays until it reaches its end, then stops automatically.\n\nOnce the haptic starts playing, you can’t stop it, and pressing other buttons layers those haptics on top of any existing haptic patterns in the middle of playback. This layering allows you to combine a haptic pattern with a more continuous intent, like the rumble of thunder, with a more impulse-driven haptic pattern built from transient taps, like the strike of lightning.\n\nCore Haptics layers simultaneously playing haptics automatically. If you don’t want the layering, your app should wait out the duration of the first haptic before starting subsequent haptic players.\n\n\n\n### Create Advanced Pattern Players for More Granular Control\n\nTo have more granular control over individual haptics, such as configuring their pausing, resuming, and seeking behavior, create and maintain advanced pattern players using [doc:\/\/com.apple.corehaptics\/documentation\/CoreHaptics\/CHHapticAdvancedPatternPlayer] instead of using [doc:\/\/com.apple.corehaptics\/documentation\/CoreHaptics\/CHHapticEngine\/playPattern(from:)-6m9m5].\n\n```swift\nadvancedPlayer = try hapticEngine.makeAdvancedPlayer(with: ahapPattern)\nadvancedPlayer.loopEnabled = true\n```\n\n### Compose Your Own Haptic\n\nTo compose your own haptic pattern, begin by modifying one of the AHAP files included in the project. You can copy components of it for producing a transient haptic pattern or a continuous haptic pattern, then build your own haptic by combining and modifying those pieces.\n\nAlternatively, you can write an AHAP file from scratch in a text editor, using the example AHAP files as a reference for proper nesting of event, pattern, and parameter dictionaries. For more information about the AHAP file format and the parameter keys that the format supports, see Representing Haptic Patterns in AHAP Files.\n\n## File-based haptics\n\n- **Representing haptic patterns in AHAP files**: Understand the Apple Haptic and Audio Pattern (AHAP) file format.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Understand the Apple Haptic and Audio Pattern (AHAP) file format.",
          "name" : "Representing haptic patterns in AHAP files",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreHaptics\/representing-haptic-patterns-in-ahap-files"
        }
      ],
      "title" : "File-based haptics"
    }
  ],
  "source" : "appleJSON",
  "title" : "Playing a Custom Haptic Pattern from a File",
  "url" : "https:\/\/developer.apple.com\/documentation\/CoreHaptics\/playing-a-custom-haptic-pattern-from-a-file"
}