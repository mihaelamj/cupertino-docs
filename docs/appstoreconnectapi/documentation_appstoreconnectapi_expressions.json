{
  "abstract" : "Write expressions that query the match requests in a queue to find the best players for a match.",
  "codeExamples" : [
    {
      "code" : "areCompatibleAppVersions(requests[0], requests[1])",
      "language" : "other"
    },
    {
      "code" : "geoLatency(requests[0], requests[1])",
      "language" : "other"
    }
  ],
  "contentHash" : "cf6e4a806c09fb4195f5d5685966ad88053215daa6e1636b9390ceaf2cc8c7cc",
  "crawledAt" : "2025-12-03T12:24:48Z",
  "id" : "DD6B75AC-4976-46F7-A1C5-A3A799254FBD",
  "kind" : "collection",
  "language" : "data",
  "module" : "App Store Connect API",
  "overview" : "## Overview\n\nAn *expression* is a [https:\/\/jmespath.org\/] formatted string with additional matchmaking rule functions. Game Center uses the expression to query a collection of match requests represented as JSON. The expression needs to evaluate to either a Boolean or number value according to the rule type.\n\nTo create a matchmaking rule in Game Center, you pass an expression to the [doc:\/\/com.apple.appstoreconnectapi\/documentation\/AppStoreConnectAPI\/POST-v1-gameCenterMatchmakingRules] endpoint. Set the `expression` and `type` fields of the [doc:\/\/com.apple.appstoreconnectapi\/documentation\/AppStoreConnectAPI\/GameCenterMatchmakingRuleCreateRequest\/Data-data.dictionary\/Attributes-data.dictionary] object that you pass in the request.\n\nFor example, if players can only join matches that run the same version of your game, add a compatible rule that compares the app versions. If you set the rule’s `type` field to `COMPATIBLE`, the `requests` array in the JSON input to the expression contains two match requests to compare. In the expression, use the `areCompatibleAppVersions()` function that returns `true` if the app versions are compatible.\n\nYou can improve the game experience by prioritizing matches between players who are geographically close, resulting in lower latency when sending messages between devices. If you set the rule’s `type` field to `DISTANCE`, the `requests` array in the expression contains two match requests to compare. In the expression, use the `geoLatency()` function that returns a range between `0.0` and `1.0`, where `0.0` is in the local area:\n\nThe JSON input to an expression contains the following arrays, that you can use in expressions, depending on the rule type:",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/AppStoreConnectAPI\/expressions\ncrawled: 2025-12-03T12:24:48Z\n---\n\n# Expressions\n\nWrite expressions that query the match requests in a queue to find the best players for a match.\n\n## Overview\n\nAn *expression* is a [https:\/\/jmespath.org\/] formatted string with additional matchmaking rule functions. Game Center uses the expression to query a collection of match requests represented as JSON. The expression needs to evaluate to either a Boolean or number value according to the rule type.\n\nTo create a matchmaking rule in Game Center, you pass an expression to the [doc:\/\/com.apple.appstoreconnectapi\/documentation\/AppStoreConnectAPI\/POST-v1-gameCenterMatchmakingRules] endpoint. Set the `expression` and `type` fields of the [doc:\/\/com.apple.appstoreconnectapi\/documentation\/AppStoreConnectAPI\/GameCenterMatchmakingRuleCreateRequest\/Data-data.dictionary\/Attributes-data.dictionary] object that you pass in the request.\n\nFor example, if players can only join matches that run the same version of your game, add a compatible rule that compares the app versions. If you set the rule’s `type` field to `COMPATIBLE`, the `requests` array in the JSON input to the expression contains two match requests to compare. In the expression, use the `areCompatibleAppVersions()` function that returns `true` if the app versions are compatible.\n\n```other\nareCompatibleAppVersions(requests[0], requests[1])\n```\n\nYou can improve the game experience by prioritizing matches between players who are geographically close, resulting in lower latency when sending messages between devices. If you set the rule’s `type` field to `DISTANCE`, the `requests` array in the expression contains two match requests to compare. In the expression, use the `geoLatency()` function that returns a range between `0.0` and `1.0`, where `0.0` is in the local area:\n\n```other\ngeoLatency(requests[0], requests[1])\n```\n\nThe JSON input to an expression contains the following arrays, that you can use in expressions, depending on the rule type:\n\n\n\n## Comparison functions\n\n- **Comparing app versions**: Return a Boolean value that indicates whether two match requests are from compatible app versions.\n\n## Distance functions\n\n- **Getting geographic distance**: Return the relative geographic distance between two match requests.\n\n## Match functions\n\n- **Getting value based on age**: Return a value that changes in regular steps as a function of the age of the requests.\n- **Getting value based on age using an array**: Return a value that changes according to an array of values as a function of the age of the requests.\n\n## Team functions\n\n- **Keeping invited players on the same team**: Return a Boolean value that indicates whether players in the same match requests are on the same team.\n\n## Boolean functions\n\n- **Evaluating a Boolean value**: Return given values for true and false results of a conditional.\n\n## Numeric functions\n\n- **Dividing numbers**: Return the result of dividing one number into another.\n- **Subtracting numbers**: Return the result of subtracting two numbers.\n\n## Array functions\n\n- **Converting arrays to sets**: Return the content of a list, with duplicates removed and sorted, so that you can compare it to another set.\n- **Computing numeric differences**: Return the absolute difference between the maximum and minimum numerical values in an array.\n- **Intersecting sets**: Return the intersection of two or more arrays treated as sets.\n\n## Objects\n\n- **Request**: An object that represents a match request in a queue.\n- **Player**: An object that represents a player associated with a match request.\n- **Team**: A team that you add to a rule set.\n\n## Matchmaking rules\n\n- **Rules**: Manage the matchmaking rules that Game Center uses to find players.\n- **Rule sets**: Manage the rule sets that you add matchmaking rules and teams to.\n- **Queues**: Manage the queues that contain matchmaking rule sets and that you submit match requests to.\n- **Teams**: Manage the teams that you add to matchmaking rule sets.\n- **Testing**: Test matchmaking rules using sample data.\n- **Metrics**: Analyze data about matchmaking rules.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Return a Boolean value that indicates whether two match requests are from compatible app versions.",
          "name" : "Comparing app versions",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppStoreConnectAPI\/comparing-app-versions"
        }
      ],
      "title" : "Comparison functions"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Return the relative geographic distance between two match requests.",
          "name" : "Getting geographic distance",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppStoreConnectAPI\/getting-geographic-distance"
        }
      ],
      "title" : "Distance functions"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Return a value that changes in regular steps as a function of the age of the requests.",
          "name" : "Getting value based on age",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppStoreConnectAPI\/getting-value-based-on-age"
        },
        {
          "description" : "Return a value that changes according to an array of values as a function of the age of the requests.",
          "name" : "Getting value based on age using an array",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppStoreConnectAPI\/getting-value-based-on-age-using-an-array"
        }
      ],
      "title" : "Match functions"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Return a Boolean value that indicates whether players in the same match requests are on the same team.",
          "name" : "Keeping invited players on the same team",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppStoreConnectAPI\/keeping-invited-players-on-the-same-team"
        }
      ],
      "title" : "Team functions"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Return given values for true and false results of a conditional.",
          "name" : "Evaluating a Boolean value",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppStoreConnectAPI\/evaluating-a-boolean-value"
        }
      ],
      "title" : "Boolean functions"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Return the result of dividing one number into another.",
          "name" : "Dividing numbers",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppStoreConnectAPI\/dividing-numbers"
        },
        {
          "description" : "Return the result of subtracting two numbers.",
          "name" : "Subtracting numbers",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppStoreConnectAPI\/subtracting-numbers"
        }
      ],
      "title" : "Numeric functions"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Return the content of a list, with duplicates removed and sorted, so that you can compare it to another set.",
          "name" : "Converting arrays to sets",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppStoreConnectAPI\/converting-arrays-to-sets"
        },
        {
          "description" : "Return the absolute difference between the maximum and minimum numerical values in an array.",
          "name" : "Computing numeric differences",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppStoreConnectAPI\/computing-numeric-differences"
        },
        {
          "description" : "Return the intersection of two or more arrays treated as sets.",
          "name" : "Intersecting sets",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppStoreConnectAPI\/intersecting-sets"
        }
      ],
      "title" : "Array functions"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "An object that represents a match request in a queue.",
          "name" : "Request",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppStoreConnectAPI\/request"
        },
        {
          "description" : "An object that represents a player associated with a match request.",
          "name" : "Player",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppStoreConnectAPI\/player"
        },
        {
          "description" : "A team that you add to a rule set.",
          "name" : "Team",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppStoreConnectAPI\/team"
        }
      ],
      "title" : "Objects"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Manage the matchmaking rules that Game Center uses to find players.",
          "name" : "Rules",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppStoreConnectAPI\/rules"
        },
        {
          "description" : "Manage the rule sets that you add matchmaking rules and teams to.",
          "name" : "Rule sets",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppStoreConnectAPI\/rule-sets"
        },
        {
          "description" : "Manage the queues that contain matchmaking rule sets and that you submit match requests to.",
          "name" : "Queues",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppStoreConnectAPI\/queues"
        },
        {
          "description" : "Manage the teams that you add to matchmaking rule sets.",
          "name" : "Teams",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppStoreConnectAPI\/teams"
        },
        {
          "description" : "Test matchmaking rules using sample data.",
          "name" : "Testing",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppStoreConnectAPI\/testing"
        },
        {
          "description" : "Analyze data about matchmaking rules.",
          "name" : "Metrics",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppStoreConnectAPI\/metrics"
        }
      ],
      "title" : "Matchmaking rules"
    }
  ],
  "source" : "appleJSON",
  "title" : "Expressions",
  "url" : "https:\/\/developer.apple.com\/documentation\/AppStoreConnectAPI\/expressions"
}