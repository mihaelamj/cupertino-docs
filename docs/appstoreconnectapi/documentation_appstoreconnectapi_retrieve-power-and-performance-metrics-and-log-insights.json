{
  "abstract" : "Use the App Store Connect API to collect and parse diagnostic logs and metrics for your apps.",
  "codeExamples" : [
    {
      "code" : "pip3 install pyjwt[crypto] docopt --user",
      "language" : "console"
    },
    {
      "code" : "python3 generate-token.py {issuer id} {key id} {private key path}",
      "language" : "console"
    },
    {
      "code" : "TOKEN=$(python3 generate-token.py $ISSUER_ID $KEY_ID $KEY_FILE_PATH)\ncurl -H \"Authorization: Bearer ${TOKEN}\" \"https:\/\/api.appstoreconnect.apple.com\/v1\/apps\"",
      "language" : "console"
    },
    {
      "code" : "APP_ID=YourAppId\ncurl -H \"Authorization: Bearer ${TOKEN}\" \"https:\/\/api.appstoreconnect.apple.com\/v1\/apps\/{$APP_ID}\/builds\" ",
      "language" : "console"
    },
    {
      "code" : "python3 get-metrics-insights.py $APP_ID",
      "language" : "console"
    },
    {
      "code" : "python3 get-diagnostics-logs.py $BUILD_ID",
      "language" : "console"
    },
    {
      "code" : "python3 ppparser -h\n\nPowerPerformanceParser (PPParser)\nParse metrics & diagnostics JSON responses.\n\nUsage:\n    ppparser metrics --input=INPUT_FILE [--metric=METRIC_NAME] [--auto_insights]\n    ppparser diagnostics --input=INPUT_FILE [--limit=LIMIT] [--callstack]\n    ppparser -v\n    ppparser -h\n\n    metrics                               Parse metrics report JSON\n                                            from \/v1\/apps\/{id}\/perfPowerMetrics\n    diagnostics                           Parse diagnostics report JSON\n                                            from \/v1\/diagnosticSignatures\/{id}\/logs\n    -i INPUT_FILE, --input INPUT_FILE     Input JSON file\n    -m METRIC_NAME, --metric METRIC_NAME  Filter by metric\n    -d DEVICE_TYPE, --device DEVICE_TYPE  Filter by device\n    -p PLATFORM, --platform PLATFORM      Filter by platform\n    -l LIMIT, --limit LIMIT               Limit the number of diagnostics logs to print\n    -a, --auto_insights                   Pretty-print auto-generated insights\n    -c, --callstack                       Pretty-print callstack\n    -v, --version                         Show version\n    -h, --help                            Show this help screen",
      "language" : "console"
    }
  ],
  "contentHash" : "a8d5c5a48de233104c33aaf31831c657cd605730243b26644d4167f33ddc729d",
  "crawledAt" : "2025-12-02T15:47:08Z",
  "id" : "FBE54F94-82C0-48D1-8273-1B3B12DFF86D",
  "kind" : "unknown",
  "language" : "data",
  "module" : "App Store Connect API",
  "overview" : "## Overview\n\nThe sample code includes a number of scripts that demonstrate the following:\n\nAllow a few days after releasing your app for Apple to collect and organize logs into reports. The system behind the API requires significant usage of your app before it makes metrics available, and each metric has different usage thresholds.\n\n### Configure the Project\n\nInstall the Python libraries `pyjwt` and `docopt` to run the sample code. Use Terminal to run the following command to install the libraries locally:\n\n### Create a JSON Web Token to Access the App Store Connect API\n\nTo use the API, you need to generate and provide a JSON Web Token (JWT), signed using an App Store Connect API key. First, generate and retrieve a private key as described in [doc:\/\/com.apple.documentation\/documentation\/AppStoreConnectAPI\/creating-api-keys-for-app-store-connect-api]. While retrieving your API key, take note of the issuer ID and the key ID, generating a JWT requires them. After retrieving your API key, use the `generate-token.py` script to generate a JWT to authenticate requests you send to the App Store Connect API.\n\nTo generate a JWT, run the `generate-token.py` script, providing the issuer ID, key ID, and the path to the private key.\n\nFor more information about generating tokens, see [doc:\/\/com.apple.documentation\/documentation\/AppStoreConnectAPI\/generating-tokens-for-api-requests].\n\n### Identify Your App ID and Build ID\n\nTo retrieve power and performance metrics for your app, you need to know its App ID. Use the [doc:\/\/com.apple.documentation\/documentation\/AppStoreConnectAPI\/GET-v1-apps] endpoint to get a list of your apps and metadata about them, including App IDs.\n\nCreate a JWT, then use that token with `curl` to request a list of your apps:\n\nRetrieving diagnostic logs, or build-specific metrics, requires a build ID. Use [doc:\/\/com.apple.documentation\/documentation\/AppStoreConnectAPI\/GET-v1-apps-_id_-builds] to get a list of the builds.\n\nUse the following `curl` command to request a list of builds for an App:\n\n### Retrieve Metric Insights for Your App\n\nUse the `get-metrics-insights.py` script to download power and performance metrics, and to print metric hotspot data identified by insights:\n\n### Retrieve Diagnostic Logs for a Build of Your App\n\nUse the `get-diagnostics-logs.py` script to download disk writes, diagnostic logs, and print the callbacks resulting from the top disk write I\/O exception:\n\n### Parse JSON Files Retrieved from App Store Connect\n\nThe code in `ppparser` provides an example of how to parse the JSON performance metrics and diagnostic log data retrieved from App Store Connect API. With JSON files stored locally, use the following command to invoke the parser directly:",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/AppStoreConnectAPI\/retrieve-power-and-performance-metrics-and-log-insights\ncrawled: 2025-12-02T15:47:08Z\n---\n\n# Retrieve Power and Performance Metrics and Log Insights\n\n**Sample Code**\n\nUse the App Store Connect API to collect and parse diagnostic logs and metrics for your apps.\n\n## Overview\n\nThe sample code includes a number of scripts that demonstrate the following:\n\n- Creating a JSON Web Token for accessing the API.\n- Retrieving an App’s aggregated power and performance metrics.\n- Retrieving an App’s diagnostic logs and corresponding insights.\n- Parsing JSON files retrieved from the API that contain metrics or logs.\n\nAllow a few days after releasing your app for Apple to collect and organize logs into reports. The system behind the API requires significant usage of your app before it makes metrics available, and each metric has different usage thresholds.\n\n### Configure the Project\n\nInstall the Python libraries `pyjwt` and `docopt` to run the sample code. Use Terminal to run the following command to install the libraries locally:\n\n```console\npip3 install pyjwt[crypto] docopt --user\n```\n\n### Create a JSON Web Token to Access the App Store Connect API\n\nTo use the API, you need to generate and provide a JSON Web Token (JWT), signed using an App Store Connect API key. First, generate and retrieve a private key as described in [doc:\/\/com.apple.documentation\/documentation\/AppStoreConnectAPI\/creating-api-keys-for-app-store-connect-api]. While retrieving your API key, take note of the issuer ID and the key ID, generating a JWT requires them. After retrieving your API key, use the `generate-token.py` script to generate a JWT to authenticate requests you send to the App Store Connect API.\n\nTo generate a JWT, run the `generate-token.py` script, providing the issuer ID, key ID, and the path to the private key.\n\n```console\npython3 generate-token.py {issuer id} {key id} {private key path}\n```\n\nFor more information about generating tokens, see [doc:\/\/com.apple.documentation\/documentation\/AppStoreConnectAPI\/generating-tokens-for-api-requests].\n\n### Identify Your App ID and Build ID\n\nTo retrieve power and performance metrics for your app, you need to know its App ID. Use the [doc:\/\/com.apple.documentation\/documentation\/AppStoreConnectAPI\/GET-v1-apps] endpoint to get a list of your apps and metadata about them, including App IDs.\n\nCreate a JWT, then use that token with `curl` to request a list of your apps:\n\n```console\nTOKEN=$(python3 generate-token.py $ISSUER_ID $KEY_ID $KEY_FILE_PATH)\ncurl -H \"Authorization: Bearer ${TOKEN}\" \"https:\/\/api.appstoreconnect.apple.com\/v1\/apps\"\n```\n\nRetrieving diagnostic logs, or build-specific metrics, requires a build ID. Use [doc:\/\/com.apple.documentation\/documentation\/AppStoreConnectAPI\/GET-v1-apps-_id_-builds] to get a list of the builds.\n\nUse the following `curl` command to request a list of builds for an App:\n\n```console\nAPP_ID=YourAppId\ncurl -H \"Authorization: Bearer ${TOKEN}\" \"https:\/\/api.appstoreconnect.apple.com\/v1\/apps\/{$APP_ID}\/builds\" \n```\n\n### Retrieve Metric Insights for Your App\n\nUse the `get-metrics-insights.py` script to download power and performance metrics, and to print metric hotspot data identified by insights:\n\n```console\npython3 get-metrics-insights.py $APP_ID\n```\n\n### Retrieve Diagnostic Logs for a Build of Your App\n\nUse the `get-diagnostics-logs.py` script to download disk writes, diagnostic logs, and print the callbacks resulting from the top disk write I\/O exception:\n\n```console\npython3 get-diagnostics-logs.py $BUILD_ID\n```\n\n### Parse JSON Files Retrieved from App Store Connect\n\nThe code in `ppparser` provides an example of how to parse the JSON performance metrics and diagnostic log data retrieved from App Store Connect API. With JSON files stored locally, use the following command to invoke the parser directly:\n\n```console\npython3 ppparser -h\n\nPowerPerformanceParser (PPParser)\nParse metrics & diagnostics JSON responses.\n\nUsage:\n    ppparser metrics --input=INPUT_FILE [--metric=METRIC_NAME] [--auto_insights]\n    ppparser diagnostics --input=INPUT_FILE [--limit=LIMIT] [--callstack]\n    ppparser -v\n    ppparser -h\n\n    metrics                               Parse metrics report JSON\n                                            from \/v1\/apps\/{id}\/perfPowerMetrics\n    diagnostics                           Parse diagnostics report JSON\n                                            from \/v1\/diagnosticSignatures\/{id}\/logs\n    -i INPUT_FILE, --input INPUT_FILE     Input JSON file\n    -m METRIC_NAME, --metric METRIC_NAME  Filter by metric\n    -d DEVICE_TYPE, --device DEVICE_TYPE  Filter by device\n    -p PLATFORM, --platform PLATFORM      Filter by platform\n    -l LIMIT, --limit LIMIT               Limit the number of diagnostics logs to print\n    -a, --auto_insights                   Pretty-print auto-generated insights\n    -c, --callstack                       Pretty-print callstack\n    -v, --version                         Show version\n    -h, --help                            Show this help screen\n```\n\n## Getting Metrics and Diagnostic Logs\n\n- **Get Power and Performance Metrics for an App**: Get the performance and power metrics data for the most recent version of an app.\n- **Get Power and Performance Metrics for a Build**: Get the performance and power metrics data for a specific build.\n- **List All Diagnostic Signatures for a Build**: List the aggregate backtrace signatures captured for a specific build.\n- **Download Logs for a Diagnostic Signature**: Get the anonymized backtrace logs associated with a specific diagnostic signature.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Get the performance and power metrics data for the most recent version of an app.",
          "name" : "Get Power and Performance Metrics for an App",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppStoreConnectAPI\/GET-v1-apps-_id_-perfPowerMetrics"
        },
        {
          "description" : "Get the performance and power metrics data for a specific build.",
          "name" : "Get Power and Performance Metrics for a Build",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppStoreConnectAPI\/GET-v1-builds-_id_-perfPowerMetrics"
        },
        {
          "description" : "List the aggregate backtrace signatures captured for a specific build.",
          "name" : "List All Diagnostic Signatures for a Build",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppStoreConnectAPI\/GET-v1-builds-_id_-diagnosticSignatures"
        },
        {
          "description" : "Get the anonymized backtrace logs associated with a specific diagnostic signature.",
          "name" : "Download Logs for a Diagnostic Signature",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppStoreConnectAPI\/GET-v1-diagnosticSignatures-_id_-logs"
        }
      ],
      "title" : "Getting Metrics and Diagnostic Logs"
    }
  ],
  "source" : "appleJSON",
  "title" : "Retrieve Power and Performance Metrics and Log Insights",
  "url" : "https:\/\/developer.apple.com\/documentation\/AppStoreConnectAPI\/retrieve-power-and-performance-metrics-and-log-insights"
}