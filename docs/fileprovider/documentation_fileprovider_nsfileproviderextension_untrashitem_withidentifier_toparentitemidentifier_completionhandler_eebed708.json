{
  "abstract" : "Moves an item out of the trash.",
  "codeExamples" : [

  ],
  "contentHash" : "abaf8d2fad3e559b5c73cd80c2a0f590bf538a03e0cbc22c035b13552e50ac0b",
  "crawledAt" : "2025-12-04T10:13:39Z",
  "declaration" : {
    "code" : "func untrashItem(withIdentifier itemIdentifier: NSFileProviderItemIdentifier, toParentItemIdentifier parentItemIdentifier: NSFileProviderItemIdentifier?, completionHandler: @escaping (NSFileProviderItem?, (any Error)?) -> Void)",
    "language" : "swift"
  },
  "id" : "9ED60866-EC09-4F76-8A33-9B3BDBC8BA69",
  "kind" : "method",
  "language" : "swift",
  "module" : "File Provider",
  "overview" : "## Discussion\n\nThis method is called when the user removes a document or directory from the trash. Override this method to make any necessary local changes to remove the item from the trash, including updates to the working set. Your implementation should return immediately. Call the completion handler before performing any network activity or other long-running tasks. Defer these tasks to the background. The `untrashedItem` instance that you pass to the completion handler should match the item’s old file provider item, with only one change: set the item’s [doc:\/\/com.apple.fileprovider\/documentation\/FileProvider\/NSFileProviderItemProtocol\/isTrashed] property to [doc:\/\/com.apple.documentation\/documentation\/Swift\/false].\n\nIf the `parentItemIdentifier` parameter is not `nil`, move the item to the specified parent. Otherwise, return it to its previous location (before being trashed). Undo any other changes that were made when the item was trashed.\n\nThe user’s ability to remove an item from the trash is controlled by the new parent directory’s [doc:\/\/com.apple.fileprovider\/documentation\/FileProvider\/NSFileProviderItemCapabilities\/allowsAddingSubItems] capability.",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "visionOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/FileProvider\/NSFileProviderExtension\/untrashItem(withIdentifier:toParentItemIdentifier:completionHandler:)\ncrawled: 2025-12-04T10:13:39Z\n---\n\n# untrashItem(withIdentifier:toParentItemIdentifier:completionHandler:)\n\n**Instance Method**\n\nMoves an item out of the trash.\n\n## Declaration\n\n```swift\nfunc untrashItem(withIdentifier itemIdentifier: NSFileProviderItemIdentifier, toParentItemIdentifier parentItemIdentifier: NSFileProviderItemIdentifier?, completionHandler: @escaping (NSFileProviderItem?, (any Error)?) -> Void)\n```\n\n```swift\nfunc untrashItem(withIdentifier itemIdentifier: NSFileProviderItemIdentifier, toParentItemIdentifier parentItemIdentifier: NSFileProviderItemIdentifier?) async throws -> NSFileProviderItem\n```\n\n## Parameters\n\n- **itemIdentifier**: The item’s persistent identifier.\n- **parentItemIdentifier**: The persistent identifier for the new parent directory, or `nil`.\n- **completionHandler**: A block that takes the following parameters:\n\n\n\n## Discussion\n\n\n\nThis method is called when the user removes a document or directory from the trash. Override this method to make any necessary local changes to remove the item from the trash, including updates to the working set. Your implementation should return immediately. Call the completion handler before performing any network activity or other long-running tasks. Defer these tasks to the background. The `untrashedItem` instance that you pass to the completion handler should match the item’s old file provider item, with only one change: set the item’s [doc:\/\/com.apple.fileprovider\/documentation\/FileProvider\/NSFileProviderItemProtocol\/isTrashed] property to [doc:\/\/com.apple.documentation\/documentation\/Swift\/false].\n\nIf the `parentItemIdentifier` parameter is not `nil`, move the item to the specified parent. Otherwise, return it to its previous location (before being trashed). Undo any other changes that were made when the item was trashed.\n\nThe user’s ability to remove an item from the trash is controlled by the new parent directory’s [doc:\/\/com.apple.fileprovider\/documentation\/FileProvider\/NSFileProviderItemCapabilities\/allowsAddingSubItems] capability.\n\n## Handling actions\n\n- **Providing support for user-driven actions**: Override methods to handle user-initiated actions.\n- **createDirectory(withName:inParentItemIdentifier:completionHandler:)**: Creates a directory with the given name inside the given parent directory.\n- **deleteItem(withIdentifier:completionHandler:)**: Permanently deletes an item from the trash.\n- **importDocument(at:toParentItemIdentifier:completionHandler:)**: Imports a file or package into the given parent directory.\n- **renameItem(withIdentifier:toName:completionHandler:)**: Renames a document or directory.\n- **reparentItem(withIdentifier:toParentItemWithIdentifier:newName:completionHandler:)**: Moves the specified item into the given parent directory.\n- **setFavoriteRank(_:forItemIdentifier:completionHandler:)**: Marks a directory as a favorite and sets its relative order in the Favorites list.\n- **setLastUsedDate(_:forItemIdentifier:completionHandler:)**: Marks an item as recently used and sets its relative order in the Recents list.\n- **setTagData(_:forItemIdentifier:completionHandler:)**: Tags an item.\n- **trashItem(withIdentifier:completionHandler:)**: Moves an item into the trash.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Override methods to handle user-initiated actions.",
          "name" : "Providing support for user-driven actions",
          "url" : "https:\/\/developer.apple.com\/documentation\/FileProvider\/providing-support-for-user-driven-actions"
        },
        {
          "description" : "Creates a directory with the given name inside the given parent directory.",
          "name" : "createDirectory(withName:inParentItemIdentifier:completionHandler:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/FileProvider\/NSFileProviderExtension\/createDirectory(withName:inParentItemIdentifier:completionHandler:)"
        },
        {
          "description" : "Permanently deletes an item from the trash.",
          "name" : "deleteItem(withIdentifier:completionHandler:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/FileProvider\/NSFileProviderExtension\/deleteItem(withIdentifier:completionHandler:)"
        },
        {
          "description" : "Imports a file or package into the given parent directory.",
          "name" : "importDocument(at:toParentItemIdentifier:completionHandler:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/FileProvider\/NSFileProviderExtension\/importDocument(at:toParentItemIdentifier:completionHandler:)"
        },
        {
          "description" : "Renames a document or directory.",
          "name" : "renameItem(withIdentifier:toName:completionHandler:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/FileProvider\/NSFileProviderExtension\/renameItem(withIdentifier:toName:completionHandler:)"
        },
        {
          "description" : "Moves the specified item into the given parent directory.",
          "name" : "reparentItem(withIdentifier:toParentItemWithIdentifier:newName:completionHandler:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/FileProvider\/NSFileProviderExtension\/reparentItem(withIdentifier:toParentItemWithIdentifier:newName:completionHandler:)"
        },
        {
          "description" : "Marks a directory as a favorite and sets its relative order in the Favorites list.",
          "name" : "setFavoriteRank(_:forItemIdentifier:completionHandler:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/FileProvider\/NSFileProviderExtension\/setFavoriteRank(_:forItemIdentifier:completionHandler:)"
        },
        {
          "description" : "Marks an item as recently used and sets its relative order in the Recents list.",
          "name" : "setLastUsedDate(_:forItemIdentifier:completionHandler:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/FileProvider\/NSFileProviderExtension\/setLastUsedDate(_:forItemIdentifier:completionHandler:)"
        },
        {
          "description" : "Tags an item.",
          "name" : "setTagData(_:forItemIdentifier:completionHandler:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/FileProvider\/NSFileProviderExtension\/setTagData(_:forItemIdentifier:completionHandler:)"
        },
        {
          "description" : "Moves an item into the trash.",
          "name" : "trashItem(withIdentifier:completionHandler:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/FileProvider\/NSFileProviderExtension\/trashItem(withIdentifier:completionHandler:)"
        }
      ],
      "title" : "Handling actions"
    }
  ],
  "source" : "appleJSON",
  "title" : "untrashItem(withIdentifier:toParentItemIdentifier:completionHandler:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/FileProvider\/NSFileProviderExtension\/untrashItem(withIdentifier:toParentItemIdentifier:completionHandler:)"
}