{
  "abstract" : "Send push notifications to a device to signal changes from your server.",
  "codeExamples" : [
    {
      "code" : "import PushKit\n\n@UIApplicationMain\nclass AppDelegate: UIResponder, UIApplicationDelegate, PKPushRegistryDelegate {\n    \/\/ ...\n}",
      "language" : "swift"
    },
    {
      "code" : "import PushKit\n\nclass FileProviderExtension: NSFileProviderExtension, PKPushRegistryDelegate {\n    \/\/ ...\n}",
      "language" : "swift"
    },
    {
      "code" : "var pushRegistry: PKPushRegistry!",
      "language" : "swift"
    },
    {
      "code" : "func application(\n    _ application: UIApplication, \n    didFinishLaunchingWithOptions launchOptions: [UIApplicationLaunchOptionsKey: Any]?\n) -> Bool {\n    pushRegistry = PKPushRegistry(queue: nil)\n    pushRegistry.delegate = self\n    pushRegistry.desiredPushTypes = [.fileProvider]\n    return true\n}",
      "language" : "swift"
    },
    {
      "code" : "override init() {\n    super.init()\n    pushRegistry = PKPushRegistry(queue: nil)\n    pushRegistry.delegate = self\n    pushRegistry.desiredPushTypes = [.fileProvider]\n}",
      "language" : "swift"
    },
    {
      "code" : "func pushRegistry(\n    _ registry: PKPushRegistry, \n    didUpdate credentials: PKPushCredentials, \n    forType type: PKPushType\n) {\n    let deviceToken = credentials.token\n    \/\/ Send the device token to your server here.\n}",
      "language" : "swift"
    },
    {
      "code" : " {\n     \"container-identifier\": \"<your-container-identifier>\"\n     \"domain\": \"<your-domain-identifier>\"\n }\n",
      "language" : "swift"
    }
  ],
  "contentHash" : "0c28cdb72302e2f0373d73301d54c0c70a76c0cc057a6f4d001a809e412ea870",
  "crawledAt" : "2025-12-07T23:18:29Z",
  "id" : "30FE075D-D887-4F1F-A823-D0161C313B16",
  "kind" : "article",
  "language" : "swift",
  "module" : "File Provider",
  "overview" : "## Overview\n\nYou can signal changes by sending push notifications from a remote server, using the [doc:\/\/com.apple.documentation\/documentation\/PushKit] framework and the [doc:\/\/com.apple.documentation\/documentation\/PushKit\/PKPushType\/fileProvider] push type. When the system receives the notification, it automatically calls the [doc:\/\/com.apple.fileprovider\/documentation\/FileProvider\/NSFileProviderManager\/signalEnumerator(for:completionHandler:)] method with the specified identifier. It also delivers the notification to any [doc:\/\/com.apple.documentation\/documentation\/PushKit\/PKPushRegistryDelegate] objects.\n\nTo use push notifications, you start by generating the signing key for your app. Next, you configure your app to receive push notifications. Finally, you send the notifications from your server. The following sections describe each step.\n\n### Generate the signing key\n\nTo signal changes from a remote server, you use provider authentication tokens (not provider certificates). To create an APNs key for your app, see [https:\/\/help.apple.com\/xcode\/mac\/current\/#\/dev54d690a66]. Use the APNs key to sign your JSON Web Tokens (JWT) when sending notifications from your server.\n\n### Enable and register for push notifications\n\nTo receive notifications, you first enable push notifications in your app. You can register to receive push notifications in either your app delegate or in your file provider extension. Finally, you send the device token to your server.\n\nFirst, enable push notifications in your iOS app (not your File Provider extension). For details, see [https:\/\/help.apple.com\/xcode\/mac\/current\/#\/devdfd3d04a1].\n\nThen, register for push notifications. You can register in your app delegate, your File Provider extension, or both.\n\nIn your `AppDelegate` or `FileProviderExtension` classes, adopt the [doc:\/\/com.apple.documentation\/documentation\/PushKit\/PKPushRegistryDelegate] protocol.\n\nAlso, create a `pushRegistry` instance variable in each class.\n\nIn your AppDelegate class’s [doc:\/\/com.apple.documentation\/documentation\/UIKit\/UIApplicationDelegate\/application(_:didFinishLaunchingWithOptions:)] method, register for push notifications.\n\nSimilarly, in your FileProvider class’s `init()` method, register for push notifications.\n\nFinally, implement the [doc:\/\/com.apple.documentation\/documentation\/PushKit\/PKPushRegistryDelegate\/pushRegistry(_:didUpdate:for:)] delegate method in both your `AppDelegate` and `FileProvider` classes. The [doc:\/\/com.apple.documentation\/documentation\/PushKit\/PKPushRegistryDelegate\/pushRegistry(_:didInvalidatePushTokenFor:)] method is optional.\n\nIn both your `AppDelegate` and `FileProvider` classes’ [doc:\/\/com.apple.documentation\/documentation\/PushKit\/PKPushRegistryDelegate\/pushRegistry(_:didUpdate:for:)] methods, when you receive a [doc:\/\/com.apple.documentation\/documentation\/PushKit\/PKPushCredentials] instance, extract the value of its [doc:\/\/com.apple.documentation\/documentation\/PushKit\/PKPushCredentials\/token] property, and send it to your server. This value is an app-specific device token. Your server uses the device token to request push notifications for this device.\n\n### Send push notifications\n\nYou’re now ready to send a push notification. Start by creating a JWT; for details, see [https:\/\/developer.apple.com\/library\/archive\/documentation\/NetworkingInternet\/Conceptual\/RemoteNotificationsPG\/CommunicatingwithAPNs.html#\/\/apple_ref\/doc\/uid\/TP40008194-CH11-SW3]. You can reuse the JWT as long as it remains valid.\n\nThen send a POST request to the APNs server with the following values:\n\nThe POST request’s content is a JSON dictionary that specifies the container and domain for the updated content. Set the container identifier to the unique string used in the container’s [doc:\/\/com.apple.fileprovider\/documentation\/FileProvider\/NSFileProviderItemProtocol\/itemIdentifier] property. You can also use `NSFileProviderRootContainerItemIdentifier` to update the root container, or `NSFileProviderWorkingSetContainerItemIdentifier` to update the working set.\n\nSet the domain identifier to the unique string used in the domain’s [doc:\/\/com.apple.fileprovider\/documentation\/FileProvider\/NSFileProviderDomain\/identifier] property.\n\nFor more information, see [https:\/\/developer.apple.com\/library\/archive\/documentation\/NetworkingInternet\/Conceptual\/RemoteNotificationsPG\/CommunicatingwithAPNs.html#\/\/apple_ref\/doc\/uid\/TP40008194-CH11-SW10].",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/FileProvider\/using-push-notifications-to-signal-changes\ncrawled: 2025-12-07T23:18:29Z\n---\n\n# Using push notifications to signal changes\n\n**Article**\n\nSend push notifications to a device to signal changes from your server.\n\n## Overview\n\nYou can signal changes by sending push notifications from a remote server, using the [doc:\/\/com.apple.documentation\/documentation\/PushKit] framework and the [doc:\/\/com.apple.documentation\/documentation\/PushKit\/PKPushType\/fileProvider] push type. When the system receives the notification, it automatically calls the [doc:\/\/com.apple.fileprovider\/documentation\/FileProvider\/NSFileProviderManager\/signalEnumerator(for:completionHandler:)] method with the specified identifier. It also delivers the notification to any [doc:\/\/com.apple.documentation\/documentation\/PushKit\/PKPushRegistryDelegate] objects.\n\nTo use push notifications, you start by generating the signing key for your app. Next, you configure your app to receive push notifications. Finally, you send the notifications from your server. The following sections describe each step.\n\n\n\n### Generate the signing key\n\nTo signal changes from a remote server, you use provider authentication tokens (not provider certificates). To create an APNs key for your app, see [https:\/\/help.apple.com\/xcode\/mac\/current\/#\/dev54d690a66]. Use the APNs key to sign your JSON Web Tokens (JWT) when sending notifications from your server.\n\n### Enable and register for push notifications\n\nTo receive notifications, you first enable push notifications in your app. You can register to receive push notifications in either your app delegate or in your file provider extension. Finally, you send the device token to your server.\n\nFirst, enable push notifications in your iOS app (not your File Provider extension). For details, see [https:\/\/help.apple.com\/xcode\/mac\/current\/#\/devdfd3d04a1].\n\n1. Open the Capabilities pane for your app target.\n2. Turn on push notifications.\n\nThen, register for push notifications. You can register in your app delegate, your File Provider extension, or both.\n\n\n\nIn your `AppDelegate` or `FileProviderExtension` classes, adopt the [doc:\/\/com.apple.documentation\/documentation\/PushKit\/PKPushRegistryDelegate] protocol.\n\n```swift\nimport PushKit\n\n@UIApplicationMain\nclass AppDelegate: UIResponder, UIApplicationDelegate, PKPushRegistryDelegate {\n    \/\/ ...\n}\n```\n\n```swift\nimport PushKit\n\nclass FileProviderExtension: NSFileProviderExtension, PKPushRegistryDelegate {\n    \/\/ ...\n}\n```\n\nAlso, create a `pushRegistry` instance variable in each class.\n\n```swift\nvar pushRegistry: PKPushRegistry!\n```\n\nIn your AppDelegate class’s [doc:\/\/com.apple.documentation\/documentation\/UIKit\/UIApplicationDelegate\/application(_:didFinishLaunchingWithOptions:)] method, register for push notifications.\n\n```swift\nfunc application(\n    _ application: UIApplication, \n    didFinishLaunchingWithOptions launchOptions: [UIApplicationLaunchOptionsKey: Any]?\n) -> Bool {\n    pushRegistry = PKPushRegistry(queue: nil)\n    pushRegistry.delegate = self\n    pushRegistry.desiredPushTypes = [.fileProvider]\n    return true\n}\n```\n\nSimilarly, in your FileProvider class’s `init()` method, register for push notifications.\n\n```swift\noverride init() {\n    super.init()\n    pushRegistry = PKPushRegistry(queue: nil)\n    pushRegistry.delegate = self\n    pushRegistry.desiredPushTypes = [.fileProvider]\n}\n```\n\nFinally, implement the [doc:\/\/com.apple.documentation\/documentation\/PushKit\/PKPushRegistryDelegate\/pushRegistry(_:didUpdate:for:)] delegate method in both your `AppDelegate` and `FileProvider` classes. The [doc:\/\/com.apple.documentation\/documentation\/PushKit\/PKPushRegistryDelegate\/pushRegistry(_:didInvalidatePushTokenFor:)] method is optional.\n\n\n\nIn both your `AppDelegate` and `FileProvider` classes’ [doc:\/\/com.apple.documentation\/documentation\/PushKit\/PKPushRegistryDelegate\/pushRegistry(_:didUpdate:for:)] methods, when you receive a [doc:\/\/com.apple.documentation\/documentation\/PushKit\/PKPushCredentials] instance, extract the value of its [doc:\/\/com.apple.documentation\/documentation\/PushKit\/PKPushCredentials\/token] property, and send it to your server. This value is an app-specific device token. Your server uses the device token to request push notifications for this device.\n\n```swift\nfunc pushRegistry(\n    _ registry: PKPushRegistry, \n    didUpdate credentials: PKPushCredentials, \n    forType type: PKPushType\n) {\n    let deviceToken = credentials.token\n    \/\/ Send the device token to your server here.\n}\n```\n\n### Send push notifications\n\nYou’re now ready to send a push notification. Start by creating a JWT; for details, see [https:\/\/developer.apple.com\/library\/archive\/documentation\/NetworkingInternet\/Conceptual\/RemoteNotificationsPG\/CommunicatingwithAPNs.html#\/\/apple_ref\/doc\/uid\/TP40008194-CH11-SW3]. You can reuse the JWT as long as it remains valid.\n\nThen send a POST request to the APNs server with the following values:\n\n- The `:path` value is `\/3\/device\/<device-token>`. This token is the device token you sent to your server from your [doc:\/\/com.apple.documentation\/documentation\/PushKit\/PKPushRegistryDelegate\/pushRegistry(_:didUpdate:for:)] method.\n- The `authorization` value is `bearer <provider token>`. This token is your JWT.\n- The `apns-topic` value is `<bundle identifier>.pushkit.fileprovider`. The bundle identifier is your app’s bundle identifier.\n\nThe POST request’s content is a JSON dictionary that specifies the container and domain for the updated content. Set the container identifier to the unique string used in the container’s [doc:\/\/com.apple.fileprovider\/documentation\/FileProvider\/NSFileProviderItemProtocol\/itemIdentifier] property. You can also use `NSFileProviderRootContainerItemIdentifier` to update the root container, or `NSFileProviderWorkingSetContainerItemIdentifier` to update the working set.\n\n\n\nSet the domain identifier to the unique string used in the domain’s [doc:\/\/com.apple.fileprovider\/documentation\/FileProvider\/NSFileProviderDomain\/identifier] property.\n\n```swift\n {\n     \"container-identifier\": \"<your-container-identifier>\"\n     \"domain\": \"<your-domain-identifier>\"\n }\n\n```\n\nFor more information, see [https:\/\/developer.apple.com\/library\/archive\/documentation\/NetworkingInternet\/Conceptual\/RemoteNotificationsPG\/CommunicatingwithAPNs.html#\/\/apple_ref\/doc\/uid\/TP40008194-CH11-SW10].\n\n",
  "sections" : [

  ],
  "source" : "appleJSON",
  "title" : "Using push notifications to signal changes",
  "url" : "https:\/\/developer.apple.com\/documentation\/FileProvider\/using-push-notifications-to-signal-changes"
}