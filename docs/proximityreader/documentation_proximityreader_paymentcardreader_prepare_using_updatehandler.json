{
  "abstract" : "Configures the pipeline for reading payment or loyalty cards.",
  "codeExamples" : [

  ],
  "contentHash" : "c29a7e2fc17c8f21e0a906bcca013c8536ff5f3ee1673296ac74d2f946269abc",
  "crawledAt" : "2025-12-02T05:32:29Z",
  "declaration" : {
    "code" : "func prepare(using token: PaymentCardReader.Token, updateHandler: ((PaymentCardReader.UpdateEvent) -> Void)?) async throws -> PaymentCardReaderSession",
    "language" : "swift"
  },
  "id" : "19F9A5BA-96BB-44E9-95BD-0F9F1693AEE8",
  "kind" : "method",
  "module" : "ProximityReader",
  "overview" : "## Return Value\n\n[doc:\/\/com.apple.ProximityReader\/documentation\/ProximityReader\/PaymentCardReaderSession] when successful.\n\n## Discussion\n\nCall this function to configure Tap to Pay on iPhone on someone’s device. This method verifies that the device is able to read contactless cards and is properly configured to process transactions.\n\nUpon successful configuration of the device, this method returns a [doc:\/\/com.apple.ProximityReader\/documentation\/ProximityReader\/PaymentCardReaderSession] object, which you use to read card information. The session remains active while your app is in the foreground. If you release the returned session, call this method again before you start any new read operations.\n\nAfter calling this method, there are four possible scenarios:",
  "platforms" : [
    "iOS",
    "Mac Catalyst"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/ProximityReader\/PaymentCardReader\/prepare(using:updateHandler:)\ncrawled: 2025-12-02T05:32:29Z\n---\n\n# prepare(using:updateHandler:)\n\n**Instance Method**\n\nConfigures the pipeline for reading payment or loyalty cards.\n\n## Declaration\n\n```swift\nfunc prepare(using token: PaymentCardReader.Token, updateHandler: ((PaymentCardReader.UpdateEvent) -> Void)?) async throws -> PaymentCardReaderSession\n```\n\n## Parameters\n\n- **token**: Valid and signed token from a participating payment service provider.\n- **updateHandler**: Returns configuration progress or session state change.\n\n## Return Value\n\n[doc:\/\/com.apple.ProximityReader\/documentation\/ProximityReader\/PaymentCardReaderSession] when successful.\n\n## Discussion\n\nCall this function to configure Tap to Pay on iPhone on someone’s device. This method verifies that the device is able to read contactless cards and is properly configured to process transactions.\n\nUpon successful configuration of the device, this method returns a [doc:\/\/com.apple.ProximityReader\/documentation\/ProximityReader\/PaymentCardReaderSession] object, which you use to read card information. The session remains active while your app is in the foreground. If you release the returned session, call this method again before you start any new read operations.\n\nAfter calling this method, there are four possible scenarios:\n\n- The method returns an existing [doc:\/\/com.apple.ProximityReader\/documentation\/ProximityReader\/PaymentCardReaderSession] immediately if that session is still valid.\n- The method retrieves and returns a new [doc:\/\/com.apple.ProximityReader\/documentation\/ProximityReader\/PaymentCardReaderSession] from the server if the device is fully configured.\n- The method updates the device’s configuration and delivers progress updates to the provided `updateHandler`. Upon completion, the method returns a new [doc:\/\/com.apple.ProximityReader\/documentation\/ProximityReader\/PaymentCardReaderSession] for the updated configuration. This process can take anywhere from a few seconds to several minutes.\n- This method throws a [doc:\/\/com.apple.ProximityReader\/documentation\/ProximityReader\/PaymentCardReaderError] if a problem occurs.\n\n\n\n## Deprecated\n\n- **id**: A unique identifier for this object.\n- **PaymentCardReader.UpdateEvent**: An event you receive during the configuration of the payment system.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "A unique identifier for this object.",
          "name" : "id",
          "url" : "https:\/\/developer.apple.com\/documentation\/ProximityReader\/PaymentCardReader\/id"
        },
        {
          "description" : "An event you receive during the configuration of the payment system.",
          "name" : "PaymentCardReader.UpdateEvent",
          "url" : "https:\/\/developer.apple.com\/documentation\/ProximityReader\/PaymentCardReader\/UpdateEvent"
        }
      ],
      "title" : "Deprecated"
    }
  ],
  "source" : "appleJSON",
  "title" : "prepare(using:updateHandler:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/ProximityReader\/PaymentCardReader\/prepare(using:updateHandler:)"
}