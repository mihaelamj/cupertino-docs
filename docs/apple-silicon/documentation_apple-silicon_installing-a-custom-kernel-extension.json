{
  "abstract" : "Install kernel extensions using a custom installer package, and help users understand the installation process.",
  "codeExamples" : [

  ],
  "contentHash" : "670a5eaa8d3880e3c9b97e965b572753174f632a6962169e70c5c3c3a64f9520",
  "crawledAt" : "2025-12-03T17:23:57Z",
  "id" : "DC4F0A5E-1A4E-43BA-8015-A511E75A8338",
  "kind" : "article",
  "language" : "swift",
  "overview" : "## Overview\n\nA kernel extension (or kext) is a bundle that performs low-level tasks. Kexts run in kernel space, which gives them elevated privileges and the ability to perform tasks that user-space apps can’t.\n\nAlways consider alternatives before creating a kext. The system provides numerous APIs to minimize the need for kexts. For example, you can use the DriverKit SDK to implement drivers for most types of hardware. In addition, the kernel runtime environment has more stringent code-level requirements, which makes the creation of kexts more challenging, and the consequences more severe if you do it incorrectly.\n\nFor information about alternatives to kexts, see [doc:\/\/com.apple.documentation\/documentation\/SystemExtensions\/implementing-drivers-system-extensions-and-kexts].\n\n### Load Kexts as the Final Step in Your Installer Package\n\nThe most common way to install kexts is with a custom installer package. (Unlike apps and system extensions, you cannot distribute kexts through the Mac App Store.) Typically, you use a single package to copy each kext and any supporting software to the user’s system, and then you use scripts to load and configure the kexts for execution.\n\nWhen creating your installer package, load your kexts as the final step in the installation process using the `kmutil` or `kextload` tool. These tools initiate the kext-loading process, which on macOS 11 requires getting the user’s permission and rebooting the user’s system. Loading them as the final step prevents the reboot from disrupting the rest of the installation process. To avoid multiple user prompts when installing multiple kexts, make a single call to `kmutil` or `kextload` and include all of your kexts in the parameter list.\n\nFor more information about how to load kexts, run `kmutil load -h` in Terminal.\n\n### Explain the Kext-Loading Process to Users\n\nIn macOS 11 and later, the loading of a kext requires the user to take actions outside of your installation package. When loading a kext, tell the user to perform the following one-time setup on Apple silicon:\n\nTell the user to perform the following steps on all Macs whenever you load or install a previously unused kext:\n\nThe system prompts the user through most of this process, but make sure your installer package provides clear instructions about what to do. Rebooting is a disruptive process for the user, and lowering the security protections may cause concern. Providing a clear explanation of what your kext does, and why its installation is necessary may alleviate some of those concerns. Providing explicit instructions for the user to follow also helps them navigate the reboot process. If you don’t provide these instructions, the user may accidentally or purposefully abort the installation process for your kext.\n\n### Update an Existing Kernel Extension\n\nTo update an existing kext, install that kext and use the `kmutil` or `kextload` tool to initiate the loading process. For a previously approved and loaded kext, the user must perform the following steps to update that kext:\n\nWhen the user consents to update the kext, the system rebuilds the kext collection with the updated version. However, the new collection doesn’t take effect until after the user reboots the system. If the user defers the reboot process, the system continues to run with the previous version of the kext.\n\n### Unload a Kernel Extension\n\nUnloading a kext on macOS 11 and later requires a call to `kmutil` or `kextunload`, followed by a system reboot. The `kmutil` tool builds a new kext collection without the specified kext, but it doesn’t install that collection immediately. The system installs the new kext collection only after the computer reboots. As a result, the unloaded kext actually remains active and running until the user reboots the system.\n\nFor more details, see the `kmutil(8)` man page.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/apple-silicon\/installing-a-custom-kernel-extension\ncrawled: 2025-12-03T17:23:57Z\n---\n\n# Installing a custom kernel extension\n\n**Article**\n\nInstall kernel extensions using a custom installer package, and help users understand the installation process.\n\n## Overview\n\nA kernel extension (or kext) is a bundle that performs low-level tasks. Kexts run in kernel space, which gives them elevated privileges and the ability to perform tasks that user-space apps can’t.\n\nAlways consider alternatives before creating a kext. The system provides numerous APIs to minimize the need for kexts. For example, you can use the DriverKit SDK to implement drivers for most types of hardware. In addition, the kernel runtime environment has more stringent code-level requirements, which makes the creation of kexts more challenging, and the consequences more severe if you do it incorrectly.\n\nFor information about alternatives to kexts, see [doc:\/\/com.apple.documentation\/documentation\/SystemExtensions\/implementing-drivers-system-extensions-and-kexts].\n\n### Load Kexts as the Final Step in Your Installer Package\n\nThe most common way to install kexts is with a custom installer package. (Unlike apps and system extensions, you cannot distribute kexts through the Mac App Store.) Typically, you use a single package to copy each kext and any supporting software to the user’s system, and then you use scripts to load and configure the kexts for execution.\n\nWhen creating your installer package, load your kexts as the final step in the installation process using the `kmutil` or `kextload` tool. These tools initiate the kext-loading process, which on macOS 11 requires getting the user’s permission and rebooting the user’s system. Loading them as the final step prevents the reboot from disrupting the rest of the installation process. To avoid multiple user prompts when installing multiple kexts, make a single call to `kmutil` or `kextload` and include all of your kexts in the parameter list.\n\n\n\nFor more information about how to load kexts, run `kmutil load -h` in Terminal.\n\n### Explain the Kext-Loading Process to Users\n\nIn macOS 11 and later, the loading of a kext requires the user to take actions outside of your installation package. When loading a kext, tell the user to perform the following one-time setup on Apple silicon:\n\n1. Reboot your Mac with Apple silicon into Recovery mode.\n2. Set the security level to Reduced security.\n3. Allow the loading of third-party kexts.\n4. Reboot back to macOS.\n\nTell the user to perform the following steps on all Macs whenever you load or install a previously unused kext:\n\n1. Open the Security & Privacy System Preferences.\n2. Authenticate to make changes.\n3. Allow the system to load your kext.\n4. Wait for the system to load the kext and rebuild the auxiliary kext collection.\n5. Reboot to load the new auxiliary kext collection.\n\nThe system prompts the user through most of this process, but make sure your installer package provides clear instructions about what to do. Rebooting is a disruptive process for the user, and lowering the security protections may cause concern. Providing a clear explanation of what your kext does, and why its installation is necessary may alleviate some of those concerns. Providing explicit instructions for the user to follow also helps them navigate the reboot process. If you don’t provide these instructions, the user may accidentally or purposefully abort the installation process for your kext.\n\n\n\n### Update an Existing Kernel Extension\n\nTo update an existing kext, install that kext and use the `kmutil` or `kextload` tool to initiate the loading process. For a previously approved and loaded kext, the user must perform the following steps to update that kext:\n\n1. Open the Security & Privacy System Preferences.\n2. Authenticate to make changes.\n3. Allow the system to update the kext.\n4. Reboot to install the updated kext.\n\nWhen the user consents to update the kext, the system rebuilds the kext collection with the updated version. However, the new collection doesn’t take effect until after the user reboots the system. If the user defers the reboot process, the system continues to run with the previous version of the kext.\n\n### Unload a Kernel Extension\n\nUnloading a kext on macOS 11 and later requires a call to `kmutil` or `kextunload`, followed by a system reboot. The `kmutil` tool builds a new kext collection without the specified kext, but it doesn’t install that collection immediately. The system installs the new kext collection only after the computer reboots. As a result, the unloaded kext actually remains active and running until the user reboots the system.\n\nFor more details, see the `kmutil(8)` man page.\n\n## Kernel and drivers\n\n- **Debugging a custom kernel extension**: Configure your system to enable the debugging of custom kernel extensions from a second Mac.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Configure your system to enable the debugging of custom kernel extensions from a second Mac.",
          "name" : "Debugging a custom kernel extension",
          "url" : "https:\/\/developer.apple.com\/documentation\/Apple-Silicon\/debugging-a-custom-kernel-extension"
        }
      ],
      "title" : "Kernel and drivers"
    }
  ],
  "source" : "appleJSON",
  "title" : "Installing a custom kernel extension",
  "url" : "https:\/\/developer.apple.com\/documentation\/apple-silicon\/installing-a-custom-kernel-extension"
}