{
  "abstract" : "Configure your system to enable the debugging of custom kernel extensions from a second Mac.",
  "codeExamples" : [
    {
      "code" : "(lldb) kdp-remote MyComputer.local",
      "language" : "other"
    },
    {
      "code" : "% lldb \/Library\/Developer\/KDKs\/<KDK Version>\/System\/Library\/Kernels\/kernel",
      "language" : "other"
    }
  ],
  "contentHash" : "b8968ae5ebe0f9328e87641d9ff6d74dc3de3840e55f1012a6b70bbc26a49510",
  "crawledAt" : "2025-12-04T03:46:14Z",
  "id" : "5583B374-0355-4AF1-A920-0EFD944D64D6",
  "kind" : "article",
  "language" : "swift",
  "overview" : "## Overview\n\nThe kernel supports every other process on the system, including the debugger itself, so you can’t debug it using normal techniques. If you develop a kernel extension (kext), you have several options to debug it:\n\nUse the Kernel Debug Kit to set up two-machine debugging and an optional core-dump server. Use two-machine debugging to dynamically examine the state of your kext at runtime. If you don’t save core-dump files directly to the Mac you use for debugging, a core-dump server captures them automatically over the network.\n\n### Install the Kernel Debug Kit\n\nThe Kernel Debug Kit (KDK) provides the tools and support you need to debug the kernel. This separate download includes custom versions of the kernel that include extra assertions and error checking to help you catch problems.\n\nTo use the KDK to perform two-machine debugging:\n\nThe KDK includes instructions on how to install the custom kernels you use during debugging. It also provides detailed instructions for setting up the connection between your computers. For more information, sign in and download the appropriate KDK from [https:\/\/developer.apple.com\/download\/more\/].\n\n### Debug the Kext\n\nTo begin a debugging session, designate one machine as the debugging machine and the other as the target. Run `lldb` from Terminal on your debugging machine and use the `kdp-remote` command to connect to the remote computer. The `kdp-remote` command accepts the hostname or IP address and creates a debugger connection to the corresponding Mac. Specify the name or IP address of your target Mac as the parameter to the command.\n\nAfter you establish a connection, set breakpoints and step through your custom code as you would for any other process. The debugger automatically searches any spotlight-indexed directories and the `\/Library\/Developer\/KDKs\/` directory on the local system for symbol information to use during debugging. You can specify the location of the kernel symbol files by launching `lldb` with the path to the kernel file that contains those symbols. For example:\n\nFor more information about two-machine debugging, see the KDK Readme file located in the `\/Library\/Developer\/KDKs\/<KDK Version>\/` directory of the KDK.\n\n.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/Apple-Silicon\/debugging-a-custom-kernel-extension\ncrawled: 2025-12-04T03:46:14Z\n---\n\n# Debugging a custom kernel extension\n\n**Article**\n\nConfigure your system to enable the debugging of custom kernel extensions from a second Mac.\n\n## Overview\n\nThe kernel supports every other process on the system, including the debugger itself, so you can’t debug it using normal techniques. If you develop a kernel extension (kext), you have several options to debug it:\n\n- Write debug information to logs and analyze the logs later.\n- Use a second computer to debug the kernel on another Mac.\n- Debug or inspect a kernel core file from a kernel panic.\n\nUse the Kernel Debug Kit to set up two-machine debugging and an optional core-dump server. Use two-machine debugging to dynamically examine the state of your kext at runtime. If you don’t save core-dump files directly to the Mac you use for debugging, a core-dump server captures them automatically over the network.\n\n### Install the Kernel Debug Kit\n\nThe Kernel Debug Kit (KDK) provides the tools and support you need to debug the kernel. This separate download includes custom versions of the kernel that include extra assertions and error checking to help you catch problems.\n\nTo use the KDK to perform two-machine debugging:\n\n1. Connect both Macs to the same network.\n2. Log in as an administrator on both Macs.\n3. Download the KDK for the version of macOS you’re debugging.\n4. Install the KDK on both Mac computers.\n5. Install your kext (and the appropriate kernel) on the computer you want to debug.\n\nThe KDK includes instructions on how to install the custom kernels you use during debugging. It also provides detailed instructions for setting up the connection between your computers. For more information, sign in and download the appropriate KDK from [https:\/\/developer.apple.com\/download\/more\/].\n\n### Debug the Kext\n\nTo begin a debugging session, designate one machine as the debugging machine and the other as the target. Run `lldb` from Terminal on your debugging machine and use the `kdp-remote` command to connect to the remote computer. The `kdp-remote` command accepts the hostname or IP address and creates a debugger connection to the corresponding Mac. Specify the name or IP address of your target Mac as the parameter to the command.\n\n```other\n(lldb) kdp-remote MyComputer.local\n```\n\nAfter you establish a connection, set breakpoints and step through your custom code as you would for any other process. The debugger automatically searches any spotlight-indexed directories and the `\/Library\/Developer\/KDKs\/` directory on the local system for symbol information to use during debugging. You can specify the location of the kernel symbol files by launching `lldb` with the path to the kernel file that contains those symbols. For example:\n\n```other\n% lldb \/Library\/Developer\/KDKs\/<KDK Version>\/System\/Library\/Kernels\/kernel\n```\n\nFor more information about two-machine debugging, see the KDK Readme file located in the `\/Library\/Developer\/KDKs\/<KDK Version>\/` directory of the KDK.\n\n.\n\n## Kernel and drivers\n\n- **Installing a custom kernel extension**: Install kernel extensions using a custom installer package, and help users understand the installation process.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Install kernel extensions using a custom installer package, and help users understand the installation process.",
          "name" : "Installing a custom kernel extension",
          "url" : "https:\/\/developer.apple.com\/documentation\/Apple-Silicon\/installing-a-custom-kernel-extension"
        }
      ],
      "title" : "Kernel and drivers"
    }
  ],
  "source" : "appleJSON",
  "title" : "Debugging a custom kernel extension",
  "url" : "https:\/\/developer.apple.com\/documentation\/Apple-Silicon\/debugging-a-custom-kernel-extension"
}