{
  "abstract" : "Create robust apps by describing output you want programmatically.",
  "codeExamples" : [
    {
      "code" : "let prompt = \"How many tablespoons are in a cup?\"\nlet session = LanguageModelSession(model: .default)\n\n\/\/ Generate a response with the type `Float`, instead of `String`.\nlet response = try await session.respond(to: prompt, generating: Float.self)",
      "language" : "swift"
    },
    {
      "code" : "@Generable(description: \"Basic profile information about a cat\")\nstruct CatProfile {\n    \/\/ A guide isn't necessary for basic fields.\n    var name: String\n\n    @Guide(description: \"The age of the cat\", .range(0...20))\n    var age: Int\n\n    @Guide(description: \"A one sentence profile about the cat's personality\")\n    var profile: String\n}",
      "language" : "swift"
    },
    {
      "code" : "\/\/ Generate a response using a custom type.\nlet response = try await session.respond(\n    to: \"Generate a cute rescue cat\",\n    generating: CatProfile.self\n)",
      "language" : "swift"
    },
    {
      "code" : "\/\/ Create the dynamic schema at runtime.\nlet menuSchema = DynamicGenerationSchema(\n    name: \"Menu\",\n    properties: [\n        DynamicGenerationSchema.Property(\n            name: \"dailySoup\",\n            schema: DynamicGenerationSchema(\n                name: \"dailySoup\",\n                anyOf: [\"Tomato\", \"Chicken Noodle\", \"Clam Chowder\"]\n            )\n        )\n\n        \/\/ Add additional properties.\n    ]\n)",
      "language" : "swift"
    },
    {
      "code" : "\/\/ Create the schema.\nlet schema = try GenerationSchema(root: menuSchema, dependencies: [])\n\n\/\/ Pass the schema to the model to guide the output.\nlet response = try await session.respond(\n    to: \"The prompt you want to make.\",\n    schema: schema\n)",
      "language" : "swift"
    }
  ],
  "contentHash" : "10d1cc1101c9375bd508266e00d31048ea74b09cda7cc36ce89776ecb47fe9a2",
  "crawledAt" : "2025-12-02T17:01:36Z",
  "id" : "CC231AF4-CFE1-465C-9CB6-584824A60D19",
  "kind" : "article",
  "language" : "swift",
  "module" : "Foundation Models",
  "overview" : "## Overview\n\nWhen you perform a request, the model returns a raw string in its natural language format. Raw strings require you to manually parse the details you want. Instead of working with raw strings, the framework provides guided generation, which gives strong guarantees that the response is in a format you expect.\n\nTo use guided generation, describe the output you want as a new Swift type. When you make a request to the model, include your custom type and the framework performs the work necessary to fill in and return an object with the parameters filled in for you. The framework uses constrained sampling when generating output, which defines the rules on what the model can generate. Constrained sampling prevents the model from producing malformed output and provides you with results as a type you define.\n\nFor more information about creating a session and prompting the model, see [doc:\/\/com.apple.foundationmodels\/documentation\/FoundationModels\/generating-content-and-performing-tasks-with-foundation-models].\n\n## Conform your data type to Generable\n\nTo conform your type to [doc:\/\/com.apple.foundationmodels\/documentation\/FoundationModels\/Generable], describe the type and the parameters to guide the response of the model. The framework supports generating content with basic Swift types like `Bool`, `Int`, `Float`, `Double`, `Decimal`, and `Array`. For example, if you only want the model to return a numeric result, call [doc:\/\/com.apple.foundationmodels\/documentation\/FoundationModels\/LanguageModelSession\/respond(to:generating:includeSchemaInPrompt:options:)-13kji] using the type `Float`:\n\nA schema provides the ability to control the values of a property, and you can specify guides to control values you associate with it. The framework provides two macros that help you with schema creation. Use [doc:\/\/com.apple.foundationmodels\/documentation\/FoundationModels\/Generable(description:)] on structures, actors, and enumerations; and only use [doc:\/\/com.apple.foundationmodels\/documentation\/FoundationModels\/Guide(description:)] with stored properties.\n\nWhen you add descriptions to `Generable` properties, you help the model understand the semantics of the properties. Keep the descriptions as short as possible — long descriptions take up additional context size and can introduce latency. The following example creates a type that describes a cat and includes a name, an age that’s constrained to a range of values, and a short profile:\n\nYou can nest custom `Generable` types inside other `Generable` types, and mark enumerations with associated values as `Generable`. The `Generable` macro ensures that all associated and nested values are themselves generable. This allows for advanced use cases like creating complex data types or dynamically generating views at runtime.\n\n## Make a request with your custom data type\n\nAfter creating your type, use it along with a [doc:\/\/com.apple.foundationmodels\/documentation\/FoundationModels\/LanguageModelSession] to prompt the model. When you use a `Generable` type it prevents the model from producing malformed output and prevents the need for any manual string parsing.\n\n## Define a dynamic schema at runtime\n\nIf you don’t know what you want the model to produce at compile time use [doc:\/\/com.apple.foundationmodels\/documentation\/FoundationModels\/DynamicGenerationSchema] to define what you need. For example, when you’re working on a restaurant app and want to restrict the model to pick from menu options that a restaurant provides. Because each restaurant provides a different menu, the schema won’t be known in its entirety until runtime.\n\nAfter creating a dynamic schema, use it to create a [doc:\/\/com.apple.foundationmodels\/documentation\/FoundationModels\/GenerationSchema] that you provide with your request. When you try to create a generation schema, it can throw an error if there are conflicting property names, undefined references, or duplicate types.\n\nThe response you get is an instance of [doc:\/\/com.apple.foundationmodels\/documentation\/FoundationModels\/GeneratedContent]. You can decode the outputs from schemas you define at runtime by calling [doc:\/\/com.apple.foundationmodels\/documentation\/FoundationModels\/GeneratedContent\/value(_:forProperty:)-3xsez] for the property you want.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/FoundationModels\/generating-swift-data-structures-with-guided-generation\ncrawled: 2025-12-02T17:01:36Z\n---\n\n# Generating Swift data structures with guided generation\n\n**Article**\n\nCreate robust apps by describing output you want programmatically.\n\n## Overview\n\nWhen you perform a request, the model returns a raw string in its natural language format. Raw strings require you to manually parse the details you want. Instead of working with raw strings, the framework provides guided generation, which gives strong guarantees that the response is in a format you expect.\n\nTo use guided generation, describe the output you want as a new Swift type. When you make a request to the model, include your custom type and the framework performs the work necessary to fill in and return an object with the parameters filled in for you. The framework uses constrained sampling when generating output, which defines the rules on what the model can generate. Constrained sampling prevents the model from producing malformed output and provides you with results as a type you define.\n\nFor more information about creating a session and prompting the model, see [doc:\/\/com.apple.foundationmodels\/documentation\/FoundationModels\/generating-content-and-performing-tasks-with-foundation-models].\n\n## Conform your data type to Generable\n\nTo conform your type to [doc:\/\/com.apple.foundationmodels\/documentation\/FoundationModels\/Generable], describe the type and the parameters to guide the response of the model. The framework supports generating content with basic Swift types like `Bool`, `Int`, `Float`, `Double`, `Decimal`, and `Array`. For example, if you only want the model to return a numeric result, call [doc:\/\/com.apple.foundationmodels\/documentation\/FoundationModels\/LanguageModelSession\/respond(to:generating:includeSchemaInPrompt:options:)-13kji] using the type `Float`:\n\n```swift\nlet prompt = \"How many tablespoons are in a cup?\"\nlet session = LanguageModelSession(model: .default)\n\n\/\/ Generate a response with the type `Float`, instead of `String`.\nlet response = try await session.respond(to: prompt, generating: Float.self)\n```\n\nA schema provides the ability to control the values of a property, and you can specify guides to control values you associate with it. The framework provides two macros that help you with schema creation. Use [doc:\/\/com.apple.foundationmodels\/documentation\/FoundationModels\/Generable(description:)] on structures, actors, and enumerations; and only use [doc:\/\/com.apple.foundationmodels\/documentation\/FoundationModels\/Guide(description:)] with stored properties.\n\nWhen you add descriptions to `Generable` properties, you help the model understand the semantics of the properties. Keep the descriptions as short as possible — long descriptions take up additional context size and can introduce latency. The following example creates a type that describes a cat and includes a name, an age that’s constrained to a range of values, and a short profile:\n\n```swift\n@Generable(description: \"Basic profile information about a cat\")\nstruct CatProfile {\n    \/\/ A guide isn't necessary for basic fields.\n    var name: String\n\n    @Guide(description: \"The age of the cat\", .range(0...20))\n    var age: Int\n\n    @Guide(description: \"A one sentence profile about the cat's personality\")\n    var profile: String\n}\n```\n\n\n\nYou can nest custom `Generable` types inside other `Generable` types, and mark enumerations with associated values as `Generable`. The `Generable` macro ensures that all associated and nested values are themselves generable. This allows for advanced use cases like creating complex data types or dynamically generating views at runtime.\n\n## Make a request with your custom data type\n\nAfter creating your type, use it along with a [doc:\/\/com.apple.foundationmodels\/documentation\/FoundationModels\/LanguageModelSession] to prompt the model. When you use a `Generable` type it prevents the model from producing malformed output and prevents the need for any manual string parsing.\n\n```swift\n\/\/ Generate a response using a custom type.\nlet response = try await session.respond(\n    to: \"Generate a cute rescue cat\",\n    generating: CatProfile.self\n)\n```\n\n## Define a dynamic schema at runtime\n\nIf you don’t know what you want the model to produce at compile time use [doc:\/\/com.apple.foundationmodels\/documentation\/FoundationModels\/DynamicGenerationSchema] to define what you need. For example, when you’re working on a restaurant app and want to restrict the model to pick from menu options that a restaurant provides. Because each restaurant provides a different menu, the schema won’t be known in its entirety until runtime.\n\n```swift\n\/\/ Create the dynamic schema at runtime.\nlet menuSchema = DynamicGenerationSchema(\n    name: \"Menu\",\n    properties: [\n        DynamicGenerationSchema.Property(\n            name: \"dailySoup\",\n            schema: DynamicGenerationSchema(\n                name: \"dailySoup\",\n                anyOf: [\"Tomato\", \"Chicken Noodle\", \"Clam Chowder\"]\n            )\n        )\n\n        \/\/ Add additional properties.\n    ]\n)\n```\n\nAfter creating a dynamic schema, use it to create a [doc:\/\/com.apple.foundationmodels\/documentation\/FoundationModels\/GenerationSchema] that you provide with your request. When you try to create a generation schema, it can throw an error if there are conflicting property names, undefined references, or duplicate types.\n\n```swift\n\/\/ Create the schema.\nlet schema = try GenerationSchema(root: menuSchema, dependencies: [])\n\n\/\/ Pass the schema to the model to guide the output.\nlet response = try await session.respond(\n    to: \"The prompt you want to make.\",\n    schema: schema\n)\n```\n\nThe response you get is an instance of [doc:\/\/com.apple.foundationmodels\/documentation\/FoundationModels\/GeneratedContent]. You can decode the outputs from schemas you define at runtime by calling [doc:\/\/com.apple.foundationmodels\/documentation\/FoundationModels\/GeneratedContent\/value(_:forProperty:)-3xsez] for the property you want.\n\n## Guided generation\n\n- **Generable**: A type that the model uses when responding to prompts.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "A type that the model uses when responding to prompts.",
          "name" : "Generable",
          "url" : "https:\/\/developer.apple.com\/documentation\/FoundationModels\/Generable"
        }
      ],
      "title" : "Guided generation"
    }
  ],
  "source" : "appleJSON",
  "title" : "Generating Swift data structures with guided generation",
  "url" : "https:\/\/developer.apple.com\/documentation\/FoundationModels\/generating-swift-data-structures-with-guided-generation"
}