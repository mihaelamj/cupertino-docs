{
  "abstract" : "Logs and serializes data that includes session information that you attach when reporting feedback to Apple.",
  "codeExamples" : [
    {
      "code" : "let session = LanguageModelSession()\nlet response = try await session.respond(to: \"What is the capital of France?\")\n\n\/\/ Create feedback for a helpful response.\nlet helpfulFeedbackData = session.logFeedbackAttachment(sentiment: .positive)\n\n\/\/ Create feedback for a problematic response.\nlet problematicFeedbackData = session.logFeedbackAttachment(\n    sentiment: .negative,\n    issues: [\n        LanguageModelFeedback.Issue(\n            category: .incorrect,\n            explanation: \"The model provided outdated information\"\n        )\n    ],\n    desiredOutput: Transcript.Entry.response(...)\n)",
      "language" : "swift"
    },
    {
      "code" : "let text = Transcript.TextSegment(content: \"The capital of France is Paris.\")\nlet segment = Transcript.Segment.text(text)\nlet response = Transcript.Response(segments: [segment])\nlet entry = Transcript.Entry.response(response)",
      "language" : "swift"
    },
    {
      "code" : "let customType = MyCustomType(...) \/\/ A generable type.\nlet structure = Transcript.StructuredSegment(source: String(describing: Foo.self), content: customType.generatedContent)\nlet segment = Transcript.Segment.structure(structure)\nlet response = Transcript.Response(segments: [segment])\nlet entry = Transcript.Entry.response(response)",
      "language" : "swift"
    },
    {
      "code" : "let allFeedback = helpfulFeedbackData + problematicFeedbackData\nlet url = URL(fileURLWithPath: \"path\/to\/save\/feedback.jsonl\")\ntry allFeedback.write(to: url)",
      "language" : "swift"
    }
  ],
  "contentHash" : "e7f41066e39e89f81b85d1eb7c75e37841d4933e3b80701bdbf1fce5542fdefe",
  "crawledAt" : "2025-12-03T05:18:16Z",
  "declaration" : {
    "code" : "@discardableResult final func logFeedbackAttachment(sentiment: LanguageModelFeedback.Sentiment?, issues: [LanguageModelFeedback.Issue] = [], desiredOutput: Transcript.Entry? = nil) -> Data",
    "language" : "swift"
  },
  "id" : "4622F3BC-2071-406B-83AA-FCB68CF3417F",
  "kind" : "method",
  "language" : "swift",
  "module" : "Foundation Models",
  "overview" : "## Return Value\n\nA `Data` object containing the JSON-encoded attachment.\n\n## Discussion\n\nThis method creates a structured attachment containing the session’s transcript and additional feedback information you provide. You can save the attachment data to a `.json` file and attach it when reporting feedback with [https:\/\/feedbackassistant.apple.com].\n\nIf an error occurs during a previous response, the method includes any rejected entries that were rolled back from the transcript in the feedback data.\n\nIf `desiredOutput` is a string, use [doc:\/\/com.apple.foundationmodels\/documentation\/FoundationModels\/Transcript\/Entry\/response(_:)] to turn your desired output into a [doc:\/\/com.apple.foundationmodels\/documentation\/FoundationModels\/Transcript] entry:\n\nTo create a transcript when `desiredOutput` is a [doc:\/\/com.apple.foundationmodels\/documentation\/FoundationModels\/Generable] type:\n\nWhen you submit feedback to Apple, write your feedback to a `.json` file and include the file as an attachment to [https:\/\/feedbackassistant.apple.com]. You can include multiple feedback attachments in the same file:",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "visionOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/foundationmodels\/languagemodelsession\/logfeedbackattachment(sentiment:issues:desiredoutput:)\ncrawled: 2025-12-03T05:18:16Z\n---\n\n# logFeedbackAttachment(sentiment:issues:desiredOutput:)\n\n**Instance Method**\n\nLogs and serializes data that includes session information that you attach when reporting feedback to Apple.\n\n## Declaration\n\n```swift\n@discardableResult final func logFeedbackAttachment(sentiment: LanguageModelFeedback.Sentiment?, issues: [LanguageModelFeedback.Issue] = [], desiredOutput: Transcript.Entry? = nil) -> Data\n```\n\n## Parameters\n\n- **sentiment**: A [doc:\/\/com.apple.foundationmodels\/documentation\/FoundationModels\/LanguageModelFeedback\/Sentiment] rating about the model’s output (positive, negative, or neutral).\n- **issues**: An array of specific [doc:\/\/com.apple.foundationmodels\/documentation\/FoundationModels\/LanguageModelFeedback\/Issue] you identify with the model’s response.\n- **desiredOutput**: A [doc:\/\/com.apple.foundationmodels\/documentation\/FoundationModels\/Transcript] entry showing the output you expect.\n\n## Return Value\n\nA `Data` object containing the JSON-encoded attachment.\n\n## Discussion\n\nThis method creates a structured attachment containing the session’s transcript and additional feedback information you provide. You can save the attachment data to a `.json` file and attach it when reporting feedback with [https:\/\/feedbackassistant.apple.com].\n\nIf an error occurs during a previous response, the method includes any rejected entries that were rolled back from the transcript in the feedback data.\n\n```swift\nlet session = LanguageModelSession()\nlet response = try await session.respond(to: \"What is the capital of France?\")\n\n\/\/ Create feedback for a helpful response.\nlet helpfulFeedbackData = session.logFeedbackAttachment(sentiment: .positive)\n\n\/\/ Create feedback for a problematic response.\nlet problematicFeedbackData = session.logFeedbackAttachment(\n    sentiment: .negative,\n    issues: [\n        LanguageModelFeedback.Issue(\n            category: .incorrect,\n            explanation: \"The model provided outdated information\"\n        )\n    ],\n    desiredOutput: Transcript.Entry.response(...)\n)\n```\n\nIf `desiredOutput` is a string, use [doc:\/\/com.apple.foundationmodels\/documentation\/FoundationModels\/Transcript\/Entry\/response(_:)] to turn your desired output into a [doc:\/\/com.apple.foundationmodels\/documentation\/FoundationModels\/Transcript] entry:\n\n```swift\nlet text = Transcript.TextSegment(content: \"The capital of France is Paris.\")\nlet segment = Transcript.Segment.text(text)\nlet response = Transcript.Response(segments: [segment])\nlet entry = Transcript.Entry.response(response)\n```\n\nTo create a transcript when `desiredOutput` is a [doc:\/\/com.apple.foundationmodels\/documentation\/FoundationModels\/Generable] type:\n\n```swift\nlet customType = MyCustomType(...) \/\/ A generable type.\nlet structure = Transcript.StructuredSegment(source: String(describing: Foo.self), content: customType.generatedContent)\nlet segment = Transcript.Segment.structure(structure)\nlet response = Transcript.Response(segments: [segment])\nlet entry = Transcript.Entry.response(response)\n```\n\nWhen you submit feedback to Apple, write your feedback to a `.json` file and include the file as an attachment to [https:\/\/feedbackassistant.apple.com]. You can include multiple feedback attachments in the same file:\n\n```swift\nlet allFeedback = helpfulFeedbackData + problematicFeedbackData\nlet url = URL(fileURLWithPath: \"path\/to\/save\/feedback.jsonl\")\ntry allFeedback.write(to: url)\n```\n\n## Creating feedback\n\n- **LanguageModelFeedback.Issue**: An issue with the model’s response.\n- **LanguageModelFeedback.Sentiment**: A sentiment regarding the model’s response.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "An issue with the model’s response.",
          "name" : "LanguageModelFeedback.Issue",
          "url" : "https:\/\/developer.apple.com\/documentation\/FoundationModels\/LanguageModelFeedback\/Issue"
        },
        {
          "description" : "A sentiment regarding the model’s response.",
          "name" : "LanguageModelFeedback.Sentiment",
          "url" : "https:\/\/developer.apple.com\/documentation\/FoundationModels\/LanguageModelFeedback\/Sentiment"
        }
      ],
      "title" : "Creating feedback"
    }
  ],
  "source" : "appleJSON",
  "title" : "logFeedbackAttachment(sentiment:issues:desiredOutput:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/foundationmodels\/languagemodelsession\/logfeedbackattachment(sentiment:issues:desiredoutput:)"
}