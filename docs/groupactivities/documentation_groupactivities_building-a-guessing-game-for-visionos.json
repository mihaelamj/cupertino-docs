{
  "abstract" : "Create a team-based guessing game for visionOS using Group Activities.",
  "codeExamples" : [
    {
      "code" : "struct GuessTogetherActivity: GroupActivity, Transferable, Sendable {\n    var metadata: GroupActivityMetadata = {\n        var metadata = GroupActivityMetadata()\n        metadata.title = \"Guess Together\"\n        return metadata\n    }()\n}",
      "language" : "swift"
    },
    {
      "code" : "struct SharePlayButton<ActivityType: GroupActivity & Transferable & Sendable>: View {\n    @ObservedObject\n    private var groupStateObserver = GroupStateObserver()\n    \n    @State\n    private var isActivitySharingViewPresented = false\n    \n    @State\n    private var isActivationErrorViewPresented = false\n    \n    private let activitySharingView: ActivitySharingView<ActivityType>\n    \n    let text: any StringProtocol\n    let activity: ActivityType\n    \n    init(_ text: any StringProtocol, activity: ActivityType) {\n        self.text = text\n        self.activity = activity\n        self.activitySharingView = ActivitySharingView {\n            activity\n        }\n    }\n    \n    var body: some View {\n        ZStack {\n            ShareLink(item: activity, preview: SharePreview(text)).hidden()\n            \n            Button(text, systemImage: \"shareplay\") {\n                if groupStateObserver.isEligibleForGroupSession {\n                    Task.detached {\n                        do {\n                            _ = try await activity.activate()\n                        } catch {\n                            print(\"Error activating activity: \\(error)\")\n                            \n                            Task { @MainActor in\n                                isActivationErrorViewPresented = true\n                            }\n                        }\n                    }\n                } else {\n                    isActivitySharingViewPresented = true\n                }\n            }\n            .tint(.green)\n            .sheet(isPresented: $isActivitySharingViewPresented) {\n                activitySharingView\n            }\n            .alert(\"Unable to start game\", isPresented: $isActivationErrorViewPresented) {\n                Button(\"Ok\", role: .cancel) { }\n            } message: {\n                Text(\"Please try again later.\")\n            }\n        }\n    }\n}\n\nstruct ActivitySharingView<ActivityType: GroupActivity & Sendable>: UIViewControllerRepresentable {\n    let preparationHandler: () async throws -> ActivityType\n\n    func makeUIViewController(context: Context) -> GroupActivitySharingController {\n        GroupActivitySharingController(preparationHandler: preparationHandler)\n    }\n\n    func updateUIViewController(_: GroupActivitySharingController, context: Context) {}\n}",
      "language" : "swift"
    },
    {
      "code" : "\/\/ MainView\n\nstruct MainView: View {\n    ...\n\n    var body: some View {\n        Group {\n            ...\n        }\n        .task(observeGroupSessions)\n    }\n    \n    \/\/\/ Monitor for new Guess Together group activity sessions.\n    @Sendable\n    func observeGroupSessions() async {\n        for await session in GuessTogetherActivity.sessions() {\n            let sessionController = await SessionController(session, appModel: appModel)\n            guard let sessionController else {\n                continue\n            }\n            appModel.sessionController = sessionController\n\n            \/\/ Create a task to observe the group session state and clear the\n            \/\/ session controller when the group session invalidates.\n            Task {\n                for await state in session.$state.values {\n                    guard appModel.sessionController?.session.id == session.id else {\n                        return\n                    }\n\n                    if case .invalidated = state {\n                        appModel.sessionController = nil\n                        return\n                    }\n                }\n            }\n        }\n    }\n}",
      "language" : "swift"
    },
    {
      "code" : "\/\/ SessionController\n\nfunc joinTeam(_ team: PlayerModel.Team?) {\n    localPlayer.team = team\n}\n\n...\n\nvar localPlayer: PlayerModel {\n    get {\n        players[session.localParticipant]!\n    }\n    set {\n        if newValue != players[session.localParticipant] {\n            players[session.localParticipant] = newValue\n            shareLocalPlayerState(newValue)\n        }\n    }\n}",
      "language" : "swift"
    },
    {
      "code" : "\/\/ SessionController+RemoteParticipantSynchronization\n\nfunc shareLocalPlayerState(_ newValue: PlayerModel) {\n    Task {\n        do {\n            try await messenger.send(newValue)\n        } catch {\n            \/\/ Failed to send the message.\n        }\n    }\n}",
      "language" : "swift"
    },
    {
      "code" : "\/\/ SessionController\n\n...\n\nprivate func observeRemotePlayerModelUpdates() {\n    Task {\n        for await (player, context) in messenger.messages(of: PlayerModel.self) {\n            players[context.source] = player\n        }\n    }\n}",
      "language" : "swift"
    },
    {
      "code" : "\/\/ SessionController\n\nfunc configureSystemCoordinator() {\n    systemCoordinator.configuration.supportsGroupImmersiveSpace = true\n    \n    ...\n}",
      "language" : "swift"
    },
    {
      "code" : "\/\/ SessionController\n\nfunc updateSpatialTemplatePreference() {\n    switch game.stage {\n    case .categorySelection:\n        systemCoordinator.configuration.spatialTemplatePreference = .sideBySide\n    case .teamSelection:\n        systemCoordinator.configuration.spatialTemplatePreference = .custom(TeamSelectionTemplate())\n    case .inGame:\n        systemCoordinator.configuration.spatialTemplatePreference = .custom(GameTemplate())\n    }\n}",
      "language" : "swift"
    },
    {
      "code" : "struct TeamSelectionTemplate: SpatialTemplate {\n    enum Role: String, SpatialTemplateRole {\n        case blueTeam\n        case redTeam\n    }\n    \n    \/\/\/ An array of seating positions the game uses to position spatial Personas during the team-selection stage.\n    \/\/\/\n    \/\/\/ The game fills the seats with participants based on the order of the array's elements.\n    let elements: [any SpatialTemplateElement] = [\n        \/\/ Blue team:\n        .seat(position: .app.offsetBy(x: -2.5, z: 3.5), role: Role.blueTeam),\n        .seat(position: .app.offsetBy(x: -3.0, z: 3.0), role: Role.blueTeam),\n        .seat(position: .app.offsetBy(x: -3.5, z: 2.5), role: Role.blueTeam),\n        \n        \/\/ Starting positions:\n        .seat(position: .app.offsetBy(x: 0, z: 4)),\n        .seat(position: .app.offsetBy(x: 1, z: 4)),\n        .seat(position: .app.offsetBy(x: -1, z: 4)),\n        .seat(position: .app.offsetBy(x: 2, z: 4)),\n        .seat(position: .app.offsetBy(x: -2, z: 4)),\n        \n        \/\/ Red team:\n        .seat(position: .app.offsetBy(x: 2.5, z: 3.5), role: Role.redTeam),\n        .seat(position: .app.offsetBy(x: 3.0, z: 3.0), role: Role.redTeam),\n        .seat(position: .app.offsetBy(x: 3.5, z: 2.5), role: Role.redTeam)\n    ]\n}",
      "language" : "swift"
    },
    {
      "code" : "struct GameTemplate: SpatialTemplate {\n    enum Role: String, SpatialTemplateRole {\n        case player\n        case activeTeam\n    }\n    \n    static let playerPosition = Point3D(x: -2, z: 3)\n    \n    \/\/\/ An array that represents the order in which the game adds participants to spatial template positions.\n    var elements: [any SpatialTemplateElement] {\n        let activeTeamCenterPosition = SpatialTemplateElementPosition.app.offsetBy(x: 2, z: 3)\n\n        let playerSeat = SpatialTemplateSeatElement(\n            position: .app.offsetBy(x: Self.playerPosition.x, z: Self.playerPosition.z),\n            direction: .lookingAt(activeTeamCenterPosition),\n            role: Role.player\n        )\n        \n        let activeTeamSeats: [any SpatialTemplateElement] = [\n            .seat(\n                position: activeTeamCenterPosition.offsetBy(x: 0, z: -0.5),\n                direction: .lookingAt(playerSeat),\n                role: Role.activeTeam\n            ),\n            .seat(\n                position: activeTeamCenterPosition.offsetBy(x: 0, z: 0.5),\n                direction: .lookingAt(playerSeat),\n                role: Role.activeTeam\n            )\n        ]\n        \n        let audienceSeats: [any SpatialTemplateElement] = [\n            .seat(position: .app.offsetBy(x: 0, z: 5)),\n            .seat(position: .app.offsetBy(x: 1, z: 5)),\n            .seat(position: .app.offsetBy(x: -1, z: 5)),\n            .seat(position: .app.offsetBy(x: 2, z: 5)),\n            .seat(position: .app.offsetBy(x: -2, z: 5))\n        ]\n        \n        return audienceSeats + [playerSeat] + activeTeamSeats\n    }\n}",
      "language" : "swift"
    }
  ],
  "contentHash" : "f020629ed3242c0718ca217569d58db7f863fa35bf287ecdceb80ae8df89910c",
  "crawledAt" : "2025-12-02T15:49:56Z",
  "id" : "F5DFF0F2-78BB-4FCB-91B6-C5C77606DD03",
  "kind" : "unknown",
  "language" : "swift",
  "module" : "Group Activities",
  "overview" : "## Overview\n\nThis sample shows how to build a guessing game for two competing teams. Participants, using an Apple Vision Pro during a FaceTime call, can play as members of the red or blue team or watch from the audience. At each stage of the game, the sample positions participants according to their role as a team member or spectator.\n\nAfter the initial welcome screen for the game, the participants select categories and divide into two teams. During the team-selection process, all participants start in the audience section. If a participant chooses to join a team, they move to the appropriate team area. During the game itself, the teams take turns guessing a word or phrase in a window that only one team member can see. The team member that sees the word or phrase can use any gestures or phrases to elicit a correct guess, but can’t say the word or phrase itself. If the team correctly guesses the word or phrase, the team scores a point. The team with the most points at the end of the game wins.\n\n### Define the group activity\n\nThe [doc:\/\/com.apple.GroupActivities\/documentation\/GroupActivities\/GroupActivity] protocol provides the system with the context and metadata to start an activity-related session. The sample defines a single `GroupActivity` to represent the game:\n\nFor more information, see [doc:\/\/com.apple.GroupActivities\/documentation\/GroupActivities\/defining-your-apps-shareplay-activities].\n\n### Encourage people to start a game\n\nThe welcome screen displays a custom `SharePlayButton`; tapping it starts the game. If the player is already in a FaceTime call, the `GuessTogetherActivity` activates. Otherwise, a [doc:\/\/com.apple.documentation\/documentation\/GroupActivities\/GroupActivitySharingController-ybcy] displays a sheet inviting the player to start the FaceTime call. When a recipient accepts the FaceTime call, the system prompts them to join the `GuessTogetherActivity`:\n\nFor more information, see [doc:\/\/com.apple.GroupActivities\/documentation\/GroupActivities\/promoting-shareplay-activities-from-your-apps-ui].\n\n### Join and manage the activity\n\nThe system creates a [doc:\/\/com.apple.GroupActivities\/documentation\/GroupActivities\/GroupSession] when a player activates an activity. Players can activate an activity in several ways, at any time. This sample uses an asynchronous task in `MainView` to monitor the creation of new `GroupSession` instances for `GuessTogetherActivity`. This task calls the `observeGroupSessions` method, which receives new sessions and creates a `SessionController` to manage gameplay. A separate task detects when the session ends and cleans up the `SessionController`.\n\nFor more information, see [doc:\/\/com.apple.GroupActivities\/documentation\/GroupActivities\/joining-and-managing-a-shared-activity].\n\n### Synchronize game state by sending and receiving messages\n\nWhen a player’s action changes the game state, `SessionController` uses [doc:\/\/com.apple.documentation\/documentation\/GroupActivities\/GroupSessionMessenger] to send an update to the other players. For example, when player X joins the red team, `TeamSelectionView` calls `SessionController.joinTeam`. This sets `SessionController.localPlayer.team`, sending a call to `SessionController.shareLocalPlayerState`.\n\n`SessionController.shareLocalPlayerState` uses `GroupSessionMessenger` to send player X’s new state to other players.\n\nAt the same time, `SessionController.observeRemotePlayerModelUpdates` receives and processes player state updates. Each update modifies `SessionController.players` to reflect the synchronized player state. For example, when player X joins the red team, other players are notified and update their local representation of player X’s state accordingly.\n\nFor more information, see [doc:\/\/com.apple.GroupActivities\/documentation\/GroupActivities\/synchronizing-data-during-a-shareplay-activity].\n\n### Enable spatial personas in an immersive space\n\nTo display spatial Personas when an immersive space is open, set the [doc:\/\/com.apple.documentation\/documentation\/GroupActivities\/SystemCoordinator\/Configuration-swift.struct\/supportsGroupImmersiveSpace] property on [doc:\/\/com.apple.documentation\/documentation\/GroupActivities\/SystemCoordinator\/Configuration-swift.struct] to `true`:\n\nIn an immersive space, the system provides a shared coordinate system for participants and content. This allows you to position entities consistently across all participants’ perspectives. For example, an entity positioned 0.5 meters in front of player X appears 0.5 meters in front of player X from player Y’s perspective.\n\nFor more information, see [doc:\/\/com.apple.GroupActivities\/documentation\/GroupActivities\/adding-spatial-persona-support-to-an-activity].\n\n### Specify custom positions for participants\n\nThe game has three distinct stages:\n\nEach time the current stage changes, the `SessionController` object updates the position of the participants in the space. When selecting a category, the participants appear side by side in front of the game window. During team selection and gameplay, the game arranges players using custom spatial templates. The game specifies each arrangement of participants by changing the configuration of the [doc:\/\/com.apple.GroupActivities\/documentation\/GroupActivities\/SystemCoordinator] object.\n\nWhen the game moves to the team-selection stage, the session rearranges the participants according to which team they choose. All participants start in the audience initially facing the app window, which displays buttons to join either the red team or blue team.\n\n\n\nThe `TeamSelectionTemplate` specifies the positions of seats during the team-selection process. Participants don’t have an assigned role initially, so the system places them in the audience seats. As participants join a team, the system moves them to the assigned seating area for their chosen team.\n\nThe spatial template specifies all seat positions up front, including seats for the blue and red teams, and the audience. Seat positions reflect the distance in meters from the app’s main window along the x and z axes. Seat roles reflect the role that a participant must have to occupy that seat. When a participant asks to join a team, the sample app assigns them the corresponding role. If a seat with that role is available, the participant receives the role and their spatial Persona moves to the next available seat.\n\nDuring gameplay, teams take turns playing the game while the audience watches. Audience members face the main window while the active team sits on either side of that window. The team member giving clues sits on one side of the window, while their teammates sit opposite. The template orients the active team members so that they face each other at the start of the game, with audience members facing the main window.\n\n\n\nThe `GameTemplate` structure defines separate roles for the current player and the active team members. Members of the opposing team don’t receive a role until it’s their turn to play, so they initially sit in the audience positions. Because the active team members face each other, and not the app window, their seat positions include a `direction` parameter to specify where they look initially.\n\nFor more information about building custom spatial templates, see [doc:\/\/com.apple.GroupActivities\/documentation\/GroupActivities\/SpatialTemplate].",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/GroupActivities\/building-a-guessing-game-for-visionos\ncrawled: 2025-12-02T15:49:56Z\n---\n\n# Building a guessing game for visionOS\n\n**Sample Code**\n\nCreate a team-based guessing game for visionOS using Group Activities.\n\n## Overview\n\nThis sample shows how to build a guessing game for two competing teams. Participants, using an Apple Vision Pro during a FaceTime call, can play as members of the red or blue team or watch from the audience. At each stage of the game, the sample positions participants according to their role as a team member or spectator.\n\nAfter the initial welcome screen for the game, the participants select categories and divide into two teams. During the team-selection process, all participants start in the audience section. If a participant chooses to join a team, they move to the appropriate team area. During the game itself, the teams take turns guessing a word or phrase in a window that only one team member can see. The team member that sees the word or phrase can use any gestures or phrases to elicit a correct guess, but can’t say the word or phrase itself. If the team correctly guesses the word or phrase, the team scores a point. The team with the most points at the end of the game wins.\n\n\n\n\n\n### Define the group activity\n\nThe [doc:\/\/com.apple.GroupActivities\/documentation\/GroupActivities\/GroupActivity] protocol provides the system with the context and metadata to start an activity-related session. The sample defines a single `GroupActivity` to represent the game:\n\n```swift\nstruct GuessTogetherActivity: GroupActivity, Transferable, Sendable {\n    var metadata: GroupActivityMetadata = {\n        var metadata = GroupActivityMetadata()\n        metadata.title = \"Guess Together\"\n        return metadata\n    }()\n}\n```\n\nFor more information, see [doc:\/\/com.apple.GroupActivities\/documentation\/GroupActivities\/defining-your-apps-shareplay-activities].\n\n### Encourage people to start a game\n\nThe welcome screen displays a custom `SharePlayButton`; tapping it starts the game. If the player is already in a FaceTime call, the `GuessTogetherActivity` activates. Otherwise, a [doc:\/\/com.apple.documentation\/documentation\/GroupActivities\/GroupActivitySharingController-ybcy] displays a sheet inviting the player to start the FaceTime call. When a recipient accepts the FaceTime call, the system prompts them to join the `GuessTogetherActivity`:\n\n```swift\nstruct SharePlayButton<ActivityType: GroupActivity & Transferable & Sendable>: View {\n    @ObservedObject\n    private var groupStateObserver = GroupStateObserver()\n    \n    @State\n    private var isActivitySharingViewPresented = false\n    \n    @State\n    private var isActivationErrorViewPresented = false\n    \n    private let activitySharingView: ActivitySharingView<ActivityType>\n    \n    let text: any StringProtocol\n    let activity: ActivityType\n    \n    init(_ text: any StringProtocol, activity: ActivityType) {\n        self.text = text\n        self.activity = activity\n        self.activitySharingView = ActivitySharingView {\n            activity\n        }\n    }\n    \n    var body: some View {\n        ZStack {\n            ShareLink(item: activity, preview: SharePreview(text)).hidden()\n            \n            Button(text, systemImage: \"shareplay\") {\n                if groupStateObserver.isEligibleForGroupSession {\n                    Task.detached {\n                        do {\n                            _ = try await activity.activate()\n                        } catch {\n                            print(\"Error activating activity: \\(error)\")\n                            \n                            Task { @MainActor in\n                                isActivationErrorViewPresented = true\n                            }\n                        }\n                    }\n                } else {\n                    isActivitySharingViewPresented = true\n                }\n            }\n            .tint(.green)\n            .sheet(isPresented: $isActivitySharingViewPresented) {\n                activitySharingView\n            }\n            .alert(\"Unable to start game\", isPresented: $isActivationErrorViewPresented) {\n                Button(\"Ok\", role: .cancel) { }\n            } message: {\n                Text(\"Please try again later.\")\n            }\n        }\n    }\n}\n\nstruct ActivitySharingView<ActivityType: GroupActivity & Sendable>: UIViewControllerRepresentable {\n    let preparationHandler: () async throws -> ActivityType\n\n    func makeUIViewController(context: Context) -> GroupActivitySharingController {\n        GroupActivitySharingController(preparationHandler: preparationHandler)\n    }\n\n    func updateUIViewController(_: GroupActivitySharingController, context: Context) {}\n}\n```\n\nFor more information, see [doc:\/\/com.apple.GroupActivities\/documentation\/GroupActivities\/promoting-shareplay-activities-from-your-apps-ui].\n\n### Join and manage the activity\n\nThe system creates a [doc:\/\/com.apple.GroupActivities\/documentation\/GroupActivities\/GroupSession] when a player activates an activity. Players can activate an activity in several ways, at any time. This sample uses an asynchronous task in `MainView` to monitor the creation of new `GroupSession` instances for `GuessTogetherActivity`. This task calls the `observeGroupSessions` method, which receives new sessions and creates a `SessionController` to manage gameplay. A separate task detects when the session ends and cleans up the `SessionController`.\n\n```swift\n\/\/ MainView\n\nstruct MainView: View {\n    ...\n\n    var body: some View {\n        Group {\n            ...\n        }\n        .task(observeGroupSessions)\n    }\n    \n    \/\/\/ Monitor for new Guess Together group activity sessions.\n    @Sendable\n    func observeGroupSessions() async {\n        for await session in GuessTogetherActivity.sessions() {\n            let sessionController = await SessionController(session, appModel: appModel)\n            guard let sessionController else {\n                continue\n            }\n            appModel.sessionController = sessionController\n\n            \/\/ Create a task to observe the group session state and clear the\n            \/\/ session controller when the group session invalidates.\n            Task {\n                for await state in session.$state.values {\n                    guard appModel.sessionController?.session.id == session.id else {\n                        return\n                    }\n\n                    if case .invalidated = state {\n                        appModel.sessionController = nil\n                        return\n                    }\n                }\n            }\n        }\n    }\n}\n```\n\nFor more information, see [doc:\/\/com.apple.GroupActivities\/documentation\/GroupActivities\/joining-and-managing-a-shared-activity].\n\n### Synchronize game state by sending and receiving messages\n\nWhen a player’s action changes the game state, `SessionController` uses [doc:\/\/com.apple.documentation\/documentation\/GroupActivities\/GroupSessionMessenger] to send an update to the other players. For example, when player X joins the red team, `TeamSelectionView` calls `SessionController.joinTeam`. This sets `SessionController.localPlayer.team`, sending a call to `SessionController.shareLocalPlayerState`.\n\n```swift\n\/\/ SessionController\n\nfunc joinTeam(_ team: PlayerModel.Team?) {\n    localPlayer.team = team\n}\n\n...\n\nvar localPlayer: PlayerModel {\n    get {\n        players[session.localParticipant]!\n    }\n    set {\n        if newValue != players[session.localParticipant] {\n            players[session.localParticipant] = newValue\n            shareLocalPlayerState(newValue)\n        }\n    }\n}\n```\n\n`SessionController.shareLocalPlayerState` uses `GroupSessionMessenger` to send player X’s new state to other players.\n\n```swift\n\/\/ SessionController+RemoteParticipantSynchronization\n\nfunc shareLocalPlayerState(_ newValue: PlayerModel) {\n    Task {\n        do {\n            try await messenger.send(newValue)\n        } catch {\n            \/\/ Failed to send the message.\n        }\n    }\n}\n```\n\nAt the same time, `SessionController.observeRemotePlayerModelUpdates` receives and processes player state updates. Each update modifies `SessionController.players` to reflect the synchronized player state. For example, when player X joins the red team, other players are notified and update their local representation of player X’s state accordingly.\n\n```swift\n\/\/ SessionController\n\n...\n\nprivate func observeRemotePlayerModelUpdates() {\n    Task {\n        for await (player, context) in messenger.messages(of: PlayerModel.self) {\n            players[context.source] = player\n        }\n    }\n}\n```\n\nFor more information, see [doc:\/\/com.apple.GroupActivities\/documentation\/GroupActivities\/synchronizing-data-during-a-shareplay-activity].\n\n### Enable spatial personas in an immersive space\n\nTo display spatial Personas when an immersive space is open, set the [doc:\/\/com.apple.documentation\/documentation\/GroupActivities\/SystemCoordinator\/Configuration-swift.struct\/supportsGroupImmersiveSpace] property on [doc:\/\/com.apple.documentation\/documentation\/GroupActivities\/SystemCoordinator\/Configuration-swift.struct] to `true`:\n\n```swift\n\/\/ SessionController\n\nfunc configureSystemCoordinator() {\n    systemCoordinator.configuration.supportsGroupImmersiveSpace = true\n    \n    ...\n}\n```\n\nIn an immersive space, the system provides a shared coordinate system for participants and content. This allows you to position entities consistently across all participants’ perspectives. For example, an entity positioned 0.5 meters in front of player X appears 0.5 meters in front of player X from player Y’s perspective.\n\nFor more information, see [doc:\/\/com.apple.GroupActivities\/documentation\/GroupActivities\/adding-spatial-persona-support-to-an-activity].\n\n### Specify custom positions for participants\n\nThe game has three distinct stages:\n\n- Category-selection stage, where players choose the words and phrases they want to try to elicit from their teammates.\n- Team-selection stage, where players join one of the teams.\n- Game stage, where the teams take turns playing the game.\n\nEach time the current stage changes, the `SessionController` object updates the position of the participants in the space. When selecting a category, the participants appear side by side in front of the game window. During team selection and gameplay, the game arranges players using custom spatial templates. The game specifies each arrangement of participants by changing the configuration of the [doc:\/\/com.apple.GroupActivities\/documentation\/GroupActivities\/SystemCoordinator] object.\n\n```swift\n\/\/ SessionController\n\nfunc updateSpatialTemplatePreference() {\n    switch game.stage {\n    case .categorySelection:\n        systemCoordinator.configuration.spatialTemplatePreference = .sideBySide\n    case .teamSelection:\n        systemCoordinator.configuration.spatialTemplatePreference = .custom(TeamSelectionTemplate())\n    case .inGame:\n        systemCoordinator.configuration.spatialTemplatePreference = .custom(GameTemplate())\n    }\n}\n```\n\nWhen the game moves to the team-selection stage, the session rearranges the participants according to which team they choose. All participants start in the audience initially facing the app window, which displays buttons to join either the red team or blue team.\n\n\n\nThe `TeamSelectionTemplate` specifies the positions of seats during the team-selection process. Participants don’t have an assigned role initially, so the system places them in the audience seats. As participants join a team, the system moves them to the assigned seating area for their chosen team.\n\nThe spatial template specifies all seat positions up front, including seats for the blue and red teams, and the audience. Seat positions reflect the distance in meters from the app’s main window along the x and z axes. Seat roles reflect the role that a participant must have to occupy that seat. When a participant asks to join a team, the sample app assigns them the corresponding role. If a seat with that role is available, the participant receives the role and their spatial Persona moves to the next available seat.\n\n```swift\nstruct TeamSelectionTemplate: SpatialTemplate {\n    enum Role: String, SpatialTemplateRole {\n        case blueTeam\n        case redTeam\n    }\n    \n    \/\/\/ An array of seating positions the game uses to position spatial Personas during the team-selection stage.\n    \/\/\/\n    \/\/\/ The game fills the seats with participants based on the order of the array's elements.\n    let elements: [any SpatialTemplateElement] = [\n        \/\/ Blue team:\n        .seat(position: .app.offsetBy(x: -2.5, z: 3.5), role: Role.blueTeam),\n        .seat(position: .app.offsetBy(x: -3.0, z: 3.0), role: Role.blueTeam),\n        .seat(position: .app.offsetBy(x: -3.5, z: 2.5), role: Role.blueTeam),\n        \n        \/\/ Starting positions:\n        .seat(position: .app.offsetBy(x: 0, z: 4)),\n        .seat(position: .app.offsetBy(x: 1, z: 4)),\n        .seat(position: .app.offsetBy(x: -1, z: 4)),\n        .seat(position: .app.offsetBy(x: 2, z: 4)),\n        .seat(position: .app.offsetBy(x: -2, z: 4)),\n        \n        \/\/ Red team:\n        .seat(position: .app.offsetBy(x: 2.5, z: 3.5), role: Role.redTeam),\n        .seat(position: .app.offsetBy(x: 3.0, z: 3.0), role: Role.redTeam),\n        .seat(position: .app.offsetBy(x: 3.5, z: 2.5), role: Role.redTeam)\n    ]\n}\n```\n\nDuring gameplay, teams take turns playing the game while the audience watches. Audience members face the main window while the active team sits on either side of that window. The team member giving clues sits on one side of the window, while their teammates sit opposite. The template orients the active team members so that they face each other at the start of the game, with audience members facing the main window.\n\n\n\nThe `GameTemplate` structure defines separate roles for the current player and the active team members. Members of the opposing team don’t receive a role until it’s their turn to play, so they initially sit in the audience positions. Because the active team members face each other, and not the app window, their seat positions include a `direction` parameter to specify where they look initially.\n\n```swift\nstruct GameTemplate: SpatialTemplate {\n    enum Role: String, SpatialTemplateRole {\n        case player\n        case activeTeam\n    }\n    \n    static let playerPosition = Point3D(x: -2, z: 3)\n    \n    \/\/\/ An array that represents the order in which the game adds participants to spatial template positions.\n    var elements: [any SpatialTemplateElement] {\n        let activeTeamCenterPosition = SpatialTemplateElementPosition.app.offsetBy(x: 2, z: 3)\n\n        let playerSeat = SpatialTemplateSeatElement(\n            position: .app.offsetBy(x: Self.playerPosition.x, z: Self.playerPosition.z),\n            direction: .lookingAt(activeTeamCenterPosition),\n            role: Role.player\n        )\n        \n        let activeTeamSeats: [any SpatialTemplateElement] = [\n            .seat(\n                position: activeTeamCenterPosition.offsetBy(x: 0, z: -0.5),\n                direction: .lookingAt(playerSeat),\n                role: Role.activeTeam\n            ),\n            .seat(\n                position: activeTeamCenterPosition.offsetBy(x: 0, z: 0.5),\n                direction: .lookingAt(playerSeat),\n                role: Role.activeTeam\n            )\n        ]\n        \n        let audienceSeats: [any SpatialTemplateElement] = [\n            .seat(position: .app.offsetBy(x: 0, z: 5)),\n            .seat(position: .app.offsetBy(x: 1, z: 5)),\n            .seat(position: .app.offsetBy(x: -1, z: 5)),\n            .seat(position: .app.offsetBy(x: 2, z: 5)),\n            .seat(position: .app.offsetBy(x: -2, z: 5))\n        ]\n        \n        return audienceSeats + [playerSeat] + activeTeamSeats\n    }\n}\n```\n\nFor more information about building custom spatial templates, see [doc:\/\/com.apple.GroupActivities\/documentation\/GroupActivities\/SpatialTemplate].\n\n## Custom spatial templates\n\n- **SpatialTemplate**: An interface you use to create custom arrangements of spatial Personas in a scene.\n- **SpatialTemplatePreference**: A structure that specifies the preferred arrangement of participant spatial Personas in a shared simulation space.\n- **SpatialTemplateSeatElement**: A spatial template element that represents a seat for a participant in the activity.\n- **SpatialTemplateElement**: An interface that defines an element in your spatial template.\n- **SpatialTemplateElementPosition**: A type that defines the position of an element in a spatial template.\n- **SpatialTemplateElementDirection**: The initial direction a participant faces when an activity starts.\n- **SpatialTemplateRole**: An interface for defining roles that you assign to the participants of a group activity.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "An interface you use to create custom arrangements of spatial Personas in a scene.",
          "name" : "SpatialTemplate",
          "url" : "https:\/\/developer.apple.com\/documentation\/GroupActivities\/SpatialTemplate"
        },
        {
          "description" : "A structure that specifies the preferred arrangement of participant spatial Personas in a shared simulation space.",
          "name" : "SpatialTemplatePreference",
          "url" : "https:\/\/developer.apple.com\/documentation\/GroupActivities\/SpatialTemplatePreference"
        },
        {
          "description" : "A spatial template element that represents a seat for a participant in the activity.",
          "name" : "SpatialTemplateSeatElement",
          "url" : "https:\/\/developer.apple.com\/documentation\/GroupActivities\/SpatialTemplateSeatElement"
        },
        {
          "description" : "An interface that defines an element in your spatial template.",
          "name" : "SpatialTemplateElement",
          "url" : "https:\/\/developer.apple.com\/documentation\/GroupActivities\/SpatialTemplateElement"
        },
        {
          "description" : "A type that defines the position of an element in a spatial template.",
          "name" : "SpatialTemplateElementPosition",
          "url" : "https:\/\/developer.apple.com\/documentation\/GroupActivities\/SpatialTemplateElementPosition"
        },
        {
          "description" : "The initial direction a participant faces when an activity starts.",
          "name" : "SpatialTemplateElementDirection",
          "url" : "https:\/\/developer.apple.com\/documentation\/GroupActivities\/SpatialTemplateElementDirection"
        },
        {
          "description" : "An interface for defining roles that you assign to the participants of a group activity.",
          "name" : "SpatialTemplateRole",
          "url" : "https:\/\/developer.apple.com\/documentation\/GroupActivities\/SpatialTemplateRole"
        }
      ],
      "title" : "Custom spatial templates"
    }
  ],
  "source" : "appleJSON",
  "title" : "Building a guessing game for visionOS",
  "url" : "https:\/\/developer.apple.com\/documentation\/GroupActivities\/building-a-guessing-game-for-visionos"
}