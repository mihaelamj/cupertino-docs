{
  "abstract" : "Create shared experiences for people wearing Vision Pro in the same room and those on FaceTime.",
  "codeExamples" : [
    {
      "code" : "func observeParticipants(session: GroupSession<BoardGameActivity>) async {\n    for await activeParticipants in session.$activeParticipants.values {\n        \/\/ The set of nearby participants, excluding the local participant.\n        let nearbyParticipants = activeParticipants.filter {\n            $0.isNearbyWithLocalParticipant && $0.id != session.localParticipant.id\n        }\n    }\n}",
      "language" : "swift"
    },
    {
      "code" : "\/\/ Create a shared world anchor with ARKit.\n\nfunc setUp(session: ARKitSession, provider: WorldTrackingProvider) async throws {\n    try await session.run([provider])\n}\n\nfunc createAnchor(\n    at transform: simd_float4x4, \n    provider: WorldTrackingProvider\n) async throws {\n    \/\/ Create a world anchor with `sharedWithNearbyParticipants` set to `true`.\n    let anchor = WorldAnchor(\n        originFromAnchorTransform: transform,\n        sharedWithNearbyParticipants: true\n    )\n    try await provider.addAnchor(anchor)\n}\n\nfunc observeWorldTracking(provider: WorldTrackingProvider) async {\n    for await update in provider.anchorUpdates {\n        switch update.event {\n            case .added, .updated, .removed:\n            \/\/ Updates with shared anchors from others.\n            let anchorIdentifier = update.anchor.id\n        }\n    }\n}",
      "language" : "swift"
    }
  ],
  "contentHash" : "7b1b5972786080db0ffcf469ef4dc244276e988baa0e136cd928e3593509914a",
  "crawledAt" : "2025-12-05T07:03:55Z",
  "id" : "167FC2EE-F640-4CB7-BFCB-46FF8AA785BE",
  "kind" : "article",
  "language" : "swift",
  "module" : "Group Activities",
  "overview" : "## Overview\n\nSharePlay in visionOS helps people share activities together — for example, viewing a movie, listening to music, playing a game, or sketching ideas on a whiteboard. Starting in visionOS 26, SharePlay supports inviting nearby people who are wearing Apple Vision Pro to join a group activity. The system presents participants differently based on how they join the activity:\n\nBoth nearby participants and spatial Personas can move spatially, make eye contact, and reference virtual content during an activity, enhancing the feeling of being together in the same room. Get your visionOS app ready for sharing with people nearby by reviewing the APIs below that help you create seamless connections among people — whether they’re in the same room or on FaceTime.\n\n### Verify your app’s nearby-sharing behavior\n\nSharePlay doesn’t require apps to distinguish between nearby and FaceTime participants. The `GroupActivities` APIs you use to manage group sessions, exchange messages, and position content treat all participants the same. Your app doesn’t need separate code to support nearby participants, so it typically already works when sharing with people nearby, but confirm the following during testing:\n\n### Distinguish between nearby and FaceTime participants\n\nTo observe when participants join and leave an activity use [doc:\/\/com.apple.GroupActivities\/documentation\/GroupActivities\/GroupSession\/activeParticipants]. To determine if a [doc:\/\/com.apple.GroupActivities\/documentation\/GroupActivities\/Participant] is nearby, use [doc:\/\/com.apple.GroupActivities\/documentation\/GroupActivities\/Participant\/isNearbyWithLocalParticipant]:\n\n### Position content relative to participants\n\nBecause nearby participants can join a group activity, you can no longer assume a spatial participant’s pose (position and orientation) matches their seat’s pose. When SharePlay applies a [doc:\/\/com.apple.GroupActivities\/documentation\/GroupActivities\/SpatialTemplate], it moves FaceTime participants using their spatial Persona to their assigned seats so their pose matches their seat’s pose. SharePlay can’t move a nearby participant, so the participant’s pose can be different from their seat’s pose.\n\n### Synchronize entity transforms across devices\n\nTo achieve consistent positioning of RealityKit entities across multiple devices in an immersive space during a SharePlay session, enable support for a group immersive space using [doc:\/\/com.apple.GroupActivities\/documentation\/GroupActivities\/SystemCoordinator\/Configuration-swift.struct\/supportsGroupImmersiveSpace]. When enabled, visionOS automatically ensures entities with identical transforms appear in the same relative location for all participants, including both nearby and remote participants.\n\nGroup immersive spaces handle this spatial consistency for entities with identical transforms, but keep in mind that SharePlay doesn’t automatically synchronize changes to your app’s state. Your app needs to maintain visual consistency across participants’ devices and you have full control over what actions are synchronized. For example, if your app displays a cube with a position of `[0, 1, 0]` at launch, the shared coordinate system causes everyone to see that cube at the same position. However, if a participant creates a new cube, your app needs to use the [doc:\/\/com.apple.GroupActivities\/documentation\/GroupActivities\/GroupSessionMessenger] to notify the other participants to reflect this change.\n\n### Incorporate the real world in your app’s shared context\n\nWhen you’re sharing with people who are nearby, you may want to anchor shared virtual content to objects in the real world. Unlike remote SharePlay with spatial Personas, when you’re sharing with someone nearby, the real world is part of your shared context. To enable this, ARKit has support for sharing world anchors that appear in the exact same place for all nearby participants.\n\nTo make a [doc:\/\/com.apple.documentation\/documentation\/ARKit\/WorldAnchor] shareable with nearby participants, initialize the anchor with the `isSharedWithNearbyParticipants` property set to `true` with the [doc:\/\/com.apple.documentation\/documentation\/ARKit\/WorldAnchor\/init(originFromAnchorTransform:sharedWithNearbyParticipants:)] initializer. ARKit then shares that anchor with all nearby SharePlay participants via the [doc:\/\/com.apple.documentation\/documentation\/ARKit\/WorldTrackingProvider\/anchorUpdates] async sequence.\n\nYour app can then attach an entity to that anchor to place it in the exact same world location for all nearby participants.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/groupactivities\/configure-your-app-for-sharing-with-people-nearby\ncrawled: 2025-12-05T07:03:55Z\n---\n\n# Configure your visionOS app for sharing with people nearby\n\n**Article**\n\nCreate shared experiences for people wearing Vision Pro in the same room and those on FaceTime.\n\n## Overview\n\nSharePlay in visionOS helps people share activities together — for example, viewing a movie, listening to music, playing a game, or sketching ideas on a whiteboard. Starting in visionOS 26, SharePlay supports inviting nearby people who are wearing Apple Vision Pro to join a group activity. The system presents participants differently based on how they join the activity:\n\n- Nearby participants appear naturally via passthrough.\n- FaceTime participants who are wearing Apple Vision Pro appear as spatial Personas.\n- Participants on other devices appear in a standard FaceTime window.\n\nBoth nearby participants and spatial Personas can move spatially, make eye contact, and reference virtual content during an activity, enhancing the feeling of being together in the same room. Get your visionOS app ready for sharing with people nearby by reviewing the APIs below that help you create seamless connections among people — whether they’re in the same room or on FaceTime.\n\n\n\n### Verify your app’s nearby-sharing behavior\n\nSharePlay doesn’t require apps to distinguish between nearby and FaceTime participants. The `GroupActivities` APIs you use to manage group sessions, exchange messages, and position content treat all participants the same. Your app doesn’t need separate code to support nearby participants, so it typically already works when sharing with people nearby, but confirm the following during testing:\n\n\n\n\n\n### Distinguish between nearby and FaceTime participants\n\nTo observe when participants join and leave an activity use [doc:\/\/com.apple.GroupActivities\/documentation\/GroupActivities\/GroupSession\/activeParticipants]. To determine if a [doc:\/\/com.apple.GroupActivities\/documentation\/GroupActivities\/Participant] is nearby, use [doc:\/\/com.apple.GroupActivities\/documentation\/GroupActivities\/Participant\/isNearbyWithLocalParticipant]:\n\n```swift\nfunc observeParticipants(session: GroupSession<BoardGameActivity>) async {\n    for await activeParticipants in session.$activeParticipants.values {\n        \/\/ The set of nearby participants, excluding the local participant.\n        let nearbyParticipants = activeParticipants.filter {\n            $0.isNearbyWithLocalParticipant && $0.id != session.localParticipant.id\n        }\n    }\n}\n```\n\n### Position content relative to participants\n\nBecause nearby participants can join a group activity, you can no longer assume a spatial participant’s pose (position and orientation) matches their seat’s pose. When SharePlay applies a [doc:\/\/com.apple.GroupActivities\/documentation\/GroupActivities\/SpatialTemplate], it moves FaceTime participants using their spatial Persona to their assigned seats so their pose matches their seat’s pose. SharePlay can’t move a nearby participant, so the participant’s pose can be different from their seat’s pose.\n\n- To observe the state of remote FaceTime and nearby participants use [doc:\/\/com.apple.GroupActivities\/documentation\/GroupActivities\/SystemCoordinator\/remoteParticipantStates].\n- To observe the state of the local participant, who is wearing Vision Pro, use [doc:\/\/com.apple.GroupActivities\/documentation\/GroupActivities\/SystemCoordinator\/localParticipantStates].\n- To position content relative to a participant, position the content relative to [doc:\/\/com.apple.GroupActivities\/documentation\/GroupActivities\/SystemCoordinator\/ParticipantState\/pose].\n- To position content relative to a participant’s seat, position the content relative to [doc:\/\/com.apple.GroupActivities\/documentation\/GroupActivities\/SystemCoordinator\/ParticipantState\/Seat-swift.struct\/pose].\n\n\n\n### Synchronize entity transforms across devices\n\nTo achieve consistent positioning of RealityKit entities across multiple devices in an immersive space during a SharePlay session, enable support for a group immersive space using [doc:\/\/com.apple.GroupActivities\/documentation\/GroupActivities\/SystemCoordinator\/Configuration-swift.struct\/supportsGroupImmersiveSpace]. When enabled, visionOS automatically ensures entities with identical transforms appear in the same relative location for all participants, including both nearby and remote participants.\n\nGroup immersive spaces handle this spatial consistency for entities with identical transforms, but keep in mind that SharePlay doesn’t automatically synchronize changes to your app’s state. Your app needs to maintain visual consistency across participants’ devices and you have full control over what actions are synchronized. For example, if your app displays a cube with a position of `[0, 1, 0]` at launch, the shared coordinate system causes everyone to see that cube at the same position. However, if a participant creates a new cube, your app needs to use the [doc:\/\/com.apple.GroupActivities\/documentation\/GroupActivities\/GroupSessionMessenger] to notify the other participants to reflect this change.\n\n### Incorporate the real world in your app’s shared context\n\nWhen you’re sharing with people who are nearby, you may want to anchor shared virtual content to objects in the real world. Unlike remote SharePlay with spatial Personas, when you’re sharing with someone nearby, the real world is part of your shared context. To enable this, ARKit has support for sharing world anchors that appear in the exact same place for all nearby participants.\n\nTo make a [doc:\/\/com.apple.documentation\/documentation\/ARKit\/WorldAnchor] shareable with nearby participants, initialize the anchor with the `isSharedWithNearbyParticipants` property set to `true` with the [doc:\/\/com.apple.documentation\/documentation\/ARKit\/WorldAnchor\/init(originFromAnchorTransform:sharedWithNearbyParticipants:)] initializer. ARKit then shares that anchor with all nearby SharePlay participants via the [doc:\/\/com.apple.documentation\/documentation\/ARKit\/WorldTrackingProvider\/anchorUpdates] async sequence.\n\nYour app can then attach an entity to that anchor to place it in the exact same world location for all nearby participants.\n\n```swift\n\/\/ Create a shared world anchor with ARKit.\n\nfunc setUp(session: ARKitSession, provider: WorldTrackingProvider) async throws {\n    try await session.run([provider])\n}\n\nfunc createAnchor(\n    at transform: simd_float4x4, \n    provider: WorldTrackingProvider\n) async throws {\n    \/\/ Create a world anchor with `sharedWithNearbyParticipants` set to `true`.\n    let anchor = WorldAnchor(\n        originFromAnchorTransform: transform,\n        sharedWithNearbyParticipants: true\n    )\n    try await provider.addAnchor(anchor)\n}\n\nfunc observeWorldTracking(provider: WorldTrackingProvider) async {\n    for await update in provider.anchorUpdates {\n        switch update.event {\n            case .added, .updated, .removed:\n            \/\/ Updates with shared anchors from others.\n            let anchorIdentifier = update.anchor.id\n        }\n    }\n}\n```\n\n\n\n## Spatial activities\n\n- **Adding spatial Persona support to an activity**: Update your SharePlay activities to support spatial Personas and the shared context when running in visionOS.\n- **SystemCoordinator**: A type you use to coordinate your interface’s behavior when an active SharePlay session supports spatial placement of content.\n- **SystemCoordinator.ParticipantState**: A structure that tells you whether a participant supports a shared simulation space for the current activity.\n- **groupActivityAssociation(_:)**: Specifies how a view should be associated with the current SharePlay group activity.\n- **GroupActivityAssociationInteraction**: An interaction configures a view’s association with the current SharePlay group activity.\n- **GroupActivityAssociationKind**: An association a user-interface element can have with a SharePlay group activity.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Update your SharePlay activities to support spatial Personas and the shared context when running in visionOS.",
          "name" : "Adding spatial Persona support to an activity",
          "url" : "https:\/\/developer.apple.com\/documentation\/GroupActivities\/adding-spatial-persona-support-to-an-activity"
        },
        {
          "description" : "A type you use to coordinate your interface’s behavior when an active SharePlay session supports spatial placement of content.",
          "name" : "SystemCoordinator",
          "url" : "https:\/\/developer.apple.com\/documentation\/GroupActivities\/SystemCoordinator"
        },
        {
          "description" : "A structure that tells you whether a participant supports a shared simulation space for the current activity.",
          "name" : "SystemCoordinator.ParticipantState",
          "url" : "https:\/\/developer.apple.com\/documentation\/GroupActivities\/SystemCoordinator\/ParticipantState"
        },
        {
          "description" : "Specifies how a view should be associated with the current SharePlay group activity.",
          "name" : "groupActivityAssociation(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/SwiftUI\/View\/groupActivityAssociation(_:)"
        },
        {
          "description" : "An interaction configures a view’s association with the current SharePlay group activity.",
          "name" : "GroupActivityAssociationInteraction",
          "url" : "https:\/\/developer.apple.com\/documentation\/GroupActivities\/GroupActivityAssociationInteraction"
        },
        {
          "description" : "An association a user-interface element can have with a SharePlay group activity.",
          "name" : "GroupActivityAssociationKind",
          "url" : "https:\/\/developer.apple.com\/documentation\/GroupActivities\/GroupActivityAssociationKind"
        }
      ],
      "title" : "Spatial activities"
    }
  ],
  "source" : "appleJSON",
  "title" : "Configure your visionOS app for sharing with people nearby",
  "url" : "https:\/\/developer.apple.com\/documentation\/groupactivities\/configure-your-app-for-sharing-with-people-nearby"
}