{
  "abstract" : "Add a search interface to your app to execute Spotlight queries and offer suggested text completions.",
  "codeExamples" : [
    {
      "code" : "let queryContext = CSUserQueryContext()\nqueryContext.fetchAttributes = [\"title\", \"textContent\", \"authorNames\", \"contentDescription\"]\nqueryContext.maxSuggestionCount = 10\nqueryContext.enableRankedResults = true\n\nlet query = CSUserQuery(userQueryString: searchText, userQueryContext: queryContext)",
      "language" : "swift"
    },
    {
      "code" : "Task {\n    do {\n        \/\/ Start the query and get the results.\n        for try await element in query.responses {\n            switch(element) {\n                case .item(let item):\n                    \/\/ Add the item to the list of search results to display.\n                    break\n                case .suggestion(let suggestion):\n                    \/\/ Pass suggestions back to the search interface to display.\n                    break\n                @unknown default:\n                    break\n            }\n        }\n    } catch {\n        \/\/ Handle any errors.\n    }\n}",
      "language" : "swift"
    },
    {
      "code" : "List {\n    \/\/ Your view’s content.\n}\n.searchable(text: $searchText)\n.searchSuggestions({\n    ForEach($suggestions, id: \\.self) { item in\n        let title = String(item.suggestion.localizedAttributedSuggestion.characters)\n        Text(title)\n            .searchCompletion(title)\n    }\n})",
      "language" : "swift"
    }
  ],
  "contentHash" : "21309cf00d6af8556f67618eb6e7a1040735e2661cdaab362465440248db9533",
  "crawledAt" : "2025-12-02T17:02:38Z",
  "id" : "5005F31C-CCBB-4DA6-B339-36BDA558C889",
  "kind" : "article",
  "language" : "swift",
  "module" : "Core Spotlight",
  "overview" : "## Overview\n\nAdding search tools to your app gives people a way to find content more easily. Whether you add search controls to an app window or to one of the views in your interface, use Spotlight to generate the search results for your content. Spotlight searches the content you already indexed, and provides relevant text completions and results for you to display. In iOS 18 and macOS 15 and later, Spotlight also supports semantic searches of your content, in addition to lexical matching of a search term.\n\nTo take full advantage of search in your interface, make sure you index your app’s content and provide it to Spotlight. As your app generates or changes its content, send the details of those changes to Spotlight so it can update its indexes. It’s also important to provide an app extension that Spotlight can call to regenerate those details on demand. For more information about providing Spotlight with your app’s data, see [doc:\/\/com.apple.corespotlight\/documentation\/CoreSpotlight\/adding-your-app-s-content-to-spotlight-indexes].\n\n### Add a search field to your interface\n\nApple’s UI frameworks provide search controls you can add to your interface, and support to provide a consistent search experience. Incorporate these controls into your views and use the built-in support to initiate searches and display the results.\n\nThe built-in search controls provide features that people expect when searching for content, such as text completions and text tokens. You can also apply filters to limit the scope of the search to a particular part of your app. Core Spotlight helps you implement these features by providing the data you need for your app’s interface in a compatible format.\n\n### Prepare the search system\n\nTo ensure initial searches happen quickly, call the [doc:\/\/com.apple.corespotlight\/documentation\/CoreSpotlight\/CSUserQuery\/prepare()] class method. Call this method before you need to perform queries, such as when the view that presents your search interface first appears. You don’t need to call the method more than once when your app is running, and you don’t need to execute the query itself. The method prepares Core Spotlight resources, which can take a noticeable amount of time. It also increases your app’s memory footprint, so call it as late as possible to minimize the performance impact.\n\n### Execute a query and receive the responses\n\nWhen someone types a value into your app’s search control, don’t execute the query immediately. Instead, give the person a small amount of time to type more text into the search field. For example, wait 0.3 seconds after each new keystroke before starting a query with the current text. If a new keystroke arrives before the time elapses, reset the waiting period. Starting the query on a delay keeps your app responsive to keystrokes, and doesn’t waste time executing searches and throwing away the results.\n\nTo configure a query with text from a search control, use a [doc:\/\/com.apple.corespotlight\/documentation\/CoreSpotlight\/CSUserQuery] object. User queries are for situations where your app takes input directly from a person. Pass the search text directly to the query object, along with a [doc:\/\/com.apple.corespotlight\/documentation\/CoreSpotlight\/CSUserQueryContext] object with any additional query parameters. The following example configures a context object with the attributes to fetch for search results and configures some additional search parameters. The `searchText` variable contains the string from the search control.\n\nTo execute the query in Swift and get the results, fetch the [doc:\/\/com.apple.corespotlight\/documentation\/CoreSpotlight\/CSUserQuery\/responses-swift.property] property of the query object. This property contains an [doc:\/\/com.apple.documentation\/documentation\/Swift\/AsyncSequence] that delivers values to your app as they become available. Fetching this sequence starts the query and begins delivering both results and suggestions asynchronously to your code. For each response, determine whether it is a search result or a suggested text completion and update your interface appropriately. The following example shows a template to use to process responses from the query:\n\nIf you’re not using Swift or prefer to use process results and suggestions separately, configure the appropriate handlers for your query object and call the [doc:\/\/com.apple.corespotlight\/documentation\/CoreSpotlight\/CSUserQuery\/start()] method. As Spotlight generates results, it delivers them to the handlers in the [doc:\/\/com.apple.corespotlight\/documentation\/CoreSpotlight\/CSSearchQuery\/foundItemsHandler] and [doc:\/\/com.apple.corespotlight\/documentation\/CoreSpotlight\/CSUserQuery\/foundSuggestionsHandler] properties of the query object. Use those handlers to process results and suggestions and display them in your interface. You can also add a completion handler to the query to determine when Spotlight finishes delivering results.\n\nWhen someone interacts with your search control, you typically create multiple query objects to generate results. Query objects run only once, and you don’t reuse them by changing the query string. When the person types more text into your search control, cancel the previous query and create a new one for the new string.\n\nFor more information about how to configure query parameters, see [doc:\/\/com.apple.corespotlight\/documentation\/CoreSpotlight\/CSUserQueryContext].\n\n### Display completions for typed text\n\nSuggestions make it easier for someone to discover relevant search terms from your search interface. The [doc:\/\/com.apple.corespotlight\/documentation\/CoreSpotlight\/CSUserQuery] object you use to fetch results also generates suggestions that you can use to populate your search interface. You can display these suggestions any time someone interacts with your search control. When you execute a query, Spotlight offers a set of ranked suggestions based on the query text and your app’s content.\n\nTo display suggested text completions from a SwiftUI, add a [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/View\/searchSuggestions(_:)] modifier to your view. The modifier takes a closure, which you use to build views for the suggestions. When collecting responses using the [doc:\/\/com.apple.corespotlight\/documentation\/CoreSpotlight\/CSUserQuery\/responses-swift.property] asynchronous sequence, save the [doc:\/\/com.apple.corespotlight\/documentation\/CoreSpotlight\/CSUserQuery\/Suggestion] structures you receive and use them to create your views. Each structure contains a [doc:\/\/com.apple.corespotlight\/documentation\/CoreSpotlight\/CSSuggestion] object with the details of the suggestion. The following example iterates over the list of structures and builds a set of text views from the provided suggestions.\n\nTo display suggestions from a [doc:\/\/com.apple.documentation\/documentation\/UIKit\/UISearchController] in your UIKit app, create [doc:\/\/com.apple.documentation\/documentation\/UIKit\/UISearchSuggestionItem] objects for each suggestion you receive from your query. When you add those suggestion items to the [doc:\/\/com.apple.documentation\/documentation\/UIKit\/UISearchController\/searchSuggestions] property of the search controller, it automatically displays them from its interface. Each time you execute a new query, clear the old search suggestions from this property and add the new ones.\n\nFor more information on adding search suggestions to your SwiftUI views, see [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/Suggesting-search-terms].",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/CoreSpotlight\/building-a-search-interface-for-your-app\ncrawled: 2025-12-02T17:02:38Z\n---\n\n# Building a search interface for your app\n\n**Article**\n\nAdd a search interface to your app to execute Spotlight queries and offer suggested text completions.\n\n## Overview\n\nAdding search tools to your app gives people a way to find content more easily. Whether you add search controls to an app window or to one of the views in your interface, use Spotlight to generate the search results for your content. Spotlight searches the content you already indexed, and provides relevant text completions and results for you to display. In iOS 18 and macOS 15 and later, Spotlight also supports semantic searches of your content, in addition to lexical matching of a search term.\n\nTo take full advantage of search in your interface, make sure you index your app’s content and provide it to Spotlight. As your app generates or changes its content, send the details of those changes to Spotlight so it can update its indexes. It’s also important to provide an app extension that Spotlight can call to regenerate those details on demand. For more information about providing Spotlight with your app’s data, see [doc:\/\/com.apple.corespotlight\/documentation\/CoreSpotlight\/adding-your-app-s-content-to-spotlight-indexes].\n\n### Add a search field to your interface\n\nApple’s UI frameworks provide search controls you can add to your interface, and support to provide a consistent search experience. Incorporate these controls into your views and use the built-in support to initiate searches and display the results.\n\n- In SwiftUI, add a `searchable` modifier to a view in your interface. This modifier creates an implicit search field in your interface and binds it to the string you use to initiate queries. For more information, see [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/Adding-a-search-interface-to-your-app].\n- In UIKit, add a [doc:\/\/com.apple.documentation\/documentation\/UIKit\/UISearchBar] control to your interface, and display results using an associated [doc:\/\/com.apple.documentation\/documentation\/UIKit\/UISearchController].\n- In AppKit, [doc:\/\/com.apple.documentation\/documentation\/AppKit\/NSSearchField] provides a text field with search-related behaviors.\n\nThe built-in search controls provide features that people expect when searching for content, such as text completions and text tokens. You can also apply filters to limit the scope of the search to a particular part of your app. Core Spotlight helps you implement these features by providing the data you need for your app’s interface in a compatible format.\n\n### Prepare the search system\n\nTo ensure initial searches happen quickly, call the [doc:\/\/com.apple.corespotlight\/documentation\/CoreSpotlight\/CSUserQuery\/prepare()] class method. Call this method before you need to perform queries, such as when the view that presents your search interface first appears. You don’t need to call the method more than once when your app is running, and you don’t need to execute the query itself. The method prepares Core Spotlight resources, which can take a noticeable amount of time. It also increases your app’s memory footprint, so call it as late as possible to minimize the performance impact.\n\n### Execute a query and receive the responses\n\nWhen someone types a value into your app’s search control, don’t execute the query immediately. Instead, give the person a small amount of time to type more text into the search field. For example, wait 0.3 seconds after each new keystroke before starting a query with the current text. If a new keystroke arrives before the time elapses, reset the waiting period. Starting the query on a delay keeps your app responsive to keystrokes, and doesn’t waste time executing searches and throwing away the results.\n\nTo configure a query with text from a search control, use a [doc:\/\/com.apple.corespotlight\/documentation\/CoreSpotlight\/CSUserQuery] object. User queries are for situations where your app takes input directly from a person. Pass the search text directly to the query object, along with a [doc:\/\/com.apple.corespotlight\/documentation\/CoreSpotlight\/CSUserQueryContext] object with any additional query parameters. The following example configures a context object with the attributes to fetch for search results and configures some additional search parameters. The `searchText` variable contains the string from the search control.\n\n```swift\nlet queryContext = CSUserQueryContext()\nqueryContext.fetchAttributes = [\"title\", \"textContent\", \"authorNames\", \"contentDescription\"]\nqueryContext.maxSuggestionCount = 10\nqueryContext.enableRankedResults = true\n\nlet query = CSUserQuery(userQueryString: searchText, userQueryContext: queryContext)\n```\n\nTo execute the query in Swift and get the results, fetch the [doc:\/\/com.apple.corespotlight\/documentation\/CoreSpotlight\/CSUserQuery\/responses-swift.property] property of the query object. This property contains an [doc:\/\/com.apple.documentation\/documentation\/Swift\/AsyncSequence] that delivers values to your app as they become available. Fetching this sequence starts the query and begins delivering both results and suggestions asynchronously to your code. For each response, determine whether it is a search result or a suggested text completion and update your interface appropriately. The following example shows a template to use to process responses from the query:\n\n```swift\nTask {\n    do {\n        \/\/ Start the query and get the results.\n        for try await element in query.responses {\n            switch(element) {\n                case .item(let item):\n                    \/\/ Add the item to the list of search results to display.\n                    break\n                case .suggestion(let suggestion):\n                    \/\/ Pass suggestions back to the search interface to display.\n                    break\n                @unknown default:\n                    break\n            }\n        }\n    } catch {\n        \/\/ Handle any errors.\n    }\n}\n```\n\nIf you’re not using Swift or prefer to use process results and suggestions separately, configure the appropriate handlers for your query object and call the [doc:\/\/com.apple.corespotlight\/documentation\/CoreSpotlight\/CSUserQuery\/start()] method. As Spotlight generates results, it delivers them to the handlers in the [doc:\/\/com.apple.corespotlight\/documentation\/CoreSpotlight\/CSSearchQuery\/foundItemsHandler] and [doc:\/\/com.apple.corespotlight\/documentation\/CoreSpotlight\/CSUserQuery\/foundSuggestionsHandler] properties of the query object. Use those handlers to process results and suggestions and display them in your interface. You can also add a completion handler to the query to determine when Spotlight finishes delivering results.\n\nWhen someone interacts with your search control, you typically create multiple query objects to generate results. Query objects run only once, and you don’t reuse them by changing the query string. When the person types more text into your search control, cancel the previous query and create a new one for the new string.\n\nFor more information about how to configure query parameters, see [doc:\/\/com.apple.corespotlight\/documentation\/CoreSpotlight\/CSUserQueryContext].\n\n### Display completions for typed text\n\nSuggestions make it easier for someone to discover relevant search terms from your search interface. The [doc:\/\/com.apple.corespotlight\/documentation\/CoreSpotlight\/CSUserQuery] object you use to fetch results also generates suggestions that you can use to populate your search interface. You can display these suggestions any time someone interacts with your search control. When you execute a query, Spotlight offers a set of ranked suggestions based on the query text and your app’s content.\n\nTo display suggested text completions from a SwiftUI, add a [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/View\/searchSuggestions(_:)] modifier to your view. The modifier takes a closure, which you use to build views for the suggestions. When collecting responses using the [doc:\/\/com.apple.corespotlight\/documentation\/CoreSpotlight\/CSUserQuery\/responses-swift.property] asynchronous sequence, save the [doc:\/\/com.apple.corespotlight\/documentation\/CoreSpotlight\/CSUserQuery\/Suggestion] structures you receive and use them to create your views. Each structure contains a [doc:\/\/com.apple.corespotlight\/documentation\/CoreSpotlight\/CSSuggestion] object with the details of the suggestion. The following example iterates over the list of structures and builds a set of text views from the provided suggestions.\n\n```swift\nList {\n    \/\/ Your view’s content.\n}\n.searchable(text: $searchText)\n.searchSuggestions({\n    ForEach($suggestions, id: \\.self) { item in\n        let title = String(item.suggestion.localizedAttributedSuggestion.characters)\n        Text(title)\n            .searchCompletion(title)\n    }\n})\n```\n\n\n\nTo display suggestions from a [doc:\/\/com.apple.documentation\/documentation\/UIKit\/UISearchController] in your UIKit app, create [doc:\/\/com.apple.documentation\/documentation\/UIKit\/UISearchSuggestionItem] objects for each suggestion you receive from your query. When you add those suggestion items to the [doc:\/\/com.apple.documentation\/documentation\/UIKit\/UISearchController\/searchSuggestions] property of the search controller, it automatically displays them from its interface. Each time you execute a new query, clear the old search suggestions from this property and add the new ones.\n\nFor more information on adding search suggestions to your SwiftUI views, see [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/Suggesting-search-terms].\n\n## Queries\n\n- **Searching for information in your app**: Search for app-specific content and refine search results using predicates and filters.\n- **CSUserQuery**: A type you use to initiate searches from your interface and offer suggested text completions.\n- **CSUserQueryContext**: The configuration details to apply to a user query.\n- **CSSearchQuery**: A type you use to programmatically search the indexed app content.\n- **CSSearchQueryContext**: The behavior configuration to use for a search query.\n- **CSSuggestion**: The kind of suggestion to use in a query.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Search for app-specific content and refine search results using predicates and filters.",
          "name" : "Searching for information in your app",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreSpotlight\/searching-for-information-in-your-app"
        },
        {
          "description" : "A type you use to initiate searches from your interface and offer suggested text completions.",
          "name" : "CSUserQuery",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreSpotlight\/CSUserQuery"
        },
        {
          "description" : "The configuration details to apply to a user query.",
          "name" : "CSUserQueryContext",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreSpotlight\/CSUserQueryContext"
        },
        {
          "description" : "A type you use to programmatically search the indexed app content.",
          "name" : "CSSearchQuery",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreSpotlight\/CSSearchQuery"
        },
        {
          "description" : "The behavior configuration to use for a search query.",
          "name" : "CSSearchQueryContext",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreSpotlight\/CSSearchQueryContext"
        },
        {
          "description" : "The kind of suggestion to use in a query.",
          "name" : "CSSuggestion",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreSpotlight\/CSSuggestion"
        }
      ],
      "title" : "Queries"
    }
  ],
  "source" : "appleJSON",
  "title" : "Building a search interface for your app",
  "url" : "https:\/\/developer.apple.com\/documentation\/CoreSpotlight\/building-a-search-interface-for-your-app"
}