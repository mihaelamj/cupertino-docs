{
  "abstract" : "Create an app extension to maintain your app’s indexes and regenerate them as needed.",
  "codeExamples" : [
    {
      "code" : "import CoreSpotlight\n\nclass MyIndexingExtension: CSIndexExtensionRequestHandler {\n\n    override func searchableIndex(_ searchableIndex: CSSearchableIndex, \n                  reindexAllSearchableItemsWithAcknowledgementHandler acknowledgementHandler: @escaping () -> Void) {\n        \/\/ Index everything.\n        acknowledgementHandler()\n    }\n\n    override func searchableIndex(_ searchableIndex: CSSearchableIndex, \n                  reindexSearchableItemsWithIdentifiers identifiers: [String], \n                  acknowledgementHandler: @escaping () -> Void) {\n        \/\/ Index the specified items.\n        acknowledgementHandler()\n    }\n\n    \/\/ Other methods.\n}",
      "language" : "swift"
    },
    {
      "code" : "mdutil -cr com.example.MyApp.MyIndexingExtension"
    }
  ],
  "contentHash" : "f675c630b029bba9781c61a95672e470c2986cb6bc236a8ec36421c416b2d11b",
  "crawledAt" : "2025-12-03T04:39:48Z",
  "id" : "5D36D7D1-4E00-4964-BC92-5D70C5025050",
  "kind" : "article",
  "language" : "swift",
  "module" : "Core Spotlight",
  "overview" : "## Overview\n\nKeeping your app’s indexes up to date requires periodic maintenance. An app that crashes while updating its index might leave that index in an incorrect state. The system can also ask your app to regenerate the index if it’s missing or needs updated data. If your app isn’t running when the system needs these updates, it uses your reindexing app extension to generate them instead.\n\nA reindexing app extension is an important tool for keeping your indexes up to date at all times. Include this app extension in your app bundle, and make sure it has access to all of your app’s indexable data.\n\n### Add a reindexing app extension to your app\n\nXcode provides a template to make it easy to add a reindexing app extension to your app. Add this template to your project using the following steps:\n\nThe CoreSpotlight Delegate template contains empty implementations for the key functions of the [doc:\/\/com.apple.corespotlight\/documentation\/CoreSpotlight\/CSSearchableIndexDelegate] protocol, including the methods you use to update the index. Add your custom code to these methods, and make sure to call the acknowledgement handlers for your main indexing functions, as shown:\n\nFor information about how to add content to your app’s indexes, see [doc:\/\/com.apple.corespotlight\/documentation\/CoreSpotlight\/adding-your-app-s-content-to-spotlight-indexes].\n\n### Debug your app extension code\n\nVerify your app extension behaves as expected using the Xcode debugger. Start by building your app extension and attaching the debugger to it.\n\nBecause you can’t predict when the system will run your app extension, you need to force the system to run it immediately using the `mdutil` command-line tool. Open Terminal and run that command with the `-cr` option, followed by the bundle identifier of your app extension. Here’s an example of this command:\n\nThe `mdutil` tool starts the reindexing process for the app extension you specify. If you set any breakpoints in your app extension’s code, the attached debugger stops at them and gives you a chance to examine the state of your extension.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/CoreSpotlight\/regenerating-your-app-s-indexes-on-demand\ncrawled: 2025-12-03T04:39:48Z\n---\n\n# Regenerating your app’s indexes on demand\n\n**Article**\n\nCreate an app extension to maintain your app’s indexes and regenerate them as needed.\n\n## Overview\n\nKeeping your app’s indexes up to date requires periodic maintenance. An app that crashes while updating its index might leave that index in an incorrect state. The system can also ask your app to regenerate the index if it’s missing or needs updated data. If your app isn’t running when the system needs these updates, it uses your reindexing app extension to generate them instead.\n\nA reindexing app extension is an important tool for keeping your indexes up to date at all times. Include this app extension in your app bundle, and make sure it has access to all of your app’s indexable data.\n\n### Add a reindexing app extension to your app\n\nXcode provides a template to make it easy to add a reindexing app extension to your app. Add this template to your project using the following steps:\n\n1. Open the Xcode project with your app.\n2. Select File > New > Target.\n3. Select the platform for your app.\n4. In the Application Extension section, select the CoreSpotlight Delegate template.\n5. Click Next.\n6. Give your app extension a name and configure the other options.\n7. Click Finish.\n\nThe CoreSpotlight Delegate template contains empty implementations for the key functions of the [doc:\/\/com.apple.corespotlight\/documentation\/CoreSpotlight\/CSSearchableIndexDelegate] protocol, including the methods you use to update the index. Add your custom code to these methods, and make sure to call the acknowledgement handlers for your main indexing functions, as shown:\n\n```swift\nimport CoreSpotlight\n\nclass MyIndexingExtension: CSIndexExtensionRequestHandler {\n\n    override func searchableIndex(_ searchableIndex: CSSearchableIndex, \n                  reindexAllSearchableItemsWithAcknowledgementHandler acknowledgementHandler: @escaping () -> Void) {\n        \/\/ Index everything.\n        acknowledgementHandler()\n    }\n\n    override func searchableIndex(_ searchableIndex: CSSearchableIndex, \n                  reindexSearchableItemsWithIdentifiers identifiers: [String], \n                  acknowledgementHandler: @escaping () -> Void) {\n        \/\/ Index the specified items.\n        acknowledgementHandler()\n    }\n\n    \/\/ Other methods.\n}\n```\n\nFor information about how to add content to your app’s indexes, see [doc:\/\/com.apple.corespotlight\/documentation\/CoreSpotlight\/adding-your-app-s-content-to-spotlight-indexes].\n\n### Debug your app extension code\n\nVerify your app extension behaves as expected using the Xcode debugger. Start by building your app extension and attaching the debugger to it.\n\n1. Select your app target\n2. Build and run your app.\n3. Back in Xcode, select your app extension target.\n4. Select Debug > Attach to Process by PID or Name.\n5. Set the name of the process to the bundle ID of your app extension.\n6. Click the Attach button.\n\nBecause you can’t predict when the system will run your app extension, you need to force the system to run it immediately using the `mdutil` command-line tool. Open Terminal and run that command with the `-cr` option, followed by the bundle identifier of your app extension. Here’s an example of this command:\n\n```\nmdutil -cr com.example.MyApp.MyIndexingExtension\n```\n\nThe `mdutil` tool starts the reindexing process for the app extension you specify. If you set any breakpoints in your app extension’s code, the attached debugger stops at them and gives you a chance to examine the state of your extension.\n\n## Spotlight app extensions\n\n- **CSIndexExtensionRequestHandler**: An interface that implements an index-maintenance app extension.\n- **CSImportExtension**: An object that provides searchable attributes for file types that the app supports.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "An interface that implements an index-maintenance app extension.",
          "name" : "CSIndexExtensionRequestHandler",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreSpotlight\/CSIndexExtensionRequestHandler"
        },
        {
          "description" : "An object that provides searchable attributes for file types that the app supports.",
          "name" : "CSImportExtension",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreSpotlight\/CSImportExtension"
        }
      ],
      "title" : "Spotlight app extensions"
    }
  ],
  "source" : "appleJSON",
  "title" : "Regenerating your app’s indexes on demand",
  "url" : "https:\/\/developer.apple.com\/documentation\/CoreSpotlight\/regenerating-your-app-s-indexes-on-demand"
}