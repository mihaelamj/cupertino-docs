{
  "abstract" : "A type you use to initiate searches from your interface and offer suggested text completions.",
  "codeExamples" : [

  ],
  "conformsTo" : [
    "CVarArg",
    "CustomDebugStringConvertible",
    "CustomStringConvertible",
    "Equatable",
    "Hashable",
    "NSObjectProtocol"
  ],
  "contentHash" : "00c6eb34f090e4e986e2fe81816d1529544425cd6ac7e5587114e40cc5664db9",
  "crawledAt" : "2025-12-07T15:05:53Z",
  "declaration" : {
    "code" : "class CSUserQuery",
    "language" : "swift"
  },
  "id" : "3C57D1F2-0E2C-4A25-86D5-B0CF47E32EB6",
  "kind" : "class",
  "language" : "swift",
  "module" : "Core Spotlight",
  "overview" : "## Overview\n\nA `CSUserQuery` object provides the back-end support for your app’s search features. Combine this object with your app’s search interface to perform lexical and semantic searches of human-entered search terms. You can configure a query object to return ranked or unranked results. You can also use it to get a list of suggestions to display from your search interface.\n\nWhen the text in your search control changes, create a query object to begin searching for results based on the current text. You use a query object only once to perform a search. If the text changes again while a previous query is in progress, cancel the old query and execute the new one. For this reason, it’s a good idea to delay the start of each query until there is a sufficient gap between changes.\n\nConfigure the query parameters using a [doc:\/\/com.apple.corespotlight\/documentation\/CoreSpotlight\/CSUserQueryContext] object, which you can reuse for multiple queries. The context lets you configure the behavior for ranking results, specify the maximum number of results and suggestions, and filter the results using a predicate string. When you’re ready to start the query, choose one of the following options:\n\nEach query runs until Spotlight returns the requested maximum number of results. If you don’t specify the maximum number of results, Spotlight runs until it returns all results. To end a search before you receive all the results, call the [doc:\/\/com.apple.corespotlight\/documentation\/CoreSpotlight\/CSUserQuery\/cancel()] method. Cancelling a query is especially important if you’re about to start a new query with an updated search string.\n\nFor more information about configuring a `CSUserQuery` object, see [doc:\/\/com.apple.corespotlight\/documentation\/CoreSpotlight\/building-a-search-interface-for-your-app].",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "visionOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/corespotlight\/csuserquery\ncrawled: 2025-12-07T15:05:53Z\n---\n\n# CSUserQuery\n\n**Class**\n\nA type you use to initiate searches from your interface and offer suggested text completions.\n\n## Declaration\n\n```swift\nclass CSUserQuery\n```\n\n## Overview\n\nA `CSUserQuery` object provides the back-end support for your app’s search features. Combine this object with your app’s search interface to perform lexical and semantic searches of human-entered search terms. You can configure a query object to return ranked or unranked results. You can also use it to get a list of suggestions to display from your search interface.\n\nWhen the text in your search control changes, create a query object to begin searching for results based on the current text. You use a query object only once to perform a search. If the text changes again while a previous query is in progress, cancel the old query and execute the new one. For this reason, it’s a good idea to delay the start of each query until there is a sufficient gap between changes.\n\nConfigure the query parameters using a [doc:\/\/com.apple.corespotlight\/documentation\/CoreSpotlight\/CSUserQueryContext] object, which you can reuse for multiple queries. The context lets you configure the behavior for ranking results, specify the maximum number of results and suggestions, and filter the results using a predicate string. When you’re ready to start the query, choose one of the following options:\n\n- Get the value of the [doc:\/\/com.apple.corespotlight\/documentation\/CoreSpotlight\/CSUserQuery\/responses-swift.property] property and iterate over the results.\n- Configure the [doc:\/\/com.apple.corespotlight\/documentation\/CoreSpotlight\/CSSearchQuery\/foundItemsHandler] property and call [doc:\/\/com.apple.corespotlight\/documentation\/CoreSpotlight\/CSUserQuery\/start()] to execute the query manually.\n\nEach query runs until Spotlight returns the requested maximum number of results. If you don’t specify the maximum number of results, Spotlight runs until it returns all results. To end a search before you receive all the results, call the [doc:\/\/com.apple.corespotlight\/documentation\/CoreSpotlight\/CSUserQuery\/cancel()] method. Cancelling a query is especially important if you’re about to start a new query with an updated search string.\n\nFor more information about configuring a `CSUserQuery` object, see [doc:\/\/com.apple.corespotlight\/documentation\/CoreSpotlight\/building-a-search-interface-for-your-app].\n\n## Creating a user query\n\n- **init(userQueryString:userQueryContext:)**: Creates a new user query that searches for the specified term.\n\n## Preparing to search\n\n- **prepare()**: Performs one-time tasks that prepare Spotlight to search for content in all search indexes.\n- **prepareProtectionClasses(_:)**: Performs one-time tasks that prepare Spotlight to search for content in one or more protected search indexes.\n\n## Executing the query automatically\n\n- **responses**: The matching results and suggestions for the current query string.\n- **suggestions**: An asynchronous sequence of suggested completions for the current query text.\n- **CSUserQuery.Responses**: An asynchronous sequence that contains the results and suggestions for a query string.\n- **CSUserQuery.Suggestions**: An asynchronous sequence that contains the suggested completions for a search string.\n- **CSUserQuery.Item**: A search result that the query returns in a response.\n- **CSUserQuery.Suggestion**: A suggested text completion for a query’s search term.\n\n## Executing the query with handler blocks\n\n- **start()**: Starts searching the index for items that match the current query string and parameters.\n- **cancel()**: Cancels the current query operation.\n- **foundSuggestionsHandler**: The block to execute when the query delivers a new batch of suggested items.\n- **foundSuggestionCount**: The number of suggested items the query found so far.\n\n## Improving the quality of ranked results\n\n- **userEngaged(_:visibleItems:interaction:)**: Notifies the system that someone engaged with a specific search result in your app’s interface.\n- **userEngaged(_:visibleSuggestions:interaction:)**: Notifies the system that someone engaged with a specific text completion in your app’s interface.\n- **CSUserQuery.UserInteractionKind**: Constants that indicate how someone engaged with search-related content.\n\n## Queries\n\n- **Building a search interface for your app**: Add a search interface to your app to execute Spotlight queries and offer suggested text completions.\n- **Searching for information in your app**: Search for app-specific content and refine search results using predicates and filters.\n- **CSUserQueryContext**: The configuration details to apply to a user query.\n- **CSSearchQuery**: A type you use to programmatically search the indexed app content.\n- **CSSearchQueryContext**: The behavior configuration to use for a search query.\n- **CSSuggestion**: The kind of suggestion to use in a query.\n\n## Inherits From\n\n- CSSearchQuery\n\n## Conforms To\n\n- CVarArg\n- CustomDebugStringConvertible\n- CustomStringConvertible\n- Equatable\n- Hashable\n- NSObjectProtocol\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Creates a new user query that searches for the specified term.",
          "name" : "init(userQueryString:userQueryContext:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreSpotlight\/CSUserQuery\/init(userQueryString:userQueryContext:)"
        }
      ],
      "title" : "Creating a user query"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Performs one-time tasks that prepare Spotlight to search for content in all search indexes.",
          "name" : "prepare()",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreSpotlight\/CSUserQuery\/prepare()"
        },
        {
          "description" : "Performs one-time tasks that prepare Spotlight to search for content in one or more protected search indexes.",
          "name" : "prepareProtectionClasses(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreSpotlight\/CSUserQuery\/prepareProtectionClasses(_:)"
        }
      ],
      "title" : "Preparing to search"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "The matching results and suggestions for the current query string.",
          "name" : "responses",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreSpotlight\/CSUserQuery\/responses-swift.property"
        },
        {
          "description" : "An asynchronous sequence of suggested completions for the current query text.",
          "name" : "suggestions",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreSpotlight\/CSUserQuery\/suggestions-swift.property"
        },
        {
          "description" : "An asynchronous sequence that contains the results and suggestions for a query string.",
          "name" : "CSUserQuery.Responses",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreSpotlight\/CSUserQuery\/Responses-swift.struct"
        },
        {
          "description" : "An asynchronous sequence that contains the suggested completions for a search string.",
          "name" : "CSUserQuery.Suggestions",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreSpotlight\/CSUserQuery\/Suggestions-swift.struct"
        },
        {
          "description" : "A search result that the query returns in a response.",
          "name" : "CSUserQuery.Item",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreSpotlight\/CSUserQuery\/Item"
        },
        {
          "description" : "A suggested text completion for a query’s search term.",
          "name" : "CSUserQuery.Suggestion",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreSpotlight\/CSUserQuery\/Suggestion"
        }
      ],
      "title" : "Executing the query automatically"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Starts searching the index for items that match the current query string and parameters.",
          "name" : "start()",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreSpotlight\/CSUserQuery\/start()"
        },
        {
          "description" : "Cancels the current query operation.",
          "name" : "cancel()",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreSpotlight\/CSUserQuery\/cancel()"
        },
        {
          "description" : "The block to execute when the query delivers a new batch of suggested items.",
          "name" : "foundSuggestionsHandler",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreSpotlight\/CSUserQuery\/foundSuggestionsHandler"
        },
        {
          "description" : "The number of suggested items the query found so far.",
          "name" : "foundSuggestionCount",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreSpotlight\/CSUserQuery\/foundSuggestionCount"
        }
      ],
      "title" : "Executing the query with handler blocks"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Notifies the system that someone engaged with a specific search result in your app’s interface.",
          "name" : "userEngaged(_:visibleItems:interaction:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreSpotlight\/CSUserQuery\/userEngaged(_:visibleItems:interaction:)"
        },
        {
          "description" : "Notifies the system that someone engaged with a specific text completion in your app’s interface.",
          "name" : "userEngaged(_:visibleSuggestions:interaction:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreSpotlight\/CSUserQuery\/userEngaged(_:visibleSuggestions:interaction:)"
        },
        {
          "description" : "Constants that indicate how someone engaged with search-related content.",
          "name" : "CSUserQuery.UserInteractionKind",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreSpotlight\/CSUserQuery\/UserInteractionKind"
        }
      ],
      "title" : "Improving the quality of ranked results"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Add a search interface to your app to execute Spotlight queries and offer suggested text completions.",
          "name" : "Building a search interface for your app",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreSpotlight\/building-a-search-interface-for-your-app"
        },
        {
          "description" : "Search for app-specific content and refine search results using predicates and filters.",
          "name" : "Searching for information in your app",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreSpotlight\/searching-for-information-in-your-app"
        },
        {
          "description" : "The configuration details to apply to a user query.",
          "name" : "CSUserQueryContext",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreSpotlight\/CSUserQueryContext"
        },
        {
          "description" : "A type you use to programmatically search the indexed app content.",
          "name" : "CSSearchQuery",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreSpotlight\/CSSearchQuery"
        },
        {
          "description" : "The behavior configuration to use for a search query.",
          "name" : "CSSearchQueryContext",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreSpotlight\/CSSearchQueryContext"
        },
        {
          "description" : "The kind of suggestion to use in a query.",
          "name" : "CSSuggestion",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreSpotlight\/CSSuggestion"
        }
      ],
      "title" : "Queries"
    },
    {
      "content" : "",
      "items" : [
        {
          "name" : "CSSearchQuery"
        }
      ],
      "title" : "Inherits From"
    }
  ],
  "source" : "appleJSON",
  "title" : "CSUserQuery",
  "url" : "https:\/\/developer.apple.com\/documentation\/corespotlight\/csuserquery"
}