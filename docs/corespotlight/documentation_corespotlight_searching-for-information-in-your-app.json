{
  "abstract" : "Search for app-specific content and refine search results using predicates and filters.",
  "codeExamples" : [
    {
      "code" : "(authorNames == “Tim”wc || authorNames == “Steve”wc) &&\n InRange(completionDate,$time.today(-10),$time.today)",
      "language" : "swift"
    },
    {
      "code" : "import CoreSpotlight\n\nclass QueryExample {\n    func executeQuery(withTitle title : String) {\n        var results = [CSSearchableItem]()\n        \/\/ Fetch the items with a title that starts with the\n        \/\/ specified string. Perform a case-insensitive comparison.\n        let queryString = \"title == '\\(title)*'c\"\n    \n        let context = CSSearchQueryContext()\n        context.fetchAttributes = [\"title\", \"displayName\", \"keywords\", \"contentType\"]\n    \n       \/\/ Create the query and specify a handler for the results.\n        let query = CSSearchQuery(queryString: queryString, queryContext: context)\n    \n        \/\/ Process the results asynchronously.\n        Task {\n            do {\n                \/\/ Start the query and iterate over the results.\n                for try await result in query.results {\n                    let attributeSet = result.item.attributeSet\n                    let foundTitle = attributeSet.title\n                    let foundDisplayName = attributeSet.displayName\n                \n                    \/\/ Use the results here.\n                }\n            } catch {\n                \/\/ Handle any errors.\n            }\n        }\n    }\n}",
      "language" : "swift"
    },
    {
      "code" : "import CoreSpotlight\n\nclass QueryExample {\n    private var query : CSSearchQuery? = nil\n    mutating func executeQueryWithHandlers(withTitle title : String) {\n        var results = [CSSearchableItem]()\n        \/\/ Fetch the items with a title that starts with the\n        \/\/ specified string. Perform a case-insensitive comparison.\n        let queryString = \"title == '\\(title)*'c\"\n        \n        let context = CSSearchQueryContext()\n        context.fetchAttributes = [\"title\", \"displayName\", \"keywords\", \"contentType\"]\n        \n        \/\/ Create the query and specify a handler for the results.\n        self.query = CSSearchQuery(queryString: queryString, queryContext: context)\n        self.query?.foundItemsHandler = { (items : [CSSearchableItem]) -> Void in\n            results.append(contentsOf: items)\n        }\n        \n        \/\/ Display the results when the query finishes.\n        self.query?.completionHandler = { (error) -> Void in\n            if error == nil {\n                for item in results {\n                    let attributeSet = item.attributeSet\n                    let foundTitle = attributeSet.title\n                    let foundDisplayName = attributeSet.displayName\n                    \n                    \/\/ Use the results here.\n                }\n            } else {\n                \/\/ Handle the error.\n            }\n        }\n                      \n        \/\/ Start the query.\n        self.query?.start()\n    }\n}",
      "language" : "swift"
    }
  ],
  "contentHash" : "eac7781dbb6010b591f6ca0b8c04904fcf6f123eceda2f87e6e8d64707a52221",
  "crawledAt" : "2025-12-02T16:43:49Z",
  "id" : "853F639D-3F0F-4745-B099-81C0DCD5A218",
  "kind" : "article",
  "language" : "swift",
  "module" : "Core Spotlight",
  "overview" : "## Overview\n\nAdd search capabilities to your app to find relevant information quickly. Instead of building your own custom search tools, index your content using the Core Spotlight APIs and use the framework-provided queries to retrieve information. Indexing your content makes it available to both your app and to the system’s Spotlight search feature.\n\nUse a [doc:\/\/com.apple.corespotlight\/documentation\/CoreSpotlight\/CSSearchQuery] object to execute a search of your app’s indexed content. With this query object, you specify which attributes of an item to match, and the values that constitute a match. For example, you might tell the query to look for media clips with a duration in a specific range. Although you might incorporate input from your app’s UI when building your query string, use this query type to match specific attributes of your indexed content. For information about how to search based solely on input from a person, see [doc:\/\/com.apple.corespotlight\/documentation\/CoreSpotlight\/building-a-search-interface-for-your-app].\n\n### Select the attributes you want the query to retrieve\n\nWhen you execute a query, the system doesn’t automatically retrieve every property of your [doc:\/\/com.apple.corespotlight\/documentation\/CoreSpotlight\/CSSearchableItem] objects. Instead, it retrieves only the properties you specifically request. This behavior improves performance by not spending time to retrieve information your app doesn’t need.\n\nIdentify the properties you want, and specify the property names as strings when you initialize your query. For example, to fetch the title and display name of each item, include “title” and “displayName” strings in the [doc:\/\/com.apple.corespotlight\/documentation\/CoreSpotlight\/CSSearchQueryContext\/fetchAttributes] property of your context object.\n\n### Create a query string for your search\n\nWhen you execute a query, Core Spotlight evaluates each item in the index against a query string you provide. Construct your query string from one or more predicates, and use each predicate to evaluate an attribute of the indexed item. If the predicates in the overall query string evaluate to true for an item, the query object returns the item in the search results. For each predicate in your query string, use one of the following formats:\n\nIn both formats, `attributeName` is a property name from the [doc:\/\/com.apple.corespotlight\/documentation\/CoreSpotlight\/CSSearchableItemAttributeSet] class. For example, to evaluate the [doc:\/\/com.apple.corespotlight\/documentation\/CoreSpotlight\/CSSearchableItemAttributeSet\/title] property of the item, use “title” as the attribute name. The `InRange` predicate determines whether a property with a numeric value is between the specified minimum and maxium values. Other predicates compare the attribute to the value you specify using one of the following operators:\n\nWhen comparing text values, use modifiers to change the matching behavior the query applies to the comparison. Queries support the following modifiers:\n\nCombine two predicates using either an AND or OR operation, listed in the table below. Use parentheses to prioritize the evaluation of predicates.\n\nThe following examples show how operators, modifiers, and parentheses work for query strings. When trying to match a specific word, notice that the `w` modifier is more precise than a wildcard because of how it matches word boundaries.\n\n### Match dates and times in a query string\n\nWhen an attribute contains a date or time value, there are two ways you can specify the value portion of your predicate:\n\n[doc:\/\/com.apple.corespotlight\/documentation\/CoreSpotlight\/CSSearchQuery] provides the `$time` variable as a convenient way to specify date values in your query strings. When you start a query, the system initializes this variable to the current date and time. Include this variable in the value portion of your predicate to compare a date-based attribute to the date you specify. The following table lists the properties of the variable you can use in your predicates and how the query matches them against attributes.\n\nThe following example shows a query string that includes different types of predicates and modifiers and uses the `$time` variable. The predicate matches an item if author is either Tim or Steve and the item’s completion date occurred within the past 10 days. For the completion date check, adding a negative number to the `$time.today` variable creates a date in the past.\n\n### Start the query and process the results\n\nSearch queries are one-shot objects. While they run, they deliver matching items asynchronously to the handlers you provide. When there are no more items, the query stops. You can also stop a query early by calling its [doc:\/\/com.apple.corespotlight\/documentation\/CoreSpotlight\/CSSearchQuery\/cancel()] method before the system delivers all matching results.\n\nCreate a new query using a query string and a [doc:\/\/com.apple.corespotlight\/documentation\/CoreSpotlight\/CSSearchQueryContext] object, which contains the query configuration parameters. Start the query by fetching the [doc:\/\/com.apple.corespotlight\/documentation\/CoreSpotlight\/CSSearchQuery\/results-swift.property] property of the query object and iterating over the results. The property contains an [doc:\/\/com.apple.documentation\/documentation\/Swift\/AsyncSequence], and fetching it starts the query and begins the delivery of the results. The following function searches for items with a specific title and processes the results in an asynchronous task:\n\nIf you prefer not to process the results using an [doc:\/\/com.apple.documentation\/documentation\/Swift\/AsyncSequence], specify values for the [doc:\/\/com.apple.corespotlight\/documentation\/CoreSpotlight\/CSSearchQuery\/foundItemsHandler] and [doc:\/\/com.apple.corespotlight\/documentation\/CoreSpotlight\/CSSearchQuery\/completionHandler] properties. When using handler blocks, you’re responsible for calling the [doc:\/\/com.apple.corespotlight\/documentation\/CoreSpotlight\/CSSearchQuery\/start()] method to start the query. To deliver results, the query calls your  [doc:\/\/com.apple.corespotlight\/documentation\/CoreSpotlight\/CSSearchQuery\/foundItemsHandler] block one or more times, delivering new results with each call. The system executes your completion handler block only once after it finishes delivering all the results.\n\nThe following code shows a version of the previous method that uses handler blocks to process the results.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/CoreSpotlight\/searching-for-information-in-your-app\ncrawled: 2025-12-02T16:43:49Z\n---\n\n# Searching for information in your app\n\n**Article**\n\nSearch for app-specific content and refine search results using predicates and filters.\n\n## Overview\n\nAdd search capabilities to your app to find relevant information quickly. Instead of building your own custom search tools, index your content using the Core Spotlight APIs and use the framework-provided queries to retrieve information. Indexing your content makes it available to both your app and to the system’s Spotlight search feature.\n\nUse a [doc:\/\/com.apple.corespotlight\/documentation\/CoreSpotlight\/CSSearchQuery] object to execute a search of your app’s indexed content. With this query object, you specify which attributes of an item to match, and the values that constitute a match. For example, you might tell the query to look for media clips with a duration in a specific range. Although you might incorporate input from your app’s UI when building your query string, use this query type to match specific attributes of your indexed content. For information about how to search based solely on input from a person, see [doc:\/\/com.apple.corespotlight\/documentation\/CoreSpotlight\/building-a-search-interface-for-your-app].\n\n### Select the attributes you want the query to retrieve\n\nWhen you execute a query, the system doesn’t automatically retrieve every property of your [doc:\/\/com.apple.corespotlight\/documentation\/CoreSpotlight\/CSSearchableItem] objects. Instead, it retrieves only the properties you specifically request. This behavior improves performance by not spending time to retrieve information your app doesn’t need.\n\nIdentify the properties you want, and specify the property names as strings when you initialize your query. For example, to fetch the title and display name of each item, include “title” and “displayName” strings in the [doc:\/\/com.apple.corespotlight\/documentation\/CoreSpotlight\/CSSearchQueryContext\/fetchAttributes] property of your context object.\n\n### Create a query string for your search\n\nWhen you execute a query, Core Spotlight evaluates each item in the index against a query string you provide. Construct your query string from one or more predicates, and use each predicate to evaluate an attribute of the indexed item. If the predicates in the overall query string evaluate to true for an item, the query object returns the item in the search results. For each predicate in your query string, use one of the following formats:\n\n- `attributeName operator value[modifiers]`\n- `InRange(attributeName, minValue, maxValue)`\n\nIn both formats, `attributeName` is a property name from the [doc:\/\/com.apple.corespotlight\/documentation\/CoreSpotlight\/CSSearchableItemAttributeSet] class. For example, to evaluate the [doc:\/\/com.apple.corespotlight\/documentation\/CoreSpotlight\/CSSearchableItemAttributeSet\/title] property of the item, use “title” as the attribute name. The `InRange` predicate determines whether a property with a numeric value is between the specified minimum and maxium values. Other predicates compare the attribute to the value you specify using one of the following operators:\n\n\n\nWhen comparing text values, use modifiers to change the matching behavior the query applies to the comparison. Queries support the following modifiers:\n\n\n\nCombine two predicates using either an AND or OR operation, listed in the table below. Use parentheses to prioritize the evaluation of predicates.\n\n\n\nThe following examples show how operators, modifiers, and parentheses work for query strings. When trying to match a specific word, notice that the `w` modifier is more precise than a wildcard because of how it matches word boundaries.\n\n\n\n### Match dates and times in a query string\n\nWhen an attribute contains a date or time value, there are two ways you can specify the value portion of your predicate:\n\n- Specify a floating-point value with the number of seconds relative to January 1, 2001. You can get this value from a [doc:\/\/com.apple.documentation\/documentation\/CoreFoundation\/CFDate] or [doc:\/\/com.apple.documentation\/documentation\/Foundation\/Date] type using the [doc:\/\/com.apple.documentation\/documentation\/CoreFoundation\/CFDateGetAbsoluteTime(_:)] function.\n- Specify a property of the built-in `$time` variable.\n\n[doc:\/\/com.apple.corespotlight\/documentation\/CoreSpotlight\/CSSearchQuery] provides the `$time` variable as a convenient way to specify date values in your query strings. When you start a query, the system initializes this variable to the current date and time. Include this variable in the value portion of your predicate to compare a date-based attribute to the date you specify. The following table lists the properties of the variable you can use in your predicates and how the query matches them against attributes.\n\n\n\nThe following example shows a query string that includes different types of predicates and modifiers and uses the `$time` variable. The predicate matches an item if author is either Tim or Steve and the item’s completion date occurred within the past 10 days. For the completion date check, adding a negative number to the `$time.today` variable creates a date in the past.\n\n```swift\n(authorNames == “Tim”wc || authorNames == “Steve”wc) &&\n InRange(completionDate,$time.today(-10),$time.today)\n```\n\n### Start the query and process the results\n\nSearch queries are one-shot objects. While they run, they deliver matching items asynchronously to the handlers you provide. When there are no more items, the query stops. You can also stop a query early by calling its [doc:\/\/com.apple.corespotlight\/documentation\/CoreSpotlight\/CSSearchQuery\/cancel()] method before the system delivers all matching results.\n\nCreate a new query using a query string and a [doc:\/\/com.apple.corespotlight\/documentation\/CoreSpotlight\/CSSearchQueryContext] object, which contains the query configuration parameters. Start the query by fetching the [doc:\/\/com.apple.corespotlight\/documentation\/CoreSpotlight\/CSSearchQuery\/results-swift.property] property of the query object and iterating over the results. The property contains an [doc:\/\/com.apple.documentation\/documentation\/Swift\/AsyncSequence], and fetching it starts the query and begins the delivery of the results. The following function searches for items with a specific title and processes the results in an asynchronous task:\n\n```swift\nimport CoreSpotlight\n\nclass QueryExample {\n    func executeQuery(withTitle title : String) {\n        var results = [CSSearchableItem]()\n        \/\/ Fetch the items with a title that starts with the\n        \/\/ specified string. Perform a case-insensitive comparison.\n        let queryString = \"title == '\\(title)*'c\"\n    \n        let context = CSSearchQueryContext()\n        context.fetchAttributes = [\"title\", \"displayName\", \"keywords\", \"contentType\"]\n    \n       \/\/ Create the query and specify a handler for the results.\n        let query = CSSearchQuery(queryString: queryString, queryContext: context)\n    \n        \/\/ Process the results asynchronously.\n        Task {\n            do {\n                \/\/ Start the query and iterate over the results.\n                for try await result in query.results {\n                    let attributeSet = result.item.attributeSet\n                    let foundTitle = attributeSet.title\n                    let foundDisplayName = attributeSet.displayName\n                \n                    \/\/ Use the results here.\n                }\n            } catch {\n                \/\/ Handle any errors.\n            }\n        }\n    }\n}\n```\n\nIf you prefer not to process the results using an [doc:\/\/com.apple.documentation\/documentation\/Swift\/AsyncSequence], specify values for the [doc:\/\/com.apple.corespotlight\/documentation\/CoreSpotlight\/CSSearchQuery\/foundItemsHandler] and [doc:\/\/com.apple.corespotlight\/documentation\/CoreSpotlight\/CSSearchQuery\/completionHandler] properties. When using handler blocks, you’re responsible for calling the [doc:\/\/com.apple.corespotlight\/documentation\/CoreSpotlight\/CSSearchQuery\/start()] method to start the query. To deliver results, the query calls your  [doc:\/\/com.apple.corespotlight\/documentation\/CoreSpotlight\/CSSearchQuery\/foundItemsHandler] block one or more times, delivering new results with each call. The system executes your completion handler block only once after it finishes delivering all the results.\n\n\n\nThe following code shows a version of the previous method that uses handler blocks to process the results.\n\n```swift\nimport CoreSpotlight\n\nclass QueryExample {\n    private var query : CSSearchQuery? = nil\n    mutating func executeQueryWithHandlers(withTitle title : String) {\n        var results = [CSSearchableItem]()\n        \/\/ Fetch the items with a title that starts with the\n        \/\/ specified string. Perform a case-insensitive comparison.\n        let queryString = \"title == '\\(title)*'c\"\n        \n        let context = CSSearchQueryContext()\n        context.fetchAttributes = [\"title\", \"displayName\", \"keywords\", \"contentType\"]\n        \n        \/\/ Create the query and specify a handler for the results.\n        self.query = CSSearchQuery(queryString: queryString, queryContext: context)\n        self.query?.foundItemsHandler = { (items : [CSSearchableItem]) -> Void in\n            results.append(contentsOf: items)\n        }\n        \n        \/\/ Display the results when the query finishes.\n        self.query?.completionHandler = { (error) -> Void in\n            if error == nil {\n                for item in results {\n                    let attributeSet = item.attributeSet\n                    let foundTitle = attributeSet.title\n                    let foundDisplayName = attributeSet.displayName\n                    \n                    \/\/ Use the results here.\n                }\n            } else {\n                \/\/ Handle the error.\n            }\n        }\n                      \n        \/\/ Start the query.\n        self.query?.start()\n    }\n}\n```\n\n## Queries\n\n- **Building a search interface for your app**: Add a search interface to your app to execute Spotlight queries and offer suggested text completions.\n- **CSUserQuery**: A type you use to initiate searches from your interface and offer suggested text completions.\n- **CSUserQueryContext**: The configuration details to apply to a user query.\n- **CSSearchQuery**: A type you use to programmatically search the indexed app content.\n- **CSSearchQueryContext**: The behavior configuration to use for a search query.\n- **CSSuggestion**: The kind of suggestion to use in a query.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Add a search interface to your app to execute Spotlight queries and offer suggested text completions.",
          "name" : "Building a search interface for your app",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreSpotlight\/building-a-search-interface-for-your-app"
        },
        {
          "description" : "A type you use to initiate searches from your interface and offer suggested text completions.",
          "name" : "CSUserQuery",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreSpotlight\/CSUserQuery"
        },
        {
          "description" : "The configuration details to apply to a user query.",
          "name" : "CSUserQueryContext",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreSpotlight\/CSUserQueryContext"
        },
        {
          "description" : "A type you use to programmatically search the indexed app content.",
          "name" : "CSSearchQuery",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreSpotlight\/CSSearchQuery"
        },
        {
          "description" : "The behavior configuration to use for a search query.",
          "name" : "CSSearchQueryContext",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreSpotlight\/CSSearchQueryContext"
        },
        {
          "description" : "The kind of suggestion to use in a query.",
          "name" : "CSSuggestion",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreSpotlight\/CSSuggestion"
        }
      ],
      "title" : "Queries"
    }
  ],
  "source" : "appleJSON",
  "title" : "Searching for information in your app",
  "url" : "https:\/\/developer.apple.com\/documentation\/CoreSpotlight\/searching-for-information-in-your-app"
}