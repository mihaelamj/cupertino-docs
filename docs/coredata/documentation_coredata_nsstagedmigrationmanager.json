{
  "abstract" : "An object that handles the migration event loop and provides access to the migrating persistent store.",
  "codeExamples" : [
    {
      "code" : "\/\/ Create a migration manager with the required stages.\nlet manager = NSStagedMigrationManager(stages)\n\nlet options = [\n    \/\/ Enable lightweight migrations for this store.\n    NSMigratePersistentStoresAutomaticallyOption: true,\n    NSInferMappingModelAutomaticallyOption: true\n    \/\/ Specify the migration manager to use with this store.\n    NSPersistentStoreStagedMigrationManagerOptionKey: manager \n]\n\n\/\/ Add the store to the persistent store coordinator.        \nlet store = coordinator.addPersistentStore(\n    type: .sqlite,\n    at: storeURL,\n    options: options\n)",
      "language" : "swift"
    }
  ],
  "conformsTo" : [
    "CVarArg",
    "CustomDebugStringConvertible",
    "CustomStringConvertible",
    "Equatable",
    "Hashable",
    "NSObjectProtocol"
  ],
  "contentHash" : "98cfd9257b07ff55e2139492eb798499dc30c6b9585d4fd7b8ad5c358924ddc2",
  "crawledAt" : "2025-12-08T00:59:39Z",
  "declaration" : {
    "code" : "class NSStagedMigrationManager",
    "language" : "swift"
  },
  "id" : "91942F29-D16F-4CA4-8314-BB82CD08C72E",
  "kind" : "class",
  "language" : "swift",
  "module" : "Core Data",
  "overview" : "## Overview\n\nA staged migration manager contains the individual stages of a migration and applies those stages, in the order you specify, when that migration runs. The manager handles the migration’s event loop, and provides access to the migrating store through its [doc:\/\/com.apple.coredata\/documentation\/CoreData\/NSStagedMigrationManager\/container] property. Stages can be custom, which enables you to perform tasks immediately before and after a stage runs, or lightweight, which supplements custom stages with those that Core Data can invoke automatically because they’re already compatible with lightweight migrations.\n\nUse [doc:\/\/com.apple.coredata\/documentation\/CoreData\/NSPersistentStoreStagedMigrationManagerOptionKey] to include an instance of [doc:\/\/com.apple.coredata\/documentation\/CoreData\/NSStagedMigrationManager] in your persistent store’s options dictionary, as the following example shows:",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "tvOS",
    "visionOS",
    "watchOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/CoreData\/NSStagedMigrationManager\ncrawled: 2025-12-08T00:59:39Z\n---\n\n# NSStagedMigrationManager\n\n**Class**\n\nAn object that handles the migration event loop and provides access to the migrating persistent store.\n\n## Declaration\n\n```swift\nclass NSStagedMigrationManager\n```\n\n## Overview\n\nA staged migration manager contains the individual stages of a migration and applies those stages, in the order you specify, when that migration runs. The manager handles the migration’s event loop, and provides access to the migrating store through its [doc:\/\/com.apple.coredata\/documentation\/CoreData\/NSStagedMigrationManager\/container] property. Stages can be custom, which enables you to perform tasks immediately before and after a stage runs, or lightweight, which supplements custom stages with those that Core Data can invoke automatically because they’re already compatible with lightweight migrations.\n\nUse [doc:\/\/com.apple.coredata\/documentation\/CoreData\/NSPersistentStoreStagedMigrationManagerOptionKey] to include an instance of [doc:\/\/com.apple.coredata\/documentation\/CoreData\/NSStagedMigrationManager] in your persistent store’s options dictionary, as the following example shows:\n\n```swift\n\/\/ Create a migration manager with the required stages.\nlet manager = NSStagedMigrationManager(stages)\n\nlet options = [\n    \/\/ Enable lightweight migrations for this store.\n    NSMigratePersistentStoresAutomaticallyOption: true,\n    NSInferMappingModelAutomaticallyOption: true\n    \/\/ Specify the migration manager to use with this store.\n    NSPersistentStoreStagedMigrationManagerOptionKey: manager \n]\n\n\/\/ Add the store to the persistent store coordinator.        \nlet store = coordinator.addPersistentStore(\n    type: .sqlite,\n    at: storeURL,\n    options: options\n)\n```\n\n## Creating a migration manager\n\n- **init(_:)**: Creates a migration manager with the specified stages.\n\n## Accessing the persistent container\n\n- **container**: The container that provides access to the migrating persistent store.\n\n## Accessing the stages\n\n- **stages**: The migration stages.\n\n## Migration staging\n\n- **NSPersistentStoreStagedMigrationManagerOptionKey**: The key for specifying your staged migration manager.\n\n## Inherits From\n\n- NSObject\n\n## Conforms To\n\n- CVarArg\n- CustomDebugStringConvertible\n- CustomStringConvertible\n- Equatable\n- Hashable\n- NSObjectProtocol\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Creates a migration manager with the specified stages.",
          "name" : "init(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreData\/NSStagedMigrationManager\/init(_:)"
        }
      ],
      "title" : "Creating a migration manager"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "The container that provides access to the migrating persistent store.",
          "name" : "container",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreData\/NSStagedMigrationManager\/container"
        }
      ],
      "title" : "Accessing the persistent container"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "The migration stages.",
          "name" : "stages",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreData\/NSStagedMigrationManager\/stages"
        }
      ],
      "title" : "Accessing the stages"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "The key for specifying your staged migration manager.",
          "name" : "NSPersistentStoreStagedMigrationManagerOptionKey",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreData\/NSPersistentStoreStagedMigrationManagerOptionKey"
        }
      ],
      "title" : "Migration staging"
    },
    {
      "content" : "",
      "items" : [
        {
          "name" : "NSObject"
        }
      ],
      "title" : "Inherits From"
    }
  ],
  "source" : "appleJSON",
  "title" : "NSStagedMigrationManager",
  "url" : "https:\/\/developer.apple.com\/documentation\/CoreData\/NSStagedMigrationManager"
}