{
  "abstract" : "Create the individual components that Core Data requires manually, to support earlier versions of Apple operating systems.",
  "codeExamples" : [
    {
      "code" : "\/\/ Get a URL to the compiled model in the app bundle.\nguard let modelURL = Bundle.main.url(forResource: \"DataModel\",\n                                     withExtension: \"momd\") else {\n    fatalError(\"Failed to find data model\")\n}\n\n\/\/ Use the URL to create a managed object model.\nguard let model = NSManagedObjectModel(contentsOf: modelURL) else {\n    fatalError(\"Failed to create model from file: \\(modelURL)\")\n}",
      "language" : "swift"
    },
    {
      "code" : "\/\/ Use the managed object model to create a persistent store coordinator.\nlet coordinator = NSPersistentStoreCoordinator(managedObjectModel: managedObjectModel)",
      "language" : "swift"
    },
    {
      "code" : "\/\/ Get the URL to the Document directory.\nlet documentDirectoryURL = FileManager.default.urls(for: .documentDirectory,\n                                                    in: .userDomainMask).last\n\/\/ Create a URL to the data store.\nguard let storeURL = URL(string: \"DataModel.sqlite\",\n                         relativeTo: documentDirectoryURL) else {\n    fatalError(\"Failed to create store URL\")\n}\n\ndo {\n    \/\/ Set the options to enable lightweight data migrations.\n    let options = [NSMigratePersistentStoresAutomaticallyOption: true,\n                         NSInferMappingModelAutomaticallyOption: true]\n    \/\/ Add the store to the coordinator.\n    _ = try coordinator.addPersistentStore(type: .sqlite, at: storeURL,\n                                       options: options)\n} catch {\n    fatalError(\"Failed to add persistent store: \\(error.localizedDescription)\")\n}",
      "language" : "swift"
    },
    {
      "code" : "\/\/ Create a context to interact with managed objects.\nlet context = NSManagedObjectContext(concurrencyType: .mainQueueConcurrencyType)\n\/\/ Assign the coordinator to the context.\ncontext.persistentStoreCoordinator = persistentStoreCoordinator",
      "language" : "swift"
    }
  ],
  "contentHash" : "adde3f6d15e58b933cf10d4bcaa588b2101d88ae162e8bf94e04581b928e6cba",
  "crawledAt" : "2025-12-02T18:26:30Z",
  "id" : "357F9F59-07A6-40CB-8CFD-8E2E46340DE4",
  "kind" : "article",
  "language" : "swift",
  "module" : "Core Data",
  "overview" : "## Overview\n\nIf your app targets iOS 10+, macOS 10.12+, tvOS 10+, watchOS 3+, or visionOS 1+, you can use [doc:\/\/com.apple.coredata\/documentation\/CoreData\/NSPersistentContainer] to simplify creation and management of the Core Data stack. Otherwise, you need to manually create an [doc:\/\/com.apple.coredata\/documentation\/CoreData\/NSManagedObjectModel], [doc:\/\/com.apple.coredata\/documentation\/CoreData\/NSPersistentStoreCoordinator], and at least one [doc:\/\/com.apple.coredata\/documentation\/CoreData\/NSManagedObjectContext].\n\n### Create a managed object model\n\nTo instantiate an [doc:\/\/com.apple.coredata\/documentation\/CoreData\/NSManagedObjectModel], pass in a URL that points to the compiled version of the `.xcdatamodeld` file. This `.momd` file is typically part of your app bundle.\n\n### Create a persistent store coordinator\n\nNext, pass the managed object model to the [doc:\/\/com.apple.coredata\/documentation\/CoreData\/NSPersistentStoreCoordinator] initializer to create a store coordinator with that model.\n\n#### Add a persistent store to the coordinator\n\nIf you want Core Data to persist your data model to disk, tell the store coordinator where the file exists and what format to use.\n\nThere are advantages and disadvantages to each of the store types. Refer to the [doc:\/\/com.apple.coredata\/documentation\/CoreData\/NSPersistentStoreCoordinator] documentation for details on each store type.\n\n### Create a managed object context\n\nCreate an [doc:\/\/com.apple.coredata\/documentation\/CoreData\/NSManagedObjectContext], and set its store coordinator property.\n\nYour app uses this context to interact with Core Data. Pass a reference to this context to your user interface. For additional information, see [doc:\/\/com.apple.coredata\/documentation\/CoreData\/setting-up-a-core-data-stack#Inject-the-managed-object-context].",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/CoreData\/setting-up-a-core-data-stack-manually\ncrawled: 2025-12-02T18:26:30Z\n---\n\n# Setting up a Core Data stack manually\n\n**Article**\n\nCreate the individual components that Core Data requires manually, to support earlier versions of Apple operating systems.\n\n## Overview\n\nIf your app targets iOS 10+, macOS 10.12+, tvOS 10+, watchOS 3+, or visionOS 1+, you can use [doc:\/\/com.apple.coredata\/documentation\/CoreData\/NSPersistentContainer] to simplify creation and management of the Core Data stack. Otherwise, you need to manually create an [doc:\/\/com.apple.coredata\/documentation\/CoreData\/NSManagedObjectModel], [doc:\/\/com.apple.coredata\/documentation\/CoreData\/NSPersistentStoreCoordinator], and at least one [doc:\/\/com.apple.coredata\/documentation\/CoreData\/NSManagedObjectContext].\n\n### Create a managed object model\n\nTo instantiate an [doc:\/\/com.apple.coredata\/documentation\/CoreData\/NSManagedObjectModel], pass in a URL that points to the compiled version of the `.xcdatamodeld` file. This `.momd` file is typically part of your app bundle.\n\n```swift\n\/\/ Get a URL to the compiled model in the app bundle.\nguard let modelURL = Bundle.main.url(forResource: \"DataModel\",\n                                     withExtension: \"momd\") else {\n    fatalError(\"Failed to find data model\")\n}\n\n\/\/ Use the URL to create a managed object model.\nguard let model = NSManagedObjectModel(contentsOf: modelURL) else {\n    fatalError(\"Failed to create model from file: \\(modelURL)\")\n}\n```\n\n### Create a persistent store coordinator\n\nNext, pass the managed object model to the [doc:\/\/com.apple.coredata\/documentation\/CoreData\/NSPersistentStoreCoordinator] initializer to create a store coordinator with that model.\n\n```swift\n\/\/ Use the managed object model to create a persistent store coordinator.\nlet coordinator = NSPersistentStoreCoordinator(managedObjectModel: managedObjectModel)\n```\n\n#### Add a persistent store to the coordinator\n\nIf you want Core Data to persist your data model to disk, tell the store coordinator where the file exists and what format to use.\n\n```swift\n\/\/ Get the URL to the Document directory.\nlet documentDirectoryURL = FileManager.default.urls(for: .documentDirectory,\n                                                    in: .userDomainMask).last\n\/\/ Create a URL to the data store.\nguard let storeURL = URL(string: \"DataModel.sqlite\",\n                         relativeTo: documentDirectoryURL) else {\n    fatalError(\"Failed to create store URL\")\n}\n\ndo {\n    \/\/ Set the options to enable lightweight data migrations.\n    let options = [NSMigratePersistentStoresAutomaticallyOption: true,\n                         NSInferMappingModelAutomaticallyOption: true]\n    \/\/ Add the store to the coordinator.\n    _ = try coordinator.addPersistentStore(type: .sqlite, at: storeURL,\n                                       options: options)\n} catch {\n    fatalError(\"Failed to add persistent store: \\(error.localizedDescription)\")\n}\n```\n\n\n\nThere are advantages and disadvantages to each of the store types. Refer to the [doc:\/\/com.apple.coredata\/documentation\/CoreData\/NSPersistentStoreCoordinator] documentation for details on each store type.\n\n### Create a managed object context\n\nCreate an [doc:\/\/com.apple.coredata\/documentation\/CoreData\/NSManagedObjectContext], and set its store coordinator property.\n\n```swift\n\/\/ Create a context to interact with managed objects.\nlet context = NSManagedObjectContext(concurrencyType: .mainQueueConcurrencyType)\n\/\/ Assign the coordinator to the context.\ncontext.persistentStoreCoordinator = persistentStoreCoordinator\n```\n\nYour app uses this context to interact with Core Data. Pass a reference to this context to your user interface. For additional information, see [doc:\/\/com.apple.coredata\/documentation\/CoreData\/setting-up-a-core-data-stack#Inject-the-managed-object-context].\n\n",
  "sections" : [

  ],
  "source" : "appleJSON",
  "title" : "Setting up a Core Data stack manually",
  "url" : "https:\/\/developer.apple.com\/documentation\/CoreData\/setting-up-a-core-data-stack-manually"
}