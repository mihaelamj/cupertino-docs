{
  "abstract" : "A policy instance that customizes the migration process for an entity mapping.",
  "codeExamples" : [

  ],
  "conformsTo" : [
    "CVarArg",
    "CustomDebugStringConvertible",
    "CustomStringConvertible",
    "Equatable",
    "Hashable",
    "NSObjectProtocol"
  ],
  "contentHash" : "67b10c062b7625a8a55d0665693af9f72dbecdd1d0ffe992496c73d6dd9e71ce",
  "crawledAt" : "2025-12-08T00:59:46Z",
  "declaration" : {
    "code" : "class NSEntityMigrationPolicy",
    "language" : "swift"
  },
  "id" : "0E3EB7C7-8431-4D9C-A840-351759D1EFF3",
  "kind" : "class",
  "language" : "swift",
  "module" : "Core Data",
  "overview" : "## Overview\n\nYou set the policy for an entity mapping by passing the name of the migration policy class as the argument to [doc:\/\/com.apple.coredata\/documentation\/CoreData\/NSEntityMapping\/entityMigrationPolicyClassName]. Typically, you specify the name in the Xcode mapping model editor.",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "tvOS",
    "visionOS",
    "watchOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/CoreData\/NSEntityMigrationPolicy\ncrawled: 2025-12-08T00:59:46Z\n---\n\n# NSEntityMigrationPolicy\n\n**Class**\n\nA policy instance that customizes the migration process for an entity mapping.\n\n## Declaration\n\n```swift\nclass NSEntityMigrationPolicy\n```\n\n## Overview\n\nYou set the policy for an entity mapping by passing the name of the migration policy class as the argument to [doc:\/\/com.apple.coredata\/documentation\/CoreData\/NSEntityMapping\/entityMigrationPolicyClassName]. Typically, you specify the name in the Xcode mapping model editor.\n\n## Customizing Stages of the Mapping Life Cycle\n\n- **begin(_:with:)**: Sets up state information before the start of a given entity mapping.\n- **createDestinationInstances(forSource:in:manager:)**: Creates the destination instance(s) for a given source instance.\n- **endInstanceCreation(forMapping:manager:)**: Indicates the end of the instance creation stage for the specified entity mapping, and the precursor to the next migration stage.\n- **createRelationships(forDestination:in:manager:)**: Constructs the relationships between the newly-created destination instances.\n- **endRelationshipCreation(forMapping:manager:)**: Indicates the end of the relationship creation stage for the specified entity mapping.\n- **performCustomValidation(forMapping:manager:)**: Provides the option to perform custom validation on migrated objects during the validation stage of the entity migration policy.\n- **end(_:manager:)**: Performs cleanup at the end of the migration, from any phase of the mapping.\n\n## Constants\n\n- **NSMigrationManagerKey**: Key for the migration manager.\n- **NSMigrationSourceObjectKey**: Key for the source object.\n- **NSMigrationDestinationObjectKey**: Key for the destination object.\n- **NSMigrationEntityMappingKey**: Key for the entity mapping object.\n- **NSMigrationPropertyMappingKey**: Key for the property mapping object.\n- **NSMigrationEntityPolicyKey**: Key for the entity migration policy object.\n\n## Entity Mapping\n\n- **NSMigrationManager**: A migration manager instance that performs a migration of data from one persistent store to another using a given mapping model.\n- **NSMappingModel**: A model instance that specifies how to map a model from a source to a destination managed object model.\n- **NSEntityMapping**: A mapping instance that specifies how to map an entity from a source to a destination managed object model.\n- **NSEntityMappingType**: The types for mapping an entity between a source model and a destination model.\n- **NSPropertyMapping**: A mapping instance that specifies in a model how to map from a property in a source entity to a property in a destination entity.\n\n## Inherits From\n\n- NSObject\n\n## Conforms To\n\n- CVarArg\n- CustomDebugStringConvertible\n- CustomStringConvertible\n- Equatable\n- Hashable\n- NSObjectProtocol\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Sets up state information before the start of a given entity mapping.",
          "name" : "begin(_:with:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreData\/NSEntityMigrationPolicy\/begin(_:with:)"
        },
        {
          "description" : "Creates the destination instance(s) for a given source instance.",
          "name" : "createDestinationInstances(forSource:in:manager:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreData\/NSEntityMigrationPolicy\/createDestinationInstances(forSource:in:manager:)"
        },
        {
          "description" : "Indicates the end of the instance creation stage for the specified entity mapping, and the precursor to the next migration stage.",
          "name" : "endInstanceCreation(forMapping:manager:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreData\/NSEntityMigrationPolicy\/endInstanceCreation(forMapping:manager:)"
        },
        {
          "description" : "Constructs the relationships between the newly-created destination instances.",
          "name" : "createRelationships(forDestination:in:manager:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreData\/NSEntityMigrationPolicy\/createRelationships(forDestination:in:manager:)"
        },
        {
          "description" : "Indicates the end of the relationship creation stage for the specified entity mapping.",
          "name" : "endRelationshipCreation(forMapping:manager:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreData\/NSEntityMigrationPolicy\/endRelationshipCreation(forMapping:manager:)"
        },
        {
          "description" : "Provides the option to perform custom validation on migrated objects during the validation stage of the entity migration policy.",
          "name" : "performCustomValidation(forMapping:manager:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreData\/NSEntityMigrationPolicy\/performCustomValidation(forMapping:manager:)"
        },
        {
          "description" : "Performs cleanup at the end of the migration, from any phase of the mapping.",
          "name" : "end(_:manager:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreData\/NSEntityMigrationPolicy\/end(_:manager:)"
        }
      ],
      "title" : "Customizing Stages of the Mapping Life Cycle"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Key for the migration manager.",
          "name" : "NSMigrationManagerKey",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreData\/NSMigrationManagerKey"
        },
        {
          "description" : "Key for the source object.",
          "name" : "NSMigrationSourceObjectKey",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreData\/NSMigrationSourceObjectKey"
        },
        {
          "description" : "Key for the destination object.",
          "name" : "NSMigrationDestinationObjectKey",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreData\/NSMigrationDestinationObjectKey"
        },
        {
          "description" : "Key for the entity mapping object.",
          "name" : "NSMigrationEntityMappingKey",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreData\/NSMigrationEntityMappingKey"
        },
        {
          "description" : "Key for the property mapping object.",
          "name" : "NSMigrationPropertyMappingKey",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreData\/NSMigrationPropertyMappingKey"
        },
        {
          "description" : "Key for the entity migration policy object.",
          "name" : "NSMigrationEntityPolicyKey",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreData\/NSMigrationEntityPolicyKey"
        }
      ],
      "title" : "Constants"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "A migration manager instance that performs a migration of data from one persistent store to another using a given mapping model.",
          "name" : "NSMigrationManager",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreData\/NSMigrationManager"
        },
        {
          "description" : "A model instance that specifies how to map a model from a source to a destination managed object model.",
          "name" : "NSMappingModel",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreData\/NSMappingModel"
        },
        {
          "description" : "A mapping instance that specifies how to map an entity from a source to a destination managed object model.",
          "name" : "NSEntityMapping",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreData\/NSEntityMapping"
        },
        {
          "description" : "The types for mapping an entity between a source model and a destination model.",
          "name" : "NSEntityMappingType",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreData\/NSEntityMappingType"
        },
        {
          "description" : "A mapping instance that specifies in a model how to map from a property in a source entity to a property in a destination entity.",
          "name" : "NSPropertyMapping",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreData\/NSPropertyMapping"
        }
      ],
      "title" : "Entity Mapping"
    },
    {
      "content" : "",
      "items" : [
        {
          "name" : "NSObject"
        }
      ],
      "title" : "Inherits From"
    }
  ],
  "source" : "appleJSON",
  "title" : "NSEntityMigrationPolicy",
  "url" : "https:\/\/developer.apple.com\/documentation\/CoreData\/NSEntityMigrationPolicy"
}