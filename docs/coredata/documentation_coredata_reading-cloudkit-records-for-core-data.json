{
  "abstract" : "Access CloudKit records created from Core Data managed objects.",
  "codeExamples" : [
    {
      "code" : "<CKRecord: 0x7fbae9e19510; recordID=CD_Post_UUID:\n(com.apple.coredata.cloudkit.zone:__defaultOwner__), values={\n    \"CD_entityName\" = Post;\n}, recordType=CD_Post>",
      "language" : "swift"
    },
    {
      "code" : "<CKRecord: 0x7f9c9fe17780; recordID=CD_ImagePost_UUID:\n(com.apple.coredata.cloudkit.zone:__defaultOwner__), values={\n    \"CD_entityName\" = ImagePost;\n}, recordType=CD_Post>",
      "language" : "swift"
    },
    {
      "code" : "<CKRecord: 0x7f9c9fd0f870; recordID=CD_Post_UUID:\n(com.apple.coredata.cloudkit.zone:__defaultOwner__), values={\n    \"CD_content\" = \"An example core data string\";\n    \"CD_content_ckAsset\" = \"<CKAsset: 0x7f9c9fe1db50; \npath=\/var\/folders\/*\/C9EDC901-385B-4778-9D78-03E9C740AD89.fxd, \nUUID=C37985B7-F959-4174-AA93-C404F9DCC6A5>\";\n    \"CD_entityName\" = Post;\n    \"CD_title\" = \"An example core data string\";\n    \"CD_title_ckAsset\" = \"<CKAsset: 0x7f9c9fd10140; \npath=\/var\/folders\/*\/C7977A3A-623E-441E-9086-66F2F5B7B746.fxd, \nUUID=81800071-ECBD-46E1-B4F9-2F7168269497>\";\n}, recordType=CD_Post",
      "language" : "swift"
    },
    {
      "code" : "<CKRecord: 0x7f9ca1300f50; recordID=CD_Attachment_UUID:\n(com.apple.coredata.cloudkit.zone:__defaultOwner__), values={\n    \"CD_entityName\" = Attachment;\n    \"CD_imageData\" = \"CD_ImageData_UUID\";\n}, recordType=CD_Attachment>\n<CKRecord: 0x7f9c9fc18610; recordID=CD_ImageData_UUID:\n(com.apple.coredata.cloudkit.zone:__defaultOwner__), values={\n    \"CD_attachment\" = \"CD_Attachment_UUID\";\n    \"CD_entityName\" = ImageData;\n}, recordType=CD_ImageData>",
      "language" : "swift"
    },
    {
      "code" : "<CKRecord: 0x7f9ca1300f50; recordID=CD_Attachment_UUID:\n(com.apple.coredata.cloudkit.zone:__defaultOwner__), values={\n    \"CD_entityName\" = Attachment;\n    \"CD_post\" = \"CD_VideoPost_UUID\";\n}, recordType=CD_Attachment>",
      "language" : "swift"
    },
    {
      "code" : "<CKRecord: 0x7f9c9fd0f870; recordID=CD_Post_UUID:\n(com.apple.coredata.cloudkit.zone:__defaultOwner__), values={\n    \"CD_content\" = \"An example core data string\";\n    \"CD_content_ckAsset\" = \"<CKAsset: 0x7f9c9fe1db50; \npath=\/var\/folders\/*\/C9EDC901-385B-4778-9D78-03E9C740AD89.fxd, \nUUID=C37985B7-F959-4174-AA93-C404F9DCC6A5>\";\n    \"CD_entityName\" = Post;\n    \"CD_title\" = \"An example core data string\";\n    \"CD_title_ckAsset\" = \"<CKAsset: 0x7f9c9fd10140; \npath=\/var\/folders\/*\/C7977A3A-623E-441E-9086-66F2F5B7B746.fxd, \nUUID=81800071-ECBD-46E1-B4F9-2F7168269497>\";\n}, recordType=CD_Post>\n<CKRecord: 0x7f9ca10188d0; recordID=CD_Tag_UUID:\n(com.apple.coredata.cloudkit.zone:__defaultOwner__), values={\n    \"CD_color\" = {length = 17, bytes = 0x536f6d65206578616d706c652064617461};\n    \"CD_color_ckAsset\" = \"<CKAsset: 0x7f9c9fd07790; \npath=\/var\/folders\/*\/5D5DF5B2-DB27-4F01-B311-52A274374F59.fxd, \nUUID=787F4868-1F4D-4BF7-86D4-3867BEA65172>\";\n    \"CD_entityName\" = Tag;\n    \"CD_name\" = \"An example core data string\";\n    \"CD_name_ckAsset\" = \"<CKAsset: 0x7f9ca1300af0; \npath=\/var\/folders\/*\/C40A1E1F-C2F5-4BA1-A6ED-F5977301A1F7.fxd, \nUUID=A4C4B698-55FC-4C87-BA8A-D6DD0011DD90>\";\n    \"CD_uuid\" = \"51BAFD98-D1F7-472F-95D6-BBF40D7CBD75\";\n}, recordType=CD_Tag>",
      "language" : "swift"
    },
    {
      "code" : "<CKRecord: 0x7f9ca1301780; recordID=EE64F478-A761-4049-B559-853457ABA997:\n(com.apple.coredata.cloudkit.zone:__defaultOwner__), values={\n    \"CD_entityNames\" = \"Post:Tag\";\n    \"CD_recordNames\" = \"CD_Post_UUID:CD_Tag_UUID\";\n    \"CD_relationships\" = \"tags:posts\";\n}, recordType=CDMR>",
      "language" : "swift"
    }
  ],
  "contentHash" : "11410a662eea6ab08bb4bd01de16fb6c935959dd1810c6b7d3d65d9fa41d2e0f",
  "crawledAt" : "2025-12-02T18:31:12Z",
  "id" : "F141C3FD-96D5-473E-ABA8-FB26A52950EF",
  "kind" : "article",
  "language" : "swift",
  "module" : "Core Data",
  "overview" : "## Overview\n\nAlthough your Core Data app interacts primarily with managed objects, you can access a managed object’s [doc:\/\/com.apple.documentation\/documentation\/CloudKit\/CKRecord] directly. This is useful if you’re leveraging CloudKit to add features like sharing. You can also use [doc:\/\/com.apple.documentation\/documentation\/CloudKitJS] to access CloudKit records from your web app.\n\nTo prevent collision with existing CloudKit record types and reserved names, CloudKit prefixes the [doc:\/\/com.apple.documentation\/documentation\/CloudKit\/CKRecord] types and fields it creates for your Core Data entities with `CD_`.\n\nTo work with records directly, you need to understand the mappings between entities and record types, attributes and fields, and the ways a record stores relationships.\n\n### Read Entities from Record Types\n\nCloudKit doesn’t typically support inheritance, so it provides only a single system field, [doc:\/\/com.apple.documentation\/documentation\/CloudKit\/CKRecord\/recordType-6v7au], to hold type information. Core Data stores the name of the *root entity* from the inheritance hierarchy in [doc:\/\/com.apple.documentation\/documentation\/CloudKit\/CKRecord\/recordType-6v7au].\n\nWhen you initialize a schema, Core Data adds a custom field to the record type, `CD_entityName`, to store the name of the *current entity*.\n\n\n\nFor example, an entity named `Post` generates the following structure (before adding its attributes), with its `CD_entityName` set to `Post`, and its `recordType` set to `CD_Post`.\n\nConsider a second entity, `ImagePost`, that inherits from Post.\n\n\n\n`ImagePost` generates the following structure (before adding its attributes), with its `CD_entityName` set to `ImagePost`, and its `recordType` set to `CD_Post`.\n\nQuery against [doc:\/\/com.apple.documentation\/documentation\/cloudkit\/ckrecord\/1462206-recordtype] when searching against an entity’s inheritance hierarchy. Query against `CD_entityName` when searching for instances of a specific type.\n\nFor more information about CloudKit queries, see [doc:\/\/com.apple.documentation\/documentation\/CloudKit\/CKQuery].\n\n### Read Attributes from Fields\n\nWhen you initialize a schema, Core Data creates fields for each of an entity’s attributes, mapping the attribute name to a field with a key in the form `CD_[attribute.name]`. The field’s type may vary between Core Data and CloudKit.\n\nAll variable length attribute types—String, Binary Data, and Transformable—generate an additional field with a key in the form `CD_[attribute.name]_ckAsset`. If a field’s value grows too large to store within the record size limit of 1MB, Core Data automatically converts the value to an external asset. Core Data transitions between the original field and its asset counterpart transparently during serialization. When inspecting a CloudKit record directly, check the length of the original field’s value; if it is zero, look in the asset field.\n\n\n\nFor example, an entity named `Post` with String `content` and `title` attributes would generate the following fully materialized record, with pairs of fields for `CD_content and` `CD_content_ckAsset`, and for `CD_title` and `CD_title_ckAsset`.\n\n### Read One-to-One Relationships from Fields\n\nOne-to-one relationships store foreign keys in both related records, mapping the relationship name to a field with a key in the form `CD_[relationship.name]`. This field stores the foreign key of the related object in the form `CKRecord.recordID.recordName`.\n\nFor example, consider a one-to-one relationship between an `ImageData` entity and an `Attachment` entity. In Core Data, the `Attachment` has an `imageData` relationship, and the `ImageData` has an `attachment` relationship.\n\n\n\nThis one-to-one relationship between `ImageData` and `Attachment` would generate the following CloudKit records.\n\nThe `CD_imageData` field on the `CD_Attachment` contains the foreign key of the image, and the `CD_attachment` field on the `CD_ImageData` contains the foreign key of the attachment.\n\n### Read One-to-Many Relationships from Fields\n\nOne-to-many relationships store a foreign key on each record on the many side of the relationship, mapping the relationship name to a field with a key in the form `CD_[relationship name]`. This field stores the foreign key of the related object in the form `CKRecord.recordID.recordName`.\n\n\n\nFor example, a one-to-many relationship between a single `Post` and multiple `Attachment` instances would generate multiple `CD_Attachment` records. Each record contains the foreign key of the `Post` it belongs to in their `CD_post` field.\n\nGenerated `Post` records don’t contain a reference to their attachments.\n\n### Read Many-to-Many Relationships from CDMR Records\n\nMany-to-many relationships model the join table using a custom Core Data Mirrored Relationship (CDMR) record type.\n\nCloudKit doesn’t support the notion of a join, and it’s inefficient to encode arrays on both records and keep them in sync. Instead, Core Data constructs a CDMR record to accurately and succintly capture all of the criteria of the join.\n\nCDMR records have the following fields.\n\nFor example, consider a many-to-many relationship between `Tag` and `Post` entities.\n\n\n\nThe individual `Tag` and `Post` records don’t contain fields for the relationship.\n\nThe relationship between any two `Tag` and `Post` records exists in a third CDMR record. The CDMR record describes the entity type, record name, and Core Data relationship between the `Tag` and `Post`.\n\nThe structure of a CDMR record is carefully designed to occupy the minimum necessary footprint, and to require the least effort to decode and work with, making it usable outside the Core Data framework.\n\n### Access CloudKit Objects\n\nYou can access a managed object’s [doc:\/\/com.apple.documentation\/documentation\/CloudKit\/CKRecord] directly through its associated context using `record(for:)` for a single record, or `records(for:)` for multiple records. To retrieve the record ID only, use `recordID(for:)`, or `recordIDs(for:)`.\n\nAlternatively, use the class functions [doc:\/\/com.apple.coredata\/documentation\/CoreData\/NSPersistentCloudKitContainer\/recordForManagedObjectID:], [doc:\/\/com.apple.coredata\/documentation\/CoreData\/NSPersistentCloudKitContainer\/recordsForManagedObjectIDs:], [doc:\/\/com.apple.coredata\/documentation\/CoreData\/NSPersistentCloudKitContainer\/recordIDForManagedObjectID:], and `recordIDs(for:)` on [doc:\/\/com.apple.coredata\/documentation\/CoreData\/NSPersistentCloudKitContainer].",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/CoreData\/reading-cloudkit-records-for-core-data\ncrawled: 2025-12-02T18:31:12Z\n---\n\n# Reading CloudKit Records for Core Data\n\n**Article**\n\nAccess CloudKit records created from Core Data managed objects.\n\n## Overview\n\nAlthough your Core Data app interacts primarily with managed objects, you can access a managed object’s [doc:\/\/com.apple.documentation\/documentation\/CloudKit\/CKRecord] directly. This is useful if you’re leveraging CloudKit to add features like sharing. You can also use [doc:\/\/com.apple.documentation\/documentation\/CloudKitJS] to access CloudKit records from your web app.\n\nTo prevent collision with existing CloudKit record types and reserved names, CloudKit prefixes the [doc:\/\/com.apple.documentation\/documentation\/CloudKit\/CKRecord] types and fields it creates for your Core Data entities with `CD_`.\n\nTo work with records directly, you need to understand the mappings between entities and record types, attributes and fields, and the ways a record stores relationships.\n\n\n\n### Read Entities from Record Types\n\nCloudKit doesn’t typically support inheritance, so it provides only a single system field, [doc:\/\/com.apple.documentation\/documentation\/CloudKit\/CKRecord\/recordType-6v7au], to hold type information. Core Data stores the name of the *root entity* from the inheritance hierarchy in [doc:\/\/com.apple.documentation\/documentation\/CloudKit\/CKRecord\/recordType-6v7au].\n\nWhen you initialize a schema, Core Data adds a custom field to the record type, `CD_entityName`, to store the name of the *current entity*.\n\n\n\nFor example, an entity named `Post` generates the following structure (before adding its attributes), with its `CD_entityName` set to `Post`, and its `recordType` set to `CD_Post`.\n\n```swift\n<CKRecord: 0x7fbae9e19510; recordID=CD_Post_UUID:\n(com.apple.coredata.cloudkit.zone:__defaultOwner__), values={\n    \"CD_entityName\" = Post;\n}, recordType=CD_Post>\n```\n\nConsider a second entity, `ImagePost`, that inherits from Post.\n\n\n\n`ImagePost` generates the following structure (before adding its attributes), with its `CD_entityName` set to `ImagePost`, and its `recordType` set to `CD_Post`.\n\n```swift\n<CKRecord: 0x7f9c9fe17780; recordID=CD_ImagePost_UUID:\n(com.apple.coredata.cloudkit.zone:__defaultOwner__), values={\n    \"CD_entityName\" = ImagePost;\n}, recordType=CD_Post>\n```\n\nQuery against [doc:\/\/com.apple.documentation\/documentation\/cloudkit\/ckrecord\/1462206-recordtype] when searching against an entity’s inheritance hierarchy. Query against `CD_entityName` when searching for instances of a specific type.\n\nFor more information about CloudKit queries, see [doc:\/\/com.apple.documentation\/documentation\/CloudKit\/CKQuery].\n\n### Read Attributes from Fields\n\nWhen you initialize a schema, Core Data creates fields for each of an entity’s attributes, mapping the attribute name to a field with a key in the form `CD_[attribute.name]`. The field’s type may vary between Core Data and CloudKit.\n\n\n\nAll variable length attribute types—String, Binary Data, and Transformable—generate an additional field with a key in the form `CD_[attribute.name]_ckAsset`. If a field’s value grows too large to store within the record size limit of 1MB, Core Data automatically converts the value to an external asset. Core Data transitions between the original field and its asset counterpart transparently during serialization. When inspecting a CloudKit record directly, check the length of the original field’s value; if it is zero, look in the asset field.\n\n\n\nFor example, an entity named `Post` with String `content` and `title` attributes would generate the following fully materialized record, with pairs of fields for `CD_content and` `CD_content_ckAsset`, and for `CD_title` and `CD_title_ckAsset`.\n\n```swift\n<CKRecord: 0x7f9c9fd0f870; recordID=CD_Post_UUID:\n(com.apple.coredata.cloudkit.zone:__defaultOwner__), values={\n    \"CD_content\" = \"An example core data string\";\n    \"CD_content_ckAsset\" = \"<CKAsset: 0x7f9c9fe1db50; \npath=\/var\/folders\/*\/C9EDC901-385B-4778-9D78-03E9C740AD89.fxd, \nUUID=C37985B7-F959-4174-AA93-C404F9DCC6A5>\";\n    \"CD_entityName\" = Post;\n    \"CD_title\" = \"An example core data string\";\n    \"CD_title_ckAsset\" = \"<CKAsset: 0x7f9c9fd10140; \npath=\/var\/folders\/*\/C7977A3A-623E-441E-9086-66F2F5B7B746.fxd, \nUUID=81800071-ECBD-46E1-B4F9-2F7168269497>\";\n}, recordType=CD_Post\n```\n\n### Read One-to-One Relationships from Fields\n\nOne-to-one relationships store foreign keys in both related records, mapping the relationship name to a field with a key in the form `CD_[relationship.name]`. This field stores the foreign key of the related object in the form `CKRecord.recordID.recordName`.\n\nFor example, consider a one-to-one relationship between an `ImageData` entity and an `Attachment` entity. In Core Data, the `Attachment` has an `imageData` relationship, and the `ImageData` has an `attachment` relationship.\n\n\n\nThis one-to-one relationship between `ImageData` and `Attachment` would generate the following CloudKit records.\n\n```swift\n<CKRecord: 0x7f9ca1300f50; recordID=CD_Attachment_UUID:\n(com.apple.coredata.cloudkit.zone:__defaultOwner__), values={\n    \"CD_entityName\" = Attachment;\n    \"CD_imageData\" = \"CD_ImageData_UUID\";\n}, recordType=CD_Attachment>\n<CKRecord: 0x7f9c9fc18610; recordID=CD_ImageData_UUID:\n(com.apple.coredata.cloudkit.zone:__defaultOwner__), values={\n    \"CD_attachment\" = \"CD_Attachment_UUID\";\n    \"CD_entityName\" = ImageData;\n}, recordType=CD_ImageData>\n```\n\nThe `CD_imageData` field on the `CD_Attachment` contains the foreign key of the image, and the `CD_attachment` field on the `CD_ImageData` contains the foreign key of the attachment.\n\n### Read One-to-Many Relationships from Fields\n\nOne-to-many relationships store a foreign key on each record on the many side of the relationship, mapping the relationship name to a field with a key in the form `CD_[relationship name]`. This field stores the foreign key of the related object in the form `CKRecord.recordID.recordName`.\n\n\n\nFor example, a one-to-many relationship between a single `Post` and multiple `Attachment` instances would generate multiple `CD_Attachment` records. Each record contains the foreign key of the `Post` it belongs to in their `CD_post` field.\n\n```swift\n<CKRecord: 0x7f9ca1300f50; recordID=CD_Attachment_UUID:\n(com.apple.coredata.cloudkit.zone:__defaultOwner__), values={\n    \"CD_entityName\" = Attachment;\n    \"CD_post\" = \"CD_VideoPost_UUID\";\n}, recordType=CD_Attachment>\n```\n\nGenerated `Post` records don’t contain a reference to their attachments.\n\n### Read Many-to-Many Relationships from CDMR Records\n\nMany-to-many relationships model the join table using a custom Core Data Mirrored Relationship (CDMR) record type.\n\nCloudKit doesn’t support the notion of a join, and it’s inefficient to encode arrays on both records and keep them in sync. Instead, Core Data constructs a CDMR record to accurately and succintly capture all of the criteria of the join.\n\nCDMR records have the following fields.\n\n\n\nFor example, consider a many-to-many relationship between `Tag` and `Post` entities.\n\n\n\nThe individual `Tag` and `Post` records don’t contain fields for the relationship.\n\n```swift\n<CKRecord: 0x7f9c9fd0f870; recordID=CD_Post_UUID:\n(com.apple.coredata.cloudkit.zone:__defaultOwner__), values={\n    \"CD_content\" = \"An example core data string\";\n    \"CD_content_ckAsset\" = \"<CKAsset: 0x7f9c9fe1db50; \npath=\/var\/folders\/*\/C9EDC901-385B-4778-9D78-03E9C740AD89.fxd, \nUUID=C37985B7-F959-4174-AA93-C404F9DCC6A5>\";\n    \"CD_entityName\" = Post;\n    \"CD_title\" = \"An example core data string\";\n    \"CD_title_ckAsset\" = \"<CKAsset: 0x7f9c9fd10140; \npath=\/var\/folders\/*\/C7977A3A-623E-441E-9086-66F2F5B7B746.fxd, \nUUID=81800071-ECBD-46E1-B4F9-2F7168269497>\";\n}, recordType=CD_Post>\n<CKRecord: 0x7f9ca10188d0; recordID=CD_Tag_UUID:\n(com.apple.coredata.cloudkit.zone:__defaultOwner__), values={\n    \"CD_color\" = {length = 17, bytes = 0x536f6d65206578616d706c652064617461};\n    \"CD_color_ckAsset\" = \"<CKAsset: 0x7f9c9fd07790; \npath=\/var\/folders\/*\/5D5DF5B2-DB27-4F01-B311-52A274374F59.fxd, \nUUID=787F4868-1F4D-4BF7-86D4-3867BEA65172>\";\n    \"CD_entityName\" = Tag;\n    \"CD_name\" = \"An example core data string\";\n    \"CD_name_ckAsset\" = \"<CKAsset: 0x7f9ca1300af0; \npath=\/var\/folders\/*\/C40A1E1F-C2F5-4BA1-A6ED-F5977301A1F7.fxd, \nUUID=A4C4B698-55FC-4C87-BA8A-D6DD0011DD90>\";\n    \"CD_uuid\" = \"51BAFD98-D1F7-472F-95D6-BBF40D7CBD75\";\n}, recordType=CD_Tag>\n```\n\nThe relationship between any two `Tag` and `Post` records exists in a third CDMR record. The CDMR record describes the entity type, record name, and Core Data relationship between the `Tag` and `Post`.\n\n```swift\n<CKRecord: 0x7f9ca1301780; recordID=EE64F478-A761-4049-B559-853457ABA997:\n(com.apple.coredata.cloudkit.zone:__defaultOwner__), values={\n    \"CD_entityNames\" = \"Post:Tag\";\n    \"CD_recordNames\" = \"CD_Post_UUID:CD_Tag_UUID\";\n    \"CD_relationships\" = \"tags:posts\";\n}, recordType=CDMR>\n```\n\nThe structure of a CDMR record is carefully designed to occupy the minimum necessary footprint, and to require the least effort to decode and work with, making it usable outside the Core Data framework.\n\n### Access CloudKit Objects\n\nYou can access a managed object’s [doc:\/\/com.apple.documentation\/documentation\/CloudKit\/CKRecord] directly through its associated context using `record(for:)` for a single record, or `records(for:)` for multiple records. To retrieve the record ID only, use `recordID(for:)`, or `recordIDs(for:)`.\n\nAlternatively, use the class functions [doc:\/\/com.apple.coredata\/documentation\/CoreData\/NSPersistentCloudKitContainer\/recordForManagedObjectID:], [doc:\/\/com.apple.coredata\/documentation\/CoreData\/NSPersistentCloudKitContainer\/recordsForManagedObjectIDs:], [doc:\/\/com.apple.coredata\/documentation\/CoreData\/NSPersistentCloudKitContainer\/recordIDForManagedObjectID:], and `recordIDs(for:)` on [doc:\/\/com.apple.coredata\/documentation\/CoreData\/NSPersistentCloudKitContainer].\n\n## Configuring CloudKit Mirroring\n\n- **Setting Up Core Data with CloudKit**: Set up the classes and capabilities that sync your store to CloudKit.\n- **Creating a Core Data Model for CloudKit**: Design a CloudKit-compatible data model and initialize your CloudKit schema.\n- **Syncing a Core Data Store with CloudKit**: Synchronize objects between devices, and handle store changes in the user interface.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Set up the classes and capabilities that sync your store to CloudKit.",
          "name" : "Setting Up Core Data with CloudKit",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreData\/setting-up-core-data-with-cloudkit"
        },
        {
          "description" : "Design a CloudKit-compatible data model and initialize your CloudKit schema.",
          "name" : "Creating a Core Data Model for CloudKit",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreData\/creating-a-core-data-model-for-cloudkit"
        },
        {
          "description" : "Synchronize objects between devices, and handle store changes in the user interface.",
          "name" : "Syncing a Core Data Store with CloudKit",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreData\/syncing-a-core-data-store-with-cloudkit"
        }
      ],
      "title" : "Configuring CloudKit Mirroring"
    }
  ],
  "source" : "appleJSON",
  "title" : "Reading CloudKit Records for Core Data",
  "url" : "https:\/\/developer.apple.com\/documentation\/CoreData\/reading-cloudkit-records-for-core-data"
}