{
  "abstract" : "Adapt your app to use UIKit’s application and scene delegates so it can process CloudKit share invitations.",
  "codeExamples" : [
    {
      "code" : "class SceneDelegate: UIResponder, UIWindowSceneDelegate {\n    func windowScene(_ windowScene: UIWindowScene,\n        userDidAcceptCloudKitShareWith cloudKitShareMetadata: CKShare.Metadata) {\n        \n        let stack = CoreDataStack.shared\n\n        \/\/ Get references to the app's persistent container \n        \/\/ and shared persistent store.\n        let container = stack.persistentContainer\n        let store = stack.sharedPersistentStore\n\n        \/\/ Tell the container to accept the specified share, adding\n        \/\/ the shared objects to the shared persistent store.\n       container.acceptShareInvitations(from: [cloudKitShareMetadata],\n                                        into: store,\n                                        completion: nil)\n    }\n}",
      "language" : "swift"
    },
    {
      "code" : "class AppDelegate: UIResponder, UIApplicationDelegate {\n    func application(_ application: UIApplication, configurationForConnecting\n        connectingSceneSession: UISceneSession,\n        options: UIScene.ConnectionOptions) -> UISceneConfiguration {\n\n        \/\/ Create a scene configuration object for the\n        \/\/ specified session role.\n        let config = UISceneConfiguration(name: nil,\n            sessionRole: connectingSceneSession.role)\n\n        \/\/ Set the configuration's delegate class to the\n        \/\/ scene delegate that implements the share\n        \/\/ acceptance method.\n        config.delegateClass = SceneDelegate.self\n\n        return config\n    }\n}",
      "language" : "swift"
    },
    {
      "code" : "@main\nstruct SharingExample: App {\n    \/\/ Instruct SwiftUI to use the custom AppDelegate class \n    \/\/ as the app's application delegate.\n    @UIApplicationDelegateAdaptor var appDelegate: AppDelegate\n\n    var body: some Scene {\n        WindowGroup {\n            ContentView()\n                .environment(\\.managedObjectContext,\n                    CoreDataStack.shared.persistentContainer.viewContext)\n        }\n    }\n}",
      "language" : "swift"
    }
  ],
  "contentHash" : "27677fb07662b2fdb4dae46c61249bf97c8f8e8edaa182f5ee801a6e46358fdc",
  "crawledAt" : "2025-12-02T18:31:15Z",
  "id" : "67549B73-36BF-4FE9-A048-6A26D6CB74E5",
  "kind" : "article",
  "language" : "swift",
  "module" : "Core Data",
  "overview" : "## Overview\n\nWhen the user accepts an invitation to participate in a CloudKit share, the system passes that share’s metadata to your app’s scene delegate for processing. To receive this metadata in a SwiftUI app:\n\n### Add a Scene Delegate to Process Share Invitations\n\nIn response to the user accepting a CloudKit share invitation, the system routes that action, for processing, to the delegate of the app’s active scene. SwiftUI apps don’t contain a scene delegate by default, but you can add one, and use it to implement the [doc:\/\/com.apple.documentation\/documentation\/UIKit\/UIWindowSceneDelegate\/windowScene(_:userDidAcceptCloudKitShareWith:)] method. Your implementation is responsible for passing the provided share metadata to your app’s persistent container for processing.\n\nTo create the scene delegate, right-click your project in Xcode’s Project navigator and select New File. Choose the Swift File template and name the file `SceneDelegate.swift`. Open the new file in Xcode’s source editor and define the `SceneDelegate` class as a subclass of [doc:\/\/com.apple.documentation\/documentation\/UIKit\/UIResponder] that adopts the [doc:\/\/com.apple.documentation\/documentation\/UIKit\/UIWindowSceneDelegate] protocol. Within this class, add your implementation of [doc:\/\/com.apple.documentation\/documentation\/UIKit\/UIWindowSceneDelegate\/windowScene(_:userDidAcceptCloudKitShareWith:)], as shown in the following example.\n\nThe example above uses a `CoreDataStack` object that manages the initialization of the persistent container, and the private and shared persistent stores. For a reference implementation, see the sample code project [doc:\/\/com.apple.coredata\/documentation\/CoreData\/synchronizing-a-local-store-to-the-cloud].\n\n### Add an Application Delegate to Configure New Scenes\n\nBefore an app connects a new scene, the system asks the application delegate to provide the configuration for the new scene, including the class to use as its own delegate. By providing this configuration, your app can use your custom delegate implementation and correctly process accepted CloudKit share invitations. Because SwiftUI apps don’t include an application delegate, you need to add one to your app’s target.\n\nRight-click your project in Xcode’s Project navigator and select New File. Choose the Swift File template and name the file `AppDelegate.swift`. Open the new file in Xcode’s source editor and add the following code, which configures each new scene to use the custom `SceneDelegate` class from the previous section.\n\nFor more information on scene configuration, see [doc:\/\/com.apple.documentation\/documentation\/UIKit\/UIApplicationDelegate\/application(_:configurationForConnecting:options:)].\n\n### Modify Your App to Utilize the Application Delegate\n\nAfter you add the scene and application delegates to your app’s target, use the [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/UIApplicationDelegateAdaptor] property wrapper to instruct your app’s top-level object — the structure that adopts SwiftUI’s [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/App] protocol — to initialize and manage an instance of the application delegate at runtime, as shown in the following example.\n\nWith this change in place, whenever the user accepts a CloudKit share invitation, SwiftUI notifies the active scene’s delegate where you can process the accepted invitation accordingly.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/CoreData\/accepting-share-invitations-in-a-swiftui-app\ncrawled: 2025-12-02T18:31:15Z\n---\n\n# Accepting Share Invitations in a SwiftUI App\n\n**Article**\n\nAdapt your app to use UIKit’s application and scene delegates so it can process CloudKit share invitations.\n\n## Overview\n\nWhen the user accepts an invitation to participate in a CloudKit share, the system passes that share’s metadata to your app’s scene delegate for processing. To receive this metadata in a SwiftUI app:\n\n1. Add a scene delegate — an object that conforms to [doc:\/\/com.apple.documentation\/documentation\/UIKit\/UIWindowSceneDelegate] — that’s responsible for passing the accepted share metadata to your app’s persistent container.\n2. Add an application delegate — an object that conforms to [doc:\/\/com.apple.documentation\/documentation\/UIKit\/UIApplicationDelegate] — that configures new scenes to use your custom scene delegate class.\n3. Modify your app’s [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/App] structure to use [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/UIApplicationDelegateAdaptor] to initialize and manage an application delegate at runtime.\n\n### Add a Scene Delegate to Process Share Invitations\n\nIn response to the user accepting a CloudKit share invitation, the system routes that action, for processing, to the delegate of the app’s active scene. SwiftUI apps don’t contain a scene delegate by default, but you can add one, and use it to implement the [doc:\/\/com.apple.documentation\/documentation\/UIKit\/UIWindowSceneDelegate\/windowScene(_:userDidAcceptCloudKitShareWith:)] method. Your implementation is responsible for passing the provided share metadata to your app’s persistent container for processing.\n\nTo create the scene delegate, right-click your project in Xcode’s Project navigator and select New File. Choose the Swift File template and name the file `SceneDelegate.swift`. Open the new file in Xcode’s source editor and define the `SceneDelegate` class as a subclass of [doc:\/\/com.apple.documentation\/documentation\/UIKit\/UIResponder] that adopts the [doc:\/\/com.apple.documentation\/documentation\/UIKit\/UIWindowSceneDelegate] protocol. Within this class, add your implementation of [doc:\/\/com.apple.documentation\/documentation\/UIKit\/UIWindowSceneDelegate\/windowScene(_:userDidAcceptCloudKitShareWith:)], as shown in the following example.\n\n```swift\nclass SceneDelegate: UIResponder, UIWindowSceneDelegate {\n    func windowScene(_ windowScene: UIWindowScene,\n        userDidAcceptCloudKitShareWith cloudKitShareMetadata: CKShare.Metadata) {\n        \n        let stack = CoreDataStack.shared\n\n        \/\/ Get references to the app's persistent container \n        \/\/ and shared persistent store.\n        let container = stack.persistentContainer\n        let store = stack.sharedPersistentStore\n\n        \/\/ Tell the container to accept the specified share, adding\n        \/\/ the shared objects to the shared persistent store.\n       container.acceptShareInvitations(from: [cloudKitShareMetadata],\n                                        into: store,\n                                        completion: nil)\n    }\n}\n```\n\nThe example above uses a `CoreDataStack` object that manages the initialization of the persistent container, and the private and shared persistent stores. For a reference implementation, see the sample code project [doc:\/\/com.apple.coredata\/documentation\/CoreData\/synchronizing-a-local-store-to-the-cloud].\n\n### Add an Application Delegate to Configure New Scenes\n\nBefore an app connects a new scene, the system asks the application delegate to provide the configuration for the new scene, including the class to use as its own delegate. By providing this configuration, your app can use your custom delegate implementation and correctly process accepted CloudKit share invitations. Because SwiftUI apps don’t include an application delegate, you need to add one to your app’s target.\n\nRight-click your project in Xcode’s Project navigator and select New File. Choose the Swift File template and name the file `AppDelegate.swift`. Open the new file in Xcode’s source editor and add the following code, which configures each new scene to use the custom `SceneDelegate` class from the previous section.\n\n```swift\nclass AppDelegate: UIResponder, UIApplicationDelegate {\n    func application(_ application: UIApplication, configurationForConnecting\n        connectingSceneSession: UISceneSession,\n        options: UIScene.ConnectionOptions) -> UISceneConfiguration {\n\n        \/\/ Create a scene configuration object for the\n        \/\/ specified session role.\n        let config = UISceneConfiguration(name: nil,\n            sessionRole: connectingSceneSession.role)\n\n        \/\/ Set the configuration's delegate class to the\n        \/\/ scene delegate that implements the share\n        \/\/ acceptance method.\n        config.delegateClass = SceneDelegate.self\n\n        return config\n    }\n}\n```\n\nFor more information on scene configuration, see [doc:\/\/com.apple.documentation\/documentation\/UIKit\/UIApplicationDelegate\/application(_:configurationForConnecting:options:)].\n\n### Modify Your App to Utilize the Application Delegate\n\nAfter you add the scene and application delegates to your app’s target, use the [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/UIApplicationDelegateAdaptor] property wrapper to instruct your app’s top-level object — the structure that adopts SwiftUI’s [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/App] protocol — to initialize and manage an instance of the application delegate at runtime, as shown in the following example.\n\n```swift\n@main\nstruct SharingExample: App {\n    \/\/ Instruct SwiftUI to use the custom AppDelegate class \n    \/\/ as the app's application delegate.\n    @UIApplicationDelegateAdaptor var appDelegate: AppDelegate\n\n    var body: some Scene {\n        WindowGroup {\n            ContentView()\n                .environment(\\.managedObjectContext,\n                    CoreDataStack.shared.persistentContainer.viewContext)\n        }\n    }\n}\n```\n\nWith this change in place, whenever the user accepts a CloudKit share invitation, SwiftUI notifies the active scene’s delegate where you can process the accepted invitation accordingly.\n\n## Sharing Objects\n\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [

      ],
      "title" : "Sharing Objects"
    }
  ],
  "source" : "appleJSON",
  "title" : "Accepting Share Invitations in a SwiftUI App",
  "url" : "https:\/\/developer.apple.com\/documentation\/CoreData\/accepting-share-invitations-in-a-swiftui-app"
}