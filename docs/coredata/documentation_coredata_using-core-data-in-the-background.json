{
  "abstract" : "Use Core Data in both a single-threaded and multithreaded app.",
  "codeExamples" : [
    {
      "code" : "\/\/ Create a private queue context.\nlet context = NSManagedObjectContext(.privateQueue)",
      "language" : "swift"
    }
  ],
  "contentHash" : "5abe21ef5b0fbf4a9c8279ab5adcf159e4dc993c9ebf92938bb7dca844cd6885",
  "crawledAt" : "2025-12-06T03:05:02Z",
  "id" : "1C75B657-BC0C-48CA-8FD3-4EC348A5D939",
  "kind" : "article",
  "language" : "swift",
  "module" : "Core Data",
  "overview" : "## Overview\n\nCore Data works in a multithreaded environment. However, not every object under the Core Data framework is thread safe. To use Core Data in a multithreaded environment, ensure that:\n\n### Comparing Main Queue and Private Queue Contexts\n\nThere are two types of managed object contexts: main queue and private queue. You define the type of context when you initialize it.\n\nA main queue context (as defined by a [doc:\/\/com.apple.coredata\/documentation\/CoreData\/NSManagedObjectContextConcurrencyType\/mainQueueConcurrencyType]) is specifically for use with your application interface. Only use it on the main queue of your app.\n\nA private queue context (as defined by a [doc:\/\/com.apple.coredata\/documentation\/CoreData\/NSManagedObjectContextConcurrencyType\/privateQueueConcurrencyType]) creates its own queue upon initialization. Only use it on that queue. Because the queue is private and internal to the [doc:\/\/com.apple.coredata\/documentation\/CoreData\/NSManagedObjectContext] instance, you can only access it through the [doc:\/\/com.apple.coredata\/documentation\/CoreData\/NSManagedObjectContext\/perform(_:)] and the [doc:\/\/com.apple.coredata\/documentation\/CoreData\/NSManagedObjectContext\/performAndWait(_:)-ypye] methods.\n\n### Initializing and configuring a context\n\nUse [doc:\/\/com.apple.coredata\/documentation\/CoreData\/NSManagedObjectContext\/init(concurrencyType:)] to create a new context. For example, to create a private queue context:\n\nThe parameter you pass during initialization determines what type of [doc:\/\/com.apple.coredata\/documentation\/CoreData\/NSManagedObjectContext] you receive.\n\nWhen you use the [doc:\/\/com.apple.coredata\/documentation\/CoreData\/NSPersistentContainer], you configure the [doc:\/\/com.apple.coredata\/documentation\/CoreData\/NSPersistentContainer\/viewContext] property as a main queue ([doc:\/\/com.apple.coredata\/documentation\/CoreData\/NSManagedObjectContextConcurrencyType\/mainQueueConcurrencyType]) context, and configure the contexts associated with [doc:\/\/com.apple.coredata\/documentation\/CoreData\/NSPersistentContainer\/performBackgroundTask(_:)-39sch] and [doc:\/\/com.apple.coredata\/documentation\/CoreData\/NSPersistentContainer\/newBackgroundContext()] as a private queue ([doc:\/\/com.apple.coredata\/documentation\/CoreData\/NSManagedObjectContextConcurrencyType\/privateQueueConcurrencyType]).\n\n### Avoiding problems\n\n**In general, avoid doing data processing on the main queue that’s not user-related.** Data processing can be CPU-intensive, and if it’s performed on the main queue, it can result in unresponsiveness in the user interface. If your application processes data, such as importing data into Core Data from JSON, create a private queue context and perform the import on the private context.\n\n**Don’t pass managed object instances between queues.** Doing so can result in corruption of the data and termination of the app. When it’s necessary to hand off a managed object reference from one queue to another, use [doc:\/\/com.apple.coredata\/documentation\/CoreData\/NSManagedObjectID] instances.\n\nYou retrieve the managed object ID of a managed object by calling the `objectID` accessor on the [doc:\/\/com.apple.coredata\/documentation\/CoreData\/NSManagedObject] instance.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/CoreData\/using-core-data-in-the-background\ncrawled: 2025-12-06T03:05:02Z\n---\n\n# Using Core Data in the background\n\n**Article**\n\nUse Core Data in both a single-threaded and multithreaded app.\n\n## Overview\n\nCore Data works in a multithreaded environment. However, not every object under the Core Data framework is thread safe. To use Core Data in a multithreaded environment, ensure that:\n\n- Bind managed object contexts to the thread (queue) that they’re initialization on.\n- Bind managed objects that you retrieve from a context to the same queue as the context.\n\n### Comparing Main Queue and Private Queue Contexts\n\nThere are two types of managed object contexts: main queue and private queue. You define the type of context when you initialize it.\n\nA main queue context (as defined by a [doc:\/\/com.apple.coredata\/documentation\/CoreData\/NSManagedObjectContextConcurrencyType\/mainQueueConcurrencyType]) is specifically for use with your application interface. Only use it on the main queue of your app.\n\nA private queue context (as defined by a [doc:\/\/com.apple.coredata\/documentation\/CoreData\/NSManagedObjectContextConcurrencyType\/privateQueueConcurrencyType]) creates its own queue upon initialization. Only use it on that queue. Because the queue is private and internal to the [doc:\/\/com.apple.coredata\/documentation\/CoreData\/NSManagedObjectContext] instance, you can only access it through the [doc:\/\/com.apple.coredata\/documentation\/CoreData\/NSManagedObjectContext\/perform(_:)] and the [doc:\/\/com.apple.coredata\/documentation\/CoreData\/NSManagedObjectContext\/performAndWait(_:)-ypye] methods.\n\n### Initializing and configuring a context\n\nUse [doc:\/\/com.apple.coredata\/documentation\/CoreData\/NSManagedObjectContext\/init(concurrencyType:)] to create a new context. For example, to create a private queue context:\n\n```swift\n\/\/ Create a private queue context.\nlet context = NSManagedObjectContext(.privateQueue)\n```\n\nThe parameter you pass during initialization determines what type of [doc:\/\/com.apple.coredata\/documentation\/CoreData\/NSManagedObjectContext] you receive.\n\nWhen you use the [doc:\/\/com.apple.coredata\/documentation\/CoreData\/NSPersistentContainer], you configure the [doc:\/\/com.apple.coredata\/documentation\/CoreData\/NSPersistentContainer\/viewContext] property as a main queue ([doc:\/\/com.apple.coredata\/documentation\/CoreData\/NSManagedObjectContextConcurrencyType\/mainQueueConcurrencyType]) context, and configure the contexts associated with [doc:\/\/com.apple.coredata\/documentation\/CoreData\/NSPersistentContainer\/performBackgroundTask(_:)-39sch] and [doc:\/\/com.apple.coredata\/documentation\/CoreData\/NSPersistentContainer\/newBackgroundContext()] as a private queue ([doc:\/\/com.apple.coredata\/documentation\/CoreData\/NSManagedObjectContextConcurrencyType\/privateQueueConcurrencyType]).\n\n### Avoiding problems\n\n**In general, avoid doing data processing on the main queue that’s not user-related.** Data processing can be CPU-intensive, and if it’s performed on the main queue, it can result in unresponsiveness in the user interface. If your application processes data, such as importing data into Core Data from JSON, create a private queue context and perform the import on the private context.\n\n**Don’t pass managed object instances between queues.** Doing so can result in corruption of the data and termination of the app. When it’s necessary to hand off a managed object reference from one queue to another, use [doc:\/\/com.apple.coredata\/documentation\/CoreData\/NSManagedObjectID] instances.\n\nYou retrieve the managed object ID of a managed object by calling the `objectID` accessor on the [doc:\/\/com.apple.coredata\/documentation\/CoreData\/NSManagedObject] instance.\n\n## Background tasks\n\n- **Loading and displaying a large data feed**: Consume data in the background, and lower memory use by batching imports and preventing duplicate records.\n- **Conflict resolution**: Detect and resolve conflicts that occur when data is changed on multiple threads.\n- **Batch processing**: Use batch processes to manage large data changes.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Consume data in the background, and lower memory use by batching imports and preventing duplicate records.",
          "name" : "Loading and displaying a large data feed",
          "url" : "https:\/\/developer.apple.com\/documentation\/SwiftUI\/loading-and-displaying-a-large-data-feed"
        },
        {
          "description" : "Detect and resolve conflicts that occur when data is changed on multiple threads.",
          "name" : "Conflict resolution",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreData\/conflict-resolution"
        },
        {
          "description" : "Use batch processes to manage large data changes.",
          "name" : "Batch processing",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreData\/batch-processing"
        }
      ],
      "title" : "Background tasks"
    }
  ],
  "source" : "appleJSON",
  "title" : "Using Core Data in the background",
  "url" : "https:\/\/developer.apple.com\/documentation\/CoreData\/using-core-data-in-the-background"
}