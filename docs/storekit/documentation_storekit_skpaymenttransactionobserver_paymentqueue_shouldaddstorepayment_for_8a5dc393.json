{
  "abstract" : "Tells the observer when a user initiates an in-app purchase from the App Store.",
  "codeExamples" : [

  ],
  "contentHash" : "b8f598b5b63f325b8ddfb8027f4c3e13b0b259ea31e70d346af963d1b78e7ee7",
  "crawledAt" : "2025-12-02T20:23:45Z",
  "declaration" : {
    "code" : "optional func paymentQueue(_ queue: SKPaymentQueue, shouldAddStorePayment payment: SKPayment, for product: SKProduct) -> Bool",
    "language" : "swift"
  },
  "id" : "5C51EF5E-7ADB-4B29-A608-227205C0D4D4",
  "kind" : "method",
  "language" : "swift",
  "module" : "StoreKit",
  "overview" : "## Return Value\n\nReturn `true` to continue the transaction in your app.\n\n## Discussion\n\nReturn `false` to defer or cancel the transaction.\n\nIf you return `false`, you can continue the transaction later by manually adding the [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKPayment] `payment` to the [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKPaymentQueue] `queue`.\n\n## Discussion\n\nThe system calls this delegate method when the user starts an in-app purchase in the App Store, and the transaction continues in your app. Specifically, if your app is already installed, StoreKit calls this method automatically.\n\nIf your app isn’t installed when the user starts the in-app purchase in the App Store, the user receives a notification when the app installation is complete. StoreKit calls this method when the user taps the notification. Otherwise, if the user opens the app manually, StoreKit calls this method only if they open the app soon after they initiate the purchase.\n\nFor more information, see [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/promoting-in-app-purchases].",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "tvOS",
    "visionOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/StoreKit\/SKPaymentTransactionObserver\/paymentQueue(_:shouldAddStorePayment:for:)\ncrawled: 2025-12-02T20:23:45Z\n---\n\n# paymentQueue(_:shouldAddStorePayment:for:)\n\n**Instance Method**\n\nTells the observer when a user initiates an in-app purchase from the App Store.\n\n## Declaration\n\n```swift\noptional func paymentQueue(_ queue: SKPaymentQueue, shouldAddStorePayment payment: SKPayment, for product: SKProduct) -> Bool\n```\n\n## Parameters\n\n- **queue**: The payment queue the app uses to make the payment request.\n- **payment**: The payment request.\n- **product**: The in-app purchase product.\n\n## Return Value\n\nReturn `true` to continue the transaction in your app.\n\n## Discussion\n\nReturn `false` to defer or cancel the transaction.\n\nIf you return `false`, you can continue the transaction later by manually adding the [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKPayment] `payment` to the [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKPaymentQueue] `queue`.\n\n## Discussion\n\nThe system calls this delegate method when the user starts an in-app purchase in the App Store, and the transaction continues in your app. Specifically, if your app is already installed, StoreKit calls this method automatically.\n\nIf your app isn’t installed when the user starts the in-app purchase in the App Store, the user receives a notification when the app installation is complete. StoreKit calls this method when the user taps the notification. Otherwise, if the user opens the app manually, StoreKit calls this method only if they open the app soon after they initiate the purchase.\n\n\n\nFor more information, see [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/promoting-in-app-purchases].\n\n## Handling promoted in-app purchases\n\n- **Promoting In-App Purchases**: Show promoted In-App Purchases on your product page and handle purchases that customers initiate on the App Store.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Show promoted In-App Purchases on your product page and handle purchases that customers initiate on the App Store.",
          "name" : "Promoting In-App Purchases",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/promoting-in-app-purchases"
        }
      ],
      "title" : "Handling promoted in-app purchases"
    }
  ],
  "source" : "appleJSON",
  "title" : "paymentQueue(_:shouldAddStorePayment:for:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/SKPaymentTransactionObserver\/paymentQueue(_:shouldAddStorePayment:for:)"
}