{
  "abstract" : "Enables qualifying apps to offer custom links for external purchases and use alternative payment service providers.",
  "codeExamples" : [
    {
      "code" : "\/\/ Ensure the app is eligible to use the external purchase custom link API.\nguard await ExternalPurchaseCustomLink.isEligible else { return }\n\n\/\/ Declare the tokens and the token types.\nvar tokens: [String : String] = [:]\nlet tokenTypes = [\"ACQUISITION\", \"SERVICES\"]\n\n\/\/ Request the tokens.\nfor tokenType in tokenTypes {\n    do {\n        let token = try await ExternalPurchaseCustomLink.token(for: tokenType)\n        if let token {\n            tokens[tokenType] = token.value\n        }\n    }\n    catch {\n        \/\/ Failed to get a token of type `tokenType`.\n        \/\/ Add your code to handle errors.\n    }\n}\n\n\/\/ Add your code to manage the tokens, for example to associate them\n\/\/ with a customer account on your server.",
      "language" : "swift"
    },
    {
      "code" : "struct MyView: View {\n\n    func openStore() async {\n        guard await ExternalPurchaseCustomLink.isEligible else {\n            return\n        }\n        \/\/ Show the disclosure notice.\n        do {\n            let result = try await ExternalPurchaseCustomLink.showNotice(type: .withinApp)\n            guard case .continued = result else {\n                \/\/ Customer chooses not to continue. Don't display external purchases.\n                return\n            }\n            \/\/ Customer chooses to continue. \n            \/\/ Proceed with the custom link out and offer external purchases...\n        }\n        catch {\n            \/\/ Add error handling here... \n        }\n    }\n\n    var body: some View {\n        Button(\"Open store\") {\n            Task { await openStore() }\n        }\n    }\n}",
      "language" : "swift"
    }
  ],
  "conformsTo" : [
    "Sendable",
    "SendableMetatype"
  ],
  "contentHash" : "d1e00c32bd755a17e5470e6ac7108f0469c1a7fdbb1aca5d250e8d6a98a27351",
  "crawledAt" : "2025-12-04T01:28:47Z",
  "declaration" : {
    "code" : "enum ExternalPurchaseCustomLink",
    "language" : "swift"
  },
  "id" : "7C080E09-1D8A-4693-9571-E5BE53DFEA93",
  "kind" : "enum",
  "language" : "swift",
  "module" : "StoreKit",
  "overview" : "## Overview\n\nThis functionality is only available to apps with the [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Entitlements\/com.apple.developer.storekit.external-purchase-link] or [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Entitlements\/com.apple.developer.storekit.external-purchase-link-streaming] entitlements. For more information, see:\n\n### Communicate and promote offers\n\nIf your account receives the StoreKit External Purchase Link Entitlement (EU), your app can communicate and promote offers for digital goods or services available for purchase or download, in a distribution channel of your choice. Implement the following:\n\nFor information about testing in the sandbox environment, see [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/testing-transactions-that-use-custom-link-tokens].\n\n### Communicate and promote offers for music-streaming apps\n\nIf your account receives the Music Streaming Services Entitlement (EEA), your music-streaming app can use the [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/ExternalPurchaseCustomLink] API to to communicate and promote offers for music streaming services. Custom links can be to a distribution channel of your choice. Implement the following:\n\n### Check eligibility and request tokens\n\nWhen your app launches, check whether its eligible to use the `ExternalPurchaseCustomLink` API. For more information, see [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/ExternalPurchaseCustomLink\/isEligible] and [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/AppStore\/canMakePayments].\n\nIf your app is eligible, request both the `ACQUISITION` and `SERVICES` external purchase tokens. Associate and store these tokens with a customer account on your server. Use the tokens to report transactions to Apple.\n\nThe following example code shows how to check for eligibility and request custom link tokens:\n\n### Display the disclosure notice before communicating and promoting offers\n\nThe following SwiftUI code example shows how to check for eligibility, and then show the disclosure notice to determine whether to continue to promoting offers:",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "tvOS",
    "visionOS",
    "watchOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/StoreKit\/ExternalPurchaseCustomLink\ncrawled: 2025-12-04T01:28:47Z\n---\n\n# ExternalPurchaseCustomLink\n\n**Enumeration**\n\nEnables qualifying apps to offer custom links for external purchases and use alternative payment service providers.\n\n## Declaration\n\n```swift\nenum ExternalPurchaseCustomLink\n```\n\n## Overview\n\nThis functionality is only available to apps with the [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Entitlements\/com.apple.developer.storekit.external-purchase-link] or [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Entitlements\/com.apple.developer.storekit.external-purchase-link-streaming] entitlements. For more information, see:\n\n- [https:\/\/developer.apple.com\/support\/communication-and-promotion-of-offers-on-the-app-store-in-the-eu\/]\n- [https:\/\/developer.apple.com\/support\/music-streaming-services-entitlement-eea\/]\n\n### Communicate and promote offers\n\nIf your account receives the StoreKit External Purchase Link Entitlement (EU), your app can communicate and promote offers for digital goods or services available for purchase or download, in a distribution channel of your choice. Implement the following:\n\n- Configure the [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Entitlements\/com.apple.developer.storekit.external-purchase-link] entitlement for your app.\n- Configure the [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Information-Property-List\/SKExternalPurchaseCustomLinkRegions] property list key. Include the country code for each permitted region where your app communicates and promotes offers.\n- Check the [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/ExternalPurchaseCustomLink\/isEligible] property of the [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/ExternalPurchaseCustomLink] API to determine whether the API is available at runtime.\n- At launch and before every potential transaction, call the [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/ExternalPurchaseCustomLink\/token(for:)] function to request the external purchase tokens, using the token types `ACQUISITION` and `SERVICES`. Associate these tokens with a customer account on your server.\n- Call the [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/ExternalPurchaseCustomLink\/showNotice(type:)] function after a deliberate customer interaction, such as tapping a button, and before communicating and promoting offers.\n- From your server, report the external purchase tokens and the transactions associated with the tokens by using the [doc:\/\/com.apple.documentation\/documentation\/ExternalPurchaseServerAPI].\n\nFor information about testing in the sandbox environment, see [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/testing-transactions-that-use-custom-link-tokens].\n\n### Communicate and promote offers for music-streaming apps\n\nIf your account receives the Music Streaming Services Entitlement (EEA), your music-streaming app can use the [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/ExternalPurchaseCustomLink] API to to communicate and promote offers for music streaming services. Custom links can be to a distribution channel of your choice. Implement the following:\n\n- Configure the [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Entitlements\/com.apple.developer.storekit.external-purchase-link-streaming] entitlement for your app.\n- Configure the [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Information-Property-List\/SKExternalPurchaseLinkStreamingRegions] property list key. Include the country code for each permitted region where your app communicates and promotes offers for music streaming.\n- Check the [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/ExternalPurchaseCustomLink\/isEligible] property of the [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/ExternalPurchaseCustomLink] API to determine whether external purchase is available at runtime.\n- At launch and before every potential transaction, call the [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/ExternalPurchaseCustomLink\/token(for:)] function to request the external purchase tokens, using the token types `ACQUISITION` and `SERVICES`. Associate these tokens with a customer account on your server.\n- Call the [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/ExternalPurchaseCustomLink\/showNotice(type:)] function after a deliberate customer interaction, such as tapping a button, and before communicating and promoting offers.\n- From your server, report the external purchase tokens and the transactions associated with the tokens by using the [doc:\/\/com.apple.documentation\/documentation\/ExternalPurchaseServerAPI].\n\n### Check eligibility and request tokens\n\nWhen your app launches, check whether its eligible to use the `ExternalPurchaseCustomLink` API. For more information, see [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/ExternalPurchaseCustomLink\/isEligible] and [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/AppStore\/canMakePayments].\n\nIf your app is eligible, request both the `ACQUISITION` and `SERVICES` external purchase tokens. Associate and store these tokens with a customer account on your server. Use the tokens to report transactions to Apple.\n\nThe following example code shows how to check for eligibility and request custom link tokens:\n\n```swift\n\/\/ Ensure the app is eligible to use the external purchase custom link API.\nguard await ExternalPurchaseCustomLink.isEligible else { return }\n\n\/\/ Declare the tokens and the token types.\nvar tokens: [String : String] = [:]\nlet tokenTypes = [\"ACQUISITION\", \"SERVICES\"]\n\n\/\/ Request the tokens.\nfor tokenType in tokenTypes {\n    do {\n        let token = try await ExternalPurchaseCustomLink.token(for: tokenType)\n        if let token {\n            tokens[tokenType] = token.value\n        }\n    }\n    catch {\n        \/\/ Failed to get a token of type `tokenType`.\n        \/\/ Add your code to handle errors.\n    }\n}\n\n\/\/ Add your code to manage the tokens, for example to associate them\n\/\/ with a customer account on your server.\n```\n\n### Display the disclosure notice before communicating and promoting offers\n\nThe following SwiftUI code example shows how to check for eligibility, and then show the disclosure notice to determine whether to continue to promoting offers:\n\n```swift\nstruct MyView: View {\n\n    func openStore() async {\n        guard await ExternalPurchaseCustomLink.isEligible else {\n            return\n        }\n        \/\/ Show the disclosure notice.\n        do {\n            let result = try await ExternalPurchaseCustomLink.showNotice(type: .withinApp)\n            guard case .continued = result else {\n                \/\/ Customer chooses not to continue. Don't display external purchases.\n                return\n            }\n            \/\/ Customer chooses to continue. \n            \/\/ Proceed with the custom link out and offer external purchases...\n        }\n        catch {\n            \/\/ Add error handling here... \n        }\n    }\n\n    var body: some View {\n        Button(\"Open store\") {\n            Task { await openStore() }\n        }\n    }\n}\n```\n\n## Checking eligibility\n\n- **isEligible**: A Boolean value that indicates at runtime whether the app can use this API for external purchases.\n\n## Getting external purchase tokens\n\n- **token(for:)**: Requests an external purchase token of the specified type.\n- **ExternalPurchaseCustomLink.Token**: A token you use with the External Purchase custom link API.\n- **Receiving and decoding external purchase tokens**: Receive tokens for external purchases that you use to report transactions to Apple.\n\n## Displaying the disclosure sheet\n\n- **showNotice(type:)**: Displays the system disclosure notice sheet and asks the customer whether to continue.\n- **ExternalPurchaseCustomLink.NoticeType**: The custom link out style that informs the type of disclosure notice to display.\n- **ExternalPurchaseCustomLink.NoticeResult**: The result of showing the disclosure notice.\n\n## Testing external purchase transactions\n\n- **Testing transactions that use custom link tokens**: Recognize custom link tokens that your app receives in the sandbox testing environment, and use them to test reporting transactions.\n\n## Communicating and promoting offers\n\n- **ExternalPurchaseCustomLink.Token**: A token you use with the External Purchase custom link API.\n- **com.apple.developer.storekit.external-purchase-link**: A Boolean value that indicates whether your app can include a link that directs people to a website to make an external purchase.\n- **SKExternalPurchaseCustomLinkRegions**: An array of country code strings that indicate the regions where your app supports custom links for the communication and promotion of offers.\n- **Testing transactions that use custom link tokens**: Recognize custom link tokens that your app receives in the sandbox testing environment, and use them to test reporting transactions.\n\n## Conforms To\n\n- Sendable\n- SendableMetatype\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "A Boolean value that indicates at runtime whether the app can use this API for external purchases.",
          "name" : "isEligible",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/ExternalPurchaseCustomLink\/isEligible"
        }
      ],
      "title" : "Checking eligibility"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Requests an external purchase token of the specified type.",
          "name" : "token(for:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/ExternalPurchaseCustomLink\/token(for:)"
        },
        {
          "description" : "A token you use with the External Purchase custom link API.",
          "name" : "ExternalPurchaseCustomLink.Token",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/ExternalPurchaseCustomLink\/Token"
        },
        {
          "description" : "Receive tokens for external purchases that you use to report transactions to Apple.",
          "name" : "Receiving and decoding external purchase tokens",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/receiving-and-decoding-external-purchase-tokens"
        }
      ],
      "title" : "Getting external purchase tokens"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Displays the system disclosure notice sheet and asks the customer whether to continue.",
          "name" : "showNotice(type:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/ExternalPurchaseCustomLink\/showNotice(type:)"
        },
        {
          "description" : "The custom link out style that informs the type of disclosure notice to display.",
          "name" : "ExternalPurchaseCustomLink.NoticeType",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/ExternalPurchaseCustomLink\/NoticeType"
        },
        {
          "description" : "The result of showing the disclosure notice.",
          "name" : "ExternalPurchaseCustomLink.NoticeResult",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/ExternalPurchaseCustomLink\/NoticeResult"
        }
      ],
      "title" : "Displaying the disclosure sheet"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Recognize custom link tokens that your app receives in the sandbox testing environment, and use them to test reporting transactions.",
          "name" : "Testing transactions that use custom link tokens",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/testing-transactions-that-use-custom-link-tokens"
        }
      ],
      "title" : "Testing external purchase transactions"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "A token you use with the External Purchase custom link API.",
          "name" : "ExternalPurchaseCustomLink.Token",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/ExternalPurchaseCustomLink\/Token"
        },
        {
          "description" : "A Boolean value that indicates whether your app can include a link that directs people to a website to make an external purchase.",
          "name" : "com.apple.developer.storekit.external-purchase-link",
          "url" : "https:\/\/developer.apple.com\/documentation\/BundleResources\/Entitlements\/com.apple.developer.storekit.external-purchase-link"
        },
        {
          "description" : "An array of country code strings that indicate the regions where your app supports custom links for the communication and promotion of offers.",
          "name" : "SKExternalPurchaseCustomLinkRegions",
          "url" : "https:\/\/developer.apple.com\/documentation\/BundleResources\/Information-Property-List\/SKExternalPurchaseCustomLinkRegions"
        },
        {
          "description" : "Recognize custom link tokens that your app receives in the sandbox testing environment, and use them to test reporting transactions.",
          "name" : "Testing transactions that use custom link tokens",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/testing-transactions-that-use-custom-link-tokens"
        }
      ],
      "title" : "Communicating and promoting offers"
    }
  ],
  "source" : "appleJSON",
  "title" : "ExternalPurchaseCustomLink",
  "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/ExternalPurchaseCustomLink"
}