{
  "abstract" : "Select the type of receipt validation, on the device or on your server, that works for your app.",
  "codeExamples" : [

  ],
  "contentHash" : "c903d44a3ffe007b6fb8fbb5c22e639cb1befd0c4d21cbbc7bac2748ba35a758",
  "crawledAt" : "2025-12-03T07:04:51Z",
  "id" : "AF25DB40-B015-4594-857E-7921D48BAE31",
  "kind" : "article",
  "language" : "swift",
  "module" : "StoreKit",
  "overview" : "## Overview\n\nAn App Store receipt provides a record of the sale of an app and any purchases the person makes within the app. You can authenticate purchased content by adding receipt validation code to your app or server. Receipt validation requires an understanding of secure coding techniques to employ a solution that’s secure and unique to your app.\n\n### Choose a validation technique\n\nThere are two ways to verify a receipt’s authenticity:\n\nCompare the approaches and determine the method that best fits your app and your infrastructure. You can also choose to implement both approaches. For managing auto-renewable subscriptions, see the following table for the key advantages that server-side receipt validation provides over on-device receipt validation:\n\nReceipts contain non-consumable in-app purchases, auto-renewable subscriptions, and non-renewing subscriptions indefinitely. Consumable in-app purchases remain in the receipt until you call [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKPaymentQueue\/finishTransaction(_:)]. You may choose to maintain and manage records of consumable in-app purchases on your server.\n\n### Get the latest receipt\n\nThe App Store updates receipts immediately after completed purchases. When you call [doc:\/\/com.apple.documentation\/documentation\/AppStoreReceipts\/Verify-Receipt] from your server, the App Store returns the latest transaction information, regardless of the contents of the receipt you send in the request.\n\nOn the device, the system updates the receipt immediately when it has an internet connection, and any of the following occur:\n\nTransactions can also occur at times when the app isn’t running. When necessary, call [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKPaymentQueue\/restoreCompletedTransactions()] to ensure the receipt you’re working with is up-to-date. For example, if a customer purchases an auto-renewable subscription on another device, call this method to get those transactions and update the receipt.\n\nTo ensure that your app receives all transactions, add the transaction observer, [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKPaymentQueue\/add(_:)-5ciz2], at app launch time. For more information, see [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/setting-up-the-transaction-observer-for-the-payment-queue].",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/StoreKit\/choosing-a-receipt-validation-technique\ncrawled: 2025-12-03T07:04:51Z\n---\n\n# Choosing a receipt validation technique\n\n**Article**\n\nSelect the type of receipt validation, on the device or on your server, that works for your app.\n\n## Overview\n\n\n\nAn App Store receipt provides a record of the sale of an app and any purchases the person makes within the app. You can authenticate purchased content by adding receipt validation code to your app or server. Receipt validation requires an understanding of secure coding techniques to employ a solution that’s secure and unique to your app.\n\n### Choose a validation technique\n\nThere are two ways to verify a receipt’s authenticity:\n\n- Locally, on the device. Validating receipts locally requires code that reads and validates a binary file that Apple encodes and signs as a PKCS #7 container. For more information, see [doc:\/\/com.apple.documentation\/documentation\/AppStoreReceipts\/validating-receipts-on-the-device].\n- On your server with the App Store. Validating receipts with the App Store requires secure connections between your app and your server, and between your server and the App Store. For more information, see [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/validating-receipts-with-the-app-store].\n\nCompare the approaches and determine the method that best fits your app and your infrastructure. You can also choose to implement both approaches. For managing auto-renewable subscriptions, see the following table for the key advantages that server-side receipt validation provides over on-device receipt validation:\n\n\n\nReceipts contain non-consumable in-app purchases, auto-renewable subscriptions, and non-renewing subscriptions indefinitely. Consumable in-app purchases remain in the receipt until you call [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKPaymentQueue\/finishTransaction(_:)]. You may choose to maintain and manage records of consumable in-app purchases on your server.\n\n### Get the latest receipt\n\nThe App Store updates receipts immediately after completed purchases. When you call [doc:\/\/com.apple.documentation\/documentation\/AppStoreReceipts\/Verify-Receipt] from your server, the App Store returns the latest transaction information, regardless of the contents of the receipt you send in the request.\n\nOn the device, the system updates the receipt immediately when it has an internet connection, and any of the following occur:\n\n- The customer completes an in-app purchase.\n- The app launches its transaction observer ([doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKPaymentTransactionObserver]) and has unfinished transactions or subscription renewals.\n- The app calls [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKPaymentQueue\/restoreCompletedTransactions()] or [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKPaymentQueue\/restoreCompletedTransactions(withApplicationUsername:)] to restore transactions.\n- The app sends a request to [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKReceiptRefreshRequest] to get a receipt if the receipt is invalid or missing.\n\nTransactions can also occur at times when the app isn’t running. When necessary, call [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKPaymentQueue\/restoreCompletedTransactions()] to ensure the receipt you’re working with is up-to-date. For example, if a customer purchases an auto-renewable subscription on another device, call this method to get those transactions and update the receipt.\n\nTo ensure that your app receives all transactions, add the transaction observer, [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKPaymentQueue\/add(_:)-5ciz2], at app launch time. For more information, see [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/setting-up-the-transaction-observer-for-the-payment-queue].\n\n\n\n## Purchase validation\n\n- **Validating receipts with the App Store**: Verify transactions with the App Store on a secure server.\n- **appStoreReceiptURL**: The file URL for the bundle’s App Store receipt.\n- **SKReceiptRefreshRequest**: A request to the App Store to get the app receipt, which represents the customer’s transactions with your app.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Verify transactions with the App Store on a secure server.",
          "name" : "Validating receipts with the App Store",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/validating-receipts-with-the-app-store"
        },
        {
          "description" : "The file URL for the bundle’s App Store receipt.",
          "name" : "appStoreReceiptURL",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/Bundle\/appStoreReceiptURL"
        },
        {
          "description" : "A request to the App Store to get the app receipt, which represents the customer’s transactions with your app.",
          "name" : "SKReceiptRefreshRequest",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/SKReceiptRefreshRequest"
        }
      ],
      "title" : "Purchase validation"
    }
  ],
  "source" : "appleJSON",
  "title" : "Choosing a receipt validation technique",
  "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/choosing-a-receipt-validation-technique"
}