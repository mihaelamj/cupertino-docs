{
  "abstract" : "Use locally configured product data to test and debug your In-App Purchases implementation.",
  "codeExamples" : [
    {
      "code" : "\/\/ Get the receipt if it's available.\nif let appStoreReceiptURL = Bundle.main.appStoreReceiptURL,\n    FileManager.default.fileExists(atPath: appStoreReceiptURL.path) {\n    do {\n        let receiptData = try Data(contentsOf: appStoreReceiptURL, options: .alwaysMapped)\n        let receiptString = receiptData.base64EncodedString(options: [])\n        \/\/ Add code to read receiptData.\n    }\n    catch { \n        print(\"Couldn't read receipt data: \" + error.localizedDescription) }\n}",
      "language" : "swift"
    }
  ],
  "contentHash" : "730cb333959db3431168d20f8d2259a32568d4f24a7ed82e508c329da932cbed",
  "crawledAt" : "2025-12-03T07:05:03Z",
  "id" : "F6683E26-B8CB-48F4-A095-8891EDABC1E2",
  "kind" : "article",
  "language" : "swift",
  "module" : "StoreKit",
  "overview" : "## Overview\n\nTesting your StoreKit implementation in Xcode ensures that your app behaves correctly when your customers perform various tasks associated with subscriptions and In-App Purchase transactions. Be sure to test a variety of in-app purchase scenarios, such as receipt validation, promotional offers, interrupted purchases, introductory offers, subscription renewals, and purchase restoration.\n\n### Perform basic setup\n\nBefore you begin StoreKit testing in Xcode, complete the steps in [doc:\/\/com.apple.documentation\/documentation\/Xcode\/setting-up-storekit-testing-in-xcode], including creating a StoreKit configuration file, enabling StoreKit testing in Xcode, and preparing to validate receipts in the test environment. The test scenarios in this article require this basic setup.\n\nSelect the relevant test scenarios to build a test plan for your app. Each test scenario provides additional setup steps, if necessary, along with instructions about how to minimally reset the environment to repeat the test.\n\n### Validate a receipt in the test environment\n\nValidating receipts is an integral part of handling and testing in-app purchases. As you test in-app purchases, StoreKit in Xcode generates receipts that are valid only in the test environment. Your app can validate the receipts locally using a certificate that Xcode provides.\n\nThe test environment’s certificate is a root certificate. There’s no certificate chain to validate when you verify the receipt signature. The following code example retrieves the local receipt:\n\nFor more information, see [doc:\/\/com.apple.documentation\/documentation\/AppStoreReceipts\/validating-receipts-on-the-device].\n\n### Test a promotional offer\n\nFor this test scenario, let’s assume the app determines that customers are eligible for the promotional offer when the subscription expires. Use the test environment to speed up the time rate so the subscription expires. Then, you’re ready to test the offer eligibility logic in your app.\n\nAdditional setup steps for this test scenario are:\n\nEnsure your test user is eligible for the offer according to your app’s requirements, then purchase the subscription with the offer. Test users can redeem subscription offers if:\n\nSee [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/implementing-promotional-offers-in-your-app] for more information.\n\nTo test the same promotional offer purchase again, delete the transaction. In Xcode, choose Debug > StoreKit > Manage Transactions. Select the transaction for the promotional offer purchase, and click Delete.\n\n### Test an interrupted purchase\n\nAn interrupted purchase is a transaction that requires the user to perform some action outside your app before the transaction can complete successfully. For example, the user may need to update a payment method or approve new terms and conditions. In Xcode, you can simulate a purchase interruption and its resolution to test how your code handles this scenario end-to-end. You can test this scenario for all in-app purchase product types.\n\nTo perform the test again for non-consumable products and subscriptions, delete the transaction to run the test again. To delete the transaction, choose Debug > StoreKit > Manage Transactions. Select the transaction and click Delete.\n\nFor consumable in-app purchases, you can test again without additional setup. To reset the test environment to its default behavior, select the StoreKit configuration file in Xcode, then choose Editor > Disable Interrupted Purchases.\n\n### Test an introductory offer\n\nCustomers are eligible to redeem an introductory offer one time. Configure an introductory offer for a subscription in your StoreKit configuration file. For more information, see [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/implementing-introductory-offers-in-your-app].\n\nEnsure that your app is eligible for an introductory offer by verifying there’s no subscription purchase for the product ID that includes the offer. Either verify the receipt in your code or check the transactions in Xcode by choosing Debug > StoreKit > Manage Transactions.\n\nTo retry the same test scenario, delete the transaction that contains the introductory offer purchase. In Xcode, choose Debug > StoreKit > Manage Transactions. Select the transaction and click Delete. This resets the eligibility for the test user.\n\n### Test restoring purchases without existing purchases\n\nAll apps need to provide a way for customers to restore purchases, such as by providing a Restore Purchases button. Test how your app handles this request when the customer has no existing purchases. For more information, see [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/restoring-purchased-products].\n\nInclude at least one non-consumable product, auto-renewable subscription, or non-renewable subscription in the StoreKit configuration file. To simulate a user account with no in-app purchases, delete all the transactions before starting the test. In Xcode, choose Debug > StoreKit > Manage Transactions, select all the transactions, and click Delete.\n\nYou can repeat this test scenario without additional steps.\n\n### Test presenting the App Store sheet for managing subscriptions\n\nYour app can present an App Store sheet that customers can use to manage their subscriptions.\n\nAdditional setup steps for this test scenario are:\n\nSee [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/AppStore\/showManageSubscriptions(in:)] and [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/View\/manageSubscriptionsSheet(isPresented:)] for more information.\n\nYou can repeat this test scenario without additional steps.\n\n### Test an offer code\n\nYour app can present a sheet to redeem preconfigured offer codes.\n\nAdditional setup steps for this test scenario are:\n\nSee [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKPaymentQueue\/presentCodeRedemptionSheet()] for more information.\n\nTo retry the same test scenario, delete the transaction that contains the offer code purchase. In Xcode, choose Debug > StoreKit > Manage Transactions. Select the transaction and click Delete.\n\n### Test billing retry and grace period for auto-renewable subscriptions\n\nWhen billing for a subscription renewal fails, such as due to an expired card, the App Store retries billing and attempts to recover the subscription. You can enable a billing grace period for your app in App Store Connect so your subscribers can continue accessing paid content while the App Store retries billing. For more information about the billing grace period, see [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/reducing-involuntary-subscriber-churn].\n\nTest these scenarios in Xcode to ensure your app detects subscriptions that are in billing retry or billing grace period states. In your code, look at the [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/Product\/SubscriptionInfo\/Status-swift.struct\/renewalInfo] for the subscription to inspect its [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/Product\/SubscriptionInfo\/RenewalState]. For subscriptions in a billing grace period state, ensure your app continues to provide uninterrupted subscription features.\n\nAdditional setup steps for this scenario are:\n\nTest your app’s handling of a billing grace period:\n\nTest your app’s handling of a billing grace period expiration:\n\nTest resolving a billing issue for billing retry, either with a billing grace period or without:\n\n### Test price increase consent\n\nWhen you increase the price of an auto-renewable subscription by an amount that requires user consent, the App Store gives the user an opportunity to consent to the price increase by presenting a sheet in your app. Your app may defer presentation of the sheet to prevent it from appearing at an inconvenient time in the user interface. Users may also consent to a price increase outside your app. Test these scenarios in Xcode to verify that your app handles deferring or displaying the sheet.\n\nAdditional setup steps for this scenario are:\n\nTest for the deferred price increase consent sheet presentation:\n\nTest for the price increase consent sheet presentation:\n\nFor information about testing price increase consent in an automated test suite, see [doc:\/\/com.apple.documentation\/documentation\/StoreKitTest\/SKTestSession\/requestPriceIncreaseConsentForTransaction(identifier:)], [doc:\/\/com.apple.documentation\/documentation\/StoreKitTest\/SKTestSession\/consentToPriceIncreaseForTransaction(identifier:)], and [doc:\/\/com.apple.documentation\/documentation\/StoreKitTest\/SKTestSession\/declinePriceIncreaseForTransaction(identifier:)].",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/StoreKit\/testing-in-app-purchases-in-xcode\ncrawled: 2025-12-03T07:05:03Z\n---\n\n# Testing In-App Purchases in Xcode\n\n**Article**\n\nUse locally configured product data to test and debug your In-App Purchases implementation.\n\n## Overview\n\nTesting your StoreKit implementation in Xcode ensures that your app behaves correctly when your customers perform various tasks associated with subscriptions and In-App Purchase transactions. Be sure to test a variety of in-app purchase scenarios, such as receipt validation, promotional offers, interrupted purchases, introductory offers, subscription renewals, and purchase restoration.\n\n### Perform basic setup\n\nBefore you begin StoreKit testing in Xcode, complete the steps in [doc:\/\/com.apple.documentation\/documentation\/Xcode\/setting-up-storekit-testing-in-xcode], including creating a StoreKit configuration file, enabling StoreKit testing in Xcode, and preparing to validate receipts in the test environment. The test scenarios in this article require this basic setup.\n\nSelect the relevant test scenarios to build a test plan for your app. Each test scenario provides additional setup steps, if necessary, along with instructions about how to minimally reset the environment to repeat the test.\n\n### Validate a receipt in the test environment\n\nValidating receipts is an integral part of handling and testing in-app purchases. As you test in-app purchases, StoreKit in Xcode generates receipts that are valid only in the test environment. Your app can validate the receipts locally using a certificate that Xcode provides.\n\n\n\nThe test environment’s certificate is a root certificate. There’s no certificate chain to validate when you verify the receipt signature. The following code example retrieves the local receipt:\n\n```swift\n\/\/ Get the receipt if it's available.\nif let appStoreReceiptURL = Bundle.main.appStoreReceiptURL,\n    FileManager.default.fileExists(atPath: appStoreReceiptURL.path) {\n    do {\n        let receiptData = try Data(contentsOf: appStoreReceiptURL, options: .alwaysMapped)\n        let receiptString = receiptData.base64EncodedString(options: [])\n        \/\/ Add code to read receiptData.\n    }\n    catch { \n        print(\"Couldn't read receipt data: \" + error.localizedDescription) }\n}\n```\n\nFor more information, see [doc:\/\/com.apple.documentation\/documentation\/AppStoreReceipts\/validating-receipts-on-the-device].\n\n### Test a promotional offer\n\nFor this test scenario, let’s assume the app determines that customers are eligible for the promotional offer when the subscription expires. Use the test environment to speed up the time rate so the subscription expires. Then, you’re ready to test the offer eligibility logic in your app.\n\nAdditional setup steps for this test scenario are:\n\n- Add a subscription offer to your StoreKit configuration file.\n- In the app, purchase a subscription within the same subscription group to be eligible for a promotional offer.\n\nEnsure your test user is eligible for the offer according to your app’s requirements, then purchase the subscription with the offer. Test users can redeem subscription offers if:\n\n- They have an existing or expired subscription, including free, discount, or discounted with a subscription offers.\n- They qualify for the offer according to criteria that you define.\n\nSee [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/implementing-promotional-offers-in-your-app] for more information.\n\n1. In Xcode, select the StoreKit configuration file in the Project navigator, and then choose Editor > Subscription Renewal Rate > Monthly Renewal Every 30 Seconds.\n2. Wait until the subscription expires.\n3. Reset the Subscription Renewal rate to Monthly Renewal Every 30 Minutes.\n4. In the app, select the option to buy the subscription with the offer.\n5. In your code, verify that the payment request includes the discount, [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKPayment\/paymentDiscount].\n6. Observe that the system displays the payment sheet with the promotional offer.\n7. In your code, verify that [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKPaymentTransactionObserver\/paymentQueue(_:updatedTransactions:)] receives the transaction in the [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKPaymentTransactionState\/purchasing] state.\n8. In the app, tap Confirm on the payment sheet.\n9. In your code, verify that [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKPaymentTransactionObserver\/paymentQueue(_:updatedTransactions:)] receives the transaction in the [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKPaymentTransactionState\/purchased] state.\n\nTo test the same promotional offer purchase again, delete the transaction. In Xcode, choose Debug > StoreKit > Manage Transactions. Select the transaction for the promotional offer purchase, and click Delete.\n\n### Test an interrupted purchase\n\nAn interrupted purchase is a transaction that requires the user to perform some action outside your app before the transaction can complete successfully. For example, the user may need to update a payment method or approve new terms and conditions. In Xcode, you can simulate a purchase interruption and its resolution to test how your code handles this scenario end-to-end. You can test this scenario for all in-app purchase product types.\n\n1. In the Xcode Project navigator, select the StoreKit configuration file. Choose Editor > Enable Interrupted Purchases. Run the app in the simulator or on a device.\n2. In the app, buy an in-app purchase.\n3. Observe that the system displays the payment sheet in the app.\n4. In your code, verify that your [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKPaymentTransactionObserver] gets a callback on [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKPaymentTransactionObserver\/paymentQueue(_:updatedTransactions:)] with a transaction in the [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKPaymentTransactionState\/purchasing] state.\n5. In the app, tap Confirm on the payment sheet.\n6. In your code, observe that the payment fails (because you enabled interrupted purchases in the test environment). The payment queue receives a transaction in the [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKPaymentTransactionState\/failed] state.\n7. Check that your code calls [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKPaymentQueue\/finishTransaction(_:)] to remove it from the queue.\n8. In Xcode, choose Debug > StoreKit > Manage Transactions.\n9. Select the transaction and click Resolve. The test environment resumes a successful purchase.\n10. In your code, verify that the payment queue receives a transaction in the [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKPaymentTransactionState\/purchased] state for the same [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKProduct\/productIdentifier] in the same quantity as the failed transaction.\n11. In your code, validate the receipt.\n12. Check that your app provides the service or product, and then calls [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKPaymentQueue\/finishTransaction(_:)].\n\nTo perform the test again for non-consumable products and subscriptions, delete the transaction to run the test again. To delete the transaction, choose Debug > StoreKit > Manage Transactions. Select the transaction and click Delete.\n\nFor consumable in-app purchases, you can test again without additional setup. To reset the test environment to its default behavior, select the StoreKit configuration file in Xcode, then choose Editor > Disable Interrupted Purchases.\n\n### Test an introductory offer\n\nCustomers are eligible to redeem an introductory offer one time. Configure an introductory offer for a subscription in your StoreKit configuration file. For more information, see [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/implementing-introductory-offers-in-your-app].\n\nEnsure that your app is eligible for an introductory offer by verifying there’s no subscription purchase for the product ID that includes the offer. Either verify the receipt in your code or check the transactions in Xcode by choosing Debug > StoreKit > Manage Transactions.\n\n1. In the app, buy the subscription that has an introductory offer.\n2. Observe that the system displays the payment sheet with the introductory offer in the app.\n3. In your code, verify your [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKPaymentTransactionObserver] receives a callback on [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKPaymentTransactionObserver\/paymentQueue(_:updatedTransactions:)] with the transaction in the [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKPaymentTransactionState\/purchasing] state.\n4. In the app, tap Confirm on the payment sheet.\n5. In your code, verify your [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKPaymentTransactionObserver] receives a callback on [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKPaymentTransactionObserver\/paymentQueue(_:updatedTransactions:)] with the transaction in the [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKPaymentTransactionState\/purchased] state.\n6. In your code, validate the receipt.\n7. Check that your app provides the service or product, and then calls [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKPaymentQueue\/finishTransaction(_:)].\n\nTo retry the same test scenario, delete the transaction that contains the introductory offer purchase. In Xcode, choose Debug > StoreKit > Manage Transactions. Select the transaction and click Delete. This resets the eligibility for the test user.\n\n### Test restoring purchases without existing purchases\n\nAll apps need to provide a way for customers to restore purchases, such as by providing a Restore Purchases button. Test how your app handles this request when the customer has no existing purchases. For more information, see [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/restoring-purchased-products].\n\nInclude at least one non-consumable product, auto-renewable subscription, or non-renewable subscription in the StoreKit configuration file. To simulate a user account with no in-app purchases, delete all the transactions before starting the test. In Xcode, choose Debug > StoreKit > Manage Transactions, select all the transactions, and click Delete.\n\n1. In the app, select the option your app provides to restore purchases.\n2. In your code, verify that it calls [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKPaymentQueue\/restoreCompletedTransactions()] or [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKPaymentQueue\/restoreCompletedTransactions(withApplicationUsername:)].\n3. In your code, verify that StoreKit notifies your observer that the restore is complete by calling [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKPaymentTransactionObserver\/paymentQueueRestoreCompletedTransactionsFinished(_:)]. Note that StoreKit doesn’t notify the queue of any restored transactions.\n\nYou can repeat this test scenario without additional steps.\n\n### Test presenting the App Store sheet for managing subscriptions\n\nYour app can present an App Store sheet that customers can use to manage their subscriptions.\n\nAdditional setup steps for this test scenario are:\n\n- Include two auto-renewable subscriptions that belong to the same subscription group in the StoreKit configuration file.\n- Subscribe the sandbox user to the subscription with the lowest level of service in that subscription group.\n- In the app, implement a Manage Subscriptions button that invokes the [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/AppStore\/showManageSubscriptions(in:)] or [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/View\/manageSubscriptionsSheet(isPresented:)] method.\n\nSee [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/AppStore\/showManageSubscriptions(in:)] and [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/View\/manageSubscriptionsSheet(isPresented:)] for more information.\n\n1. In the app, tap the Manage Subscriptions button.\n2. Observe that the system displays the App Store sheet for managing subscriptions.\n3. Verify that the test user is a subscriber of the lower-grade subscription.\n4. Upgrade the test user to the higher-grade subscription in that group.\n5. Verify that the user is a subscriber of the higher-grade subscription.\n6. Cancel the subscription and confirm it in the Confirm Cancellation dialog.\n7. Verify that the user is no longer a subscriber of any subscription.\n\nYou can repeat this test scenario without additional steps.\n\n### Test an offer code\n\nYour app can present a sheet to redeem preconfigured offer codes.\n\nAdditional setup steps for this test scenario are:\n\n- Include one auto-renewable subscription in the StoreKit configuration file.\n- Configure an offer code for the above subscription in your StoreKit configuration file under the Offer Codes heading.\n- In the app, implement a Redeem Offer Code button that invokes the [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKPaymentQueue\/presentCodeRedemptionSheet()] method.\n\nSee [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKPaymentQueue\/presentCodeRedemptionSheet()] for more information.\n\n1. In the app, tap the Redeem Offer Code button.\n2. Observe that the system displays the Redeem Offer Code sheet.\n3. Select the offer code that you configured and redeem it.\n4. Observe that the system displays the payment sheet with the applied offer.\n5. In the app, tap Confirm on the payment sheet.\n6. In your code, verify your [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKPaymentTransactionObserver] receives a callback on [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKPaymentTransactionObserver\/paymentQueue(_:updatedTransactions:)] with the transaction in the [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKPaymentTransactionState\/purchased] state.\n7. Check that your app provides the service or product, and then calls [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKPaymentQueue\/finishTransaction(_:)].\n\nTo retry the same test scenario, delete the transaction that contains the offer code purchase. In Xcode, choose Debug > StoreKit > Manage Transactions. Select the transaction and click Delete.\n\n### Test billing retry and grace period for auto-renewable subscriptions\n\nWhen billing for a subscription renewal fails, such as due to an expired card, the App Store retries billing and attempts to recover the subscription. You can enable a billing grace period for your app in App Store Connect so your subscribers can continue accessing paid content while the App Store retries billing. For more information about the billing grace period, see [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/reducing-involuntary-subscriber-churn].\n\nTest these scenarios in Xcode to ensure your app detects subscriptions that are in billing retry or billing grace period states. In your code, look at the [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/Product\/SubscriptionInfo\/Status-swift.struct\/renewalInfo] for the subscription to inspect its [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/Product\/SubscriptionInfo\/RenewalState]. For subscriptions in a billing grace period state, ensure your app continues to provide uninterrupted subscription features.\n\nAdditional setup steps for this scenario are:\n\n- Choose Editor > Enable Billing Grace Period. This step simulates enabling the billing grace period for your app in App Store Connect. To test billing retry without a billing grace period, leave this setting disabled.\n- Choose Editor > Enable Billing Retry on Renewal. This step causes all subscription renewals to go into a billing retry state.\n- Select your StoreKit configuration file in the Project navigator.\n- Create an auto-renewable subscription in-app purchase in your StoreKit configuration file.\n- Purchase the auto-renewable subscription in your app.\n- Adjust the time rate of subscription renewals in the testing environment by choosing Editor > Subscription Renewal Rate, and select an option. For more information about the time rates available in the testing environment, see [doc:\/\/com.apple.documentation\/documentation\/StoreKitTest\/SKTestSession\/timeRate-swift.property].\n\nTest your app’s handling of a billing grace period:\n\n1. In the testing environment, wait for the subscription period to elapse. The subscription goes into a billing retry state and a billing grace period.\n2. Run your app, then choose Debug > StoreKit > Manage Transactions.\n3. Find and select the subscription transaction.\n4. Verify the subscription transaction is in the billing grace period state.\n5. Test your app to verify that it supports the billing grace period by continuing to provide uninterrupted access to the features the subscription provides.\n\nTest your app’s handling of a billing grace period expiration:\n\n1. In the testing environment, wait until the billing grace period elapses for the subscription.\n2. Run your app, then choose Debug > StoreKit > Manage Transactions.\n3. Find and select the subscription transaction.\n4. Verify the subscription transaction is in the billing retry state, and is no longer in the billing grace period state.\n5. Test your app to verify that it works consistently with a subscription expiration.\n\nTest resolving a billing issue for billing retry, either with a billing grace period or without:\n\n1. In the testing environment, wait for the subscription period to elapse. Verify your app works consistently with a subscription expiration if you’re not testing a billing grace period.\n2. Run your app, then choose Debug > StoreKit > Manage Transactions.\n3. Find and select the subscription transaction.\n4. Verify the subscription transaction is in either the billing grace period state or the billing retry state.\n5. Click the Resolve Issues button to resolve the billing issue.\n6. Test your app to verify that it provides access to the subscription features as you expect.\n\n### Test price increase consent\n\nWhen you increase the price of an auto-renewable subscription by an amount that requires user consent, the App Store gives the user an opportunity to consent to the price increase by presenting a sheet in your app. Your app may defer presentation of the sheet to prevent it from appearing at an inconvenient time in the user interface. Users may also consent to a price increase outside your app. Test these scenarios in Xcode to verify that your app handles deferring or displaying the sheet.\n\nAdditional setup steps for this scenario are:\n\n- Create an auto-renewable subscription purchase in your StoreKit configuration file.\n- Purchase the subscription in your app.\n- Optionally, increase the price for your subscription in your StoreKit configuration file. You can still test this scenario without increasing the price.\n\nTest for the deferred price increase consent sheet presentation:\n\n1. Navigate to a place in your app where you defer presentation of the price increase consent sheet.\n2. Run your app, then choose Debug > StoreKit > Manage Transactions.\n3. Find and select the subscription transaction.\n4. Click Request Price Increase Consent.\n5. Verify that the price increase consent sheet doesn’t display in your app.\n6. Navigate away from the view where you defer presentation.\n7. Verify that the price increase consent sheet displays in your app.\n8. On the price increase consent sheet in the app, select the Agree to New Price button to test a user consenting to the price increase, or select Close to test the user not giving consent for the price increase.\n\nTest for the price increase consent sheet presentation:\n\n1. Navigate to a place in your app where you don’t defer presenting the price increase consent sheet.\n2. In the StoreKit transaction manager, select the subscription purchase, then click Request Price Increase Consent.\n3. Verify that the price increase consent sheet displays in your app.\n4. On the price increase consent sheet in the app, select the Agree to New Price button to test a user consenting to the price increase, or select Close to test the user not giving consent for the price increase.\n\nFor information about testing price increase consent in an automated test suite, see [doc:\/\/com.apple.documentation\/documentation\/StoreKitTest\/SKTestSession\/requestPriceIncreaseConsentForTransaction(identifier:)], [doc:\/\/com.apple.documentation\/documentation\/StoreKitTest\/SKTestSession\/consentToPriceIncreaseForTransaction(identifier:)], and [doc:\/\/com.apple.documentation\/documentation\/StoreKitTest\/SKTestSession\/declinePriceIncreaseForTransaction(identifier:)].\n\n## Testing In-App Purchases\n\n- **Testing at all stages of development with Xcode and the sandbox**: Verify your implementation of In-App Purchases by testing your code throughout its development.\n- **Setting up StoreKit Testing in Xcode**: Prepare your test environment to test in-app purchases with data you configure locally.\n- **Testing In-App Purchases with sandbox**: Test your implementation of In-App Purchases using real product information and server-to-server transactions in the sandbox environment.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Verify your implementation of In-App Purchases by testing your code throughout its development.",
          "name" : "Testing at all stages of development with Xcode and the sandbox",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/testing-at-all-stages-of-development-with-xcode-and-the-sandbox"
        },
        {
          "description" : "Prepare your test environment to test in-app purchases with data you configure locally.",
          "name" : "Setting up StoreKit Testing in Xcode",
          "url" : "https:\/\/developer.apple.com\/documentation\/Xcode\/setting-up-storekit-testing-in-xcode"
        },
        {
          "description" : "Test your implementation of In-App Purchases using real product information and server-to-server transactions in the sandbox environment.",
          "name" : "Testing In-App Purchases with sandbox",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/testing-in-app-purchases-with-sandbox"
        }
      ],
      "title" : "Testing In-App Purchases"
    }
  ],
  "source" : "appleJSON",
  "title" : "Testing In-App Purchases in Xcode",
  "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/testing-in-app-purchases-in-xcode"
}