{
  "abstract" : "Initiate install validation by displaying a view-through ad with signed parameters.",
  "codeExamples" : [
    {
      "code" : "version + '\\u2063' + ad-network-id + '\\u2063' + source-identifier + '\\u2063' + itunes-item-id + '\\u2063' + nonce + '\\u2063' + source-app-id + '\\u2063' + fidelity-type + '\\u2063' + timestamp\n",
      "language" : "http"
    },
    {
      "code" : "version + '\\u2063' + ad-network-id + '\\u2063' + campaign-id + '\\u2063' + itunes-item-id + '\\u2063' + nonce + '\\u2063' + source-app-id + '\\u2063' + fidelity-type + '\\u2063' + timestamp\n",
      "language" : "http"
    },
    {
      "code" : "MEQCIEQlmZRNfYzKBSE8QnhLTIHZZZWCFgZpRqRxHss65KoFAiAJgJKjdrWdkLUOCCjuEx2RmFS7daRzSVZRVZ8RyMyUXg=="
    }
  ],
  "contentHash" : "4e7a9e043c9a5aded59247db5643805884a8fca2cb574452e35a39c52ce064de",
  "crawledAt" : "2025-12-05T11:21:48Z",
  "id" : "085BAE3F-2449-426B-BD50-DF308A498326",
  "kind" : "article",
  "language" : "swift",
  "module" : "StoreKit",
  "overview" : "## Overview\n\nInstall validation informs an ad network when users install and launch an app they purchase after viewing an ad. Ad networks provide an ad with cryptographically signed information that includes their ad network ID. If the ad results in a conversion, the customer’s device sends install-validation postbacks. For information about attribution-winning and nonwinning postbacks, see [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/receiving-ad-attributions-and-postbacks].\n\nStarting in iOS 14.5 with SKAdNetwork 2.2, ad networks can present view-through ads to provide custom ads using any media.\n\nTo provide a view-through ad and initiate a validation, the app calls [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKAdNetwork\/startImpression(_:completionHandler:)], presents the ad, and then calls [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKAdNetwork\/endImpression(_:completionHandler:)]. The ad network needs to generate the [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKAdImpression\/signature] in the [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKAdImpression] instance that both methods share.\n\nAd networks generate the signature on their server using their ad network ID and the PKCS#8 private key they establish when registering to use the API. For more information, see [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/registering-an-ad-network].\n\n### Create an ad impression instance\n\nCreate an instance of [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKAdImpression] to set the properties for the ad impression. These properties contain the same values you use to generate the signature.\n\nThe following table maps the parameters you use in the signature string to their equivalent [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKAdImpression] properties, as the code example demonstrates in the [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/generating-the-signature-to-validate-view-through-ads#Combine-parameter-values] section below:\n\n### Combine parameter values\n\nThe order and content of the signature parameters depends on the [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKAdImpression\/version] of the signature you’re creating. Choose one of the parameter combinations below, based on your [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKAdImpression\/version].\n\nTo generate a signature for version 4 or later, combine the signature parameter values into a UTF-8 string with an invisible separator (`‘\\u2063’`) between them, in the exact order the code below shows:\n\nTo generate a signature for versions 2.2 and 3, combine the signature parameter values into a UTF-8 string with an invisible separator (`‘\\u2063’`) between them, in the exact order the code below shows:\n\nUse the most recent version available in the SDK whenever possible. For information about availability, see [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/skadnetwork-release-notes].\n\n### Sign the combined string\n\nSign the combined UTF-8 string with the following key and algorithm:\n\nThe resulting Digital Encoding Rules (DER)-formatted binary value is the signature.\n\n### Encode the signature\n\nEncode the binary signature you generate into a Base64 string. The result is your ad network attribution signature, [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKAdImpression\/signature], to use for view-through ads. The signature string should resemble the following:\n\nFor more information about Base64 encoding, see [doc:\/\/com.apple.documentation\/documentation\/Foundation\/Data\/base64EncodedString(options:)].\n\n### Use the generated signature string\n\nAfter you generate the signature, you have all the required values for your [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKAdImpression] instance and can use it to call [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKAdNetwork\/startImpression(_:completionHandler:)]. Present your view-through ad, and then call [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKAdNetwork\/endImpression(_:completionHandler:)] using the same [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKAdImpression] instance.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/StoreKit\/generating-the-signature-to-validate-view-through-ads\ncrawled: 2025-12-05T11:21:48Z\n---\n\n# Generating the signature to validate view-through ads\n\n**Article**\n\nInitiate install validation by displaying a view-through ad with signed parameters.\n\n## Overview\n\nInstall validation informs an ad network when users install and launch an app they purchase after viewing an ad. Ad networks provide an ad with cryptographically signed information that includes their ad network ID. If the ad results in a conversion, the customer’s device sends install-validation postbacks. For information about attribution-winning and nonwinning postbacks, see [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/receiving-ad-attributions-and-postbacks].\n\nStarting in iOS 14.5 with SKAdNetwork 2.2, ad networks can present view-through ads to provide custom ads using any media.\n\n\n\nTo provide a view-through ad and initiate a validation, the app calls [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKAdNetwork\/startImpression(_:completionHandler:)], presents the ad, and then calls [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKAdNetwork\/endImpression(_:completionHandler:)]. The ad network needs to generate the [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKAdImpression\/signature] in the [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKAdImpression] instance that both methods share.\n\nAd networks generate the signature on their server using their ad network ID and the PKCS#8 private key they establish when registering to use the API. For more information, see [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/registering-an-ad-network].\n\n### Create an ad impression instance\n\nCreate an instance of [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKAdImpression] to set the properties for the ad impression. These properties contain the same values you use to generate the signature.\n\nThe following table maps the parameters you use in the signature string to their equivalent [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKAdImpression] properties, as the code example demonstrates in the [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/generating-the-signature-to-validate-view-through-ads#Combine-parameter-values] section below:\n\n\n\n### Combine parameter values\n\nThe order and content of the signature parameters depends on the [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKAdImpression\/version] of the signature you’re creating. Choose one of the parameter combinations below, based on your [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKAdImpression\/version].\n\nTo generate a signature for version 4 or later, combine the signature parameter values into a UTF-8 string with an invisible separator (`‘\\u2063’`) between them, in the exact order the code below shows:\n\n```http\nversion + '\\u2063' + ad-network-id + '\\u2063' + source-identifier + '\\u2063' + itunes-item-id + '\\u2063' + nonce + '\\u2063' + source-app-id + '\\u2063' + fidelity-type + '\\u2063' + timestamp\n\n```\n\nTo generate a signature for versions 2.2 and 3, combine the signature parameter values into a UTF-8 string with an invisible separator (`‘\\u2063’`) between them, in the exact order the code below shows:\n\n```http\nversion + '\\u2063' + ad-network-id + '\\u2063' + campaign-id + '\\u2063' + itunes-item-id + '\\u2063' + nonce + '\\u2063' + source-app-id + '\\u2063' + fidelity-type + '\\u2063' + timestamp\n\n```\n\nUse the most recent version available in the SDK whenever possible. For information about availability, see [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/skadnetwork-release-notes].\n\n### Sign the combined string\n\nSign the combined UTF-8 string with the following key and algorithm:\n\n- Your PKCS#8 private key.\n- The Elliptic Curve Digital Signature Algorithm (ECDSA) with a SHA-256 hash.\n\nThe resulting Digital Encoding Rules (DER)-formatted binary value is the signature.\n\n### Encode the signature\n\nEncode the binary signature you generate into a Base64 string. The result is your ad network attribution signature, [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKAdImpression\/signature], to use for view-through ads. The signature string should resemble the following:\n\n```\nMEQCIEQlmZRNfYzKBSE8QnhLTIHZZZWCFgZpRqRxHss65KoFAiAJgJKjdrWdkLUOCCjuEx2RmFS7daRzSVZRVZ8RyMyUXg==\n```\n\nFor more information about Base64 encoding, see [doc:\/\/com.apple.documentation\/documentation\/Foundation\/Data\/base64EncodedString(options:)].\n\n### Use the generated signature string\n\nAfter you generate the signature, you have all the required values for your [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKAdImpression] instance and can use it to call [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKAdNetwork\/startImpression(_:completionHandler:)]. Present your view-through ad, and then call [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKAdNetwork\/endImpression(_:completionHandler:)] using the same [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKAdImpression] instance.\n\n## Signing view-through ads\n\n- **SKAdImpression**: A class that defines an ad impression for a view-through ad.\n- **startImpression(_:completionHandler:)**: Indicates that your app is presenting a view-through ad to the user.\n- **endImpression(_:completionHandler:)**: Indicates that your app is no longer presenting a view-through ad to the user.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "A class that defines an ad impression for a view-through ad.",
          "name" : "SKAdImpression",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/SKAdImpression"
        },
        {
          "description" : "Indicates that your app is presenting a view-through ad to the user.",
          "name" : "startImpression(_:completionHandler:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/SKAdNetwork\/startImpression(_:completionHandler:)"
        },
        {
          "description" : "Indicates that your app is no longer presenting a view-through ad to the user.",
          "name" : "endImpression(_:completionHandler:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/SKAdNetwork\/endImpression(_:completionHandler:)"
        }
      ],
      "title" : "Signing view-through ads"
    }
  ],
  "source" : "appleJSON",
  "title" : "Generating the signature to validate view-through ads",
  "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/generating-the-signature-to-validate-view-through-ads"
}