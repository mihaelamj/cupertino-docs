{
  "abstract" : "Re-engage previous subscribers with a free or discounted offer for an auto-renewable subscription, for a specific duration.",
  "codeExamples" : [
    {
      "code" : "\/\/ Prepare the purchase options.\nvar purchaseOptions: Set<Product.PurchaseOption> = []\n\n\/\/ Add the win-back offer to the purchase.\nif let offer = purchaseIntent.offer, offer.type == .winBack {\n    purchaseOptions.insert(.winBackOffer(offer))\n}\n\n\/\/ Present the purchase.\nlet result = try await purchaseIntent.product.purchase(options: purchaseOptions)",
      "language" : "swift"
    }
  ],
  "contentHash" : "d449dcd82cad7a6c2dc22b8589453433b2b596e479e0c0081e46d898529f1f56",
  "crawledAt" : "2025-12-02T17:53:36Z",
  "id" : "00E3C857-2D21-4F0E-9F21-86E8383ED57F",
  "kind" : "article",
  "language" : "swift",
  "module" : "StoreKit",
  "overview" : "## Overview\n\nA win-back offer is a free or discounted offer for an auto-renewable subscription for eligible customers whose subscription is *churned*. A churned subscription is one that has an [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/Transaction\/expirationDate] in the past, and a [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/Product\/SubscriptionInfo\/RenewalInfo\/willAutoRenew] value of `false`. You set up win-back offers in App Store Connect, including the criteria that determines whether a customer is eligible. You can base eligibility on the duration of the customer’s paid subscription, the time since the subscription expired, and the time that must pass between redeemed offers. You also set the discount type, and specify the regions or countries in which the offer is available.\n\nYou can merchandise win-back offers in multiple ways. App Store Connect provides a direct link that you can share through your own channels, such as email. Customers can also discover and redeem win-back offers in the App Store, in their Apple account in the Subscription settings, and in your app.\n\nWithin your app, you can merchandise win-back offers with the win-back offer sheet, using StoreKit views, or by using other StoreKit APIs to fully customize your own merchandising.\n\nYour app needs to handle win-back offers that customers redeem outside the app. By default, your app receives a completed purchase transaction when someone redeems the offer outside of the app. This workflow results when the Streamlined Purchasing option in App Store Connect is on, its default state. You can choose to turn off Streamlined Purchasing to enable the customer to complete the purchase within your app. For more information, see [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/supporting-win-back-offers-in-your-app#Handle-win-back-offers-redeemed-outside-of-your-app] below.\n\n### Configure win-back offers in App Store Connect\n\nSet up win-back offers in App Store Connect by following the instructions in [https:\/\/developer.apple.com\/help\/app-store-connect\/manage-subscriptions\/set-up-win-back-offers]. As you set up a win-back offer, consider the following:\n\n### Configure Streamlined Purchasing in App Store Connect\n\nWhen you set up your win-back offer, you can also set the Streamlined Purchasing option in App Store Connect. This setting applies to all win-back offers and contingent pricing in your app. It affects how your app handles a win-back offer redemption, as follows:\n\nFor more information on configuring this setting in App Store Connect, see [https:\/\/developer.apple.com\/help\/app-store-connect\/manage-subscriptions\/manage-streamlined-purchasing].\n\n### Merchandise win-back offers in your app\n\nStoreKit provides several ways to merchandise win-back offers to eligible customers in your app. By default, StoreKit displays a win-back offer sheet when it receives a [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/Message\/Reason-swift.struct\/winBackOffer] message from the App Store. You can also merchandise the win-back offer using StoreKit views, or other StoreKit APIs to fully customize the experience.\n\nFor information on implementing each of these options, see [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/merchandising-win-back-offers-in-your-app].\n\n### Merchandise win-back offers outside your app using the direct link\n\nAfter you create a win-back offer, App Store Connect provides a direct link. Use the direct link to merchandise the win-back offer through your own channels.\n\nBefore you send a direct link to a customer, check whether the customer is eligible to redeem the offer by calling the [doc:\/\/com.apple.documentation\/documentation\/AppStoreServerAPI\/Get-All-Subscription-Statuses] endpoint from your server. The [doc:\/\/com.apple.documentation\/documentation\/AppStoreServerAPI\/JWSRenewalInfoDecodedPayload] from the response contains the [doc:\/\/com.apple.documentation\/documentation\/AppStoreServerAPI\/eligibleWinBackOfferIds] array, which lists the eligible offers. Send the direct link to eligible customers only.\n\nIf the [doc:\/\/com.apple.documentation\/documentation\/AppStoreServerAPI\/eligibleWinBackOfferIds] array has multiple entries, the customer is eligible for more than one offer. The App Store sets the order of the win-back offer IDs with the best offer first. The order takes into account the available offers you configure in App Store Connect for the customer’s most recent subscription in the subscription group.\n\n### Handle offers redeemed through the win-back offer sheet\n\nWhen customers redeem a win-back offer using the win-back offer sheet, StoreKit treats this transaction the same as a purchase that occurs outside of the app. Specifically, the app receives the transaction in the [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/Transaction\/updates] sequence of [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/Transaction]. Be sure your app creates a task to iterate through [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/Transaction\/updates] as soon as it launches. For more information and sample code, see [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/Transaction\/updates].\n\n### Handle win-back offers redeemed outside of your app\n\nCustomers can discover and redeem win-back offers outside of your app in several ways: through the direct link that you merchandise, in the App Store, and when they manage their subscriptions in their Apple account. How your app handles the redemption depends on the whether the Streamlined Purchasing setting is on or off in App Store Connect.\n\nIf Streamlined Purchasing is on (the default setting), customers complete the win-back offer purchase outside of your app. Your app receives the completed purchase transaction the next time they open the app. Treat this transaction the same as any purchase that completes outside of your app, and unlock the purchased content. Specifically:\n\nThe transaction entitles the customer to the auto-renewable subscription. Your app unlocks the purchased content and finishes the transaction with [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/Transaction\/finish()].\n\nIf you turn off Streamlined Purchasing in App Store Connect, your app receives a purchase intent instead of a completed transaction. When a customer initiates a redemption outside your app, with Streamlined Purchasing off, the flow is as follows:\n\nThe following example checks the [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/PurchaseIntent\/offer] property of [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/PurchaseIntent] to detect whether the purchase intent is for a win-back offer, and adds the offer to the purchase options:\n\nFinally, follow the same workflow your app uses for any successful purchase, such as unlocking the purchased content and finishing the transaction with [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/Transaction\/finish()].\n\n### Identify subscriptions purchased with a win-back offer\n\nWhen customers successfully redeem subscription offers, including win-back offers, the transaction information contains the offer details. Find those details in the app and on your server, as follows:\n\n### Testing win-back offers\n\nYou can test win-back offers early in your development using StoreKit Testing in Xcode, and in the sandbox environment. For more information, see [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/testing-win-back-offers-in-xcode] and [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/testing-win-back-offers-in-the-sandbox-environment].",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/StoreKit\/supporting-win-back-offers-in-your-app\ncrawled: 2025-12-02T17:53:36Z\n---\n\n# Supporting win-back offers in your app\n\n**Article**\n\nRe-engage previous subscribers with a free or discounted offer for an auto-renewable subscription, for a specific duration.\n\n## Overview\n\nA win-back offer is a free or discounted offer for an auto-renewable subscription for eligible customers whose subscription is *churned*. A churned subscription is one that has an [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/Transaction\/expirationDate] in the past, and a [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/Product\/SubscriptionInfo\/RenewalInfo\/willAutoRenew] value of `false`. You set up win-back offers in App Store Connect, including the criteria that determines whether a customer is eligible. You can base eligibility on the duration of the customer’s paid subscription, the time since the subscription expired, and the time that must pass between redeemed offers. You also set the discount type, and specify the regions or countries in which the offer is available.\n\n\n\nYou can merchandise win-back offers in multiple ways. App Store Connect provides a direct link that you can share through your own channels, such as email. Customers can also discover and redeem win-back offers in the App Store, in their Apple account in the Subscription settings, and in your app.\n\nWithin your app, you can merchandise win-back offers with the win-back offer sheet, using StoreKit views, or by using other StoreKit APIs to fully customize your own merchandising.\n\nYour app needs to handle win-back offers that customers redeem outside the app. By default, your app receives a completed purchase transaction when someone redeems the offer outside of the app. This workflow results when the Streamlined Purchasing option in App Store Connect is on, its default state. You can choose to turn off Streamlined Purchasing to enable the customer to complete the purchase within your app. For more information, see [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/supporting-win-back-offers-in-your-app#Handle-win-back-offers-redeemed-outside-of-your-app] below.\n\n### Configure win-back offers in App Store Connect\n\nSet up win-back offers in App Store Connect by following the instructions in [https:\/\/developer.apple.com\/help\/app-store-connect\/manage-subscriptions\/set-up-win-back-offers]. As you set up a win-back offer, consider the following:\n\n- You create the win-back offer identifier. This alphanumeric string appears in transaction information and subscription renewal information.\n- After you confirm the win-back offer details, App Store Connect creates a numeric win-back offer Apple ID for the offer, and a direct link. The direct link uses the offer’s Apple ID, and has the format `https:\/\/apps.apple.com\/win-back\/<win-back offer Apple ID>`.\n- Add an approved subscription image in App Store Connect. The App Store requires the image if you choose to promote the win-back offer on the App Store. The win-back offer sheet and the direct link also use the image, if it’s available. For more information, see [https:\/\/developer.apple.com\/help\/app-store-connect\/manage-in-app-purchases\/view-and-edit-in-app-purchase-information#add-or-remove-an-image].\n\n\n\n### Configure Streamlined Purchasing in App Store Connect\n\nWhen you set up your win-back offer, you can also set the Streamlined Purchasing option in App Store Connect. This setting applies to all win-back offers and contingent pricing in your app. It affects how your app handles a win-back offer redemption, as follows:\n\n- With Streamlined Purchasing on (default), the customer completes the win-back offer purchase outside of your app. Your app receives a completed purchase transaction in the [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/Transaction\/updates] sequence if it’s running, and in the [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/Transaction\/all] or [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/Transaction\/currentEntitlements] sequences otherwise. Your app is responsible for unlocking the purchased product, as usual.\n- With Streamlined Purchasing turned off, your app has the opportunity to perform processing related to the win-back offer before it enables the customer to complete the purchase. The workflow starts when the customer initiates the purchase outside of your app. The system prompts them to install the app if it isn’t already installed. Your app receives a_ _purchase intent in the [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/PurchaseIntent\/intents] sequence, instead of a transaction, and must use the [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/PurchaseIntent] API to complete the purchase.\n- If customers redeem a win-back offer through the manage subscriptions page in their Apple account, the redemption always behaves as if Streamline Purchasing is on, and your app receives a completed purchase transaction.\n\n\n\nFor more information on configuring this setting in App Store Connect, see [https:\/\/developer.apple.com\/help\/app-store-connect\/manage-subscriptions\/manage-streamlined-purchasing].\n\n### Merchandise win-back offers in your app\n\nStoreKit provides several ways to merchandise win-back offers to eligible customers in your app. By default, StoreKit displays a win-back offer sheet when it receives a [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/Message\/Reason-swift.struct\/winBackOffer] message from the App Store. You can also merchandise the win-back offer using StoreKit views, or other StoreKit APIs to fully customize the experience.\n\nFor information on implementing each of these options, see [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/merchandising-win-back-offers-in-your-app].\n\n### Merchandise win-back offers outside your app using the direct link\n\nAfter you create a win-back offer, App Store Connect provides a direct link. Use the direct link to merchandise the win-back offer through your own channels.\n\nBefore you send a direct link to a customer, check whether the customer is eligible to redeem the offer by calling the [doc:\/\/com.apple.documentation\/documentation\/AppStoreServerAPI\/Get-All-Subscription-Statuses] endpoint from your server. The [doc:\/\/com.apple.documentation\/documentation\/AppStoreServerAPI\/JWSRenewalInfoDecodedPayload] from the response contains the [doc:\/\/com.apple.documentation\/documentation\/AppStoreServerAPI\/eligibleWinBackOfferIds] array, which lists the eligible offers. Send the direct link to eligible customers only.\n\nIf the [doc:\/\/com.apple.documentation\/documentation\/AppStoreServerAPI\/eligibleWinBackOfferIds] array has multiple entries, the customer is eligible for more than one offer. The App Store sets the order of the win-back offer IDs with the best offer first. The order takes into account the available offers you configure in App Store Connect for the customer’s most recent subscription in the subscription group.\n\n### Handle offers redeemed through the win-back offer sheet\n\nWhen customers redeem a win-back offer using the win-back offer sheet, StoreKit treats this transaction the same as a purchase that occurs outside of the app. Specifically, the app receives the transaction in the [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/Transaction\/updates] sequence of [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/Transaction]. Be sure your app creates a task to iterate through [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/Transaction\/updates] as soon as it launches. For more information and sample code, see [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/Transaction\/updates].\n\n### Handle win-back offers redeemed outside of your app\n\nCustomers can discover and redeem win-back offers outside of your app in several ways: through the direct link that you merchandise, in the App Store, and when they manage their subscriptions in their Apple account. How your app handles the redemption depends on the whether the Streamlined Purchasing setting is on or off in App Store Connect.\n\nIf Streamlined Purchasing is on (the default setting), customers complete the win-back offer purchase outside of your app. Your app receives the completed purchase transaction the next time they open the app. Treat this transaction the same as any purchase that completes outside of your app, and unlock the purchased content. Specifically:\n\n- To get the transactions that occurred in the past, including while your app wasn’t running, iterate the [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/Transaction\/all] or [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/Transaction\/currentEntitlements] sequences on [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/Transaction] when the app launches.\n- To observe transactions that occur outside of the app while the app is running, iterate [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/Transaction\/updates] on [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/Transaction]. Create a [doc:\/\/com.apple.documentation\/documentation\/Swift\/Task] to iterate through the transactions from the listener as soon as your app launches. For more information and sample code, see [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/Transaction\/updates].\n\nThe transaction entitles the customer to the auto-renewable subscription. Your app unlocks the purchased content and finishes the transaction with [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/Transaction\/finish()].\n\nIf you turn off Streamlined Purchasing in App Store Connect, your app receives a purchase intent instead of a completed transaction. When a customer initiates a redemption outside your app, with Streamlined Purchasing off, the flow is as follows:\n\n1. The system opens your app if it isn’t already running. StoreKit doesn’t display the win-back offer sheet when a purchase intent is in progress.\n2. StoreKit sends the win-back offer information to the [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/PurchaseIntent\/intents] asynchronous sequence of [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/PurchaseIntent].\n3. Your app has the opportunity to perform any actions related to the purchase before it prompts the customer to complete the purchase. For example, your app might ask the customer to log in.\n4. Your app calls the [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/Product\/purchase(options:)] method on the [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/PurchaseIntent\/product] of the [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/PurchaseIntent] to enable the customer to complete the purchase. Be sure to add the win-back offer to the purchase options.\n\nThe following example checks the [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/PurchaseIntent\/offer] property of [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/PurchaseIntent] to detect whether the purchase intent is for a win-back offer, and adds the offer to the purchase options:\n\n```swift\n\/\/ Prepare the purchase options.\nvar purchaseOptions: Set<Product.PurchaseOption> = []\n\n\/\/ Add the win-back offer to the purchase.\nif let offer = purchaseIntent.offer, offer.type == .winBack {\n    purchaseOptions.insert(.winBackOffer(offer))\n}\n\n\/\/ Present the purchase.\nlet result = try await purchaseIntent.product.purchase(options: purchaseOptions)\n```\n\nFinally, follow the same workflow your app uses for any successful purchase, such as unlocking the purchased content and finishing the transaction with [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/Transaction\/finish()].\n\n\n\n### Identify subscriptions purchased with a win-back offer\n\nWhen customers successfully redeem subscription offers, including win-back offers, the transaction information contains the offer details. Find those details in the app and on your server, as follows:\n\n- In your app, check the [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/Transaction] property, [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/Transaction\/offer-swift.property]. An offer type value of `winback` indicates the customer redeemed a win-back offer.\n- On your server, check the [doc:\/\/com.apple.documentation\/documentation\/AppStoreServerAPI\/JWSTransactionDecodedPayload] that you receive in [doc:\/\/com.apple.documentation\/documentation\/AppStoreServerNotifications\/App-Store-Server-Notifications-V2] notifications or [doc:\/\/com.apple.documentation\/documentation\/AppStoreServerAPI] responses. The [doc:\/\/com.apple.documentation\/documentation\/AppStoreServerAPI\/offerIdentifier] represents the offer that’s applied to the transaction. An [doc:\/\/com.apple.documentation\/documentation\/AppStoreServerAPI\/offerType] of `4` indicates a win-back offer.\n\n### Testing win-back offers\n\nYou can test win-back offers early in your development using StoreKit Testing in Xcode, and in the sandbox environment. For more information, see [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/testing-win-back-offers-in-xcode] and [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/testing-win-back-offers-in-the-sandbox-environment].\n\n## Offers\n\n- **Supporting offer codes in your app**: Enable customers to redeem offer codes through the App Store or within your app.\n- **Merchandising win-back offers in your app**: Present win-back offers to eligible customers in your app with the win-back offer sheet or by implementing custom merchandising.\n- **Product.SubscriptionOffer**: Information about a subscription offer that you configure in App Store Connect.\n- **Product.SubscriptionOffer.OfferType**: The types of offers for auto-renewable subscriptions.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Enable customers to redeem offer codes through the App Store or within your app.",
          "name" : "Supporting offer codes in your app",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/supporting-offer-codes-in-your-app"
        },
        {
          "description" : "Present win-back offers to eligible customers in your app with the win-back offer sheet or by implementing custom merchandising.",
          "name" : "Merchandising win-back offers in your app",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/merchandising-win-back-offers-in-your-app"
        },
        {
          "description" : "Information about a subscription offer that you configure in App Store Connect.",
          "name" : "Product.SubscriptionOffer",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/Product\/SubscriptionOffer"
        },
        {
          "description" : "The types of offers for auto-renewable subscriptions.",
          "name" : "Product.SubscriptionOffer.OfferType",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/Product\/SubscriptionOffer\/OfferType"
        }
      ],
      "title" : "Offers"
    }
  ],
  "source" : "appleJSON",
  "title" : "Supporting win-back offers in your app",
  "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/supporting-win-back-offers-in-your-app"
}