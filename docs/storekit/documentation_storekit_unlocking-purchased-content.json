{
  "abstract" : "Deliver content to the customer after validating the purchase.",
  "codeExamples" : [
    {
      "code" : "if (rocketCarEnabled) {\n    \/\/ Use the rocket car.\n} else {\n    \/\/ Use the regular car.\n}",
      "language" : "swift"
    }
  ],
  "contentHash" : "4e929a2398a9c39bdd47fe7f761497ba710066af3ccfc440e1f3d6caa716fafc",
  "crawledAt" : "2025-12-01T12:12:46Z",
  "id" : "411E17AF-3BB0-4807-8A20-9CA1D349D4C3",
  "kind" : "article",
  "module" : "StoreKit",
  "overview" : "## Overview\n\nAfter a purchase is complete, it’s your responsibility to make sure that you programmatically make the content available to the customer.\n\n### Identify the purchased content\n\nFor an in-app purchase product that enables app functionality, such as a premium subscription, set a Boolean value to enable the code path and update your user interface as needed. Consult your app’s persistent transaction record to determine the functionality to unlock. Your app needs to update this Boolean value whenever the user completes a purchase and at app launch. For information on making a persistent record, see [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/persisting-a-purchase].\n\nFor example, using the app receipt, your code might look like the following:\n\nOr, using the user defaults system.\n\nAfter you define the Boolean variable that represents the in-app purchase content, use the purchase information to enable the appropriate code paths in your app.\n\n### Deliver associated content\n\nYour app needs to deliver any content associated with the purchased product to the user. For example, purchasing instruments in a music app requires delivering the sound files needed to let the user play those instruments. You can embed that content in your app bundle or download it as necessary. Each approach has its advantages and disadvantages.\n\nEmbed smaller files (up to a few megabytes) in your app, especially if you expect most users to buy that product. You can make the content in your app bundle available immediately after the user purchases it. However, to add or update content in your app bundle, you need to submit an updated version of your app.\n\nDownload larger files only when needed. Separating content from your app bundle keeps your app’s initial download small. For example, a game can include the first level in its app bundle and let users download additional levels as they purchase them. Assuming your app fetches its list of product identifiers from your server and the information isn’t hard-coded in the app bundle, you don’t need to resubmit your app to add or update content that your app downloads.\n\n### Load local content\n\nLoad local content using the `NSBundle` class as you load other resources from your app bundle.\n\n### Download content from your own server\n\nAs with all interactions between your app and your server, the details and process of downloading content from your own server are your responsibility. The communication consists of, at a minimum, the following steps:\n\nEnsure that your app handles errors gracefully. For example, if the device runs out of disk space during a download, give the user the option to discard the partial download or to resume the download later when space becomes available.\n\nConsider the security implications of how you host your content and how your app communicates with your server. For more information, see [https:\/\/developer.apple.com\/library\/archive\/documentation\/Security\/Conceptual\/Security_Overview\/Introduction\/Introduction.html#\/\/apple_ref\/doc\/uid\/TP30000976].\n\n### Download content using on-demand resources\n\nYou can use [https:\/\/developer.apple.com\/library\/archive\/documentation\/FileManagement\/Conceptual\/On_Demand_Resources_Guide\/index.html] (ODR) for flexibility in downloading data in your app. ODR is an Apple-hosted service you use to store in-app purchase data that your app downloads after you verify the user’s purchase using the app receipt. ODR doesn’t require a call to restore transactions and authenticate the user to download content hosted on Apple’s server.\n\n### Download hosted content from Apple’s server\n\nApps can use Apple-hosted content for downloaded files. You create an Apple-hosted content bundle using the In-App Purchase Content target in Xcode and submit it to App Store Connect. Apple’s servers store your app’s content using the same infrastructure that supports other large-scale operations, such as the App Store. Apple-hosted content automatically downloads in the background even if your app isn’t running.\n\nIf you need to support older versions of iOS or share your server infrastructure across multiple platforms, you may choose to host your own content using your own server infrastructure.\n\nWhen the user purchases a product that has associated Apple-hosted content, the transaction that passes to your transaction queue observer also includes an instance of [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKDownload] that lets you download the associated content.\n\nTo download the content, add the download objects from the transaction’s [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKPaymentTransaction\/downloads] property to the transaction queue by calling the [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKPaymentQueue\/start(_:)] method of [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKPaymentQueue]. If the value of the `downloads` property is `nil`, there’s no Apple-hosted content for that transaction. Unlike downloading apps, downloading content doesn’t automatically require a Wi-Fi connection for content larger than a certain size. Avoid using cellular networks to download large files without an explicit action from the user.\n\nImplement the [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKPaymentTransactionObserver\/paymentQueue(_:updatedDownloads:)] method on the transaction queue observer to respond to changes in a download’s state, such as by updating progress in your UI. If a download fails, use the information in its [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKDownload\/error] property to present the error to the user.\n\nEnsure that your app handles errors gracefully. For example, if the device runs out of disk space during a download, give the user the option to discard the partial download or to resume the download later when space becomes available.\n\nWhile the content is downloading, update your user interface using the values of the [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKDownload\/progress] and [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKDownload\/timeRemaining] properties. You can use the [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKPaymentQueue\/pause(_:)], [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKPaymentQueue\/resume(_:)], and [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKPaymentQueue\/cancel(_:)] methods of `SKPaymentQueue` from your UI to let the user control in-progress downloads. Use the [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKDownload\/downloadState] property to determine whether the download completes. Don’t use the [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKDownload\/progress] or [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKDownload\/timeRemaining] property of the download object to check its status; these properties are for updating your UI.\n\nIn iOS, your app can manage the downloaded files. The StoreKit framework saves these files for you in the `Caches` directory with the backup flag unset. After the download completes, your app is responsible for moving these files to the appropriate location. For content that can be deleted if the device runs out of disk space (and downloaded again later by your app), keep the files in the `Caches` directory. Otherwise, move the files to the `Documents` folder and set the flag to exclude them from user backups.\n\nIn macOS, the system manages the downloaded files; your app can’t move or delete them directly. To locate the content after downloading it, use the [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKDownload\/contentURL] property of the download object. To locate the file on subsequent launches, use the [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKDownload\/contentURL(forProductID:)] class method of `SKDownload`. To delete a file, use the [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKDownload\/deleteContent(forProductID:)] class method. For information about reading the app receipt, see [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/validating-receipts-with-the-app-store].",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/StoreKit\/unlocking-purchased-content\ncrawled: 2025-12-01T12:12:46Z\n---\n\n# Unlocking purchased content\n\n**Article**\n\nDeliver content to the customer after validating the purchase.\n\n## Overview\n\nAfter a purchase is complete, it’s your responsibility to make sure that you programmatically make the content available to the customer.\n\n### Identify the purchased content\n\nFor an in-app purchase product that enables app functionality, such as a premium subscription, set a Boolean value to enable the code path and update your user interface as needed. Consult your app’s persistent transaction record to determine the functionality to unlock. Your app needs to update this Boolean value whenever the user completes a purchase and at app launch. For information on making a persistent record, see [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/persisting-a-purchase].\n\nFor example, using the app receipt, your code might look like the following:\n\n\n\nOr, using the user defaults system.\n\n\n\nAfter you define the Boolean variable that represents the in-app purchase content, use the purchase information to enable the appropriate code paths in your app.\n\n```swift\nif (rocketCarEnabled) {\n    \/\/ Use the rocket car.\n} else {\n    \/\/ Use the regular car.\n}\n```\n\n### Deliver associated content\n\nYour app needs to deliver any content associated with the purchased product to the user. For example, purchasing instruments in a music app requires delivering the sound files needed to let the user play those instruments. You can embed that content in your app bundle or download it as necessary. Each approach has its advantages and disadvantages.\n\nEmbed smaller files (up to a few megabytes) in your app, especially if you expect most users to buy that product. You can make the content in your app bundle available immediately after the user purchases it. However, to add or update content in your app bundle, you need to submit an updated version of your app.\n\nDownload larger files only when needed. Separating content from your app bundle keeps your app’s initial download small. For example, a game can include the first level in its app bundle and let users download additional levels as they purchase them. Assuming your app fetches its list of product identifiers from your server and the information isn’t hard-coded in the app bundle, you don’t need to resubmit your app to add or update content that your app downloads.\n\n\n\n### Load local content\n\nLoad local content using the `NSBundle` class as you load other resources from your app bundle.\n\n\n\n### Download content from your own server\n\nAs with all interactions between your app and your server, the details and process of downloading content from your own server are your responsibility. The communication consists of, at a minimum, the following steps:\n\n1. Your app sends the receipt to your server and requests the content.\n2. Your server validates the receipt to establish that the user purchased the content, as described in [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/validating-receipts-with-the-app-store].\n3. Assuming the receipt is valid, your server responds to your app with the content.\n\nEnsure that your app handles errors gracefully. For example, if the device runs out of disk space during a download, give the user the option to discard the partial download or to resume the download later when space becomes available.\n\nConsider the security implications of how you host your content and how your app communicates with your server. For more information, see [https:\/\/developer.apple.com\/library\/archive\/documentation\/Security\/Conceptual\/Security_Overview\/Introduction\/Introduction.html#\/\/apple_ref\/doc\/uid\/TP30000976].\n\n### Download content using on-demand resources\n\nYou can use [https:\/\/developer.apple.com\/library\/archive\/documentation\/FileManagement\/Conceptual\/On_Demand_Resources_Guide\/index.html] (ODR) for flexibility in downloading data in your app. ODR is an Apple-hosted service you use to store in-app purchase data that your app downloads after you verify the user’s purchase using the app receipt. ODR doesn’t require a call to restore transactions and authenticate the user to download content hosted on Apple’s server.\n\n### Download hosted content from Apple’s server\n\n\n\nApps can use Apple-hosted content for downloaded files. You create an Apple-hosted content bundle using the In-App Purchase Content target in Xcode and submit it to App Store Connect. Apple’s servers store your app’s content using the same infrastructure that supports other large-scale operations, such as the App Store. Apple-hosted content automatically downloads in the background even if your app isn’t running.\n\nIf you need to support older versions of iOS or share your server infrastructure across multiple platforms, you may choose to host your own content using your own server infrastructure.\n\nWhen the user purchases a product that has associated Apple-hosted content, the transaction that passes to your transaction queue observer also includes an instance of [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKDownload] that lets you download the associated content.\n\nTo download the content, add the download objects from the transaction’s [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKPaymentTransaction\/downloads] property to the transaction queue by calling the [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKPaymentQueue\/start(_:)] method of [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKPaymentQueue]. If the value of the `downloads` property is `nil`, there’s no Apple-hosted content for that transaction. Unlike downloading apps, downloading content doesn’t automatically require a Wi-Fi connection for content larger than a certain size. Avoid using cellular networks to download large files without an explicit action from the user.\n\nImplement the [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKPaymentTransactionObserver\/paymentQueue(_:updatedDownloads:)] method on the transaction queue observer to respond to changes in a download’s state, such as by updating progress in your UI. If a download fails, use the information in its [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKDownload\/error] property to present the error to the user.\n\nEnsure that your app handles errors gracefully. For example, if the device runs out of disk space during a download, give the user the option to discard the partial download or to resume the download later when space becomes available.\n\nWhile the content is downloading, update your user interface using the values of the [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKDownload\/progress] and [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKDownload\/timeRemaining] properties. You can use the [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKPaymentQueue\/pause(_:)], [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKPaymentQueue\/resume(_:)], and [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKPaymentQueue\/cancel(_:)] methods of `SKPaymentQueue` from your UI to let the user control in-progress downloads. Use the [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKDownload\/downloadState] property to determine whether the download completes. Don’t use the [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKDownload\/progress] or [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKDownload\/timeRemaining] property of the download object to check its status; these properties are for updating your UI.\n\n\n\nIn iOS, your app can manage the downloaded files. The StoreKit framework saves these files for you in the `Caches` directory with the backup flag unset. After the download completes, your app is responsible for moving these files to the appropriate location. For content that can be deleted if the device runs out of disk space (and downloaded again later by your app), keep the files in the `Caches` directory. Otherwise, move the files to the `Documents` folder and set the flag to exclude them from user backups.\n\n\n\nIn macOS, the system manages the downloaded files; your app can’t move or delete them directly. To locate the content after downloading it, use the [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKDownload\/contentURL] property of the download object. To locate the file on subsequent launches, use the [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKDownload\/contentURL(forProductID:)] class method of `SKDownload`. To delete a file, use the [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKDownload\/deleteContent(forProductID:)] class method. For information about reading the app receipt, see [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/validating-receipts-with-the-app-store].\n\n## Content delivery\n\n- **Persisting a purchase**: Keep a persistent record of a purchase to continue making the product available as needed.\n- **Finishing a transaction**: Finish the transaction to complete the purchase process.\n- **SKDownload**: Downloadable content associated with a product.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Keep a persistent record of a purchase to continue making the product available as needed.",
          "name" : "Persisting a purchase",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/persisting-a-purchase"
        },
        {
          "description" : "Finish the transaction to complete the purchase process.",
          "name" : "Finishing a transaction",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/finishing-a-transaction"
        },
        {
          "description" : "Downloadable content associated with a product.",
          "name" : "SKDownload",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/SKDownload"
        }
      ],
      "title" : "Content delivery"
    }
  ],
  "source" : "appleJSON",
  "title" : "Unlocking purchased content",
  "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/unlocking-purchased-content"
}