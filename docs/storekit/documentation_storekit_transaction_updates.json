{
  "abstract" : "The asynchronous sequence that emits a transaction when the system creates or updates transactions that occur outside the app or on other devices.",
  "codeExamples" : [
    {
      "code" : "final class TransactionObserver {\n    \n    var updates: Task<Void, Never>? = nil\n    \n    init() {\n        updates = newTransactionListenerTask()\n    }\n\n    deinit {\n        \/\/ Cancel the update handling task when you deinitialize the class.\n        updates?.cancel()\n    }\n    \n    private func newTransactionListenerTask() -> Task<Void, Never> {\n        Task(priority: .background) {\n            for await verificationResult in Transaction.updates {\n                self.handle(updatedTransaction: verificationResult)\n            }\n        }\n    }\n    \n    private func handle(updatedTransaction verificationResult: VerificationResult<Transaction>) {\n        guard case .verified(let transaction) = verificationResult else {\n            \/\/ Ignore unverified transactions.\n            return\n        }\n\n        if let revocationDate = transaction.revocationDate {\n            \/\/ Remove access to the product identified by transaction.productID.\n            \/\/ Transaction.revocationReason provides details about\n            \/\/ the revoked transaction.\n            <#...#>\n        } else if let expirationDate = transaction.expirationDate,\n            expirationDate < Date() {\n            \/\/ Do nothing, this subscription is expired.\n            return\n        } else if transaction.isUpgraded {\n            \/\/ Do nothing, there is an active transaction\n            \/\/ for a higher level of service.\n            return\n        } else {\n            \/\/ Provide access to the product identified by\n            \/\/ transaction.productID.\n            <#...#>\n        }\n    }\n    \n}",
      "language" : "swift"
    }
  ],
  "contentHash" : "070529438924eda5b69c9519692a586d63499d03a4dcff33a97105e14131961e",
  "crawledAt" : "2025-12-02T17:53:28Z",
  "declaration" : {
    "code" : "static var updates: Transaction.Transactions { get }",
    "language" : "swift"
  },
  "id" : "48FCE200-1781-41FC-B52E-00488DDD2EAB",
  "kind" : "property",
  "language" : "swift",
  "module" : "StoreKit",
  "overview" : "## Discussion\n\nUse [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/Transaction\/updates] to receive new transactions while the app is running. This sequence receives transactions that occur outside of the app, such as Ask to Buy transactions, offer code redemptions, and purchases that customers make in the App Store. It also emits transactions that customers complete in your app on another device.\n\nNote that after a successful in-app purchase on the same device, StoreKit returns the transaction through [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/Product\/PurchaseResult\/success(_:)].\n\nThe following example shows a class that creates a [doc:\/\/com.apple.documentation\/documentation\/Swift\/Task] when it initializes. The task retrieves and processes any unfinished transactions.\n\nThe [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/Transaction\/updates] listener receives unfinished transactions just once at app launch, but you can use the [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/Transaction\/unfinished] listener to get your app’s unfinished transactions at any time. For information on finishing transactions, see [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/Transaction\/finish()].",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "tvOS",
    "visionOS",
    "watchOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/StoreKit\/Transaction\/updates\ncrawled: 2025-12-02T17:53:28Z\n---\n\n# updates\n\n**Type Property**\n\nThe asynchronous sequence that emits a transaction when the system creates or updates transactions that occur outside the app or on other devices.\n\n## Declaration\n\n```swift\nstatic var updates: Transaction.Transactions { get }\n```\n\n## Discussion\n\nUse [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/Transaction\/updates] to receive new transactions while the app is running. This sequence receives transactions that occur outside of the app, such as Ask to Buy transactions, offer code redemptions, and purchases that customers make in the App Store. It also emits transactions that customers complete in your app on another device.\n\nNote that after a successful in-app purchase on the same device, StoreKit returns the transaction through [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/Product\/PurchaseResult\/success(_:)].\n\n\n\nThe following example shows a class that creates a [doc:\/\/com.apple.documentation\/documentation\/Swift\/Task] when it initializes. The task retrieves and processes any unfinished transactions.\n\n```swift\nfinal class TransactionObserver {\n    \n    var updates: Task<Void, Never>? = nil\n    \n    init() {\n        updates = newTransactionListenerTask()\n    }\n\n    deinit {\n        \/\/ Cancel the update handling task when you deinitialize the class.\n        updates?.cancel()\n    }\n    \n    private func newTransactionListenerTask() -> Task<Void, Never> {\n        Task(priority: .background) {\n            for await verificationResult in Transaction.updates {\n                self.handle(updatedTransaction: verificationResult)\n            }\n        }\n    }\n    \n    private func handle(updatedTransaction verificationResult: VerificationResult<Transaction>) {\n        guard case .verified(let transaction) = verificationResult else {\n            \/\/ Ignore unverified transactions.\n            return\n        }\n\n        if let revocationDate = transaction.revocationDate {\n            \/\/ Remove access to the product identified by transaction.productID.\n            \/\/ Transaction.revocationReason provides details about\n            \/\/ the revoked transaction.\n            <#...#>\n        } else if let expirationDate = transaction.expirationDate,\n            expirationDate < Date() {\n            \/\/ Do nothing, this subscription is expired.\n            return\n        } else if transaction.isUpgraded {\n            \/\/ Do nothing, there is an active transaction\n            \/\/ for a higher level of service.\n            return\n        } else {\n            \/\/ Provide access to the product identified by\n            \/\/ transaction.productID.\n            <#...#>\n        }\n    }\n    \n}\n```\n\nThe [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/Transaction\/updates] listener receives unfinished transactions just once at app launch, but you can use the [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/Transaction\/unfinished] listener to get your app’s unfinished transactions at any time. For information on finishing transactions, see [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/Transaction\/finish()].\n\n## Related Documentation\n\n- **Supporting offer codes in your app**: Enable customers to redeem offer codes through the App Store or within your app.\n\n## Transaction history and entitlements\n\n- **Transaction**: Information that represents the customer’s purchase of a product in your app.\n- **all**: A sequence that emits all the customer’s transactions for your app.\n- **currentEntitlements**: A sequence of the latest transactions that entitle a customer to In-App Purchases and subscriptions.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Enable customers to redeem offer codes through the App Store or within your app.",
          "name" : "Supporting offer codes in your app",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/supporting-offer-codes-in-your-app"
        }
      ],
      "title" : "Related Documentation"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Information that represents the customer’s purchase of a product in your app.",
          "name" : "Transaction",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/Transaction"
        },
        {
          "description" : "A sequence that emits all the customer’s transactions for your app.",
          "name" : "all",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/Transaction\/all"
        },
        {
          "description" : "A sequence of the latest transactions that entitle a customer to In-App Purchases and subscriptions.",
          "name" : "currentEntitlements",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/Transaction\/currentEntitlements"
        }
      ],
      "title" : "Transaction history and entitlements"
    }
  ],
  "source" : "appleJSON",
  "title" : "updates",
  "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/Transaction\/updates"
}