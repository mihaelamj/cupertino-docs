{
  "abstract" : "Presents the refund request sheet for the transaction in a view controller.",
  "codeExamples" : [

  ],
  "contentHash" : "44608a790a7aa3aaf84b3f48ccd6d1d97f1a4a273efa3704a479b688cd5bdea1",
  "crawledAt" : "2025-12-03T04:39:18Z",
  "declaration" : {
    "code" : "func beginRefundRequest(in controller: NSViewController) async throws -> Transaction.RefundRequestStatus",
    "language" : "swift"
  },
  "id" : "E9E6D2A1-7E32-4F66-A52F-EE80B165163E",
  "kind" : "method",
  "language" : "swift",
  "module" : "StoreKit",
  "overview" : "## Return Value\n\n[doc:\/\/com.apple.storekit\/documentation\/StoreKit\/Transaction\/RefundRequestStatus]\n\n## Discussion\n\nCall this function from account settings or a help menu to enable customers to request a refund for an in-app purchase within your app. When you call this function, the system displays a refund sheet with the customer’s purchase details and a list of reason codes for the customer to choose from. For design guidance, see [https:\/\/developer.apple.com\/design\/human-interface-guidelines\/in-app-purchase\/overview\/introduction\/#providing-help-with-in-app-purchases].\n\nWhen a customer requests a refund for consumable in-app purchases through your app, the App Stores sends a `CONSUMPTION_REQUEST` [doc:\/\/com.apple.documentation\/documentation\/AppStoreServerNotifications\/notificationType] to your server. If the customer provided consent, respond by sending consumption data to the App Store using the [doc:\/\/com.apple.documentation\/documentation\/AppStoreServerAPI\/Send-Consumption-Information] endpoint. If not, don’t respond to the `CONSUMPTION_REQUEST` notification.\n\nThe App Store takes up to 48 hours to either approve or deny a refund.\n\nFor information about setting up your server to receive notifications, see [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/enabling-app-store-server-notifications].\n\n### Test refund requests\n\nThe sandbox environment and StoreKit Testing in Xcode both support testing refund requests. For more information, see [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/testing-refund-requests].",
  "platforms" : [
    "macOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/StoreKit\/Transaction\/beginRefundRequest(in:)-63bvd\ncrawled: 2025-12-03T04:39:18Z\n---\n\n# beginRefundRequest(in:)\n\n**Instance Method**\n\nPresents the refund request sheet for the transaction in a view controller.\n\n## Declaration\n\n```swift\nfunc beginRefundRequest(in controller: NSViewController) async throws -> Transaction.RefundRequestStatus\n```\n\n## Parameters\n\n- **controller**: The [doc:\/\/com.apple.documentation\/documentation\/AppKit\/NSViewController] that the system displays the sheet on.\n\n## Return Value\n\n[doc:\/\/com.apple.storekit\/documentation\/StoreKit\/Transaction\/RefundRequestStatus]\n\n## Discussion\n\nCall this function from account settings or a help menu to enable customers to request a refund for an in-app purchase within your app. When you call this function, the system displays a refund sheet with the customer’s purchase details and a list of reason codes for the customer to choose from. For design guidance, see [https:\/\/developer.apple.com\/design\/human-interface-guidelines\/in-app-purchase\/overview\/introduction\/#providing-help-with-in-app-purchases].\n\nWhen a customer requests a refund for consumable in-app purchases through your app, the App Stores sends a `CONSUMPTION_REQUEST` [doc:\/\/com.apple.documentation\/documentation\/AppStoreServerNotifications\/notificationType] to your server. If the customer provided consent, respond by sending consumption data to the App Store using the [doc:\/\/com.apple.documentation\/documentation\/AppStoreServerAPI\/Send-Consumption-Information] endpoint. If not, don’t respond to the `CONSUMPTION_REQUEST` notification.\n\nThe App Store takes up to 48 hours to either approve or deny a refund.\n\nFor information about setting up your server to receive notifications, see [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/enabling-app-store-server-notifications].\n\n\n\n### Test refund requests\n\nThe sandbox environment and StoreKit Testing in Xcode both support testing refund requests. For more information, see [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/testing-refund-requests].\n\n## Requesting refunds\n\n- **Testing refund requests**: Test your app’s implementation of refund requests, and your app’s and server’s handling of approved and declined refunds.\n- **beginRefundRequest(in:)**: Presents the refund request sheet for the transaction in a window scene.\n- **beginRefundRequest(for:in:)**: Presents the refund request sheet for the specified transaction in a window scene.\n- **beginRefundRequest(for:in:)**: Presents the refund request sheet for the specified transaction in a view controller.\n- **Transaction.RefundRequestError**: The error codes for refund requests.\n- **Transaction.RefundRequestStatus**: The status codes for refund requests.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Test your app’s implementation of refund requests, and your app’s and server’s handling of approved and declined refunds.",
          "name" : "Testing refund requests",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/testing-refund-requests"
        },
        {
          "description" : "Presents the refund request sheet for the transaction in a window scene.",
          "name" : "beginRefundRequest(in:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/Transaction\/beginRefundRequest(in:)-9k0pj"
        },
        {
          "description" : "Presents the refund request sheet for the specified transaction in a window scene.",
          "name" : "beginRefundRequest(for:in:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/Transaction\/beginRefundRequest(for:in:)-65tph"
        },
        {
          "description" : "Presents the refund request sheet for the specified transaction in a view controller.",
          "name" : "beginRefundRequest(for:in:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/Transaction\/beginRefundRequest(for:in:)-9mscy"
        },
        {
          "description" : "The error codes for refund requests.",
          "name" : "Transaction.RefundRequestError",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/Transaction\/RefundRequestError"
        },
        {
          "description" : "The status codes for refund requests.",
          "name" : "Transaction.RefundRequestStatus",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/Transaction\/RefundRequestStatus"
        }
      ],
      "title" : "Requesting refunds"
    }
  ],
  "source" : "appleJSON",
  "title" : "beginRefundRequest(in:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/Transaction\/beginRefundRequest(in:)-63bvd"
}