{
  "abstract" : "Updates the fine and coarse conversion values and indicates whether to send the postback before the conversion window ends, and calls a completion handler if the update fails.",
  "codeExamples" : [

  ],
  "contentHash" : "c62bef8c7ac1a3a44ef3e4b3f66723eee99c01b059ed0c350c9daffdf1285fa4",
  "crawledAt" : "2025-12-05T12:51:47Z",
  "declaration" : {
    "code" : "class func updatePostbackConversionValue(_ fineValue: Int, coarseValue: SKAdNetwork.CoarseConversionValue, lockWindow: Bool, completionHandler completion: (((any Error)?) -> Void)? = nil)",
    "language" : "swift"
  },
  "id" : "AC09CBB2-5BE4-4146-BB60-20BF1C41C922",
  "kind" : "method",
  "language" : "swift",
  "module" : "StoreKit",
  "overview" : "## Discussion\n\nCall this method when the user first launches an app to register the app installation, and again to update conversion values as the user engages with the app. It’s up to your app to decide what the conversion values signify in your app, both the `fineValue` and the `coarseValue`.\n\nThis method supports ads signed with any verison of SKAdNetwork, and you can use it instead of calling [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKAdNetwork\/updatePostbackConversionValue(_:completionHandler:)] and [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKAdNetwork\/updatePostbackConversionValue(_:coarseValue:completionHandler:)]. The system automatically determines the method’s behavior based on the ad’s version, as the following sections describe — the app doesn’t need to know the ad version. To take advantage of the multiple postbacks available starting in version 4, use this method or [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKAdNetwork\/updatePostbackConversionValue(_:coarseValue:completionHandler:)].\n\nThis method returns [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKANError-swift.struct\/Code\/invalidConversionValue] if the `fineValue` is outside of the allowed range.\n\n### Update conversion values for ads signed with SKAdNetwork 4 or later\n\nFor ads that ad networks sign using version 4 or later, calling this method behaves as follows:\n\nFor information about the data you may receive in postbacks, see [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/receiving-postbacks-in-multiple-conversion-windows].\n\n### Update conversion values for ads signed with SKAdNetwork 3 or earlier\n\nFor ads that ad networks sign using version 3 or earlier, calling this method behaves as follows:\n\nFor more information about SKAdNetwork versions, see [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/skadnetwork-release-notes].",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/StoreKit\/SKAdNetwork\/updatePostbackConversionValue(_:coarseValue:lockWindow:completionHandler:)\ncrawled: 2025-12-05T12:51:47Z\n---\n\n# updatePostbackConversionValue(_:coarseValue:lockWindow:completionHandler:)\n\n**Type Method**\n\nUpdates the fine and coarse conversion values and indicates whether to send the postback before the conversion window ends, and calls a completion handler if the update fails.\n\n## Declaration\n\n```swift\nclass func updatePostbackConversionValue(_ fineValue: Int, coarseValue: SKAdNetwork.CoarseConversionValue, lockWindow: Bool, completionHandler completion: (((any Error)?) -> Void)? = nil)\n```\n\n```swift\nclass func updatePostbackConversionValue(_ fineValue: Int, coarseValue: SKAdNetwork.CoarseConversionValue, lockWindow: Bool) async throws\n```\n\n## Parameters\n\n- **fineValue**: An unsigned 6-bit value `≥0` and `≤63`. The app or the ad network defines the meaning of the fine conversion value.\n- **coarseValue**: An [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKAdNetwork\/CoarseConversionValue] value of [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKAdNetwork\/CoarseConversionValue\/low], [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKAdNetwork\/CoarseConversionValue\/medium], or [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKAdNetwork\/CoarseConversionValue\/high]. The app or the ad network defines the meaning of the coarse conversion value.\n- **lockWindow**: A Boolean value that indicates whether to send the postback before the conversion window ends. Use `true` to tell the system to send the postback without waiting for the end of the conversion window. The default value is `false`.\n- **completion**: An optional completion handler you provide to catch and handle any errors this method encounters when you update a conversion value. Set this value to `nil` if you don’t provide a handler.\n\n## Discussion\n\nCall this method when the user first launches an app to register the app installation, and again to update conversion values as the user engages with the app. It’s up to your app to decide what the conversion values signify in your app, both the `fineValue` and the `coarseValue`.\n\nThis method supports ads signed with any verison of SKAdNetwork, and you can use it instead of calling [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKAdNetwork\/updatePostbackConversionValue(_:completionHandler:)] and [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKAdNetwork\/updatePostbackConversionValue(_:coarseValue:completionHandler:)]. The system automatically determines the method’s behavior based on the ad’s version, as the following sections describe — the app doesn’t need to know the ad version. To take advantage of the multiple postbacks available starting in version 4, use this method or [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKAdNetwork\/updatePostbackConversionValue(_:coarseValue:completionHandler:)].\n\nThis method returns [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKANError-swift.struct\/Code\/invalidConversionValue] if the `fineValue` is outside of the allowed range.\n\n\n\n### Update conversion values for ads signed with SKAdNetwork 4 or later\n\nFor ads that ad networks sign using version 4 or later, calling this method behaves as follows:\n\n- Both the `fineValue` and `coarseValue` represent conversion values. The method ignores the `fineValue` after the first conversion window.\n- Setting the `lockWindow` parameter to `true` indicates a final update for the conversion value for the current conversion window. The system ignores additional calls to update the conversion value until the end of the conversion window.\n- Setting the `lockWindow` parameter to `false` continues updating the conversion value throughout the conversion window.\n\nFor information about the data you may receive in postbacks, see [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/receiving-postbacks-in-multiple-conversion-windows].\n\n### Update conversion values for ads signed with SKAdNetwork 3 or earlier\n\nFor ads that ad networks sign using version 3 or earlier, calling this method behaves as follows:\n\n- The `fineValue` represents the conversion value.\n- The method ignores the `coarseValue` and `lockWindow` parameters.\n- There’s a single conversion period that ends after a rolling 24-hour timer expires. The 24-hour timer restarts each time the app calls this method with a valid conversion value greater than the previous value. When the timer expires, the conversion value is final and subsequent calls to this method have no effect.\n- The device sends the postback 0–24 hours after the timer expires.\n- The postback contains the final conversion value only if the postback data tier contains the value.\n\nFor more information about SKAdNetwork versions, see [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/skadnetwork-release-notes].\n\n## Providing conversion information\n\n- **updatePostbackConversionValue(_:coarseValue:completionHandler:)**: Updates the fine and coarse conversion values, and calls a completion handler if the update fails.\n- **SKAdNetwork.CoarseConversionValue**: Coarse values to use for updating conversion values.\n- **updatePostbackConversionValue(_:completionHandler:)**: Verifies the first launch of an advertised app and, on subsequent calls, updates the conversion value or calls a completion handler if the update fails.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Updates the fine and coarse conversion values, and calls a completion handler if the update fails.",
          "name" : "updatePostbackConversionValue(_:coarseValue:completionHandler:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/SKAdNetwork\/updatePostbackConversionValue(_:coarseValue:completionHandler:)"
        },
        {
          "description" : "Coarse values to use for updating conversion values.",
          "name" : "SKAdNetwork.CoarseConversionValue",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/SKAdNetwork\/CoarseConversionValue"
        },
        {
          "description" : "Verifies the first launch of an advertised app and, on subsequent calls, updates the conversion value or calls a completion handler if the update fails.",
          "name" : "updatePostbackConversionValue(_:completionHandler:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/SKAdNetwork\/updatePostbackConversionValue(_:completionHandler:)"
        }
      ],
      "title" : "Providing conversion information"
    }
  ],
  "source" : "appleJSON",
  "title" : "updatePostbackConversionValue(_:coarseValue:lockWindow:completionHandler:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/SKAdNetwork\/updatePostbackConversionValue(_:coarseValue:lockWindow:completionHandler:)"
}