{
  "abstract" : "A queue of payment transactions for the App Store to process.",
  "codeExamples" : [

  ],
  "conformsTo" : [
    "CVarArg",
    "CustomDebugStringConvertible",
    "CustomStringConvertible",
    "Equatable",
    "Hashable",
    "NSObjectProtocol",
    "Sendable",
    "SendableMetatype"
  ],
  "contentHash" : "dee1929079a677bcac7796b2f0d342db65eda85ff69772b5af2f184b584d6082",
  "crawledAt" : "2025-12-02T16:15:10Z",
  "declaration" : {
    "code" : "class SKPaymentQueue",
    "language" : "swift"
  },
  "id" : "9E9BA7D5-B633-40DC-8167-39D457086365",
  "kind" : "class",
  "language" : "swift",
  "module" : "StoreKit",
  "overview" : "## Overview\n\nThe payment queue communicates with the App Store and presents a user interface so that the user can authorize payment. The contents of the queue are persistent between launches of your app.\n\nTo process a payment, first add at least one observer object ([doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKPaymentTransactionObserver]) to the queue (see [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKPaymentQueue\/add(_:)-5ciz2]). Then, add a payment object ([doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKPayment]) for the item the user wants to purchase. Each time you add a payment object, the queue creates a transaction object ([doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKPaymentTransaction]) to process that payment and enqueues it to be processed. After payment is fulfilled, the queue updates the transaction object and then calls any observer objects to provide them the updated transaction. Your observer should process the transaction and then remove it from the queue.\n\nThe exact mechanism you use to process a processed transaction depends on the design of your app and the product being purchased. Here are a few common examples:\n\nFor more information on designing the payment processing portion of your app, see [https:\/\/developer.apple.com\/library\/archive\/documentation\/NetworkingInternet\/Conceptual\/StoreKitGuide\/Introduction.html#\/\/apple_ref\/doc\/uid\/TP40008267].",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "tvOS",
    "visionOS",
    "watchOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/StoreKit\/SKPaymentQueue\ncrawled: 2025-12-02T16:15:10Z\n---\n\n# SKPaymentQueue\n\n**Class**\n\nA queue of payment transactions for the App Store to process.\n\n## Declaration\n\n```swift\nclass SKPaymentQueue\n```\n\n## Overview\n\nThe payment queue communicates with the App Store and presents a user interface so that the user can authorize payment. The contents of the queue are persistent between launches of your app.\n\nTo process a payment, first add at least one observer object ([doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKPaymentTransactionObserver]) to the queue (see [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKPaymentQueue\/add(_:)-5ciz2]). Then, add a payment object ([doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKPayment]) for the item the user wants to purchase. Each time you add a payment object, the queue creates a transaction object ([doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKPaymentTransaction]) to process that payment and enqueues it to be processed. After payment is fulfilled, the queue updates the transaction object and then calls any observer objects to provide them the updated transaction. Your observer should process the transaction and then remove it from the queue.\n\nThe exact mechanism you use to process a processed transaction depends on the design of your app and the product being purchased. Here are a few common examples:\n\n- If the product is a feature already built into your app, your app enables the feature to process the transaction.\n- If the product includes downloadable content provided by the App Store, your app retrieves the [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKDownload] objects from the transaction and ask the payment queue to download them. You provide the actual content files to be served by the App Store to App Store Connect when you create the product information.\n- If the product represents downloadable content provided by your own server, your app might open a network connection to your server and download the content from there.\n\nFor more information on designing the payment processing portion of your app, see [https:\/\/developer.apple.com\/library\/archive\/documentation\/NetworkingInternet\/Conceptual\/StoreKitGuide\/Introduction.html#\/\/apple_ref\/doc\/uid\/TP40008267].\n\n## Determining Whether the User Can Make Payments\n\n- **canMakePayments()**: A method that indicates whether the person can make purchases.\n\n## Determining Store Content\n\n- **storefront**: The App Store storefront of the device.\n\n## Getting the Queue\n\n- **default()**: Returns the default payment queue instance.\n\n## Adding, Getting, and Removing Observers\n\n- **add(_:)**: Adds an observer to the payment queue.\n- **transactionObservers**: An array of all active payment queue observers.\n- **remove(_:)**: Removes an observer from the payment queue.\n\n## Managing Transactions\n\n- **delegate**: A delegate that provides information needed to complete transactions.\n- **transactions**: Returns an array of pending transactions.\n- **add(_:)**: Adds a payment request to the queue.\n- **finishTransaction(_:)**: Notifies the App Store that the app finished processing the transaction.\n\n## Restoring Purchases\n\n- **restoreCompletedTransactions()**: Asks the payment queue to restore previously completed purchases.\n- **restoreCompletedTransactions(withApplicationUsername:)**: Asks the payment queue to restore previously completed purchases, providing an opaque identifier for the user’s account.\n\n## Showing Price Consent\n\n- **showPriceConsentIfNeeded()**: Asks the system to display the price consent sheet if the user hasn’t yet responded to a subscription price increase.\n\n## Redeeming Codes\n\n- **presentCodeRedemptionSheet()**: Displays a sheet that enables customers to redeem offer codes that you configure in App Store Connect.\n\n## Downloading Content\n\n- **start(_:)**: Adds a set of downloads to the download list.\n- **cancel(_:)**: Removes a set of downloads from the download list.\n- **pause(_:)**: Pauses a set of downloads.\n- **resume(_:)**: Resumes a set of downloads.\n\n## Essentials\n\n- **Setting up the transaction observer for the payment queue**: Enable your app to receive and handle transactions by adding an observer.\n- **Offering, completing, and restoring in-app purchases**: Fetch, display, purchase, validate, and finish transactions in your app.\n- **SKPaymentTransactionObserver**: A set of methods that process transactions, unlock purchased functionality, and continue promoted In-App Purchases.\n- **SKPaymentQueueDelegate**: The protocol that provides information needed to complete transactions.\n- **SKRequest**: An abstract class that represents a request to the App Store.\n\n## Inherits From\n\n- NSObject\n\n## Conforms To\n\n- CVarArg\n- CustomDebugStringConvertible\n- CustomStringConvertible\n- Equatable\n- Hashable\n- NSObjectProtocol\n- Sendable\n- SendableMetatype\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "A method that indicates whether the person can make purchases.",
          "name" : "canMakePayments()",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/SKPaymentQueue\/canMakePayments()"
        }
      ],
      "title" : "Determining Whether the User Can Make Payments"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "The App Store storefront of the device.",
          "name" : "storefront",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/SKPaymentQueue\/storefront"
        }
      ],
      "title" : "Determining Store Content"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Returns the default payment queue instance.",
          "name" : "default()",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/SKPaymentQueue\/default()"
        }
      ],
      "title" : "Getting the Queue"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Adds an observer to the payment queue.",
          "name" : "add(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/SKPaymentQueue\/add(_:)-5ciz2"
        },
        {
          "description" : "An array of all active payment queue observers.",
          "name" : "transactionObservers",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/SKPaymentQueue\/transactionObservers"
        },
        {
          "description" : "Removes an observer from the payment queue.",
          "name" : "remove(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/SKPaymentQueue\/remove(_:)"
        }
      ],
      "title" : "Adding, Getting, and Removing Observers"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "A delegate that provides information needed to complete transactions.",
          "name" : "delegate",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/SKPaymentQueue\/delegate"
        },
        {
          "description" : "Returns an array of pending transactions.",
          "name" : "transactions",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/SKPaymentQueue\/transactions"
        },
        {
          "description" : "Adds a payment request to the queue.",
          "name" : "add(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/SKPaymentQueue\/add(_:)-4vct1"
        },
        {
          "description" : "Notifies the App Store that the app finished processing the transaction.",
          "name" : "finishTransaction(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/SKPaymentQueue\/finishTransaction(_:)"
        }
      ],
      "title" : "Managing Transactions"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Asks the payment queue to restore previously completed purchases.",
          "name" : "restoreCompletedTransactions()",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/SKPaymentQueue\/restoreCompletedTransactions()"
        },
        {
          "description" : "Asks the payment queue to restore previously completed purchases, providing an opaque identifier for the user’s account.",
          "name" : "restoreCompletedTransactions(withApplicationUsername:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/SKPaymentQueue\/restoreCompletedTransactions(withApplicationUsername:)"
        }
      ],
      "title" : "Restoring Purchases"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Asks the system to display the price consent sheet if the user hasn’t yet responded to a subscription price increase.",
          "name" : "showPriceConsentIfNeeded()",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/SKPaymentQueue\/showPriceConsentIfNeeded()"
        }
      ],
      "title" : "Showing Price Consent"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Displays a sheet that enables customers to redeem offer codes that you configure in App Store Connect.",
          "name" : "presentCodeRedemptionSheet()",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/SKPaymentQueue\/presentCodeRedemptionSheet()"
        }
      ],
      "title" : "Redeeming Codes"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Adds a set of downloads to the download list.",
          "name" : "start(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/SKPaymentQueue\/start(_:)"
        },
        {
          "description" : "Removes a set of downloads from the download list.",
          "name" : "cancel(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/SKPaymentQueue\/cancel(_:)"
        },
        {
          "description" : "Pauses a set of downloads.",
          "name" : "pause(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/SKPaymentQueue\/pause(_:)"
        },
        {
          "description" : "Resumes a set of downloads.",
          "name" : "resume(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/SKPaymentQueue\/resume(_:)"
        }
      ],
      "title" : "Downloading Content"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Enable your app to receive and handle transactions by adding an observer.",
          "name" : "Setting up the transaction observer for the payment queue",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/setting-up-the-transaction-observer-for-the-payment-queue"
        },
        {
          "description" : "Fetch, display, purchase, validate, and finish transactions in your app.",
          "name" : "Offering, completing, and restoring in-app purchases",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/offering-completing-and-restoring-in-app-purchases"
        },
        {
          "description" : "A set of methods that process transactions, unlock purchased functionality, and continue promoted In-App Purchases.",
          "name" : "SKPaymentTransactionObserver",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/SKPaymentTransactionObserver"
        },
        {
          "description" : "The protocol that provides information needed to complete transactions.",
          "name" : "SKPaymentQueueDelegate",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/SKPaymentQueueDelegate"
        },
        {
          "description" : "An abstract class that represents a request to the App Store.",
          "name" : "SKRequest",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/SKRequest"
        }
      ],
      "title" : "Essentials"
    },
    {
      "content" : "",
      "items" : [
        {
          "name" : "NSObject"
        }
      ],
      "title" : "Inherits From"
    }
  ],
  "source" : "appleJSON",
  "title" : "SKPaymentQueue",
  "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/SKPaymentQueue"
}