{
  "abstract" : "Provide subscription service for customers who redeem offer codes through the App Store or within an app that uses receipts.",
  "codeExamples" : [

  ],
  "contentHash" : "e8bb9a9ac54844ccdfd8a57291969339062cc7d6b434f97cf739fa682e4fff85",
  "crawledAt" : "2025-12-04T15:59:49Z",
  "id" : "DCB53E19-6C6F-4BB0-AA84-C8DE374813B2",
  "kind" : "article",
  "language" : "swift",
  "module" : "StoreKit",
  "overview" : "## Overview\n\nTo help you acquire, retain, and win back subscribers, you can use offer codes.\n\nOffer codes are alphanumeric codes that provide auto-renewable subscriptions at a discount or for free for a specific duration. Configure the offers and create offer codes in App Store Connect, and distribute them to your customers. Customers can redeem offer codes in the App Store, using offer code redemption URLs, or in your app if you’ve implemented one of the following APIs:\n\nWhen customers redeem a valid offer code, your app receives a successful transaction on the payment queue, and you receive a server notification if you’ve enabled [doc:\/\/com.apple.documentation\/documentation\/AppStoreServerNotifications]. The receipt contains an `offer_code_ref_name` field that identifies the offer.\n\nFor information on subscription offer types and choosing the offer type to suit your business needs, see [https:\/\/developer.apple.com\/app-store\/subscriptions\/#providing-subscription-offers].\n\n### Set up offer codes in App Store Connect\n\nConfigure offers and manage your offer codes in App Store Connect. You can have up to 10 active offers per subscription, and create codes for a maximum of 1,000,000 redemptions per app, per quarter. There are two types of offer codes: one-time use codes, and custom codes. The offer code redemption APIs support both.\n\nDownload the offer codes from App Store Connect to distribute them to your customers. For more information on creating and distributing offer codes, and to learn which type of offer code may work for your campaign, see [https:\/\/help.apple.com\/app-store-connect\/#\/dev6a098e4b1].\n\n### Redeem offer codes in your app\n\nTo display the system sheet for customers to redeem offer codes within your app, call one of the redemption APIs, depending on your app’s UI implementation:\n\nThe redemption sheet takes care of the redemption flow, including alerting customers about invalid entries, as appropriate. Invalid entries may include, for example, expired offer codes, invalid codes, or codes that would result in a subscription downgrade.\n\nIncluding the redemption sheet in your app is recommended, but optional. For more guidance on supporting offer code redemption within your app, see Human Interface Guidelines > [https:\/\/developer.apple.com\/design\/human-interface-guidelines\/in-app-purchase].\n\n### Support offer codes redeemed outside your app\n\nCustomers may redeem offer codes outside your app. If a customer doesn’t have your app, the App Store prompts them to download it as part of the redemption flow.\n\nTo handle offer codes — and other transactions that can occur outside of your app – you need to set up a transaction observer at app launch. For more information on this best practice, see [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/setting-up-the-transaction-observer-for-the-payment-queue]. Check that your app’s customer-onboarding experience verifies the receipt and provides subscription service. Update your records if you keep a backend system to manage your subscribers.\n\n### Identify subscriptions purchased with offer codes, in receipts\n\nWhen a customer successfully redeems an offer code, the receipt contains a transaction with the field: `offer_code_ref_name`. This field’s value is the offer reference name that you configure in App Store Connect. The field appears in the [doc:\/\/com.apple.documentation\/documentation\/AppStoreReceipts\/responseBody\/Latest_receipt_info-data.dictionary] and [doc:\/\/com.apple.documentation\/documentation\/AppStoreReceipts\/responseBody\/Pending_renewal_info-data.dictionary] objects for receipts, and in the [doc:\/\/com.apple.documentation\/documentation\/AppStoreServerNotifications\/unified_receipt\/Latest_receipt_info-data.dictionary] and [doc:\/\/com.apple.documentation\/documentation\/AppStoreServerNotifications\/unified_receipt\/Pending_renewal_info-data.dictionary] objects for server notifications.\n\n### Provide subscription service to existing and new customers\n\nWhen an existing customer redeems an offer code, your app receives a transaction on the payment queue ([doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKPaymentTransactionObserver\/paymentQueue(_:updatedTransactions:)] in the [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKPaymentTransactionState\/purchased] state. This flow is the same as a typical subscription purchase flow, but the receipt contains the offer code reference. Your app follows these steps:\n\nWhen you acquire new customers with an offer code, they open your app for the first time already having a subscription. In addition to providing subscription service, you may need to update your backend system’s records. Your app follows these steps:",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/StoreKit\/implementing-offer-codes-in-your-app\ncrawled: 2025-12-04T15:59:49Z\n---\n\n# Implementing offer codes in your app\n\n**Article**\n\nProvide subscription service for customers who redeem offer codes through the App Store or within an app that uses receipts.\n\n## Overview\n\n\n\nTo help you acquire, retain, and win back subscribers, you can use offer codes.\n\nOffer codes are alphanumeric codes that provide auto-renewable subscriptions at a discount or for free for a specific duration. Configure the offers and create offer codes in App Store Connect, and distribute them to your customers. Customers can redeem offer codes in the App Store, using offer code redemption URLs, or in your app if you’ve implemented one of the following APIs:\n\n- [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/View\/offerCodeRedemption(isPresented:onCompletion:)] or [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/AppStore\/presentOfferCodeRedeemSheet(in:)], which are available in iOS 16 and later and iPadOS 16 and later\n- [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKPaymentQueue\/presentCodeRedemptionSheet()], which is available in iOS 14 and later and iPadOS 14 and later.\n\nWhen customers redeem a valid offer code, your app receives a successful transaction on the payment queue, and you receive a server notification if you’ve enabled [doc:\/\/com.apple.documentation\/documentation\/AppStoreServerNotifications]. The receipt contains an `offer_code_ref_name` field that identifies the offer.\n\nFor information on subscription offer types and choosing the offer type to suit your business needs, see [https:\/\/developer.apple.com\/app-store\/subscriptions\/#providing-subscription-offers].\n\n### Set up offer codes in App Store Connect\n\nConfigure offers and manage your offer codes in App Store Connect. You can have up to 10 active offers per subscription, and create codes for a maximum of 1,000,000 redemptions per app, per quarter. There are two types of offer codes: one-time use codes, and custom codes. The offer code redemption APIs support both.\n\nDownload the offer codes from App Store Connect to distribute them to your customers. For more information on creating and distributing offer codes, and to learn which type of offer code may work for your campaign, see [https:\/\/help.apple.com\/app-store-connect\/#\/dev6a098e4b1].\n\n### Redeem offer codes in your app\n\nTo display the system sheet for customers to redeem offer codes within your app, call one of the redemption APIs, depending on your app’s UI implementation:\n\n- Call [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/View\/offerCodeRedemption(isPresented:onCompletion:)] if your app uses SwiftUI.\n- Call [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/AppStore\/presentOfferCodeRedeemSheet(in:)] if your app uses UIKit.\n- Call [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKPaymentQueue\/presentCodeRedemptionSheet()] for apps running on devices prior to iOS 16 and iPadOS 16.\n\nThe redemption sheet takes care of the redemption flow, including alerting customers about invalid entries, as appropriate. Invalid entries may include, for example, expired offer codes, invalid codes, or codes that would result in a subscription downgrade.\n\nIncluding the redemption sheet in your app is recommended, but optional. For more guidance on supporting offer code redemption within your app, see Human Interface Guidelines > [https:\/\/developer.apple.com\/design\/human-interface-guidelines\/in-app-purchase].\n\n### Support offer codes redeemed outside your app\n\nCustomers may redeem offer codes outside your app. If a customer doesn’t have your app, the App Store prompts them to download it as part of the redemption flow.\n\nTo handle offer codes — and other transactions that can occur outside of your app – you need to set up a transaction observer at app launch. For more information on this best practice, see [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/setting-up-the-transaction-observer-for-the-payment-queue]. Check that your app’s customer-onboarding experience verifies the receipt and provides subscription service. Update your records if you keep a backend system to manage your subscribers.\n\n### Identify subscriptions purchased with offer codes, in receipts\n\nWhen a customer successfully redeems an offer code, the receipt contains a transaction with the field: `offer_code_ref_name`. This field’s value is the offer reference name that you configure in App Store Connect. The field appears in the [doc:\/\/com.apple.documentation\/documentation\/AppStoreReceipts\/responseBody\/Latest_receipt_info-data.dictionary] and [doc:\/\/com.apple.documentation\/documentation\/AppStoreReceipts\/responseBody\/Pending_renewal_info-data.dictionary] objects for receipts, and in the [doc:\/\/com.apple.documentation\/documentation\/AppStoreServerNotifications\/unified_receipt\/Latest_receipt_info-data.dictionary] and [doc:\/\/com.apple.documentation\/documentation\/AppStoreServerNotifications\/unified_receipt\/Pending_renewal_info-data.dictionary] objects for server notifications.\n\n### Provide subscription service to existing and new customers\n\nWhen an existing customer redeems an offer code, your app receives a transaction on the payment queue ([doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKPaymentTransactionObserver\/paymentQueue(_:updatedTransactions:)] in the [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKPaymentTransactionState\/purchased] state. This flow is the same as a typical subscription purchase flow, but the receipt contains the offer code reference. Your app follows these steps:\n\n1. Validates the receipt. For more information, see [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/validating-receipts-with-the-app-store].\n2. Looks for the `offer_code_ref_name` field in the receipt to determine if the subscription is from an offer code.\n3. Provides the subscription service based on the offer.\n4. Calls [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKPaymentQueue\/finishTransaction(_:)].\n\nWhen you acquire new customers with an offer code, they open your app for the first time already having a subscription. In addition to providing subscription service, you may need to update your backend system’s records. Your app follows these steps:\n\n1. When the app first launches, validate the receipt.\n2. In the receipt, look for a transaction with the `offer_code_ref_name` field to determine if the subscription is from an offer code.\n3. Provide the subscription service based on the offer.\n4. Guide the customer through your new-customer experience as needed. Update your backend system’s records.\n5. Call [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/SKPaymentQueue\/finishTransaction(_:)].\n\n",
  "sections" : [

  ],
  "source" : "appleJSON",
  "title" : "Implementing offer codes in your app",
  "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/implementing-offer-codes-in-your-app"
}