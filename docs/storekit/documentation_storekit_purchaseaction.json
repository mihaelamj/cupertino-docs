{
  "abstract" : "An action that starts an In-App Purchase.",
  "codeExamples" : [
    {
      "code" : "struct PurchaseExample: View {\n    @Environment(\\.purchase) private var purchase: PurchaseAction\n    let product: Product\n    let purchaseOptions: [Product.PurchaseOption]\n\n    var body: some View {\n        Button {\n            Task {\n                let purchaseResult = try? await purchase(product, options: purchaseOptions)\n                 \/\/ Process the purchase result.\n            }\n        } label: {\n            Text(product.displayName)\n        }\n    }\n}",
      "language" : "swift"
    },
    {
      "code" : "@Environment(\\.purchase) private var purchase",
      "language" : "swift"
    }
  ],
  "conformsTo" : [
    "Sendable",
    "SendableMetatype"
  ],
  "contentHash" : "a708d5ae8a55338feb021914ee6f5e65a3fc022dad34f4f603e3ade1b7f7e5fe",
  "crawledAt" : "2025-12-02T17:53:25Z",
  "declaration" : {
    "code" : "@MainActor @preconcurrency struct PurchaseAction",
    "language" : "swift"
  },
  "id" : "76899DCB-4E48-49FA-9B32-C081FB7B2223",
  "kind" : "struct",
  "language" : "swift",
  "module" : "StoreKit",
  "overview" : "## Overview\n\nStoreKit provides several APIs you can use to enable customers to initiate a purchase. Choose the API that suits your app’s implementation, specifically:\n\n### Use the purchase action API\n\nUse `PurchaseAction` instead of [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/Product\/purchase(options:)] for SwiftUI implementations, including multi-scene apps for visionOS. Call the instance to start an in-app purchase.\n\nTo use this API, read the `PurchaseAction` environment value to get an instance of the structure for a given [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/Environment]. You call the instance directly because it defines a [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/PurchaseAction\/callAsFunction(_:options:)] method that Swift calls when you call the instance.\n\nWhen you initiate an in-app purchase, the system presents UI for the customer to confirm the purchase details. The purchase action you get from the environment automatically includes the UI context. It presents the confirmation UI in proximity to the scene in which the view displays.\n\nThe following code shows an example of starting an in-app purchase when a person taps a button:\n\nNote that the second line in the code example can omit the type name, as follows, because the compiler can infer the type:",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "tvOS",
    "visionOS",
    "watchOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/StoreKit\/PurchaseAction\ncrawled: 2025-12-02T17:53:25Z\n---\n\n# PurchaseAction\n\n**Structure**\n\nAn action that starts an In-App Purchase.\n\n## Declaration\n\n```swift\n@MainActor @preconcurrency struct PurchaseAction\n```\n\n## Overview\n\nStoreKit provides several APIs you can use to enable customers to initiate a purchase. Choose the API that suits your app’s implementation, specifically:\n\n- Use `PurchaseAction` for apps that use [doc:\/\/com.apple.documentation\/documentation\/SwiftUI], including multi-scene apps for visionOS.\n- Use [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/Product\/purchase(confirmIn:options:)-3bivf] for apps that use [doc:\/\/com.apple.documentation\/documentation\/UIKit].\n- Use [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/Product\/purchase(options:)] if your app runs on watchOS or macOS.\n\n\n\n### Use the purchase action API\n\nUse `PurchaseAction` instead of [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/Product\/purchase(options:)] for SwiftUI implementations, including multi-scene apps for visionOS. Call the instance to start an in-app purchase.\n\nTo use this API, read the `PurchaseAction` environment value to get an instance of the structure for a given [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/Environment]. You call the instance directly because it defines a [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/PurchaseAction\/callAsFunction(_:options:)] method that Swift calls when you call the instance.\n\nWhen you initiate an in-app purchase, the system presents UI for the customer to confirm the purchase details. The purchase action you get from the environment automatically includes the UI context. It presents the confirmation UI in proximity to the scene in which the view displays.\n\nThe following code shows an example of starting an in-app purchase when a person taps a button:\n\n```swift\nstruct PurchaseExample: View {\n    @Environment(\\.purchase) private var purchase: PurchaseAction\n    let product: Product\n    let purchaseOptions: [Product.PurchaseOption]\n\n    var body: some View {\n        Button {\n            Task {\n                let purchaseResult = try? await purchase(product, options: purchaseOptions)\n                 \/\/ Process the purchase result.\n            }\n        } label: {\n            Text(product.displayName)\n        }\n    }\n}\n```\n\nNote that the second line in the code example can omit the type name, as follows, because the compiler can infer the type:\n\n```swift\n@Environment(\\.purchase) private var purchase\n```\n\n## Calling the action\n\n- **callAsFunction(_:options:)**: Starts an in-app purchase for the indicated product and purchase options.\n\n## Instance Methods\n\n- **callAsFunction(_:compactJWS:options:)**\n\n## Purchase requests and results\n\n- **purchase(options:)**: Initiates a purchase for the product with the App Store and displays the confirmation sheet.\n- **Product.PurchaseResult**: The result of a purchase.\n\n## Conforms To\n\n- Sendable\n- SendableMetatype\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Starts an in-app purchase for the indicated product and purchase options.",
          "name" : "callAsFunction(_:options:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/PurchaseAction\/callAsFunction(_:options:)"
        }
      ],
      "title" : "Calling the action"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "",
          "name" : "callAsFunction(_:compactJWS:options:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/PurchaseAction\/callAsFunction(_:compactJWS:options:)"
        }
      ],
      "title" : "Instance Methods"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Initiates a purchase for the product with the App Store and displays the confirmation sheet.",
          "name" : "purchase(options:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/Product\/purchase(options:)"
        },
        {
          "description" : "The result of a purchase.",
          "name" : "Product.PurchaseResult",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/Product\/PurchaseResult"
        }
      ],
      "title" : "Purchase requests and results"
    }
  ],
  "source" : "appleJSON",
  "title" : "PurchaseAction",
  "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/PurchaseAction"
}