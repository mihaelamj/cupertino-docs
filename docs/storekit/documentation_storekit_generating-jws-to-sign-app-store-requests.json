{
  "abstract" : "Create signed JSON Web Signature (JWS) strings on your server to authorize your API requests in your app.",
  "codeExamples" : [
    {
      "code" : "{\n  \"alg\": \"ES256\",\n  \"kid\": \"2X9R4HXF34\",\n  \"typ\": \"JWT\"\n}",
      "language" : "javascript"
    },
    {
      "code" : "{\n  \"iss\": \"57246542-96fe-1a63e053-0824d011072a\",\n  \"iat\": 1741043663,\n  \"aud\": \"promotional-offer\",\n  \"bid\": \"com.example.testbundleid\",\n  \"nonce\": \"6584bedf-2ed0-4c01-93ed-c0c64a1670cc\"\n}",
      "language" : "javascript"
    },
    {
      "code" : "{\n  \"iss\": \"57246542-96fe-1a63e053-0824d011072a\",\n  \"iat\": 1741043663,\n  \"aud\": \"advanced-commerce-api\",\n  \"bid\": \"com.example.testbundleid\",\n  \"nonce\": \"df2b8374-95a1-425b-a6a5-77a4d7648333\",\n  \"request\": \"<base64-encoded request data>\"\n}",
      "language" : "javascript"
    },
    {
      "code" : "{ \n    \"iss\": \"57246542-96fe-1a63e053-0824d011072a\",\n    \"iat\": 1741043663,\n    \"aud\": \"promotional-offer\",\n    \"bid\": \"com.example.testbundleid\",\n    \"nonce\": \"368f3088-dcd5-11ef-b3c8-325096b39f46\",\n    \"productId\": \"com.example.product\",\n    \"offerIdentifier\": \"com.example.product.offer\",\n    \"transactionId\": \"1000011859217\"\n}",
      "language" : "javascript"
    },
    {
      "code" : "{\n  \"iss\": \"57246542-96fe-1a63e053-0824d011072a\",\n  \"iat\": 1741043663,\n  \"aud\": \"introductory-offer-eligibility\",\n  \"bid\": \"com.example.testbundleid\",\n  \"nonce\": \"cfb43594-4f92-4fe2-8b06-d947a848adaa\",\n  \"productId\": \"com.example.product\",\n  \"allowIntroductoryOffer\": false,\n  \"transactionId\": \"1000011859217\"\n}",
      "language" : "javascript"
    }
  ],
  "contentHash" : "8d76bdaf4bda9c41803b29f20517b5925c100db4e64c9b69f49b722bd06373f6",
  "crawledAt" : "2025-12-02T17:53:49Z",
  "id" : "7B5F1222-6724-455E-8056-F5032F96EA5D",
  "kind" : "article",
  "language" : "swift",
  "module" : "StoreKit",
  "overview" : "## Overview\n\nJWS is an open standard ([https:\/\/datatracker.ietf.org\/doc\/html\/rfc7515]) that defines a way to securely transmit information. You create the JWS header and payload using information specific to the App Store feature. You sign the JWS on your server using a private API key that you download from App Store Connect.\n\nThe following App Store features require a JWS Compact Serialization to authorize calls in StoreKit:\n\nThe data you sign when generating the JWS is a JSON Web Token (JWT). The JWT contains name-value pairs called *claims*, including claims specific to the feature you’re using. Your server returns the JWS Compact Serialization to your app. Your app uses the JWS in the relevant StoreKit API call.\n\nTo get started, you need your key ID and issuer ID from App Store Connect. Then, to generate a signed JWS, you perform these steps on your server:\n\n### Get your key ID and issuer ID from App Store Connect\n\nFirst you need your key ID for the JWS header and your issuer ID for the JWS payload. Sign in to [https:\/\/appstoreconnect.apple.com\/] to get these values.\n\nTo get the key ID:\n\nIf you have more than one API key, copy the key ID of the private key that you use to sign the JWS. For information about creating keys, see [doc:\/\/com.apple.documentation\/documentation\/AppStoreServerAPI\/creating-api-keys-to-authorize-api-requests].\n\nTo get the issuer ID:\n\n### Create the JWS header\n\nThe App Store features all use the same JWS header.\n\nTo create a JWS to communicate with the App Store, use the following fields and values in the header:\n\nHere’s an example of a JWS header:\n\n### Create the JWS payload\n\nThe JWS payload contains base claims specific to the App Store, such as an issuer ID and issuance time.  It also includes custom claims that are specific to App Store features.  The following table shows the base claims. The next sections shows the feature-specific claims that you also include in the JWS payload.\n\nInclude the following base claims in the JWS payload:\n\nDon’t include an `exp` field in your payload, because including it makes the request fail. The App Store server enforces an expiration time based on your `iat` value.\n\nChoose the `aud` value to match the feature you’re using:\n\nHere’s an example of the base payload, without any feature-specific fields:\n\nBe sure to include feature-specific custom claims in the JWS payload as well.\n\n### Include custom claims for Advanced Commerce API in-app requests\n\nFor custom claims for Advanced Commerce in-app requests, use the following values:\n\nFor more information on generating the base64-encoded request data, see [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/sending-advanced-commerce-api-requests-from-your-app#Create-the-base64-encoded-request-data].\n\nHere’s an example of a payload for an Advanced Commerce API in-app request:\n\nFor more information about making Advanced Commerce API requests in StoreKit, see [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/sending-advanced-commerce-api-requests-from-your-app].\n\n### Include custom claims for promotional offer signatures\n\nFor promotional offer signature custom claims, use the following values:\n\nHere’s an example of a payload for a promotional offer signature:\n\n### Include custom claims for introductory offer eligibility\n\nFor introductory offer eligibility custom claims, use the following values:\n\nHere’s an example of a payload for introductory offer eligibility:\n\nFor more information about providing the introductory offer eligibility signed value in a purchase option, see [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/Product\/PurchaseOption].\n\n### Sign the JWS\n\nOn your server, use the private key associated with the key ID you specified in the header to generate the signature using ES256 encryption.  The process of signing combines the JWS Header and JWS Payload into a single signed string.\n\nThere are a variety of open source libraries available online for creating and signing JWT tokens; see [https:\/\/jwt.io\/] for more information.  Consider using the App Store Server Library to create the JWS. For more information, see [doc:\/\/com.apple.documentation\/documentation\/AppStoreServerAPI\/simplifying-your-implementation-by-using-the-app-store-server-library].\n\nAfter signing, you should have a string in JWS compact serialization format.  Send that string to your app.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/StoreKit\/generating-jws-to-sign-app-store-requests\ncrawled: 2025-12-02T17:53:49Z\n---\n\n# Generating JWS to sign App Store requests\n\n**Article**\n\nCreate signed JSON Web Signature (JWS) strings on your server to authorize your API requests in your app.\n\n## Overview\n\nJWS is an open standard ([https:\/\/datatracker.ietf.org\/doc\/html\/rfc7515]) that defines a way to securely transmit information. You create the JWS header and payload using information specific to the App Store feature. You sign the JWS on your server using a private API key that you download from App Store Connect.\n\nThe following App Store features require a JWS Compact Serialization to authorize calls in StoreKit:\n\n- Advanced Commerce API in-app requests\n- Promotional offer signatures\n- Introductory offer eligibility\n\nThe data you sign when generating the JWS is a JSON Web Token (JWT). The JWT contains name-value pairs called *claims*, including claims specific to the feature you’re using. Your server returns the JWS Compact Serialization to your app. Your app uses the JWS in the relevant StoreKit API call.\n\n\n\nTo get started, you need your key ID and issuer ID from App Store Connect. Then, to generate a signed JWS, you perform these steps on your server:\n\n1. Create the JWS header.\n2. Create the JWS payload. The payload includes the base payload claims, and may also require feature-specific claims.\n3. Sign the JWS.\n\n### Get your key ID and issuer ID from App Store Connect\n\nFirst you need your key ID for the JWS header and your issuer ID for the JWS payload. Sign in to [https:\/\/appstoreconnect.apple.com\/] to get these values.\n\nTo get the key ID:\n\n1. Select Users and Access, then select the Keys tab.\n2. Hover the cursor next to a key ID to display the Copy Key ID link. The key IDs appear in a column under the Active heading.\n3. Click Copy Key ID.\n\nIf you have more than one API key, copy the key ID of the private key that you use to sign the JWS. For information about creating keys, see [doc:\/\/com.apple.documentation\/documentation\/AppStoreServerAPI\/creating-api-keys-to-authorize-api-requests].\n\nTo get the issuer ID:\n\n1. Select Users and Access, then select the Keys tab.\n2. To copy the issuer ID that appears near the top of the page, click Copy next to the ID.\n\n### Create the JWS header\n\nThe App Store features all use the same JWS header.\n\nTo create a JWS to communicate with the App Store, use the following fields and values in the header:\n\n\n\nHere’s an example of a JWS header:\n\n```javascript\n{\n  \"alg\": \"ES256\",\n  \"kid\": \"2X9R4HXF34\",\n  \"typ\": \"JWT\"\n}\n```\n\n### Create the JWS payload\n\nThe JWS payload contains base claims specific to the App Store, such as an issuer ID and issuance time.  It also includes custom claims that are specific to App Store features.  The following table shows the base claims. The next sections shows the feature-specific claims that you also include in the JWS payload.\n\nInclude the following base claims in the JWS payload:\n\n\n\nDon’t include an `exp` field in your payload, because including it makes the request fail. The App Store server enforces an expiration time based on your `iat` value.\n\nChoose the `aud` value to match the feature you’re using:\n\n\n\nHere’s an example of the base payload, without any feature-specific fields:\n\n```javascript\n{\n  \"iss\": \"57246542-96fe-1a63e053-0824d011072a\",\n  \"iat\": 1741043663,\n  \"aud\": \"promotional-offer\",\n  \"bid\": \"com.example.testbundleid\",\n  \"nonce\": \"6584bedf-2ed0-4c01-93ed-c0c64a1670cc\"\n}\n```\n\nBe sure to include feature-specific custom claims in the JWS payload as well.\n\n### Include custom claims for Advanced Commerce API in-app requests\n\nFor custom claims for Advanced Commerce in-app requests, use the following values:\n\n\n\nFor more information on generating the base64-encoded request data, see [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/sending-advanced-commerce-api-requests-from-your-app#Create-the-base64-encoded-request-data].\n\nHere’s an example of a payload for an Advanced Commerce API in-app request:\n\n```javascript\n{\n  \"iss\": \"57246542-96fe-1a63e053-0824d011072a\",\n  \"iat\": 1741043663,\n  \"aud\": \"advanced-commerce-api\",\n  \"bid\": \"com.example.testbundleid\",\n  \"nonce\": \"df2b8374-95a1-425b-a6a5-77a4d7648333\",\n  \"request\": \"<base64-encoded request data>\"\n}\n```\n\nFor more information about making Advanced Commerce API requests in StoreKit, see [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/sending-advanced-commerce-api-requests-from-your-app].\n\n### Include custom claims for promotional offer signatures\n\nFor promotional offer signature custom claims, use the following values:\n\n\n\nHere’s an example of a payload for a promotional offer signature:\n\n```javascript\n{ \n    \"iss\": \"57246542-96fe-1a63e053-0824d011072a\",\n    \"iat\": 1741043663,\n    \"aud\": \"promotional-offer\",\n    \"bid\": \"com.example.testbundleid\",\n    \"nonce\": \"368f3088-dcd5-11ef-b3c8-325096b39f46\",\n    \"productId\": \"com.example.product\",\n    \"offerIdentifier\": \"com.example.product.offer\",\n    \"transactionId\": \"1000011859217\"\n}\n```\n\n### Include custom claims for introductory offer eligibility\n\nFor introductory offer eligibility custom claims, use the following values:\n\n\n\nHere’s an example of a payload for introductory offer eligibility:\n\n```javascript\n{\n  \"iss\": \"57246542-96fe-1a63e053-0824d011072a\",\n  \"iat\": 1741043663,\n  \"aud\": \"introductory-offer-eligibility\",\n  \"bid\": \"com.example.testbundleid\",\n  \"nonce\": \"cfb43594-4f92-4fe2-8b06-d947a848adaa\",\n  \"productId\": \"com.example.product\",\n  \"allowIntroductoryOffer\": false,\n  \"transactionId\": \"1000011859217\"\n}\n```\n\nFor more information about providing the introductory offer eligibility signed value in a purchase option, see [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/Product\/PurchaseOption].\n\n### Sign the JWS\n\nOn your server, use the private key associated with the key ID you specified in the header to generate the signature using ES256 encryption.  The process of signing combines the JWS Header and JWS Payload into a single signed string.\n\nThere are a variety of open source libraries available online for creating and signing JWT tokens; see [https:\/\/jwt.io\/] for more information.  Consider using the App Store Server Library to create the JWS. For more information, see [doc:\/\/com.apple.documentation\/documentation\/AppStoreServerAPI\/simplifying-your-implementation-by-using-the-app-store-server-library].\n\nAfter signing, you should have a string in JWS compact serialization format.  Send that string to your app.\n\n\n\n## Advanced Commerce API interactions\n\n- **AdvancedCommerceProduct**: A product configured as a generic SKU in App Store Connect for use with the Advanced Commerce API.\n- **Sending Advanced Commerce API requests from your app**: Send Advanced Commerce API requests from your app that you authorize with a JSON Web Signature (JWS) you generate on your server.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "A product configured as a generic SKU in App Store Connect for use with the Advanced Commerce API.",
          "name" : "AdvancedCommerceProduct",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/AdvancedCommerceProduct"
        },
        {
          "description" : "Send Advanced Commerce API requests from your app that you authorize with a JSON Web Signature (JWS) you generate on your server.",
          "name" : "Sending Advanced Commerce API requests from your app",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/sending-advanced-commerce-api-requests-from-your-app"
        }
      ],
      "title" : "Advanced Commerce API interactions"
    }
  ],
  "source" : "appleJSON",
  "title" : "Generating JWS to sign App Store requests",
  "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/generating-jws-to-sign-app-store-requests"
}