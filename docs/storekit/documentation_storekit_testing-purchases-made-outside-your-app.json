{
  "abstract" : "Verify that your app receives and handles transactions that occur outside your app, such as subscription purchases, renewals, and offer and promo code redemptions.",
  "codeExamples" : [

  ],
  "contentHash" : "1857dfa111bed5ea178d257426efd30ede57b2c09659c72579993d0e7adea9d2",
  "crawledAt" : "2025-12-03T07:03:54Z",
  "id" : "BC094CE0-0DF2-4193-958E-6291AF68A8E4",
  "kind" : "article",
  "language" : "swift",
  "module" : "StoreKit",
  "overview" : "## Overview\n\nWhen your app offers In-App Purchases, customers typically buy the products from within your app. However, purchase transactions can also occur on another device or even outside your app. Your app needs to handle these transactions when it launches. Use the Test Transactions feature in Account Settings in iOS to simulate and test such transactions in the sandbox environment.\n\n### Simulate a variety of purchase events\n\nSeveral types of events result in a purchase transaction that occurs outside your app, including the following:\n\nAll of these events result in StoreKit sending a transaction to your app through the [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/Transaction\/updates] asynchronous sequence in [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/Transaction]. Test your app to be sure it receives and handles the transaction.\n\n### Set up a test in Account Settings\n\nTo create a transaction outside your app for the testing environment, first open Account Settings on the iOS device, as follows:\n\nNext, you need the product ID for a product you set up in App Store Connect and your app’s bundle ID. If you’re testing win-back offers, see [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/testing-win-back-offers-in-the-sandbox-environment] for further steps.\n\n### Simulate a purchase outside your app\n\nTo simulate a purchase outside your app, follow these steps:\n\nAfter you confirm the purchase, use the following steps to test your app:\n\n### Conclude or restart a test\n\nYou can repeat the test by purchasing the product again through the Test Transactions feature in Account Settings. To repurchase some products, you might first need to clear the transactions for the Sandbox Apple Account, following these steps:\n\nRestart your app. The purchase history for the Sandbox Apple Account is empty and ready for testing. Clearing the purchase history for Sandbox Apple Accounts with a high number of purchases may take longer.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/StoreKit\/testing-purchases-made-outside-your-app\ncrawled: 2025-12-03T07:03:54Z\n---\n\n# Testing purchases made outside your app\n\n**Article**\n\nVerify that your app receives and handles transactions that occur outside your app, such as subscription purchases, renewals, and offer and promo code redemptions.\n\n## Overview\n\nWhen your app offers In-App Purchases, customers typically buy the products from within your app. However, purchase transactions can also occur on another device or even outside your app. Your app needs to handle these transactions when it launches. Use the Test Transactions feature in Account Settings in iOS to simulate and test such transactions in the sandbox environment.\n\n### Simulate a variety of purchase events\n\nSeveral types of events result in a purchase transaction that occurs outside your app, including the following:\n\n\n\nAll of these events result in StoreKit sending a transaction to your app through the [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/Transaction\/updates] asynchronous sequence in [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/Transaction]. Test your app to be sure it receives and handles the transaction.\n\n### Set up a test in Account Settings\n\nTo create a transaction outside your app for the testing environment, first open Account Settings on the iOS device, as follows:\n\n1. Open Settings and select Developer.\n2. Select the Sandbox Apple Account. If you’re not yet signed in, see [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/testing-in-app-purchases-with-sandbox#Sign-in-to-your-Sandbox-Apple-Account-for-a-development-signed-app].\n3. Select Manage on the pop-up sheet. The Account Settings page appears.\n4. Check that the Allow Purchases & Renewals toggle remains selected. If it’s deselected, all purchases fail, which represents a different test case. For more information, see [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/testing-failing-subscription-renewals-and-in-app-purchases].\n\nNext, you need the product ID for a product you set up in App Store Connect and your app’s bundle ID. If you’re testing win-back offers, see [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/testing-win-back-offers-in-the-sandbox-environment] for further steps.\n\n\n\n### Simulate a purchase outside your app\n\nTo simulate a purchase outside your app, follow these steps:\n\n1. On the Account Settings page, select Test Transactions.\n2. Enter your product ID and the bundle ID in the applicable text boxes.\n3. Select Test Transactions.\n4. The system presents the App Store [Sandbox] payment sheet for the sandbox environment. Confirm the purchase. The sandbox environment doesn’t process actual payments. Instead, it returns transactions as if the system successfully processes them.\n\nAfter you confirm the purchase, use the following steps to test your app:\n\n1. Open your app. The system delivers the new transaction to your app through the [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/Transaction\/updates] asynchronous sequence in [doc:\/\/com.apple.storekit\/documentation\/StoreKit\/Transaction].\n2. Confirm that your app receives and processes the transaction to provide access to the purchased product.\n\n### Conclude or restart a test\n\nYou can repeat the test by purchasing the product again through the Test Transactions feature in Account Settings. To repurchase some products, you might first need to clear the transactions for the Sandbox Apple Account, following these steps:\n\n1. Open Settings and select Developer.\n2. Select the Sandbox Apple Account.\n3. Select Manage on the pop-up sheet.\n4. On the Account Settings page, select Clear Purchase History.\n5. Sign out of the Sandbox Apple Account to clear the purchase history cache on the device. Sign back in to continue testing.\n\nRestart your app. The purchase history for the Sandbox Apple Account is empty and ready for testing. Clearing the purchase history for Sandbox Apple Accounts with a high number of purchases may take longer.\n\n## Payment transactions\n\n- **Testing win-back offers in the sandbox environment**: Verify that your app receives and handles win-back offer transactions, including those made outside your app.\n- **Testing an interrupted purchase**: Verify that your app handles an interrupted purchase by inspecting and invoking payment transactions.\n- **Testing failing subscription renewals and In-App Purchases**: Verify that your app handles failed subscription renewals that are in the billing retry or billing grace period states, as well as failed In-App Purchases.\n- **Testing a payment request**: Verify that requests for payment function properly in the sandbox environment by inspecting the calls to the payment transaction observer.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Verify that your app receives and handles win-back offer transactions, including those made outside your app.",
          "name" : "Testing win-back offers in the sandbox environment",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/testing-win-back-offers-in-the-sandbox-environment"
        },
        {
          "description" : "Verify that your app handles an interrupted purchase by inspecting and invoking payment transactions.",
          "name" : "Testing an interrupted purchase",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/testing-an-interrupted-purchase"
        },
        {
          "description" : "Verify that your app handles failed subscription renewals that are in the billing retry or billing grace period states, as well as failed In-App Purchases.",
          "name" : "Testing failing subscription renewals and In-App Purchases",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/testing-failing-subscription-renewals-and-in-app-purchases"
        },
        {
          "description" : "Verify that requests for payment function properly in the sandbox environment by inspecting the calls to the payment transaction observer.",
          "name" : "Testing a payment request",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/testing-a-payment-request"
        }
      ],
      "title" : "Payment transactions"
    }
  ],
  "source" : "appleJSON",
  "title" : "Testing purchases made outside your app",
  "url" : "https:\/\/developer.apple.com\/documentation\/StoreKit\/testing-purchases-made-outside-your-app"
}