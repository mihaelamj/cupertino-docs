{
  "abstract" : "Present multiple complications for a single complication family using descriptors.",
  "codeExamples" : [
    {
      "code" : "\/\/ A structure that contains the identifier and display name for a specific\n\/\/ complication.\nstruct Complication {\n    let identifier: String\n    let displayName: String\n    \n    static let caffeine = Complication(identifier: \"Coffee_Tracker_Caffeine_Dose\", displayName: \"Caffeine Dose\")\n    static let cups = Complication(identifier: \"Coffee_Tracker_Number_Of_Cups\", displayName: \"Total Cups\")\n    static let both = Complication(identifier: \"Coffee_Tracker_Both\", displayName: \"Both Caffeine and Cups\")\n}",
      "language" : "swift"
    },
    {
      "code" : "\/\/ Create the descriptor for complications that show the current caffeine dose.\nlet caffeine = CLKComplicationDescriptor(\n    identifier: Complication.caffeine.identifier,\n    displayName: Complication.caffeine.displayName,\n    supportedFamilies: [.modularSmall,\n                        .utilitarianSmall,\n                        .utilitarianSmallFlat,\n                        .utilitarianLarge,\n                        .circularSmall,\n                        .extraLarge,\n                        .graphicCorner,\n                        .graphicCircular,\n                        .graphicRectangular,\n                        .graphicExtraLarge])",
      "language" : "swift"
    },
    {
      "code" : "\/\/ Create the descriptor for complications that show the equivalent number\n\/\/ of 8-ounce cups drank today.\nlet cups = CLKComplicationDescriptor(\n    identifier: Complication.cups.identifier,\n    displayName: Complication.cups.displayName,\n    supportedFamilies: [.modularSmall,\n                        .utilitarianSmall,\n                        .utilitarianSmallFlat,\n                        .utilitarianLarge,\n                        .circularSmall,\n                        .extraLarge,\n                        .graphicCorner,\n                        .graphicCircular,\n                        .graphicRectangular,\n                        .graphicExtraLarge])",
      "language" : "swift"
    },
    {
      "code" : "\/\/ Create the descriptor for complications that show both the current caffeine\n\/\/ dose and the total number of cups drank.\nlet both = CLKComplicationDescriptor(identifier: Complication.both.identifier,\n                                     displayName: Complication.both.displayName,\n                                     supportedFamilies: [.modularLarge, .graphicBezel])",
      "language" : "swift"
    },
    {
      "code" : "handler([both, caffeine, cups])",
      "language" : "swift"
    },
    {
      "code" : "switch (complication.family, complication.identifier) {",
      "language" : "swift"
    },
    {
      "code" : "case (.modularSmall, Complication.cups.identifier):\n    return createCupsModularSmallTemplate(forDate: date)\ncase (.modularSmall, _):\n    return createCaffeineModularSmallTemplate(forDate: date)",
      "language" : "swift"
    },
    {
      "code" : "case (.modularLarge, _):\n    return createBothModularLargeTemplate(forDate: date)",
      "language" : "swift"
    },
    {
      "code" : "private func createCaffeineModularSmallTemplate(forDate date: Date) -> CLKComplicationTemplate {\n    \/\/ Create the data providers.\n    let mgCaffeineProvider = CLKSimpleTextProvider(text: data.mgCaffeineString(atDate: date))\n    let mgUnitProvider = CLKSimpleTextProvider(text: \"mg Caffeine\", shortText: \"mg\")\n    \n    \/\/ Create the template using the providers.\n    return CLKComplicationTemplateModularSmallStackText(line1TextProvider: mgCaffeineProvider,\n                                                        line2TextProvider: mgUnitProvider)\n}",
      "language" : "swift"
    }
  ],
  "contentHash" : "e17420673fdd96b4415ae979778304d4c37693c6267c630aab4a3f2e2fe119e2",
  "crawledAt" : "2025-12-02T15:54:55Z",
  "id" : "D131E523-D7ED-417B-902F-D345236299FB",
  "kind" : "unknown",
  "language" : "swift",
  "module" : "ClockKit",
  "overview" : "## Overview\n\nThe Coffee Tracker app records a user’s caffeine intake over the course of a 24-hour period. Each time the user adds a drink, the app recalculates the current caffeine levels and the equivalent cups of coffee consumed. It then updates the complication timeline and estimates the decrease in the user’s caffeine level over the next 24 hours.\n\nThis sample provides three different complications.\n\nFor most complication families, the app provides both the Caffeine Dose and the Total Cups complication; however, some families have enough space to display the Both Caffeine and Cups complication instead. For example, for the [doc:\/\/com.apple.clockkit\/documentation\/ClockKit\/CLKComplicationFamily\/graphicCircular] family, Coffee Tracker provides a Caffeine Dose and a Total Cups complication, while it only provides the Both Caffeine and Cups complication for the  [doc:\/\/com.apple.clockkit\/documentation\/ClockKit\/CLKComplicationFamily\/graphicBezel] family.\n\n### Configure the Sample Code Project\n\nTo add the complication to an active watch face, start by building and running the sample code project in the simulator, and follow these steps:\n\nFor more information on setting up watch faces, see [https:\/\/support.apple.com\/en-us\/HT205536].\n\n### Define the Complications Supported by the App\n\nThe Coffee Tracker app declares constants that contain an identifier and a display name for each type of complication that the app supports. The system uses the identifiers to define the different types of complications. It shows the display names when the user scrolls through the complications while configuring a watch face.\n\nThen, the complication data source’s [doc:\/\/com.apple.clockkit\/documentation\/ClockKit\/CLKComplicationDataSource\/getComplicationDescriptors(handler:)] method creates a descriptor for each identifier.\n\nIt starts by creating the descriptor for the Caffeine Dose complications. Here, the `supportedFamilies` parameter specifies that this complication is available for most (but not all) of the complication families.\n\nNext, it creates the Total Cups descriptor. This descriptor supports the same subset of families.\n\nThen, it creates the Both Caffeine and Cups descriptor. This descriptor supports the families that aren’t already supported by the Caffeine Dose and Total Cups descriptors.\n\nFinally, the app passes the descriptors back to the `getComplicationDescriptors(handler:)` method’s handler. While each descriptor doesn’t need to cover all possible families, every family is covered by at least one descriptor.\n\nThe complications appear in the same order as the descriptor array. When the user configures a complication, the picker shows the first three items from the array that support the complication’s family. If there are more than three, the picker displays a More button to provide access to the additional complications.\n\n### Create Timeline Entries for Each Type of Complication\n\nWhen the system calls the complication data source’s [doc:\/\/com.apple.clockkit\/documentation\/ClockKit\/CLKComplicationDataSource\/getCurrentTimelineEntry(for:withHandler:)], [doc:\/\/com.apple.clockkit\/documentation\/ClockKit\/CLKComplicationDataSource\/getTimelineEntries(for:after:limit:withHandler:)], or [doc:\/\/com.apple.clockkit\/documentation\/ClockKit\/CLKComplicationDataSource\/getLocalizableSampleTemplate(for:withHandler:)] method to request new timeline entries, it passes a [doc:\/\/com.apple.clockkit\/documentation\/ClockKit\/CLKComplication] object that contains the complication’s [doc:\/\/com.apple.clockkit\/documentation\/ClockKit\/CLKComplication\/family] and  [doc:\/\/com.apple.clockkit\/documentation\/ClockKit\/CLKComplication\/identifier].\n\nCoffee Tracker then creates a template based on the family and identifier pair by creating a switch statement for the pair.\n\nFor most families, the app checks the complication to determine which template it should provide.\n\nIf the family only supports a single complication, the app just returns a template based on the family.\n\nFinally, the app creates a template that displays the requested data for the specified family. For example, the following code creates a modular small template that displays the current caffeine dose.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/ClockKit\/providing-multiple-complications\ncrawled: 2025-12-02T15:54:55Z\n---\n\n# Providing Multiple Complications\n\n**Sample Code**\n\nPresent multiple complications for a single complication family using descriptors.\n\n## Overview\n\nThe Coffee Tracker app records a user’s caffeine intake over the course of a 24-hour period. Each time the user adds a drink, the app recalculates the current caffeine levels and the equivalent cups of coffee consumed. It then updates the complication timeline and estimates the decrease in the user’s caffeine level over the next 24 hours.\n\nThis sample provides three different complications.\n\n- The  Caffeine Dose complication displays the estimated amount of caffeine remaining in the user’s body based on the logged drinks. The caffeine dose decreases over time based on a 5-hour half-life.\n- The Total Cups complication displays the equivalent number of 8-ounce cups of regular coffee that the user drank based on the logged drinks. For example, if the user logs a double espresso, the Total Cups increases by 1.3 cups.\n- The Both Caffeine and Cups complication displays both the caffeine dose and the total equivalent cups drank.\n\nFor most complication families, the app provides both the Caffeine Dose and the Total Cups complication; however, some families have enough space to display the Both Caffeine and Cups complication instead. For example, for the [doc:\/\/com.apple.clockkit\/documentation\/ClockKit\/CLKComplicationFamily\/graphicCircular] family, Coffee Tracker provides a Caffeine Dose and a Total Cups complication, while it only provides the Both Caffeine and Cups complication for the  [doc:\/\/com.apple.clockkit\/documentation\/ClockKit\/CLKComplicationFamily\/graphicBezel] family.\n\n### Configure the Sample Code Project\n\nTo add the complication to an active watch face, start by building and running the sample code project in the simulator, and follow these steps:\n\n1. Click the Digital Crown to exit the app and return to the watch face.\n2. Using the trackpad, firmly press the watch face to put the face in edit mode, and then tap Customize.\n3. Swipe left until the configuration screen highlights the complications. Select the complication to modify.\n4. Scroll to the Coffee Tracker complication, and then click the Digital Crown again to save your changes.\n5. Tap the Coffee Tracker complication to go back to the app.\n\nFor more information on setting up watch faces, see [https:\/\/support.apple.com\/en-us\/HT205536].\n\n### Define the Complications Supported by the App\n\nThe Coffee Tracker app declares constants that contain an identifier and a display name for each type of complication that the app supports. The system uses the identifiers to define the different types of complications. It shows the display names when the user scrolls through the complications while configuring a watch face.\n\n```swift\n\/\/ A structure that contains the identifier and display name for a specific\n\/\/ complication.\nstruct Complication {\n    let identifier: String\n    let displayName: String\n    \n    static let caffeine = Complication(identifier: \"Coffee_Tracker_Caffeine_Dose\", displayName: \"Caffeine Dose\")\n    static let cups = Complication(identifier: \"Coffee_Tracker_Number_Of_Cups\", displayName: \"Total Cups\")\n    static let both = Complication(identifier: \"Coffee_Tracker_Both\", displayName: \"Both Caffeine and Cups\")\n}\n```\n\nThen, the complication data source’s [doc:\/\/com.apple.clockkit\/documentation\/ClockKit\/CLKComplicationDataSource\/getComplicationDescriptors(handler:)] method creates a descriptor for each identifier.\n\nIt starts by creating the descriptor for the Caffeine Dose complications. Here, the `supportedFamilies` parameter specifies that this complication is available for most (but not all) of the complication families.\n\n```swift\n\/\/ Create the descriptor for complications that show the current caffeine dose.\nlet caffeine = CLKComplicationDescriptor(\n    identifier: Complication.caffeine.identifier,\n    displayName: Complication.caffeine.displayName,\n    supportedFamilies: [.modularSmall,\n                        .utilitarianSmall,\n                        .utilitarianSmallFlat,\n                        .utilitarianLarge,\n                        .circularSmall,\n                        .extraLarge,\n                        .graphicCorner,\n                        .graphicCircular,\n                        .graphicRectangular,\n                        .graphicExtraLarge])\n```\n\nNext, it creates the Total Cups descriptor. This descriptor supports the same subset of families.\n\n```swift\n\/\/ Create the descriptor for complications that show the equivalent number\n\/\/ of 8-ounce cups drank today.\nlet cups = CLKComplicationDescriptor(\n    identifier: Complication.cups.identifier,\n    displayName: Complication.cups.displayName,\n    supportedFamilies: [.modularSmall,\n                        .utilitarianSmall,\n                        .utilitarianSmallFlat,\n                        .utilitarianLarge,\n                        .circularSmall,\n                        .extraLarge,\n                        .graphicCorner,\n                        .graphicCircular,\n                        .graphicRectangular,\n                        .graphicExtraLarge])\n```\n\nThen, it creates the Both Caffeine and Cups descriptor. This descriptor supports the families that aren’t already supported by the Caffeine Dose and Total Cups descriptors.\n\n```swift\n\/\/ Create the descriptor for complications that show both the current caffeine\n\/\/ dose and the total number of cups drank.\nlet both = CLKComplicationDescriptor(identifier: Complication.both.identifier,\n                                     displayName: Complication.both.displayName,\n                                     supportedFamilies: [.modularLarge, .graphicBezel])\n```\n\nFinally, the app passes the descriptors back to the `getComplicationDescriptors(handler:)` method’s handler. While each descriptor doesn’t need to cover all possible families, every family is covered by at least one descriptor.\n\n```swift\nhandler([both, caffeine, cups])\n```\n\nThe complications appear in the same order as the descriptor array. When the user configures a complication, the picker shows the first three items from the array that support the complication’s family. If there are more than three, the picker displays a More button to provide access to the additional complications.\n\n### Create Timeline Entries for Each Type of Complication\n\nWhen the system calls the complication data source’s [doc:\/\/com.apple.clockkit\/documentation\/ClockKit\/CLKComplicationDataSource\/getCurrentTimelineEntry(for:withHandler:)], [doc:\/\/com.apple.clockkit\/documentation\/ClockKit\/CLKComplicationDataSource\/getTimelineEntries(for:after:limit:withHandler:)], or [doc:\/\/com.apple.clockkit\/documentation\/ClockKit\/CLKComplicationDataSource\/getLocalizableSampleTemplate(for:withHandler:)] method to request new timeline entries, it passes a [doc:\/\/com.apple.clockkit\/documentation\/ClockKit\/CLKComplication] object that contains the complication’s [doc:\/\/com.apple.clockkit\/documentation\/ClockKit\/CLKComplication\/family] and  [doc:\/\/com.apple.clockkit\/documentation\/ClockKit\/CLKComplication\/identifier].\n\nCoffee Tracker then creates a template based on the family and identifier pair by creating a switch statement for the pair.\n\n```swift\nswitch (complication.family, complication.identifier) {\n```\n\nFor most families, the app checks the complication to determine which template it should provide.\n\n```swift\ncase (.modularSmall, Complication.cups.identifier):\n    return createCupsModularSmallTemplate(forDate: date)\ncase (.modularSmall, _):\n    return createCaffeineModularSmallTemplate(forDate: date)\n```\n\n\n\nIf the family only supports a single complication, the app just returns a template based on the family.\n\n```swift\ncase (.modularLarge, _):\n    return createBothModularLargeTemplate(forDate: date)\n```\n\nFinally, the app creates a template that displays the requested data for the specified family. For example, the following code creates a modular small template that displays the current caffeine dose.\n\n```swift\nprivate func createCaffeineModularSmallTemplate(forDate date: Date) -> CLKComplicationTemplate {\n    \/\/ Create the data providers.\n    let mgCaffeineProvider = CLKSimpleTextProvider(text: data.mgCaffeineString(atDate: date))\n    let mgUnitProvider = CLKSimpleTextProvider(text: \"mg Caffeine\", shortText: \"mg\")\n    \n    \/\/ Create the template using the providers.\n    return CLKComplicationTemplateModularSmallStackText(line1TextProvider: mgCaffeineProvider,\n                                                        line2TextProvider: mgUnitProvider)\n}\n```\n\n## Sample Code\n\n- **Creating and updating a complication’s timeline**: Create complications that batch-load a timeline of future entries and run periodic background sessions to update the timeline.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Create complications that batch-load a timeline of future entries and run periodic background sessions to update the timeline.",
          "name" : "Creating and updating a complication’s timeline",
          "url" : "https:\/\/developer.apple.com\/documentation\/ClockKit\/creating-and-updating-a-complication-s-timeline"
        }
      ],
      "title" : "Sample Code"
    }
  ],
  "source" : "appleJSON",
  "title" : "Providing Multiple Complications",
  "url" : "https:\/\/developer.apple.com\/documentation\/ClockKit\/providing-multiple-complications"
}