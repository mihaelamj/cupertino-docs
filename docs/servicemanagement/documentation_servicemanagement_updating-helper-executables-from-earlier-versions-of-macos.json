{
  "abstract" : "Simplify your app’s helper executables and support new authorization controls.",
  "codeExamples" : [
    {
      "code" : "func initializer_demo() {\n\/\/ The identifier must match the CFBundleIdentifier string in Info.plist.\n\n\/\/ LoginItem path: $APP.app\/Contents\/Library\/LoginItems\/MyMenuExtra.app\/Contents\/Info.plist\nlet loginItem = SMAppService.loginItem(identifier: \"com.example.mymenuextra\")\n\n\/\/ LaunchDaemon path: $APP.app\/Contents\/Library\/LaunchDaemons\/com.example.daemon.plist\nlet daemon = SMAppService.daemon(plistName: \"com.example.daemon.plist\");\n\n\/\/ LaunchAgent path: $APP.app\/Contents\/Library\/LaunchAgents\/com.example.agent.plist\nlet agent = SMAppService.agent(plistName: \"com.example.agent.plist\");\n\n\/\/ Retrieving the app reference if the main app itself needs to launch instead of a helper.\nlet mainApp = SMAppService.mainApp\n}\n",
      "language" : "swift"
    },
    {
      "code" : "func handle_checkbox_toggle(_ checked: Bool) {\n    let service = SMAppService.loginItem(identifier:\"com.example.mymenuextra\")\n    if (checked) {\n        do {\n           try service.register()\n        } catch {\n            os_log(\"Unable to register \\(error)\")\n        }\n    } else {\n        service.unregister(completionHandler: { error in\n        if let error = error {\n            os_log(\"Unable to unregister \\(error)\")\n        } else {\n            \/\/ Successfully unregistered service.\n        }\n    })\n  }\n}\n",
      "language" : "swift"
    }
  ],
  "contentHash" : "c50823076afadf2a6e53b6b34d5d9e85e90bf343a4e843ef42bd113fac328ceb",
  "crawledAt" : "2025-12-02T16:08:22Z",
  "id" : "54268A60-A1BE-40A8-BAD2-2B212866E83C",
  "kind" : "article",
  "language" : "swift",
  "module" : "Service Management",
  "overview" : "## Overview\n\nLaunch daemons, launch agents, and startup items are helper executables that macOS starts on behalf of the user that extend the capabilities of apps or provide additional capabilities to users. For example, a `LaunchDaemon` can provide persistent background service for an app, a `LaunchAgent` can provide auxiliary UI capabilities like menu bar extras, and a `LoginItem` can provide the ability to automount remote directories or launch applications when the user logs in.\n\nPrior to macOS 13, part of the application-design process of helper executables included scripts that installed one or more property lists into specific directories based on the type of service, such as the following locations of property lists:\n\n`$HOME\/Library\/LaunchAgents`\n\n`\/Library\/LaunchAgents`\n\n`\/Library\/LaunchDaemons`\n\nIn macOS 13 and later, a new structure in the app bundle simplifies the installation of these login items and associated property lists. This new structure allows you to keep helper app resources inside the app’s bundle, which reduces the need for specialized installation scripts or permission to write files into system directories.\n\n### Upgrade existing projects\n\nUpgrading an existing project requires the following general steps — some of which may be optional based on the type of services your app provides:\n\nApps that don’t use the new bundle structure can determine whether their app’s login items are in a disabled state by checking [doc:\/\/com.apple.servicemanagement\/documentation\/ServiceManagement\/SMAppService\/statusForLegacyPlist(at:)], which returns one of the [doc:\/\/com.apple.servicemanagement\/documentation\/ServiceManagement\/SMAppService\/Status-swift.enum] constants that describes the authorization status. Then your app can alert the user to take an appropriate action depending on the importance of the helper executable.\n\nIn apps that target macOS 13 and later, your app needs to only use the property list locations outlined above.\n\n### Connect services to app names in System Settings\n\nEvery app that supports a `LoginItem`, `LaunchAgent`, or `LaunchDaemon` has a corresponding switch in the Login Items panel in System Settings. The user can use this switch to allow the corresponding executables to run when they log in, or in the case of a `LaunchDaemon`, when the system starts up.\n\n`LaunchAgents` and `LaunchDaemons` in the app bundle automatically associate with that app in the Login Items panel.\n\n`LaunchAgents` and `LaunchDaemons` that aren’t using the app bundle can adopt the new `AssociatedBundleIdentifiers` key in their `launchd` property list. This optional key indicates which bundles the Login Items panel associates with the helper executable. If an app installs a legacy property list, the property list needs to include the `AssociatedBundleIdentifiers` key with a value of the app’s bundle identifier.\n\nIf a legacy `LaunchAgent` or `LaunchDaemon` doesn’t have the `AssociatedBundleIdentifiers` key in its property list, instead of the app name, System Settings displays the organization name in the app’s signing certificate.\n\nIf the system can’t attribute a `LaunchAgent` or `LaunchDaemon` to an app and the executable isn’t signed, System Settings displays the executable name from the `Program` or `ProgramArguments` key in the legacy property list.\n\n### Respond to changes in System Settings\n\nIn macOS 13 and later, your app can check the authorization state in the System Settings using the `SMAppService` class to get the status of a `LoginItem`, `LaunchAgent`, or `LaunchDaemon`.\n\nThe example below demonstrates checking the authorization state of the three kinds of helper executables with the bundle identifier or property lists:\n\nThe example below shows an approach to user interaction with the System Settings check box to register and unregister a helper executable:\n\nIf your app uses launch daemons, it needs to register those first. Launch daemons require authentication by the user because the user is authorizing a system level-process. If the user authorizes the `LaunchDaemon`, the system approves all the other helper executables present in the app bundle, which results in fewer authorization interactions with the user. If your app doesn’t provide a `LauchDaemon`, it needs to register each `LoginItem` or `LaunchAgent`.\n\nIf your app depends on its helper executables to operate correctly, it needs to check the authorization state and allow the user to change the app’s authorization. If the user agrees, call [doc:\/\/com.apple.servicemanagement\/documentation\/ServiceManagement\/SMAppService\/openSystemSettingsLoginItems()] to open the System Settings so they can enable or disable the app’s helper executables.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/ServiceManagement\/updating-helper-executables-from-earlier-versions-of-macos\ncrawled: 2025-12-02T16:08:22Z\n---\n\n# Updating helper executables from earlier versions of macOS\n\n**Article**\n\nSimplify your app’s helper executables and support new authorization controls.\n\n## Overview\n\nLaunch daemons, launch agents, and startup items are helper executables that macOS starts on behalf of the user that extend the capabilities of apps or provide additional capabilities to users. For example, a `LaunchDaemon` can provide persistent background service for an app, a `LaunchAgent` can provide auxiliary UI capabilities like menu bar extras, and a `LoginItem` can provide the ability to automount remote directories or launch applications when the user logs in.\n\nPrior to macOS 13, part of the application-design process of helper executables included scripts that installed one or more property lists into specific directories based on the type of service, such as the following locations of property lists:\n\n`$HOME\/Library\/LaunchAgents`\n\n`\/Library\/LaunchAgents`\n\n`\/Library\/LaunchDaemons`\n\nIn macOS 13 and later, a new structure in the app bundle simplifies the installation of these login items and associated property lists. This new structure allows you to keep helper app resources inside the app’s bundle, which reduces the need for specialized installation scripts or permission to write files into system directories.\n\n### Upgrade existing projects\n\nUpgrading an existing project requires the following general steps — some of which may be optional based on the type of services your app provides:\n\n- Install the helper executable within the app bundle, such as in `Contents\/Resources`.\n- Install `LaunchAgent` property lists in the app bundle in `Contents\/Library\/LaunchAgents`.\n- Install `LaunchDaemon` property lists in the app bundle in `Contents\/Library\/LaunchDaemons`.\n- In the agents and daemons property lists, replace the `Program` key with the `BundleProgram` key and make the path relative to the bundle, such as `Contents\/Resources\/mydaemon`.\n\nApps that don’t use the new bundle structure can determine whether their app’s login items are in a disabled state by checking [doc:\/\/com.apple.servicemanagement\/documentation\/ServiceManagement\/SMAppService\/statusForLegacyPlist(at:)], which returns one of the [doc:\/\/com.apple.servicemanagement\/documentation\/ServiceManagement\/SMAppService\/Status-swift.enum] constants that describes the authorization status. Then your app can alert the user to take an appropriate action depending on the importance of the helper executable.\n\nIn apps that target macOS 13 and later, your app needs to only use the property list locations outlined above.\n\n\n\n### Connect services to app names in System Settings\n\nEvery app that supports a `LoginItem`, `LaunchAgent`, or `LaunchDaemon` has a corresponding switch in the Login Items panel in System Settings. The user can use this switch to allow the corresponding executables to run when they log in, or in the case of a `LaunchDaemon`, when the system starts up.\n\n`LaunchAgents` and `LaunchDaemons` in the app bundle automatically associate with that app in the Login Items panel.\n\n`LaunchAgents` and `LaunchDaemons` that aren’t using the app bundle can adopt the new `AssociatedBundleIdentifiers` key in their `launchd` property list. This optional key indicates which bundles the Login Items panel associates with the helper executable. If an app installs a legacy property list, the property list needs to include the `AssociatedBundleIdentifiers` key with a value of the app’s bundle identifier.\n\n\n\nIf a legacy `LaunchAgent` or `LaunchDaemon` doesn’t have the `AssociatedBundleIdentifiers` key in its property list, instead of the app name, System Settings displays the organization name in the app’s signing certificate.\n\nIf the system can’t attribute a `LaunchAgent` or `LaunchDaemon` to an app and the executable isn’t signed, System Settings displays the executable name from the `Program` or `ProgramArguments` key in the legacy property list.\n\n### Respond to changes in System Settings\n\nIn macOS 13 and later, your app can check the authorization state in the System Settings using the `SMAppService` class to get the status of a `LoginItem`, `LaunchAgent`, or `LaunchDaemon`.\n\nThe example below demonstrates checking the authorization state of the three kinds of helper executables with the bundle identifier or property lists:\n\n```swift\nfunc initializer_demo() {\n\/\/ The identifier must match the CFBundleIdentifier string in Info.plist.\n\n\/\/ LoginItem path: $APP.app\/Contents\/Library\/LoginItems\/MyMenuExtra.app\/Contents\/Info.plist\nlet loginItem = SMAppService.loginItem(identifier: \"com.example.mymenuextra\")\n\n\/\/ LaunchDaemon path: $APP.app\/Contents\/Library\/LaunchDaemons\/com.example.daemon.plist\nlet daemon = SMAppService.daemon(plistName: \"com.example.daemon.plist\");\n\n\/\/ LaunchAgent path: $APP.app\/Contents\/Library\/LaunchAgents\/com.example.agent.plist\nlet agent = SMAppService.agent(plistName: \"com.example.agent.plist\");\n\n\/\/ Retrieving the app reference if the main app itself needs to launch instead of a helper.\nlet mainApp = SMAppService.mainApp\n}\n\n```\n\nThe example below shows an approach to user interaction with the System Settings check box to register and unregister a helper executable:\n\n```swift\nfunc handle_checkbox_toggle(_ checked: Bool) {\n    let service = SMAppService.loginItem(identifier:\"com.example.mymenuextra\")\n    if (checked) {\n        do {\n           try service.register()\n        } catch {\n            os_log(\"Unable to register \\(error)\")\n        }\n    } else {\n        service.unregister(completionHandler: { error in\n        if let error = error {\n            os_log(\"Unable to unregister \\(error)\")\n        } else {\n            \/\/ Successfully unregistered service.\n        }\n    })\n  }\n}\n\n```\n\nIf your app uses launch daemons, it needs to register those first. Launch daemons require authentication by the user because the user is authorizing a system level-process. If the user authorizes the `LaunchDaemon`, the system approves all the other helper executables present in the app bundle, which results in fewer authorization interactions with the user. If your app doesn’t provide a `LauchDaemon`, it needs to register each `LoginItem` or `LaunchAgent`.\n\nIf your app depends on its helper executables to operate correctly, it needs to check the authorization state and allow the user to change the app’s authorization. If the user agrees, call [doc:\/\/com.apple.servicemanagement\/documentation\/ServiceManagement\/SMAppService\/openSystemSettingsLoginItems()] to open the System Settings so they can enable or disable the app’s helper executables.\n\n## Essentials\n\n- **Updating your app package installer to use the new Service Management API**: Learn about the Service Management API with a GUI-less agent app.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Learn about the Service Management API with a GUI-less agent app.",
          "name" : "Updating your app package installer to use the new Service Management API",
          "url" : "https:\/\/developer.apple.com\/documentation\/ServiceManagement\/updating-your-app-package-installer-to-use-the-new-service-management-api"
        }
      ],
      "title" : "Essentials"
    }
  ],
  "source" : "appleJSON",
  "title" : "Updating helper executables from earlier versions of macOS",
  "url" : "https:\/\/developer.apple.com\/documentation\/ServiceManagement\/updating-helper-executables-from-earlier-versions-of-macos"
}