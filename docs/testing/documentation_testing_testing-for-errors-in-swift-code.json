{
  "abstract" : "Ensure that your code handles errors in the way you expect.",
  "codeExamples" : [
    {
      "code" : "@Test func cannotAddToppingToPizzaBeforeStartOfList() {\n  var order = PizzaToppings(bases: [.calzone, .deepCrust])\n  #expect(throws: PizzaToppings.Error.outOfRange) {\n    try order.add(topping: .mozarella, toPizzasIn: -1..<0)\n  }\n}",
      "language" : "swift"
    },
    {
      "code" : "@Test func cannotAddToppingToPizzaBeforeStartOfList() {\n  var order = PizzaToppings(bases: [.calzone, .deepCrust])\n  #expect(throws: (any Error).self) {\n    try order.add(topping: .mozarella, toPizzasIn: -1..<0)\n  }\n}",
      "language" : "swift"
    },
    {
      "code" : "@Test func canAddToppingToPizzaInPositionZero() throws {\n  var order = PizzaToppings(bases: [.thinCrust, .thinCrust])\n  #expect(throws: Never.self) {\n    try order.add(topping: .caper, toPizzasIn: 0..<1)\n  }\n  let toppings = try order.toppings(forPizzaAt: 0)\n  #expect(toppings == [.caper])\n}",
      "language" : "swift"
    },
    {
      "code" : "@Test func cannotAddMarshmallowsToPizza() throws {\n  let error = #expect(throws: PizzaToppings.InvalidToppingError.self) {\n    try Pizza.current.add(topping: .marshmallows)\n  }\n  #expect(error?.topping == .marshmallows)\n  #expect(error?.reason == .dessertToppingOnly)\n}",
      "language" : "swift"
    }
  ],
  "contentHash" : "7d7e3e5f1a6bb5c0152ad1be72413e892916839e0f576fe9ecebc9606a38889b",
  "crawledAt" : "2025-12-04T02:36:19Z",
  "id" : "EA424649-8A2B-457D-BC65-0265DCFA275D",
  "kind" : "article",
  "language" : "swift",
  "module" : "Swift Testing",
  "overview" : "## Overview\n\nWrite tests for your code that validate the conditions in which the code throws errors, and the conditions in which it returns without throwing an error. Use overloads of the [doc:\/\/org.swift.testing\/documentation\/Testing\/expect(_:_:sourceLocation:)] and [doc:\/\/org.swift.testing\/documentation\/Testing\/require(_:_:sourceLocation:)-5l63q] macros that check for errors.\n\n### Validate that your code throws an expected error\n\nCreate a test function that `throws` and `try` the code under test. If the code throws an error, then your test fails.\n\nTo check that the code under test throws a specific error, or to continue a longer test function after the code throws an error, pass that error as the first argument of [doc:\/\/org.swift.testing\/documentation\/Testing\/expect(throws:_:sourceLocation:performing:)-7du1h], and pass a closure that calls the code under test:\n\nIf the closure completes without throwing an error, the testing library records an issue. Other overloads of [doc:\/\/org.swift.testing\/documentation\/Testing\/expect(_:_:sourceLocation:)] let you test that the code throws an error of a given type, or matches an arbitrary Boolean test. Similar overloads of [doc:\/\/org.swift.testing\/documentation\/Testing\/require(_:_:sourceLocation:)-5l63q] stop running your test if the code doesn’t throw the expected error.\n\n### Validate that your code throws any error\n\nTo check that the code under test throws an error of any type, pass `(any Error).self` as the first argument to either [doc:\/\/org.swift.testing\/documentation\/Testing\/expect(throws:_:sourceLocation:performing:)-1hfms] or [doc:\/\/org.swift.testing\/documentation\/Testing\/require(throws:_:sourceLocation:performing:)-7n34r]:\n\n### Validate that your code doesn’t throw an error\n\nA test function that throws an error fails, which is usually sufficient for testing that the code under test doesn’t throw. If you need to record a thrown error as an issue without stopping the test function, compare the error to `Never`:\n\nIf the closure throws *any* error, the testing library records an issue. If you need the test to stop when the code throws an error, include the code inline in the test function instead of wrapping it in a call to [doc:\/\/org.swift.testing\/documentation\/Testing\/expect(throws:_:sourceLocation:performing:)-7du1h].\n\n## Inspect an error thrown by your code\n\nWhen you use `#expect(throws:)` or `#require(throws:)` and the error matches the expectation, it is returned to the caller so that you can perform additional validation. If the expectation fails because no error was thrown or an error of a different type was thrown, `#expect(throws:)` returns `nil`:\n\nIf you aren’t sure what type of error will be thrown, pass `(any Error).self`.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/Testing\/testing-for-errors-in-swift-code\ncrawled: 2025-12-04T02:36:19Z\n---\n\n# Testing for errors in Swift code\n\n**Article**\n\nEnsure that your code handles errors in the way you expect.\n\n## Overview\n\nWrite tests for your code that validate the conditions in which the code throws errors, and the conditions in which it returns without throwing an error. Use overloads of the [doc:\/\/org.swift.testing\/documentation\/Testing\/expect(_:_:sourceLocation:)] and [doc:\/\/org.swift.testing\/documentation\/Testing\/require(_:_:sourceLocation:)-5l63q] macros that check for errors.\n\n### Validate that your code throws an expected error\n\nCreate a test function that `throws` and `try` the code under test. If the code throws an error, then your test fails.\n\nTo check that the code under test throws a specific error, or to continue a longer test function after the code throws an error, pass that error as the first argument of [doc:\/\/org.swift.testing\/documentation\/Testing\/expect(throws:_:sourceLocation:performing:)-7du1h], and pass a closure that calls the code under test:\n\n```swift\n@Test func cannotAddToppingToPizzaBeforeStartOfList() {\n  var order = PizzaToppings(bases: [.calzone, .deepCrust])\n  #expect(throws: PizzaToppings.Error.outOfRange) {\n    try order.add(topping: .mozarella, toPizzasIn: -1..<0)\n  }\n}\n```\n\nIf the closure completes without throwing an error, the testing library records an issue. Other overloads of [doc:\/\/org.swift.testing\/documentation\/Testing\/expect(_:_:sourceLocation:)] let you test that the code throws an error of a given type, or matches an arbitrary Boolean test. Similar overloads of [doc:\/\/org.swift.testing\/documentation\/Testing\/require(_:_:sourceLocation:)-5l63q] stop running your test if the code doesn’t throw the expected error.\n\n### Validate that your code throws any error\n\nTo check that the code under test throws an error of any type, pass `(any Error).self` as the first argument to either [doc:\/\/org.swift.testing\/documentation\/Testing\/expect(throws:_:sourceLocation:performing:)-1hfms] or [doc:\/\/org.swift.testing\/documentation\/Testing\/require(throws:_:sourceLocation:performing:)-7n34r]:\n\n```swift\n@Test func cannotAddToppingToPizzaBeforeStartOfList() {\n  var order = PizzaToppings(bases: [.calzone, .deepCrust])\n  #expect(throws: (any Error).self) {\n    try order.add(topping: .mozarella, toPizzasIn: -1..<0)\n  }\n}\n```\n\n### Validate that your code doesn’t throw an error\n\nA test function that throws an error fails, which is usually sufficient for testing that the code under test doesn’t throw. If you need to record a thrown error as an issue without stopping the test function, compare the error to `Never`:\n\n```swift\n@Test func canAddToppingToPizzaInPositionZero() throws {\n  var order = PizzaToppings(bases: [.thinCrust, .thinCrust])\n  #expect(throws: Never.self) {\n    try order.add(topping: .caper, toPizzasIn: 0..<1)\n  }\n  let toppings = try order.toppings(forPizzaAt: 0)\n  #expect(toppings == [.caper])\n}\n```\n\nIf the closure throws *any* error, the testing library records an issue. If you need the test to stop when the code throws an error, include the code inline in the test function instead of wrapping it in a call to [doc:\/\/org.swift.testing\/documentation\/Testing\/expect(throws:_:sourceLocation:performing:)-7du1h].\n\n## Inspect an error thrown by your code\n\nWhen you use `#expect(throws:)` or `#require(throws:)` and the error matches the expectation, it is returned to the caller so that you can perform additional validation. If the expectation fails because no error was thrown or an error of a different type was thrown, `#expect(throws:)` returns `nil`:\n\n```swift\n@Test func cannotAddMarshmallowsToPizza() throws {\n  let error = #expect(throws: PizzaToppings.InvalidToppingError.self) {\n    try Pizza.current.add(topping: .marshmallows)\n  }\n  #expect(error?.topping == .marshmallows)\n  #expect(error?.reason == .dessertToppingOnly)\n}\n```\n\nIf you aren’t sure what type of error will be thrown, pass `(any Error).self`.\n\n## Checking that errors are thrown\n\n- **expect(throws:_:sourceLocation:performing:)**: Check that an expression always throws an error of a given type.\n- **expect(throws:_:sourceLocation:performing:)**: Check that an expression always throws a specific error.\n- **expect(_:sourceLocation:performing:throws:)**: Check that an expression always throws an error matching some condition.\n- **require(throws:_:sourceLocation:performing:)**: Check that an expression always throws an error of a given type, and throw an error if it does not.\n- **require(throws:_:sourceLocation:performing:)**\n- **require(_:sourceLocation:performing:throws:)**: Check that an expression always throws an error matching some condition, and throw an error if it does not.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Check that an expression always throws an error of a given type.",
          "name" : "expect(throws:_:sourceLocation:performing:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Testing\/expect(throws:_:sourceLocation:performing:)-1hfms"
        },
        {
          "description" : "Check that an expression always throws a specific error.",
          "name" : "expect(throws:_:sourceLocation:performing:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Testing\/expect(throws:_:sourceLocation:performing:)-7du1h"
        },
        {
          "description" : "Check that an expression always throws an error matching some condition.",
          "name" : "expect(_:sourceLocation:performing:throws:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Testing\/expect(_:sourceLocation:performing:throws:)"
        },
        {
          "description" : "Check that an expression always throws an error of a given type, and throw an error if it does not.",
          "name" : "require(throws:_:sourceLocation:performing:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Testing\/require(throws:_:sourceLocation:performing:)-7n34r"
        },
        {
          "description" : "",
          "name" : "require(throws:_:sourceLocation:performing:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Testing\/require(throws:_:sourceLocation:performing:)-4djuw"
        },
        {
          "description" : "Check that an expression always throws an error matching some condition, and throw an error if it does not.",
          "name" : "require(_:sourceLocation:performing:throws:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Testing\/require(_:sourceLocation:performing:throws:)"
        }
      ],
      "title" : "Checking that errors are thrown"
    }
  ],
  "source" : "appleJSON",
  "title" : "Testing for errors in Swift code",
  "url" : "https:\/\/developer.apple.com\/documentation\/Testing\/testing-for-errors-in-swift-code"
}