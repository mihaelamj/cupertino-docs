{
  "abstract" : "Confirm that some event occurs during the invocation of a function.",
  "codeExamples" : [
    {
      "code" : "let minBuns = 5\nlet maxBuns = 10\nawait confirmation(\n  \"Baked between \\(minBuns) and \\(maxBuns) buns\",\n  expectedCount: minBuns ... maxBuns\n) { bunBaked in\n  foodTruck.eventHandler = { event in\n    if event == .baked(.cinnamonBun) {\n      bunBaked()\n    }\n  }\n  await foodTruck.bakeTray(of: .cinnamonBun)\n}",
      "language" : "swift"
    }
  ],
  "contentHash" : "45f041371f91e2dcb09a1ba997da302b67a18996a8598fadb3752228e5c2aa66",
  "crawledAt" : "2025-12-03T03:57:19Z",
  "declaration" : {
    "code" : "func confirmation<R>(_ comment: Comment? = nil, expectedCount: some RangeExpression<Int> & Sendable & Sequence<Int>, isolation: isolated (any Actor)? = #isolation, sourceLocation: SourceLocation = #_sourceLocation, _ body: (Confirmation) async throws -> sending R) async rethrows -> R",
    "language" : "swift"
  },
  "id" : "2CAFA538-9A18-433C-B9F4-E4808C99F1D4",
  "kind" : "function",
  "language" : "swift",
  "module" : "Swift Testing",
  "overview" : "## Return Value\n\nWhatever is returned by `body`.\n\n## Discussion\n\nUse confirmations to check that an event occurs while a test is running in complex scenarios where `#expect()` and `#require()` are insufficient. For example, a confirmation may be useful when an expected event occurs:\n\nTo use a confirmation, pass a closure containing the work to be performed. The testing library will then pass an instance of [doc:\/\/org.swift.testing\/documentation\/Testing\/Confirmation] to the closure. Every time the event in question occurs, the closure should call the confirmation:\n\nWhen the closure returns, the testing library checks if the confirmation’s preconditions have been met, and records an issue if they have not.\n\nIf an exact count is expected, use [doc:\/\/org.swift.testing\/documentation\/Testing\/confirmation(_:expectedCount:isolation:sourceLocation:_:)-5mqz2] instead.",
  "platforms" : [
    "iOS",
    "iPadOS",
    "macOS",
    "tvOS",
    "visionOS",
    "watchOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/Testing\/confirmation(_:expectedCount:isolation:sourceLocation:_:)-l3il\ncrawled: 2025-12-03T03:57:19Z\n---\n\n# confirmation(_:expectedCount:isolation:sourceLocation:_:)\n\n**Function**\n\nConfirm that some event occurs during the invocation of a function.\n\n## Declaration\n\n```swift\nfunc confirmation<R>(_ comment: Comment? = nil, expectedCount: some RangeExpression<Int> & Sendable & Sequence<Int>, isolation: isolated (any Actor)? = #isolation, sourceLocation: SourceLocation = #_sourceLocation, _ body: (Confirmation) async throws -> sending R) async rethrows -> R\n```\n\n## Parameters\n\n- **comment**: An optional comment to apply to any issues generated by this function.\n- **expectedCount**: A range of integers indicating the number of times the expected event should occur when `body` is invoked.\n- **isolation**: The actor to which `body` is isolated, if any.\n- **sourceLocation**: The source location to which any recorded issues should be attributed.\n- **body**: The function to invoke.\n\n## Return Value\n\nWhatever is returned by `body`.\n\n## Discussion\n\n\n\nUse confirmations to check that an event occurs while a test is running in complex scenarios where `#expect()` and `#require()` are insufficient. For example, a confirmation may be useful when an expected event occurs:\n\n- In a context that cannot be awaited by the calling function such as an event handler or delegate callback;\n- More than once, or never; or\n- As a callback that is invoked as part of a larger operation.\n\nTo use a confirmation, pass a closure containing the work to be performed. The testing library will then pass an instance of [doc:\/\/org.swift.testing\/documentation\/Testing\/Confirmation] to the closure. Every time the event in question occurs, the closure should call the confirmation:\n\n```swift\nlet minBuns = 5\nlet maxBuns = 10\nawait confirmation(\n  \"Baked between \\(minBuns) and \\(maxBuns) buns\",\n  expectedCount: minBuns ... maxBuns\n) { bunBaked in\n  foodTruck.eventHandler = { event in\n    if event == .baked(.cinnamonBun) {\n      bunBaked()\n    }\n  }\n  await foodTruck.bakeTray(of: .cinnamonBun)\n}\n```\n\nWhen the closure returns, the testing library checks if the confirmation’s preconditions have been met, and records an issue if they have not.\n\nIf an exact count is expected, use [doc:\/\/org.swift.testing\/documentation\/Testing\/confirmation(_:expectedCount:isolation:sourceLocation:_:)-5mqz2] instead.\n\n## Confirming that asynchronous events occur\n\n- **Testing asynchronous code**: Validate whether your code causes expected events to happen.\n- **confirmation(_:expectedCount:isolation:sourceLocation:_:)**: Confirm that some event occurs during the invocation of a function.\n- **Confirmation**: A type that can be used to confirm that an event occurs zero or more times.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Validate whether your code causes expected events to happen.",
          "name" : "Testing asynchronous code",
          "url" : "https:\/\/developer.apple.com\/documentation\/Testing\/testing-asynchronous-code"
        },
        {
          "description" : "Confirm that some event occurs during the invocation of a function.",
          "name" : "confirmation(_:expectedCount:isolation:sourceLocation:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Testing\/confirmation(_:expectedCount:isolation:sourceLocation:_:)-5mqz2"
        },
        {
          "description" : "A type that can be used to confirm that an event occurs zero or more times.",
          "name" : "Confirmation",
          "url" : "https:\/\/developer.apple.com\/documentation\/Testing\/Confirmation"
        }
      ],
      "title" : "Confirming that asynchronous events occur"
    }
  ],
  "source" : "appleJSON",
  "title" : "confirmation(_:expectedCount:isolation:sourceLocation:_:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/Testing\/confirmation(_:expectedCount:isolation:sourceLocation:_:)-l3il"
}