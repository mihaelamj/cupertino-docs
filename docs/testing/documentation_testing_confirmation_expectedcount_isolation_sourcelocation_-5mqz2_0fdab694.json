{
  "abstract" : "Confirm that some event occurs during the invocation of a function.",
  "codeExamples" : [
    {
      "code" : "let n = 10\nawait confirmation(\"Baked buns\", expectedCount: n) { bunBaked in\n  foodTruck.eventHandler = { event in\n    if event == .baked(.cinnamonBun) {\n      bunBaked()\n    }\n  }\n  await foodTruck.bake(.cinnamonBun, count: n)\n}",
      "language" : "swift"
    }
  ],
  "contentHash" : "5679ec46b0046eb6f54033a1b8200614f0a6c4d9b51a0edbfc2cf9e7f3a40ba3",
  "crawledAt" : "2025-12-03T03:57:18Z",
  "declaration" : {
    "code" : "func confirmation<R>(_ comment: Comment? = nil, expectedCount: Int = 1, isolation: isolated (any Actor)? = #isolation, sourceLocation: SourceLocation = #_sourceLocation, _ body: (Confirmation) async throws -> sending R) async rethrows -> R",
    "language" : "swift"
  },
  "id" : "6BA569C6-B47E-414C-9913-93FE08AE1C22",
  "kind" : "function",
  "language" : "swift",
  "module" : "Swift Testing",
  "overview" : "## Return Value\n\nWhatever is returned by `body`.\n\n## Discussion\n\nUse confirmations to check that an event occurs while a test is running in complex scenarios where `#expect()` and `#require()` are insufficient. For example, a confirmation may be useful when an expected event occurs:\n\nTo use a confirmation, pass a closure containing the work to be performed. The testing library will then pass an instance of [doc:\/\/org.swift.testing\/documentation\/Testing\/Confirmation] to the closure. Every time the event in question occurs, the closure should call the confirmation:\n\nWhen the closure returns, the testing library checks if the confirmation’s preconditions have been met, and records an issue if they have not.",
  "platforms" : [
    "iOS",
    "iPadOS",
    "macOS",
    "tvOS",
    "visionOS",
    "watchOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/Testing\/confirmation(_:expectedCount:isolation:sourceLocation:_:)-5mqz2\ncrawled: 2025-12-03T03:57:18Z\n---\n\n# confirmation(_:expectedCount:isolation:sourceLocation:_:)\n\n**Function**\n\nConfirm that some event occurs during the invocation of a function.\n\n## Declaration\n\n```swift\nfunc confirmation<R>(_ comment: Comment? = nil, expectedCount: Int = 1, isolation: isolated (any Actor)? = #isolation, sourceLocation: SourceLocation = #_sourceLocation, _ body: (Confirmation) async throws -> sending R) async rethrows -> R\n```\n\n## Parameters\n\n- **comment**: An optional comment to apply to any issues generated by this function.\n- **expectedCount**: The number of times the expected event should occur when `body` is invoked. The default value of this argument is `1`, indicating that the event should occur exactly once. Pass `0` if the event should *never* occur when `body` is invoked.\n- **isolation**: The actor to which `body` is isolated, if any.\n- **sourceLocation**: The source location to which any recorded issues should be attributed.\n- **body**: The function to invoke.\n\n## Return Value\n\nWhatever is returned by `body`.\n\n## Discussion\n\n\n\nUse confirmations to check that an event occurs while a test is running in complex scenarios where `#expect()` and `#require()` are insufficient. For example, a confirmation may be useful when an expected event occurs:\n\n- In a context that cannot be awaited by the calling function such as an event handler or delegate callback;\n- More than once, or never; or\n- As a callback that is invoked as part of a larger operation.\n\nTo use a confirmation, pass a closure containing the work to be performed. The testing library will then pass an instance of [doc:\/\/org.swift.testing\/documentation\/Testing\/Confirmation] to the closure. Every time the event in question occurs, the closure should call the confirmation:\n\n```swift\nlet n = 10\nawait confirmation(\"Baked buns\", expectedCount: n) { bunBaked in\n  foodTruck.eventHandler = { event in\n    if event == .baked(.cinnamonBun) {\n      bunBaked()\n    }\n  }\n  await foodTruck.bake(.cinnamonBun, count: n)\n}\n```\n\nWhen the closure returns, the testing library checks if the confirmation’s preconditions have been met, and records an issue if they have not.\n\n## Confirming that asynchronous events occur\n\n- **Testing asynchronous code**: Validate whether your code causes expected events to happen.\n- **confirmation(_:expectedCount:isolation:sourceLocation:_:)**: Confirm that some event occurs during the invocation of a function.\n- **Confirmation**: A type that can be used to confirm that an event occurs zero or more times.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Validate whether your code causes expected events to happen.",
          "name" : "Testing asynchronous code",
          "url" : "https:\/\/developer.apple.com\/documentation\/Testing\/testing-asynchronous-code"
        },
        {
          "description" : "Confirm that some event occurs during the invocation of a function.",
          "name" : "confirmation(_:expectedCount:isolation:sourceLocation:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Testing\/confirmation(_:expectedCount:isolation:sourceLocation:_:)-l3il"
        },
        {
          "description" : "A type that can be used to confirm that an event occurs zero or more times.",
          "name" : "Confirmation",
          "url" : "https:\/\/developer.apple.com\/documentation\/Testing\/Confirmation"
        }
      ],
      "title" : "Confirming that asynchronous events occur"
    }
  ],
  "source" : "appleJSON",
  "title" : "confirmation(_:expectedCount:isolation:sourceLocation:_:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/Testing\/confirmation(_:expectedCount:isolation:sourceLocation:_:)-5mqz2"
}