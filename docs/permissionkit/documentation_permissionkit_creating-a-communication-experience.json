{
  "abstract" : "Request permission from a parent or guardian to modify a child’s communication rules.",
  "codeExamples" : [
    {
      "code" : "let responses = CommunicationLimits.current.permissionResponses\nfor await response in responses {\n    print(\"Received a communication permission response: \\(response)\")\n}",
      "language" : "swift"
    },
    {
      "code" : "let knownHandles = CommunicationLimits.current.knownHandles(in: \n[.init(value: \"dragonslayer42\", \nkind: .custom), .init(value: \"progamer67\", kind: .custom)])",
      "language" : "swift"
    },
    {
      "code" : "let question = PermissionQuestion<CommunicationTopic>\n(handle: .init(value: \"dragonslayer42\", kind: .custom))",
      "language" : "swift"
    },
    {
      "code" : "let approveOneHour = PermissionChoice\n(id: AnswerIdentifier.approveOneHour, title: \"Approve for one hour\", answer: .approval)\nlet approveAllDay = PermissionChoice\n(id: AnswerIdentifier.approveAllDay, title: \"Approve all day\", answer: .approval)\nlet approveIndefinitely = PermissionChoice\n(id: AnswerIdentifier.approveIndefinitely, title: \"Approve indefinitely\", answer: .approval)\nlet decline = PermissionChoice\n(id: AnswerIdentifier.deny, title: \"Decline\", answer: .decline)",
      "language" : "swift"
    },
    {
      "code" : "public static let approve = PermissionChoice(id: approveChoiceIdentifier, title: \"Approve\", answer: .approval)\npublic static let decline = PermissionChoice(id: approveChoiceIdentifier, title: \"Decline\", answer: .decline)",
      "language" : "swift"
    },
    {
      "code" : "question.defaultChoice = approveIndefinitely",
      "language" : "swift"
    }
  ],
  "contentHash" : "c6d5753d0aa961514c555148e92ae997fe1f14dc133163d6c1ac02051776e9a0",
  "crawledAt" : "2025-12-03T04:13:10Z",
  "id" : "FAACD3D9-A013-417B-AE8E-523CBA70B8B5",
  "kind" : "article",
  "language" : "swift",
  "module" : "PermissionKit",
  "overview" : "## Overview\n\nYou can enable children to seek permission from a parent or guardian before sending a message to a friend on your app. Communication experiences between children and a parent or guardian using the `PermissionKit` framework are only available through iMessage.\n\n### Manage permission responses\n\nCheck a person’s age using [https:\/\/developer.apple.com\/documentation\/declaredagerange\/] or your own account systems, then obtain an `AsyncSequence` to manage communication permission responses promptly after someone launches your app. Use [doc:\/\/com.apple.permissionkit\/documentation\/PermissionKit\/CommunicationLimits\/updates] to enable your app to run in the background and receive responses. The following code snippet describes how you can set up your app to listen for communication responses.\n\nUse [doc:\/\/com.apple.permissionkit\/documentation\/PermissionKit\/CommunicationLimits\/knownHandles(in:)] to determine the people a parent or guardian approved for their child. Some examples of known handles include a person’s name, or a custom username in your app. This method establishes a connection between your app’s list of trusted entities and the settings a parent or guardian configured for their child in [doc:\/\/com.apple.permissionkit\/documentation\/PermissionKit\/CommunicationLimits]. You can conceal UI elements within lists, such as a message preview in a conversation list.\n\n### Create a permission question\n\nTo enable the request and response exchange, your app listens for responses to questions with the [doc:\/\/com.apple.permissionkit\/documentation\/PermissionKit\/CommunicationTopic] topic type. When a child performs a communication-oriented action in your app that’s gated by parental permission, create a permission question that the child sends to their parent.\n\n### Set permission choices\n\nEach [doc:\/\/com.apple.permissionkit\/documentation\/PermissionKit\/PermissionQuestion] has a set of possible answer choices, and each answer choice corresponds to a globally unique identifier.\n\nIf your app requires a yes or no response, use the predefined [doc:\/\/com.apple.permissionkit\/documentation\/PermissionKit\/PermissionChoice] options, [doc:\/\/com.apple.permissionkit\/documentation\/PermissionKit\/PermissionChoice\/approve] and [doc:\/\/com.apple.permissionkit\/documentation\/PermissionKit\/PermissionChoice\/decline]:\n\nProvide a default answer choice that reflects the experience expected when a child opts out of requesting experiences in iCloud Family settings managed by a parent or guardian, as shown below:\n\n### Send a permission question\n\nTo send a permission question, make an explicit request. When you call the [doc:\/\/com.apple.permissionkit\/documentation\/PermissionKit\/AskCenter\/ask(_:in:)-39vi7] method, the system validates the question, the sender, and the intended recipients. Depending on the specific scenario, the system displays the appropriate prompts, such as the new composed Message screen. You receive a [doc:\/\/com.apple.permissionkit\/documentation\/PermissionKit\/PermissionResponse] as an `AsyncSequence` that you obtained earlier.\n\nAt any point during the send request flow, the child has the option to cancel the request, and decide not to send the question to their parent or guardian. In this scenario, the system doesn’t deliver a response to the calling app for that specific question.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/PermissionKit\/Creating-a-communication-experience\ncrawled: 2025-12-03T04:13:10Z\n---\n\n# Creating a communication experience\n\n**Article**\n\nRequest permission from a parent or guardian to modify a child’s communication rules.\n\n## Overview\n\nYou can enable children to seek permission from a parent or guardian before sending a message to a friend on your app. Communication experiences between children and a parent or guardian using the `PermissionKit` framework are only available through iMessage.\n\n### Manage permission responses\n\nCheck a person’s age using [https:\/\/developer.apple.com\/documentation\/declaredagerange\/] or your own account systems, then obtain an `AsyncSequence` to manage communication permission responses promptly after someone launches your app. Use [doc:\/\/com.apple.permissionkit\/documentation\/PermissionKit\/CommunicationLimits\/updates] to enable your app to run in the background and receive responses. The following code snippet describes how you can set up your app to listen for communication responses.\n\n```swift\nlet responses = CommunicationLimits.current.permissionResponses\nfor await response in responses {\n    print(\"Received a communication permission response: \\(response)\")\n}\n```\n\nUse [doc:\/\/com.apple.permissionkit\/documentation\/PermissionKit\/CommunicationLimits\/knownHandles(in:)] to determine the people a parent or guardian approved for their child. Some examples of known handles include a person’s name, or a custom username in your app. This method establishes a connection between your app’s list of trusted entities and the settings a parent or guardian configured for their child in [doc:\/\/com.apple.permissionkit\/documentation\/PermissionKit\/CommunicationLimits]. You can conceal UI elements within lists, such as a message preview in a conversation list.\n\n```swift\nlet knownHandles = CommunicationLimits.current.knownHandles(in: \n[.init(value: \"dragonslayer42\", \nkind: .custom), .init(value: \"progamer67\", kind: .custom)])\n```\n\n### Create a permission question\n\nTo enable the request and response exchange, your app listens for responses to questions with the [doc:\/\/com.apple.permissionkit\/documentation\/PermissionKit\/CommunicationTopic] topic type. When a child performs a communication-oriented action in your app that’s gated by parental permission, create a permission question that the child sends to their parent.\n\n```swift\nlet question = PermissionQuestion<CommunicationTopic>\n(handle: .init(value: \"dragonslayer42\", kind: .custom))\n```\n\n### Set permission choices\n\nEach [doc:\/\/com.apple.permissionkit\/documentation\/PermissionKit\/PermissionQuestion] has a set of possible answer choices, and each answer choice corresponds to a globally unique identifier.\n\n```swift\nlet approveOneHour = PermissionChoice\n(id: AnswerIdentifier.approveOneHour, title: \"Approve for one hour\", answer: .approval)\nlet approveAllDay = PermissionChoice\n(id: AnswerIdentifier.approveAllDay, title: \"Approve all day\", answer: .approval)\nlet approveIndefinitely = PermissionChoice\n(id: AnswerIdentifier.approveIndefinitely, title: \"Approve indefinitely\", answer: .approval)\nlet decline = PermissionChoice\n(id: AnswerIdentifier.deny, title: \"Decline\", answer: .decline)\n```\n\nIf your app requires a yes or no response, use the predefined [doc:\/\/com.apple.permissionkit\/documentation\/PermissionKit\/PermissionChoice] options, [doc:\/\/com.apple.permissionkit\/documentation\/PermissionKit\/PermissionChoice\/approve] and [doc:\/\/com.apple.permissionkit\/documentation\/PermissionKit\/PermissionChoice\/decline]:\n\n```swift\npublic static let approve = PermissionChoice(id: approveChoiceIdentifier, title: \"Approve\", answer: .approval)\npublic static let decline = PermissionChoice(id: approveChoiceIdentifier, title: \"Decline\", answer: .decline)\n```\n\nProvide a default answer choice that reflects the experience expected when a child opts out of requesting experiences in iCloud Family settings managed by a parent or guardian, as shown below:\n\n```swift\nquestion.defaultChoice = approveIndefinitely\n```\n\n### Send a permission question\n\nTo send a permission question, make an explicit request. When you call the [doc:\/\/com.apple.permissionkit\/documentation\/PermissionKit\/AskCenter\/ask(_:in:)-39vi7] method, the system validates the question, the sender, and the intended recipients. Depending on the specific scenario, the system displays the appropriate prompts, such as the new composed Message screen. You receive a [doc:\/\/com.apple.permissionkit\/documentation\/PermissionKit\/PermissionResponse] as an `AsyncSequence` that you obtained earlier.\n\nAt any point during the send request flow, the child has the option to cancel the request, and decide not to send the question to their parent or guardian. In this scenario, the system doesn’t deliver a response to the calling app for that specific question.\n\n## Essentials\n\n- **AskCenter**: A class that manages permission requests you send to parents or guardians for approval.\n- **PermissionQuestion**: A class that captures a permission question posed by a person.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "A class that manages permission requests you send to parents or guardians for approval.",
          "name" : "AskCenter",
          "url" : "https:\/\/developer.apple.com\/documentation\/PermissionKit\/AskCenter"
        },
        {
          "description" : "A class that captures a permission question posed by a person.",
          "name" : "PermissionQuestion",
          "url" : "https:\/\/developer.apple.com\/documentation\/PermissionKit\/PermissionQuestion"
        }
      ],
      "title" : "Essentials"
    }
  ],
  "source" : "appleJSON",
  "title" : "Creating a communication experience",
  "url" : "https:\/\/developer.apple.com\/documentation\/PermissionKit\/Creating-a-communication-experience"
}