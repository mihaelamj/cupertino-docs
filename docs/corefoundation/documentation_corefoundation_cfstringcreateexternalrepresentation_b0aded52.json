{
  "abstract" : "Creates an “external representation” of a CFString object, that is, a CFData object.",
  "codeExamples" : [

  ],
  "contentHash" : "13756a72339d1356cfb58aa8ff72ab2d64b8873b5bb88cf96246ac1e74bbd4a1",
  "crawledAt" : "2025-12-04T21:10:26Z",
  "declaration" : {
    "code" : "func CFStringCreateExternalRepresentation(_ alloc: CFAllocator!, _ theString: CFString!, _ encoding: CFStringEncoding, _ lossByte: UInt8) -> CFData!",
    "language" : "swift"
  },
  "id" : "DE05431C-ECE9-4C4C-9F2D-38EBDA5B05A1",
  "kind" : "function",
  "language" : "swift",
  "module" : "Core Foundation",
  "overview" : "## Return Value\n\nA CFData object that stores the characters of the CFString object as an “external representation.” Returns `NULL` if no loss byte was specified and the function could not convert the characters to the specified encoding. Ownership follows the [https:\/\/developer.apple.com\/library\/archive\/documentation\/CoreFoundation\/Conceptual\/CFMemoryMgmt\/Concepts\/Ownership.html#\/\/apple_ref\/doc\/uid\/20001148-103029].\n\n## Discussion\n\nIn the CFData object form, the string can be written to disk as a file or be sent out over a network. If the encoding of the characters in the data object is Unicode, the function may insert a BOM (byte-order marker) to indicate endianness. However, representations created with encoding constants `kCFStringEncodingUTF16BE`, `kCFStringEncodingUTF16LE`, `kCFStringEncodingUTF32BE`, and `kCFStringEncodingUTF32LE` do not include a BOM because the byte order is explicitly indicated by the letters “BE” (big-endian) and “LE” (little-endian).\n\nThis function allows the specification of a “loss byte” to represent characters that cannot be converted to the requested encoding.\n\nWhen you create an external representation from a CFMutableString object, it loses this mutability characteristic when it is converted back to a CFString object.\n\nThe [doc:\/\/com.apple.corefoundation\/documentation\/CoreFoundation\/CFStringCreateFromExternalRepresentation(_:_:_:)] function complements this function by creating a CFString object from an “external representation” CFData object.",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "tvOS",
    "visionOS",
    "watchOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/corefoundation\/cfstringcreateexternalrepresentation(_:_:_:_:)\ncrawled: 2025-12-04T21:10:26Z\n---\n\n# CFStringCreateExternalRepresentation(_:_:_:_:)\n\n**Function**\n\nCreates an “external representation” of a CFString object, that is, a CFData object.\n\n## Declaration\n\n```swift\nfunc CFStringCreateExternalRepresentation(_ alloc: CFAllocator!, _ theString: CFString!, _ encoding: CFStringEncoding, _ lossByte: UInt8) -> CFData!\n```\n\n## Parameters\n\n- **alloc**: The allocator to use to allocate memory for the new CFData object. Pass `NULL` or [doc:\/\/com.apple.corefoundation\/documentation\/CoreFoundation\/kCFAllocatorDefault] to use the current default allocator.\n- **theString**: The string to convert to an external representation.\n- **encoding**: The string encoding to use for the external representation.\n- **lossByte**: The character value to assign to characters that cannot be converted to the requested encoding. Pass `0` if you want conversion to stop at the first such error; if this happens, the function returns `NULL`.\n\n## Return Value\n\nA CFData object that stores the characters of the CFString object as an “external representation.” Returns `NULL` if no loss byte was specified and the function could not convert the characters to the specified encoding. Ownership follows the [https:\/\/developer.apple.com\/library\/archive\/documentation\/CoreFoundation\/Conceptual\/CFMemoryMgmt\/Concepts\/Ownership.html#\/\/apple_ref\/doc\/uid\/20001148-103029].\n\n## Discussion\n\nIn the CFData object form, the string can be written to disk as a file or be sent out over a network. If the encoding of the characters in the data object is Unicode, the function may insert a BOM (byte-order marker) to indicate endianness. However, representations created with encoding constants `kCFStringEncodingUTF16BE`, `kCFStringEncodingUTF16LE`, `kCFStringEncodingUTF32BE`, and `kCFStringEncodingUTF32LE` do not include a BOM because the byte order is explicitly indicated by the letters “BE” (big-endian) and “LE” (little-endian).\n\nThis function allows the specification of a “loss byte” to represent characters that cannot be converted to the requested encoding.\n\nWhen you create an external representation from a CFMutableString object, it loses this mutability characteristic when it is converted back to a CFString object.\n\nThe [doc:\/\/com.apple.corefoundation\/documentation\/CoreFoundation\/CFStringCreateFromExternalRepresentation(_:_:_:)] function complements this function by creating a CFString object from an “external representation” CFData object.\n\n## Accessing Characters\n\n- **CFStringGetBytes(_:_:_:_:_:_:_:_:)**: Fetches a range of the characters from a string into a byte buffer after converting the characters to a specified encoding.\n- **CFStringGetCharacterAtIndex(_:_:)**: Returns the Unicode character at a specified location in a string.\n- **CFStringGetCharacters(_:_:_:)**: Copies a range of the Unicode characters from a string to a user-provided buffer.\n- **CFStringGetCharactersPtr(_:)**: Quickly obtains a pointer to the contents of a string as a buffer of Unicode characters.\n- **CFStringGetCharacterFromInlineBuffer(_:_:)**: Returns the Unicode character at a specific location in an in-line buffer.\n- **CFStringGetCString(_:_:_:_:)**: Copies the character contents of a string to a local C string buffer after converting the characters to a given encoding.\n- **CFStringGetCStringPtr(_:_:)**: Quickly obtains a pointer to a C-string buffer containing the characters of a string in a given encoding.\n- **CFStringGetLength(_:)**: Returns the number (in terms of UTF-16 code pairs) of Unicode characters in a string.\n- **CFStringGetPascalString(_:_:_:_:)**: Copies the character contents of a CFString object to a local Pascal string buffer after converting the characters to a requested encoding.\n- **CFStringGetPascalStringPtr(_:_:)**: Quickly obtains a pointer to a Pascal buffer containing the characters of a string in a given encoding.\n- **CFStringGetRangeOfComposedCharactersAtIndex(_:_:)**: Returns the range of the composed character sequence at a specified index.\n- **CFStringInitInlineBuffer(_:_:_:)**: Initializes an in-line buffer to use for efficient access of a CFString object’s characters.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Fetches a range of the characters from a string into a byte buffer after converting the characters to a specified encoding.",
          "name" : "CFStringGetBytes(_:_:_:_:_:_:_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreFoundation\/CFStringGetBytes(_:_:_:_:_:_:_:_:)"
        },
        {
          "description" : "Returns the Unicode character at a specified location in a string.",
          "name" : "CFStringGetCharacterAtIndex(_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreFoundation\/CFStringGetCharacterAtIndex(_:_:)"
        },
        {
          "description" : "Copies a range of the Unicode characters from a string to a user-provided buffer.",
          "name" : "CFStringGetCharacters(_:_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreFoundation\/CFStringGetCharacters(_:_:_:)"
        },
        {
          "description" : "Quickly obtains a pointer to the contents of a string as a buffer of Unicode characters.",
          "name" : "CFStringGetCharactersPtr(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreFoundation\/CFStringGetCharactersPtr(_:)"
        },
        {
          "description" : "Returns the Unicode character at a specific location in an in-line buffer.",
          "name" : "CFStringGetCharacterFromInlineBuffer(_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreFoundation\/CFStringGetCharacterFromInlineBuffer(_:_:)"
        },
        {
          "description" : "Copies the character contents of a string to a local C string buffer after converting the characters to a given encoding.",
          "name" : "CFStringGetCString(_:_:_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreFoundation\/CFStringGetCString(_:_:_:_:)"
        },
        {
          "description" : "Quickly obtains a pointer to a C-string buffer containing the characters of a string in a given encoding.",
          "name" : "CFStringGetCStringPtr(_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreFoundation\/CFStringGetCStringPtr(_:_:)"
        },
        {
          "description" : "Returns the number (in terms of UTF-16 code pairs) of Unicode characters in a string.",
          "name" : "CFStringGetLength(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreFoundation\/CFStringGetLength(_:)"
        },
        {
          "description" : "Copies the character contents of a CFString object to a local Pascal string buffer after converting the characters to a requested encoding.",
          "name" : "CFStringGetPascalString(_:_:_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreFoundation\/CFStringGetPascalString(_:_:_:_:)"
        },
        {
          "description" : "Quickly obtains a pointer to a Pascal buffer containing the characters of a string in a given encoding.",
          "name" : "CFStringGetPascalStringPtr(_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreFoundation\/CFStringGetPascalStringPtr(_:_:)"
        },
        {
          "description" : "Returns the range of the composed character sequence at a specified index.",
          "name" : "CFStringGetRangeOfComposedCharactersAtIndex(_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreFoundation\/CFStringGetRangeOfComposedCharactersAtIndex(_:_:)"
        },
        {
          "description" : "Initializes an in-line buffer to use for efficient access of a CFString object’s characters.",
          "name" : "CFStringInitInlineBuffer(_:_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreFoundation\/CFStringInitInlineBuffer(_:_:_:)"
        }
      ],
      "title" : "Accessing Characters"
    }
  ],
  "source" : "appleJSON",
  "title" : "CFStringCreateExternalRepresentation(_:_:_:_:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/corefoundation\/cfstringcreateexternalrepresentation(_:_:_:_:)"
}