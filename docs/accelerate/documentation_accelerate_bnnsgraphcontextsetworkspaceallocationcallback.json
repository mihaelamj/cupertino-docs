{
  "abstract" : "Sets the allocation and deallocation callbacks for internal workspace.",
  "codeExamples" : [

  ],
  "contentHash" : "160b374493d12e7ba99c5a81a357759830c9f7c55217f23605d0a720b06ed538",
  "crawledAt" : "2025-11-30T20:10:48Z",
  "declaration" : {
    "code" : "func BNNSGraphContextSetWorkspaceAllocationCallback(_ context: bnns_graph_context_t, _ realloc: bnns_graph_realloc_fn_t?, _ free: bnns_graph_free_all_fn_t?, _ user_memory_context_size: Int, _ user_memory_context: UnsafeMutableRawPointer?) -> Int32",
    "language" : "swift"
  },
  "id" : "8C71A26F-5E0F-4B05-A0EB-8C5D1779D146",
  "kind" : "function",
  "module" : "Accelerate",
  "overview" : "## Return Value\n\n`0` on success, nonzero on failure.\n\n## Discussion\n\nIf BNNS can’t bound the required workspace size prior to execution — for example, if the tensor sizes depend on input data — it allocates workspace during execution. Use this function to override the default memory allocation mechanisms.\n\nNote that BNNS typically calls the `free` function when it destroys the context, but it only requires the workspace during execution. As such, you may wish to make the allocated memory purgable or free it between calls to [doc:\/\/com.apple.accelerate\/documentation\/Accelerate\/BNNSGraphContextExecute(_:_:_:_:_:_:)].\n\nIf you pass the same `user_memory_context` to [doc:\/\/com.apple.accelerate\/documentation\/Accelerate\/BNNSGraphContextSetWorkspaceAllocationCallback(_:_:_:_:_:)] and [doc:\/\/com.apple.accelerate\/documentation\/Accelerate\/BNNSGraphContextSetOutputAllocationCallback(_:_:_:_:_:)], BNNS only calls the `free` function once.",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "tvOS",
    "visionOS",
    "watchOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/Accelerate\/BNNSGraphContextSetWorkspaceAllocationCallback(_:_:_:_:_:)\ncrawled: 2025-11-30T20:10:48Z\n---\n\n# BNNSGraphContextSetWorkspaceAllocationCallback(_:_:_:_:_:)\n\n**Function**\n\nSets the allocation and deallocation callbacks for internal workspace.\n\n## Declaration\n\n```swift\nfunc BNNSGraphContextSetWorkspaceAllocationCallback(_ context: bnns_graph_context_t, _ realloc: bnns_graph_realloc_fn_t?, _ free: bnns_graph_free_all_fn_t?, _ user_memory_context_size: Int, _ user_memory_context: UnsafeMutableRawPointer?) -> Int32\n```\n\n## Parameters\n\n- **context**: The graph context.\n- **realloc**: The memory allocation and reallocation function. If you pass `nil` for this parameter, you must also set `nil` for the `free` parameter. In this case, graph execution uses the default BNNS allocation mechanism.\n- **free**: The memory allocation and reallocation function. If you pass `nil` for this parameter, you must also set `nil` for the `realloc` parameter. In this case, graph execution uses the default BNNS allocation mechanism.\n- **user_memory_context_size**: The size, in bytes, `user_memory_context`.\n- **user_memory_context**: A pointer that that BNNS passes unmodified in all calls to `realloc` and `free`.\n\n## Return Value\n\n`0` on success, nonzero on failure.\n\n## Discussion\n\nIf BNNS can’t bound the required workspace size prior to execution — for example, if the tensor sizes depend on input data — it allocates workspace during execution. Use this function to override the default memory allocation mechanisms.\n\nNote that BNNS typically calls the `free` function when it destroys the context, but it only requires the workspace during execution. As such, you may wish to make the allocated memory purgable or free it between calls to [doc:\/\/com.apple.accelerate\/documentation\/Accelerate\/BNNSGraphContextExecute(_:_:_:_:_:_:)].\n\nIf you pass the same `user_memory_context` to [doc:\/\/com.apple.accelerate\/documentation\/Accelerate\/BNNSGraphContextSetWorkspaceAllocationCallback(_:_:_:_:_:)] and [doc:\/\/com.apple.accelerate\/documentation\/Accelerate\/BNNSGraphContextSetOutputAllocationCallback(_:_:_:_:_:)], BNNS only calls the `free` function once.\n\n## Specifying a context’s allocation callbacks\n\n- **BNNSGraphContextSetOutputAllocationCallback(_:_:_:_:_:)**: Sets the allocation and deallocation callbacks for function outputs.\n- **bnns_graph_realloc_fn_t**: The workspace and output allocation function.\n- **bnns_graph_free_all_fn_t**: The workspace and output deallocation function.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Sets the allocation and deallocation callbacks for function outputs.",
          "name" : "BNNSGraphContextSetOutputAllocationCallback(_:_:_:_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Accelerate\/BNNSGraphContextSetOutputAllocationCallback(_:_:_:_:_:)"
        },
        {
          "description" : "The workspace and output allocation function.",
          "name" : "bnns_graph_realloc_fn_t",
          "url" : "https:\/\/developer.apple.com\/documentation\/Accelerate\/bnns_graph_realloc_fn_t"
        },
        {
          "description" : "The workspace and output deallocation function.",
          "name" : "bnns_graph_free_all_fn_t",
          "url" : "https:\/\/developer.apple.com\/documentation\/Accelerate\/bnns_graph_free_all_fn_t"
        }
      ],
      "title" : "Specifying a context’s allocation callbacks"
    }
  ],
  "source" : "appleJSON",
  "title" : "BNNSGraphContextSetWorkspaceAllocationCallback(_:_:_:_:_:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/Accelerate\/BNNSGraphContextSetWorkspaceAllocationCallback(_:_:_:_:_:)"
}