{
  "abstract" : "Scatters the elements of a tensor along a single axis.",
  "codeExamples" : [
    {
      "code" : "let values: [Float] = [2, 4, 6, 8]\nvar inputDescriptor = BNNSNDArrayDescriptor.allocate(\n    initializingFrom: values,\n    shape: .vector(values.count))\n\nlet indices: [Int32] = [1, 3, 7, 5]\nvar indicesDescriptor = BNNSNDArrayDescriptor.allocate(\n    initializingFrom: indices,\n    shape: .vector(indices.count))\n\nlet outputValues: [Float] = [10, 20, 30, 40, 50, 60, 70, 80]\nvar outputDescriptor = BNNSNDArrayDescriptor.allocate(\n    initializingFrom: outputValues,\n    shape: .vector(outputValues.count))\n\nlet error = BNNSScatter(0,\n                        BNNSReduceFunctionSum,\n                        &inputDescriptor,\n                        &indicesDescriptor,\n                        &outputDescriptor,\n                        nil)",
      "language" : "swift"
    },
    {
      "code" : "let values: [Float] = [10, 11, 12,\n                       30, 31, 32,\n                       40, 41, 42]\nvar inputDescriptor = BNNSNDArrayDescriptor.allocate(\n    initializingFrom: values,\n    shape: .matrixRowMajor(3, 3))\n\nlet indices: [Int32] = [1, 3, 4]\nvar indicesDescriptor = BNNSNDArrayDescriptor.allocate(\n    initializingFrom: indices,\n    shape: .vector(indices.count))\n\nvar outputDescriptor = BNNSNDArrayDescriptor.allocate(\n    repeating: Float(0),\n    shape: .matrixRowMajor(3, 5))\n\nlet error = BNNSScatter(0, \/\/ axis\n                        BNNSReduceFunctionNone,\n                        &inputDescriptor,\n                        &indicesDescriptor,\n                        &outputDescriptor,\n                        nil)",
      "language" : "swift"
    },
    {
      "code" : "[  0.0,  0.0,  0.0,\n  10.0, 11.0, 12.0,\n   0.0,  0.0,  0.0,\n  30.0, 31.0, 32.0,\n  40.0, 41.0, 42.0 ]",
      "language" : "swift"
    },
    {
      "code" : "let values: [Float] = [10, 20, 30,\n                       40, 50, 60,\n                       70, 80, 90]\nvar inputDescriptor = BNNSNDArrayDescriptor.allocate(\n    initializingFrom: values,\n    shape: .matrixRowMajor(3, 3))\n\nlet indices: [Int32] = [4, 2, 3, \/\/ `10` -> (4,0), `20` -> (2,1), `30` -> (3,2)\n                        0, 0, 0, \/\/ `40`, `50`, `60` -> row `0`\n                        2, 4, 4] \/\/ `70` -> (2,0), `80` -> (4,1), `90` -> (4,2)\nvar indicesDescriptor = BNNSNDArrayDescriptor.allocate(\n    initializingFrom: indices,\n    shape: inputDescriptor.shape)\n\nvar outputDescriptor = BNNSNDArrayDescriptor.allocate(\n    repeating: Float(0),\n    shape: .matrixRowMajor(3, 5))\n\nlet error = BNNSScatter(0, \/\/ axis\n                        BNNSReduceFunctionNone,\n                        &inputDescriptor,\n                        &indicesDescriptor,\n                        &outputDescriptor,\n                        nil)",
      "language" : "swift"
    },
    {
      "code" : "[ 40.0, 50.0, 60.0,\n   0.0,  0.0,  0.0,\n  70.0, 20.0,  0.0,\n   0.0,  0.0, 30.0,\n  10.0, 80.0, 90.0 ]",
      "language" : "swift"
    }
  ],
  "contentHash" : "8b7336141e90949f66c5f4e4635d7a335ced07730bdcf7426f532f0d7d7f2cae",
  "crawledAt" : "2025-12-02T21:55:01Z",
  "declaration" : {
    "code" : "func BNNSScatter(_ axis: Int, _ op: BNNSReduceFunction, _ input: UnsafePointer<BNNSNDArrayDescriptor>, _ indices: UnsafePointer<BNNSNDArrayDescriptor>, _ output: UnsafeMutablePointer<BNNSNDArrayDescriptor>, _ filter_params: UnsafePointer<BNNSFilterParameters>?) -> Int32",
    "language" : "swift"
  },
  "id" : "35B36B70-47EA-4042-8F82-A0FE693A0401",
  "kind" : "function",
  "language" : "swift",
  "module" : "Accelerate",
  "overview" : "## Discussion\n\nUse [doc:\/\/com.apple.accelerate\/documentation\/Accelerate\/BNNSScatter(_:_:_:_:_:_:)] to scatter elements — that you specify by index — into an output tensor. The operation can set the scattered values or add them to the existing values in the output tensor.\n\nIn the simplest case, use [doc:\/\/com.apple.accelerate\/documentation\/Accelerate\/BNNSScatter(_:_:_:_:_:_:)] to gather elements from a 1D vector with indices defined as a 1D vector. The following code scatters the values `[2, 4, 6, 8]` to the output elements at indices `[1, 3, 7, 5]`. The operation sums the scattered values with the existing values:\n\nOn return, `outputDescriptor` contains the values `[10.0, 22.0, 30.0, 44.0, 50.0, 68.0, 70.0, 86.0]`. For example, `44.0` is the sum of the original value, `40`, and the scattered value, `4`.\n\n[doc:\/\/com.apple.accelerate\/documentation\/Accelerate\/BNNSScatter(_:_:_:_:_:_:)] supports scattering values from a tensor with two or more dimensions using indices defined as a 1D vector. In this case, the indices correspond to the values along an entire axis and the input and output shapes must match.\n\nThe following code scatters three rows from the input tensor to rows `[1, 3, 4]` in the output tensor. In this case, the operation sets the destination value.\n\nOn return, `outputDescriptor` contains the following values:\n\n[doc:\/\/com.apple.accelerate\/documentation\/Accelerate\/BNNSScatter(_:_:_:_:_:_:)] supports scattering from a tensor with two or more dimensions using indices with the same shape.\n\nIn the following example, the index values specify the destination row and the operation derives the destination column from the input value’s column. For example, the input value `10`, in column `0` of the input tensor, has the corresponding index `4` in the indices tensor.\n\nOn return, `outputDescriptor` contains the following values:\n\nIf multiple input values update the same output element, the function doesn’t define the order of update operations.\n\nIn particular, if you define the reduction as `BNNSReduceFunctionNone` the function doesn’t guarantee any particular value in the result.",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "tvOS",
    "visionOS",
    "watchOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/accelerate\/bnnsscatter(_:_:_:_:_:_:)\ncrawled: 2025-12-02T21:55:01Z\n---\n\n# BNNSScatter(_:_:_:_:_:_:)\n\n**Function**\n\nScatters the elements of a tensor along a single axis.\n\n## Declaration\n\n```swift\nfunc BNNSScatter(_ axis: Int, _ op: BNNSReduceFunction, _ input: UnsafePointer<BNNSNDArrayDescriptor>, _ indices: UnsafePointer<BNNSNDArrayDescriptor>, _ output: UnsafeMutablePointer<BNNSNDArrayDescriptor>, _ filter_params: UnsafePointer<BNNSFilterParameters>?) -> Int32\n```\n\n## Parameters\n\n- **axis**: The axis along which the operation scatters elements.\n- **op**: The reduction operation that defines how the function combines scattered values with existing output values.\n- **input**: A pointer to the input descriptor.\n- **indices**: A pointer to the indices descriptor.\n- **output**: A pointer to the output descriptor.\n- **filter_params**: The filter runtime parameters.\n\n## Discussion\n\nUse [doc:\/\/com.apple.accelerate\/documentation\/Accelerate\/BNNSScatter(_:_:_:_:_:_:)] to scatter elements — that you specify by index — into an output tensor. The operation can set the scattered values or add them to the existing values in the output tensor.\n\nIn the simplest case, use [doc:\/\/com.apple.accelerate\/documentation\/Accelerate\/BNNSScatter(_:_:_:_:_:_:)] to gather elements from a 1D vector with indices defined as a 1D vector. The following code scatters the values `[2, 4, 6, 8]` to the output elements at indices `[1, 3, 7, 5]`. The operation sums the scattered values with the existing values:\n\n```swift\nlet values: [Float] = [2, 4, 6, 8]\nvar inputDescriptor = BNNSNDArrayDescriptor.allocate(\n    initializingFrom: values,\n    shape: .vector(values.count))\n\nlet indices: [Int32] = [1, 3, 7, 5]\nvar indicesDescriptor = BNNSNDArrayDescriptor.allocate(\n    initializingFrom: indices,\n    shape: .vector(indices.count))\n\nlet outputValues: [Float] = [10, 20, 30, 40, 50, 60, 70, 80]\nvar outputDescriptor = BNNSNDArrayDescriptor.allocate(\n    initializingFrom: outputValues,\n    shape: .vector(outputValues.count))\n\nlet error = BNNSScatter(0,\n                        BNNSReduceFunctionSum,\n                        &inputDescriptor,\n                        &indicesDescriptor,\n                        &outputDescriptor,\n                        nil)\n```\n\nOn return, `outputDescriptor` contains the values `[10.0, 22.0, 30.0, 44.0, 50.0, 68.0, 70.0, 86.0]`. For example, `44.0` is the sum of the original value, `40`, and the scattered value, `4`.\n\n[doc:\/\/com.apple.accelerate\/documentation\/Accelerate\/BNNSScatter(_:_:_:_:_:_:)] supports scattering values from a tensor with two or more dimensions using indices defined as a 1D vector. In this case, the indices correspond to the values along an entire axis and the input and output shapes must match.\n\nThe following code scatters three rows from the input tensor to rows `[1, 3, 4]` in the output tensor. In this case, the operation sets the destination value.\n\n```swift\nlet values: [Float] = [10, 11, 12,\n                       30, 31, 32,\n                       40, 41, 42]\nvar inputDescriptor = BNNSNDArrayDescriptor.allocate(\n    initializingFrom: values,\n    shape: .matrixRowMajor(3, 3))\n\nlet indices: [Int32] = [1, 3, 4]\nvar indicesDescriptor = BNNSNDArrayDescriptor.allocate(\n    initializingFrom: indices,\n    shape: .vector(indices.count))\n\nvar outputDescriptor = BNNSNDArrayDescriptor.allocate(\n    repeating: Float(0),\n    shape: .matrixRowMajor(3, 5))\n\nlet error = BNNSScatter(0, \/\/ axis\n                        BNNSReduceFunctionNone,\n                        &inputDescriptor,\n                        &indicesDescriptor,\n                        &outputDescriptor,\n                        nil)\n```\n\nOn return, `outputDescriptor` contains the following values:\n\n```swift\n[  0.0,  0.0,  0.0,\n  10.0, 11.0, 12.0,\n   0.0,  0.0,  0.0,\n  30.0, 31.0, 32.0,\n  40.0, 41.0, 42.0 ]\n```\n\n[doc:\/\/com.apple.accelerate\/documentation\/Accelerate\/BNNSScatter(_:_:_:_:_:_:)] supports scattering from a tensor with two or more dimensions using indices with the same shape.\n\nIn the following example, the index values specify the destination row and the operation derives the destination column from the input value’s column. For example, the input value `10`, in column `0` of the input tensor, has the corresponding index `4` in the indices tensor.\n\n```swift\nlet values: [Float] = [10, 20, 30,\n                       40, 50, 60,\n                       70, 80, 90]\nvar inputDescriptor = BNNSNDArrayDescriptor.allocate(\n    initializingFrom: values,\n    shape: .matrixRowMajor(3, 3))\n\nlet indices: [Int32] = [4, 2, 3, \/\/ `10` -> (4,0), `20` -> (2,1), `30` -> (3,2)\n                        0, 0, 0, \/\/ `40`, `50`, `60` -> row `0`\n                        2, 4, 4] \/\/ `70` -> (2,0), `80` -> (4,1), `90` -> (4,2)\nvar indicesDescriptor = BNNSNDArrayDescriptor.allocate(\n    initializingFrom: indices,\n    shape: inputDescriptor.shape)\n\nvar outputDescriptor = BNNSNDArrayDescriptor.allocate(\n    repeating: Float(0),\n    shape: .matrixRowMajor(3, 5))\n\nlet error = BNNSScatter(0, \/\/ axis\n                        BNNSReduceFunctionNone,\n                        &inputDescriptor,\n                        &indicesDescriptor,\n                        &outputDescriptor,\n                        nil)\n```\n\nOn return, `outputDescriptor` contains the following values:\n\n```swift\n[ 40.0, 50.0, 60.0,\n   0.0,  0.0,  0.0,\n  70.0, 20.0,  0.0,\n   0.0,  0.0, 30.0,\n  10.0, 80.0, 90.0 ]\n```\n\nIf multiple input values update the same output element, the function doesn’t define the order of update operations.\n\nIn particular, if you define the reduction as `BNNSReduceFunctionNone` the function doesn’t guarantee any particular value in the result.\n\n## Gather and scatter operations\n\n- **Calculating the dominant colors in an image**: Find the main colors in an image by implementing k-means clustering using the Accelerate framework.\n- **gather(input:indices:output:axis:filterParameters:)**: Gathers the elements of a tensor along a single axis.\n- **gatherND(input:indices:output:filterParameters:)**: Gathers the slices of a tensor.\n- **scatter(input:indices:output:axis:reductionFunction:filterParameters:)**: Scatters the elements of a tensor along a single axis.\n- **scatterND(input:indices:output:reductionFunction:filterParameters:)**: Scatters the slices of a tensor.\n- **BNNSGather(_:_:_:_:_:)**: Gathers the elements of a tensor along a single axis.\n- **BNNSGatherND(_:_:_:_:)**: Gathers the slices of a tensor.\n- **BNNSScatterND(_:_:_:_:_:)**: Scatters the slices of a tensor.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Find the main colors in an image by implementing k-means clustering using the Accelerate framework.",
          "name" : "Calculating the dominant colors in an image",
          "url" : "https:\/\/developer.apple.com\/documentation\/Accelerate\/calculating-the-dominant-colors-in-an-image"
        },
        {
          "description" : "Gathers the elements of a tensor along a single axis.",
          "name" : "gather(input:indices:output:axis:filterParameters:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Accelerate\/BNNS\/gather(input:indices:output:axis:filterParameters:)"
        },
        {
          "description" : "Gathers the slices of a tensor.",
          "name" : "gatherND(input:indices:output:filterParameters:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Accelerate\/BNNS\/gatherND(input:indices:output:filterParameters:)"
        },
        {
          "description" : "Scatters the elements of a tensor along a single axis.",
          "name" : "scatter(input:indices:output:axis:reductionFunction:filterParameters:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Accelerate\/BNNS\/scatter(input:indices:output:axis:reductionFunction:filterParameters:)"
        },
        {
          "description" : "Scatters the slices of a tensor.",
          "name" : "scatterND(input:indices:output:reductionFunction:filterParameters:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Accelerate\/BNNS\/scatterND(input:indices:output:reductionFunction:filterParameters:)"
        },
        {
          "description" : "Gathers the elements of a tensor along a single axis.",
          "name" : "BNNSGather(_:_:_:_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Accelerate\/BNNSGather(_:_:_:_:_:)"
        },
        {
          "description" : "Gathers the slices of a tensor.",
          "name" : "BNNSGatherND(_:_:_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Accelerate\/BNNSGatherND(_:_:_:_:)"
        },
        {
          "description" : "Scatters the slices of a tensor.",
          "name" : "BNNSScatterND(_:_:_:_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Accelerate\/BNNSScatterND(_:_:_:_:_:)"
        }
      ],
      "title" : "Gather and scatter operations"
    }
  ],
  "source" : "appleJSON",
  "title" : "BNNSScatter(_:_:_:_:_:_:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/accelerate\/bnnsscatter(_:_:_:_:_:_:)"
}