{
  "abstract" : "Fills the specified tensor with random values from the categorical distributions with the given event probabilities.",
  "codeExamples" : [
    {
      "code" : " var desc = BNNSNDArrayDescriptor.allocateUninitialized(scalarType: Float.self,\n                                                        shape: .vector(1024))\n \n let probs: [Float] = normalize([0, 0, 5, 10, 8, 6, 4, 2, 0, 0, 5, 10, 5, 0, 0])\n \n var probabilities = BNNSNDArrayDescriptor.allocate(initializingFrom: probs,\n                                                    shape: .vector(probs.count))\n \n let rng = BNNSCreateRandomGenerator(BNNSRandomGeneratorMethodAES_CTR,\n                                     nil);\n \n let error = BNNSRandomFillCategoricalFloat(rng, &desc, &probabilities, false)\n \n defer {\n     BNNSDestroyRandomGenerator(rng)\n }",
      "language" : "swift"
    }
  ],
  "contentHash" : "b4b28b3941c13d09f9e346695b6efcab8b278e17a8796bb3f7f843f15725e2d2",
  "crawledAt" : "2025-12-03T20:18:59Z",
  "declaration" : {
    "code" : "func BNNSRandomFillCategoricalFloat(_ generator: BNNSRandomGenerator?, _ desc: UnsafePointer<BNNSNDArrayDescriptor>, _ probabilities: UnsafePointer<BNNSNDArrayDescriptor>, _ log_probabilities: Bool) -> Int32",
    "language" : "swift"
  },
  "id" : "9DE300BA-FB0E-4291-8917-71B117B0F138",
  "kind" : "function",
  "language" : "swift",
  "module" : "Accelerate",
  "overview" : "## Discussion\n\nUse this function to fill an array descriptor with random values from a categorical distribution with specified event probabilities or event log probabilities.\n\nIf you use the same generator on multiple threads, note that this function serializes the generator through an internal lock. To eliminate this contention, use different generators for each thread.\n\nThe size and shape of the output descriptor, `desc`, is dependent on the probabilities descriptor. The output descriptor must have the same rank as the probabilities descriptor. The first `rank-1` dimensions of the output descriptor must be the same size as the first `rank-1` dimensions of the probabilities descriptor.\n\nThe function treats the first `rank-1` dimensions as batch sizes. On return, the output descriptor contains random integers in the range `[0,1,…,K-1]`, where `K` is the dimension and the number of events.\n\nSupply the probabilities data as nonnegative and finite values. The function normalizes the probabilities values along the innermost dimension so that the probability values (or their exponentials) sum to one along the innermost dimension.\n\nFor example, the following code fills an array descriptor with 1024 random integer values between `0` and `14`. The `probabilities` descriptor specifies the likelihood of the random generator selecting any particular value. For example, [doc:\/\/com.apple.accelerate\/documentation\/Accelerate\/BNNSRandomFillCategoricalFloat(_:_:_:_:)] never selects `0` or `1`, and is twice as likely to select `3` (with a probability of `10`) than `2` (with a probability of `5`).\n\nThe following graph shows the normalized event probabilities as a line chart and a histogram of the normalized random values as a bar chart:\n\n",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "tvOS",
    "visionOS",
    "watchOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/Accelerate\/BNNSRandomFillCategoricalFloat(_:_:_:_:)\ncrawled: 2025-12-03T20:18:59Z\n---\n\n# BNNSRandomFillCategoricalFloat(_:_:_:_:)\n\n**Function**\n\nFills the specified tensor with random values from the categorical distributions with the given event probabilities.\n\n## Declaration\n\n```swift\nfunc BNNSRandomFillCategoricalFloat(_ generator: BNNSRandomGenerator?, _ desc: UnsafePointer<BNNSNDArrayDescriptor>, _ probabilities: UnsafePointer<BNNSNDArrayDescriptor>, _ log_probabilities: Bool) -> Int32\n```\n\n## Parameters\n\n- **generator**: The random number generator.\n- **desc**: The descriptor of the destination.\n- **probabilities**: The descriptor of the probabilities.\n- **log_probabilities**: A Boolean value that specifies whether the probabilities descriptor contains event log probabilities.\n\n## Discussion\n\nUse this function to fill an array descriptor with random values from a categorical distribution with specified event probabilities or event log probabilities.\n\nIf you use the same generator on multiple threads, note that this function serializes the generator through an internal lock. To eliminate this contention, use different generators for each thread.\n\nThe size and shape of the output descriptor, `desc`, is dependent on the probabilities descriptor. The output descriptor must have the same rank as the probabilities descriptor. The first `rank-1` dimensions of the output descriptor must be the same size as the first `rank-1` dimensions of the probabilities descriptor.\n\nThe function treats the first `rank-1` dimensions as batch sizes. On return, the output descriptor contains random integers in the range `[0,1,…,K-1]`, where `K` is the dimension and the number of events.\n\nSupply the probabilities data as nonnegative and finite values. The function normalizes the probabilities values along the innermost dimension so that the probability values (or their exponentials) sum to one along the innermost dimension.\n\nFor example, the following code fills an array descriptor with 1024 random integer values between `0` and `14`. The `probabilities` descriptor specifies the likelihood of the random generator selecting any particular value. For example, [doc:\/\/com.apple.accelerate\/documentation\/Accelerate\/BNNSRandomFillCategoricalFloat(_:_:_:_:)] never selects `0` or `1`, and is twice as likely to select `3` (with a probability of `10`) than `2` (with a probability of `5`).\n\n```swift\n var desc = BNNSNDArrayDescriptor.allocateUninitialized(scalarType: Float.self,\n                                                        shape: .vector(1024))\n \n let probs: [Float] = normalize([0, 0, 5, 10, 8, 6, 4, 2, 0, 0, 5, 10, 5, 0, 0])\n \n var probabilities = BNNSNDArrayDescriptor.allocate(initializingFrom: probs,\n                                                    shape: .vector(probs.count))\n \n let rng = BNNSCreateRandomGenerator(BNNSRandomGeneratorMethodAES_CTR,\n                                     nil);\n \n let error = BNNSRandomFillCategoricalFloat(rng, &desc, &probabilities, false)\n \n defer {\n     BNNSDestroyRandomGenerator(rng)\n }\n```\n\nThe following graph shows the normalized event probabilities as a line chart and a histogram of the normalized random values as a bar chart:\n\n\n\n## Random number generation\n\n- **BNNS.RandomGenerator**: A random number generator.\n- **BNNSCreateRandomGenerator(_:_:)**: Returns a new random number generator using an internally generated random seed.\n- **BNNSCreateRandomGeneratorWithSeed(_:_:_:)**: Returns a new random number generator using the specified seed.\n- **BNNSRandomGeneratorMethod**: Constants that describe random number generation methods.\n- **BNNSRandomGenerator**: A pointer to a random number generator object.\n- **BNNSRandomFillUniformInt(_:_:_:_:)**: Fills the specified tensor with random integer values from the continuous uniform distribution within a range.\n- **BNNSRandomFillUniformFloat(_:_:_:_:)**: Fills the specified tensor with random floating-point values from the continuous uniform distribution within a range.\n- **BNNSRandomFillNormalFloat(_:_:_:_:)**: Fills the specified tensor with random floating-point values mapped to a normal distribution.\n- **BNNSRandomGeneratorStateSize(_:)**: Returns the state size, in bytes, of a random number generator.\n- **BNNSRandomGeneratorGetState(_:_:_:)**: Returns the state of a random number generator.\n- **BNNSRandomGeneratorSetState(_:_:_:)**: Sets the state of a random number generator.\n- **BNNSDestroyRandomGenerator(_:)**: Destroys a random number generator.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "A random number generator.",
          "name" : "BNNS.RandomGenerator",
          "url" : "https:\/\/developer.apple.com\/documentation\/Accelerate\/BNNS\/RandomGenerator"
        },
        {
          "description" : "Returns a new random number generator using an internally generated random seed.",
          "name" : "BNNSCreateRandomGenerator(_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Accelerate\/BNNSCreateRandomGenerator(_:_:)"
        },
        {
          "description" : "Returns a new random number generator using the specified seed.",
          "name" : "BNNSCreateRandomGeneratorWithSeed(_:_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Accelerate\/BNNSCreateRandomGeneratorWithSeed(_:_:_:)"
        },
        {
          "description" : "Constants that describe random number generation methods.",
          "name" : "BNNSRandomGeneratorMethod",
          "url" : "https:\/\/developer.apple.com\/documentation\/Accelerate\/BNNSRandomGeneratorMethod"
        },
        {
          "description" : "A pointer to a random number generator object.",
          "name" : "BNNSRandomGenerator",
          "url" : "https:\/\/developer.apple.com\/documentation\/Accelerate\/BNNSRandomGenerator"
        },
        {
          "description" : "Fills the specified tensor with random integer values from the continuous uniform distribution within a range.",
          "name" : "BNNSRandomFillUniformInt(_:_:_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Accelerate\/BNNSRandomFillUniformInt(_:_:_:_:)"
        },
        {
          "description" : "Fills the specified tensor with random floating-point values from the continuous uniform distribution within a range.",
          "name" : "BNNSRandomFillUniformFloat(_:_:_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Accelerate\/BNNSRandomFillUniformFloat(_:_:_:_:)"
        },
        {
          "description" : "Fills the specified tensor with random floating-point values mapped to a normal distribution.",
          "name" : "BNNSRandomFillNormalFloat(_:_:_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Accelerate\/BNNSRandomFillNormalFloat(_:_:_:_:)"
        },
        {
          "description" : "Returns the state size, in bytes, of a random number generator.",
          "name" : "BNNSRandomGeneratorStateSize(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Accelerate\/BNNSRandomGeneratorStateSize(_:)"
        },
        {
          "description" : "Returns the state of a random number generator.",
          "name" : "BNNSRandomGeneratorGetState(_:_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Accelerate\/BNNSRandomGeneratorGetState(_:_:_:)"
        },
        {
          "description" : "Sets the state of a random number generator.",
          "name" : "BNNSRandomGeneratorSetState(_:_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Accelerate\/BNNSRandomGeneratorSetState(_:_:_:)"
        },
        {
          "description" : "Destroys a random number generator.",
          "name" : "BNNSDestroyRandomGenerator(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Accelerate\/BNNSDestroyRandomGenerator(_:)"
        }
      ],
      "title" : "Random number generation"
    }
  ],
  "source" : "appleJSON",
  "title" : "BNNSRandomFillCategoricalFloat(_:_:_:_:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/Accelerate\/BNNSRandomFillCategoricalFloat(_:_:_:_:)"
}