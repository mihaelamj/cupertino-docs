{
  "abstract" : "Recreate a single file from a compressed file.",
  "codeExamples" : [
    {
      "code" : "let archiveFilePath = FilePath(NSTemporaryDirectory() + \"myFile.pdf.lzfse\")\n\nguard let readFileStream = ArchiveByteStream.fileStream(\n        path: archiveFilePath,\n        mode: .readOnly,\n        options: [ ],\n        permissions: FilePermissions(rawValue: 0o644)) else {\n    return\n}\ndefer {\n    try? readFileStream.close()\n}",
      "language" : "swift"
    },
    {
      "code" : "let destinationFilePath = FilePath(NSTemporaryDirectory() + \"myFile_decompressed.pdf\")\n\nguard let writeFileStream = ArchiveByteStream.fileStream(\n        path: destinationFilePath,\n        mode: .writeOnly,\n        options: [ .create ],\n        permissions: FilePermissions(rawValue: 0o644)) else {\n    return\n}\ndefer {\n    try? writeFileStream.close()\n}",
      "language" : "swift"
    },
    {
      "code" : "guard let decompressStream = ArchiveByteStream.decompressionStream(readingFrom: readFileStream) else {\n    print(\"unable to create compress stream\")\n    return\n}\ndefer {\n    try? decompressStream.close()\n}",
      "language" : "swift"
    },
    {
      "code" : "do {\n    _ = try ArchiveByteStream.process(readingFrom: decompressStream,\n                                      writingTo: writeFileStream)\n} catch {\n    print(\"Handle `ArchiveByteStream.process` failed.\")\n}",
      "language" : "swift"
    }
  ],
  "contentHash" : "e91261dbc9e7e5dfeca0e6b38aaf51b86fa0c6974f30c7ba3c1763d114ab927b",
  "crawledAt" : "2025-12-02T16:25:35Z",
  "id" : "E4462635-4EF0-4593-81B8-C23649C191F4",
  "kind" : "article",
  "language" : "swift",
  "module" : "Accelerate",
  "overview" : "## Overview\n\nIn this article, you’ll learn how to use AppleArchive to decompress a previously compressed file, and write the decompressed data to a file.\n\nThe code below decompresses the file generated using the steps explained in [doc:\/\/com.apple.documentation\/documentation\/Accelerate\/compressing-single-files].\n\n### Create the file stream to read the source archive\n\nThe [doc:\/\/com.apple.documentation\/documentation\/AppleArchive\/ArchiveByteStream] class provides static factory methods that create streams for different functions. In this case, use [doc:\/\/com.apple.documentation\/documentation\/AppleArchive\/ArchiveByteStream\/fileStream(path:mode:options:permissions:)] to create a byte stream that reads the source file:\n\n### Create the file stream to write the decompressed file\n\nYou also use [doc:\/\/com.apple.documentation\/documentation\/AppleArchive\/ArchiveByteStream\/fileStream(path:mode:options:permissions:)] to create the file stream that writes the decompressed file to the file system. In this case, use the [doc:\/\/com.apple.documentation\/documentation\/System\/FileDescriptor\/AccessMode\/writeOnly] mode:\n\n### Create the decompression stream\n\nCreate the decompression stream. Specify the file-reading stream as the input stream that provides the compressed data:\n\n### Decompress the source archive\n\nFinally, call [doc:\/\/com.apple.documentation\/documentation\/AppleArchive\/ArchiveByteStream\/process(readingFrom:writingTo:)] to write the output of the decompression stream to the file-writing stream:\n\nOn return, `myFile_decompressed.pdf` exists in [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSTemporaryDirectory()] and contains the decompressed contents of `myFile.pdf.lzfse`.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/accelerate\/decompressing-single-files\ncrawled: 2025-12-02T16:25:35Z\n---\n\n# Decompressing single files\n\n**Article**\n\nRecreate a single file from a compressed file.\n\n## Overview\n\nIn this article, you’ll learn how to use AppleArchive to decompress a previously compressed file, and write the decompressed data to a file.\n\nThe code below decompresses the file generated using the steps explained in [doc:\/\/com.apple.documentation\/documentation\/Accelerate\/compressing-single-files].\n\n### Create the file stream to read the source archive\n\nThe [doc:\/\/com.apple.documentation\/documentation\/AppleArchive\/ArchiveByteStream] class provides static factory methods that create streams for different functions. In this case, use [doc:\/\/com.apple.documentation\/documentation\/AppleArchive\/ArchiveByteStream\/fileStream(path:mode:options:permissions:)] to create a byte stream that reads the source file:\n\n```swift\nlet archiveFilePath = FilePath(NSTemporaryDirectory() + \"myFile.pdf.lzfse\")\n\nguard let readFileStream = ArchiveByteStream.fileStream(\n        path: archiveFilePath,\n        mode: .readOnly,\n        options: [ ],\n        permissions: FilePermissions(rawValue: 0o644)) else {\n    return\n}\ndefer {\n    try? readFileStream.close()\n}\n```\n\n### Create the file stream to write the decompressed file\n\nYou also use [doc:\/\/com.apple.documentation\/documentation\/AppleArchive\/ArchiveByteStream\/fileStream(path:mode:options:permissions:)] to create the file stream that writes the decompressed file to the file system. In this case, use the [doc:\/\/com.apple.documentation\/documentation\/System\/FileDescriptor\/AccessMode\/writeOnly] mode:\n\n```swift\nlet destinationFilePath = FilePath(NSTemporaryDirectory() + \"myFile_decompressed.pdf\")\n\nguard let writeFileStream = ArchiveByteStream.fileStream(\n        path: destinationFilePath,\n        mode: .writeOnly,\n        options: [ .create ],\n        permissions: FilePermissions(rawValue: 0o644)) else {\n    return\n}\ndefer {\n    try? writeFileStream.close()\n}\n```\n\n### Create the decompression stream\n\nCreate the decompression stream. Specify the file-reading stream as the input stream that provides the compressed data:\n\n```swift\nguard let decompressStream = ArchiveByteStream.decompressionStream(readingFrom: readFileStream) else {\n    print(\"unable to create compress stream\")\n    return\n}\ndefer {\n    try? decompressStream.close()\n}\n```\n\n### Decompress the source archive\n\nFinally, call [doc:\/\/com.apple.documentation\/documentation\/AppleArchive\/ArchiveByteStream\/process(readingFrom:writingTo:)] to write the output of the decompression stream to the file-writing stream:\n\n```swift\ndo {\n    _ = try ArchiveByteStream.process(readingFrom: decompressStream,\n                                      writingTo: writeFileStream)\n} catch {\n    print(\"Handle `ArchiveByteStream.process` failed.\")\n}\n```\n\nOn return, `myFile_decompressed.pdf` exists in [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSTemporaryDirectory()] and contains the decompressed contents of `myFile.pdf.lzfse`.\n\n## Directories, Files, and Data Archives\n\n- **Compressing single files**: Compress a single file and store the result on the file system.\n- **Compressing file system directories**: Compress the contents of an entire directory and store the result on the file system.\n- **Decompressing and extracting an archived directory**: Recreate an entire file system directory from an archive file.\n- **Compressing and saving a string to the file system**: Compress the contents of a Unicode string and store the result on the file system.\n- **Decompressing and parsing an archived string**: Recreate a string from an archive file.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Compress a single file and store the result on the file system.",
          "name" : "Compressing single files",
          "url" : "https:\/\/developer.apple.com\/documentation\/Accelerate\/compressing-single-files"
        },
        {
          "description" : "Compress the contents of an entire directory and store the result on the file system.",
          "name" : "Compressing file system directories",
          "url" : "https:\/\/developer.apple.com\/documentation\/Accelerate\/compressing-file-system-directories"
        },
        {
          "description" : "Recreate an entire file system directory from an archive file.",
          "name" : "Decompressing and extracting an archived directory",
          "url" : "https:\/\/developer.apple.com\/documentation\/Accelerate\/decompressing-and-extracting-an-archived-directory"
        },
        {
          "description" : "Compress the contents of a Unicode string and store the result on the file system.",
          "name" : "Compressing and saving a string to the file system",
          "url" : "https:\/\/developer.apple.com\/documentation\/Accelerate\/compressing-and-saving-a-string-to-the-file-system"
        },
        {
          "description" : "Recreate a string from an archive file.",
          "name" : "Decompressing and parsing an archived string",
          "url" : "https:\/\/developer.apple.com\/documentation\/Accelerate\/decompressing-and-parsing-an-archived-string"
        }
      ],
      "title" : "Directories, Files, and Data Archives"
    }
  ],
  "source" : "appleJSON",
  "title" : "Decompressing single files",
  "url" : "https:\/\/developer.apple.com\/documentation\/accelerate\/decompressing-single-files"
}