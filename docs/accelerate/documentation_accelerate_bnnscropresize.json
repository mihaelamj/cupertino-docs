{
  "abstract" : "Extracts and resizes regions of interest of an input tensor.",
  "codeExamples" : [
    {
      "code" : "let batchSize = 1\nlet channelCount = 1\n\nlet values: [Float] = [ 0, 1, 0, 0, 0, 0,\n                        1, 1, 1, 0, 0, 0,\n                        0, 1, 0, 9, 0, 9,\n                        0, 0, 0, 0, 9, 0,\n                        0, 0, 0, 9, 0, 9 ]\n\nvar inputDescriptor = BNNSNDArrayDescriptor.allocate(\n    initializingFrom: values,\n    shape: .tensor4DLastMajor(6,\n                              5,\n                              channelCount,\n                              batchSize))",
      "language" : "swift"
    },
    {
      "code" : "\/\/ Extracts:\n\/\/      0.0, 1.0, 0.0,\n\/\/      1.0, 1.0, 1.0,\n\/\/      0.0, 1.0, 0.0\nlet roiValues0: [Float] = [1, \/\/ w_center\n                           1, \/\/ h_center\n                           3, \/\/ box_width\n                           3] \/\/ box_height\n\n\/\/ Extracts:\n\/\/      9.0, 0.0, 9.0,\n\/\/      0.0, 9.0, 0.0,\n\/\/      9.0, 0.0, 9.0\nlet roiValues1: [Float] = [4, \/\/ w_center\n                           3, \/\/ h_center\n                           3, \/\/ box_width\n                           3] \/\/ box_height\nlet boxCount = 2\n\nvar roiDescriptor = BNNSNDArrayDescriptor.allocate(\n    initializingFrom: roiValues0 + roiValues1,\n    shape: .matrixLastMajor(4,\n                            boxCount))",
      "language" : "swift"
    },
    {
      "code" : "let outputWidth = 3\nlet outputHeight = 3\n\nvar outputDescriptor = BNNSNDArrayDescriptor.allocateUninitialized(\n    scalarType: Float.self,\n    shape: .tensor5DLastMajor(outputWidth,\n                              outputHeight,\n                              channelCount,\n                              batchSize,\n                              boxCount))",
      "language" : "swift"
    },
    {
      "code" : "var params = BNNSLayerParametersCropResize(\n    normalized_coordinates: false,\n    spatial_scale: 1,\n    extrapolation_value: 0,\n    sampling_mode: BNNSLinearSamplingOffsetCorners,\n    box_coordinate_mode: BNNSCenterSizeWidthFirst,\n    method: BNNSInterpolationMethodLinear)\n\nBNNSCropResize(&params,\n               &inputDescriptor,\n               &roiDescriptor,\n               &outputDescriptor, nil)",
      "language" : "swift"
    },
    {
      "code" : "[ 0.0, 1.0, 0.0,\n  1.0, 1.0, 1.0,\n  0.0, 1.0, 0.0,\n\n  9.0, 0.0, 9.0,\n  0.0, 9.0, 0.0,\n  9.0, 0.0, 9.0 ]",
      "language" : "swift"
    }
  ],
  "contentHash" : "e497610b31a6694f72ddf4c8db97db12dc47b73f8329ee1c9f4151103c25efa3",
  "crawledAt" : "2025-12-02T01:21:23Z",
  "declaration" : {
    "code" : "func BNNSCropResize(_ layer_params: UnsafePointer<BNNSLayerParametersCropResize>, _ input: UnsafePointer<BNNSNDArrayDescriptor>, _ roi: UnsafePointer<BNNSNDArrayDescriptor>, _ output: UnsafeMutablePointer<BNNSNDArrayDescriptor>, _ filter_params: UnsafePointer<BNNSFilterParameters>?) -> Int32",
    "language" : "swift"
  },
  "id" : "F52475BF-780B-4642-A8B8-11E85A8455A0",
  "kind" : "function",
  "module" : "Accelerate",
  "overview" : "## Discussion\n\nUse this function to resize the spatial dimensions (two dimensions with the smallest strides) of the first input according to the bounding boxes and box indices specified in the second input.\n\nThe operation works over contiguous 2D data and provides support for multiple channels and batches that contain more than one input-output pair.\n\nFor example, the following code defines a 6x5 matrix of single-precision values:\n\nDefine the regions of interest as sets of four coordinates. The code below specifies the regions of interest with [doc:\/\/com.apple.accelerate\/documentation\/Accelerate\/BNNSCenterSizeWidthFirst] coordinate mode, that is the coordinates are ordered as horizontal center, vertical center, width, and height.\n\nSpecify the output descriptor as a 5D tensor.\n\nTo perform the crop-resize, create a parameters structure and call [doc:\/\/com.apple.accelerate\/documentation\/Accelerate\/BNNSCropResize(_:_:_:_:_:)].\n\nOn return, `outputDescriptor` contains `boxCount` slices that contain the data with the regions of interest of the input tensor:",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "tvOS",
    "visionOS",
    "watchOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/Accelerate\/BNNSCropResize(_:_:_:_:_:)\ncrawled: 2025-12-02T01:21:23Z\n---\n\n# BNNSCropResize(_:_:_:_:_:)\n\n**Function**\n\nExtracts and resizes regions of interest of an input tensor.\n\n## Declaration\n\n```swift\nfunc BNNSCropResize(_ layer_params: UnsafePointer<BNNSLayerParametersCropResize>, _ input: UnsafePointer<BNNSNDArrayDescriptor>, _ roi: UnsafePointer<BNNSNDArrayDescriptor>, _ output: UnsafeMutablePointer<BNNSNDArrayDescriptor>, _ filter_params: UnsafePointer<BNNSFilterParameters>?) -> Int32\n```\n\n## Parameters\n\n- **layer_params**: A pointer to the layer parameters.\n- **input**: A pointer to the input array descriptor.\n- **roi**: A pointer to the regions of interest array descriptor.\n- **output**: A pointer to the output array descriptor.\n- **filter_params**: Runtime filter parameters.\n\n## Discussion\n\nUse this function to resize the spatial dimensions (two dimensions with the smallest strides) of the first input according to the bounding boxes and box indices specified in the second input.\n\nThe operation works over contiguous 2D data and provides support for multiple channels and batches that contain more than one input-output pair.\n\nFor example, the following code defines a 6x5 matrix of single-precision values:\n\n```swift\nlet batchSize = 1\nlet channelCount = 1\n\nlet values: [Float] = [ 0, 1, 0, 0, 0, 0,\n                        1, 1, 1, 0, 0, 0,\n                        0, 1, 0, 9, 0, 9,\n                        0, 0, 0, 0, 9, 0,\n                        0, 0, 0, 9, 0, 9 ]\n\nvar inputDescriptor = BNNSNDArrayDescriptor.allocate(\n    initializingFrom: values,\n    shape: .tensor4DLastMajor(6,\n                              5,\n                              channelCount,\n                              batchSize))\n```\n\nDefine the regions of interest as sets of four coordinates. The code below specifies the regions of interest with [doc:\/\/com.apple.accelerate\/documentation\/Accelerate\/BNNSCenterSizeWidthFirst] coordinate mode, that is the coordinates are ordered as horizontal center, vertical center, width, and height.\n\n```swift\n\/\/ Extracts:\n\/\/      0.0, 1.0, 0.0,\n\/\/      1.0, 1.0, 1.0,\n\/\/      0.0, 1.0, 0.0\nlet roiValues0: [Float] = [1, \/\/ w_center\n                           1, \/\/ h_center\n                           3, \/\/ box_width\n                           3] \/\/ box_height\n\n\/\/ Extracts:\n\/\/      9.0, 0.0, 9.0,\n\/\/      0.0, 9.0, 0.0,\n\/\/      9.0, 0.0, 9.0\nlet roiValues1: [Float] = [4, \/\/ w_center\n                           3, \/\/ h_center\n                           3, \/\/ box_width\n                           3] \/\/ box_height\nlet boxCount = 2\n\nvar roiDescriptor = BNNSNDArrayDescriptor.allocate(\n    initializingFrom: roiValues0 + roiValues1,\n    shape: .matrixLastMajor(4,\n                            boxCount))\n```\n\nSpecify the output descriptor as a 5D tensor.\n\n```swift\nlet outputWidth = 3\nlet outputHeight = 3\n\nvar outputDescriptor = BNNSNDArrayDescriptor.allocateUninitialized(\n    scalarType: Float.self,\n    shape: .tensor5DLastMajor(outputWidth,\n                              outputHeight,\n                              channelCount,\n                              batchSize,\n                              boxCount))\n```\n\nTo perform the crop-resize, create a parameters structure and call [doc:\/\/com.apple.accelerate\/documentation\/Accelerate\/BNNSCropResize(_:_:_:_:_:)].\n\n```swift\nvar params = BNNSLayerParametersCropResize(\n    normalized_coordinates: false,\n    spatial_scale: 1,\n    extrapolation_value: 0,\n    sampling_mode: BNNSLinearSamplingOffsetCorners,\n    box_coordinate_mode: BNNSCenterSizeWidthFirst,\n    method: BNNSInterpolationMethodLinear)\n\nBNNSCropResize(&params,\n               &inputDescriptor,\n               &roiDescriptor,\n               &outputDescriptor, nil)\n```\n\nOn return, `outputDescriptor` contains `boxCount` slices that contain the data with the regions of interest of the input tensor:\n\n```swift\n[ 0.0, 1.0, 0.0,\n  1.0, 1.0, 1.0,\n  0.0, 1.0, 0.0,\n\n  9.0, 0.0, 9.0,\n  0.0, 9.0, 0.0,\n  9.0, 0.0, 9.0 ]\n```\n\n## Crop-resize layers\n\n- **BNNS.CropResizeLayer**: A layer object that wraps a crop-resize filter and manages its deinitialization.\n- **BNNSCropResizeBackward(_:_:_:_:_:)**: Applies a crop-resize filter backward to generate gradients.\n- **BNNSLayerParametersCropResize**: A set of parameters that describe a crop-resize operation.\n- **BNNSBoxCoordinateMode**: Constants that define the convention to specify the four bounding box coordinates for crop-resize operations.\n- **BNNSLinearSamplingMode**: Constants that specify how a crop-resize layer samples a grid.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "A layer object that wraps a crop-resize filter and manages its deinitialization.",
          "name" : "BNNS.CropResizeLayer",
          "url" : "https:\/\/developer.apple.com\/documentation\/Accelerate\/BNNS\/CropResizeLayer"
        },
        {
          "description" : "Applies a crop-resize filter backward to generate gradients.",
          "name" : "BNNSCropResizeBackward(_:_:_:_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Accelerate\/BNNSCropResizeBackward(_:_:_:_:_:)"
        },
        {
          "description" : "A set of parameters that describe a crop-resize operation.",
          "name" : "BNNSLayerParametersCropResize",
          "url" : "https:\/\/developer.apple.com\/documentation\/Accelerate\/BNNSLayerParametersCropResize"
        },
        {
          "description" : "Constants that define the convention to specify the four bounding box coordinates for crop-resize operations.",
          "name" : "BNNSBoxCoordinateMode",
          "url" : "https:\/\/developer.apple.com\/documentation\/Accelerate\/BNNSBoxCoordinateMode"
        },
        {
          "description" : "Constants that specify how a crop-resize layer samples a grid.",
          "name" : "BNNSLinearSamplingMode",
          "url" : "https:\/\/developer.apple.com\/documentation\/Accelerate\/BNNSLinearSamplingMode"
        }
      ],
      "title" : "Crop-resize layers"
    }
  ],
  "source" : "appleJSON",
  "title" : "BNNSCropResize(_:_:_:_:_:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/Accelerate\/BNNSCropResize(_:_:_:_:_:)"
}