{
  "abstract" : "Returns a new context that wraps a graph object that the given closure defines.",
  "codeExamples" : [
    {
      "code" : "   let context = try BNNSGraph.makeContext ({\n       builder in\n\n       let x = builder.argument(name: \"x\",\n                                dataType: Float.self,\n                                shape: [8])\n       let y = builder.argument(name: \"y\",\n                                dataType: Float.self,\n                                shape: [8])\n\n       let z = x * y\n\n       return [z]\n   })"
    },
    {
      "code" : "   var args = context.argumentNames().map {\n       name in\n\n       return context.tensor(argument: name,\n                             fillKnownDynamicShapes: false)!\n   }\n\n   defer {\n       args.forEach {\n           $0.deallocate()\n       }\n   }\n\n   args[context.argumentPosition(argument: \"x\")]\n       .allocate(initializingFrom: [1, 2, 3, 4, 5, 6, 7, 8] as [Float])\n\n   args[context.argumentPosition(argument: \"y\")]\n       .allocate(initializingFrom: [8, 7, 6, 5, 4, 3, 2, 1] as [Float])\n\n   \/\/ Output argument\n   args[0].allocate(as: Float.self, count: 8)\n\n   try context.executeFunction(arguments: &args)"
    }
  ],
  "contentHash" : "e24a074e3115e27de5204ccedac542ed5bf4e79b5a8ce2e1e0a9e74db7284302",
  "crawledAt" : "2025-11-30T19:51:23Z",
  "declaration" : {
    "code" : "static func makeContext(options: BNNSGraph.CompileOptions = CompileOptions(), _ block: (inout BNNSGraph.Builder) -> [any BNNSGraph.TensorDescriptor]) throws -> BNNSGraph.Context",
    "language" : "swift"
  },
  "id" : "C59A76D9-8BE7-486B-B8AD-D7937FB62986",
  "kind" : "method",
  "module" : "Accelerate",
  "overview" : "## Discussion\n\nUse this function to specify the operations that define a BNNS graph. For example, the following code creates a graph that performs element-wise multiplication of two eight-element vectors:\n\nThe following code defines the arguments and executes the graph:\n\nOn return, `args[0]` contains the values `[8.0, 14.0, 18.0, 20.0, 20.0, 18.0, 14.0, 8.0]`.",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "tvOS",
    "visionOS",
    "watchOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/Accelerate\/BNNSGraph\/makeContext(options:_:)\ncrawled: 2025-11-30T19:51:23Z\n---\n\n# makeContext(options:_:)\n\n**Type Method**\n\nReturns a new context that wraps a graph object that the given closure defines.\n\n## Declaration\n\n```swift\nstatic func makeContext(options: BNNSGraph.CompileOptions = CompileOptions(), _ block: (inout BNNSGraph.Builder) -> [any BNNSGraph.TensorDescriptor]) throws -> BNNSGraph.Context\n```\n\n## Parameters\n\n- **options**: The compilation options.\n- **block**: A closure with a `BNNSGraph.Builder` parameter that points to the BNNS Graph builder.\n\n## Discussion\n\nUse this function to specify the operations that define a BNNS graph. For example, the following code creates a graph that performs element-wise multiplication of two eight-element vectors:\n\n```\n   let context = try BNNSGraph.makeContext ({\n       builder in\n\n       let x = builder.argument(name: \"x\",\n                                dataType: Float.self,\n                                shape: [8])\n       let y = builder.argument(name: \"y\",\n                                dataType: Float.self,\n                                shape: [8])\n\n       let z = x * y\n\n       return [z]\n   })\n```\n\nThe following code defines the arguments and executes the graph:\n\n```\n   var args = context.argumentNames().map {\n       name in\n\n       return context.tensor(argument: name,\n                             fillKnownDynamicShapes: false)!\n   }\n\n   defer {\n       args.forEach {\n           $0.deallocate()\n       }\n   }\n\n   args[context.argumentPosition(argument: \"x\")]\n       .allocate(initializingFrom: [1, 2, 3, 4, 5, 6, 7, 8] as [Float])\n\n   args[context.argumentPosition(argument: \"y\")]\n       .allocate(initializingFrom: [8, 7, 6, 5, 4, 3, 2, 1] as [Float])\n\n   \/\/ Output argument\n   args[0].allocate(as: Float.self, count: 8)\n\n   try context.executeFunction(arguments: &args)\n```\n\nOn return, `args[0]` contains the values `[8.0, 14.0, 18.0, 20.0, 20.0, 18.0, 14.0, 8.0]`.\n\n## Building graphs in Swift\n\n- **BNNSGraph.Builder**: A structure thats provides a closure you can use to define the arguments and operations of a BNNS Graph.\n- **BNNSGraph.Builder.Tensor**: A structure that represents an abstract handle to a tensor that you use within a `BNNSGraph.makeContext` closure.\n- **Supporting real-time ML inference on the CPU**: Add real-time digital signal processing to apps like Logic Pro X and GarageBand with the BNNS Graph API.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "A structure thats provides a closure you can use to define the arguments and operations of a BNNS Graph.",
          "name" : "BNNSGraph.Builder",
          "url" : "https:\/\/developer.apple.com\/documentation\/Accelerate\/BNNSGraph\/Builder"
        },
        {
          "description" : "A structure that represents an abstract handle to a tensor that you use within a `BNNSGraph.makeContext` closure.",
          "name" : "BNNSGraph.Builder.Tensor",
          "url" : "https:\/\/developer.apple.com\/documentation\/Accelerate\/BNNSGraph\/Builder\/Tensor"
        },
        {
          "description" : "Add real-time digital signal processing to apps like Logic Pro X and GarageBand with the BNNS Graph API.",
          "name" : "Supporting real-time ML inference on the CPU",
          "url" : "https:\/\/developer.apple.com\/documentation\/Accelerate\/supporting-real-time-ml-inference-on-the-cpu"
        }
      ],
      "title" : "Building graphs in Swift"
    }
  ],
  "source" : "appleJSON",
  "title" : "makeContext(options:_:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/Accelerate\/BNNSGraph\/makeContext(options:_:)"
}