{
  "abstract" : "Use iterative methods to solve systems of equations where the coefficient matrix is sparse.",
  "codeExamples" : [

  ],
  "contentHash" : "98fc501d3b4e6af615e79d8a178e0bb416f8475b0ce643920b28df21faadaa00",
  "crawledAt" : "2025-12-02T15:55:44Z",
  "id" : "89FA8C69-659B-47BE-AD16-213AED686013",
  "kind" : "article",
  "language" : "swift",
  "module" : "Accelerate",
  "overview" : "## Overview\n\nThe code in this article solves the following equation by using the iterative method of least squares minimum residual (LSMR) to find the solution.\n\n\n\nIn the equation above, `A` refers to the four-by-three matrix, and `b` to the right-hand-side vector. The code in this article solves the equation `Ax = b` by finding `x`.\n\nBecause `A` is an overdetermined matrix (that is, it has more rows than columns), for most right-hand-sides there isn’t an exact solution. In this case, you usually find the closest solution that minimizes the 2-norm of the error. That is, the solution solves the optimization `min ‖ Ax - b ‖₂`. This is known as the *least-squares problem*.\n\nYou could solve this problem through a direct method, such as sparse QR; however, for some problems, a faster method that provides an adequate solution is the iterative method LSMR. Unlike direct methods that factorize the matrix `A`, iterative methods only require the ability to multiply by the matrix (and its transpose, `Aᵀ`). They move through a sequence of approximate solutions, converging to the correct answer. However, these methods run into numerical difficulties more often than direct methods. Resolving these issues requires expert knowledge, and is sometimes impossible. The most common method to improve and accelerate convergence is to use a preconditioner — an operator that approximates `A⁻¹`. For least-squares problems, using a diagonal matrix with entries equal to the 2-norm of each column is often sufficient and is the method that this article covers.\n\n### Create the matrix\n\nUse the code below — which [doc:\/\/com.apple.documentation\/documentation\/Accelerate\/creating-sparse-matrices] covers in detail — to define the unsymmetric matrix `A`:\n\n### Solve the equation\n\nDefine the right-hand-side and solution vectors as arrays that you wrap in [doc:\/\/com.apple.accelerate\/documentation\/Accelerate\/DenseVector_Double] structures. The sparse solve function uses the initial values of `x` as an initial guess of the solution. If you don’t have a good estimate, initialize all the values to zero.\n\nUse the matrix and vectors to perform the full LSMR iteration and iterate over the results in `x`. [doc:\/\/com.apple.accelerate\/documentation\/Accelerate\/SparseSolve(_:_:_:_:_:)-5vs11] returns a status which, if equal to [doc:\/\/com.apple.accelerate\/documentation\/Accelerate\/SparseIterativeConverged], indicates that the vector, `x`, contains the solution.\n\nOn return, `x` contains the values  `0.10 0.20 0.30`.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/Accelerate\/solving-systems-using-iterative-methods\ncrawled: 2025-12-02T15:55:44Z\n---\n\n# Solving systems using iterative methods\n\n**Article**\n\nUse iterative methods to solve systems of equations where the coefficient matrix is sparse.\n\n## Overview\n\nThe code in this article solves the following equation by using the iterative method of least squares minimum residual (LSMR) to find the solution.\n\n\n\nIn the equation above, `A` refers to the four-by-three matrix, and `b` to the right-hand-side vector. The code in this article solves the equation `Ax = b` by finding `x`.\n\nBecause `A` is an overdetermined matrix (that is, it has more rows than columns), for most right-hand-sides there isn’t an exact solution. In this case, you usually find the closest solution that minimizes the 2-norm of the error. That is, the solution solves the optimization `min ‖ Ax - b ‖₂`. This is known as the *least-squares problem*.\n\nYou could solve this problem through a direct method, such as sparse QR; however, for some problems, a faster method that provides an adequate solution is the iterative method LSMR. Unlike direct methods that factorize the matrix `A`, iterative methods only require the ability to multiply by the matrix (and its transpose, `Aᵀ`). They move through a sequence of approximate solutions, converging to the correct answer. However, these methods run into numerical difficulties more often than direct methods. Resolving these issues requires expert knowledge, and is sometimes impossible. The most common method to improve and accelerate convergence is to use a preconditioner — an operator that approximates `A⁻¹`. For least-squares problems, using a diagonal matrix with entries equal to the 2-norm of each column is often sufficient and is the method that this article covers.\n\n### Create the matrix\n\nUse the code below — which [doc:\/\/com.apple.documentation\/documentation\/Accelerate\/creating-sparse-matrices] covers in detail — to define the unsymmetric matrix `A`:\n\n\n\n### Solve the equation\n\nDefine the right-hand-side and solution vectors as arrays that you wrap in [doc:\/\/com.apple.accelerate\/documentation\/Accelerate\/DenseVector_Double] structures. The sparse solve function uses the initial values of `x` as an initial guess of the solution. If you don’t have a good estimate, initialize all the values to zero.\n\n\n\nUse the matrix and vectors to perform the full LSMR iteration and iterate over the results in `x`. [doc:\/\/com.apple.accelerate\/documentation\/Accelerate\/SparseSolve(_:_:_:_:_:)-5vs11] returns a status which, if equal to [doc:\/\/com.apple.accelerate\/documentation\/Accelerate\/SparseIterativeConverged], indicates that the vector, `x`, contains the solution.\n\n\n\nOn return, `x` contains the values  `0.10 0.20 0.30`.\n\n## Sparse Matrices\n\n- **Creating sparse matrices**: Create sparse matrices for factorization and solving systems.\n- **Solving systems using direct methods**: Use direct methods to solve systems of equations where the coefficient matrix is sparse.\n- **Creating a sparse matrix from coordinate format arrays**: Use separate coordinate format arrays to create sparse matrices.\n- **Sparse Solvers**: Solve systems of equations where the coefficient matrix is sparse.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Create sparse matrices for factorization and solving systems.",
          "name" : "Creating sparse matrices",
          "url" : "https:\/\/developer.apple.com\/documentation\/Accelerate\/creating-sparse-matrices"
        },
        {
          "description" : "Use direct methods to solve systems of equations where the coefficient matrix is sparse.",
          "name" : "Solving systems using direct methods",
          "url" : "https:\/\/developer.apple.com\/documentation\/Accelerate\/solving-systems-using-direct-methods"
        },
        {
          "description" : "Use separate coordinate format arrays to create sparse matrices.",
          "name" : "Creating a sparse matrix from coordinate format arrays",
          "url" : "https:\/\/developer.apple.com\/documentation\/Accelerate\/creating-a-sparse-matrix-from-coordinate-format-arrays"
        },
        {
          "description" : "Solve systems of equations where the coefficient matrix is sparse.",
          "name" : "Sparse Solvers",
          "url" : "https:\/\/developer.apple.com\/documentation\/Accelerate\/sparse-solvers-library"
        }
      ],
      "title" : "Sparse Matrices"
    }
  ],
  "source" : "appleJSON",
  "title" : "Solving systems using iterative methods",
  "url" : "https:\/\/developer.apple.com\/documentation\/Accelerate\/solving-systems-using-iterative-methods"
}