{
  "abstract" : "Initializes a pixel buffer by copying the data from a Core Video pixel buffer.",
  "codeExamples" : [
    {
      "code" : "class ContrastStretchImageProcessorKernel: CIImageProcessorKernel {\n    \n    static var cgImageFormat = vImage_CGImageFormat(\n        bitsPerComponent: 8,\n        bitsPerPixel: 32,\n        colorSpace: CGColorSpaceCreateDeviceRGB(),\n        bitmapInfo: CGBitmapInfo(rawValue: CGImageAlphaInfo.noneSkipLast.rawValue),\n        renderingIntent: .defaultIntent)!\n    \n    static let cvImageFormat = vImageCVImageFormat.make(\n        format: .format32BGRA,\n        colorSpace: CGColorSpaceCreateDeviceRGB(),\n        alphaIsOpaqueHint: true)!\n\n    override class var outputFormat: CIFormat {\n        return CIFormat.BGRA8\n    }\n    \n    override class func formatForInput(at input: Int32) -> CIFormat {\n        return CIFormat.BGRA8\n    }\n    \n    override class func process(with inputs: [CIImageProcessorInput]?,\n                                arguments: [String: Any]?,\n                                output: CIImageProcessorOutput) throws {\n        \n        guard\n            let input = inputs?.first,\n            let inputPixelBuffer = input.pixelBuffer,\n            let outputPixelBuffer = output.pixelBuffer else {\n                return\n            }\n   \n        let buffer = try vImage.PixelBuffer(copying: inputPixelBuffer,\n                                            cvImageFormat: cvImageFormat,\n                                            cgImageFormat: &cgImageFormat,\n                                            pixelFormat: vImage.Interleaved8x4.self)\n        \n        buffer.contrastStretch(destination: buffer)\n        \n        try buffer.copy(to: outputPixelBuffer,\n                        cvImageFormat: cvImageFormat,\n                        cgImageFormat: cgImageFormat)\n    }\n}",
      "language" : "swift"
    }
  ],
  "contentHash" : "27ba9834c23f943f8d727d0fbdd87c0e13082ffd3717958df84dd126f56dd3f5",
  "crawledAt" : "2025-12-03T08:05:05Z",
  "declaration" : {
    "code" : "init(copying cvPixelBuffer: CVPixelBuffer, cvImageFormat: vImageCVImageFormat, cgImageFormat: inout vImage_CGImageFormat, pixelFormat: Format.Type = Format.self) throws",
    "language" : "swift"
  },
  "id" : "627B6126-1C9E-4F1B-9566-35BD960FB08A",
  "kind" : "unknown",
  "language" : "swift",
  "module" : "Accelerate",
  "overview" : "## Discussion\n\nThe following code shows how to incorporate a vImage pixel buffer into a [doc:\/\/com.apple.documentation\/documentation\/CoreImage\/CIImageProcessorKernel] instance. The code calls [doc:\/\/com.apple.accelerate\/documentation\/Accelerate\/vImage\/PixelBuffer\/init(copying:cvImageFormat:cgImageFormat:pixelFormat:)] to initialize a pixel buffer from the processor kernel’s input.",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "tvOS",
    "visionOS",
    "watchOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/Accelerate\/vImage\/PixelBuffer\/init(copying:cvImageFormat:cgImageFormat:pixelFormat:)\ncrawled: 2025-12-03T08:05:05Z\n---\n\n# init(copying:cvImageFormat:cgImageFormat:pixelFormat:)\n\n**Initializer**\n\nInitializes a pixel buffer by copying the data from a Core Video pixel buffer.\n\n## Declaration\n\n```swift\ninit(copying cvPixelBuffer: CVPixelBuffer, cvImageFormat: vImageCVImageFormat, cgImageFormat: inout vImage_CGImageFormat, pixelFormat: Format.Type = Format.self) throws\n```\n\n## Parameters\n\n- **cvPixelBuffer**: The source Core Video pixel buffer.\n- **cvImageFormat**: The image format of the Core Video pixel buffer.\n- **cgImageFormat**: The Core Graphics image format that specifies the image output.\n- **pixelFormat**: The pixel format of the initialized buffer.\n\n## Discussion\n\nThe following code shows how to incorporate a vImage pixel buffer into a [doc:\/\/com.apple.documentation\/documentation\/CoreImage\/CIImageProcessorKernel] instance. The code calls [doc:\/\/com.apple.accelerate\/documentation\/Accelerate\/vImage\/PixelBuffer\/init(copying:cvImageFormat:cgImageFormat:pixelFormat:)] to initialize a pixel buffer from the processor kernel’s input.\n\n```swift\nclass ContrastStretchImageProcessorKernel: CIImageProcessorKernel {\n    \n    static var cgImageFormat = vImage_CGImageFormat(\n        bitsPerComponent: 8,\n        bitsPerPixel: 32,\n        colorSpace: CGColorSpaceCreateDeviceRGB(),\n        bitmapInfo: CGBitmapInfo(rawValue: CGImageAlphaInfo.noneSkipLast.rawValue),\n        renderingIntent: .defaultIntent)!\n    \n    static let cvImageFormat = vImageCVImageFormat.make(\n        format: .format32BGRA,\n        colorSpace: CGColorSpaceCreateDeviceRGB(),\n        alphaIsOpaqueHint: true)!\n\n    override class var outputFormat: CIFormat {\n        return CIFormat.BGRA8\n    }\n    \n    override class func formatForInput(at input: Int32) -> CIFormat {\n        return CIFormat.BGRA8\n    }\n    \n    override class func process(with inputs: [CIImageProcessorInput]?,\n                                arguments: [String: Any]?,\n                                output: CIImageProcessorOutput) throws {\n        \n        guard\n            let input = inputs?.first,\n            let inputPixelBuffer = input.pixelBuffer,\n            let outputPixelBuffer = output.pixelBuffer else {\n                return\n            }\n   \n        let buffer = try vImage.PixelBuffer(copying: inputPixelBuffer,\n                                            cvImageFormat: cvImageFormat,\n                                            cgImageFormat: &cgImageFormat,\n                                            pixelFormat: vImage.Interleaved8x4.self)\n        \n        buffer.contrastStretch(destination: buffer)\n        \n        try buffer.copy(to: outputPixelBuffer,\n                        cvImageFormat: cvImageFormat,\n                        cgImageFormat: cgImageFormat)\n    }\n}\n```\n\n## Related Documentation\n\n- **vImageBuffer_InitWithCVPixelBuffer(_:_:_:_:_:_:)**: Initializes a vImage buffer with a copy of the contents of a Core Video pixel buffer.\n\n## Creating a pixel buffer from a Core Video buffer\n\n- **init(referencing:converter:destinationPixelFormat:)**: Returns a new pixel buffer that references the specified Core Video pixel buffer and populated converter.\n- **init(referencing:planeIndex:overrideSize:pixelFormat:)**: Initializes a pixel buffer by refencing the data from a single plane of a multiplane Core Video pixel buffer.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Initializes a vImage buffer with a copy of the contents of a Core Video pixel buffer.",
          "name" : "vImageBuffer_InitWithCVPixelBuffer(_:_:_:_:_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Accelerate\/vImageBuffer_InitWithCVPixelBuffer(_:_:_:_:_:_:)"
        }
      ],
      "title" : "Related Documentation"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Returns a new pixel buffer that references the specified Core Video pixel buffer and populated converter.",
          "name" : "init(referencing:converter:destinationPixelFormat:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Accelerate\/vImage\/PixelBuffer\/init(referencing:converter:destinationPixelFormat:)"
        },
        {
          "description" : "Initializes a pixel buffer by refencing the data from a single plane of a multiplane Core Video pixel buffer.",
          "name" : "init(referencing:planeIndex:overrideSize:pixelFormat:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Accelerate\/vImage\/PixelBuffer\/init(referencing:planeIndex:overrideSize:pixelFormat:)"
        }
      ],
      "title" : "Creating a pixel buffer from a Core Video buffer"
    }
  ],
  "source" : "appleJSON",
  "title" : "init(copying:cvImageFormat:cgImageFormat:pixelFormat:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/Accelerate\/vImage\/PixelBuffer\/init(copying:cvImageFormat:cgImageFormat:pixelFormat:)"
}