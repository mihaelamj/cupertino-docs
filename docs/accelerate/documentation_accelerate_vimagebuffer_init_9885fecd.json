{
  "abstract" : "Initializes a vImage buffer with a specified width, height, and bits per pixel.",
  "codeExamples" : [
    {
      "code" : "var buffer = vImage_Buffer()\n\nvImageBuffer_Init(\n    &buffer,\n    5,    \/\/ height\n    10,   \/\/ width\n    8,    \/\/ bits per pixel\n    vImage_Flags(kvImageNoFlags))\n\n\/\/ Prints \"vImage_Buffer(data: Optional(...), height: 5, width: 10, rowBytes: 16)\".\nprint(buffer)",
      "language" : "swift"
    },
    {
      "code" : "let width = 10\nlet height = 5\n\nvar buffer = vImage_Buffer()\n\nlet alignment = vImageBuffer_Init(\n    &buffer,\n    vImagePixelCount(height),\n    vImagePixelCount(width),\n    8,\n    vImage_Flags(kvImageNoAllocate))\n\nguard alignment > 0 else {\n    \/\/ A negative value indicates an error.\n    fatalError()\n}\n\nlet data = UnsafeMutableRawPointer.allocate(\n    byteCount: buffer.rowBytes * height,\n    alignment: alignment)\n\nbuffer.data = data\n\n\/\/ Prints \"vImage_Buffer(data: Optional(...), height: 5, width: 10, rowBytes: 16)\".\nprint(buffer)",
      "language" : "swift"
    }
  ],
  "contentHash" : "8e4ce638f790693586cfa5ae13bf1c9fe11d05be404d1d7c279ee3ad29b8b373",
  "crawledAt" : "2025-12-02T22:18:33Z",
  "declaration" : {
    "code" : "func vImageBuffer_Init(_ buf: UnsafeMutablePointer<vImage_Buffer>, _ height: vImagePixelCount, _ width: vImagePixelCount, _ pixelBits: UInt32, _ flags: vImage_Flags) -> vImage_Error",
    "language" : "swift"
  },
  "id" : "CB9B845D-BD4A-46DD-AB55-10668172DFAC",
  "kind" : "function",
  "language" : "swift",
  "module" : "Accelerate",
  "overview" : "## Return Value\n\n[doc:\/\/com.apple.accelerate\/documentation\/Accelerate\/kvImageNoError]; otherwise, one of the error codes in [doc:\/\/com.apple.documentation\/documentation\/Accelerate\/data-types-and-constants].\n\n## Discussion\n\nThis function provides two different operations, depending on whether you pass the [doc:\/\/com.apple.accelerate\/documentation\/Accelerate\/kvImageNoAllocate] flag.\n\nWithout the [doc:\/\/com.apple.accelerate\/documentation\/Accelerate\/kvImageNoAllocate] flag, this function initializes a [doc:\/\/com.apple.accelerate\/documentation\/Accelerate\/vImage_Buffer] structure with memory that the vImage library sizes and aligns for the best performance. For example, the following code initializes a vImage buffer with the optimal memory size and alignment for a 10 x 5 image:\n\nWith the [doc:\/\/com.apple.accelerate\/documentation\/Accelerate\/kvImageNoAllocate] flag, the function returns the memory alignment and overwrites the buffer’s [doc:\/\/com.apple.accelerate\/documentation\/Accelerate\/vImage_Buffer\/rowBytes] property with values that provide the best performance. For example, the following code calls [doc:\/\/com.apple.accelerate\/documentation\/Accelerate\/vImageBuffer_Init(_:_:_:_:_:)] and uses the computed values to allocate an [doc:\/\/com.apple.documentation\/documentation\/Swift\/UnsafeMutableRawPointer]:\n\nIn both cases, this function sets the buffer’s width, height, and row bytes properties.",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "tvOS",
    "visionOS",
    "watchOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/Accelerate\/vImageBuffer_Init(_:_:_:_:_:)\ncrawled: 2025-12-02T22:18:33Z\n---\n\n# vImageBuffer_Init(_:_:_:_:_:)\n\n**Function**\n\nInitializes a vImage buffer with a specified width, height, and bits per pixel.\n\n## Declaration\n\n```swift\nfunc vImageBuffer_Init(_ buf: UnsafeMutablePointer<vImage_Buffer>, _ height: vImagePixelCount, _ width: vImagePixelCount, _ pixelBits: UInt32, _ flags: vImage_Flags) -> vImage_Error\n```\n\n## Parameters\n\n- **buf**: A valid empty [doc:\/\/com.apple.accelerate\/documentation\/Accelerate\/vImage_Buffer] structure.\n- **height**: The height of the image.\n- **width**: The width of the image.\n- **pixelBits**: The number of bits in a pixel of image data. If `pixelBits` isn’t divisible by 8, [doc:\/\/com.apple.accelerate\/documentation\/Accelerate\/vImageBuffer_Init(_:_:_:_:_:)] pads each row of pixels to a multiple of a byte. This ensures that two rows don’t share the same byte, and all rows start at the beginning of a byte.\n- **flags**: The options to use when performing this operation.\n\n## Return Value\n\n[doc:\/\/com.apple.accelerate\/documentation\/Accelerate\/kvImageNoError]; otherwise, one of the error codes in [doc:\/\/com.apple.documentation\/documentation\/Accelerate\/data-types-and-constants].\n\n## Discussion\n\nThis function provides two different operations, depending on whether you pass the [doc:\/\/com.apple.accelerate\/documentation\/Accelerate\/kvImageNoAllocate] flag.\n\nWithout the [doc:\/\/com.apple.accelerate\/documentation\/Accelerate\/kvImageNoAllocate] flag, this function initializes a [doc:\/\/com.apple.accelerate\/documentation\/Accelerate\/vImage_Buffer] structure with memory that the vImage library sizes and aligns for the best performance. For example, the following code initializes a vImage buffer with the optimal memory size and alignment for a 10 x 5 image:\n\n```swift\nvar buffer = vImage_Buffer()\n\nvImageBuffer_Init(\n    &buffer,\n    5,    \/\/ height\n    10,   \/\/ width\n    8,    \/\/ bits per pixel\n    vImage_Flags(kvImageNoFlags))\n\n\/\/ Prints \"vImage_Buffer(data: Optional(...), height: 5, width: 10, rowBytes: 16)\".\nprint(buffer)\n```\n\nWith the [doc:\/\/com.apple.accelerate\/documentation\/Accelerate\/kvImageNoAllocate] flag, the function returns the memory alignment and overwrites the buffer’s [doc:\/\/com.apple.accelerate\/documentation\/Accelerate\/vImage_Buffer\/rowBytes] property with values that provide the best performance. For example, the following code calls [doc:\/\/com.apple.accelerate\/documentation\/Accelerate\/vImageBuffer_Init(_:_:_:_:_:)] and uses the computed values to allocate an [doc:\/\/com.apple.documentation\/documentation\/Swift\/UnsafeMutableRawPointer]:\n\n```swift\nlet width = 10\nlet height = 5\n\nvar buffer = vImage_Buffer()\n\nlet alignment = vImageBuffer_Init(\n    &buffer,\n    vImagePixelCount(height),\n    vImagePixelCount(width),\n    8,\n    vImage_Flags(kvImageNoAllocate))\n\nguard alignment > 0 else {\n    \/\/ A negative value indicates an error.\n    fatalError()\n}\n\nlet data = UnsafeMutableRawPointer.allocate(\n    byteCount: buffer.rowBytes * height,\n    alignment: alignment)\n\nbuffer.data = data\n\n\/\/ Prints \"vImage_Buffer(data: Optional(...), height: 5, width: 10, rowBytes: 16)\".\nprint(buffer)\n```\n\nIn both cases, this function sets the buffer’s width, height, and row bytes properties.\n\n## Initializing vImage buffers\n\n- **vImage_Buffer**: An image buffer that stores an image’s pixel data, dimensions, and row stride.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "An image buffer that stores an image’s pixel data, dimensions, and row stride.",
          "name" : "vImage_Buffer",
          "url" : "https:\/\/developer.apple.com\/documentation\/Accelerate\/vImage_Buffer"
        }
      ],
      "title" : "Initializing vImage buffers"
    }
  ],
  "source" : "appleJSON",
  "title" : "vImageBuffer_Init(_:_:_:_:_:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/Accelerate\/vImageBuffer_Init(_:_:_:_:_:)"
}