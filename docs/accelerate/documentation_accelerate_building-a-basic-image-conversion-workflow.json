{
  "abstract" : "Learn the fundamentals of the convert-any-to-any function by converting a CMYK image to an RGB image.",
  "codeExamples" : [
    {
      "code" : "let cmykSourceImageFormat = vImage_CGImageFormat(\n    bitsPerComponent: 16,\n    bitsPerPixel: 16 * 4,\n    colorSpace: CGColorSpaceCreateDeviceCMYK(),\n    bitmapInfo: CGBitmapInfo(rawValue: CGImageAlphaInfo.none.rawValue))!\n\nlet rgbDestinationImageFormat = vImage_CGImageFormat(\n    bitsPerComponent: 8,\n    bitsPerPixel: 8 * 3,\n    colorSpace: CGColorSpaceCreateDeviceRGB(),\n    bitmapInfo: CGBitmapInfo(rawValue: CGImageAlphaInfo.none.rawValue))!",
      "language" : "swift"
    },
    {
      "code" : "let cmykToRgbConverter = try vImageConverter.make(\n    sourceFormat: cmykSourceImageFormat,\n    destinationFormat: rgbDestinationImageFormat)",
      "language" : "swift"
    },
    {
      "code" : "let rgbDestinationBuffer = vImage.PixelBuffer<vImage.Interleaved8x3>(\n    size: cmykSourceBuffer.size)\n\ntry cmykToRgbConverter.convert(from: cmykSourceBuffer,\n                               to: rgbDestinationBuffer)",
      "language" : "swift"
    },
    {
      "code" : "var rgbDestinationBuffer = try vImage_Buffer(\n    size: cmykSourceBuffer.size,\n    bitsPerPixel: rgbDestinationImageFormat.bitsPerPixel)\n\ntry cmykToRgbConverter.convert(source: cmykSourceBuffer,\n                               destination: &rgbDestinationBuffer)",
      "language" : "swift"
    }
  ],
  "contentHash" : "51442f4f6c5fd5fb60d76e1262a9427f05b5d44fb50a2418d35102eb86594e8a",
  "crawledAt" : "2025-12-05T07:52:39Z",
  "id" : "1665BE92-7543-4E73-86B2-17C3B4FDE0E8",
  "kind" : "article",
  "language" : "swift",
  "module" : "Accelerate",
  "overview" : "## Overview\n\nThe functions in the vImage library that perform image-processing operations are specific to properties such as bit-depth, the number of channels, and channel ordering. For example, the [doc:\/\/com.apple.accelerate\/documentation\/Accelerate\/vImageAlphaBlend_ARGB8888(_:_:_:_:)] function works with 8-bit-per-channel, ARGB image data. The convert-any-to-any functionality allows you to convert images with formats you know at runtime to a format you define at compile time.\n\nYou can use the vImage convert-any-to-any functionality to convert image data between different bit depths, different channel counts, and different color spaces. In this example, the code converts a 16-bit-per-channel CMYK source image to an 8-bit-per-channel RGB destination image. In some cases, working in a non-RGB color space simplifies image-processing tasks. For an example of using convert-any-to-any to work in L*a*b* color space, see [doc:\/\/com.apple.documentation\/documentation\/Accelerate\/adjusting-the-hue-of-an-image].\n\n### Create the source and destination image formats\n\nA [doc:\/\/com.apple.accelerate\/documentation\/Accelerate\/vImageConverter] instance – that contains the information to perform image conversion – requires two [doc:\/\/com.apple.accelerate\/documentation\/Accelerate\/vImage_CGImageFormat] structures that describe the source and destination formats. The code below defines the CMYK source format and the RGB destination format:\n\n### Create the converter\n\nThe Swift [doc:\/\/com.apple.accelerate\/documentation\/Accelerate\/vImageConverter\/make(sourceFormat:destinationFormat:flags:)-8tbym] method calls the underlying [doc:\/\/com.apple.accelerate\/documentation\/Accelerate\/vImageConverter_CreateWithCGImageFormat(_:_:_:_:_:)] function and returns a new any-to-any converter instance.\n\n### Perform the conversion using pixel buffers\n\nThe code below converts the CMYK image data that `cmykSourceBuffer` contains and writes the RGB result to `rgbDestinationBuffer`. In this example, `cmykSourceBuffer` is a [doc:\/\/com.apple.accelerate\/documentation\/Accelerate\/vImage\/PixelBuffer] structure with a [doc:\/\/com.apple.accelerate\/documentation\/Accelerate\/vImage\/Interleaved16Ux4] format.\n\nThe Swift [doc:\/\/com.apple.accelerate\/documentation\/Accelerate\/vImageConverter\/convert(from:to:)-9s7p7] method calls the underlying [doc:\/\/com.apple.accelerate\/documentation\/Accelerate\/vImageConvert_AnyToAny(_:_:_:_:_:)] function.\n\nOn return, `rgbDestinationBuffer` contains the RGB representation of the CMYK source image.\n\n### Perform the conversion using vImage buffers\n\nIf you’re creating apps for older operating systems that don’t support the [doc:\/\/com.apple.accelerate\/documentation\/Accelerate\/vImage\/PixelBuffer] API, the following code performs the same conversion using [doc:\/\/com.apple.accelerate\/documentation\/Accelerate\/vImage_Buffer] structures.\n\nThe Swift [doc:\/\/com.apple.accelerate\/documentation\/Accelerate\/vImageConverter\/convert(source:destination:flags:)] method calls the underlying [doc:\/\/com.apple.accelerate\/documentation\/Accelerate\/vImageConvert_AnyToAny(_:_:_:_:_:)] function\n\nOn return, `rgbDestinationBuffer` contains the RGB representation of the CMYK source image.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/accelerate\/building-a-basic-image-conversion-workflow\ncrawled: 2025-12-05T07:52:39Z\n---\n\n# Building a basic image conversion workflow\n\n**Article**\n\nLearn the fundamentals of the convert-any-to-any function by converting a CMYK image to an RGB image.\n\n## Overview\n\nThe functions in the vImage library that perform image-processing operations are specific to properties such as bit-depth, the number of channels, and channel ordering. For example, the [doc:\/\/com.apple.accelerate\/documentation\/Accelerate\/vImageAlphaBlend_ARGB8888(_:_:_:_:)] function works with 8-bit-per-channel, ARGB image data. The convert-any-to-any functionality allows you to convert images with formats you know at runtime to a format you define at compile time.\n\nYou can use the vImage convert-any-to-any functionality to convert image data between different bit depths, different channel counts, and different color spaces. In this example, the code converts a 16-bit-per-channel CMYK source image to an 8-bit-per-channel RGB destination image. In some cases, working in a non-RGB color space simplifies image-processing tasks. For an example of using convert-any-to-any to work in L*a*b* color space, see [doc:\/\/com.apple.documentation\/documentation\/Accelerate\/adjusting-the-hue-of-an-image].\n\n### Create the source and destination image formats\n\nA [doc:\/\/com.apple.accelerate\/documentation\/Accelerate\/vImageConverter] instance – that contains the information to perform image conversion – requires two [doc:\/\/com.apple.accelerate\/documentation\/Accelerate\/vImage_CGImageFormat] structures that describe the source and destination formats. The code below defines the CMYK source format and the RGB destination format:\n\n```swift\nlet cmykSourceImageFormat = vImage_CGImageFormat(\n    bitsPerComponent: 16,\n    bitsPerPixel: 16 * 4,\n    colorSpace: CGColorSpaceCreateDeviceCMYK(),\n    bitmapInfo: CGBitmapInfo(rawValue: CGImageAlphaInfo.none.rawValue))!\n\nlet rgbDestinationImageFormat = vImage_CGImageFormat(\n    bitsPerComponent: 8,\n    bitsPerPixel: 8 * 3,\n    colorSpace: CGColorSpaceCreateDeviceRGB(),\n    bitmapInfo: CGBitmapInfo(rawValue: CGImageAlphaInfo.none.rawValue))!\n```\n\n### Create the converter\n\nThe Swift [doc:\/\/com.apple.accelerate\/documentation\/Accelerate\/vImageConverter\/make(sourceFormat:destinationFormat:flags:)-8tbym] method calls the underlying [doc:\/\/com.apple.accelerate\/documentation\/Accelerate\/vImageConverter_CreateWithCGImageFormat(_:_:_:_:_:)] function and returns a new any-to-any converter instance.\n\n```swift\nlet cmykToRgbConverter = try vImageConverter.make(\n    sourceFormat: cmykSourceImageFormat,\n    destinationFormat: rgbDestinationImageFormat)\n```\n\n### Perform the conversion using pixel buffers\n\nThe code below converts the CMYK image data that `cmykSourceBuffer` contains and writes the RGB result to `rgbDestinationBuffer`. In this example, `cmykSourceBuffer` is a [doc:\/\/com.apple.accelerate\/documentation\/Accelerate\/vImage\/PixelBuffer] structure with a [doc:\/\/com.apple.accelerate\/documentation\/Accelerate\/vImage\/Interleaved16Ux4] format.\n\nThe Swift [doc:\/\/com.apple.accelerate\/documentation\/Accelerate\/vImageConverter\/convert(from:to:)-9s7p7] method calls the underlying [doc:\/\/com.apple.accelerate\/documentation\/Accelerate\/vImageConvert_AnyToAny(_:_:_:_:_:)] function.\n\n```swift\nlet rgbDestinationBuffer = vImage.PixelBuffer<vImage.Interleaved8x3>(\n    size: cmykSourceBuffer.size)\n\ntry cmykToRgbConverter.convert(from: cmykSourceBuffer,\n                               to: rgbDestinationBuffer)\n```\n\nOn return, `rgbDestinationBuffer` contains the RGB representation of the CMYK source image.\n\n### Perform the conversion using vImage buffers\n\nIf you’re creating apps for older operating systems that don’t support the [doc:\/\/com.apple.accelerate\/documentation\/Accelerate\/vImage\/PixelBuffer] API, the following code performs the same conversion using [doc:\/\/com.apple.accelerate\/documentation\/Accelerate\/vImage_Buffer] structures.\n\nThe Swift [doc:\/\/com.apple.accelerate\/documentation\/Accelerate\/vImageConverter\/convert(source:destination:flags:)] method calls the underlying [doc:\/\/com.apple.accelerate\/documentation\/Accelerate\/vImageConvert_AnyToAny(_:_:_:_:_:)] function\n\n```swift\nvar rgbDestinationBuffer = try vImage_Buffer(\n    size: cmykSourceBuffer.size,\n    bitsPerPixel: rgbDestinationImageFormat.bitsPerPixel)\n\ntry cmykToRgbConverter.convert(source: cmykSourceBuffer,\n                               destination: &rgbDestinationBuffer)\n```\n\nOn return, `rgbDestinationBuffer` contains the RGB representation of the CMYK source image.\n\n## Conversion Between Image Formats\n\n- **Converting color images to grayscale**: Convert an RGB image to grayscale using matrix multiplication.\n- **Applying color transforms to images with a multidimensional lookup table**: Precompute translation values to optimize color space conversion and other pointwise operations.\n- **Converting luminance and chrominance planes to an ARGB image**: Create a displayable ARGB image using the luminance and chrominance information from your device’s camera.\n- **Conversion**: Convert an image to a different format.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Convert an RGB image to grayscale using matrix multiplication.",
          "name" : "Converting color images to grayscale",
          "url" : "https:\/\/developer.apple.com\/documentation\/Accelerate\/converting-color-images-to-grayscale"
        },
        {
          "description" : "Precompute translation values to optimize color space conversion and other pointwise operations.",
          "name" : "Applying color transforms to images with a multidimensional lookup table",
          "url" : "https:\/\/developer.apple.com\/documentation\/Accelerate\/applying-color-transforms-to-images-with-a-multidimensional-lookup-table"
        },
        {
          "description" : "Create a displayable ARGB image using the luminance and chrominance information from your device’s camera.",
          "name" : "Converting luminance and chrominance planes to an ARGB image",
          "url" : "https:\/\/developer.apple.com\/documentation\/Accelerate\/converting-luminance-and-chrominance-planes-to-an-argb-image"
        },
        {
          "description" : "Convert an image to a different format.",
          "name" : "Conversion",
          "url" : "https:\/\/developer.apple.com\/documentation\/Accelerate\/conversion"
        }
      ],
      "title" : "Conversion Between Image Formats"
    }
  ],
  "source" : "appleJSON",
  "title" : "Building a basic image conversion workflow",
  "url" : "https:\/\/developer.apple.com\/documentation\/accelerate\/building-a-basic-image-conversion-workflow"
}