{
  "abstract" : "An iCloud-based container of key-value pairs you share among instances of your app running on a person’s devices.",
  "codeExamples" : [

  ],
  "conformsTo" : [
    "CVarArg",
    "CustomDebugStringConvertible",
    "CustomStringConvertible",
    "Equatable",
    "Hashable",
    "NSObjectProtocol"
  ],
  "contentHash" : "882f4fcb276d3347cb603889e15556f6be30d9ff61f8de33e47358f7fd5a6a66",
  "crawledAt" : "2025-12-03T05:51:28Z",
  "declaration" : {
    "code" : "class NSUbiquitousKeyValueStore",
    "language" : "swift"
  },
  "id" : "810A2B79-CBD4-4E94-852F-182DCF79A746",
  "kind" : "class",
  "language" : "swift",
  "module" : "Foundation",
  "overview" : "## Overview\n\nUse the shared `NSUbiquitousKeyValueStore` object to store settings, configuration information, and app-specific data in a person’s iCloud account and share it among instances of your app running on all of the person’s devices. The object stores a dictionary of key-value pairs that you provide, and propagates that data to devices with the same Apple account. Sharing data among different devices gives you a way to coordinate your app’s behavior on those devices. For example, a textbook app might save the current page number on someone’s iPhone so that the person can continue reading from the same place on their other devices.\n\nEach app has a single iCloud key-value store object, which you retrieve from the [doc:\/\/com.apple.foundation\/documentation\/Foundation\/NSUbiquitousKeyValueStore\/default] class property. Use this same object throughout your app to read and write values. Don’t subclass `NSUbiquitousKeyValueStore`.\n\nThe keys in the iCloud key-value store identify the item and its purpose in your app, and the value is a data object you use to implement the corresponding behavior in your app. Values must be property list types such as [doc:\/\/com.apple.documentation\/documentation\/Swift\/Int64], [doc:\/\/com.apple.documentation\/documentation\/Swift\/Float], [doc:\/\/com.apple.documentation\/documentation\/Swift\/Double], [doc:\/\/com.apple.documentation\/documentation\/Swift\/Bool], [doc:\/\/com.apple.documentation\/documentation\/Swift\/String], [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSNumber], [doc:\/\/com.apple.foundation\/documentation\/Foundation\/Date], [doc:\/\/com.apple.documentation\/documentation\/Swift\/Array], or [doc:\/\/com.apple.documentation\/documentation\/Swift\/Dictionary]. To include other types of objects in the key-value store, archive them to a [doc:\/\/com.apple.foundation\/documentation\/Foundation\/Data] object first and store that object instead. Prefer simple types over custom objects whenever possible.\n\nWhen you write a new value, the iCloud key-value store saves it in memory initially and writes it to disk asynchronously later. If the device doesn’t have an active Apple account, the changes remain only on the current device. When the person signs into their account, the system forwards any changes to the iCloud server and reconciles the values there with the local ones. As you make more changes, the system keeps the local and server-based copies of the data synchronized, updating each one at appropriate times.\n\nWhen a value changes on one device, iCloud forwards that change to the person’s other devices. If your app is running on one of those other devices, the system posts [doc:\/\/com.apple.foundation\/documentation\/Foundation\/NSUbiquitousKeyValueStore\/didChangeExternallyNotification] to report the change. Register for that notification to keep all instances of your app in sync.\n\nWhen designing the keys and values you intend to save for your app, consider the following size limitations:\n\nIf you exceed any of the prescribed limits during a write operation, the operation fails and the system doesn’t add the keys or values to the store. If a key string exceeds the maximum length, the system raises an exception. If a write operation would exceed your app’s quota, the system posts [doc:\/\/com.apple.foundation\/documentation\/Foundation\/NSUbiquitousKeyValueStore\/didChangeExternallyNotification] notification with the change reason set to [doc:\/\/com.apple.foundation\/documentation\/Foundation\/NSUbiquitousKeyValueStoreQuotaViolationChange].",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "tvOS",
    "visionOS",
    "watchOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/Foundation\/NSUbiquitousKeyValueStore\ncrawled: 2025-12-03T05:51:28Z\n---\n\n# NSUbiquitousKeyValueStore\n\n**Class**\n\nAn iCloud-based container of key-value pairs you share among instances of your app running on a person’s devices.\n\n## Declaration\n\n```swift\nclass NSUbiquitousKeyValueStore\n```\n\n## Overview\n\nUse the shared `NSUbiquitousKeyValueStore` object to store settings, configuration information, and app-specific data in a person’s iCloud account and share it among instances of your app running on all of the person’s devices. The object stores a dictionary of key-value pairs that you provide, and propagates that data to devices with the same Apple account. Sharing data among different devices gives you a way to coordinate your app’s behavior on those devices. For example, a textbook app might save the current page number on someone’s iPhone so that the person can continue reading from the same place on their other devices.\n\n\n\nEach app has a single iCloud key-value store object, which you retrieve from the [doc:\/\/com.apple.foundation\/documentation\/Foundation\/NSUbiquitousKeyValueStore\/default] class property. Use this same object throughout your app to read and write values. Don’t subclass `NSUbiquitousKeyValueStore`.\n\n\n\nThe keys in the iCloud key-value store identify the item and its purpose in your app, and the value is a data object you use to implement the corresponding behavior in your app. Values must be property list types such as [doc:\/\/com.apple.documentation\/documentation\/Swift\/Int64], [doc:\/\/com.apple.documentation\/documentation\/Swift\/Float], [doc:\/\/com.apple.documentation\/documentation\/Swift\/Double], [doc:\/\/com.apple.documentation\/documentation\/Swift\/Bool], [doc:\/\/com.apple.documentation\/documentation\/Swift\/String], [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSNumber], [doc:\/\/com.apple.foundation\/documentation\/Foundation\/Date], [doc:\/\/com.apple.documentation\/documentation\/Swift\/Array], or [doc:\/\/com.apple.documentation\/documentation\/Swift\/Dictionary]. To include other types of objects in the key-value store, archive them to a [doc:\/\/com.apple.foundation\/documentation\/Foundation\/Data] object first and store that object instead. Prefer simple types over custom objects whenever possible.\n\nWhen you write a new value, the iCloud key-value store saves it in memory initially and writes it to disk asynchronously later. If the device doesn’t have an active Apple account, the changes remain only on the current device. When the person signs into their account, the system forwards any changes to the iCloud server and reconciles the values there with the local ones. As you make more changes, the system keeps the local and server-based copies of the data synchronized, updating each one at appropriate times.\n\nWhen a value changes on one device, iCloud forwards that change to the person’s other devices. If your app is running on one of those other devices, the system posts [doc:\/\/com.apple.foundation\/documentation\/Foundation\/NSUbiquitousKeyValueStore\/didChangeExternallyNotification] to report the change. Register for that notification to keep all instances of your app in sync.\n\nWhen designing the keys and values you intend to save for your app, consider the following size limitations:\n\n- Your app can have no more than 1024 keys in the iCloud key-value store.\n- The total amount of available storage space for all values is 1 megabyte.\n- The maximum size for a single value is 1 megabyte. Therefore, if you associate 1 megabyte of data with a single key, you can’t write other keys to the store.\n- The maximum length for each key string is 128 characters using the UTF-16 encoding. Key strings don’t count against the 1 megabyte quota for values.\n\nIf you exceed any of the prescribed limits during a write operation, the operation fails and the system doesn’t add the keys or values to the store. If a key string exceeds the maximum length, the system raises an exception. If a write operation would exceed your app’s quota, the system posts [doc:\/\/com.apple.foundation\/documentation\/Foundation\/NSUbiquitousKeyValueStore\/didChangeExternallyNotification] notification with the change reason set to [doc:\/\/com.apple.foundation\/documentation\/Foundation\/NSUbiquitousKeyValueStoreQuotaViolationChange].\n\n## Getting the shared instance\n\n- **default**: The shared iCloud key-value store object.\n\n## Getting values\n\n- **bool(forKey:)**: Returns the Boolean value associated with the specified key.\n- **double(forKey:)**: Returns the double value associated with the specified key.\n- **longLong(forKey:)**: Returns the 64-bit integer value associated with the specified key.\n- **string(forKey:)**: Returns the string associated with the specified key.\n- **data(forKey:)**: Returns the data object associated with the specified key.\n- **object(forKey:)**: Returns the object associated with the specified key.\n- **array(forKey:)**: Returns the array associated with the specified key.\n- **dictionary(forKey:)**: Returns the dictionary object associated with the specified key.\n- **dictionaryRepresentation**: A dictionary with all of the key-value pairs in the iCloud key-value store.\n\n## Setting values\n\n- **set(_:forKey:)**: Sets the value of the specified key to a Boolean value.\n- **set(_:forKey:)**: Sets the value of the specified key to a double value.\n- **set(_:forKey:)**: Sets the value of the specified key to a 64-bit integer value.\n- **set(_:forKey:)**: Sets the value of the specified key to a string value.\n- **set(_:forKey:)**: Sets the value of the specified key to a data object.\n- **set(_:forKey:)**: Sets the value of the specified key to a property list object.\n- **set(_:forKey:)**: Sets the value of the specified key to an array of property list objects.\n- **set(_:forKey:)**: Sets the value of the specified key to a dictionary of property list objects.\n\n## Synchronizing the in-memory cache with iCloud\n\n- **synchronize()**: Synchronizes the in-memory keys and values with the ones stored in iCloud.\n\n## Removing keys\n\n- **removeObject(forKey:)**: Removes the value for the specified key from the iCloud key-value store.\n\n## Detecting changes to values\n\n- **didChangeExternallyNotification**: Posted when the value of one or more keys changes due to incoming data from iCloud.\n- **NSUbiquitousKeyValueStoreChangeReasonKey**: A key that indicates the reason why the key-value store changed.\n- **NSUbiquitousKeyValueStoreChangedKeysKey**: A key that indicates which keys changed in the iCloud key-value store.\n- **NSUbiquitousKeyValueStoreServerChange**: A constant that indicates a value changed in iCloud.\n- **NSUbiquitousKeyValueStoreInitialSyncChange**: A constant that indicates the initial attempt to load keys and values from iCloud is in progress.\n- **NSUbiquitousKeyValueStoreQuotaViolationChange**: A constant that indicates an attempt to write data exceeded the quota limits.\n- **NSUbiquitousKeyValueStoreAccountChange**: A constant that indicates the current Apple account changed.\n\n## Inherits From\n\n- NSObject\n\n## Conforms To\n\n- CVarArg\n- CustomDebugStringConvertible\n- CustomStringConvertible\n- Equatable\n- Hashable\n- NSObjectProtocol\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "The shared iCloud key-value store object.",
          "name" : "default",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSUbiquitousKeyValueStore\/default"
        }
      ],
      "title" : "Getting the shared instance"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Returns the Boolean value associated with the specified key.",
          "name" : "bool(forKey:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSUbiquitousKeyValueStore\/bool(forKey:)"
        },
        {
          "description" : "Returns the double value associated with the specified key.",
          "name" : "double(forKey:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSUbiquitousKeyValueStore\/double(forKey:)"
        },
        {
          "description" : "Returns the 64-bit integer value associated with the specified key.",
          "name" : "longLong(forKey:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSUbiquitousKeyValueStore\/longLong(forKey:)"
        },
        {
          "description" : "Returns the string associated with the specified key.",
          "name" : "string(forKey:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSUbiquitousKeyValueStore\/string(forKey:)"
        },
        {
          "description" : "Returns the data object associated with the specified key.",
          "name" : "data(forKey:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSUbiquitousKeyValueStore\/data(forKey:)"
        },
        {
          "description" : "Returns the object associated with the specified key.",
          "name" : "object(forKey:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSUbiquitousKeyValueStore\/object(forKey:)"
        },
        {
          "description" : "Returns the array associated with the specified key.",
          "name" : "array(forKey:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSUbiquitousKeyValueStore\/array(forKey:)"
        },
        {
          "description" : "Returns the dictionary object associated with the specified key.",
          "name" : "dictionary(forKey:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSUbiquitousKeyValueStore\/dictionary(forKey:)"
        },
        {
          "description" : "A dictionary with all of the key-value pairs in the iCloud key-value store.",
          "name" : "dictionaryRepresentation",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSUbiquitousKeyValueStore\/dictionaryRepresentation"
        }
      ],
      "title" : "Getting values"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Sets the value of the specified key to a Boolean value.",
          "name" : "set(_:forKey:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSUbiquitousKeyValueStore\/set(_:forKey:)-8o8mq"
        },
        {
          "description" : "Sets the value of the specified key to a double value.",
          "name" : "set(_:forKey:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSUbiquitousKeyValueStore\/set(_:forKey:)-1xml0"
        },
        {
          "description" : "Sets the value of the specified key to a 64-bit integer value.",
          "name" : "set(_:forKey:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSUbiquitousKeyValueStore\/set(_:forKey:)-7tt20"
        },
        {
          "description" : "Sets the value of the specified key to a string value.",
          "name" : "set(_:forKey:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSUbiquitousKeyValueStore\/set(_:forKey:)-2rlp"
        },
        {
          "description" : "Sets the value of the specified key to a data object.",
          "name" : "set(_:forKey:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSUbiquitousKeyValueStore\/set(_:forKey:)-3ga7z"
        },
        {
          "description" : "Sets the value of the specified key to a property list object.",
          "name" : "set(_:forKey:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSUbiquitousKeyValueStore\/set(_:forKey:)-9e3de"
        },
        {
          "description" : "Sets the value of the specified key to an array of property list objects.",
          "name" : "set(_:forKey:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSUbiquitousKeyValueStore\/set(_:forKey:)-40a8f"
        },
        {
          "description" : "Sets the value of the specified key to a dictionary of property list objects.",
          "name" : "set(_:forKey:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSUbiquitousKeyValueStore\/set(_:forKey:)-9vmlm"
        }
      ],
      "title" : "Setting values"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Synchronizes the in-memory keys and values with the ones stored in iCloud.",
          "name" : "synchronize()",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSUbiquitousKeyValueStore\/synchronize()"
        }
      ],
      "title" : "Synchronizing the in-memory cache with iCloud"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Removes the value for the specified key from the iCloud key-value store.",
          "name" : "removeObject(forKey:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSUbiquitousKeyValueStore\/removeObject(forKey:)"
        }
      ],
      "title" : "Removing keys"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Posted when the value of one or more keys changes due to incoming data from iCloud.",
          "name" : "didChangeExternallyNotification",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSUbiquitousKeyValueStore\/didChangeExternallyNotification"
        },
        {
          "description" : "A key that indicates the reason why the key-value store changed.",
          "name" : "NSUbiquitousKeyValueStoreChangeReasonKey",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSUbiquitousKeyValueStoreChangeReasonKey"
        },
        {
          "description" : "A key that indicates which keys changed in the iCloud key-value store.",
          "name" : "NSUbiquitousKeyValueStoreChangedKeysKey",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSUbiquitousKeyValueStoreChangedKeysKey"
        },
        {
          "description" : "A constant that indicates a value changed in iCloud.",
          "name" : "NSUbiquitousKeyValueStoreServerChange",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSUbiquitousKeyValueStoreServerChange"
        },
        {
          "description" : "A constant that indicates the initial attempt to load keys and values from iCloud is in progress.",
          "name" : "NSUbiquitousKeyValueStoreInitialSyncChange",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSUbiquitousKeyValueStoreInitialSyncChange"
        },
        {
          "description" : "A constant that indicates an attempt to write data exceeded the quota limits.",
          "name" : "NSUbiquitousKeyValueStoreQuotaViolationChange",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSUbiquitousKeyValueStoreQuotaViolationChange"
        },
        {
          "description" : "A constant that indicates the current Apple account changed.",
          "name" : "NSUbiquitousKeyValueStoreAccountChange",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSUbiquitousKeyValueStoreAccountChange"
        }
      ],
      "title" : "Detecting changes to values"
    },
    {
      "content" : "",
      "items" : [
        {
          "name" : "NSObject"
        }
      ],
      "title" : "Inherits From"
    }
  ],
  "source" : "appleJSON",
  "title" : "NSUbiquitousKeyValueStore",
  "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSUbiquitousKeyValueStore"
}