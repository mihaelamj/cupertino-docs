{
  "abstract" : "Called when an `NSURLConnection` needs to retransmit a request that has a body stream to provide a new, unopened stream.",
  "codeExamples" : [

  ],
  "contentHash" : "488a904b985befb94a15e47d74cd3a17fb748e4584b25c6151d9f2ae92655e61",
  "crawledAt" : "2025-12-08T01:56:23Z",
  "declaration" : {
    "code" : "optional func connection(_ connection: NSURLConnection, needNewBodyStream request: URLRequest) -> InputStream?",
    "language" : "swift"
  },
  "id" : "370C3395-F1BC-43E0-906C-DB0B991E43FF",
  "kind" : "method",
  "language" : "swift",
  "module" : "Foundation",
  "overview" : "## Return Value\n\nThis delegate method should return a new, unopened stream that provides the body contents for the request.\n\nIf this delegate method returns `NULL`, the connection fails.\n\n## Discussion\n\nIn macOS, if this method is not implemented, body stream data is spooled to disk in case retransmission is required. This spooling may not be desirable for large data sets.\n\nBy implementing this delegate method, the client opts out of automatic spooling, and must provide a new, unopened stream for each retransmission.",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "tvOS",
    "visionOS",
    "watchOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/Foundation\/NSURLConnectionDataDelegate\/connection(_:needNewBodyStream:)\ncrawled: 2025-12-08T01:56:23Z\n---\n\n# connection(_:needNewBodyStream:)\n\n**Instance Method**\n\nCalled when an `NSURLConnection` needs to retransmit a request that has a body stream to provide a new, unopened stream.\n\n## Declaration\n\n```swift\noptional func connection(_ connection: NSURLConnection, needNewBodyStream request: URLRequest) -> InputStream?\n```\n\n## Parameters\n\n- **connection**: The NSURLConnection that is requesting a new body stream.\n\n## Return Value\n\nThis delegate method should return a new, unopened stream that provides the body contents for the request.\n\nIf this delegate method returns `NULL`, the connection fails.\n\n## Discussion\n\nIn macOS, if this method is not implemented, body stream data is spooled to disk in case retransmission is required. This spooling may not be desirable for large data sets.\n\nBy implementing this delegate method, the client opts out of automatic spooling, and must provide a new, unopened stream for each retransmission.\n\n## Handling Redirects\n\n- **connection(_:willSend:redirectResponse:)**: Sent when the connection determines that it must change URLs in order to continue loading a request.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Sent when the connection determines that it must change URLs in order to continue loading a request.",
          "name" : "connection(_:willSend:redirectResponse:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSURLConnectionDataDelegate\/connection(_:willSend:redirectResponse:)"
        }
      ],
      "title" : "Handling Redirects"
    }
  ],
  "source" : "appleJSON",
  "title" : "connection(_:needNewBodyStream:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSURLConnectionDataDelegate\/connection(_:needNewBodyStream:)"
}