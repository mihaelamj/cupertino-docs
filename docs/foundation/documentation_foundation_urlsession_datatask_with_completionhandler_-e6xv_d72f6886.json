{
  "abstract" : "Creates a task that retrieves the contents of a URL based on the specified URL request object, and calls a handler upon completion.",
  "codeExamples" : [

  ],
  "contentHash" : "3982daaa2018ea0fcff9ba54105a8234ec601a324a9b0bedec38d8ac65b4d9c9",
  "crawledAt" : "2025-12-04T20:32:02Z",
  "declaration" : {
    "code" : "func dataTask(with request: URLRequest, completionHandler: @escaping (Data?, URLResponse?, (any Error)?) -> Void) -> URLSessionDataTask",
    "language" : "swift"
  },
  "id" : "A2331C30-B690-4638-AA27-03C59BAFE52F",
  "kind" : "method",
  "language" : "swift",
  "module" : "Foundation",
  "overview" : "## Return Value\n\nThe new session data task.\n\n## Discussion\n\nBy creating a task based on a request object, you can tune various aspects of the task’s behavior, including the cache policy and timeout interval.\n\nBy using the completion handler, the task bypasses calls to delegate methods for response and data delivery, and instead provides any resulting [doc:\/\/com.apple.foundation\/documentation\/Foundation\/NSData], [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLResponse], and [doc:\/\/com.apple.foundation\/documentation\/Foundation\/NSError] objects inside the completion handler. Delegate methods for handling authentication challenges, however, are still called.\n\nYou should pass a `nil` completion handler *only* when creating tasks in sessions whose delegates include a [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionDataDelegate\/urlSession(_:dataTask:didReceive:)] method.\n\nAfter you create the task, you must start it by calling its [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionTask\/resume()] method.\n\nIf the request completes successfully, the `data` parameter of the completion handler block contains the resource data, and the `error` parameter is `nil`. If the request fails, the `data` parameter is `nil` and the `error` parameter contain information about the failure. If a response from the server is received, regardless of whether the request completes successfully or fails, the `response` parameter contains that information.",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "tvOS",
    "visionOS",
    "watchOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/Foundation\/URLSession\/dataTask(with:completionHandler:)-e6xv\ncrawled: 2025-12-04T20:32:02Z\n---\n\n# dataTask(with:completionHandler:)\n\n**Instance Method**\n\nCreates a task that retrieves the contents of a URL based on the specified URL request object, and calls a handler upon completion.\n\n## Declaration\n\n```swift\nfunc dataTask(with request: URLRequest, completionHandler: @escaping (Data?, URLResponse?, (any Error)?) -> Void) -> URLSessionDataTask\n```\n\n## Parameters\n\n- **request**: A URL request object that provides the URL, cache policy, request type, body data or body stream, and so on.\n- **completionHandler**: The completion handler to call when the load request is complete. This handler is executed on the delegate queue.\n\nIf you pass `nil`, only the session delegate methods are called when the task completes, making this method equivalent to the [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSession\/dataTask(with:)-7jpys] method.\n\nThis completion handler takes the following parameters:\n\n\n\n## Return Value\n\nThe new session data task.\n\n## Discussion\n\nBy creating a task based on a request object, you can tune various aspects of the task’s behavior, including the cache policy and timeout interval.\n\nBy using the completion handler, the task bypasses calls to delegate methods for response and data delivery, and instead provides any resulting [doc:\/\/com.apple.foundation\/documentation\/Foundation\/NSData], [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLResponse], and [doc:\/\/com.apple.foundation\/documentation\/Foundation\/NSError] objects inside the completion handler. Delegate methods for handling authentication challenges, however, are still called.\n\nYou should pass a `nil` completion handler *only* when creating tasks in sessions whose delegates include a [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionDataDelegate\/urlSession(_:dataTask:didReceive:)] method.\n\nAfter you create the task, you must start it by calling its [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionTask\/resume()] method.\n\nIf the request completes successfully, the `data` parameter of the completion handler block contains the resource data, and the `error` parameter is `nil`. If the request fails, the `data` parameter is `nil` and the `error` parameter contain information about the failure. If a response from the server is received, regardless of whether the request completes successfully or fails, the `response` parameter contains that information.\n\n## Adding data tasks to a session\n\n- **dataTask(with:)**: Creates a task that retrieves the contents of the specified URL.\n- **dataTask(with:completionHandler:)**: Creates a task that retrieves the contents of the specified URL, then calls a handler upon completion.\n- **dataTask(with:)**: Creates a task that retrieves the contents of a URL based on the specified URL request object.\n- **URLSessionDataTask**: A URL session task that returns downloaded data directly to the app in memory.\n- **URLSessionDataDelegate**: A protocol that defines methods that URL session instances call on their delegates to handle task-level events specific to data and upload tasks.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Creates a task that retrieves the contents of the specified URL.",
          "name" : "dataTask(with:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/URLSession\/dataTask(with:)-10dy7"
        },
        {
          "description" : "Creates a task that retrieves the contents of the specified URL, then calls a handler upon completion.",
          "name" : "dataTask(with:completionHandler:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/URLSession\/dataTask(with:completionHandler:)-52wk8"
        },
        {
          "description" : "Creates a task that retrieves the contents of a URL based on the specified URL request object.",
          "name" : "dataTask(with:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/URLSession\/dataTask(with:)-7jpys"
        },
        {
          "description" : "A URL session task that returns downloaded data directly to the app in memory.",
          "name" : "URLSessionDataTask",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/URLSessionDataTask"
        },
        {
          "description" : "A protocol that defines methods that URL session instances call on their delegates to handle task-level events specific to data and upload tasks.",
          "name" : "URLSessionDataDelegate",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/URLSessionDataDelegate"
        }
      ],
      "title" : "Adding data tasks to a session"
    }
  ],
  "source" : "appleJSON",
  "title" : "dataTask(with:completionHandler:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/URLSession\/dataTask(with:completionHandler:)-e6xv"
}