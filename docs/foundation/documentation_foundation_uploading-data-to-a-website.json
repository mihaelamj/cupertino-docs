{
  "abstract" : "Post data from your app to servers.",
  "codeExamples" : [
    {
      "code" : "struct Order: Codable {\n    let customerId: String\n    let items: [String]\n}\n\n\/\/ ...\n\nlet order = Order(customerId: \"12345\",\n                  items: [\"Cheese pizza\", \"Diet soda\"])\nguard let uploadData = try? JSONEncoder().encode(order) else {\n    return\n}",
      "language" : "swift"
    },
    {
      "code" : "let url = URL(string: \"https:\/\/example.com\/post\")!\nvar request = URLRequest(url: url)\nrequest.httpMethod = \"POST\"\nrequest.setValue(\"application\/json\", forHTTPHeaderField: \"Content-Type\")",
      "language" : "swift"
    },
    {
      "code" : "let task = URLSession.shared.uploadTask(with: request, from: uploadData) { data, response, error in\n    if let error = error {\n        print (\"error: \\(error)\")\n        return\n    }\n    guard let response = response as? HTTPURLResponse,\n        (200...299).contains(response.statusCode) else {\n        print (\"server error\")\n        return\n    }\n    if let mimeType = response.mimeType,\n        mimeType == \"application\/json\",\n        let data = data,\n        let dataString = String(data: data, encoding: .utf8) {\n        print (\"got data: \\(dataString)\")\n    }\n}\ntask.resume()",
      "language" : "swift"
    }
  ],
  "contentHash" : "76d6bcad58043a3f1b751b5e0af35987e91e7e0d5362667fbb9f2d092f5d3cc0",
  "crawledAt" : "2025-12-02T16:05:47Z",
  "id" : "EE4F8A82-43DE-45A2-99C9-25A1DEEB7766",
  "kind" : "article",
  "language" : "swift",
  "module" : "Foundation",
  "overview" : "## Overview\n\nMany apps work with servers that accept uploads of files like images or documents, or use web service API endpoints that accept structured data like JSON. To upload data from your app, you use a [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSession] instance to create a [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionUploadTask] instance. The upload task uses a [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLRequest] instance that details how the upload is to be performed.\n\n### Prepare your data for upload\n\nThe data to upload can be the contents of a file, a stream, or data, as is the case in the following example.\n\nMany web service endpoints take JSON-formatted data, which you create by using the  [doc:\/\/com.apple.foundation\/documentation\/Foundation\/JSONEncoder] class on [doc:\/\/com.apple.documentation\/documentation\/Swift\/Encodable] types like arrays and dictionaries. As shown in the following example, you can declare a structure that conforms to [doc:\/\/com.apple.documentation\/documentation\/Swift\/Codable], create an instance of this type, and use [doc:\/\/com.apple.foundation\/documentation\/Foundation\/JSONEncoder] to encode the instance to JSON data for upload.\n\nPreparing JSON data for upload\n\nThere are many other ways to create a data instance, such as encoding an image as JPEG or PNG data, or converting a string to data by using an encoding like UTF-8.\n\n### Configure an upload request\n\nAn upload task requires a [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLRequest] instance. As shown in the following example, set the [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLRequest\/httpMethod] property of the request to `\"``POST``\"` or `\"PUT\"`, depending on what the server supports and expects. Use the [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLRequest\/setValue(_:forHTTPHeaderField:)] method to set the values of any HTTP headers that you want to provide, except the `Content-Length` header. The session figures out content length automatically from the size of your data.\n\nConfiguring a URL request\n\n### Create and start an upload task\n\nTo begin an upload, call [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSession\/uploadTask(with:from:completionHandler:)] on a [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSession] instance to create an uploading [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionTask] instance, passing in the request and the data instances you’ve previously set up. Because tasks start in a suspended state, you begin the network loading process by calling [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionTask\/resume()] on the task. The following example uses the shared `URLSession` instance, and receives its results in a completion handler. The handler checks for transport and server errors before using any returned data.\n\nStarting an upload task\n\n### Alternatively, upload by setting a delegate\n\nAs an alternative to the completion handler approach, you can instead set a delegate on a session you configure, and then create the upload task with [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSession\/uploadTask(with:from:)]. In this scenario, you implement methods from the [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionDelegate] and [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionTaskDelegate] protocols. These methods receive the server response and any data or transport errors.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/Foundation\/uploading-data-to-a-website\ncrawled: 2025-12-02T16:05:47Z\n---\n\n# Uploading data to a website\n\n**Article**\n\nPost data from your app to servers.\n\n## Overview\n\nMany apps work with servers that accept uploads of files like images or documents, or use web service API endpoints that accept structured data like JSON. To upload data from your app, you use a [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSession] instance to create a [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionUploadTask] instance. The upload task uses a [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLRequest] instance that details how the upload is to be performed.\n\n### Prepare your data for upload\n\nThe data to upload can be the contents of a file, a stream, or data, as is the case in the following example.\n\nMany web service endpoints take JSON-formatted data, which you create by using the  [doc:\/\/com.apple.foundation\/documentation\/Foundation\/JSONEncoder] class on [doc:\/\/com.apple.documentation\/documentation\/Swift\/Encodable] types like arrays and dictionaries. As shown in the following example, you can declare a structure that conforms to [doc:\/\/com.apple.documentation\/documentation\/Swift\/Codable], create an instance of this type, and use [doc:\/\/com.apple.foundation\/documentation\/Foundation\/JSONEncoder] to encode the instance to JSON data for upload.\n\nPreparing JSON data for upload\n\n```swift\nstruct Order: Codable {\n    let customerId: String\n    let items: [String]\n}\n\n\/\/ ...\n\nlet order = Order(customerId: \"12345\",\n                  items: [\"Cheese pizza\", \"Diet soda\"])\nguard let uploadData = try? JSONEncoder().encode(order) else {\n    return\n}\n```\n\nThere are many other ways to create a data instance, such as encoding an image as JPEG or PNG data, or converting a string to data by using an encoding like UTF-8.\n\n### Configure an upload request\n\nAn upload task requires a [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLRequest] instance. As shown in the following example, set the [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLRequest\/httpMethod] property of the request to `\"``POST``\"` or `\"PUT\"`, depending on what the server supports and expects. Use the [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLRequest\/setValue(_:forHTTPHeaderField:)] method to set the values of any HTTP headers that you want to provide, except the `Content-Length` header. The session figures out content length automatically from the size of your data.\n\nConfiguring a URL request\n\n```swift\nlet url = URL(string: \"https:\/\/example.com\/post\")!\nvar request = URLRequest(url: url)\nrequest.httpMethod = \"POST\"\nrequest.setValue(\"application\/json\", forHTTPHeaderField: \"Content-Type\")\n```\n\n### Create and start an upload task\n\nTo begin an upload, call [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSession\/uploadTask(with:from:completionHandler:)] on a [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSession] instance to create an uploading [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionTask] instance, passing in the request and the data instances you’ve previously set up. Because tasks start in a suspended state, you begin the network loading process by calling [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionTask\/resume()] on the task. The following example uses the shared `URLSession` instance, and receives its results in a completion handler. The handler checks for transport and server errors before using any returned data.\n\nStarting an upload task\n\n```swift\nlet task = URLSession.shared.uploadTask(with: request, from: uploadData) { data, response, error in\n    if let error = error {\n        print (\"error: \\(error)\")\n        return\n    }\n    guard let response = response as? HTTPURLResponse,\n        (200...299).contains(response.statusCode) else {\n        print (\"server error\")\n        return\n    }\n    if let mimeType = response.mimeType,\n        mimeType == \"application\/json\",\n        let data = data,\n        let dataString = String(data: data, encoding: .utf8) {\n        print (\"got data: \\(dataString)\")\n    }\n}\ntask.resume()\n```\n\n### Alternatively, upload by setting a delegate\n\nAs an alternative to the completion handler approach, you can instead set a delegate on a session you configure, and then create the upload task with [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSession\/uploadTask(with:from:)]. In this scenario, you implement methods from the [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionDelegate] and [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionTaskDelegate] protocols. These methods receive the server response and any data or transport errors.\n\n## Uploading\n\n- **Building a resumable upload server with SwiftNIO**: Support HTTP resumable upload protocol in SwiftNIO by translating resumable uploads to regular uploads.\n- **Uploading streams of data**: Send a stream of data to a server.\n- **Pausing and resuming uploads**: Pause and resume an upload without starting over, even when the connection is interrupted.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Support HTTP resumable upload protocol in SwiftNIO by translating resumable uploads to regular uploads.",
          "name" : "Building a resumable upload server with SwiftNIO",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/building-a-resumable-upload-server-with-swiftnio"
        },
        {
          "description" : "Send a stream of data to a server.",
          "name" : "Uploading streams of data",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/uploading-streams-of-data"
        },
        {
          "description" : "Pause and resume an upload without starting over, even when the connection is interrupted.",
          "name" : "Pausing and resuming uploads",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/pausing-and-resuming-uploads"
        }
      ],
      "title" : "Uploading"
    }
  ],
  "source" : "appleJSON",
  "title" : "Uploading data to a website",
  "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/uploading-data-to-a-website"
}