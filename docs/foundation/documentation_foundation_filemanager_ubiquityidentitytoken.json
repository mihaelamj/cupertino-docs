{
  "abstract" : "An opaque token that represents the current user’s iCloud Drive Documents identity.",
  "codeExamples" : [

  ],
  "contentHash" : "a390c3f8e62f0ae68582f875fe03fbe224ec32e81ffa2b18e6135558ca079095",
  "crawledAt" : "2025-12-06T01:20:50Z",
  "declaration" : {
    "code" : "@NSCopying var ubiquityIdentityToken: (any NSCoding & NSCopying & NSObjectProtocol)? { get }",
    "language" : "swift"
  },
  "id" : "25DF32E8-0BD1-4A97-9763-06263AD85C22",
  "kind" : "property",
  "language" : "swift",
  "module" : "Foundation",
  "overview" : "## Discussion\n\nIn iCloud Drive Documents, when iCloud is available, this property contains an opaque object representing the identity of the current user. If iCloud is unavailable or there is no logged-in user, the value of this property is `nil`. Accessing the value of this property is relatively fast, so you can check the value at launch time from your app’s main thread.\n\nYou can use the token in this property, together with the [doc:\/\/com.apple.foundation\/documentation\/Foundation\/NSNotification\/Name-swift.struct\/NSUbiquityIdentityDidChange] notification, to detect when the user logs in or out of iCloud and to detect changes to the active iCloud account. When the user logs in with a different iCloud account, the identity token changes, and the system posts the notification. If you stored or archived the previous token, compare that token to the newly obtained one using the [doc:\/\/com.apple.documentation\/documentation\/ObjectiveC\/NSObjectProtocol\/isEqual(_:)] method to determine if the users are the same or different.\n\nAccessing the token in this property doesn’t connect your app to its ubiquity containers. To establish access to a ubiquity container, call the [doc:\/\/com.apple.foundation\/documentation\/Foundation\/FileManager\/url(forUbiquityContainerIdentifier:)] method. In macOS, you can instead use an [doc:\/\/com.apple.documentation\/documentation\/AppKit\/NSDocument] object, which establishes access automatically.\n\nCloudKit clients should not use this token as a way to identify whether the iCloud account is logged in. Instead, use [doc:\/\/com.apple.documentation\/documentation\/CloudKit\/CKContainer\/accountStatus(completionHandler:)] or [doc:\/\/com.apple.documentation\/documentation\/CloudKit\/CKContainer\/fetchUserRecordID(completionHandler:)].",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "tvOS",
    "visionOS",
    "watchOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/Foundation\/FileManager\/ubiquityIdentityToken\ncrawled: 2025-12-06T01:20:50Z\n---\n\n# ubiquityIdentityToken\n\n**Instance Property**\n\nAn opaque token that represents the current user’s iCloud Drive Documents identity.\n\n## Declaration\n\n```swift\n@NSCopying var ubiquityIdentityToken: (any NSCoding & NSCopying & NSObjectProtocol)? { get }\n```\n\n## Discussion\n\nIn iCloud Drive Documents, when iCloud is available, this property contains an opaque object representing the identity of the current user. If iCloud is unavailable or there is no logged-in user, the value of this property is `nil`. Accessing the value of this property is relatively fast, so you can check the value at launch time from your app’s main thread.\n\nYou can use the token in this property, together with the [doc:\/\/com.apple.foundation\/documentation\/Foundation\/NSNotification\/Name-swift.struct\/NSUbiquityIdentityDidChange] notification, to detect when the user logs in or out of iCloud and to detect changes to the active iCloud account. When the user logs in with a different iCloud account, the identity token changes, and the system posts the notification. If you stored or archived the previous token, compare that token to the newly obtained one using the [doc:\/\/com.apple.documentation\/documentation\/ObjectiveC\/NSObjectProtocol\/isEqual(_:)] method to determine if the users are the same or different.\n\nAccessing the token in this property doesn’t connect your app to its ubiquity containers. To establish access to a ubiquity container, call the [doc:\/\/com.apple.foundation\/documentation\/Foundation\/FileManager\/url(forUbiquityContainerIdentifier:)] method. In macOS, you can instead use an [doc:\/\/com.apple.documentation\/documentation\/AppKit\/NSDocument] object, which establishes access automatically.\n\nCloudKit clients should not use this token as a way to identify whether the iCloud account is logged in. Instead, use [doc:\/\/com.apple.documentation\/documentation\/CloudKit\/CKContainer\/accountStatus(completionHandler:)] or [doc:\/\/com.apple.documentation\/documentation\/CloudKit\/CKContainer\/fetchUserRecordID(completionHandler:)].\n\n## Managing iCloud-based items\n\n- **url(forUbiquityContainerIdentifier:)**: Returns the URL for the iCloud container associated with the specified identifier and establishes access to that container.\n- **isUbiquitousItem(at:)**: Returns a Boolean indicating whether the item is targeted for storage in iCloud.\n- **setUbiquitous(_:itemAt:destinationURL:)**: Indicates whether the item at the specified URL should be stored in iCloud.\n- **startDownloadingUbiquitousItem(at:)**: Starts downloading (if necessary) the specified item to the local system.\n- **evictUbiquitousItem(at:)**: Removes the local copy of the specified item that’s stored in iCloud.\n- **url(forPublishingUbiquitousItemAt:expiration:)**: Returns a URL that can be emailed to users to allow them to download a copy of a flat file item from iCloud.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Returns the URL for the iCloud container associated with the specified identifier and establishes access to that container.",
          "name" : "url(forUbiquityContainerIdentifier:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/FileManager\/url(forUbiquityContainerIdentifier:)"
        },
        {
          "description" : "Returns a Boolean indicating whether the item is targeted for storage in iCloud.",
          "name" : "isUbiquitousItem(at:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/FileManager\/isUbiquitousItem(at:)"
        },
        {
          "description" : "Indicates whether the item at the specified URL should be stored in iCloud.",
          "name" : "setUbiquitous(_:itemAt:destinationURL:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/FileManager\/setUbiquitous(_:itemAt:destinationURL:)"
        },
        {
          "description" : "Starts downloading (if necessary) the specified item to the local system.",
          "name" : "startDownloadingUbiquitousItem(at:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/FileManager\/startDownloadingUbiquitousItem(at:)"
        },
        {
          "description" : "Removes the local copy of the specified item that’s stored in iCloud.",
          "name" : "evictUbiquitousItem(at:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/FileManager\/evictUbiquitousItem(at:)"
        },
        {
          "description" : "Returns a URL that can be emailed to users to allow them to download a copy of a flat file item from iCloud.",
          "name" : "url(forPublishingUbiquitousItemAt:expiration:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/FileManager\/url(forPublishingUbiquitousItemAt:expiration:)"
        }
      ],
      "title" : "Managing iCloud-based items"
    }
  ],
  "source" : "appleJSON",
  "title" : "ubiquityIdentityToken",
  "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/FileManager\/ubiquityIdentityToken"
}