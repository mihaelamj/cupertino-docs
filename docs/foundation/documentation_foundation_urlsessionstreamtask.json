{
  "abstract" : "A URL session task that is stream-based.",
  "codeExamples" : [

  ],
  "conformsTo" : [
    "CVarArg",
    "CustomDebugStringConvertible",
    "CustomStringConvertible",
    "Equatable",
    "Hashable",
    "NSCopying",
    "NSObjectProtocol",
    "ProgressReporting",
    "Sendable",
    "SendableMetatype"
  ],
  "contentHash" : "540d513d6c22e25c68a4471b3d3768c6dbfab0b16db0767e828ded6e49c87c1d",
  "crawledAt" : "2025-12-07T13:24:42Z",
  "declaration" : {
    "code" : "class URLSessionStreamTask",
    "language" : "swift"
  },
  "id" : "95765D82-C917-44FF-B585-F2DF6E86314F",
  "kind" : "class",
  "language" : "swift",
  "module" : "Foundation",
  "overview" : "## Overview\n\n[doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionStreamTask] is a concrete subclass of [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionTask]. Many of the methods in the [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionStreamTask] class are documented in [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionTask].\n\nThe [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionStreamTask] class provides an interface a TCP\/IP connection created via [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSession]. Tasks may be created from an [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSession] using the [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSession\/streamTask(withHostName:port:)] and [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSession\/streamTask(with:)] methods. They may also be created as a result of an [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionDataTask] being upgraded via the HTTP `Upgrade:` response header and appropriate use of the [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionConfiguration\/httpShouldUsePipelining] option of [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionConfiguration].\n\nA [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionStreamTask] object performs asynchronous reads and writes, which are enqueued and executed serially, calling a handler upon completion being on the session delegate queue. If the task is canceled, all enqueued reads and writes will call their completion handlers with an appropriate error.\n\nWhen working with APIs that accept [doc:\/\/com.apple.foundation\/documentation\/Foundation\/Stream] objects, you can create [doc:\/\/com.apple.foundation\/documentation\/Foundation\/InputStream] and [doc:\/\/com.apple.foundation\/documentation\/Foundation\/OutputStream] objects from an [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionStreamTask] object by calling the [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionStreamTask\/captureStreams()] method.",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "tvOS",
    "visionOS",
    "watchOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/foundation\/urlsessionstreamtask\ncrawled: 2025-12-07T13:24:42Z\n---\n\n# URLSessionStreamTask\n\n**Class**\n\nA URL session task that is stream-based.\n\n## Declaration\n\n```swift\nclass URLSessionStreamTask\n```\n\n## Overview\n\n[doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionStreamTask] is a concrete subclass of [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionTask]. Many of the methods in the [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionStreamTask] class are documented in [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionTask].\n\nThe [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionStreamTask] class provides an interface a TCP\/IP connection created via [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSession]. Tasks may be created from an [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSession] using the [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSession\/streamTask(withHostName:port:)] and [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSession\/streamTask(with:)] methods. They may also be created as a result of an [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionDataTask] being upgraded via the HTTP `Upgrade:` response header and appropriate use of the [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionConfiguration\/httpShouldUsePipelining] option of [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionConfiguration].\n\n\n\nA [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionStreamTask] object performs asynchronous reads and writes, which are enqueued and executed serially, calling a handler upon completion being on the session delegate queue. If the task is canceled, all enqueued reads and writes will call their completion handlers with an appropriate error.\n\nWhen working with APIs that accept [doc:\/\/com.apple.foundation\/documentation\/Foundation\/Stream] objects, you can create [doc:\/\/com.apple.foundation\/documentation\/Foundation\/InputStream] and [doc:\/\/com.apple.foundation\/documentation\/Foundation\/OutputStream] objects from an [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionStreamTask] object by calling the [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionStreamTask\/captureStreams()] method.\n\n\n\n## Reading and writing data\n\n- **readData(ofMinLength:maxLength:timeout:completionHandler:)**: Asynchronously reads a number of bytes from the stream, and calls a handler upon completion.\n- **write(_:timeout:completionHandler:)**: Asynchronously writes the specified data to the stream, and calls a handler upon completion.\n\n## Capturing streams\n\n- **captureStreams()**: Completes any already enqueued reads and writes, and then invokes the [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionStreamDelegate\/urlSession(_:streamTask:didBecome:outputStream:)] delegate message.\n\n## Closing read and write sockets\n\n- **closeRead()**: Completes any enqueued reads and writes, and then closes the read side of the underlying socket.\n- **closeWrite()**: Completes any enqueued reads and writes, and then closes the write side of the underlying socket.\n\n## Starting and stopping secure connections\n\n- **startSecureConnection()**: Completes any enqueued reads and writes, and establishes a secure connection.\n- **stopSecureConnection()**: Completes any enqueued reads and writes, and closes the secure connection.\n\n## Initializers\n\n- **init()**\n\n## Type Methods\n\n- **new()**\n\n## Adding stream tasks to a session\n\n- **streamTask(withHostName:port:)**: Creates a task that establishes a bidirectional TCP\/IP connection to a specified hostname and port.\n- **streamTask(with:)**: Creates a task that establishes a bidirectional TCP\/IP connection using a specified network service.\n- **URLSessionStreamDelegate**: A protocol that defines methods that URL session instances call on their delegates to handle task-level events specific to stream tasks.\n\n## Inherits From\n\n- URLSessionTask\n\n## Conforms To\n\n- CVarArg\n- CustomDebugStringConvertible\n- CustomStringConvertible\n- Equatable\n- Hashable\n- NSCopying\n- NSObjectProtocol\n- ProgressReporting\n- Sendable\n- SendableMetatype\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Asynchronously reads a number of bytes from the stream, and calls a handler upon completion.",
          "name" : "readData(ofMinLength:maxLength:timeout:completionHandler:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/URLSessionStreamTask\/readData(ofMinLength:maxLength:timeout:completionHandler:)"
        },
        {
          "description" : "Asynchronously writes the specified data to the stream, and calls a handler upon completion.",
          "name" : "write(_:timeout:completionHandler:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/URLSessionStreamTask\/write(_:timeout:completionHandler:)"
        }
      ],
      "title" : "Reading and writing data"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Completes any already enqueued reads and writes, and then invokes the [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionStreamDelegate\/urlSession(_:streamTask:didBecome:outputStream:)] delegate message.",
          "name" : "captureStreams()",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/URLSessionStreamTask\/captureStreams()"
        }
      ],
      "title" : "Capturing streams"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Completes any enqueued reads and writes, and then closes the read side of the underlying socket.",
          "name" : "closeRead()",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/URLSessionStreamTask\/closeRead()"
        },
        {
          "description" : "Completes any enqueued reads and writes, and then closes the write side of the underlying socket.",
          "name" : "closeWrite()",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/URLSessionStreamTask\/closeWrite()"
        }
      ],
      "title" : "Closing read and write sockets"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Completes any enqueued reads and writes, and establishes a secure connection.",
          "name" : "startSecureConnection()",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/URLSessionStreamTask\/startSecureConnection()"
        },
        {
          "description" : "Completes any enqueued reads and writes, and closes the secure connection.",
          "name" : "stopSecureConnection()",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/URLSessionStreamTask\/stopSecureConnection()"
        }
      ],
      "title" : "Starting and stopping secure connections"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "",
          "name" : "init()",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/URLSessionStreamTask\/init()"
        }
      ],
      "title" : "Initializers"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "",
          "name" : "new()",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/URLSessionStreamTask\/new()"
        }
      ],
      "title" : "Type Methods"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Creates a task that establishes a bidirectional TCP\/IP connection to a specified hostname and port.",
          "name" : "streamTask(withHostName:port:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/URLSession\/streamTask(withHostName:port:)"
        },
        {
          "description" : "Creates a task that establishes a bidirectional TCP\/IP connection using a specified network service.",
          "name" : "streamTask(with:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/URLSession\/streamTask(with:)"
        },
        {
          "description" : "A protocol that defines methods that URL session instances call on their delegates to handle task-level events specific to stream tasks.",
          "name" : "URLSessionStreamDelegate",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/URLSessionStreamDelegate"
        }
      ],
      "title" : "Adding stream tasks to a session"
    },
    {
      "content" : "",
      "items" : [
        {
          "name" : "URLSessionTask"
        }
      ],
      "title" : "Inherits From"
    }
  ],
  "source" : "appleJSON",
  "title" : "URLSessionStreamTask",
  "url" : "https:\/\/developer.apple.com\/documentation\/foundation\/urlsessionstreamtask"
}