{
  "abstract" : "Pause and resume an upload without starting over, even when the connection is interrupted.",
  "codeExamples" : [
    {
      "code" : "uploadTask.cancel { resumeData in\n    guard let resumeData else { \n      \/\/ The upload can't be resumed; remove the upload from the UI if necessary.\n      return\n    }\n    self.resumeData = resumeData\n}",
      "language" : "swift"
    },
    {
      "code" : "do {\n    let (data, response) = try await session.upload(for: request, fromFile: fileURL)\n} catch let error as URLError {\n    guard let resumeData = error.uploadTaskResumeData else {\n        \/\/ The upload can't be resumed.\n        return\n    }\n    self.resumeData = resumeData\n}",
      "language" : "swift"
    },
    {
      "code" : "guard let resumeData = self.resumeData else {\n    \/\/ Inform the user that the upload can't be resumed.\n    return\n}\n\nlet uploadTask = session.uploadTask(withResumeData: resumeData)\nuploadTask.resume()\nself.uploadTask = uploadTask",
      "language" : "swift"
    }
  ],
  "contentHash" : "379aa26008f1fb3ae2043aa39c07619736a498317a11eedb0e9f4aed97abe6e9",
  "crawledAt" : "2025-12-02T15:47:16Z",
  "id" : "5F568E12-6029-4611-86A9-7BA59274C12F",
  "kind" : "article",
  "language" : "swift",
  "module" : "Foundation",
  "overview" : "## Overview\n\nYour app or a person using it might need to cancel an in-progress upload and resume it later. By supporting resumable uploads, you save both the user’s time and network bandwidth.\n\nNew in iOS 17 and aligned OS versions, [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSession] supports resumable uploads according to the [https:\/\/www.ietf.org\/archive\/id\/draft-ietf-httpbis-resumable-upload-01.txt]. This protocol is currently being developed in the HTTP Working Group at the IETF. To take advantage of resumable uploads, the server you’re connecting to must also support this protocol.\n\nYou can use this technique to manually pause and resume an upload, or even resume an upload that failed due to a temporary loss of connectivity. In both cases, [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSession] needs information on how to resume the upload, which is stored in a `resumeData` object.\n\n### Pause an upload\n\nYou can effectively pause a [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionUploadTask] by calling [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionDownloadTask\/cancel(byProducingResumeData:)]. This method cancels the task and passes a `resumeData` parameter to its completion handler. If `resumeData` is not `nil`, you can use this token later to resume the upload. The listing below shows how to cancel an upload task and store `resumeData`, if it exists, in a property:\n\n### Recover a failed upload\n\nIf there’s only a momentary network interruption, but the server is still reachable, [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSession] automatically tries to resume the upload for you. No extra code is needed.\n\nFor broader losses of connectivity, you can resume a failed upload by checking for resume data in the task’s error.\n\nWhen the upload fails, the session calls your [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionTaskDelegate\/urlSession(_:task:didCompleteWithError:)] delegate method. If `error` is not `nil`, look in its `userInfo` dictionary for the key [doc:\/\/com.apple.foundation\/documentation\/Foundation\/NSURLSessionUploadTaskResumeData]. If the key exists, save the value associated with it to use later when you try to resume the upload. If the key doesn’t exist, you can’t resume the upload.\n\nYou can conveniently access resume data using the [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLError\/uploadTaskResumeData] property of [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLError].\n\nYou can also catch the error from asynchronous [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSession] upload methods such as [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSession\/upload(for:fromFile:)]. The listing below shows an implementation of this error handling that checks the error for resume data:\n\n### Resume uploading\n\nWhen it’s appropriate to resume the upload, create a new [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionUploadTask] by using the [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSession\/uploadTask(withResumeData:)] method of [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSession], passing in the `resumeData` object you stored earlier. Then, call [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionTask\/resume()] on the task to resume the upload:",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/Foundation\/pausing-and-resuming-uploads\ncrawled: 2025-12-02T15:47:16Z\n---\n\n# Pausing and resuming uploads\n\n**Article**\n\nPause and resume an upload without starting over, even when the connection is interrupted.\n\n## Overview\n\nYour app or a person using it might need to cancel an in-progress upload and resume it later. By supporting resumable uploads, you save both the user’s time and network bandwidth.\n\nNew in iOS 17 and aligned OS versions, [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSession] supports resumable uploads according to the [https:\/\/www.ietf.org\/archive\/id\/draft-ietf-httpbis-resumable-upload-01.txt]. This protocol is currently being developed in the HTTP Working Group at the IETF. To take advantage of resumable uploads, the server you’re connecting to must also support this protocol.\n\nYou can use this technique to manually pause and resume an upload, or even resume an upload that failed due to a temporary loss of connectivity. In both cases, [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSession] needs information on how to resume the upload, which is stored in a `resumeData` object.\n\n### Pause an upload\n\nYou can effectively pause a [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionUploadTask] by calling [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionDownloadTask\/cancel(byProducingResumeData:)]. This method cancels the task and passes a `resumeData` parameter to its completion handler. If `resumeData` is not `nil`, you can use this token later to resume the upload. The listing below shows how to cancel an upload task and store `resumeData`, if it exists, in a property:\n\n```swift\nuploadTask.cancel { resumeData in\n    guard let resumeData else { \n      \/\/ The upload can't be resumed; remove the upload from the UI if necessary.\n      return\n    }\n    self.resumeData = resumeData\n}\n```\n\n\n\n### Recover a failed upload\n\nIf there’s only a momentary network interruption, but the server is still reachable, [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSession] automatically tries to resume the upload for you. No extra code is needed.\n\nFor broader losses of connectivity, you can resume a failed upload by checking for resume data in the task’s error.\n\nWhen the upload fails, the session calls your [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionTaskDelegate\/urlSession(_:task:didCompleteWithError:)] delegate method. If `error` is not `nil`, look in its `userInfo` dictionary for the key [doc:\/\/com.apple.foundation\/documentation\/Foundation\/NSURLSessionUploadTaskResumeData]. If the key exists, save the value associated with it to use later when you try to resume the upload. If the key doesn’t exist, you can’t resume the upload.\n\nYou can conveniently access resume data using the [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLError\/uploadTaskResumeData] property of [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLError].\n\nYou can also catch the error from asynchronous [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSession] upload methods such as [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSession\/upload(for:fromFile:)]. The listing below shows an implementation of this error handling that checks the error for resume data:\n\n```swift\ndo {\n    let (data, response) = try await session.upload(for: request, fromFile: fileURL)\n} catch let error as URLError {\n    guard let resumeData = error.uploadTaskResumeData else {\n        \/\/ The upload can't be resumed.\n        return\n    }\n    self.resumeData = resumeData\n}\n```\n\n### Resume uploading\n\nWhen it’s appropriate to resume the upload, create a new [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionUploadTask] by using the [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSession\/uploadTask(withResumeData:)] method of [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSession], passing in the `resumeData` object you stored earlier. Then, call [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionTask\/resume()] on the task to resume the upload:\n\n```swift\nguard let resumeData = self.resumeData else {\n    \/\/ Inform the user that the upload can't be resumed.\n    return\n}\n\nlet uploadTask = session.uploadTask(withResumeData: resumeData)\nuploadTask.resume()\nself.uploadTask = uploadTask\n```\n\n## Uploading\n\n- **Building a resumable upload server with SwiftNIO**: Support HTTP resumable upload protocol in SwiftNIO by translating resumable uploads to regular uploads.\n- **Uploading data to a website**: Post data from your app to servers.\n- **Uploading streams of data**: Send a stream of data to a server.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Support HTTP resumable upload protocol in SwiftNIO by translating resumable uploads to regular uploads.",
          "name" : "Building a resumable upload server with SwiftNIO",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/building-a-resumable-upload-server-with-swiftnio"
        },
        {
          "description" : "Post data from your app to servers.",
          "name" : "Uploading data to a website",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/uploading-data-to-a-website"
        },
        {
          "description" : "Send a stream of data to a server.",
          "name" : "Uploading streams of data",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/uploading-streams-of-data"
        }
      ],
      "title" : "Uploading"
    }
  ],
  "source" : "appleJSON",
  "title" : "Pausing and resuming uploads",
  "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/pausing-and-resuming-uploads"
}