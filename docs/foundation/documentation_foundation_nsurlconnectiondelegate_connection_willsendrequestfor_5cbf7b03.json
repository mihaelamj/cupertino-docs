{
  "abstract" : "Tells the delegate that the connection will send a request for an authentication challenge.",
  "codeExamples" : [

  ],
  "contentHash" : "a29949298f6403547e7b716bf306080c9083afd605260c3810578e6babb8da68",
  "crawledAt" : "2025-12-08T01:56:15Z",
  "declaration" : {
    "code" : "optional func connection(_ connection: NSURLConnection, willSendRequestFor challenge: URLAuthenticationChallenge)",
    "language" : "swift"
  },
  "id" : "BFFADFA3-9B5E-4E98-9B35-25D7F40C5AFD",
  "kind" : "method",
  "language" : "swift",
  "module" : "Foundation",
  "overview" : "## Discussion\n\nThis method allows the delegate to make an informed decision about connection authentication at once. If the delegate implements this method, it has no need to implement [doc:\/\/com.apple.foundation\/documentation\/Foundation\/NSURLConnectionDelegate\/connection(_:canAuthenticateAgainstProtectionSpace:)] or [doc:\/\/com.apple.foundation\/documentation\/Foundation\/NSURLConnectionDelegate\/connection(_:didReceive:)]. In fact, those other methods are not invoked (except on older operating systems, where applicable).\n\nIn this method,you *must* invoke one of the challenge-responder methods ([doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLAuthenticationChallengeSender] protocol):\n\nYou might also want to analyze `challenge` for the authentication scheme and the proposed credential before calling a [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLAuthenticationChallengeSender] method. You should never assume that a proposed credential is present. You can either create your own credential and respond with that, or you can send the proposed credential back. (Because this object is immutable, if you want to change it you must copy it and then modify the copy.)",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "tvOS",
    "visionOS",
    "watchOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/Foundation\/NSURLConnectionDelegate\/connection(_:willSendRequestFor:)\ncrawled: 2025-12-08T01:56:15Z\n---\n\n# connection(_:willSendRequestFor:)\n\n**Instance Method**\n\nTells the delegate that the connection will send a request for an authentication challenge.\n\n## Declaration\n\n```swift\noptional func connection(_ connection: NSURLConnection, willSendRequestFor challenge: URLAuthenticationChallenge)\n```\n\n## Parameters\n\n- **connection**: The connection sending the message.\n- **challenge**: The authentication challenge for which a request is being sent.\n\n## Discussion\n\nThis method allows the delegate to make an informed decision about connection authentication at once. If the delegate implements this method, it has no need to implement [doc:\/\/com.apple.foundation\/documentation\/Foundation\/NSURLConnectionDelegate\/connection(_:canAuthenticateAgainstProtectionSpace:)] or [doc:\/\/com.apple.foundation\/documentation\/Foundation\/NSURLConnectionDelegate\/connection(_:didReceive:)]. In fact, those other methods are not invoked (except on older operating systems, where applicable).\n\nIn this method,you *must* invoke one of the challenge-responder methods ([doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLAuthenticationChallengeSender] protocol):\n\n- [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLAuthenticationChallengeSender\/use(_:for:)]\n- [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLAuthenticationChallengeSender\/continueWithoutCredential(for:)]\n- [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLAuthenticationChallengeSender\/cancel(_:)]\n- [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLAuthenticationChallengeSender\/performDefaultHandling(for:)]\n- [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLAuthenticationChallengeSender\/rejectProtectionSpaceAndContinue(with:)]\n\n\n\nYou might also want to analyze `challenge` for the authentication scheme and the proposed credential before calling a [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLAuthenticationChallengeSender] method. You should never assume that a proposed credential is present. You can either create your own credential and respond with that, or you can send the proposed credential back. (Because this object is immutable, if you want to change it you must copy it and then modify the copy.)\n\n## Related Documentation\n\n- **URL Loading System**: Interact with URLs and communicate with servers using standard Internet protocols.\n\n## Connection Authentication\n\n- **connection(_:canAuthenticateAgainstProtectionSpace:)**: Sent to determine whether the delegate is able to respond to a protection space’s form of authentication.\n- **connection(_:didCancel:)**: Sent when a connection cancels an authentication challenge.\n- **connection(_:didReceive:)**: Sent when a connection must authenticate a challenge in order to download its request.\n- **connectionShouldUseCredentialStorage(_:)**: Sent to determine whether the URL loader should use the credential storage for authenticating the connection.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Interact with URLs and communicate with servers using standard Internet protocols.",
          "name" : "URL Loading System",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/url-loading-system"
        }
      ],
      "title" : "Related Documentation"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Sent to determine whether the delegate is able to respond to a protection space’s form of authentication.",
          "name" : "connection(_:canAuthenticateAgainstProtectionSpace:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSURLConnectionDelegate\/connection(_:canAuthenticateAgainstProtectionSpace:)"
        },
        {
          "description" : "Sent when a connection cancels an authentication challenge.",
          "name" : "connection(_:didCancel:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSURLConnectionDelegate\/connection(_:didCancel:)"
        },
        {
          "description" : "Sent when a connection must authenticate a challenge in order to download its request.",
          "name" : "connection(_:didReceive:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSURLConnectionDelegate\/connection(_:didReceive:)"
        },
        {
          "description" : "Sent to determine whether the URL loader should use the credential storage for authenticating the connection.",
          "name" : "connectionShouldUseCredentialStorage(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSURLConnectionDelegate\/connectionShouldUseCredentialStorage(_:)"
        }
      ],
      "title" : "Connection Authentication"
    }
  ],
  "source" : "appleJSON",
  "title" : "connection(_:willSendRequestFor:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSURLConnectionDelegate\/connection(_:willSendRequestFor:)"
}