{
  "abstract" : "Tells the delegate that the data task received the initial reply (headers) from the server.",
  "codeExamples" : [

  ],
  "contentHash" : "bb0e244d13ed46d86d95ba4d89e42579aeef7ecf55d912e1524ec0eb07e2a17b",
  "crawledAt" : "2025-12-06T03:03:45Z",
  "declaration" : {
    "code" : "optional func urlSession(_ session: URLSession, dataTask: URLSessionDataTask, didReceive response: URLResponse, completionHandler: @escaping (URLSession.ResponseDisposition) -> Void)",
    "language" : "swift"
  },
  "id" : "9582AD82-E882-4377-A9CC-653CAFC7CAD8",
  "kind" : "method",
  "language" : "swift",
  "module" : "Foundation",
  "overview" : "## Discussion\n\nImplementing this method is optional unless you need to cancel the transfer or convert it to a download task when the response headers are first received. If you don’t provide this delegate method, the session always allows the task to continue.\n\nYou also implement this method if you need to support the fairly obscure `multipart\/x-mixed-replace` content type. With that content type, the server sends a series of parts, each of which is intended to replace the previous part. The session calls this method at the beginning of each part, followed by one or more calls to [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionDataDelegate\/urlSession(_:dataTask:didReceive:)] with the contents of that part.\n\nEach time the [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionDataDelegate\/urlSession(_:dataTask:didReceive:completionHandler:)] method is called for a part, collect the data received for the previous part (if any) and process the data as needed for your application. This processing can include storing the data to the filesystem, parsing it into custom types, or displaying it to the user. Next, begin receiving the next part by calling the completion handler with the [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSession\/ResponseDisposition\/allow] constant. Finally, if you have also implemented [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionTaskDelegate\/urlSession(_:task:didCompleteWithError:)], the session will call it after sending all the data for the last part.",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "tvOS",
    "visionOS",
    "watchOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/Foundation\/URLSessionDataDelegate\/urlSession(_:dataTask:didReceive:completionHandler:)\ncrawled: 2025-12-06T03:03:45Z\n---\n\n# urlSession(_:dataTask:didReceive:completionHandler:)\n\n**Instance Method**\n\nTells the delegate that the data task received the initial reply (headers) from the server.\n\n## Declaration\n\n```swift\noptional func urlSession(_ session: URLSession, dataTask: URLSessionDataTask, didReceive response: URLResponse, completionHandler: @escaping (URLSession.ResponseDisposition) -> Void)\n```\n\n```swift\noptional func urlSession(_ session: URLSession, dataTask: URLSessionDataTask, didReceive response: URLResponse) async -> URLSession.ResponseDisposition\n```\n\n## Parameters\n\n- **session**: The session containing the data task that received an initial reply.\n- **dataTask**: The data task that received an initial reply.\n- **response**: A URL response object populated with headers.\n- **completionHandler**: A completion handler that your code calls to continue a transfer, passing a [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSession\/ResponseDisposition] constant to indicate whether the transfer should continue as a data task or should become a download task.\n\n- If you pass [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSession\/ResponseDisposition\/allow], the task continues as a data task.\n- If you pass [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSession\/ResponseDisposition\/cancel], the task is canceled.\n- If you pass [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSession\/ResponseDisposition\/becomeDownload], your delegate’s [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionDataDelegate\/urlSession(_:dataTask:didBecome:)-60op5] method is called to provide the new download task that supersedes the current task.\n\n## Discussion\n\nImplementing this method is optional unless you need to cancel the transfer or convert it to a download task when the response headers are first received. If you don’t provide this delegate method, the session always allows the task to continue.\n\nYou also implement this method if you need to support the fairly obscure `multipart\/x-mixed-replace` content type. With that content type, the server sends a series of parts, each of which is intended to replace the previous part. The session calls this method at the beginning of each part, followed by one or more calls to [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionDataDelegate\/urlSession(_:dataTask:didReceive:)] with the contents of that part.\n\nEach time the [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionDataDelegate\/urlSession(_:dataTask:didReceive:completionHandler:)] method is called for a part, collect the data received for the previous part (if any) and process the data as needed for your application. This processing can include storing the data to the filesystem, parsing it into custom types, or displaying it to the user. Next, begin receiving the next part by calling the completion handler with the [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSession\/ResponseDisposition\/allow] constant. Finally, if you have also implemented [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionTaskDelegate\/urlSession(_:task:didCompleteWithError:)], the session will call it after sending all the data for the last part.\n\n## Handling task life cycle changes\n\n- **URLSession.ResponseDisposition**: Constants indicating how a data or upload session should proceed after receiving the initial headers.\n- **urlSession(_:dataTask:didBecome:)**: Tells the delegate that the data task was changed to a download task.\n- **urlSession(_:dataTask:didBecome:)**: Tells the delegate that the data task was changed to a stream task.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Constants indicating how a data or upload session should proceed after receiving the initial headers.",
          "name" : "URLSession.ResponseDisposition",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/URLSession\/ResponseDisposition"
        },
        {
          "description" : "Tells the delegate that the data task was changed to a download task.",
          "name" : "urlSession(_:dataTask:didBecome:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/URLSessionDataDelegate\/urlSession(_:dataTask:didBecome:)-60op5"
        },
        {
          "description" : "Tells the delegate that the data task was changed to a stream task.",
          "name" : "urlSession(_:dataTask:didBecome:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/URLSessionDataDelegate\/urlSession(_:dataTask:didBecome:)-7nqzu"
        }
      ],
      "title" : "Handling task life cycle changes"
    }
  ],
  "source" : "appleJSON",
  "title" : "urlSession(_:dataTask:didReceive:completionHandler:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/URLSessionDataDelegate\/urlSession(_:dataTask:didReceive:completionHandler:)"
}