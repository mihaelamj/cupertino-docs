{
  "abstract" : "Sent when a connection must authenticate a challenge in order to download its request.",
  "codeExamples" : [

  ],
  "contentHash" : "ce981b62844cdf3a12399f557b33fcba0f7f134ebc7e7978531879aea6a22459",
  "crawledAt" : "2025-12-08T00:31:38Z",
  "declaration" : {
    "code" : "optional func connection(_ connection: NSURLConnection, didReceive challenge: URLAuthenticationChallenge)",
    "language" : "swift"
  },
  "id" : "7ACE6277-1E84-496E-9291-E73666129D45",
  "kind" : "method",
  "language" : "swift",
  "module" : "Foundation",
  "overview" : "## Discussion\n\nThis method gives the delegate the opportunity to determine the course of action taken for the challenge: provide credentials, continue without providing credentials, or cancel the authentication challenge and the download.\n\nThe delegate can determine the number of previous authentication challenges by sending the message [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLAuthenticationChallenge\/previousFailureCount] to `challenge`.\n\nIf the previous failure count is 0 and the value returned by [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLAuthenticationChallenge\/proposedCredential] is `nil`, the delegate can create a new NSURLCredential object, providing information specific to the type of credential, and send a [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLAuthenticationChallengeSender\/use(_:for:)] message to `[challenge sender]`, passing the credential and `challenge` as parameters. If [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLAuthenticationChallenge\/proposedCredential] is not `nil`, the value is a credential from the URL or the shared credential storage that can be provided to the user as feedback.\n\nThe delegate may decide to abandon further attempts at authentication at any time by sending `[challenge sender]` a [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLAuthenticationChallengeSender\/continueWithoutCredential(for:)] or a [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLAuthenticationChallengeSender\/cancel(_:)] message. The specific action is implementation dependent.\n\nIf the delegate implements this method, the download will suspend until `[challenge sender]` is sent one of the following messages: [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLAuthenticationChallengeSender\/use(_:for:)], [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLAuthenticationChallengeSender\/continueWithoutCredential(for:)] or [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLAuthenticationChallengeSender\/cancel(_:)].\n\nIf the delegate does not implement this method the default implementation is used. If a valid credential for the request is provided as part of the URL, or is available from the NSURLCredentialStorage the `[challenge sender]` is sent a [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLAuthenticationChallengeSender\/use(_:for:)] with the credential. If the challenge has no credential or the credentials fail to authorize access, then [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLAuthenticationChallengeSender\/continueWithoutCredential(for:)] is sent to `[challenge sender]` instead.",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "tvOS",
    "visionOS",
    "watchOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/Foundation\/NSURLConnectionDelegate\/connection(_:didReceive:)\ncrawled: 2025-12-08T00:31:38Z\n---\n\n# connection(_:didReceive:)\n\n**Instance Method**\n\nSent when a connection must authenticate a challenge in order to download its request.\n\n## Declaration\n\n```swift\noptional func connection(_ connection: NSURLConnection, didReceive challenge: URLAuthenticationChallenge)\n```\n\n## Parameters\n\n- **connection**: The connection sending the message.\n- **challenge**: The challenge that `connection` must authenticate in order to download its request.\n\n## Discussion\n\nThis method gives the delegate the opportunity to determine the course of action taken for the challenge: provide credentials, continue without providing credentials, or cancel the authentication challenge and the download.\n\n\n\nThe delegate can determine the number of previous authentication challenges by sending the message [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLAuthenticationChallenge\/previousFailureCount] to `challenge`.\n\nIf the previous failure count is 0 and the value returned by [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLAuthenticationChallenge\/proposedCredential] is `nil`, the delegate can create a new NSURLCredential object, providing information specific to the type of credential, and send a [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLAuthenticationChallengeSender\/use(_:for:)] message to `[challenge sender]`, passing the credential and `challenge` as parameters. If [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLAuthenticationChallenge\/proposedCredential] is not `nil`, the value is a credential from the URL or the shared credential storage that can be provided to the user as feedback.\n\nThe delegate may decide to abandon further attempts at authentication at any time by sending `[challenge sender]` a [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLAuthenticationChallengeSender\/continueWithoutCredential(for:)] or a [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLAuthenticationChallengeSender\/cancel(_:)] message. The specific action is implementation dependent.\n\nIf the delegate implements this method, the download will suspend until `[challenge sender]` is sent one of the following messages: [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLAuthenticationChallengeSender\/use(_:for:)], [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLAuthenticationChallengeSender\/continueWithoutCredential(for:)] or [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLAuthenticationChallengeSender\/cancel(_:)].\n\nIf the delegate does not implement this method the default implementation is used. If a valid credential for the request is provided as part of the URL, or is available from the NSURLCredentialStorage the `[challenge sender]` is sent a [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLAuthenticationChallengeSender\/use(_:for:)] with the credential. If the challenge has no credential or the credentials fail to authorize access, then [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLAuthenticationChallengeSender\/continueWithoutCredential(for:)] is sent to `[challenge sender]` instead.\n\n## Related Documentation\n\n- **use(_:for:)**: Attempt to use a given credential for a given authentication challenge.\n- **continueWithoutCredential(for:)**: Attempt to continue downloading a request without providing a credential for a given challenge.\n- **cancel(_:)**: Cancels a given authentication challenge.\n\n## Connection Authentication\n\n- **connection(_:willSendRequestFor:)**: Tells the delegate that the connection will send a request for an authentication challenge.\n- **connection(_:canAuthenticateAgainstProtectionSpace:)**: Sent to determine whether the delegate is able to respond to a protection space’s form of authentication.\n- **connection(_:didCancel:)**: Sent when a connection cancels an authentication challenge.\n- **connectionShouldUseCredentialStorage(_:)**: Sent to determine whether the URL loader should use the credential storage for authenticating the connection.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Attempt to use a given credential for a given authentication challenge.",
          "name" : "use(_:for:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/URLAuthenticationChallengeSender\/use(_:for:)"
        },
        {
          "description" : "Attempt to continue downloading a request without providing a credential for a given challenge.",
          "name" : "continueWithoutCredential(for:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/URLAuthenticationChallengeSender\/continueWithoutCredential(for:)"
        },
        {
          "description" : "Cancels a given authentication challenge.",
          "name" : "cancel(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/URLAuthenticationChallengeSender\/cancel(_:)"
        }
      ],
      "title" : "Related Documentation"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Tells the delegate that the connection will send a request for an authentication challenge.",
          "name" : "connection(_:willSendRequestFor:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSURLConnectionDelegate\/connection(_:willSendRequestFor:)"
        },
        {
          "description" : "Sent to determine whether the delegate is able to respond to a protection space’s form of authentication.",
          "name" : "connection(_:canAuthenticateAgainstProtectionSpace:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSURLConnectionDelegate\/connection(_:canAuthenticateAgainstProtectionSpace:)"
        },
        {
          "description" : "Sent when a connection cancels an authentication challenge.",
          "name" : "connection(_:didCancel:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSURLConnectionDelegate\/connection(_:didCancel:)"
        },
        {
          "description" : "Sent to determine whether the URL loader should use the credential storage for authenticating the connection.",
          "name" : "connectionShouldUseCredentialStorage(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSURLConnectionDelegate\/connectionShouldUseCredentialStorage(_:)"
        }
      ],
      "title" : "Connection Authentication"
    }
  ],
  "source" : "appleJSON",
  "title" : "connection(_:didReceive:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSURLConnectionDelegate\/connection(_:didReceive:)"
}