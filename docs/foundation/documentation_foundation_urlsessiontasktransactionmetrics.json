{
  "abstract" : "An object that encapsualtes the performance metrics collected by the URL Loading System during the execution of a session task.",
  "codeExamples" : [

  ],
  "conformsTo" : [
    "CVarArg",
    "CustomDebugStringConvertible",
    "CustomStringConvertible",
    "Equatable",
    "Hashable",
    "NSObjectProtocol",
    "Sendable",
    "SendableMetatype"
  ],
  "contentHash" : "61d0b6e6d57d01a2f6a949506bc3ecff12a35ecfbb670cd41e0d6806ed3e2c65",
  "crawledAt" : "2025-12-08T02:23:58Z",
  "declaration" : {
    "code" : "class URLSessionTaskTransactionMetrics",
    "language" : "swift"
  },
  "id" : "BCF51A39-CAEE-45B0-BDB2-500B2C3E088A",
  "kind" : "class",
  "language" : "swift",
  "module" : "Foundation",
  "overview" : "## Overview\n\nEach [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionTaskTransactionMetrics] object consists of a [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionTaskTransactionMetrics\/request] and [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionTaskTransactionMetrics\/response] property, corresponding to the request and response of the corresponding task. It also contains temporal metrics, starting with [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionTaskTransactionMetrics\/fetchStartDate] and ending with [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionTaskTransactionMetrics\/responseEndDate], as well as other characteristics like [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionTaskTransactionMetrics\/networkProtocolName] and [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionTaskTransactionMetrics\/resourceFetchType].\n\n### Understanding temporal metrics\n\nThe figure below shows the sequence of events for a URL session task, which correspond to the temporal metrics captured by [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionTaskTransactionMetrics].\n\n\n\nFor all metrics with a start and end date, if an aspect of the task was not completed, then its corresponding end date metric is `nil`. This can happen if name lookup begins, but the operation either times out, fails, or the client cancels the task before the name can be resolved. In this case, the [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionTaskTransactionMetrics\/domainLookupEndDate] property is `nil`, along with all metrics for aspects that occurred afterwards.\n\n### Measuring tasks using iCloud Private Relay\n\niCloud Private Relay can change the timing and sequence of events for your tasks by sending requests through a set of privacy proxies. All tasks that use iCloud Private Relay set the [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionTaskTransactionMetrics\/isProxyConnection] property in their transaction metrics. In this case, the [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionTaskTransactionMetrics\/remoteAddress] property contains the address of the proxy, and not the origin server.\n\nTasks to different hosts can reuse the same transport connection, just like how tasks can already share a connection when using HTTP\/2. In these cases, a proxied task may not report any [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionTaskTransactionMetrics\/secureConnectionStartDate] or [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionTaskTransactionMetrics\/secureConnectionEndDate].",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "tvOS",
    "visionOS",
    "watchOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/Foundation\/URLSessionTaskTransactionMetrics\ncrawled: 2025-12-08T02:23:58Z\n---\n\n# URLSessionTaskTransactionMetrics\n\n**Class**\n\nAn object that encapsualtes the performance metrics collected by the URL Loading System during the execution of a session task.\n\n## Declaration\n\n```swift\nclass URLSessionTaskTransactionMetrics\n```\n\n## Overview\n\nEach [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionTaskTransactionMetrics] object consists of a [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionTaskTransactionMetrics\/request] and [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionTaskTransactionMetrics\/response] property, corresponding to the request and response of the corresponding task. It also contains temporal metrics, starting with [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionTaskTransactionMetrics\/fetchStartDate] and ending with [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionTaskTransactionMetrics\/responseEndDate], as well as other characteristics like [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionTaskTransactionMetrics\/networkProtocolName] and [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionTaskTransactionMetrics\/resourceFetchType].\n\n### Understanding temporal metrics\n\nThe figure below shows the sequence of events for a URL session task, which correspond to the temporal metrics captured by [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionTaskTransactionMetrics].\n\n\n\nFor all metrics with a start and end date, if an aspect of the task was not completed, then its corresponding end date metric is `nil`. This can happen if name lookup begins, but the operation either times out, fails, or the client cancels the task before the name can be resolved. In this case, the [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionTaskTransactionMetrics\/domainLookupEndDate] property is `nil`, along with all metrics for aspects that occurred afterwards.\n\n### Measuring tasks using iCloud Private Relay\n\niCloud Private Relay can change the timing and sequence of events for your tasks by sending requests through a set of privacy proxies. All tasks that use iCloud Private Relay set the [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionTaskTransactionMetrics\/isProxyConnection] property in their transaction metrics. In this case, the [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionTaskTransactionMetrics\/remoteAddress] property contains the address of the proxy, and not the origin server.\n\nTasks to different hosts can reuse the same transport connection, just like how tasks can already share a connection when using HTTP\/2. In these cases, a proxied task may not report any [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionTaskTransactionMetrics\/secureConnectionStartDate] or [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionTaskTransactionMetrics\/secureConnectionEndDate].\n\n## Accessing request and response\n\n- **request**: The transaction request.\n- **response**: The transaction response.\n\n## Accessing temporal metrics\n\n- **fetchStartDate**: The time when the task started fetching the resource, from the server or locally.\n- **domainLookupStartDate**: The time immediately before the task started the name lookup for the resource.\n- **domainLookupEndDate**: The time after the name lookup was completed.\n- **connectStartDate**: The time immediately before the task started establishing a TCP connection to the server.\n- **secureConnectionStartDate**: The time immediately before the task started the TLS security handshake to secure the current connection.\n- **secureConnectionEndDate**: The time immediately after the security handshake completed.\n- **connectEndDate**: The time immediately after the task finished establishing the connection to the server.\n- **requestStartDate**: The time immediately before the task started requesting the resource, regardless of whether it is retrieved from the server or local resources.\n- **requestEndDate**: The time immediately after the task finished requesting the resource, regardless of whether it was retrieved from the server or local resources.\n- **responseStartDate**: The time immediately after the task received the first byte of the response from the server or from local resources.\n- **responseEndDate**: The time immediately after the task received the last byte of the resource.\n\n## Accessing data transfer metrics\n\n- **countOfRequestBodyBytesBeforeEncoding**: The size of the upload body data, file, or stream, in bytes.\n- **countOfRequestBodyBytesSent**: The number of bytes transferred for the request body.\n- **countOfRequestHeaderBytesSent**: The number of bytes transferred for the request header.\n- **countOfResponseBodyBytesAfterDecoding**: The size of data delivered to your delegate or completion handler.\n- **countOfResponseBodyBytesReceived**: The number of bytes transferred for the response body.\n- **countOfResponseHeaderBytesReceived**: The number of bytes transferred for the response header.\n\n## Accessing transaction characteristics\n\n- **networkProtocolName**: The network protocol used to fetch the resource.\n- **remoteAddress**: The IP address string of the remote interface for the connection.\n- **remotePort**: The port number of the remote interface for the connection.\n- **localAddress**: The IP address string of the local interface for the connection.\n- **localPort**: The port number of the local interface for the connection.\n- **negotiatedTLSCipherSuite**: The TLS cipher suite the task negotiated with the endpoint for the connection.\n- **negotiatedTLSProtocolVersion**: The TLS protocol version the task negotiated with the endpoint for the connection.\n- **isCellular**: A Boolean value that indicates whether the connection operates over a cellular interface.\n- **isExpensive**: A Boolean value that indicates whether the connection operates over an expensive interface.\n- **isConstrained**: A Boolean value that indicates whether the connection operates over an interface marked as constrained.\n- **isProxyConnection**: A Boolean value that indicastes whether the task used a proxy connection to fetch the resource.\n- **isReusedConnection**: A Boolean value that indicates whether the task used a persistent connection to fetch the resource.\n- **isMultipath**: A Boolean value that indicates whether the connection uses a successfully negotiated multipath protocol.\n- **resourceFetchType**: A value that indicates whether the resource was loaded, pushed, or retrieved from the local cache.\n- **URLSessionTaskMetrics.ResourceFetchType**: The manner in which a resource is fetched.\n- **domainResolutionProtocol**\n- **URLSessionTaskMetrics.DomainResolutionProtocol**\n\n## Creating transaction metrics\n\n- **init()**: Creates a transaction metrics instance.\n- **new()**: Creates a new transaction metrics instance.\n\n## Accessing task metrics\n\n- **transactionMetrics**: An array of metrics for each individual request-response transaction made during the execution of the task.\n- **taskInterval**: The time interval between when a task is instantiated and when the task is completed.\n- **redirectCount**: The number of redirects that occurred during the execution of the task.\n\n## Inherits From\n\n- NSObject\n\n## Conforms To\n\n- CVarArg\n- CustomDebugStringConvertible\n- CustomStringConvertible\n- Equatable\n- Hashable\n- NSObjectProtocol\n- Sendable\n- SendableMetatype\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "The transaction request.",
          "name" : "request",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/URLSessionTaskTransactionMetrics\/request"
        },
        {
          "description" : "The transaction response.",
          "name" : "response",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/URLSessionTaskTransactionMetrics\/response"
        }
      ],
      "title" : "Accessing request and response"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "The time when the task started fetching the resource, from the server or locally.",
          "name" : "fetchStartDate",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/URLSessionTaskTransactionMetrics\/fetchStartDate"
        },
        {
          "description" : "The time immediately before the task started the name lookup for the resource.",
          "name" : "domainLookupStartDate",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/URLSessionTaskTransactionMetrics\/domainLookupStartDate"
        },
        {
          "description" : "The time after the name lookup was completed.",
          "name" : "domainLookupEndDate",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/URLSessionTaskTransactionMetrics\/domainLookupEndDate"
        },
        {
          "description" : "The time immediately before the task started establishing a TCP connection to the server.",
          "name" : "connectStartDate",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/URLSessionTaskTransactionMetrics\/connectStartDate"
        },
        {
          "description" : "The time immediately before the task started the TLS security handshake to secure the current connection.",
          "name" : "secureConnectionStartDate",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/URLSessionTaskTransactionMetrics\/secureConnectionStartDate"
        },
        {
          "description" : "The time immediately after the security handshake completed.",
          "name" : "secureConnectionEndDate",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/URLSessionTaskTransactionMetrics\/secureConnectionEndDate"
        },
        {
          "description" : "The time immediately after the task finished establishing the connection to the server.",
          "name" : "connectEndDate",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/URLSessionTaskTransactionMetrics\/connectEndDate"
        },
        {
          "description" : "The time immediately before the task started requesting the resource, regardless of whether it is retrieved from the server or local resources.",
          "name" : "requestStartDate",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/URLSessionTaskTransactionMetrics\/requestStartDate"
        },
        {
          "description" : "The time immediately after the task finished requesting the resource, regardless of whether it was retrieved from the server or local resources.",
          "name" : "requestEndDate",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/URLSessionTaskTransactionMetrics\/requestEndDate"
        },
        {
          "description" : "The time immediately after the task received the first byte of the response from the server or from local resources.",
          "name" : "responseStartDate",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/URLSessionTaskTransactionMetrics\/responseStartDate"
        },
        {
          "description" : "The time immediately after the task received the last byte of the resource.",
          "name" : "responseEndDate",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/URLSessionTaskTransactionMetrics\/responseEndDate"
        }
      ],
      "title" : "Accessing temporal metrics"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "The size of the upload body data, file, or stream, in bytes.",
          "name" : "countOfRequestBodyBytesBeforeEncoding",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/URLSessionTaskTransactionMetrics\/countOfRequestBodyBytesBeforeEncoding"
        },
        {
          "description" : "The number of bytes transferred for the request body.",
          "name" : "countOfRequestBodyBytesSent",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/URLSessionTaskTransactionMetrics\/countOfRequestBodyBytesSent"
        },
        {
          "description" : "The number of bytes transferred for the request header.",
          "name" : "countOfRequestHeaderBytesSent",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/URLSessionTaskTransactionMetrics\/countOfRequestHeaderBytesSent"
        },
        {
          "description" : "The size of data delivered to your delegate or completion handler.",
          "name" : "countOfResponseBodyBytesAfterDecoding",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/URLSessionTaskTransactionMetrics\/countOfResponseBodyBytesAfterDecoding"
        },
        {
          "description" : "The number of bytes transferred for the response body.",
          "name" : "countOfResponseBodyBytesReceived",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/URLSessionTaskTransactionMetrics\/countOfResponseBodyBytesReceived"
        },
        {
          "description" : "The number of bytes transferred for the response header.",
          "name" : "countOfResponseHeaderBytesReceived",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/URLSessionTaskTransactionMetrics\/countOfResponseHeaderBytesReceived"
        }
      ],
      "title" : "Accessing data transfer metrics"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "The network protocol used to fetch the resource.",
          "name" : "networkProtocolName",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/URLSessionTaskTransactionMetrics\/networkProtocolName"
        },
        {
          "description" : "The IP address string of the remote interface for the connection.",
          "name" : "remoteAddress",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/URLSessionTaskTransactionMetrics\/remoteAddress"
        },
        {
          "description" : "The port number of the remote interface for the connection.",
          "name" : "remotePort",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/URLSessionTaskTransactionMetrics\/remotePort"
        },
        {
          "description" : "The IP address string of the local interface for the connection.",
          "name" : "localAddress",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/URLSessionTaskTransactionMetrics\/localAddress"
        },
        {
          "description" : "The port number of the local interface for the connection.",
          "name" : "localPort",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/URLSessionTaskTransactionMetrics\/localPort"
        },
        {
          "description" : "The TLS cipher suite the task negotiated with the endpoint for the connection.",
          "name" : "negotiatedTLSCipherSuite",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/URLSessionTaskTransactionMetrics\/negotiatedTLSCipherSuite"
        },
        {
          "description" : "The TLS protocol version the task negotiated with the endpoint for the connection.",
          "name" : "negotiatedTLSProtocolVersion",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/URLSessionTaskTransactionMetrics\/negotiatedTLSProtocolVersion"
        },
        {
          "description" : "A Boolean value that indicates whether the connection operates over a cellular interface.",
          "name" : "isCellular",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/URLSessionTaskTransactionMetrics\/isCellular"
        },
        {
          "description" : "A Boolean value that indicates whether the connection operates over an expensive interface.",
          "name" : "isExpensive",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/URLSessionTaskTransactionMetrics\/isExpensive"
        },
        {
          "description" : "A Boolean value that indicates whether the connection operates over an interface marked as constrained.",
          "name" : "isConstrained",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/URLSessionTaskTransactionMetrics\/isConstrained"
        },
        {
          "description" : "A Boolean value that indicastes whether the task used a proxy connection to fetch the resource.",
          "name" : "isProxyConnection",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/URLSessionTaskTransactionMetrics\/isProxyConnection"
        },
        {
          "description" : "A Boolean value that indicates whether the task used a persistent connection to fetch the resource.",
          "name" : "isReusedConnection",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/URLSessionTaskTransactionMetrics\/isReusedConnection"
        },
        {
          "description" : "A Boolean value that indicates whether the connection uses a successfully negotiated multipath protocol.",
          "name" : "isMultipath",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/URLSessionTaskTransactionMetrics\/isMultipath"
        },
        {
          "description" : "A value that indicates whether the resource was loaded, pushed, or retrieved from the local cache.",
          "name" : "resourceFetchType",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/URLSessionTaskTransactionMetrics\/resourceFetchType"
        },
        {
          "description" : "The manner in which a resource is fetched.",
          "name" : "URLSessionTaskMetrics.ResourceFetchType",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/URLSessionTaskMetrics\/ResourceFetchType"
        },
        {
          "description" : "",
          "name" : "domainResolutionProtocol",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/URLSessionTaskTransactionMetrics\/domainResolutionProtocol"
        },
        {
          "description" : "",
          "name" : "URLSessionTaskMetrics.DomainResolutionProtocol",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/URLSessionTaskMetrics\/DomainResolutionProtocol"
        }
      ],
      "title" : "Accessing transaction characteristics"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Creates a transaction metrics instance.",
          "name" : "init()",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/URLSessionTaskTransactionMetrics\/init()"
        },
        {
          "description" : "Creates a new transaction metrics instance.",
          "name" : "new()",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/URLSessionTaskTransactionMetrics\/new()"
        }
      ],
      "title" : "Creating transaction metrics"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "An array of metrics for each individual request-response transaction made during the execution of the task.",
          "name" : "transactionMetrics",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/URLSessionTaskMetrics\/transactionMetrics"
        },
        {
          "description" : "The time interval between when a task is instantiated and when the task is completed.",
          "name" : "taskInterval",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/URLSessionTaskMetrics\/taskInterval"
        },
        {
          "description" : "The number of redirects that occurred during the execution of the task.",
          "name" : "redirectCount",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/URLSessionTaskMetrics\/redirectCount"
        }
      ],
      "title" : "Accessing task metrics"
    },
    {
      "content" : "",
      "items" : [
        {
          "name" : "NSObject"
        }
      ],
      "title" : "Inherits From"
    }
  ],
  "source" : "appleJSON",
  "title" : "URLSessionTaskTransactionMetrics",
  "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/URLSessionTaskTransactionMetrics"
}