{
  "abstract" : "A query that you perform against Spotlight metadata.",
  "codeExamples" : [

  ],
  "conformsTo" : [
    "CVarArg",
    "CustomDebugStringConvertible",
    "CustomStringConvertible",
    "Equatable",
    "Hashable",
    "NSObjectProtocol"
  ],
  "contentHash" : "840d9351a6c0ea08e2293fe7ed3009ac783f5ec1510212fe85e96dbec227f82f",
  "crawledAt" : "2025-12-07T12:18:59Z",
  "declaration" : {
    "code" : "class NSMetadataQuery",
    "language" : "swift"
  },
  "id" : "6825B9ED-16C2-4589-BF85-EACD1D6329D4",
  "kind" : "class",
  "language" : "swift",
  "module" : "Foundation",
  "overview" : "## Overview\n\nThe [doc:\/\/com.apple.foundation\/documentation\/Foundation\/NSMetadataQuery] class encapsulates the functionality provided by the [doc:\/\/com.apple.documentation\/documentation\/coreservices\/file_metadata\/mdquery] opaque type for querying the Spotlight metadata.\n\n[doc:\/\/com.apple.foundation\/documentation\/Foundation\/NSMetadataQuery] objects provide metadata query results in several ways:\n\nQueries have two phases: the initial gathering phase that collects all currently matching results and a second live-update phase.\n\nBy default, the receiver has no limitation on its search scope. Use the [doc:\/\/com.apple.foundation\/documentation\/Foundation\/NSMetadataQuery\/searchScopes] property to customize.\n\nBy default, notification of updated results occurs at 1.0 seconds. Use the [doc:\/\/com.apple.foundation\/documentation\/Foundation\/NSMetadataQuery\/notificationBatchingInterval] property to customize.\n\nYou must set a predicate with the [doc:\/\/com.apple.foundation\/documentation\/Foundation\/NSMetadataQuery\/predicate] property before starting a query.",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "tvOS",
    "visionOS",
    "watchOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/foundation\/nsmetadataquery\ncrawled: 2025-12-07T12:18:59Z\n---\n\n# NSMetadataQuery\n\n**Class**\n\nA query that you perform against Spotlight metadata.\n\n## Declaration\n\n```swift\nclass NSMetadataQuery\n```\n\n## Overview\n\nThe [doc:\/\/com.apple.foundation\/documentation\/Foundation\/NSMetadataQuery] class encapsulates the functionality provided by the [doc:\/\/com.apple.documentation\/documentation\/coreservices\/file_metadata\/mdquery] opaque type for querying the Spotlight metadata.\n\n[doc:\/\/com.apple.foundation\/documentation\/Foundation\/NSMetadataQuery] objects provide metadata query results in several ways:\n\n- As individual attribute values for requested attributes.\n- As value lists that contain the distinct values for given attributes in the query results.\n- As a result array proxy, containing all the query results. This is suitable for use with Cocoa bindings.\n- As a hierarchical collection of results, grouping together items with the same values for specified grouping attributes. This is also suitable for use with Cocoa bindings.\n\nQueries have two phases: the initial gathering phase that collects all currently matching results and a second live-update phase.\n\nBy default, the receiver has no limitation on its search scope. Use the [doc:\/\/com.apple.foundation\/documentation\/Foundation\/NSMetadataQuery\/searchScopes] property to customize.\n\nBy default, notification of updated results occurs at 1.0 seconds. Use the [doc:\/\/com.apple.foundation\/documentation\/Foundation\/NSMetadataQuery\/notificationBatchingInterval] property to customize.\n\nYou must set a predicate with the [doc:\/\/com.apple.foundation\/documentation\/Foundation\/NSMetadataQuery\/predicate] property before starting a query.\n\n## Configuring Queries\n\n- **searchScopes**: An array containing the search scopes.\n- **predicate**: The predicate used to filter query results.\n- **sortDescriptors**: An array of sort descriptor objects.\n- **valueListAttributes**: An array of attributes whose values are gathered by the query.\n- **groupingAttributes**: An array of grouping attributes. (read-only)\n- **notificationBatchingInterval**: The interval at which notification of updated results occurs.\n- **delegate**: The query’s delegate.\n- **searchItems**: An array of objects that define the query’s scope.\n\n## Running Queries\n\n- **isStarted**: A Boolean value that indicates whether the query has started. (read-only)\n- **start()**: Attempts to start the query.\n- **isGathering**: A Boolean value that indicates whether the receiver is in the initial gathering phase of the query. (read-only)\n- **isStopped**: A Boolean value that indicates whether the query has stopped.\n- **stop()**: Stops the receiver’s current query from gathering any further results.\n\n## Getting Query Results\n\n- **results**: An array containing the query’s results.\n- **resultCount**: The number of results returned by the query. (read-only)\n- **result(at:)**: Returns the query result at a specific index.\n- **index(ofResult:)**: Returns the index of a query result object in the receiver’s results array.\n- **groupedResults**: An array containing hierarchical groups of query results. (read-only)\n- **NSMetadataQueryResultGroup**: The `NSMetadataQueryResultGroup` class represents a collection of grouped attribute results returned by an [doc:\/\/com.apple.foundation\/documentation\/Foundation\/NSMetadataQuery] object.\n- **enumerateResults(_:)**: Enumerates the current set of results using the given block.\n- **enumerateResults(options:using:)**: Enumerates the current set of results using the given options and block.\n- **valueLists**: A dictionary containing the value lists generated by the query.\n- **NSMetadataQueryAttributeValueTuple**: The `NSMetadataQueryAttributeValueTuple` class represents attribute-value tuples, which are objects that contain the attribute name and value of a metadata attribute.\n- **value(ofAttribute:forResultAt:)**: Returns the value for the attribute name `attrName` at the index in the results specified by `idx`.\n- **enableUpdates()**: Enables updates to the query results.\n- **disableUpdates()**: Disables updates to the query results.\n- **operationQueue**: The queue on which query result notifications are posted.\n\n## Constants\n\n- **Metadata Query Search Scopes**: Constants for the predefined search scopes used by [doc:\/\/com.apple.foundation\/documentation\/Foundation\/NSMetadataQuery\/searchScopes].\n- **Content Relevance**: In addition to including the requested metadata attributes, a query result also includes content relevance, accessed with the following key.\n- **Keys for Use with a Notification Info Dictionary**: Constants for keys to retrieve the collection of changed items from a notification’s user info dictionary.\n\n## Notifications\n\n- **NSMetadataQueryDidFinishGathering**: Posted when the receiver has finished with the initial result-gathering phase of the query.\n- **NSMetadataQueryDidStartGathering**: Posted when the receiver begins with the initial result-gathering phase of the query.\n- **NSMetadataQueryDidUpdate**: Posted when the receiver’s results have changed during the live-update phase of the query.\n- **NSMetadataQueryGatheringProgress**: Posted as the receiver is collecting results during the initial result-gathering phase of the query.\n\n## Structures\n\n- **NSMetadataQuery.DidFinishGatheringMessage**\n- **NSMetadataQuery.DidStartGatheringMessage**\n\n## File Search\n\n- **NSMetadataQueryDelegate**: An interface that enables the delegate of a metadata query to provide substitute results or attributes.\n- **NSMetadataItem**: The metadata associated with a file.\n\n## Inherits From\n\n- NSObject\n\n## Conforms To\n\n- CVarArg\n- CustomDebugStringConvertible\n- CustomStringConvertible\n- Equatable\n- Hashable\n- NSObjectProtocol\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "An array containing the search scopes.",
          "name" : "searchScopes",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSMetadataQuery\/searchScopes"
        },
        {
          "description" : "The predicate used to filter query results.",
          "name" : "predicate",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSMetadataQuery\/predicate"
        },
        {
          "description" : "An array of sort descriptor objects.",
          "name" : "sortDescriptors",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSMetadataQuery\/sortDescriptors"
        },
        {
          "description" : "An array of attributes whose values are gathered by the query.",
          "name" : "valueListAttributes",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSMetadataQuery\/valueListAttributes"
        },
        {
          "description" : "An array of grouping attributes. (read-only)",
          "name" : "groupingAttributes",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSMetadataQuery\/groupingAttributes"
        },
        {
          "description" : "The interval at which notification of updated results occurs.",
          "name" : "notificationBatchingInterval",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSMetadataQuery\/notificationBatchingInterval"
        },
        {
          "description" : "The query’s delegate.",
          "name" : "delegate",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSMetadataQuery\/delegate"
        },
        {
          "description" : "An array of objects that define the query’s scope.",
          "name" : "searchItems",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSMetadataQuery\/searchItems"
        }
      ],
      "title" : "Configuring Queries"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "A Boolean value that indicates whether the query has started. (read-only)",
          "name" : "isStarted",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSMetadataQuery\/isStarted"
        },
        {
          "description" : "Attempts to start the query.",
          "name" : "start()",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSMetadataQuery\/start()"
        },
        {
          "description" : "A Boolean value that indicates whether the receiver is in the initial gathering phase of the query. (read-only)",
          "name" : "isGathering",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSMetadataQuery\/isGathering"
        },
        {
          "description" : "A Boolean value that indicates whether the query has stopped.",
          "name" : "isStopped",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSMetadataQuery\/isStopped"
        },
        {
          "description" : "Stops the receiver’s current query from gathering any further results.",
          "name" : "stop()",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSMetadataQuery\/stop()"
        }
      ],
      "title" : "Running Queries"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "An array containing the query’s results.",
          "name" : "results",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSMetadataQuery\/results"
        },
        {
          "description" : "The number of results returned by the query. (read-only)",
          "name" : "resultCount",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSMetadataQuery\/resultCount"
        },
        {
          "description" : "Returns the query result at a specific index.",
          "name" : "result(at:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSMetadataQuery\/result(at:)"
        },
        {
          "description" : "Returns the index of a query result object in the receiver’s results array.",
          "name" : "index(ofResult:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSMetadataQuery\/index(ofResult:)"
        },
        {
          "description" : "An array containing hierarchical groups of query results. (read-only)",
          "name" : "groupedResults",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSMetadataQuery\/groupedResults"
        },
        {
          "description" : "The `NSMetadataQueryResultGroup` class represents a collection of grouped attribute results returned by an [doc:\/\/com.apple.foundation\/documentation\/Foundation\/NSMetadataQuery] object.",
          "name" : "NSMetadataQueryResultGroup",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSMetadataQueryResultGroup"
        },
        {
          "description" : "Enumerates the current set of results using the given block.",
          "name" : "enumerateResults(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSMetadataQuery\/enumerateResults(_:)"
        },
        {
          "description" : "Enumerates the current set of results using the given options and block.",
          "name" : "enumerateResults(options:using:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSMetadataQuery\/enumerateResults(options:using:)"
        },
        {
          "description" : "A dictionary containing the value lists generated by the query.",
          "name" : "valueLists",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSMetadataQuery\/valueLists"
        },
        {
          "description" : "The `NSMetadataQueryAttributeValueTuple` class represents attribute-value tuples, which are objects that contain the attribute name and value of a metadata attribute.",
          "name" : "NSMetadataQueryAttributeValueTuple",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSMetadataQueryAttributeValueTuple"
        },
        {
          "description" : "Returns the value for the attribute name `attrName` at the index in the results specified by `idx`.",
          "name" : "value(ofAttribute:forResultAt:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSMetadataQuery\/value(ofAttribute:forResultAt:)"
        },
        {
          "description" : "Enables updates to the query results.",
          "name" : "enableUpdates()",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSMetadataQuery\/enableUpdates()"
        },
        {
          "description" : "Disables updates to the query results.",
          "name" : "disableUpdates()",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSMetadataQuery\/disableUpdates()"
        },
        {
          "description" : "The queue on which query result notifications are posted.",
          "name" : "operationQueue",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSMetadataQuery\/operationQueue"
        }
      ],
      "title" : "Getting Query Results"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Constants for the predefined search scopes used by [doc:\/\/com.apple.foundation\/documentation\/Foundation\/NSMetadataQuery\/searchScopes].",
          "name" : "Metadata Query Search Scopes",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/metadata-query-search-scopes"
        },
        {
          "description" : "In addition to including the requested metadata attributes, a query result also includes content relevance, accessed with the following key.",
          "name" : "Content Relevance",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/content-relevance"
        },
        {
          "description" : "Constants for keys to retrieve the collection of changed items from a notification’s user info dictionary.",
          "name" : "Keys for Use with a Notification Info Dictionary",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/keys-for-use-with-a-notification-info-dictionary"
        }
      ],
      "title" : "Constants"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Posted when the receiver has finished with the initial result-gathering phase of the query.",
          "name" : "NSMetadataQueryDidFinishGathering",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSNotification\/Name-swift.struct\/NSMetadataQueryDidFinishGathering"
        },
        {
          "description" : "Posted when the receiver begins with the initial result-gathering phase of the query.",
          "name" : "NSMetadataQueryDidStartGathering",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSNotification\/Name-swift.struct\/NSMetadataQueryDidStartGathering"
        },
        {
          "description" : "Posted when the receiver’s results have changed during the live-update phase of the query.",
          "name" : "NSMetadataQueryDidUpdate",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSNotification\/Name-swift.struct\/NSMetadataQueryDidUpdate"
        },
        {
          "description" : "Posted as the receiver is collecting results during the initial result-gathering phase of the query.",
          "name" : "NSMetadataQueryGatheringProgress",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSNotification\/Name-swift.struct\/NSMetadataQueryGatheringProgress"
        }
      ],
      "title" : "Notifications"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "",
          "name" : "NSMetadataQuery.DidFinishGatheringMessage",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSMetadataQuery\/DidFinishGatheringMessage"
        },
        {
          "description" : "",
          "name" : "NSMetadataQuery.DidStartGatheringMessage",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSMetadataQuery\/DidStartGatheringMessage"
        }
      ],
      "title" : "Structures"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "An interface that enables the delegate of a metadata query to provide substitute results or attributes.",
          "name" : "NSMetadataQueryDelegate",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSMetadataQueryDelegate"
        },
        {
          "description" : "The metadata associated with a file.",
          "name" : "NSMetadataItem",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSMetadataItem"
        }
      ],
      "title" : "File Search"
    },
    {
      "content" : "",
      "items" : [
        {
          "name" : "NSObject"
        }
      ],
      "title" : "Inherits From"
    }
  ],
  "source" : "appleJSON",
  "title" : "NSMetadataQuery",
  "url" : "https:\/\/developer.apple.com\/documentation\/foundation\/nsmetadataquery"
}