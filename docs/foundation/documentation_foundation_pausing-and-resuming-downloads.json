{
  "abstract" : "Allow the user to resume a download without starting over.",
  "codeExamples" : [
    {
      "code" : "downloadTask.cancel { resumeDataOrNil in\n    guard let resumeData = resumeDataOrNil else { \n      \/\/ download can't be resumed; remove from UI if necessary\n      return\n    }\n    self.resumeData = resumeData\n}\n",
      "language" : "swift"
    },
    {
      "code" : "func urlSession(_ session: URLSession, task: URLSessionTask, didCompleteWithError error: Error?) {\n    guard let error = error else {\n        \/\/ Handle success case.\n        return\n    }\n    let userInfo = (error as NSError).userInfo\n    if let resumeData = userInfo[NSURLSessionDownloadTaskResumeData] as? Data {\n        self.resumeData = resumeData\n    } \n    \/\/ Perform any other error handling.\n}\n",
      "language" : "swift"
    },
    {
      "code" : "guard let resumeData = resumeData else {\n    \/\/ inform the user the download can't be resumed\n    return\n}\nlet downloadTask = urlSession.downloadTask(withResumeData: resumeData)\ndownloadTask.resume()\nself.downloadTask = downloadTask\n",
      "language" : "swift"
    }
  ],
  "contentHash" : "f4d597683c2ea029f6d211628acaaff82051b66674f18caedcf2cbdaa1f68fa1",
  "crawledAt" : "2025-12-04T17:55:52Z",
  "id" : "E8366104-0887-46F6-9BBA-E8344A346856",
  "kind" : "article",
  "language" : "swift",
  "module" : "Foundation",
  "overview" : "## Overview\n\nYour app or the user may need to cancel an in-progress download and resume it later. By supporting resumable downloads, you save both the user’s time and network bandwidth.\n\nYou can also use this technique to resume a download that fails due to a temporary loss of connectivity.\n\n### Store the resume data object when you cancel the download\n\nYou cancel a [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionDownloadTask] by calling [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionDownloadTask\/cancel(byProducingResumeData:)]. This method takes a completion handler which is called once the cancellation is complete. The completion handler receives a `resumeData` parameter. If it it not `nil`, this is the token you use later to resume the download. The following example shows how to cancel a download task and store `resumeData`, if it exists, in a property.\n\nStoring the resume data when canceling a download\n\n### Store the resume data object when a download fails\n\nYou can also resume a download that has failed due to a temporary loss of connectivity, as when the user walks out of WiFi range.\n\nWhen the download fails, the session calls your [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionTaskDelegate\/urlSession(_:task:didCompleteWithError:)] delegate method. If `error` is not `nil`, look in its `userInfo` dictionary for the key [doc:\/\/com.apple.foundation\/documentation\/Foundation\/NSURLSessionDownloadTaskResumeData]. If the key exists, save the value associated with it to use later when you try to resume the download. If the key does not exist, the download can’t be resumed.\n\nThe following example shows an implementation of [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionTaskDelegate\/urlSession(_:task:didCompleteWithError:)] that retrieves and saves the `resumeData` object, if any, from the error.\n\n### Use the stored resume data object to resume downloading\n\nWhen it’s appropriate to resume the download, create a new [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionDownloadTask] by using the [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSession\/downloadTask(withResumeData:)] or [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSession\/downloadTask(withResumeData:completionHandler:)] method of [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSession], passing in the `resumeData` object you stored earlier. Then call [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionTask\/resume()] on the task to resume the download.\n\nCreating and starting a download task from resume data\n\nIf the download resumes successfully, the task calls your delegate’s [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionDownloadDelegate\/urlSession(_:downloadTask:didResumeAtOffset:expectedTotalBytes:)] method. You can use the offset and byte count parameters to inform the user that the download has resumed and has preserved its earlier progress.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/Foundation\/pausing-and-resuming-downloads\ncrawled: 2025-12-04T17:55:52Z\n---\n\n# Pausing and resuming downloads\n\n**Article**\n\nAllow the user to resume a download without starting over.\n\n## Overview\n\nYour app or the user may need to cancel an in-progress download and resume it later. By supporting resumable downloads, you save both the user’s time and network bandwidth.\n\nYou can also use this technique to resume a download that fails due to a temporary loss of connectivity.\n\n### Store the resume data object when you cancel the download\n\nYou cancel a [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionDownloadTask] by calling [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionDownloadTask\/cancel(byProducingResumeData:)]. This method takes a completion handler which is called once the cancellation is complete. The completion handler receives a `resumeData` parameter. If it it not `nil`, this is the token you use later to resume the download. The following example shows how to cancel a download task and store `resumeData`, if it exists, in a property.\n\nStoring the resume data when canceling a download\n\n```swift\ndownloadTask.cancel { resumeDataOrNil in\n    guard let resumeData = resumeDataOrNil else { \n      \/\/ download can't be resumed; remove from UI if necessary\n      return\n    }\n    self.resumeData = resumeData\n}\n\n```\n\n\n\n### Store the resume data object when a download fails\n\nYou can also resume a download that has failed due to a temporary loss of connectivity, as when the user walks out of WiFi range.\n\nWhen the download fails, the session calls your [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionTaskDelegate\/urlSession(_:task:didCompleteWithError:)] delegate method. If `error` is not `nil`, look in its `userInfo` dictionary for the key [doc:\/\/com.apple.foundation\/documentation\/Foundation\/NSURLSessionDownloadTaskResumeData]. If the key exists, save the value associated with it to use later when you try to resume the download. If the key does not exist, the download can’t be resumed.\n\nThe following example shows an implementation of [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionTaskDelegate\/urlSession(_:task:didCompleteWithError:)] that retrieves and saves the `resumeData` object, if any, from the error.\n\n```swift\nfunc urlSession(_ session: URLSession, task: URLSessionTask, didCompleteWithError error: Error?) {\n    guard let error = error else {\n        \/\/ Handle success case.\n        return\n    }\n    let userInfo = (error as NSError).userInfo\n    if let resumeData = userInfo[NSURLSessionDownloadTaskResumeData] as? Data {\n        self.resumeData = resumeData\n    } \n    \/\/ Perform any other error handling.\n}\n\n```\n\n### Use the stored resume data object to resume downloading\n\nWhen it’s appropriate to resume the download, create a new [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionDownloadTask] by using the [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSession\/downloadTask(withResumeData:)] or [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSession\/downloadTask(withResumeData:completionHandler:)] method of [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSession], passing in the `resumeData` object you stored earlier. Then call [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionTask\/resume()] on the task to resume the download.\n\nCreating and starting a download task from resume data\n\n```swift\nguard let resumeData = resumeData else {\n    \/\/ inform the user the download can't be resumed\n    return\n}\nlet downloadTask = urlSession.downloadTask(withResumeData: resumeData)\ndownloadTask.resume()\nself.downloadTask = downloadTask\n\n```\n\nIf the download resumes successfully, the task calls your delegate’s [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionDownloadDelegate\/urlSession(_:downloadTask:didResumeAtOffset:expectedTotalBytes:)] method. You can use the offset and byte count parameters to inform the user that the download has resumed and has preserved its earlier progress.\n\n## Downloading\n\n- **Downloading files from websites**: Download files directly to the filesystem.\n- **Downloading files in the background**: Create tasks that download files while your app is inactive.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Download files directly to the filesystem.",
          "name" : "Downloading files from websites",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/downloading-files-from-websites"
        },
        {
          "description" : "Create tasks that download files while your app is inactive.",
          "name" : "Downloading files in the background",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/downloading-files-in-the-background"
        }
      ],
      "title" : "Downloading"
    }
  ],
  "source" : "appleJSON",
  "title" : "Pausing and resuming downloads",
  "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/pausing-and-resuming-downloads"
}