{
  "abstract" : "A protocol for creating types that you can post to a notification center and bind to the main actor.",
  "codeExamples" : [
    {
      "code" : "struct EventDidStart: NotificationCenter.MainActorMessage {\n    typealias Subject = Event\n}",
      "language" : "swift"
    },
    {
      "code" : "extension NotificationCenter.MessageIdentifier where Self == NotificationCenter.BaseMessageIdentifier<EventDidStart> {\n    static var didStart: Self { .init() }\n}",
      "language" : "swift"
    },
    {
      "code" : "let observerToken = NotificationCenter.default.addObserver(of: importantEvent, for: .didStart)",
      "language" : "swift"
    },
    {
      "code" : "let observerToken = NotificationCenter.default.addObserver(of: Event.self, for: .didStart)",
      "language" : "swift"
    },
    {
      "code" : "NotificationCenter.default.removeObserver(observerToken)",
      "language" : "swift"
    },
    {
      "code" : "struct EventDidFinish: NotificationCenter.MainActorMessage {\n    typealias Subject = Event\n    static var name: Notification.Name { Notification.Name(\"eventDidFinish\") }\n\n    var duration: Int\n\n    static func makeNotification(_ message: Self) -> Notification {\n        return Notification(name: Self.name, userInfo: [\"duration\": NSNumber(message.duration)])\n    }\n\n    static func makeMessage(_ notification: Notification) -> Self? {\n        guard let userInfo = notification.userInfo,\n              let duration = userInfo[\"duration\"] as? Int\n        else {\n            return nil\n        }\n\n        return Self(duration: duration)\n    }\n}",
      "language" : "swift"
    }
  ],
  "conformingTypes" : [
    "Date.SystemClockDidChangeMessage",
    "FileManager.UbiquityIdentityDidChangeMessage",
    "Locale.CurrentLocaleDidChangeMessage",
    "NSExtensionContext.DidBecomeActiveMessage",
    "NSExtensionContext.DidEnterBackgroundMessage",
    "NSExtensionContext.WillEnterForegroundMessage",
    "NSExtensionContext.WillResignActiveMessage",
    "TimeZone.SystemTimeZoneDidChangeMessage",
    "UndoManager.CheckpointMessage",
    "UndoManager.DidCloseUndoGroupMessage",
    "UndoManager.DidOpenUndoGroupMessage",
    "UndoManager.DidRedoChangeMessage",
    "UndoManager.DidUndoChangeMessage",
    "UndoManager.WillCloseUndoGroupMessage",
    "UndoManager.WillRedoChangeMessage",
    "UndoManager.WillUndoChangeMessage",
    "UserDefaults.SizeLimitExceededMessage"
  ],
  "contentHash" : "d73c45da167c30b77039c489de324b8526ede6d035a0c6111c9bbeeb409e839c",
  "crawledAt" : "2025-12-05T09:31:54Z",
  "declaration" : {
    "code" : "protocol MainActorMessage : SendableMetatype",
    "language" : "swift"
  },
  "id" : "5DEF941C-F0EB-426E-A70A-C197893D1D79",
  "kind" : "protocol",
  "language" : "swift",
  "module" : "Foundation",
  "overview" : "## Overview\n\nYou post types conforming to  `MainActorMessage` to a notification center using `post(_:subject:)` and observe them with `addObserver(of:for:using:)`. The notification center delivers `MainActorMessage` types synchronously when posted.\n\nFor types that post on an arbitrary isolation, use [doc:\/\/com.apple.foundation\/documentation\/Foundation\/NotificationCenter\/AsyncMessage].\n\nEach `MainActorMessage` is associated with a specific `Subject` type.\n\nFor example, a `MainActorMessage` associated with the type `Event` could use the following declaration:\n\n`MainActorMessage` can use an optional [doc:\/\/com.apple.foundation\/documentation\/Foundation\/NotificationCenter\/MessageIdentifier] type for context-aware observer registration:\n\nWith this identifier, observers can receive information about a specific instance by registering for this message with a [doc:\/\/com.apple.foundation\/documentation\/Foundation\/NotificationCenter]:\n\nOr an observer can receive information about any instance with:\n\nThe notification center ties observation the lifetime of the returned [doc:\/\/com.apple.foundation\/documentation\/Foundation\/NotificationCenter\/ObservationToken] and automatically de-registers the observer if the token goes out of scope. You can also remove observation explicitly:\n\n### Notification Interoperability\n\n`MainActorMessage` includes optional interoperability with [doc:\/\/com.apple.foundation\/documentation\/Foundation\/Notification], enabling posters and observers of both types to pass information.\n\nIt does this by offering a [doc:\/\/com.apple.foundation\/documentation\/Foundation\/NotificationCenter\/MainActorMessage\/makeMessage(_:)] method that collects values from a [doc:\/\/com.apple.foundation\/documentation\/Foundation\/Notification]‘s [doc:\/\/com.apple.foundation\/documentation\/Foundation\/Notification\/userInfo] and populates properties on a new message. In the other direction, a [doc:\/\/com.apple.foundation\/documentation\/Foundation\/NotificationCenter\/MainActorMessage\/makeNotification(_:)] method collects the message’s defined properties and loads them into a new notification’s [doc:\/\/com.apple.foundation\/documentation\/Foundation\/Notification\/userInfo] dictionary.\n\nFor example, if there exists a [doc:\/\/com.apple.foundation\/documentation\/Foundation\/Notification] posted on `MainActor` identified by the [doc:\/\/com.apple.foundation\/documentation\/Foundation\/Notification\/Name-swift.typealias] `\"eventDidFinish\"` with a [doc:\/\/com.apple.foundation\/documentation\/Foundation\/Notification\/userInfo] dictionary containing the key `\"duration\"` as an [doc:\/\/com.apple.foundation\/documentation\/Foundation\/NSNumber], an app could post and observe the notification with the following [doc:\/\/com.apple.foundation\/documentation\/Foundation\/NotificationCenter\/MainActorMessage]:\n\nWith this definition, an observer for this `MainActorMessage` type receives information even if the poster used the [doc:\/\/com.apple.foundation\/documentation\/Foundation\/Notification] equivalent, and vice versa.",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "tvOS",
    "visionOS",
    "watchOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/foundation\/notificationcenter\/mainactormessage\ncrawled: 2025-12-05T09:31:54Z\n---\n\n# NotificationCenter.MainActorMessage\n\n**Protocol**\n\nA protocol for creating types that you can post to a notification center and bind to the main actor.\n\n## Declaration\n\n```swift\nprotocol MainActorMessage : SendableMetatype\n```\n\n## Overview\n\nYou post types conforming to  `MainActorMessage` to a notification center using `post(_:subject:)` and observe them with `addObserver(of:for:using:)`. The notification center delivers `MainActorMessage` types synchronously when posted.\n\nFor types that post on an arbitrary isolation, use [doc:\/\/com.apple.foundation\/documentation\/Foundation\/NotificationCenter\/AsyncMessage].\n\nEach `MainActorMessage` is associated with a specific `Subject` type.\n\nFor example, a `MainActorMessage` associated with the type `Event` could use the following declaration:\n\n```swift\nstruct EventDidStart: NotificationCenter.MainActorMessage {\n    typealias Subject = Event\n}\n```\n\n`MainActorMessage` can use an optional [doc:\/\/com.apple.foundation\/documentation\/Foundation\/NotificationCenter\/MessageIdentifier] type for context-aware observer registration:\n\n```swift\nextension NotificationCenter.MessageIdentifier where Self == NotificationCenter.BaseMessageIdentifier<EventDidStart> {\n    static var didStart: Self { .init() }\n}\n```\n\nWith this identifier, observers can receive information about a specific instance by registering for this message with a [doc:\/\/com.apple.foundation\/documentation\/Foundation\/NotificationCenter]:\n\n```swift\nlet observerToken = NotificationCenter.default.addObserver(of: importantEvent, for: .didStart)\n```\n\nOr an observer can receive information about any instance with:\n\n```swift\nlet observerToken = NotificationCenter.default.addObserver(of: Event.self, for: .didStart)\n```\n\nThe notification center ties observation the lifetime of the returned [doc:\/\/com.apple.foundation\/documentation\/Foundation\/NotificationCenter\/ObservationToken] and automatically de-registers the observer if the token goes out of scope. You can also remove observation explicitly:\n\n```swift\nNotificationCenter.default.removeObserver(observerToken)\n```\n\n### Notification Interoperability\n\n`MainActorMessage` includes optional interoperability with [doc:\/\/com.apple.foundation\/documentation\/Foundation\/Notification], enabling posters and observers of both types to pass information.\n\nIt does this by offering a [doc:\/\/com.apple.foundation\/documentation\/Foundation\/NotificationCenter\/MainActorMessage\/makeMessage(_:)] method that collects values from a [doc:\/\/com.apple.foundation\/documentation\/Foundation\/Notification]‘s [doc:\/\/com.apple.foundation\/documentation\/Foundation\/Notification\/userInfo] and populates properties on a new message. In the other direction, a [doc:\/\/com.apple.foundation\/documentation\/Foundation\/NotificationCenter\/MainActorMessage\/makeNotification(_:)] method collects the message’s defined properties and loads them into a new notification’s [doc:\/\/com.apple.foundation\/documentation\/Foundation\/Notification\/userInfo] dictionary.\n\nFor example, if there exists a [doc:\/\/com.apple.foundation\/documentation\/Foundation\/Notification] posted on `MainActor` identified by the [doc:\/\/com.apple.foundation\/documentation\/Foundation\/Notification\/Name-swift.typealias] `\"eventDidFinish\"` with a [doc:\/\/com.apple.foundation\/documentation\/Foundation\/Notification\/userInfo] dictionary containing the key `\"duration\"` as an [doc:\/\/com.apple.foundation\/documentation\/Foundation\/NSNumber], an app could post and observe the notification with the following [doc:\/\/com.apple.foundation\/documentation\/Foundation\/NotificationCenter\/MainActorMessage]:\n\n```swift\nstruct EventDidFinish: NotificationCenter.MainActorMessage {\n    typealias Subject = Event\n    static var name: Notification.Name { Notification.Name(\"eventDidFinish\") }\n\n    var duration: Int\n\n    static func makeNotification(_ message: Self) -> Notification {\n        return Notification(name: Self.name, userInfo: [\"duration\": NSNumber(message.duration)])\n    }\n\n    static func makeMessage(_ notification: Notification) -> Self? {\n        guard let userInfo = notification.userInfo,\n              let duration = userInfo[\"duration\"] as? Int\n        else {\n            return nil\n        }\n\n        return Self(duration: duration)\n    }\n}\n```\n\nWith this definition, an observer for this `MainActorMessage` type receives information even if the poster used the [doc:\/\/com.apple.foundation\/documentation\/Foundation\/Notification] equivalent, and vice versa.\n\n## Declaring the message name and subject\n\n- **name**: A optional name corresponding to this type, used to interoperate with notification posters and observers.\n- **Subject**: A type which you can optionally post and observe along with this `MainActorMessage`.\n\n## Converting between messages and notifications\n\n- **makeMessage(_:)**: Converts a posted notification into this main actor message type for any observers.\n- **makeNotification(_:)**: Converts a posted main actor message into a notification for any observers.\n\n## Declaring a message\n\n- **NotificationCenter.AsyncMessage**: A protocol for creating types that you can post to a notification center, which posts them to an arbitrary isolation.\n\n## Inherits From\n\n- SendableMetatype\n\n## Conforming Types\n\n- Date.SystemClockDidChangeMessage\n- FileManager.UbiquityIdentityDidChangeMessage\n- Locale.CurrentLocaleDidChangeMessage\n- NSExtensionContext.DidBecomeActiveMessage\n- NSExtensionContext.DidEnterBackgroundMessage\n- NSExtensionContext.WillEnterForegroundMessage\n- NSExtensionContext.WillResignActiveMessage\n- TimeZone.SystemTimeZoneDidChangeMessage\n- UndoManager.CheckpointMessage\n- UndoManager.DidCloseUndoGroupMessage\n- UndoManager.DidOpenUndoGroupMessage\n- UndoManager.DidRedoChangeMessage\n- UndoManager.DidUndoChangeMessage\n- UndoManager.WillCloseUndoGroupMessage\n- UndoManager.WillRedoChangeMessage\n- UndoManager.WillUndoChangeMessage\n- UserDefaults.SizeLimitExceededMessage\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "A optional name corresponding to this type, used to interoperate with notification posters and observers.",
          "name" : "name",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NotificationCenter\/MainActorMessage\/name"
        },
        {
          "description" : "A type which you can optionally post and observe along with this `MainActorMessage`.",
          "name" : "Subject",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NotificationCenter\/MainActorMessage\/Subject"
        }
      ],
      "title" : "Declaring the message name and subject"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Converts a posted notification into this main actor message type for any observers.",
          "name" : "makeMessage(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NotificationCenter\/MainActorMessage\/makeMessage(_:)"
        },
        {
          "description" : "Converts a posted main actor message into a notification for any observers.",
          "name" : "makeNotification(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NotificationCenter\/MainActorMessage\/makeNotification(_:)"
        }
      ],
      "title" : "Converting between messages and notifications"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "A protocol for creating types that you can post to a notification center, which posts them to an arbitrary isolation.",
          "name" : "NotificationCenter.AsyncMessage",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NotificationCenter\/AsyncMessage"
        }
      ],
      "title" : "Declaring a message"
    },
    {
      "content" : "",
      "items" : [
        {
          "name" : "SendableMetatype"
        }
      ],
      "title" : "Inherits From"
    }
  ],
  "source" : "appleJSON",
  "title" : "NotificationCenter.MainActorMessage",
  "url" : "https:\/\/developer.apple.com\/documentation\/foundation\/notificationcenter\/mainactormessage"
}