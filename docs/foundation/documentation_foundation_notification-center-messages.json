{
  "abstract" : "Use Foundation’s notification center with Swift concurrency.",
  "codeExamples" : [
    {
      "code" : "\/\/\/ Note: Store `token` in a property for as long as you intend to observe.\ntoken = NotificationCenter.default.addObserver(of: TimeZone.self,\n                                               for: .systemTimeZoneDidChange)\n{ message in\n    let identifier = message.previousTimeZone?.identifier ?? \"(unknown)\"\n    print(\"Time zone changed from \\(identifier).\")\n}"
    }
  ],
  "contentHash" : "f664ea51c7f3de54fde20b7fea01ee8dff7e0da7834a6f0eb73f26f13fa0726a",
  "crawledAt" : "2025-12-06T01:19:10Z",
  "id" : "F2AD083A-AAE5-4C7A-AB3E-D7B67CD39645",
  "kind" : "collection",
  "language" : "swift",
  "module" : "Foundation",
  "overview" : "## Overview\n\nIn Swift, the [doc:\/\/com.apple.foundation\/documentation\/Foundation\/Notification] type is `nonisolated`, even in cases where it’s posted on a known isolation. To provide specific isolation information and better support Swift concurrency, `NotificationCenter` defines two message types. A [doc:\/\/com.apple.foundation\/documentation\/Foundation\/NotificationCenter\/MainActorMessage] binds to the main actor, whereas a [doc:\/\/com.apple.foundation\/documentation\/Foundation\/NotificationCenter\/AsyncMessage] uses an arbitrary isolation. Frameworks extend these types to define distinct messages, typically corresponding to an existing [doc:\/\/com.apple.foundation\/documentation\/Foundation\/Notification\/Name-swift.typealias], that declare instance properties for their values instead of using a `userInfo` dictionary. As a result, messages can conform to [doc:\/\/com.apple.documentation\/documentation\/Swift\/Sendable] when they either don’t use properties or contain only sendable properties.\n\nIf your project only needs to support Swift, you can just use the `Message` types. For projects with both Objective-C and Swift code, define a [doc:\/\/com.apple.foundation\/documentation\/Foundation\/Notification] as well as a corresponding `Message` type.\n\n### Posting and observing messages\n\nYou can post a message with the `post(_:subject:)` method, passing a message instance and optionally providing a subject. To receive messages, add an observer with the `addObserver(of:for:using:)` method. The overloads of this method allow you to observe either messages from a single object or from any object of a given type. Observation ends when you discard the token returned from `addObserver(of:for:using:)` or after an explicit call to [doc:\/\/com.apple.foundation\/documentation\/Foundation\/NotificationCenter\/removeObserver(_:)-2gmm0].\n\nYou can also receive messages as an [doc:\/\/com.apple.documentation\/documentation\/Swift\/AsyncSequence] with the `messages(of:for:bufferSize:)` methods.\n\nSeveral flavors of `addObserver(of:for:using:)` and `messages(of:for:bufferSize:)` take a [doc:\/\/com.apple.foundation\/documentation\/Foundation\/NotificationCenter\/MessageIdentifier], which frameworks may implement to provide a typed, ergonomic experience at the call point for convenience, as described in [https:\/\/github.com\/swiftlang\/swift-evolution\/blob\/main\/proposals\/0299-extend-generic-static-member-lookup.md].\n\n### Using messages with the SDK\n\nMany system frameworks — including Foundation, UIKit, and AppKit — adopt the [doc:\/\/com.apple.foundation\/documentation\/Foundation\/NotificationCenter\/MainActorMessage] and [doc:\/\/com.apple.foundation\/documentation\/Foundation\/NotificationCenter\/AsyncMessage] types to facilitate using their notifications in concurrency-safe Swift code. The following example shows how to observe Foundation’s [doc:\/\/com.apple.foundation\/documentation\/Foundation\/TimeZone] type for the [doc:\/\/com.apple.foundation\/documentation\/Foundation\/NotificationCenter\/MessageIdentifier\/systemTimeZoneDidChange] message, which contains the property [doc:\/\/com.apple.foundation\/documentation\/Foundation\/TimeZone\/SystemTimeZoneDidChangeMessage\/previousTimeZone].\n\nFor use with existing notification code, [doc:\/\/com.apple.foundation\/documentation\/Foundation\/NotificationCenter\/MainActorMessage] and [doc:\/\/com.apple.foundation\/documentation\/Foundation\/NotificationCenter\/AsyncMessage] define helper methods that conforming types implement to convert a message to a corresponding notification and vice versa.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/Foundation\/notification-center-messages\ncrawled: 2025-12-06T01:19:10Z\n---\n\n# Notification center messages\n\n**API Collection**\n\nUse Foundation’s notification center with Swift concurrency.\n\n## Overview\n\nIn Swift, the [doc:\/\/com.apple.foundation\/documentation\/Foundation\/Notification] type is `nonisolated`, even in cases where it’s posted on a known isolation. To provide specific isolation information and better support Swift concurrency, `NotificationCenter` defines two message types. A [doc:\/\/com.apple.foundation\/documentation\/Foundation\/NotificationCenter\/MainActorMessage] binds to the main actor, whereas a [doc:\/\/com.apple.foundation\/documentation\/Foundation\/NotificationCenter\/AsyncMessage] uses an arbitrary isolation. Frameworks extend these types to define distinct messages, typically corresponding to an existing [doc:\/\/com.apple.foundation\/documentation\/Foundation\/Notification\/Name-swift.typealias], that declare instance properties for their values instead of using a `userInfo` dictionary. As a result, messages can conform to [doc:\/\/com.apple.documentation\/documentation\/Swift\/Sendable] when they either don’t use properties or contain only sendable properties.\n\nIf your project only needs to support Swift, you can just use the `Message` types. For projects with both Objective-C and Swift code, define a [doc:\/\/com.apple.foundation\/documentation\/Foundation\/Notification] as well as a corresponding `Message` type.\n\n### Posting and observing messages\n\nYou can post a message with the `post(_:subject:)` method, passing a message instance and optionally providing a subject. To receive messages, add an observer with the `addObserver(of:for:using:)` method. The overloads of this method allow you to observe either messages from a single object or from any object of a given type. Observation ends when you discard the token returned from `addObserver(of:for:using:)` or after an explicit call to [doc:\/\/com.apple.foundation\/documentation\/Foundation\/NotificationCenter\/removeObserver(_:)-2gmm0].\n\nYou can also receive messages as an [doc:\/\/com.apple.documentation\/documentation\/Swift\/AsyncSequence] with the `messages(of:for:bufferSize:)` methods.\n\nSeveral flavors of `addObserver(of:for:using:)` and `messages(of:for:bufferSize:)` take a [doc:\/\/com.apple.foundation\/documentation\/Foundation\/NotificationCenter\/MessageIdentifier], which frameworks may implement to provide a typed, ergonomic experience at the call point for convenience, as described in [https:\/\/github.com\/swiftlang\/swift-evolution\/blob\/main\/proposals\/0299-extend-generic-static-member-lookup.md].\n\n### Using messages with the SDK\n\nMany system frameworks — including Foundation, UIKit, and AppKit — adopt the [doc:\/\/com.apple.foundation\/documentation\/Foundation\/NotificationCenter\/MainActorMessage] and [doc:\/\/com.apple.foundation\/documentation\/Foundation\/NotificationCenter\/AsyncMessage] types to facilitate using their notifications in concurrency-safe Swift code. The following example shows how to observe Foundation’s [doc:\/\/com.apple.foundation\/documentation\/Foundation\/TimeZone] type for the [doc:\/\/com.apple.foundation\/documentation\/Foundation\/NotificationCenter\/MessageIdentifier\/systemTimeZoneDidChange] message, which contains the property [doc:\/\/com.apple.foundation\/documentation\/Foundation\/TimeZone\/SystemTimeZoneDidChangeMessage\/previousTimeZone].\n\n```\n\/\/\/ Note: Store `token` in a property for as long as you intend to observe.\ntoken = NotificationCenter.default.addObserver(of: TimeZone.self,\n                                               for: .systemTimeZoneDidChange)\n{ message in\n    let identifier = message.previousTimeZone?.identifier ?? \"(unknown)\"\n    print(\"Time zone changed from \\(identifier).\")\n}\n```\n\nFor use with existing notification code, [doc:\/\/com.apple.foundation\/documentation\/Foundation\/NotificationCenter\/MainActorMessage] and [doc:\/\/com.apple.foundation\/documentation\/Foundation\/NotificationCenter\/AsyncMessage] define helper methods that conforming types implement to convert a message to a corresponding notification and vice versa.\n\n## Declaring a message\n\n- **NotificationCenter.MainActorMessage**: A protocol for creating types that you can post to a notification center and bind to the main actor.\n- **NotificationCenter.AsyncMessage**: A protocol for creating types that you can post to a notification center, which posts them to an arbitrary isolation.\n\n## Using message identifiers\n\n- **NotificationCenter.MessageIdentifier**: An optional identifier to associate a given message with a given type.\n- **NotificationCenter.BaseMessageIdentifier**: A type for use when defining optional Message identifiers.\n\n## Observing concurrency-safe notifications\n\n- **addObserver(of:for:using:)**: Adds an observer to a center for messages delivered on the main actor with a given subject and identifier.\n- **addObserver(of:for:using:)**: Adds an observer to a center for messages delivered on the main actor with a given subject and identifier.\n- **addObserver(of:for:using:)**: Adds an observer to a center for messages delivered on the main actor with a given subject and message type.\n- **addObserver(of:for:using:)**: Adds an observer to a center for messages delivered asynchronously with a given subject and identifier.\n- **addObserver(of:for:using:)**: Adds an observer to a center for messages delivered asynchronously with a given subject and message type.\n- **addObserver(of:for:using:)**: Adds an observer to a center for messages delivered asynchronously with a given subject and message type.\n- **removeObserver(_:)**: Stops the observation represented by the given observation token.\n- **NotificationCenter.ObservationToken**: A unique token representing a single observer registration in a notification center.\n\n## Receiving notifications as asynchronous sequences\n\n- **messages(of:for:bufferSize:)**: Returns an asynchronous sequence of messages produced by this center for a given subject and identifier.\n- **messages(of:for:bufferSize:)**: Returns an asynchronous sequence of messages produced by this center for a given subject type and identifier.\n- **messages(of:for:bufferSize:)**: Returns an asynchronous sequence of messages produced by this center for a given subject and message type.\n\n## Posting notification messages\n\n- **post(_:subject:)**: Posts a given main actor message to the notification center.\n- **post(_:)**: Posts a given main actor message to the notification center.\n- **post(_:subject:)**: Posts a given asynchronous message to the notification center.\n- **post(_:)**: Posts a given asynchronous message to the notification center.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "A protocol for creating types that you can post to a notification center and bind to the main actor.",
          "name" : "NotificationCenter.MainActorMessage",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NotificationCenter\/MainActorMessage"
        },
        {
          "description" : "A protocol for creating types that you can post to a notification center, which posts them to an arbitrary isolation.",
          "name" : "NotificationCenter.AsyncMessage",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NotificationCenter\/AsyncMessage"
        }
      ],
      "title" : "Declaring a message"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "An optional identifier to associate a given message with a given type.",
          "name" : "NotificationCenter.MessageIdentifier",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NotificationCenter\/MessageIdentifier"
        },
        {
          "description" : "A type for use when defining optional Message identifiers.",
          "name" : "NotificationCenter.BaseMessageIdentifier",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NotificationCenter\/BaseMessageIdentifier"
        }
      ],
      "title" : "Using message identifiers"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Adds an observer to a center for messages delivered on the main actor with a given subject and identifier.",
          "name" : "addObserver(of:for:using:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NotificationCenter\/addObserver(of:for:using:)-4d19x"
        },
        {
          "description" : "Adds an observer to a center for messages delivered on the main actor with a given subject and identifier.",
          "name" : "addObserver(of:for:using:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NotificationCenter\/addObserver(of:for:using:)-90os"
        },
        {
          "description" : "Adds an observer to a center for messages delivered on the main actor with a given subject and message type.",
          "name" : "addObserver(of:for:using:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NotificationCenter\/addObserver(of:for:using:)-56bn4"
        },
        {
          "description" : "Adds an observer to a center for messages delivered asynchronously with a given subject and identifier.",
          "name" : "addObserver(of:for:using:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NotificationCenter\/addObserver(of:for:using:)-twm3"
        },
        {
          "description" : "Adds an observer to a center for messages delivered asynchronously with a given subject and message type.",
          "name" : "addObserver(of:for:using:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NotificationCenter\/addObserver(of:for:using:)-t1wr"
        },
        {
          "description" : "Adds an observer to a center for messages delivered asynchronously with a given subject and message type.",
          "name" : "addObserver(of:for:using:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NotificationCenter\/addObserver(of:for:using:)-64uw3"
        },
        {
          "description" : "Stops the observation represented by the given observation token.",
          "name" : "removeObserver(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NotificationCenter\/removeObserver(_:)-2gmm0"
        },
        {
          "description" : "A unique token representing a single observer registration in a notification center.",
          "name" : "NotificationCenter.ObservationToken",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NotificationCenter\/ObservationToken"
        }
      ],
      "title" : "Observing concurrency-safe notifications"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Returns an asynchronous sequence of messages produced by this center for a given subject and identifier.",
          "name" : "messages(of:for:bufferSize:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NotificationCenter\/messages(of:for:bufferSize:)-4tof0"
        },
        {
          "description" : "Returns an asynchronous sequence of messages produced by this center for a given subject type and identifier.",
          "name" : "messages(of:for:bufferSize:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NotificationCenter\/messages(of:for:bufferSize:)-1ub69"
        },
        {
          "description" : "Returns an asynchronous sequence of messages produced by this center for a given subject and message type.",
          "name" : "messages(of:for:bufferSize:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NotificationCenter\/messages(of:for:bufferSize:)-623kg"
        }
      ],
      "title" : "Receiving notifications as asynchronous sequences"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Posts a given main actor message to the notification center.",
          "name" : "post(_:subject:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NotificationCenter\/post(_:subject:)-87dbk"
        },
        {
          "description" : "Posts a given main actor message to the notification center.",
          "name" : "post(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NotificationCenter\/post(_:)-19s7b"
        },
        {
          "description" : "Posts a given asynchronous message to the notification center.",
          "name" : "post(_:subject:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NotificationCenter\/post(_:subject:)-5271w"
        },
        {
          "description" : "Posts a given asynchronous message to the notification center.",
          "name" : "post(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NotificationCenter\/post(_:)-7ia4j"
        }
      ],
      "title" : "Posting notification messages"
    }
  ],
  "source" : "appleJSON",
  "title" : "Notification center messages",
  "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/notification-center-messages"
}