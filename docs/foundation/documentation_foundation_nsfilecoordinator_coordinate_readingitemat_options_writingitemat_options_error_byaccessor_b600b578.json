{
  "abstract" : "Initiates a read operation that contains a follow-up write operation.",
  "codeExamples" : [

  ],
  "contentHash" : "3a070d295bec41c8ac632e2308b0a0de68a7c29f47a231535fffe3ccdba84a36",
  "crawledAt" : "2025-12-06T02:52:44Z",
  "declaration" : {
    "code" : "func coordinate(readingItemAt readingURL: URL, options readingOptions: NSFileCoordinator.ReadingOptions = [], writingItemAt writingURL: URL, options writingOptions: NSFileCoordinator.WritingOptions = [], error outError: NSErrorPointer, byAccessor readerWriter: (URL, URL) -> Void)",
    "language" : "swift"
  },
  "id" : "B3BC78C5-F8E0-400B-A182-DA322A92573E",
  "kind" : "method",
  "language" : "swift",
  "module" : "Foundation",
  "overview" : "## Discussion\n\nWhen invoking these methods, declare a `__block` variable before the accessor block and initialize it to a value that signals failure, and then inside the accessor block set it to a value that indicates success. If the coordinated operation fails, then the accessor block never runs. The sentinel variable still holds a value that indicates failure, and the [doc:\/\/com.apple.foundation\/documentation\/Foundation\/NSError] out parameter contains a reference that describes the error.\n\nYou use this method to perform a read operation that might also contain a write operation that needs to be coordinated. This method executes synchronously, blocking the current thread until the `readerWriter` block finishes executing. When performing the write operation, you may call the [doc:\/\/com.apple.foundation\/documentation\/Foundation\/NSFileCoordinator\/coordinate(writingItemAt:options:error:byAccessor:)] method from your `readerWriter` block. This method does the canonical lock ordering that is required to prevent a potential deadlock of the file operations.\n\nThis method makes the same calls to file presenters, and has the same general wait behavior, as the [doc:\/\/com.apple.foundation\/documentation\/Foundation\/NSFileCoordinator\/coordinate(readingItemAt:options:error:byAccessor:)] method.",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "tvOS",
    "visionOS",
    "watchOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/Foundation\/NSFileCoordinator\/coordinate(readingItemAt:options:writingItemAt:options:error:byAccessor:)\ncrawled: 2025-12-06T02:52:44Z\n---\n\n# coordinate(readingItemAt:options:writingItemAt:options:error:byAccessor:)\n\n**Instance Method**\n\nInitiates a read operation that contains a follow-up write operation.\n\n## Declaration\n\n```swift\nfunc coordinate(readingItemAt readingURL: URL, options readingOptions: NSFileCoordinator.ReadingOptions = [], writingItemAt writingURL: URL, options writingOptions: NSFileCoordinator.WritingOptions = [], error outError: NSErrorPointer, byAccessor readerWriter: (URL, URL) -> Void)\n```\n\n## Parameters\n\n- **readingURL**: A URL identifying the file or directory to read. If other objects or processes are acting on the item at the URL, the actual URL passed to the block in the `readerWriter` parameter may be different than the one in this parameter.\n- **readingOptions**: One of the reading options described in [doc:\/\/com.apple.foundation\/documentation\/Foundation\/NSFileCoordinator\/ReadingOptions]. If you pass `0` for this parameter, the [doc:\/\/com.apple.foundation\/documentation\/Foundation\/NSFilePresenter\/savePresentedItemChanges(completionHandler:)] method of relevant file presenters is called before your block executes.\n- **writingURL**: A URL identifying the file or directory to write. If other objects or processes are acting on the item at the URL, the actual URL passed to the block in the `readerWriter` parameter may be different than the one in this parameter.\n- **writingOptions**: One of the writing options described in [doc:\/\/com.apple.foundation\/documentation\/Foundation\/NSFileCoordinator\/WritingOptions]. The options you specify partially determine how file presenters are notified and how this file coordinator object waits to execute your block.\n- **outError**: On input, a pointer to a pointer for an error object. If a file presenter encounters an error while preparing for this operation, that error is returned in this parameter and the block in the `readerWriter` parameter is not executed. If you cancel this operation before the `readerWriter` block is executed, this parameter contains an error object on output.\n- **readerWriter**: A [https:\/\/developer.apple.com\/library\/archive\/documentation\/General\/Conceptual\/DevPedia-CocoaCore\/Block.html#\/\/apple_ref\/doc\/uid\/TP40008195-CH3] containing the read and write operations you want to perform in a coordinated manner. This block receives [doc:\/\/com.apple.foundation\/documentation\/Foundation\/NSURL] objects containing the URLs of the items to read and write and returns no value. Always use the URLs passed into the block instead of the values in the `readingURL` and `writingURL` parameters.\n\n## Discussion\n\nWhen invoking these methods, declare a `__block` variable before the accessor block and initialize it to a value that signals failure, and then inside the accessor block set it to a value that indicates success. If the coordinated operation fails, then the accessor block never runs. The sentinel variable still holds a value that indicates failure, and the [doc:\/\/com.apple.foundation\/documentation\/Foundation\/NSError] out parameter contains a reference that describes the error.\n\nYou use this method to perform a read operation that might also contain a write operation that needs to be coordinated. This method executes synchronously, blocking the current thread until the `readerWriter` block finishes executing. When performing the write operation, you may call the [doc:\/\/com.apple.foundation\/documentation\/Foundation\/NSFileCoordinator\/coordinate(writingItemAt:options:error:byAccessor:)] method from your `readerWriter` block. This method does the canonical lock ordering that is required to prevent a potential deadlock of the file operations.\n\nThis method makes the same calls to file presenters, and has the same general wait behavior, as the [doc:\/\/com.apple.foundation\/documentation\/Foundation\/NSFileCoordinator\/coordinate(readingItemAt:options:error:byAccessor:)] method.\n\n## Coordinating File Operations Synchronously\n\n- **coordinate(readingItemAt:options:error:byAccessor:)**: Initiates a read operation on a single file or directory using the specified options.\n- **coordinate(writingItemAt:options:error:byAccessor:)**: Initiates a write operation on a single file or directory using the specified options.\n- **coordinate(writingItemAt:options:writingItemAt:options:error:byAccessor:)**: Initiates a write operation that involves a secondary write operation.\n- **prepare(forReadingItemsAt:options:writingItemsAt:options:error:byAccessor:)**: Prepare to read or write from multiple files in a single batch operation.\n- **item(at:willMoveTo:)**: Announces that your app is moving a file to a new URL.\n- **item(at:didMoveTo:)**: Notifies relevant file presenters that the location of a file or directory changed.\n- **cancel()**: Cancels any active file coordination calls.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Initiates a read operation on a single file or directory using the specified options.",
          "name" : "coordinate(readingItemAt:options:error:byAccessor:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSFileCoordinator\/coordinate(readingItemAt:options:error:byAccessor:)"
        },
        {
          "description" : "Initiates a write operation on a single file or directory using the specified options.",
          "name" : "coordinate(writingItemAt:options:error:byAccessor:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSFileCoordinator\/coordinate(writingItemAt:options:error:byAccessor:)"
        },
        {
          "description" : "Initiates a write operation that involves a secondary write operation.",
          "name" : "coordinate(writingItemAt:options:writingItemAt:options:error:byAccessor:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSFileCoordinator\/coordinate(writingItemAt:options:writingItemAt:options:error:byAccessor:)"
        },
        {
          "description" : "Prepare to read or write from multiple files in a single batch operation.",
          "name" : "prepare(forReadingItemsAt:options:writingItemsAt:options:error:byAccessor:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSFileCoordinator\/prepare(forReadingItemsAt:options:writingItemsAt:options:error:byAccessor:)"
        },
        {
          "description" : "Announces that your app is moving a file to a new URL.",
          "name" : "item(at:willMoveTo:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSFileCoordinator\/item(at:willMoveTo:)"
        },
        {
          "description" : "Notifies relevant file presenters that the location of a file or directory changed.",
          "name" : "item(at:didMoveTo:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSFileCoordinator\/item(at:didMoveTo:)"
        },
        {
          "description" : "Cancels any active file coordination calls.",
          "name" : "cancel()",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSFileCoordinator\/cancel()"
        }
      ],
      "title" : "Coordinating File Operations Synchronously"
    }
  ],
  "source" : "appleJSON",
  "title" : "coordinate(readingItemAt:options:writingItemAt:options:error:byAccessor:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSFileCoordinator\/coordinate(readingItemAt:options:writingItemAt:options:error:byAccessor:)"
}