{
  "abstract" : "Registers the selector of the specified target to implement a single undo operation that the target receives.",
  "codeExamples" : [
    {
      "code" : "class Garden {\n    typealias FlowerName = String\n\n    var flowers: [FlowerName: Int]\n    var manager = UndoManager()\n\n    init(flowers: [FlowerName: Int]) {\n        self.flowers = flowers\n    }\n    @objc func plant(flower: FlowerName) {\n        flowers[flower, default: 0] += 1\n        manager.registerUndo(withTarget: self, selector: #selector(pluck), object: flower)\n    }\n    @objc func pluck(flower: FlowerName) {\n        flowers[flower, default: 0] -= 1\n        manager.registerUndo(withTarget: self, selector: #selector(plant), object: flower)\n    }\n}\nvar garden = Garden(flowers: [\"orchid\" : 2, \"lavender\": 1, \"violet\": 2])\ngarden.pluck(flower: \"orchid\")\n\/\/garden.flowers == [\"orchid\" : 1, \"lavender\": 1, \"violet\": 2]\ngarden.manager.undo()\n\/\/garden.flowers == [\"orchid\" : 2, \"lavender\": 1, \"violet\": 2]",
      "language" : "swift"
    }
  ],
  "contentHash" : "2a2d75560846f5f68d573c85c4002612cb96fd402d2643743b65ffaaf034dbe1",
  "crawledAt" : "2025-12-05T20:58:53Z",
  "declaration" : {
    "code" : "@MainActor func registerUndo(withTarget target: Any, selector: Selector, object: Any?)",
    "language" : "swift"
  },
  "id" : "1840926D-54F5-4F9F-B349-53977A9B4FE3",
  "kind" : "method",
  "language" : "swift",
  "module" : "Foundation",
  "overview" : "## Discussion\n\nUse [doc:\/\/com.apple.foundation\/documentation\/Foundation\/UndoManager\/registerUndo(withTarget:selector:object:)] to register a selector for an undo operation.  To register a selector on the undo stack, you also need to make the method available to the Objective-C runtime by applying the @`objc` attribute to the method.  For more on how to create a selector, see [https:\/\/developer.apple.com\/library\/archive\/documentation\/Swift\/Conceptual\/BuildingCocoaApps\/InteractingWithObjective-CAPIs.html#\/\/apple_ref\/doc\/uid\/TP40014216-CH4-ID59].\n\nCalling this method also clears the redo stack.\n\nThe following example demonstrates how to register and use a selector on the undo stack by modeling a `Garden` class with two methods: `plant(flower:)` and `pluck(flower:)`.  The `plant(flower:)` method removes a flower from the garden while `pluck(flower:)` adds a flower such that effectively, the two methods are inverse operations of each other.  This inverse quality makes it ideal to register `plant(flower:)` and `pluck(flower:)` to be each other’s undo operation.",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "tvOS",
    "visionOS",
    "watchOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/Foundation\/UndoManager\/registerUndo(withTarget:selector:object:)\ncrawled: 2025-12-05T20:58:53Z\n---\n\n# registerUndo(withTarget:selector:object:)\n\n**Instance Method**\n\nRegisters the selector of the specified target to implement a single undo operation that the target receives.\n\n## Declaration\n\n```swift\n@MainActor func registerUndo(withTarget target: Any, selector: Selector, object: Any?)\n```\n\n## Parameters\n\n- **target**: The target of the undo operation.\n\nThe undo manager maintains an unowned reference to `target` to prevent retain cycles.\n- **selector**: The selector for the undo operation.\n- **object**: The argument sent with the selector.\n\nThe undo manager maintains a strong reference to `anO``bject`.\n\n## Discussion\n\nUse [doc:\/\/com.apple.foundation\/documentation\/Foundation\/UndoManager\/registerUndo(withTarget:selector:object:)] to register a selector for an undo operation.  To register a selector on the undo stack, you also need to make the method available to the Objective-C runtime by applying the @`objc` attribute to the method.  For more on how to create a selector, see [https:\/\/developer.apple.com\/library\/archive\/documentation\/Swift\/Conceptual\/BuildingCocoaApps\/InteractingWithObjective-CAPIs.html#\/\/apple_ref\/doc\/uid\/TP40014216-CH4-ID59].\n\nCalling this method also clears the redo stack.\n\nThe following example demonstrates how to register and use a selector on the undo stack by modeling a `Garden` class with two methods: `plant(flower:)` and `pluck(flower:)`.  The `plant(flower:)` method removes a flower from the garden while `pluck(flower:)` adds a flower such that effectively, the two methods are inverse operations of each other.  This inverse quality makes it ideal to register `plant(flower:)` and `pluck(flower:)` to be each other’s undo operation.\n\n```swift\nclass Garden {\n    typealias FlowerName = String\n\n    var flowers: [FlowerName: Int]\n    var manager = UndoManager()\n\n    init(flowers: [FlowerName: Int]) {\n        self.flowers = flowers\n    }\n    @objc func plant(flower: FlowerName) {\n        flowers[flower, default: 0] += 1\n        manager.registerUndo(withTarget: self, selector: #selector(pluck), object: flower)\n    }\n    @objc func pluck(flower: FlowerName) {\n        flowers[flower, default: 0] -= 1\n        manager.registerUndo(withTarget: self, selector: #selector(plant), object: flower)\n    }\n}\nvar garden = Garden(flowers: [\"orchid\" : 2, \"lavender\": 1, \"violet\": 2])\ngarden.pluck(flower: \"orchid\")\n\/\/garden.flowers == [\"orchid\" : 1, \"lavender\": 1, \"violet\": 2]\ngarden.manager.undo()\n\/\/garden.flowers == [\"orchid\" : 2, \"lavender\": 1, \"violet\": 2]\n```\n\n\n\n## Related Documentation\n\n- **undoNestedGroup()**: Performs the undo operations in the last undo group (whether top-level or nested), recording the operations on the redo stack as a single group.\n- **groupingLevel**: The number of nested undo groups (or redo groups, if redo is the most recent operation) in the current event loop.\n- **Introduction to Undo Architecture**\n\n## Registering undo operations\n\n- **registerUndo(withTarget:handler:)**: Registers the specified closure to implement a single undo operation that the target receives.\n- **prepare(withInvocationTarget:)**: Prepares the undo manager for invocation-based undo with the given target as the subject of the next undo operation.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Performs the undo operations in the last undo group (whether top-level or nested), recording the operations on the redo stack as a single group.",
          "name" : "undoNestedGroup()",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/UndoManager\/undoNestedGroup()"
        },
        {
          "description" : "The number of nested undo groups (or redo groups, if redo is the most recent operation) in the current event loop.",
          "name" : "groupingLevel",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/UndoManager\/groupingLevel"
        },
        {
          "name" : "Introduction to Undo Architecture"
        }
      ],
      "title" : "Related Documentation"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Registers the specified closure to implement a single undo operation that the target receives.",
          "name" : "registerUndo(withTarget:handler:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/UndoManager\/registerUndo(withTarget:handler:)"
        },
        {
          "description" : "Prepares the undo manager for invocation-based undo with the given target as the subject of the next undo operation.",
          "name" : "prepare(withInvocationTarget:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/UndoManager\/prepare(withInvocationTarget:)"
        }
      ],
      "title" : "Registering undo operations"
    }
  ],
  "source" : "appleJSON",
  "title" : "registerUndo(withTarget:selector:object:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/UndoManager\/registerUndo(withTarget:selector:object:)"
}