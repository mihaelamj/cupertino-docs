{
  "abstract" : "Creates a task that performs an HTTP request for the specified URL request object, uploads the provided data, and calls a handler upon completion.",
  "codeExamples" : [

  ],
  "contentHash" : "adcb2dfd9986cfc5d3e48cf7788d253a7580398e1f9b58df4778f741619e275d",
  "crawledAt" : "2025-12-04T19:01:50Z",
  "declaration" : {
    "code" : "func uploadTask(with request: URLRequest, from bodyData: Data?, completionHandler: @escaping (Data?, URLResponse?, (any Error)?) -> Void) -> URLSessionUploadTask",
    "language" : "swift"
  },
  "id" : "DBC19F70-DAFA-4449-AAFD-CA6B6CC135FC",
  "kind" : "method",
  "language" : "swift",
  "module" : "Foundation",
  "overview" : "## Return Value\n\nThe new session upload task.\n\n## Discussion\n\nAn HTTP upload request is any request that contains a request body, such as a `POST` or `PUT` request. Upload tasks require you to create a request object so that you can provide metadata for the upload, like HTTP request headers.\n\nUnlike [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSession\/uploadTask(with:from:)], this method returns the response body after it has been received in full, and does not require you to write a custom delegate to obtain the response body.\n\nBy using a completion handler, the task bypasses calls to delegate methods for response and data delivery, and instead provides any resulting data, response, or error inside the completion handler. Delegate methods for handling authentication challenges, however, are still called.\n\nTypically you pass a `nil` completion handler only when creating tasks in sessions whose delegates include a [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionDataDelegate\/urlSession(_:dataTask:didReceive:)] method. However, if you do not need the response data, use key-value observing to watch for changes to the task’s status to determine when it completes.\n\nAfter you create the task, you must start it by calling its [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionTask\/resume()] method.\n\nIf the request completes successfully, the `data` parameter of the completion handler block contains the resource data, and the `error` parameter is `nil`. If the request fails, the `data` parameter is `nil,` and the `error` parameter contains information about the failure. If a response from the server is received, regardless of whether the request completes successfully or fails, the `response` parameter contains that information.",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "tvOS",
    "visionOS",
    "watchOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/Foundation\/URLSession\/uploadTask(with:from:completionHandler:)\ncrawled: 2025-12-04T19:01:50Z\n---\n\n# uploadTask(with:from:completionHandler:)\n\n**Instance Method**\n\nCreates a task that performs an HTTP request for the specified URL request object, uploads the provided data, and calls a handler upon completion.\n\n## Declaration\n\n```swift\nfunc uploadTask(with request: URLRequest, from bodyData: Data?, completionHandler: @escaping (Data?, URLResponse?, (any Error)?) -> Void) -> URLSessionUploadTask\n```\n\n## Parameters\n\n- **request**: A URL request object that provides the URL, cache policy, request type, and so on. The body stream and body data in this request object are ignored.\n- **bodyData**: The body data for the request.\n- **completionHandler**: The completion handler to call when the load request is complete. This handler is executed on the delegate queue.\n\nIf you pass `nil`, only the session delegate methods are called when the task completes, making this method equivalent to the [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSession\/uploadTask(with:from:)] method.\n\nThis completion handler takes the following parameters:\n\n\n\n## Return Value\n\nThe new session upload task.\n\n## Discussion\n\nAn HTTP upload request is any request that contains a request body, such as a `POST` or `PUT` request. Upload tasks require you to create a request object so that you can provide metadata for the upload, like HTTP request headers.\n\nUnlike [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSession\/uploadTask(with:from:)], this method returns the response body after it has been received in full, and does not require you to write a custom delegate to obtain the response body.\n\nBy using a completion handler, the task bypasses calls to delegate methods for response and data delivery, and instead provides any resulting data, response, or error inside the completion handler. Delegate methods for handling authentication challenges, however, are still called.\n\nTypically you pass a `nil` completion handler only when creating tasks in sessions whose delegates include a [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionDataDelegate\/urlSession(_:dataTask:didReceive:)] method. However, if you do not need the response data, use key-value observing to watch for changes to the task’s status to determine when it completes.\n\nAfter you create the task, you must start it by calling its [doc:\/\/com.apple.foundation\/documentation\/Foundation\/URLSessionTask\/resume()] method.\n\nIf the request completes successfully, the `data` parameter of the completion handler block contains the resource data, and the `error` parameter is `nil`. If the request fails, the `data` parameter is `nil,` and the `error` parameter contains information about the failure. If a response from the server is received, regardless of whether the request completes successfully or fails, the `response` parameter contains that information.\n\n## Adding upload tasks to a session\n\n- **Building a resumable upload server with SwiftNIO**: Support HTTP resumable upload protocol in SwiftNIO by translating resumable uploads to regular uploads.\n- **uploadTask(with:from:)**: Creates a task that performs an HTTP request for the specified URL request object and uploads the provided data.\n- **uploadTask(with:fromFile:)**: Creates a task that performs an HTTP request for uploading the specified file.\n- **uploadTask(with:fromFile:completionHandler:)**: Creates a task that performs an HTTP request for uploading the specified file, then calls a handler upon completion.\n- **uploadTask(withStreamedRequest:)**: Creates a task that performs an HTTP request for uploading data based on the specified URL request.\n- **uploadTask(withResumeData:)**: Creates an upload task from a resume data blob. Requires the server to support the latest resumable uploads Internet-Draft from the HTTP Working Group, found at https:\/\/datatracker.ietf.org\/doc\/draft-ietf-httpbis-resumable-upload\/ If resuming from an upload file, the file must still exist and be unmodified. If the upload cannot be successfully resumed, URLSession:task:didCompleteWithError: will be called.\n- **uploadTask(withResumeData:completionHandler:)**: Creates a URLSessionUploadTask from a resume data blob. If resuming from an upload file, the file must still exist and be unmodified.\n- **URLSessionUploadTask**: A URL session task that uploads data to the network in a request body.\n- **URLSessionDataDelegate**: A protocol that defines methods that URL session instances call on their delegates to handle task-level events specific to data and upload tasks.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Support HTTP resumable upload protocol in SwiftNIO by translating resumable uploads to regular uploads.",
          "name" : "Building a resumable upload server with SwiftNIO",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/building-a-resumable-upload-server-with-swiftnio"
        },
        {
          "description" : "Creates a task that performs an HTTP request for the specified URL request object and uploads the provided data.",
          "name" : "uploadTask(with:from:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/URLSession\/uploadTask(with:from:)"
        },
        {
          "description" : "Creates a task that performs an HTTP request for uploading the specified file.",
          "name" : "uploadTask(with:fromFile:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/URLSession\/uploadTask(with:fromFile:)"
        },
        {
          "description" : "Creates a task that performs an HTTP request for uploading the specified file, then calls a handler upon completion.",
          "name" : "uploadTask(with:fromFile:completionHandler:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/URLSession\/uploadTask(with:fromFile:completionHandler:)"
        },
        {
          "description" : "Creates a task that performs an HTTP request for uploading data based on the specified URL request.",
          "name" : "uploadTask(withStreamedRequest:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/URLSession\/uploadTask(withStreamedRequest:)"
        },
        {
          "description" : "Creates an upload task from a resume data blob. Requires the server to support the latest resumable uploads Internet-Draft from the HTTP Working Group, found at https:\/\/datatracker.ietf.org\/doc\/draft-ietf-httpbis-resumable-upload\/ If resuming from an upload file, the file must still exist and be unmodified. If the upload cannot be successfully resumed, URLSession:task:didCompleteWithError: will be called.",
          "name" : "uploadTask(withResumeData:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/URLSession\/uploadTask(withResumeData:)"
        },
        {
          "description" : "Creates a URLSessionUploadTask from a resume data blob. If resuming from an upload file, the file must still exist and be unmodified.",
          "name" : "uploadTask(withResumeData:completionHandler:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/URLSession\/uploadTask(withResumeData:completionHandler:)"
        },
        {
          "description" : "A URL session task that uploads data to the network in a request body.",
          "name" : "URLSessionUploadTask",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/URLSessionUploadTask"
        },
        {
          "description" : "A protocol that defines methods that URL session instances call on their delegates to handle task-level events specific to data and upload tasks.",
          "name" : "URLSessionDataDelegate",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/URLSessionDataDelegate"
        }
      ],
      "title" : "Adding upload tasks to a session"
    }
  ],
  "source" : "appleJSON",
  "title" : "uploadTask(with:from:completionHandler:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/URLSession\/uploadTask(with:from:completionHandler:)"
}