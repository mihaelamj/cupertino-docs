{
  "abstract" : "A regex component that attempts to transform a matched substring, saving the result if successful and backtracking if the transformation fails.",
  "codeExamples" : [
    {
      "code" : "let transactions = \"\"\"\n    CREDIT     109912311421    Payroll   $69.73\n    CREDIT     105912031123    Travel   $121.54\n    DEBIT      107733291022    Refund    $8.42\n    \"\"\"\nlet transactionLimit = 100.0\n\nlet regex = Regex {\n    \"$\"\n    TryCapture {\n        OneOrMore(.digit)\n        \".\"\n        Repeat(.digit, count: 2)\n    } transform: { str -> Double? in\n        let value = Double(str)!\n        if value > transactionLimit {\n            return value\n        }\n        return nil\n    }\n    Anchor.endOfLine\n}",
      "language" : "swift"
    },
    {
      "code" : "\/\/ The type of each match's output is `(Substring, Double)`.\nfor match in transactions.matches(of: regex) {\n    print(\"Transaction amount: \\(match.1)\")\n}\n\/\/ Prints \"Transaction amount: 121.54\"",
      "language" : "swift"
    }
  ],
  "conformsTo" : [
    "Copyable",
    "RegexComponent"
  ],
  "contentHash" : "fbe74f99ad2ecd01279040c7bdaa3447ade93ec6d2a0700da40e256737b5cd27",
  "crawledAt" : "2025-12-01T11:59:12Z",
  "declaration" : {
    "code" : "struct TryCapture<Output>",
    "language" : "swift"
  },
  "id" : "F090B568-F40F-4162-A2FA-BF55E0ACFBEB",
  "kind" : "struct",
  "module" : "RegexBuilder",
  "overview" : "## Overview\n\nYou use a `TryCapture` component to capture part of a match as a transformed value, when a failure to transform should mean the regex continues matching, backtracking from that point if necessary.\n\nThe code below demonstrates using `TryCapture` to include a test that the `Double` value of a capture is over a limit. In the example, `regex` matches a dollar sign (`\"$\"`) followed by one or more digits, a period (`\".\"`), and then two additional digits, as long as that pattern appears at the end of the line. The `TryCapture` block wraps the digits and period, capturing that part of the match separately and passing it to its `transform` closure. That closure converts the captured portion of the match, converts it to a `Double`, and only returns a non-`nil` value if it is over the transaction limit.\n\nWhen the `TryCapture` block’s `transform` closure processes the three different amounts in the list of transactions, it only returns a non-`nil` value for the $121.54 transaction. Even though the capture returns an optional `Double` value, the captured value is non-optional.\n\nThrowing an error from a `transform` closure aborts matching and propagates the error out to the caller. If you want to capture the `nil` results of a failable transformation, instead of continuing a search, use [doc:\/\/com.apple.Swift\/documentation\/RegexBuilder\/Capture] instead of `TryCapture`.",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "tvOS",
    "visionOS",
    "watchOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/RegexBuilder\/TryCapture\ncrawled: 2025-12-01T11:59:12Z\n---\n\n# TryCapture\n\n**Structure**\n\nA regex component that attempts to transform a matched substring, saving the result if successful and backtracking if the transformation fails.\n\n## Declaration\n\n```swift\nstruct TryCapture<Output>\n```\n\n## Overview\n\nYou use a `TryCapture` component to capture part of a match as a transformed value, when a failure to transform should mean the regex continues matching, backtracking from that point if necessary.\n\nThe code below demonstrates using `TryCapture` to include a test that the `Double` value of a capture is over a limit. In the example, `regex` matches a dollar sign (`\"$\"`) followed by one or more digits, a period (`\".\"`), and then two additional digits, as long as that pattern appears at the end of the line. The `TryCapture` block wraps the digits and period, capturing that part of the match separately and passing it to its `transform` closure. That closure converts the captured portion of the match, converts it to a `Double`, and only returns a non-`nil` value if it is over the transaction limit.\n\n```swift\nlet transactions = \"\"\"\n    CREDIT     109912311421    Payroll   $69.73\n    CREDIT     105912031123    Travel   $121.54\n    DEBIT      107733291022    Refund    $8.42\n    \"\"\"\nlet transactionLimit = 100.0\n\nlet regex = Regex {\n    \"$\"\n    TryCapture {\n        OneOrMore(.digit)\n        \".\"\n        Repeat(.digit, count: 2)\n    } transform: { str -> Double? in\n        let value = Double(str)!\n        if value > transactionLimit {\n            return value\n        }\n        return nil\n    }\n    Anchor.endOfLine\n}\n```\n\nWhen the `TryCapture` block’s `transform` closure processes the three different amounts in the list of transactions, it only returns a non-`nil` value for the $121.54 transaction. Even though the capture returns an optional `Double` value, the captured value is non-optional.\n\n```swift\n\/\/ The type of each match's output is `(Substring, Double)`.\nfor match in transactions.matches(of: regex) {\n    print(\"Transaction amount: \\(match.1)\")\n}\n\/\/ Prints \"Transaction amount: 121.54\"\n```\n\nThrowing an error from a `transform` closure aborts matching and propagates the error out to the caller. If you want to capture the `nil` results of a failable transformation, instead of continuing a search, use [doc:\/\/com.apple.Swift\/documentation\/RegexBuilder\/Capture] instead of `TryCapture`.\n\n## Initializers\n\n- **init(_:as:transform:)**: Creates a capture for the given component using the specified reference, attempting to transform with the given closure.\n- **init(_:as:transform:)**: Creates a capture for the given component using the specified reference, attempting to transform with the given closure.\n- **init(_:as:transform:)**: Creates a capture for the given component using the specified reference, attempting to transform with the given closure.\n- **init(_:as:transform:)**: Creates a capture for the given component using the specified reference, attempting to transform with the given closure.\n- **init(_:as:transform:)**: Creates a capture for the given component using the specified reference, attempting to transform with the given closure.\n- **init(_:as:transform:)**: Creates a capture for the given component using the specified reference, attempting to transform with the given closure.\n- **init(_:as:transform:)**: Creates a capture for the given component using the specified reference, attempting to transform with the given closure.\n- **init(_:as:transform:)**: Creates a capture for the given component using the specified reference, attempting to transform with the given closure.\n- **init(_:as:transform:)**: Creates a capture for the given component using the specified reference, attempting to transform with the given closure.\n- **init(_:as:transform:)**: Creates a capture for the given component using the specified reference, attempting to transform with the given closure.\n- **init(_:as:transform:)**: Creates a capture for the given component using the specified reference, attempting to transform with the given closure.\n- **init(_:transform:)**: Creates a capture for the given component, attempting to transform with the given closure.\n- **init(_:transform:)**: Creates a capture for the given component, attempting to transform with the given closure.\n- **init(_:transform:)**: Creates a capture for the given component, attempting to transform with the given closure.\n- **init(_:transform:)**: Creates a capture for the given component, attempting to transform with the given closure.\n- **init(_:transform:)**: Creates a capture for the given component, attempting to transform with the given closure.\n- **init(_:transform:)**: Creates a capture for the given component, attempting to transform with the given closure.\n- **init(_:transform:)**: Creates a capture for the given component, attempting to transform with the given closure.\n- **init(_:transform:)**: Creates a capture for the given component, attempting to transform with the given closure.\n- **init(_:transform:)**: Creates a capture for the given component, attempting to transform with the given closure.\n- **init(_:transform:)**: Creates a capture for the given component, attempting to transform with the given closure.\n- **init(_:transform:)**: Creates a capture for the given component, attempting to transform with the given closure.\n- **init(_:transform:)**: Creates a capture for the given component, attempting to transform with the given closure.\n- **init(_:transform:)**: Creates a capture for the given component, attempting to transform with the given closure.\n- **init(_:transform:)**: Creates a capture for the given component, attempting to transform with the given closure.\n- **init(_:transform:)**: Creates a capture for the given component, attempting to transform with the given closure.\n- **init(_:transform:)**: Creates a capture for the given component, attempting to transform with the given closure.\n- **init(_:transform:)**: Creates a capture for the given component, attempting to transform with the given closure.\n- **init(_:transform:)**: Creates a capture for the given component, attempting to transform with the given closure.\n- **init(_:transform:)**: Creates a capture for the given component, attempting to transform with the given closure.\n- **init(_:transform:)**: Creates a capture for the given component, attempting to transform with the given closure.\n- **init(_:transform:)**: Creates a capture for the given component, attempting to transform with the given closure.\n- **init(_:transform:)**: Creates a capture for the given component, attempting to transform with the given closure.\n- **init(as:_:transform:)**: Creates a capture for the given component using the specified reference, attempting to transform with the given closure.\n- **init(as:_:transform:)**: Creates a capture for the given component using the specified reference, attempting to transform with the given closure.\n- **init(as:_:transform:)**: Creates a capture for the given component using the specified reference, attempting to transform with the given closure.\n- **init(as:_:transform:)**: Creates a capture for the given component using the specified reference, attempting to transform with the given closure.\n- **init(as:_:transform:)**: Creates a capture for the given component using the specified reference, attempting to transform with the given closure.\n- **init(as:_:transform:)**: Creates a capture for the given component using the specified reference, attempting to transform with the given closure.\n- **init(as:_:transform:)**: Creates a capture for the given component using the specified reference, attempting to transform with the given closure.\n- **init(as:_:transform:)**: Creates a capture for the given component using the specified reference, attempting to transform with the given closure.\n- **init(as:_:transform:)**: Creates a capture for the given component using the specified reference, attempting to transform with the given closure.\n- **init(as:_:transform:)**: Creates a capture for the given component using the specified reference, attempting to transform with the given closure.\n- **init(as:_:transform:)**: Creates a capture for the given component using the specified reference, attempting to transform with the given closure.\n\n## Captures\n\n- **Capture**: A regex component that saves the matched substring, or a transformed result, for access in a regex match.\n- **Reference**: A reference to a captured portion of a regular expression.\n\n## Conforms To\n\n- Copyable\n- RegexComponent\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Creates a capture for the given component using the specified reference, attempting to transform with the given closure.",
          "name" : "init(_:as:transform:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/RegexBuilder\/TryCapture\/init(_:as:transform:)-2a4o2"
        },
        {
          "description" : "Creates a capture for the given component using the specified reference, attempting to transform with the given closure.",
          "name" : "init(_:as:transform:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/RegexBuilder\/TryCapture\/init(_:as:transform:)-2bjbf"
        },
        {
          "description" : "Creates a capture for the given component using the specified reference, attempting to transform with the given closure.",
          "name" : "init(_:as:transform:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/RegexBuilder\/TryCapture\/init(_:as:transform:)-41r67"
        },
        {
          "description" : "Creates a capture for the given component using the specified reference, attempting to transform with the given closure.",
          "name" : "init(_:as:transform:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/RegexBuilder\/TryCapture\/init(_:as:transform:)-4kzw6"
        },
        {
          "description" : "Creates a capture for the given component using the specified reference, attempting to transform with the given closure.",
          "name" : "init(_:as:transform:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/RegexBuilder\/TryCapture\/init(_:as:transform:)-674ml"
        },
        {
          "description" : "Creates a capture for the given component using the specified reference, attempting to transform with the given closure.",
          "name" : "init(_:as:transform:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/RegexBuilder\/TryCapture\/init(_:as:transform:)-7tqt7"
        },
        {
          "description" : "Creates a capture for the given component using the specified reference, attempting to transform with the given closure.",
          "name" : "init(_:as:transform:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/RegexBuilder\/TryCapture\/init(_:as:transform:)-88lf1"
        },
        {
          "description" : "Creates a capture for the given component using the specified reference, attempting to transform with the given closure.",
          "name" : "init(_:as:transform:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/RegexBuilder\/TryCapture\/init(_:as:transform:)-89xrg"
        },
        {
          "description" : "Creates a capture for the given component using the specified reference, attempting to transform with the given closure.",
          "name" : "init(_:as:transform:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/RegexBuilder\/TryCapture\/init(_:as:transform:)-8m89r"
        },
        {
          "description" : "Creates a capture for the given component using the specified reference, attempting to transform with the given closure.",
          "name" : "init(_:as:transform:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/RegexBuilder\/TryCapture\/init(_:as:transform:)-9p9ig"
        },
        {
          "description" : "Creates a capture for the given component using the specified reference, attempting to transform with the given closure.",
          "name" : "init(_:as:transform:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/RegexBuilder\/TryCapture\/init(_:as:transform:)-z449"
        },
        {
          "description" : "Creates a capture for the given component, attempting to transform with the given closure.",
          "name" : "init(_:transform:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/RegexBuilder\/TryCapture\/init(_:transform:)-18te8"
        },
        {
          "description" : "Creates a capture for the given component, attempting to transform with the given closure.",
          "name" : "init(_:transform:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/RegexBuilder\/TryCapture\/init(_:transform:)-1oiex"
        },
        {
          "description" : "Creates a capture for the given component, attempting to transform with the given closure.",
          "name" : "init(_:transform:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/RegexBuilder\/TryCapture\/init(_:transform:)-1q8tj"
        },
        {
          "description" : "Creates a capture for the given component, attempting to transform with the given closure.",
          "name" : "init(_:transform:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/RegexBuilder\/TryCapture\/init(_:transform:)-2akes"
        },
        {
          "description" : "Creates a capture for the given component, attempting to transform with the given closure.",
          "name" : "init(_:transform:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/RegexBuilder\/TryCapture\/init(_:transform:)-2cmjm"
        },
        {
          "description" : "Creates a capture for the given component, attempting to transform with the given closure.",
          "name" : "init(_:transform:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/RegexBuilder\/TryCapture\/init(_:transform:)-2o3dd"
        },
        {
          "description" : "Creates a capture for the given component, attempting to transform with the given closure.",
          "name" : "init(_:transform:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/RegexBuilder\/TryCapture\/init(_:transform:)-35erc"
        },
        {
          "description" : "Creates a capture for the given component, attempting to transform with the given closure.",
          "name" : "init(_:transform:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/RegexBuilder\/TryCapture\/init(_:transform:)-49jj"
        },
        {
          "description" : "Creates a capture for the given component, attempting to transform with the given closure.",
          "name" : "init(_:transform:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/RegexBuilder\/TryCapture\/init(_:transform:)-4ctec"
        },
        {
          "description" : "Creates a capture for the given component, attempting to transform with the given closure.",
          "name" : "init(_:transform:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/RegexBuilder\/TryCapture\/init(_:transform:)-4fb8m"
        },
        {
          "description" : "Creates a capture for the given component, attempting to transform with the given closure.",
          "name" : "init(_:transform:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/RegexBuilder\/TryCapture\/init(_:transform:)-55y26"
        },
        {
          "description" : "Creates a capture for the given component, attempting to transform with the given closure.",
          "name" : "init(_:transform:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/RegexBuilder\/TryCapture\/init(_:transform:)-5blap"
        },
        {
          "description" : "Creates a capture for the given component, attempting to transform with the given closure.",
          "name" : "init(_:transform:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/RegexBuilder\/TryCapture\/init(_:transform:)-5f28q"
        },
        {
          "description" : "Creates a capture for the given component, attempting to transform with the given closure.",
          "name" : "init(_:transform:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/RegexBuilder\/TryCapture\/init(_:transform:)-5qk0r"
        },
        {
          "description" : "Creates a capture for the given component, attempting to transform with the given closure.",
          "name" : "init(_:transform:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/RegexBuilder\/TryCapture\/init(_:transform:)-631wm"
        },
        {
          "description" : "Creates a capture for the given component, attempting to transform with the given closure.",
          "name" : "init(_:transform:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/RegexBuilder\/TryCapture\/init(_:transform:)-7vgez"
        },
        {
          "description" : "Creates a capture for the given component, attempting to transform with the given closure.",
          "name" : "init(_:transform:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/RegexBuilder\/TryCapture\/init(_:transform:)-7w4kc"
        },
        {
          "description" : "Creates a capture for the given component, attempting to transform with the given closure.",
          "name" : "init(_:transform:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/RegexBuilder\/TryCapture\/init(_:transform:)-8d6xo"
        },
        {
          "description" : "Creates a capture for the given component, attempting to transform with the given closure.",
          "name" : "init(_:transform:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/RegexBuilder\/TryCapture\/init(_:transform:)-8kgfm"
        },
        {
          "description" : "Creates a capture for the given component, attempting to transform with the given closure.",
          "name" : "init(_:transform:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/RegexBuilder\/TryCapture\/init(_:transform:)-951zx"
        },
        {
          "description" : "Creates a capture for the given component, attempting to transform with the given closure.",
          "name" : "init(_:transform:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/RegexBuilder\/TryCapture\/init(_:transform:)-9oonc"
        },
        {
          "description" : "Creates a capture for the given component, attempting to transform with the given closure.",
          "name" : "init(_:transform:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/RegexBuilder\/TryCapture\/init(_:transform:)-t0lx"
        },
        {
          "description" : "Creates a capture for the given component using the specified reference, attempting to transform with the given closure.",
          "name" : "init(as:_:transform:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/RegexBuilder\/TryCapture\/init(as:_:transform:)-2nfnn"
        },
        {
          "description" : "Creates a capture for the given component using the specified reference, attempting to transform with the given closure.",
          "name" : "init(as:_:transform:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/RegexBuilder\/TryCapture\/init(as:_:transform:)-5tqfd"
        },
        {
          "description" : "Creates a capture for the given component using the specified reference, attempting to transform with the given closure.",
          "name" : "init(as:_:transform:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/RegexBuilder\/TryCapture\/init(as:_:transform:)-6vy4m"
        },
        {
          "description" : "Creates a capture for the given component using the specified reference, attempting to transform with the given closure.",
          "name" : "init(as:_:transform:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/RegexBuilder\/TryCapture\/init(as:_:transform:)-7di2q"
        },
        {
          "description" : "Creates a capture for the given component using the specified reference, attempting to transform with the given closure.",
          "name" : "init(as:_:transform:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/RegexBuilder\/TryCapture\/init(as:_:transform:)-7j2mj"
        },
        {
          "description" : "Creates a capture for the given component using the specified reference, attempting to transform with the given closure.",
          "name" : "init(as:_:transform:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/RegexBuilder\/TryCapture\/init(as:_:transform:)-7pe1b"
        },
        {
          "description" : "Creates a capture for the given component using the specified reference, attempting to transform with the given closure.",
          "name" : "init(as:_:transform:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/RegexBuilder\/TryCapture\/init(as:_:transform:)-85qkx"
        },
        {
          "description" : "Creates a capture for the given component using the specified reference, attempting to transform with the given closure.",
          "name" : "init(as:_:transform:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/RegexBuilder\/TryCapture\/init(as:_:transform:)-8byjf"
        },
        {
          "description" : "Creates a capture for the given component using the specified reference, attempting to transform with the given closure.",
          "name" : "init(as:_:transform:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/RegexBuilder\/TryCapture\/init(as:_:transform:)-8xl17"
        },
        {
          "description" : "Creates a capture for the given component using the specified reference, attempting to transform with the given closure.",
          "name" : "init(as:_:transform:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/RegexBuilder\/TryCapture\/init(as:_:transform:)-b8x0"
        },
        {
          "description" : "Creates a capture for the given component using the specified reference, attempting to transform with the given closure.",
          "name" : "init(as:_:transform:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/RegexBuilder\/TryCapture\/init(as:_:transform:)-p58t"
        }
      ],
      "title" : "Initializers"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "A regex component that saves the matched substring, or a transformed result, for access in a regex match.",
          "name" : "Capture",
          "url" : "https:\/\/developer.apple.com\/documentation\/RegexBuilder\/Capture"
        },
        {
          "description" : "A reference to a captured portion of a regular expression.",
          "name" : "Reference",
          "url" : "https:\/\/developer.apple.com\/documentation\/RegexBuilder\/Reference"
        }
      ],
      "title" : "Captures"
    }
  ],
  "source" : "appleJSON",
  "title" : "TryCapture",
  "url" : "https:\/\/developer.apple.com\/documentation\/RegexBuilder\/TryCapture"
}