{
  "abstract" : "Prepare your app to start collecting location data.",
  "codeExamples" : [
    {
      "code" : "\/\/ Check if heading data is available.\nif CLLocationManager.headingAvailable() {\n    locationManager.startUpdatingHeading()\n} else {\n    \/\/ Disable compass features.\n}",
      "language" : "swift"
    },
    {
      "code" : "\/\/ Obtain an asynchronous stream of updates.\nlet stream = CLLocationUpdate.liveUpdates()\n\n\/\/ Iterate over the stream and handle incoming updates.\nfor try await update in stream {\n     if update.location != nil {\n          \/\/ Process the location.\n     } else if update.authorizationDenied {\n          \/\/ Process the authorization denied state change.\n     } else {\n          \/\/ Process other state changes.\n     }\n}",
      "language" : "swift"
    }
  ],
  "contentHash" : "865e6f630e53de587ebb90f3d602fe1331fcfcffa2b0c2deaefd107c12d98a21",
  "crawledAt" : "2025-12-02T16:12:01Z",
  "id" : "1FD172B8-44C9-480F-A010-D3388FA53E7C",
  "kind" : "article",
  "language" : "swift",
  "module" : "Core Location",
  "overview" : "## Overview\n\nThe location data available on most Apple devices gives you additional context and information to incorporate into your app’s content. You might use that data to show someone’s physical location on a map and help them navigate their environment. Or you might apply location data to a list of restaurants and shops to eliminate choices that aren’t nearby. You might also use location data to alert someone when they’re near a particular device or geographic region. For all of these use cases and more, the Core Location framework provides access to the location data you need.\n\nWhen you add code to support Core Location, plan for situations where location data isn’t available. The system also requires apps to gain permission to use location data, and prevents apps from acquiring locations without permission. If location data is unavailable for any reason, make the best app experience you can without it. Disable features that rely on location data or provide alternatives to get the behavior you need.\n\n### Check the availability of services your app uses\n\nAlways verify that location services are available before you attempt to use them. Services might be unavailable for many different reasons, including:\n\nIf a service isn’t available, disable any app-specific features that rely on that service. Disabling features in advance is a more reliable approach than using a service and responding to errors.\n\nThe [doc:\/\/com.apple.corelocation\/documentation\/CoreLocation\/CLLocationManager] class provides methods to determine the availability of each service. Call the appropriate method for a given service immediately before you try to use that service. For example, an app that offers compass heading information might call the [doc:\/\/com.apple.corelocation\/documentation\/CoreLocation\/CLLocationManager\/headingAvailable()] method before starting the service. If your app uses multiple services, call the appropriate method for each service.\n\nIf your app can’t function without specific location services, declare those requirements in advance using your app’s Information Property list. For more information, see Declare the device capabilities your app requires below.\n\n### Start receiving location updates and authorization status changes\n\nYou can request location updates in your code immediately. If the system hasn’t requested authorization for your app, it does so when your code starts iterating over the asynchronous stream of updates. Because location data is sensitive personal information, the owner of a device controls which apps give access. They can grant or deny access to apps separately, and can change an app’s access at any time in system settings.\n\nLocation updates and authorization status changes arrive in an asynchronous fashion. Check for both the presence of a location update and authorization status changes within the loop. The loop doesn’t terminate unless you explicitly use `return`, `break`, or throw an exception.\n\nIf your app always needs authorization, it needs to create and hold a privileged session offered by [doc:\/\/com.apple.corelocation\/documentation\/CoreLocation\/CLServiceSession-pt7n]. This class provides a single opportunity to upgrade from “While using” to “Always.”\n\n### Declare the device capabilities your app requires\n\nCore Location generates location updates using a combination of Wi-Fi, cellular, and GPS hardware, and it generates compass updates using magnetometer hardware. For location updates, Core Location doesn’t use every piece of hardware every time. You specify the level of precision you want in your [doc:\/\/com.apple.corelocation\/documentation\/CoreLocation\/CLLocationManager] object, and Core Location turns on the hardware it needs to deliver that data in the most power-efficient way.\n\nIf your app can’t function without a particular piece of hardware, add the [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Information-Property-List\/UIRequiredDeviceCapabilities] key to your app’s Information Property List. The presence of this key tells the App Store to prevent the installation of your app on devices without the specified hardware or capabilities. The value of the key is an array of strings, and you can include one of the following strings for location-related requirements: `location-services`, `gps`, or `magnetometer`.\n\nInclude the `gps` key only if you require the highest level of precision for location data. Typically, only navigation apps require that kind of precision, but other apps might also need it to ensure precise location is available when needed. If your app requires heading information, include the `magnetometer` key.\n\nDon’t include the [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Information-Property-List\/UIRequiredDeviceCapabilities] key if people can still use your app without location data. For example, don’t include the key if your app uses location data to filter search results for nearby restaurants. When location data isn’t available, you can find alternatives to get you what you need or work without that data. For example, if you want to filter search results by location, you might prompt someone to enter a postal code or other geographic information explicitly.\n\n### Start the location services\n\nAfter you perform the initial checks and verify the authorization status of your app, start the location services you need. Core Location offers several different ways to access location-related information:",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/CoreLocation\/configuring-your-app-to-use-location-services\ncrawled: 2025-12-02T16:12:01Z\n---\n\n# Configuring your app to use location services\n\n**Article**\n\nPrepare your app to start collecting location data.\n\n## Overview\n\nThe location data available on most Apple devices gives you additional context and information to incorporate into your app’s content. You might use that data to show someone’s physical location on a map and help them navigate their environment. Or you might apply location data to a list of restaurants and shops to eliminate choices that aren’t nearby. You might also use location data to alert someone when they’re near a particular device or geographic region. For all of these use cases and more, the Core Location framework provides access to the location data you need.\n\nWhen you add code to support Core Location, plan for situations where location data isn’t available. The system also requires apps to gain permission to use location data, and prevents apps from acquiring locations without permission. If location data is unavailable for any reason, make the best app experience you can without it. Disable features that rely on location data or provide alternatives to get the behavior you need.\n\n\n\n### Check the availability of services your app uses\n\nAlways verify that location services are available before you attempt to use them. Services might be unavailable for many different reasons, including:\n\n- The device is in Airplane mode.\n- The device doesn’t have the required hardware.\n- The device doesn’t support a specific service.\n- Your app doesn’t have authorization to use the service.\n\nIf a service isn’t available, disable any app-specific features that rely on that service. Disabling features in advance is a more reliable approach than using a service and responding to errors.\n\nThe [doc:\/\/com.apple.corelocation\/documentation\/CoreLocation\/CLLocationManager] class provides methods to determine the availability of each service. Call the appropriate method for a given service immediately before you try to use that service. For example, an app that offers compass heading information might call the [doc:\/\/com.apple.corelocation\/documentation\/CoreLocation\/CLLocationManager\/headingAvailable()] method before starting the service. If your app uses multiple services, call the appropriate method for each service.\n\n```swift\n\/\/ Check if heading data is available.\nif CLLocationManager.headingAvailable() {\n    locationManager.startUpdatingHeading()\n} else {\n    \/\/ Disable compass features.\n}\n```\n\nIf your app can’t function without specific location services, declare those requirements in advance using your app’s Information Property list. For more information, see Declare the device capabilities your app requires below.\n\n### Start receiving location updates and authorization status changes\n\nYou can request location updates in your code immediately. If the system hasn’t requested authorization for your app, it does so when your code starts iterating over the asynchronous stream of updates. Because location data is sensitive personal information, the owner of a device controls which apps give access. They can grant or deny access to apps separately, and can change an app’s access at any time in system settings.\n\n\n\nLocation updates and authorization status changes arrive in an asynchronous fashion. Check for both the presence of a location update and authorization status changes within the loop. The loop doesn’t terminate unless you explicitly use `return`, `break`, or throw an exception.\n\n```swift\n\/\/ Obtain an asynchronous stream of updates.\nlet stream = CLLocationUpdate.liveUpdates()\n\n\/\/ Iterate over the stream and handle incoming updates.\nfor try await update in stream {\n     if update.location != nil {\n          \/\/ Process the location.\n     } else if update.authorizationDenied {\n          \/\/ Process the authorization denied state change.\n     } else {\n          \/\/ Process other state changes.\n     }\n}\n```\n\nIf your app always needs authorization, it needs to create and hold a privileged session offered by [doc:\/\/com.apple.corelocation\/documentation\/CoreLocation\/CLServiceSession-pt7n]. This class provides a single opportunity to upgrade from “While using” to “Always.”\n\n### Declare the device capabilities your app requires\n\nCore Location generates location updates using a combination of Wi-Fi, cellular, and GPS hardware, and it generates compass updates using magnetometer hardware. For location updates, Core Location doesn’t use every piece of hardware every time. You specify the level of precision you want in your [doc:\/\/com.apple.corelocation\/documentation\/CoreLocation\/CLLocationManager] object, and Core Location turns on the hardware it needs to deliver that data in the most power-efficient way.\n\nIf your app can’t function without a particular piece of hardware, add the [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Information-Property-List\/UIRequiredDeviceCapabilities] key to your app’s Information Property List. The presence of this key tells the App Store to prevent the installation of your app on devices without the specified hardware or capabilities. The value of the key is an array of strings, and you can include one of the following strings for location-related requirements: `location-services`, `gps`, or `magnetometer`.\n\nInclude the `gps` key only if you require the highest level of precision for location data. Typically, only navigation apps require that kind of precision, but other apps might also need it to ensure precise location is available when needed. If your app requires heading information, include the `magnetometer` key.\n\nDon’t include the [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Information-Property-List\/UIRequiredDeviceCapabilities] key if people can still use your app without location data. For example, don’t include the key if your app uses location data to filter search results for nearby restaurants. When location data isn’t available, you can find alternatives to get you what you need or work without that data. For example, if you want to filter search results by location, you might prompt someone to enter a postal code or other geographic information explicitly.\n\n### Start the location services\n\nAfter you perform the initial checks and verify the authorization status of your app, start the location services you need. Core Location offers several different ways to access location-related information:\n\n- **Get the current location.** Offer navigation instructions, filter data sets based on location, share someone’s location with friends, or perform other tasks that use someone’s current location. See [doc:\/\/com.apple.corelocation\/documentation\/CoreLocation\/getting-the-current-location-of-a-device].\n- **Detect when the device enters or exits a geographical region.** Alert someone to points-of-interest, deliver location-sensitive reminders, and more. See [doc:\/\/com.apple.corelocation\/documentation\/CoreLocation\/monitoring-the-user-s-proximity-to-geographic-regions].\n- **Determine the current compass heading.** Offer course-based navigation or display an onscreen compass. See [doc:\/\/com.apple.corelocation\/documentation\/CoreLocation\/getting-heading-and-course-information].\n- **Detect nearby iBeacon hardware.** Determine someone’s proximity to Bluetooth devices. See [doc:\/\/com.apple.corelocation\/documentation\/CoreLocation\/determining-the-proximity-to-an-ibeacon-device].\n\n## Essentials\n\n- **Supporting live updates in SwiftUI and Mac Catalyst apps**: Enable background events by adding lifecycle event support.\n- **CLLocationManager**: The object you use to start and stop the delivery of location-related events to your app.\n- **CLBackgroundActivitySession**: An object that manages a visual indicator that keeps your app in use in the background, allowing it to receive updates or events.\n- **CLLocationUpdate**: A structure that contains the location information the framework delivers with each update.\n- **Adopting live updates in Core Location**: Simplify location delivery using asynchronous events in Swift.\n- **Monitoring location changes with Core Location**: Define boundaries and act on user location updates.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Enable background events by adding lifecycle event support.",
          "name" : "Supporting live updates in SwiftUI and Mac Catalyst apps",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreLocation\/supporting-live-updates-in-swiftui-and-mac-catalyst-apps"
        },
        {
          "description" : "The object you use to start and stop the delivery of location-related events to your app.",
          "name" : "CLLocationManager",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreLocation\/CLLocationManager"
        },
        {
          "description" : "An object that manages a visual indicator that keeps your app in use in the background, allowing it to receive updates or events.",
          "name" : "CLBackgroundActivitySession",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreLocation\/CLBackgroundActivitySession-3mzv3"
        },
        {
          "description" : "A structure that contains the location information the framework delivers with each update.",
          "name" : "CLLocationUpdate",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreLocation\/CLLocationUpdate"
        },
        {
          "description" : "Simplify location delivery using asynchronous events in Swift.",
          "name" : "Adopting live updates in Core Location",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreLocation\/adopting-live-updates-in-core-location"
        },
        {
          "description" : "Define boundaries and act on user location updates.",
          "name" : "Monitoring location changes with Core Location",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreLocation\/monitoring-location-changes-with-core-location"
        }
      ],
      "title" : "Essentials"
    }
  ],
  "source" : "appleJSON",
  "title" : "Configuring your app to use location services",
  "url" : "https:\/\/developer.apple.com\/documentation\/CoreLocation\/configuring-your-app-to-use-location-services"
}