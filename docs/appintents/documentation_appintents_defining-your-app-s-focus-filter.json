{
  "abstract" : "Customize your app’s behavior to reflect the device’s current Focus.",
  "codeExamples" : [
    {
      "code" : "struct ExampleFocusFilter: SetFocusFilterIntent {\n    \/\/\/ Providing a default value ensures setting this required Boolean value.\n    @Parameter(title: \"Use Dark Mode\", default: false)\n    var alwaysUseDarkMode: Bool\n\n    @Parameter(title: \"Status Message\")\n    var status: String?\n\n    \/\/\/ A representation of a chat account this app uses for notification filtering and suppression.\n    \/\/\/ The user receives suggestions from the suggestedEntities() function that AccountEntityQuery declares.\n    @Parameter(title: \"Selected Account\")\n    var account: AccountEntity?\n}",
      "language" : "swift"
    },
    {
      "code" : "struct AccountEntity: AppEntity {\n    static var typeDisplayRepresentation: TypeDisplayRepresentation {\n        TypeDisplayRepresentation(name: \"A chat account\")\n    }\n\n    static var defaultQuery = AccountEntityQuery()\n\n    let id: String\n    let displayName: String\n    let displaySubtitle: String\n    let image: DisplayRepresentation.Image\n\n    var displayRepresentation: DisplayRepresentation {\n        DisplayRepresentation(title: \"\\(displayName) account\",\n                              subtitle: \"\\(displaySubtitle)\",\n                              image: image)\n    }\n}",
      "language" : "swift"
    },
    {
      "code" : "struct AccountEntityQuery: EntityQuery {\n    func entities(for identifiers: [AccountEntity.ID]) async throws -> [AccountEntity] {\n        Repository.shared.accountsLoggedIn.filter {\n            identifiers.contains($0.id)\n        }\n    }\n\n    func suggestedEntities() async throws -> [AccountEntity] {\n        Repository.shared.accountsLoggedIn\n    }\n}",
      "language" : "swift"
    },
    {
      "code" : "struct ExampleFocusFilter: SetFocusFilterIntent {\n    var appContext: FocusFilterAppContext {\n        logger.debug(\"App Context Called\")\n        let predicate: NSPredicate\n        if let account = account {\n            predicate = NSPredicate(format: \"SELF IN %@\", [account.id])\n        } else {\n            predicate = NSPredicate(value: true)\n        }\n        return FocusFilterAppContext(notificationFilterPredicate: predicate)\n    }\n}",
      "language" : "swift"
    }
  ],
  "contentHash" : "b372adc4682bdbaaf474fdbc11b4a6a414476d5a0d81b73489e801215007b60f",
  "crawledAt" : "2025-12-02T15:28:25Z",
  "id" : "62D40BAB-2187-4A04-A18C-79F06F5CA9EB",
  "kind" : "unknown",
  "language" : "swift",
  "module" : "App Intents",
  "overview" : "## Overview\n\nUse App Intents to define your app’s Focus filters, act on changes from the system, and filter notifications based on its parameters.\n\n### Configure the sample code project\n\nConfigure the iOS and App Intents extension targets to include your development team and a [https:\/\/developer.apple.com\/account\/resources\/identifiers\/bundleId\/]. The bundle identifier needs to support the App Groups capability.\n\nIf you’re using a suite name other than *group.exampleChatApp*, modify it in the following files: `Repository.swift`, `ExampleAppIntentsExtension.entitlements`, and `ExampleChatApp.entitlements`.\n\n### Create a Focus filter\n\nAfter launching the sample app, create a Focus filter for it by choosing Settings > Focus > Do Not Disturb (or another Focus) > Add Filter > Example Chat App. Modify the filter parameters, and then tap the Add button. Turn on the modified Focus to receive those parameters in the sample app’s App Intents extension. The system calls the perform function of the object conforming to `SetFocusFilterIntent`, and all @Parameters are available in the Focus filter. When you turn off the modified Focus, the system provides the sample app’s `SetFocusFilterIntent` conforming object with the following default parameters:\n\n### Define Focus filter parameters\n\nTo define Focus filter parameters for an object that conforms to the `SetFocusFilterIntent` parameter, the sample project annotates the relevant variables with the `@Parameter` property wrapper. It provides a default value for nonoptional parameters unless the filter requires the system to prompt for this value each time it enables it.\n\n### Use custom parameters by adding app entity conformance\n\nTo use a custom object as a `SetFocusFilterIntent` parameter, the sample project adds `AppEntity` conformance to the object. In the example below, `AppEntity` conformance allows the system to use the `AccountEntity` object as a `SetFocusFilterIntent @Parameter`:\n\n### Suggest app entities using entity queries\n\nThe sample project adds a default entity query to suggest values when configuring the Focus filter in Settings. In the example below, the `AccountEntityQuery` that `AccountEntity` uses suggests chat accounts that are currently logged in:\n\n### Filter notifications using the app context\n\nTo filter notifications with Focus filters, the sample project sets the `filterCriteria` parameter for the notifications, and then lets the system know whether to suppress them by providing a predicate that evaluates against `filterCriteria`. In the example below, the `FocusFilterAppContext appContext` variable returns a predicate that states: If there’s an account `@Parameter` for this filter, suppress the notification unless the `filterCriteria` matches the `account.id` value:\n\n### Use an App Intents extension for background execution\n\nThe sample project adds an App Intents extension to handle Focus filters while the app is in the background. It sets the target membership of the object conforming to `SetFocusFilterIntent` to the App Intents extension only, and uses App Groups, or custom services, to share filter data between the extension and the app.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/AppIntents\/defining-your-app-s-focus-filter\ncrawled: 2025-12-02T15:28:25Z\n---\n\n# Defining your app’s Focus filter\n\n**Sample Code**\n\nCustomize your app’s behavior to reflect the device’s current Focus.\n\n## Overview\n\nUse App Intents to define your app’s Focus filters, act on changes from the system, and filter notifications based on its parameters.\n\n\n\n### Configure the sample code project\n\nConfigure the iOS and App Intents extension targets to include your development team and a [https:\/\/developer.apple.com\/account\/resources\/identifiers\/bundleId\/]. The bundle identifier needs to support the App Groups capability.\n\nIf you’re using a suite name other than *group.exampleChatApp*, modify it in the following files: `Repository.swift`, `ExampleAppIntentsExtension.entitlements`, and `ExampleChatApp.entitlements`.\n\n### Create a Focus filter\n\nAfter launching the sample app, create a Focus filter for it by choosing Settings > Focus > Do Not Disturb (or another Focus) > Add Filter > Example Chat App. Modify the filter parameters, and then tap the Add button. Turn on the modified Focus to receive those parameters in the sample app’s App Intents extension. The system calls the perform function of the object conforming to `SetFocusFilterIntent`, and all @Parameters are available in the Focus filter. When you turn off the modified Focus, the system provides the sample app’s `SetFocusFilterIntent` conforming object with the following default parameters:\n\n- `alwaysUseDarkMode: false`\n- `status: nil`\n- `account: nil`\n\n### Define Focus filter parameters\n\nTo define Focus filter parameters for an object that conforms to the `SetFocusFilterIntent` parameter, the sample project annotates the relevant variables with the `@Parameter` property wrapper. It provides a default value for nonoptional parameters unless the filter requires the system to prompt for this value each time it enables it.\n\n```swift\nstruct ExampleFocusFilter: SetFocusFilterIntent {\n    \/\/\/ Providing a default value ensures setting this required Boolean value.\n    @Parameter(title: \"Use Dark Mode\", default: false)\n    var alwaysUseDarkMode: Bool\n\n    @Parameter(title: \"Status Message\")\n    var status: String?\n\n    \/\/\/ A representation of a chat account this app uses for notification filtering and suppression.\n    \/\/\/ The user receives suggestions from the suggestedEntities() function that AccountEntityQuery declares.\n    @Parameter(title: \"Selected Account\")\n    var account: AccountEntity?\n}\n```\n\n### Use custom parameters by adding app entity conformance\n\nTo use a custom object as a `SetFocusFilterIntent` parameter, the sample project adds `AppEntity` conformance to the object. In the example below, `AppEntity` conformance allows the system to use the `AccountEntity` object as a `SetFocusFilterIntent @Parameter`:\n\n```swift\nstruct AccountEntity: AppEntity {\n    static var typeDisplayRepresentation: TypeDisplayRepresentation {\n        TypeDisplayRepresentation(name: \"A chat account\")\n    }\n\n    static var defaultQuery = AccountEntityQuery()\n\n    let id: String\n    let displayName: String\n    let displaySubtitle: String\n    let image: DisplayRepresentation.Image\n\n    var displayRepresentation: DisplayRepresentation {\n        DisplayRepresentation(title: \"\\(displayName) account\",\n                              subtitle: \"\\(displaySubtitle)\",\n                              image: image)\n    }\n}\n```\n\n### Suggest app entities using entity queries\n\nThe sample project adds a default entity query to suggest values when configuring the Focus filter in Settings. In the example below, the `AccountEntityQuery` that `AccountEntity` uses suggests chat accounts that are currently logged in:\n\n```swift\nstruct AccountEntityQuery: EntityQuery {\n    func entities(for identifiers: [AccountEntity.ID]) async throws -> [AccountEntity] {\n        Repository.shared.accountsLoggedIn.filter {\n            identifiers.contains($0.id)\n        }\n    }\n\n    func suggestedEntities() async throws -> [AccountEntity] {\n        Repository.shared.accountsLoggedIn\n    }\n}\n```\n\n### Filter notifications using the app context\n\nTo filter notifications with Focus filters, the sample project sets the `filterCriteria` parameter for the notifications, and then lets the system know whether to suppress them by providing a predicate that evaluates against `filterCriteria`. In the example below, the `FocusFilterAppContext appContext` variable returns a predicate that states: If there’s an account `@Parameter` for this filter, suppress the notification unless the `filterCriteria` matches the `account.id` value:\n\n```swift\nstruct ExampleFocusFilter: SetFocusFilterIntent {\n    var appContext: FocusFilterAppContext {\n        logger.debug(\"App Context Called\")\n        let predicate: NSPredicate\n        if let account = account {\n            predicate = NSPredicate(format: \"SELF IN %@\", [account.id])\n        } else {\n            predicate = NSPredicate(value: true)\n        }\n        return FocusFilterAppContext(notificationFilterPredicate: predicate)\n    }\n}\n```\n\n### Use an App Intents extension for background execution\n\nThe sample project adds an App Intents extension to handle Focus filters while the app is in the background. It sets the target membership of the object conforming to `SetFocusFilterIntent` to the App Intents extension only, and uses App Groups, or custom services, to share filter data between the extension and the app.\n\n## Focus filters\n\n- **SetFocusFilterIntent**: An interface for providing an app intent that you use to adapt your app’s behavior when Focus changes.\n- **FocusFilterAppContext**: A type that contains app-specific contextual information for a particular Focus, such as the notification filter criteria to apply.\n- **FocusFilterSuggestionContext**: A type you use to suggest app configurations for a given Focus.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "An interface for providing an app intent that you use to adapt your app’s behavior when Focus changes.",
          "name" : "SetFocusFilterIntent",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppIntents\/SetFocusFilterIntent"
        },
        {
          "description" : "A type that contains app-specific contextual information for a particular Focus, such as the notification filter criteria to apply.",
          "name" : "FocusFilterAppContext",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppIntents\/FocusFilterAppContext"
        },
        {
          "description" : "A type you use to suggest app configurations for a given Focus.",
          "name" : "FocusFilterSuggestionContext",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppIntents\/FocusFilterSuggestionContext"
        }
      ],
      "title" : "Focus filters"
    }
  ],
  "source" : "appleJSON",
  "title" : "Defining your app’s Focus filter",
  "url" : "https:\/\/developer.apple.com\/documentation\/AppIntents\/defining-your-app-s-focus-filter"
}