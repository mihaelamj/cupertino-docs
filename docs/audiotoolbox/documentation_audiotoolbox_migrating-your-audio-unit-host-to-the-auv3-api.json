{
  "abstract" : "Update your Audio Unit (AU) host app to take advantage of the new features and capabilities of AUv3.",
  "codeExamples" : [
    {
      "code" : "\/\/ Access the singleton AVAudioUnitComponentManager instance.\nlet manager = AVAudioUnitComponentManager.shared()\n\n\/\/ Retrieve audio unit components by description.\nlet description = AudioComponentDescription(componentType: kAudioUnitType_Effect,\n                                            componentSubType: 0,\n                                            componentManufacturer: 0,\n                                            componentFlags: 0,\n                                            componentFlagsMask: 0)\nlet componentsByDesc = manager.components(matching: description)\n\n\n\/\/ Retrieve audio unit components by predicate.\nlet predicate = NSPredicate(format: \"typeName CONTAINS 'Effect'\")\nlet componentsByPredicate = manager.components(matching: predicate)\n\n\/\/ Retrieve audio unit components by test.\nlet componentsByTest = manager.components { component, _ in\n    return component.typeName == AVAudioUnitTypeEffect\n}",
      "language" : "swift"
    },
    {
      "code" : "func selectAudioUnit(at index: Int) {\n    let description = components[index].audioComponentDescription\n    \n    \/\/ Instantiate using AVFoundation's AVAudioUnit class method.\n    AVAudioUnit.instantiate(with: description, options: []) { avAudioUnit, error in\n        guard error == nil else {\n            DispatchQueue.main.async { \/* Show error message to user. *\/ }\n            return\n        }\n        \n        \/\/ Audio unit successfully instantiated.\n        \/\/ Connect it to AVAudioEngine to use.\n    }\n}",
      "language" : "swift"
    },
    {
      "code" : "\/\/ Get the underlying AudioUnit instance.\nlet audioUnit = avAudioUnit.audioUnit\nvar maxFrames = UInt32(4096)\n\n\/\/ Set the maximum frames to render.\nAudioUnitSetProperty(audioUnit,\n                     kAudioUnitProperty_MaximumFramesPerSlice,\n                     kAudioUnitScope_Global,\n                     0,\n                     &maxFrames,\n                     UInt32(MemoryLayout<UInt32>.size))",
      "language" : "swift"
    },
    {
      "code" : "\/\/ Get the underlying AUAudioUnit instance.\nlet audioUnit = avAudioUnit.auAudioUnit\naudioUnit.maximumFramesToRender = 4096",
      "language" : "swift"
    },
    {
      "code" : "audioUnit.requestViewController { viewController in\n    DispatchQueue.main.async {\n        \/\/ Install the view controller's view in your host's user interface.\n    }\n}",
      "language" : "swift"
    }
  ],
  "contentHash" : "3ed6f41b438a396762d9c78b4f3e7b25814c0fbd839b70d0b25069f9d91f7718",
  "crawledAt" : "2025-12-03T10:41:37Z",
  "id" : "4E4DBEC8-FFD0-437C-A4C0-174EEF90A824",
  "kind" : "article",
  "language" : "swift",
  "module" : "Audio Toolbox",
  "overview" : "## Overview\n\nThe latest Audio Unit standard, AUv3, provides a robust plug-in model built on app extensions. This model provides several benefits to host apps, including greater security and stability, multiple view configurations, and support for shared user presets.\n\nYou can adopt the new API while still retaining your ability to host AUv2 audio units. The framework’s bridging layer enables this capability by automatically translating AUv3 calls into their AUv2 equivalents, which means you can use a single API and work with both new and legacy audio units.\n\n\n\nFor a downloadable sample app that uses the core features of the AUv3 API, see [doc:\/\/com.apple.audiotoolbox\/documentation\/AudioToolbox\/incorporating-audio-effects-and-instruments].\n\n### Find Audio Units\n\nThe AVFoundation framework’s [doc:\/\/com.apple.documentation\/documentation\/AVFAudio\/AVAudioUnitComponentManager] class provides a convenient way to find audio components registered with the host system. You use it to search for audio units by description, predicate, or test case, and the component manager returns an array of [doc:\/\/com.apple.documentation\/documentation\/AVFAudio\/AVAudioUnitComponent] objects matching your search criteria. The following code example shows how to use each approach to find all audio effects available on the system.\n\n### Instantiate Audio Units\n\nOnce you’ve found the list of available audio components, the next step is to instantiate the component you want to use. To instantiate the audio unit, use the [doc:\/\/com.apple.documentation\/documentation\/AVFAudio\/AVAudioUnit] class’s [doc:\/\/com.apple.documentation\/documentation\/AVFAudio\/AVAudioUnit\/instantiate(with:options:completionHandler:)] method as shown below.\n\n### Interact with an Audio Unit\n\nThe way you interact with audio units using the AUv3 API differs from how you do so with the AUv2 API. With AUv2, you used C functions to operate on an audio unit. For example, the following code sets the maximum number of frames to render using the AUv2 API.\n\nIn comparison, the AUv3 API provides a more natural interface that enables you to interact directly with the audio unit instance by calling its properties and methods. Using the AUv3 API, you set the maximum number of frames to render as shown below.\n\nThe following table lists the AUv2 function and its AUv3 method or property equivalent.\n\n### Present the Audio Unit’s User Interface\n\nTo present the audio unit’s user interface, call its [doc:\/\/com.apple.audiotoolbox\/documentation\/AudioToolbox\/AUAudioUnit\/requestViewController(completionHandler:)] method. This method asynchronously retrieves the audio unit’s view controller instance and returns it in a callback closure. The callback is invoked on a background thread, so you need to dispatch control back to the main queue before adding the audio unit’s user interface into your app’s view hierarchy.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/audiotoolbox\/migrating-your-audio-unit-host-to-the-auv3-api\ncrawled: 2025-12-03T10:41:37Z\n---\n\n# Migrating Your Audio Unit Host to the AUv3 API\n\n**Article**\n\nUpdate your Audio Unit (AU) host app to take advantage of the new features and capabilities of AUv3.\n\n## Overview\n\nThe latest Audio Unit standard, AUv3, provides a robust plug-in model built on app extensions. This model provides several benefits to host apps, including greater security and stability, multiple view configurations, and support for shared user presets.\n\nYou can adopt the new API while still retaining your ability to host AUv2 audio units. The framework’s bridging layer enables this capability by automatically translating AUv3 calls into their AUv2 equivalents, which means you can use a single API and work with both new and legacy audio units.\n\n\n\nFor a downloadable sample app that uses the core features of the AUv3 API, see [doc:\/\/com.apple.audiotoolbox\/documentation\/AudioToolbox\/incorporating-audio-effects-and-instruments].\n\n### Find Audio Units\n\nThe AVFoundation framework’s [doc:\/\/com.apple.documentation\/documentation\/AVFAudio\/AVAudioUnitComponentManager] class provides a convenient way to find audio components registered with the host system. You use it to search for audio units by description, predicate, or test case, and the component manager returns an array of [doc:\/\/com.apple.documentation\/documentation\/AVFAudio\/AVAudioUnitComponent] objects matching your search criteria. The following code example shows how to use each approach to find all audio effects available on the system.\n\n```swift\n\/\/ Access the singleton AVAudioUnitComponentManager instance.\nlet manager = AVAudioUnitComponentManager.shared()\n\n\/\/ Retrieve audio unit components by description.\nlet description = AudioComponentDescription(componentType: kAudioUnitType_Effect,\n                                            componentSubType: 0,\n                                            componentManufacturer: 0,\n                                            componentFlags: 0,\n                                            componentFlagsMask: 0)\nlet componentsByDesc = manager.components(matching: description)\n\n\n\/\/ Retrieve audio unit components by predicate.\nlet predicate = NSPredicate(format: \"typeName CONTAINS 'Effect'\")\nlet componentsByPredicate = manager.components(matching: predicate)\n\n\/\/ Retrieve audio unit components by test.\nlet componentsByTest = manager.components { component, _ in\n    return component.typeName == AVAudioUnitTypeEffect\n}\n```\n\n### Instantiate Audio Units\n\nOnce you’ve found the list of available audio components, the next step is to instantiate the component you want to use. To instantiate the audio unit, use the [doc:\/\/com.apple.documentation\/documentation\/AVFAudio\/AVAudioUnit] class’s [doc:\/\/com.apple.documentation\/documentation\/AVFAudio\/AVAudioUnit\/instantiate(with:options:completionHandler:)] method as shown below.\n\n```swift\nfunc selectAudioUnit(at index: Int) {\n    let description = components[index].audioComponentDescription\n    \n    \/\/ Instantiate using AVFoundation's AVAudioUnit class method.\n    AVAudioUnit.instantiate(with: description, options: []) { avAudioUnit, error in\n        guard error == nil else {\n            DispatchQueue.main.async { \/* Show error message to user. *\/ }\n            return\n        }\n        \n        \/\/ Audio unit successfully instantiated.\n        \/\/ Connect it to AVAudioEngine to use.\n    }\n}\n```\n\n\n\n### Interact with an Audio Unit\n\nThe way you interact with audio units using the AUv3 API differs from how you do so with the AUv2 API. With AUv2, you used C functions to operate on an audio unit. For example, the following code sets the maximum number of frames to render using the AUv2 API.\n\n```swift\n\/\/ Get the underlying AudioUnit instance.\nlet audioUnit = avAudioUnit.audioUnit\nvar maxFrames = UInt32(4096)\n\n\/\/ Set the maximum frames to render.\nAudioUnitSetProperty(audioUnit,\n                     kAudioUnitProperty_MaximumFramesPerSlice,\n                     kAudioUnitScope_Global,\n                     0,\n                     &maxFrames,\n                     UInt32(MemoryLayout<UInt32>.size))\n```\n\nIn comparison, the AUv3 API provides a more natural interface that enables you to interact directly with the audio unit instance by calling its properties and methods. Using the AUv3 API, you set the maximum number of frames to render as shown below.\n\n```swift\n\/\/ Get the underlying AUAudioUnit instance.\nlet audioUnit = avAudioUnit.auAudioUnit\naudioUnit.maximumFramesToRender = 4096\n```\n\nThe following table lists the AUv2 function and its AUv3 method or property equivalent.\n\n\n\n### Present the Audio Unit’s User Interface\n\nTo present the audio unit’s user interface, call its [doc:\/\/com.apple.audiotoolbox\/documentation\/AudioToolbox\/AUAudioUnit\/requestViewController(completionHandler:)] method. This method asynchronously retrieves the audio unit’s view controller instance and returns it in a callback closure. The callback is invoked on a background thread, so you need to dispatch control back to the main queue before adding the audio unit’s user interface into your app’s view hierarchy.\n\n```swift\naudioUnit.requestViewController { viewController in\n    DispatchQueue.main.async {\n        \/\/ Install the view controller's view in your host's user interface.\n    }\n}\n```\n\n## Host App\n\n- **Hosting Audio Unit Extensions Using the AUv2 API**: Update your existing Audio Unit v2 host app to load and use Audio Unit extensions.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Update your existing Audio Unit v2 host app to load and use Audio Unit extensions.",
          "name" : "Hosting Audio Unit Extensions Using the AUv2 API",
          "url" : "https:\/\/developer.apple.com\/documentation\/AudioToolbox\/hosting-audio-unit-extensions-using-the-auv2-api"
        }
      ],
      "title" : "Host App"
    }
  ],
  "source" : "appleJSON",
  "title" : "Migrating Your Audio Unit Host to the AUv3 API",
  "url" : "https:\/\/developer.apple.com\/documentation\/audiotoolbox\/migrating-your-audio-unit-host-to-the-auv3-api"
}