{
  "abstract" : "If your Audio Unit plug-in creates auxiliary real-time rendering threads, add them to the host app’s audio workgroup so the system can schedule them appropriately.",
  "codeExamples" : [
    {
      "code" : "#import <AudioToolbox\/AudioToolbox.h>\n \n-(AURenderContextObserver)renderContextObserver {\n \n    \/\/ Create block safe pointer to kernel.\n    __block AUKernel *kernel = _kernel;\n     \n    \/* \n    The system calls this block on the render thread, \n    immediately before any render request.\n    *\/\n    return ^ (const AudioUnitRenderContext *context) {\n        if (auto renderContext = context) {\n            kernel->workgroupDidChange(renderContext->workgroup);\n        }\n        else {\n            \/**\n            The new workgroup may be null in the case of a nonreal-time\n            render context, or a real-time thread that is not part of any\n            workgroup.\n            *\/\n            kernel->removeAllWorkgroups();\n        }\n    };\n}",
      "language" : "objc"
    }
  ],
  "contentHash" : "bb8ecb34593f43618ac70e002dc1aa33070bf328df56aafde5a105dae5533f2c",
  "crawledAt" : "2025-12-06T07:39:19Z",
  "id" : "0FB1B4C3-1673-411A-878F-360EB101FDD8",
  "kind" : "article",
  "language" : "swift",
  "module" : "Audio Toolbox",
  "overview" : "## Overview\n\nMost Audio Unit plug-ins don’t need to create their own real-time threads, but some complex plug-ins do to achieve their required processing. For example, a synthesizer may need to create additional real-time rendering threads to achieve maximum polyphony. So that the system knows about these threads, join them to an audio workgroup. To know which audio workgroup to add them to, provide a render context observer.\n\n### Provide a Render Context Observer\n\nAn [doc:\/\/com.apple.audiotoolbox\/documentation\/AudioToolbox\/AURenderContextObserver] is a block the Audio Unit plug-in holds that the system calls before each render request. With each request, the system passes the block an [doc:\/\/com.apple.audiotoolbox\/documentation\/AudioToolbox\/AudioUnitRenderContext] object that provides the audio workgroup of the calling context. When the context’s audio workgroup changes, join your auxiliary real-time threads to the new audio workgroup.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/AudioToolbox\/adding-audio-unit-auxiliary-real-time-threads-to-audio-workgroups\ncrawled: 2025-12-06T07:39:19Z\n---\n\n# Adding Audio Unit Auxiliary Real-Time Threads to Audio Workgroups\n\n**Article**\n\nIf your Audio Unit plug-in creates auxiliary real-time rendering threads, add them to the host app’s audio workgroup so the system can schedule them appropriately.\n\n## Overview\n\nMost Audio Unit plug-ins don’t need to create their own real-time threads, but some complex plug-ins do to achieve their required processing. For example, a synthesizer may need to create additional real-time rendering threads to achieve maximum polyphony. So that the system knows about these threads, join them to an audio workgroup. To know which audio workgroup to add them to, provide a render context observer.\n\n### Provide a Render Context Observer\n\nAn [doc:\/\/com.apple.audiotoolbox\/documentation\/AudioToolbox\/AURenderContextObserver] is a block the Audio Unit plug-in holds that the system calls before each render request. With each request, the system passes the block an [doc:\/\/com.apple.audiotoolbox\/documentation\/AudioToolbox\/AudioUnitRenderContext] object that provides the audio workgroup of the calling context. When the context’s audio workgroup changes, join your auxiliary real-time threads to the new audio workgroup.\n\n```objc\n#import <AudioToolbox\/AudioToolbox.h>\n \n-(AURenderContextObserver)renderContextObserver {\n \n    \/\/ Create block safe pointer to kernel.\n    __block AUKernel *kernel = _kernel;\n     \n    \/* \n    The system calls this block on the render thread, \n    immediately before any render request.\n    *\/\n    return ^ (const AudioUnitRenderContext *context) {\n        if (auto renderContext = context) {\n            kernel->workgroupDidChange(renderContext->workgroup);\n        }\n        else {\n            \/**\n            The new workgroup may be null in the case of a nonreal-time\n            render context, or a real-time thread that is not part of any\n            workgroup.\n            *\/\n            kernel->removeAllWorkgroups();\n        }\n    };\n}\n```\n\n## Essentials\n\n- **Understanding Audio Workgroups**: Learn how to optimize real-time rendering performance with the Audio Workgroups API.\n- **Adding Parallel Real-Time Threads to Audio Workgroups**: Optimize the performance of real-time audio threads that run in sync with the I\/O thread by adding them to the audio device workgroup.\n- **Adding Asynchronous Real-Time Threads to Audio Workgroups**: Optimize system performance by adding real-time audio threads that run asynchronously to the I\/O thread to custom audio workgroups.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Learn how to optimize real-time rendering performance with the Audio Workgroups API.",
          "name" : "Understanding Audio Workgroups",
          "url" : "https:\/\/developer.apple.com\/documentation\/AudioToolbox\/understanding-audio-workgroups"
        },
        {
          "description" : "Optimize the performance of real-time audio threads that run in sync with the I\/O thread by adding them to the audio device workgroup.",
          "name" : "Adding Parallel Real-Time Threads to Audio Workgroups",
          "url" : "https:\/\/developer.apple.com\/documentation\/AudioToolbox\/adding-parallel-real-time-threads-to-audio-workgroups"
        },
        {
          "description" : "Optimize system performance by adding real-time audio threads that run asynchronously to the I\/O thread to custom audio workgroups.",
          "name" : "Adding Asynchronous Real-Time Threads to Audio Workgroups",
          "url" : "https:\/\/developer.apple.com\/documentation\/AudioToolbox\/adding-asynchronous-real-time-threads-to-audio-workgroups"
        }
      ],
      "title" : "Essentials"
    }
  ],
  "source" : "appleJSON",
  "title" : "Adding Audio Unit Auxiliary Real-Time Threads to Audio Workgroups",
  "url" : "https:\/\/developer.apple.com\/documentation\/AudioToolbox\/adding-audio-unit-auxiliary-real-time-threads-to-audio-workgroups"
}