{
  "abstract" : "Update your existing Audio Unit v2 host app to load and use Audio Unit extensions.",
  "codeExamples" : [
    {
      "code" : "AudioComponent component = ...\nAudioComponentDescription componentDesc;\n\n\/\/ Get the component description.\nAudioComponentGetDescription(component, &componentDesc);\n\n\/\/ Determine if async loading is required.\nbool requiresAsync = (componentDesc.componentFlags &\n                      kAudioComponentFlag_RequiresAsyncInstantiation) > 0;\n\nif (requiresAsync) {\n    \/\/ Asynchronous Path\n    AudioComponentInstantiate(component,\n                              kAudioComponentInstantiation_LoadOutOfProcess,\n                              ^(AudioComponentInstance audioUnit, OSStatus error) {\n        \/\/ Initialize AudioUnit instance.\n    });\n} else {\n    \/\/ Synchronous Path\n    AudioComponentInstance audioUnit;\n    if (AudioComponentInstanceNew(component, &audioUnit) == noErr) {\n        \/\/ Initialize AudioUnit instance.\n    }\n}",
      "language" : "objc"
    },
    {
      "code" : "AudioComponent component = ...\n\nAudioComponentDescription componentDesc;\nAudioComponentGetDescription(component, &componentDesc);\n\nbool isAUv3 = (componentDesc.componentFlags &\n               kAudioComponentFlag_IsV3AudioUnit) > 0;\n\nif (isAUv3) {\n    __block AUViewControllerBase *viewController = nil;\n    \n    auto callback = ^(AUViewControllerBase *vc) {\n        viewController = vc;\n        \/\/ Dispatch back to the main queue to embed the UI.\n    };\n    \n    \/\/ AUv3: Retrieve the UI using the kAudioUnitProperty_RequestViewController property.\n    AudioUnitSetProperty(audioUnit,\n                         kAudioUnitProperty_RequestViewController,\n                         kAudioUnitScope_Global,\n                         0,\n                         &callback,\n                         sizeof(callback));\n} else {\n    \/\/ AUv2: Retrieve the UI using the kAudioUnitProperty_CocoaUI property.\n}",
      "language" : "objc"
    }
  ],
  "contentHash" : "3daf09e1cc3c8afd21e641b381ebc524035e50382069a8c447cbde92e7ad45ad",
  "crawledAt" : "2025-12-03T10:26:59Z",
  "id" : "2AEDB9C5-9109-4C6C-B555-40713A7B9984",
  "kind" : "article",
  "language" : "swift",
  "module" : "Audio Toolbox",
  "overview" : "## Overview\n\nThe latest Audio Unit standard, AUv3, provides a robust plug-in model built on app extensions. This model provides several benefits to host apps, including greater security and stability, multiple view configurations, and support for shared user presets.\n\nWith only minor modifications to your existing AUv2 host app, you’re able to load and interact with Audio Unit extensions. The framework provides a bridging layer that automatically translates AUv2 calls into their AUv3 equivalents, and vice versa. This bridging is largely transparent to your app, and you’re only required to make minor changes to how you instantiate components and access their user interfaces.\n\n\n\n### Asynchronously Instantiate Audio Units\n\nAUv3 extensions that provide a user interface require that you instantiate them asynchronously. Attempting to instantiate them using the synchronous [doc:\/\/com.apple.audiotoolbox\/documentation\/AudioToolbox\/AudioComponentInstanceNew(_:_:)] function fails. Instead, check for the existence of the [doc:\/\/com.apple.audiotoolbox\/documentation\/AudioToolbox\/AudioComponentFlags\/requiresAsyncInstantiation] component flag. If present, asynchronously instantiate the component using the new [doc:\/\/com.apple.audiotoolbox\/documentation\/AudioToolbox\/AudioComponentInstantiate(_:_:_:)] function, as shown in the following code example.\n\nIf the component requires asynchronous instantiation, call the [doc:\/\/com.apple.audiotoolbox\/documentation\/AudioToolbox\/AudioComponentInstantiate(_:_:_:)] function, and pass it the component you want to instantiate, the desired instantiation option (in or out of process), and a completion block that’s called when the instantiation completes. This callback block provides the audio unit instance or any errors that might have occurred while instantiating the component.\n\n### Present the Audio Unit’s User Interface\n\nYou access an AUv2 plug-in’s user interface by retrieving its [doc:\/\/com.apple.audiotoolbox\/documentation\/AudioToolbox\/kAudioUnitProperty_CocoaUI] property. This property isn’t used with AUv3 plug-ins; you retrieve the user interface instead using the [doc:\/\/com.apple.audiotoolbox\/documentation\/AudioToolbox\/kAudioUnitProperty_RequestViewController] property. You do so by setting a callback block that’s invoked when the framework loads the user interface. The callback provides a reference to the Audio Unit’s user interface, which you can present in your host’s interface.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/audiotoolbox\/hosting-audio-unit-extensions-using-the-auv2-api\ncrawled: 2025-12-03T10:26:59Z\n---\n\n# Hosting Audio Unit Extensions Using the AUv2 API\n\n**Article**\n\nUpdate your existing Audio Unit v2 host app to load and use Audio Unit extensions.\n\n## Overview\n\nThe latest Audio Unit standard, AUv3, provides a robust plug-in model built on app extensions. This model provides several benefits to host apps, including greater security and stability, multiple view configurations, and support for shared user presets.\n\nWith only minor modifications to your existing AUv2 host app, you’re able to load and interact with Audio Unit extensions. The framework provides a bridging layer that automatically translates AUv2 calls into their AUv3 equivalents, and vice versa. This bridging is largely transparent to your app, and you’re only required to make minor changes to how you instantiate components and access their user interfaces.\n\n\n\n\n\n### Asynchronously Instantiate Audio Units\n\nAUv3 extensions that provide a user interface require that you instantiate them asynchronously. Attempting to instantiate them using the synchronous [doc:\/\/com.apple.audiotoolbox\/documentation\/AudioToolbox\/AudioComponentInstanceNew(_:_:)] function fails. Instead, check for the existence of the [doc:\/\/com.apple.audiotoolbox\/documentation\/AudioToolbox\/AudioComponentFlags\/requiresAsyncInstantiation] component flag. If present, asynchronously instantiate the component using the new [doc:\/\/com.apple.audiotoolbox\/documentation\/AudioToolbox\/AudioComponentInstantiate(_:_:_:)] function, as shown in the following code example.\n\n```objc\nAudioComponent component = ...\nAudioComponentDescription componentDesc;\n\n\/\/ Get the component description.\nAudioComponentGetDescription(component, &componentDesc);\n\n\/\/ Determine if async loading is required.\nbool requiresAsync = (componentDesc.componentFlags &\n                      kAudioComponentFlag_RequiresAsyncInstantiation) > 0;\n\nif (requiresAsync) {\n    \/\/ Asynchronous Path\n    AudioComponentInstantiate(component,\n                              kAudioComponentInstantiation_LoadOutOfProcess,\n                              ^(AudioComponentInstance audioUnit, OSStatus error) {\n        \/\/ Initialize AudioUnit instance.\n    });\n} else {\n    \/\/ Synchronous Path\n    AudioComponentInstance audioUnit;\n    if (AudioComponentInstanceNew(component, &audioUnit) == noErr) {\n        \/\/ Initialize AudioUnit instance.\n    }\n}\n```\n\nIf the component requires asynchronous instantiation, call the [doc:\/\/com.apple.audiotoolbox\/documentation\/AudioToolbox\/AudioComponentInstantiate(_:_:_:)] function, and pass it the component you want to instantiate, the desired instantiation option (in or out of process), and a completion block that’s called when the instantiation completes. This callback block provides the audio unit instance or any errors that might have occurred while instantiating the component.\n\n\n\n### Present the Audio Unit’s User Interface\n\nYou access an AUv2 plug-in’s user interface by retrieving its [doc:\/\/com.apple.audiotoolbox\/documentation\/AudioToolbox\/kAudioUnitProperty_CocoaUI] property. This property isn’t used with AUv3 plug-ins; you retrieve the user interface instead using the [doc:\/\/com.apple.audiotoolbox\/documentation\/AudioToolbox\/kAudioUnitProperty_RequestViewController] property. You do so by setting a callback block that’s invoked when the framework loads the user interface. The callback provides a reference to the Audio Unit’s user interface, which you can present in your host’s interface.\n\n```objc\nAudioComponent component = ...\n\nAudioComponentDescription componentDesc;\nAudioComponentGetDescription(component, &componentDesc);\n\nbool isAUv3 = (componentDesc.componentFlags &\n               kAudioComponentFlag_IsV3AudioUnit) > 0;\n\nif (isAUv3) {\n    __block AUViewControllerBase *viewController = nil;\n    \n    auto callback = ^(AUViewControllerBase *vc) {\n        viewController = vc;\n        \/\/ Dispatch back to the main queue to embed the UI.\n    };\n    \n    \/\/ AUv3: Retrieve the UI using the kAudioUnitProperty_RequestViewController property.\n    AudioUnitSetProperty(audioUnit,\n                         kAudioUnitProperty_RequestViewController,\n                         kAudioUnitScope_Global,\n                         0,\n                         &callback,\n                         sizeof(callback));\n} else {\n    \/\/ AUv2: Retrieve the UI using the kAudioUnitProperty_CocoaUI property.\n}\n```\n\n## Host App\n\n- **Migrating Your Audio Unit Host to the AUv3 API**: Update your Audio Unit (AU) host app to take advantage of the new features and capabilities of AUv3.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Update your Audio Unit (AU) host app to take advantage of the new features and capabilities of AUv3.",
          "name" : "Migrating Your Audio Unit Host to the AUv3 API",
          "url" : "https:\/\/developer.apple.com\/documentation\/AudioToolbox\/migrating-your-audio-unit-host-to-the-auv3-api"
        }
      ],
      "title" : "Host App"
    }
  ],
  "source" : "appleJSON",
  "title" : "Hosting Audio Unit Extensions Using the AUv2 API",
  "url" : "https:\/\/developer.apple.com\/documentation\/audiotoolbox\/hosting-audio-unit-extensions-using-the-auv2-api"
}