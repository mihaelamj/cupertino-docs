{
  "abstract" : "Augment the macOS Photos app with extensions that support project creation.",
  "codeExamples" : [
    {
      "code" : "let sortedRois = assetProjectElement.regionsOfInterest.sorted { (roi1, roi2) -> Bool in\n    return roi1.weight + roi1.quality < roi2.weight + roi2.quality\n}\nreturn sortedRois.last?.rect",
      "language" : "swift"
    },
    {
      "code" : "self.projectAssets = PHAsset.fetchAssets(in: extensionContext.project, options: nil)\nextensionContext.photoLibrary.register(self)",
      "language" : "swift"
    },
    {
      "code" : "library.unregisterChangeObserver(self)",
      "language" : "swift"
    },
    {
      "code" : "func photoLibraryDidChange(_ changeInstance: PHChange) {\n    guard let fetchResult = projectAssets,\n        let changeDetails = changeInstance.changeDetails(for: fetchResult)\n        else { return }\n    projectAssets = changeDetails.fetchResultAfterChanges\n\n    guard let projectExtensionContext = projectExtensionContext else { return }\n    projectExtensionContext.updatedProjectInfo(from: projectModel?.projectInfo) { (updatedProjectInfo) in\n        guard let projectInfo = updatedProjectInfo else { return }\n        DispatchQueue.main.async {\n            self.setupProjectModel(with: projectInfo, extensionContext: projectExtensionContext)\n        }\n    }\n}",
      "language" : "swift"
    },
    {
      "code" : "func validateMenuItem(_ menuItem: NSMenuItem) -> Bool {\n    var canHandlePaste = false\n    if menuItem.action == #selector(paste(_:)) {\n        canHandlePaste = canHandleCurrentPasteboardContent()\n    }\n    return canHandlePaste\n}"
    }
  ],
  "contentHash" : "c44e546b4b1fb8204be9e7b1387a4bb8b9411561838ce114819284c48ab8de11",
  "crawledAt" : "2025-12-02T15:31:50Z",
  "id" : "FC87A923-8489-4C78-AFC1-46EB98E485BF",
  "kind" : "unknown",
  "language" : "swift",
  "module" : "PhotosUI",
  "overview" : "## Overview\n\nStarting in macOS 10.13, you can create Photos project extensions. This sample app shows you how to implement a slideshow extension that transitions between photos by zooming in on a region of interest (ROI) with significant meaning in an asset, for example, faces that are relevant to a user, as opposed to faces in a crowd. The app demonstrates the computation of saliency based on an ROI’s weight and quality and the process of subscribing to change notifications so your extension can respond to asset modifications.\n\n### Configure the Sample Code Project\n\nIn the extension’s `Info.plist` file, choose the extension type by entering `slideshow` in the field at `NSExtension` > `NSExtensionAttributes` > [doc:\/\/com.apple.photokit\/documentation\/PhotosUI\/PHProjectCategory]. Add more categories to the information property list for your extension to appear in other categories in the Create menu.\n\nBuild and run the Photos Project Slideshow scheme in Xcode once to run the sample app and install the extension in the macOS Photos app. To use the extension, build and run the Slideshow Sample scheme in Xcode, which prompts you to open the macOS Photos app to use the extension.\n\nFrom within the Photos app, access the Create categories by choosing File > Create or right-clicking any group of assets. Under the Slideshow category, you’ll see the app extension and can create a project to run in it.\n\nBecause the project extension runs inside the Photos app, the sample emulates the grid layout of the user’s photo assets. Pressing the play button in the upper-right corner of the extension starts the slideshow.\n\n### Customize the Focus Rectangle of the Zoom Transition\n\nThe sample code project contains custom `Animator` and `AssetModel` classes.\n\nThe `Animator` class handles transitions between photos in the slideshow. This sample’s `Animator` asks an `AssetModel` object for a rectangle to zoom in on. Photos identifies each ROI it finds as a possible ROI, and the sample uses the bounding box of the most salient one as the preferred zoom rectangle. The code defines saliency of a [doc:\/\/com.apple.photokit\/documentation\/PhotosUI\/PHProjectRegionOfInterest] as the sum of its [doc:\/\/com.apple.photokit\/documentation\/PhotosUI\/PHProjectRegionOfInterest\/weight] and [doc:\/\/com.apple.photokit\/documentation\/PhotosUI\/PHProjectRegionOfInterest\/quality] values, and then sorts the array of the photo’s regions by that value.\n\nThe `weight` of an ROI represents the pervasiveness of the ROI in the project as a whole. The `quality` score represents the quality of the ROI in the individual asset, based on factors such as sharpness, visibility, and prominence in the photo. Adding these two values is a heuristic for determining the ROI’s relative importance throughout a photo project.\n\n### Respond to Asset Changes in the Project\n\nTo respond to asset changes in the Photos Library, your app extension needs to monitor change notifications. Register for change observation as soon as the project begins or resumes. In the [doc:\/\/com.apple.photokit\/documentation\/PhotosUI\/PHProjectExtensionController] protocol, the [doc:\/\/com.apple.photokit\/documentation\/PhotosUI\/PHProjectExtensionController\/beginProject(with:projectInfo:completion:)] and [doc:\/\/com.apple.photokit\/documentation\/PhotosUI\/PHProjectExtensionController\/resumeProject(with:completion:)] methods provide points for your extension to begin monitoring changes.\n\nWhen the project is complete, use the [doc:\/\/com.apple.photokit\/documentation\/PhotosUI\/PHProjectExtensionController\/finishProject(completionHandler:)] protocol method to unregister from change observation.\n\nWhenever something changes in the Photos library, the system calls the [doc:\/\/com.apple.photokit\/documentation\/Photos\/PHPhotoLibraryChangeObserver\/photoLibraryDidChange(_:)] method. When implementing this method, ask the [doc:\/\/com.apple.photokit\/documentation\/Photos\/PHChange] instance for details about changes to any of the objects. When assets are added or removed, the sample project calls [doc:\/\/com.apple.photokit\/documentation\/PhotosUI\/PHProjectExtensionContext\/updatedProjectInfo(from:completion:)] to get an updated [doc:\/\/com.apple.photokit\/documentation\/PhotosUI\/PHProjectInfo] instance that you use to refresh your UI.\n\n### Support Copy and Paste\n\nIf your extension handles the paste action, implement the [doc:\/\/com.apple.documentation\/documentation\/objectivec\/nsobject\/1518160-validatemenuitem] delegate method to handle pasteboard contents.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/PhotoKit\/creating-a-slideshow-project-extension-for-photos\ncrawled: 2025-12-02T15:31:50Z\n---\n\n# Creating a Slideshow Project Extension for Photos\n\n**Sample Code**\n\nAugment the macOS Photos app with extensions that support project creation.\n\n## Overview\n\nStarting in macOS 10.13, you can create Photos project extensions. This sample app shows you how to implement a slideshow extension that transitions between photos by zooming in on a region of interest (ROI) with significant meaning in an asset, for example, faces that are relevant to a user, as opposed to faces in a crowd. The app demonstrates the computation of saliency based on an ROI’s weight and quality and the process of subscribing to change notifications so your extension can respond to asset modifications.\n\n### Configure the Sample Code Project\n\nIn the extension’s `Info.plist` file, choose the extension type by entering `slideshow` in the field at `NSExtension` > `NSExtensionAttributes` > [doc:\/\/com.apple.photokit\/documentation\/PhotosUI\/PHProjectCategory]. Add more categories to the information property list for your extension to appear in other categories in the Create menu.\n\nBuild and run the Photos Project Slideshow scheme in Xcode once to run the sample app and install the extension in the macOS Photos app. To use the extension, build and run the Slideshow Sample scheme in Xcode, which prompts you to open the macOS Photos app to use the extension.\n\nFrom within the Photos app, access the Create categories by choosing File > Create or right-clicking any group of assets. Under the Slideshow category, you’ll see the app extension and can create a project to run in it.\n\nBecause the project extension runs inside the Photos app, the sample emulates the grid layout of the user’s photo assets. Pressing the play button in the upper-right corner of the extension starts the slideshow.\n\n### Customize the Focus Rectangle of the Zoom Transition\n\nThe sample code project contains custom `Animator` and `AssetModel` classes.\n\nThe `Animator` class handles transitions between photos in the slideshow. This sample’s `Animator` asks an `AssetModel` object for a rectangle to zoom in on. Photos identifies each ROI it finds as a possible ROI, and the sample uses the bounding box of the most salient one as the preferred zoom rectangle. The code defines saliency of a [doc:\/\/com.apple.photokit\/documentation\/PhotosUI\/PHProjectRegionOfInterest] as the sum of its [doc:\/\/com.apple.photokit\/documentation\/PhotosUI\/PHProjectRegionOfInterest\/weight] and [doc:\/\/com.apple.photokit\/documentation\/PhotosUI\/PHProjectRegionOfInterest\/quality] values, and then sorts the array of the photo’s regions by that value.\n\n```swift\nlet sortedRois = assetProjectElement.regionsOfInterest.sorted { (roi1, roi2) -> Bool in\n    return roi1.weight + roi1.quality < roi2.weight + roi2.quality\n}\nreturn sortedRois.last?.rect\n```\n\nThe `weight` of an ROI represents the pervasiveness of the ROI in the project as a whole. The `quality` score represents the quality of the ROI in the individual asset, based on factors such as sharpness, visibility, and prominence in the photo. Adding these two values is a heuristic for determining the ROI’s relative importance throughout a photo project.\n\n### Respond to Asset Changes in the Project\n\nTo respond to asset changes in the Photos Library, your app extension needs to monitor change notifications. Register for change observation as soon as the project begins or resumes. In the [doc:\/\/com.apple.photokit\/documentation\/PhotosUI\/PHProjectExtensionController] protocol, the [doc:\/\/com.apple.photokit\/documentation\/PhotosUI\/PHProjectExtensionController\/beginProject(with:projectInfo:completion:)] and [doc:\/\/com.apple.photokit\/documentation\/PhotosUI\/PHProjectExtensionController\/resumeProject(with:completion:)] methods provide points for your extension to begin monitoring changes.\n\n```swift\nself.projectAssets = PHAsset.fetchAssets(in: extensionContext.project, options: nil)\nextensionContext.photoLibrary.register(self)\n```\n\nWhen the project is complete, use the [doc:\/\/com.apple.photokit\/documentation\/PhotosUI\/PHProjectExtensionController\/finishProject(completionHandler:)] protocol method to unregister from change observation.\n\n```swift\nlibrary.unregisterChangeObserver(self)\n```\n\nWhenever something changes in the Photos library, the system calls the [doc:\/\/com.apple.photokit\/documentation\/Photos\/PHPhotoLibraryChangeObserver\/photoLibraryDidChange(_:)] method. When implementing this method, ask the [doc:\/\/com.apple.photokit\/documentation\/Photos\/PHChange] instance for details about changes to any of the objects. When assets are added or removed, the sample project calls [doc:\/\/com.apple.photokit\/documentation\/PhotosUI\/PHProjectExtensionContext\/updatedProjectInfo(from:completion:)] to get an updated [doc:\/\/com.apple.photokit\/documentation\/PhotosUI\/PHProjectInfo] instance that you use to refresh your UI.\n\n```swift\nfunc photoLibraryDidChange(_ changeInstance: PHChange) {\n    guard let fetchResult = projectAssets,\n        let changeDetails = changeInstance.changeDetails(for: fetchResult)\n        else { return }\n    projectAssets = changeDetails.fetchResultAfterChanges\n\n    guard let projectExtensionContext = projectExtensionContext else { return }\n    projectExtensionContext.updatedProjectInfo(from: projectModel?.projectInfo) { (updatedProjectInfo) in\n        guard let projectInfo = updatedProjectInfo else { return }\n        DispatchQueue.main.async {\n            self.setupProjectModel(with: projectInfo, extensionContext: projectExtensionContext)\n        }\n    }\n}\n```\n\n### Support Copy and Paste\n\nIf your extension handles the paste action, implement the [doc:\/\/com.apple.documentation\/documentation\/objectivec\/nsobject\/1518160-validatemenuitem] delegate method to handle pasteboard contents.\n\n```\nfunc validateMenuItem(_ menuItem: NSMenuItem) -> Bool {\n    var canHandlePaste = false\n    if menuItem.action == #selector(paste(_:)) {\n        canHandlePaste = canHandleCurrentPasteboardContent()\n    }\n    return canHandlePaste\n}\n```\n\n## Sample code\n\n- **Browsing and Modifying Photo Albums**: Help users organize their photos into albums and browse photo collections in a grid-based layout using PhotoKit.\n- **Selecting Photos and Videos in iOS**: Improve the user experience of finding and selecting assets by using the Photos picker.\n- **Bringing Photos picker to your SwiftUI app**: Select media assets by using a Photos picker view that SwiftUI provides.\n- **Implementing an inline Photos picker**: Embed a system-provided, half-height Photos picker into your app’s view.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Help users organize their photos into albums and browse photo collections in a grid-based layout using PhotoKit.",
          "name" : "Browsing and Modifying Photo Albums",
          "url" : "https:\/\/developer.apple.com\/documentation\/PhotoKit\/browsing-and-modifying-photo-albums"
        },
        {
          "description" : "Improve the user experience of finding and selecting assets by using the Photos picker.",
          "name" : "Selecting Photos and Videos in iOS",
          "url" : "https:\/\/developer.apple.com\/documentation\/PhotoKit\/selecting-photos-and-videos-in-ios"
        },
        {
          "description" : "Select media assets by using a Photos picker view that SwiftUI provides.",
          "name" : "Bringing Photos picker to your SwiftUI app",
          "url" : "https:\/\/developer.apple.com\/documentation\/PhotoKit\/bringing-photos-picker-to-your-swiftui-app"
        },
        {
          "description" : "Embed a system-provided, half-height Photos picker into your app’s view.",
          "name" : "Implementing an inline Photos picker",
          "url" : "https:\/\/developer.apple.com\/documentation\/PhotoKit\/implementing-an-inline-photos-picker"
        }
      ],
      "title" : "Sample code"
    }
  ],
  "source" : "appleJSON",
  "title" : "Creating a Slideshow Project Extension for Photos",
  "url" : "https:\/\/developer.apple.com\/documentation\/PhotoKit\/creating-a-slideshow-project-extension-for-photos"
}