{
  "abstract" : "Improve the user experience of finding and selecting assets by using the Photos picker.",
  "codeExamples" : [
    {
      "code" : "var configuration = PHPickerConfiguration(photoLibrary: .shared())",
      "language" : "swift"
    },
    {
      "code" : "var newFilter = PHPickerFilter.any(of: [.livePhotos, .videos])",
      "language" : "swift"
    },
    {
      "code" : "\/\/ Set the filter type according to the user’s selection.\nconfiguration.filter = filter\n\/\/ Set the mode to avoid transcoding, if possible, if your app supports arbitrary image\/video encodings.\nconfiguration.preferredAssetRepresentationMode = .current\n\/\/ Set the selection behavior to respect the user’s selection order.\nconfiguration.selection = .ordered\n\/\/ Set the selection limit to enable multiselection.\nconfiguration.selectionLimit = 0\n\/\/ Set the preselected asset identifiers with the identifiers that the app tracks.\nconfiguration.preselectedAssetIdentifiers = selectedAssetIdentifiers",
      "language" : "swift"
    },
    {
      "code" : "let picker = PHPickerViewController(configuration: configuration)\npicker.delegate = self\npresent(picker, animated: true)",
      "language" : "swift"
    },
    {
      "code" : "let existingSelection = self.selection\nvar newSelection = [String: PHPickerResult]()\nfor result in results {\n    let identifier = result.assetIdentifier!\n    newSelection[identifier] = existingSelection[identifier] ?? result\n}\n\n\/\/ Track the selection in case the user deselects it later.\nselection = newSelection\nselectedAssetIdentifiers = results.map(\\.assetIdentifier!)\nselectedAssetIdentifierIterator = selectedAssetIdentifiers.makeIterator()\n\nif selection.isEmpty {\n    displayEmptyImage()\n} else {\n    displayNext()\n}",
      "language" : "swift"
    },
    {
      "code" : "guard let assetIdentifier = selectedAssetIdentifierIterator?.next() else { return }\ncurrentAssetIdentifier = assetIdentifier\n\nlet progress: Progress?\nlet itemProvider = selection[assetIdentifier]!.itemProvider\nif itemProvider.canLoadObject(ofClass: PHLivePhoto.self) {\n    progress = itemProvider.loadObject(ofClass: PHLivePhoto.self) { [weak self] livePhoto, error in\n        DispatchQueue.main.async {\n            self?.handleCompletion(assetIdentifier: assetIdentifier, object: livePhoto, error: error)\n        }\n    }\n}",
      "language" : "swift"
    },
    {
      "code" : "if itemProvider.hasItemConformingToTypeIdentifier(UTType.image.identifier) {\n    itemProvider.loadDataRepresentation(forTypeIdentifier: UTType.image.identifier) { data, error in\n        guard let data = data,\n              let cgImageSource = CGImageSourceCreateWithData(data as CFData, nil),\n              let properties = CGImageSourceCopyPropertiesAtIndex(cgImageSource, 0, nil) else { return }\n        print(properties)\n    }\n}",
      "language" : "swift"
    }
  ],
  "contentHash" : "d72cc0bb972a58000c431319a9a02f2c39e3d943a2e31083369bf950c050c8cc",
  "crawledAt" : "2025-12-02T15:50:05Z",
  "id" : "99CEFF0E-7E08-459B-BC69-10F3546A457A",
  "kind" : "unknown",
  "language" : "swift",
  "module" : "PhotosUI",
  "overview" : "## Overview\n\nThis sample shows how to use the [doc:\/\/com.apple.photokit\/documentation\/PhotoKit] Photos picker, and illustrates how to filter assets according to the user’s selection. After you have a selection, you use an item provider to load the asset to display in the app. The sample also explores the new configuration options in iOS 15.\n\n### Understand the Photos Picker Benefits\n\nBoth [doc:\/\/com.apple.photokit\/documentation\/PhotosUI\/PHPickerViewController] and [doc:\/\/com.apple.documentation\/documentation\/UIKit\/UIImagePickerController] use the out-of-process Photos picker user interface. The `PHPickerViewController` contains a powerful set of APIs that make it a great alternative to `UIImagePickerController`. `PHPickerViewController` improves stability and reliability, and includes several benefits to developers and users, such as the following:\n\nApps don’t need to request photo library permission when using either class, so the sample app avoids requesting permission until it’s necessary. A camera app, photo editing app, or library browsing app needs to use much more of [doc:\/\/com.apple.photokit\/documentation\/PhotoKit]‘s functionality, but an app that’s only setting a basic profile photo doesn’t need photo library permission. An app that only saves photos to the photo library can use the Add Photos Only permission level when requesting authorization.\n\n### Configure the Photos Picker\n\nBefore displaying the photo library, the sample creates a [doc:\/\/com.apple.photokit\/documentation\/PhotosUI\/PHPickerConfiguration-swift.struct] object using the shared photo library. Creating a configuration without a photo library provides only asset data, and doesn’t include asset identifiers.\n\nThe picker displays all asset types by default. A filter configures the picker to display videos, images with live photos, or live photos only. The sample contains three buttons that reflect the available filter types.\n\nAn app creates custom filters by combining filter options. For example, the following code displays live photos and videos:\n\nA new feature in iOS 15 is the capability to change the selection behavior. The sample sets the selection property to `ordered`, which places a numbered checkmark when selecting items, and disables swipe to select.\n\nThe preselection API allows for presenting the picker with selected photos. This gives the user the opportunity to select more photos, or to deselect preselected photos.\n\n### Display a Picker with the Configuration\n\nThe sample creates and displays the picker using the configuration object. Displaying the photo library doesn’t need user permission because it’s running in a separate process. An app can’t take screenshots of content and can only read the assets that the user selects.\n\nApps are responsible for presenting and dismissing the photo library. The sample adopts to the photo library delegate that notifies the app when the user cancels the flow.\n\nSee [doc:\/\/com.apple.photokit\/documentation\/PhotoKit\/delivering-an-enhanced-privacy-experience-in-your-photos-app] to learn more about requesting authorization and limited library capabilities.\n\n### Retrieve the Selected Results\n\nWhen completing a picker session, the delegate provides a list of result objects that contain an item provider that allows for loading data asynchronously. The results contain local identifiers because of initializing the configuration with a photo library.\n\nThe sample stores the selected asset identifiers to preload them when displaying the photo library again.\n\n### Fetch Selected Asset Data for Display\n\nAn item provider gives an app the ability to load assets asynchronously and on demand. Before loading an object, the sample verifies that the object is available.\n\nAn item provider also allows for progress reporting. An asset may not be available on-device if iCloud Photos and Optimize Storage aren’t active. In this case, it can take some time to download a large asset. An item provider returns a [doc:\/\/com.apple.documentation\/documentation\/Foundation\/Progress] object that conveys ongoing progress to an app.\n\n### Load Asset Metadata\n\nRetrieving metadata for an asset doesn’t require special permission. An app can get the properties after loading an object from an item provider. However, it may not include all properties because of the transcoding process.\n\nThe following code retrieves the property list by checking that the item provider conforms to an image type identifier. After confirming, it loads the data representation of an asset, which avoids losing information from transcoding, and allows for better metadata retrieval.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/PhotoKit\/selecting-photos-and-videos-in-ios\ncrawled: 2025-12-02T15:50:05Z\n---\n\n# Selecting Photos and Videos in iOS\n\n**Sample Code**\n\nImprove the user experience of finding and selecting assets by using the Photos picker.\n\n## Overview\n\nThis sample shows how to use the [doc:\/\/com.apple.photokit\/documentation\/PhotoKit] Photos picker, and illustrates how to filter assets according to the user’s selection. After you have a selection, you use an item provider to load the asset to display in the app. The sample also explores the new configuration options in iOS 15.\n\n\n\n### Understand the Photos Picker Benefits\n\nBoth [doc:\/\/com.apple.photokit\/documentation\/PhotosUI\/PHPickerViewController] and [doc:\/\/com.apple.documentation\/documentation\/UIKit\/UIImagePickerController] use the out-of-process Photos picker user interface. The `PHPickerViewController` contains a powerful set of APIs that make it a great alternative to `UIImagePickerController`. `PHPickerViewController` improves stability and reliability, and includes several benefits to developers and users, such as the following:\n\n- Deferred image loading and recovery UI\n- Reliable handling of large and complex assets, like RAW and panoramic images\n- User-selectable assets that aren’t available for `UIImagePickerController`\n- Configuration of the picker to only display Live Photos\n- Availability of [doc:\/\/com.apple.photokit\/documentation\/Photos\/PHLivePhoto] objects without library access\n- Stricter validations against invalid inputs\n\nApps don’t need to request photo library permission when using either class, so the sample app avoids requesting permission until it’s necessary. A camera app, photo editing app, or library browsing app needs to use much more of [doc:\/\/com.apple.photokit\/documentation\/PhotoKit]‘s functionality, but an app that’s only setting a basic profile photo doesn’t need photo library permission. An app that only saves photos to the photo library can use the Add Photos Only permission level when requesting authorization.\n\n### Configure the Photos Picker\n\nBefore displaying the photo library, the sample creates a [doc:\/\/com.apple.photokit\/documentation\/PhotosUI\/PHPickerConfiguration-swift.struct] object using the shared photo library. Creating a configuration without a photo library provides only asset data, and doesn’t include asset identifiers.\n\n```swift\nvar configuration = PHPickerConfiguration(photoLibrary: .shared())\n```\n\nThe picker displays all asset types by default. A filter configures the picker to display videos, images with live photos, or live photos only. The sample contains three buttons that reflect the available filter types.\n\nAn app creates custom filters by combining filter options. For example, the following code displays live photos and videos:\n\n```swift\nvar newFilter = PHPickerFilter.any(of: [.livePhotos, .videos])\n```\n\nA new feature in iOS 15 is the capability to change the selection behavior. The sample sets the selection property to `ordered`, which places a numbered checkmark when selecting items, and disables swipe to select.\n\nThe preselection API allows for presenting the picker with selected photos. This gives the user the opportunity to select more photos, or to deselect preselected photos.\n\n```swift\n\/\/ Set the filter type according to the user’s selection.\nconfiguration.filter = filter\n\/\/ Set the mode to avoid transcoding, if possible, if your app supports arbitrary image\/video encodings.\nconfiguration.preferredAssetRepresentationMode = .current\n\/\/ Set the selection behavior to respect the user’s selection order.\nconfiguration.selection = .ordered\n\/\/ Set the selection limit to enable multiselection.\nconfiguration.selectionLimit = 0\n\/\/ Set the preselected asset identifiers with the identifiers that the app tracks.\nconfiguration.preselectedAssetIdentifiers = selectedAssetIdentifiers\n```\n\n### Display a Picker with the Configuration\n\nThe sample creates and displays the picker using the configuration object. Displaying the photo library doesn’t need user permission because it’s running in a separate process. An app can’t take screenshots of content and can only read the assets that the user selects.\n\n```swift\nlet picker = PHPickerViewController(configuration: configuration)\npicker.delegate = self\npresent(picker, animated: true)\n```\n\nApps are responsible for presenting and dismissing the photo library. The sample adopts to the photo library delegate that notifies the app when the user cancels the flow.\n\nSee [doc:\/\/com.apple.photokit\/documentation\/PhotoKit\/delivering-an-enhanced-privacy-experience-in-your-photos-app] to learn more about requesting authorization and limited library capabilities.\n\n### Retrieve the Selected Results\n\nWhen completing a picker session, the delegate provides a list of result objects that contain an item provider that allows for loading data asynchronously. The results contain local identifiers because of initializing the configuration with a photo library.\n\nThe sample stores the selected asset identifiers to preload them when displaying the photo library again.\n\n```swift\nlet existingSelection = self.selection\nvar newSelection = [String: PHPickerResult]()\nfor result in results {\n    let identifier = result.assetIdentifier!\n    newSelection[identifier] = existingSelection[identifier] ?? result\n}\n\n\/\/ Track the selection in case the user deselects it later.\nselection = newSelection\nselectedAssetIdentifiers = results.map(\\.assetIdentifier!)\nselectedAssetIdentifierIterator = selectedAssetIdentifiers.makeIterator()\n\nif selection.isEmpty {\n    displayEmptyImage()\n} else {\n    displayNext()\n}\n```\n\n### Fetch Selected Asset Data for Display\n\nAn item provider gives an app the ability to load assets asynchronously and on demand. Before loading an object, the sample verifies that the object is available.\n\nAn item provider also allows for progress reporting. An asset may not be available on-device if iCloud Photos and Optimize Storage aren’t active. In this case, it can take some time to download a large asset. An item provider returns a [doc:\/\/com.apple.documentation\/documentation\/Foundation\/Progress] object that conveys ongoing progress to an app.\n\n```swift\nguard let assetIdentifier = selectedAssetIdentifierIterator?.next() else { return }\ncurrentAssetIdentifier = assetIdentifier\n\nlet progress: Progress?\nlet itemProvider = selection[assetIdentifier]!.itemProvider\nif itemProvider.canLoadObject(ofClass: PHLivePhoto.self) {\n    progress = itemProvider.loadObject(ofClass: PHLivePhoto.self) { [weak self] livePhoto, error in\n        DispatchQueue.main.async {\n            self?.handleCompletion(assetIdentifier: assetIdentifier, object: livePhoto, error: error)\n        }\n    }\n}\n```\n\n### Load Asset Metadata\n\nRetrieving metadata for an asset doesn’t require special permission. An app can get the properties after loading an object from an item provider. However, it may not include all properties because of the transcoding process.\n\nThe following code retrieves the property list by checking that the item provider conforms to an image type identifier. After confirming, it loads the data representation of an asset, which avoids losing information from transcoding, and allows for better metadata retrieval.\n\n```swift\nif itemProvider.hasItemConformingToTypeIdentifier(UTType.image.identifier) {\n    itemProvider.loadDataRepresentation(forTypeIdentifier: UTType.image.identifier) { data, error in\n        guard let data = data,\n              let cgImageSource = CGImageSourceCreateWithData(data as CFData, nil),\n              let properties = CGImageSourceCopyPropertiesAtIndex(cgImageSource, 0, nil) else { return }\n        print(properties)\n    }\n}\n```\n\n## Sample code\n\n- **Browsing and Modifying Photo Albums**: Help users organize their photos into albums and browse photo collections in a grid-based layout using PhotoKit.\n- **Bringing Photos picker to your SwiftUI app**: Select media assets by using a Photos picker view that SwiftUI provides.\n- **Implementing an inline Photos picker**: Embed a system-provided, half-height Photos picker into your app’s view.\n- **Creating a Slideshow Project Extension for Photos**: Augment the macOS Photos app with extensions that support project creation.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Help users organize their photos into albums and browse photo collections in a grid-based layout using PhotoKit.",
          "name" : "Browsing and Modifying Photo Albums",
          "url" : "https:\/\/developer.apple.com\/documentation\/PhotoKit\/browsing-and-modifying-photo-albums"
        },
        {
          "description" : "Select media assets by using a Photos picker view that SwiftUI provides.",
          "name" : "Bringing Photos picker to your SwiftUI app",
          "url" : "https:\/\/developer.apple.com\/documentation\/PhotoKit\/bringing-photos-picker-to-your-swiftui-app"
        },
        {
          "description" : "Embed a system-provided, half-height Photos picker into your app’s view.",
          "name" : "Implementing an inline Photos picker",
          "url" : "https:\/\/developer.apple.com\/documentation\/PhotoKit\/implementing-an-inline-photos-picker"
        },
        {
          "description" : "Augment the macOS Photos app with extensions that support project creation.",
          "name" : "Creating a Slideshow Project Extension for Photos",
          "url" : "https:\/\/developer.apple.com\/documentation\/PhotoKit\/creating-a-slideshow-project-extension-for-photos"
        }
      ],
      "title" : "Sample code"
    }
  ],
  "source" : "appleJSON",
  "title" : "Selecting Photos and Videos in iOS",
  "url" : "https:\/\/developer.apple.com\/documentation\/PhotoKit\/selecting-photos-and-videos-in-ios"
}