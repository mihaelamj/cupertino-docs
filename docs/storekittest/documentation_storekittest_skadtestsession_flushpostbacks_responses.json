{
  "abstract" : "Sends the test postbacks and handles the responses.",
  "codeExamples" : [

  ],
  "contentHash" : "9d03a81fbedb60638c3ba416b704eaedd8b3826c2b43d765be3bb12f99e22158",
  "crawledAt" : "2025-12-01T00:08:57Z",
  "declaration" : {
    "code" : "func flushPostbacks(responses: @escaping ([String : SKAdTestPostbackResponse]?, (any Error)?) -> Void)",
    "language" : "swift"
  },
  "id" : "BC30E42C-3AE7-483F-AB05-D676524C14CD",
  "kind" : "method",
  "module" : "StoreKit Test",
  "overview" : "## Discussion\n\nThis method sends the test postbacks that you set up using [doc:\/\/com.apple.storekittest\/documentation\/StoreKitTest\/SKAdTestSession\/setPostbacks(_:)] to the server URL provided in each postback, and then deletes them from this test session. Note that you set up the postback server URL when you create the postback instance using [doc:\/\/com.apple.storekittest\/documentation\/StoreKitTest\/SKAdTestPostback].\n\nThis method calls the response handler with either a dictionary that contains postback [doc:\/\/com.apple.storekittest\/documentation\/StoreKitTest\/SKAdTestPostback\/transactionIdentifier] keys with their responses ([doc:\/\/com.apple.storekittest\/documentation\/StoreKitTest\/SKAdTestPostbackResponse]), or a single [doc:\/\/com.apple.storekittest\/documentation\/StoreKitTest\/SKAdTestError] error. If you receive an error, it indicates a failure that isn’t specific to any single postback, but is a general issue; for example, a test session has no postbacks, there’s a connectivity issue, or the postbacks aren’t registered.\n\nTo perform tests with postbacks, do the following:",
  "platforms" : [
    "iOS",
    "iPadOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/StoreKitTest\/SKAdTestSession\/flushPostbacks(responses:)\ncrawled: 2025-12-01T00:08:57Z\n---\n\n# flushPostbacks(responses:)\n\n**Instance Method**\n\nSends the test postbacks and handles the responses.\n\n## Declaration\n\n```swift\nfunc flushPostbacks(responses: @escaping ([String : SKAdTestPostbackResponse]?, (any Error)?) -> Void)\n```\n\n```swift\nfunc flushPostbacksWithResponses() async throws -> [String : SKAdTestPostbackResponse]\n```\n\n## Parameters\n\n- **responses**: A handler that matches the signature of [doc:\/\/com.apple.storekittest\/documentation\/StoreKitTest\/SKANTestPostbackResponseHandler].\n\n## Discussion\n\nThis method sends the test postbacks that you set up using [doc:\/\/com.apple.storekittest\/documentation\/StoreKitTest\/SKAdTestSession\/setPostbacks(_:)] to the server URL provided in each postback, and then deletes them from this test session. Note that you set up the postback server URL when you create the postback instance using [doc:\/\/com.apple.storekittest\/documentation\/StoreKitTest\/SKAdTestPostback].\n\nThis method calls the response handler with either a dictionary that contains postback [doc:\/\/com.apple.storekittest\/documentation\/StoreKitTest\/SKAdTestPostback\/transactionIdentifier] keys with their responses ([doc:\/\/com.apple.storekittest\/documentation\/StoreKitTest\/SKAdTestPostbackResponse]), or a single [doc:\/\/com.apple.storekittest\/documentation\/StoreKitTest\/SKAdTestError] error. If you receive an error, it indicates a failure that isn’t specific to any single postback, but is a general issue; for example, a test session has no postbacks, there’s a connectivity issue, or the postbacks aren’t registered.\n\nTo perform tests with postbacks, do the following:\n\n1. Create a test postback using [doc:\/\/com.apple.storekittest\/documentation\/StoreKitTest\/SKAdTestPostback].\n2. Add the test postbacks to the test session by calling [doc:\/\/com.apple.storekittest\/documentation\/StoreKitTest\/SKAdTestSession\/setPostbacks(_:)].\n3. In the code representing the advertised app, register the test postback by calling [doc:\/\/com.apple.documentation\/documentation\/StoreKit\/SKAdNetwork\/updatePostbackConversionValue(_:completionHandler:)]or [doc:\/\/com.apple.documentation\/documentation\/StoreKit\/SKAdNetwork\/registerAppForAdNetworkAttribution()].\n4. Optionally, update the conversion value by calling [doc:\/\/com.apple.documentation\/documentation\/StoreKit\/SKAdNetwork\/updatePostbackConversionValue(_:completionHandler:)].\n5. Call [doc:\/\/com.apple.storekittest\/documentation\/StoreKitTest\/SKAdTestSession\/flushPostbacks(responses:)] when you’re done updating the conversion value and are ready to test receiving postbacks on your server.\n\n## Adding and sending postbacks\n\n- **setPostbacks(_:)**: Add test postbacks to the test session.\n- **postbacks**: An array of test postbacks you set in the testing environment.\n- **SKANTestPostbackResponseHandler**: A type that represents the test postback response handler.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Add test postbacks to the test session.",
          "name" : "setPostbacks(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKitTest\/SKAdTestSession\/setPostbacks(_:)"
        },
        {
          "description" : "An array of test postbacks you set in the testing environment.",
          "name" : "postbacks",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKitTest\/SKAdTestSession\/postbacks"
        },
        {
          "description" : "A type that represents the test postback response handler.",
          "name" : "SKANTestPostbackResponseHandler",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKitTest\/SKANTestPostbackResponseHandler"
        }
      ],
      "title" : "Adding and sending postbacks"
    }
  ],
  "source" : "appleJSON",
  "title" : "flushPostbacks(responses:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/StoreKitTest\/SKAdTestSession\/flushPostbacks(responses:)"
}