{
  "abstract" : "Simulates a price increase that requires customer consent for an auto-renewable subscription.",
  "codeExamples" : [

  ],
  "contentHash" : "b0898e9d6abf20c7451fef538feba8205438375194aad447cb74707aea4e0229",
  "crawledAt" : "2025-12-05T12:53:59Z",
  "declaration" : {
    "code" : "func requestPriceIncreaseConsentForTransaction(identifier: Int) throws",
    "language" : "swift"
  },
  "id" : "ED1A40C0-0D35-415A-A651-CD0331168BE6",
  "kind" : "method",
  "language" : "swift",
  "module" : "StoreKit Test",
  "overview" : "## Discussion\n\nUse this method to test how your app handles a price increase consent flow. When you call this method, the testing environment assigns a pending price increase to the subscription indicated by the `identifier`. It also sends the price increase consent message to your app. Note that in the testing environment, changing the price of the subscription is optional.\n\nYou may call this method repeatedly to prompt the testing environment to send the price increase consent message.\n\nBy default, if your app doesn’t listen for [doc:\/\/com.apple.documentation\/documentation\/StoreKit\/Message\/messages-swift.type.property] or implement [doc:\/\/com.apple.documentation\/documentation\/StoreKit\/SKPaymentQueueDelegate\/paymentQueueShouldShowPriceConsent(_:)], the system displays the price increase consent sheet immediately. Your app may delay displaying the sheet to ensure a good user experience. For more information, see [doc:\/\/com.apple.documentation\/documentation\/StoreKit\/Message\/Messages-swift.struct] for apps that run in iOS 16 and later, and [doc:\/\/com.apple.documentation\/documentation\/StoreKit\/SKPaymentQueueDelegate\/paymentQueueShouldShowPriceConsent(_:)] and [doc:\/\/com.apple.documentation\/documentation\/StoreKit\/SKPaymentQueue\/showPriceConsentIfNeeded()] for apps that run in earlier versions.\n\nWhen the system displays the price increase consent sheet, it awaits a response from the user, which may be one of the following:\n\nSee the sections below for information about simulating these user responses in the testing environment. The system removes the pending price increase status when the user consents to the price increase, the subscription expires, or the user cancels the subscription and auto-renew is disabled.\n\nFor more information about increasing prices of auto-renewable subscriptions, see [https:\/\/developer.apple.com\/app-store\/subscriptions\/#managing-prices-for-existing-subscribers].\n\n### Test with dialogs enabled\n\nStart with [doc:\/\/com.apple.storekittest\/documentation\/StoreKitTest\/SKTestSession\/disableDialogs] set to `false`, so the system displays the price increase consent sheet in the testing environment.\n\nTo simulate a user consenting to a price increase, the tester consents to the price increase in the sheet. The auto-renewable subscription renews at the next renewal period.\n\nTo simulate a user not responding to the price increase, the tester closes the price increase consent sheet without consenting. The auto-renewable subscription expires at the end of the renewal period because the user didn’t consent to the price increase. To speed up the subscription expiration in the testing environment, set a shorter time rate in the [doc:\/\/com.apple.storekittest\/documentation\/StoreKitTest\/SKTestSession\/timeRate-swift.property] variable.\n\nTo simulate a user canceling their subscription, the tester closes the price increase consent sheet without consenting. On the next sheet, select to cancel the subscription. The auto-renewable subscription doesn’t renew at the next renewal period.\n\n### Test with dialogs disabled\n\nStart with [doc:\/\/com.apple.storekittest\/documentation\/StoreKitTest\/SKTestSession\/disableDialogs] set to `true`, so the system doesn’t displays the price increase consent sheet in the testing environment.\n\nTo simulate a user consenting to a price increase, call [doc:\/\/com.apple.storekittest\/documentation\/StoreKitTest\/SKTestSession\/consentToPriceIncreaseForTransaction(identifier:)]. The auto-renewable subscription renews at the next renewal period.\n\nTo simulate a user not responding to the price increase consent, wait until the end of the subscription’s renewal period. The auto-renewable subscription expires because the user didn’t consent to the price increase. To speed up the subscription expiration in the testing environment, set a shorter time rate in the [doc:\/\/com.apple.storekittest\/documentation\/StoreKitTest\/SKTestSession\/timeRate-swift.property] variable.\n\nTo simulate the user canceling their subscription, call [doc:\/\/com.apple.storekittest\/documentation\/StoreKitTest\/SKTestSession\/declinePriceIncreaseForTransaction(identifier:)]. The subscription doesn’t renew at the next renewal period because the auto-renew setting is off.",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "tvOS",
    "visionOS",
    "watchOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/StoreKitTest\/SKTestSession\/requestPriceIncreaseConsentForTransaction(identifier:)\ncrawled: 2025-12-05T12:53:59Z\n---\n\n# requestPriceIncreaseConsentForTransaction(identifier:)\n\n**Instance Method**\n\nSimulates a price increase that requires customer consent for an auto-renewable subscription.\n\n## Declaration\n\n```swift\nfunc requestPriceIncreaseConsentForTransaction(identifier: Int) throws\n```\n\n## Parameters\n\n- **identifier**: The transaction [doc:\/\/com.apple.storekittest\/documentation\/StoreKitTest\/SKTestTransaction\/identifier] of the auto-renewable subscription to get a pending price increase.\n\n## Discussion\n\nUse this method to test how your app handles a price increase consent flow. When you call this method, the testing environment assigns a pending price increase to the subscription indicated by the `identifier`. It also sends the price increase consent message to your app. Note that in the testing environment, changing the price of the subscription is optional.\n\nYou may call this method repeatedly to prompt the testing environment to send the price increase consent message.\n\n\n\nBy default, if your app doesn’t listen for [doc:\/\/com.apple.documentation\/documentation\/StoreKit\/Message\/messages-swift.type.property] or implement [doc:\/\/com.apple.documentation\/documentation\/StoreKit\/SKPaymentQueueDelegate\/paymentQueueShouldShowPriceConsent(_:)], the system displays the price increase consent sheet immediately. Your app may delay displaying the sheet to ensure a good user experience. For more information, see [doc:\/\/com.apple.documentation\/documentation\/StoreKit\/Message\/Messages-swift.struct] for apps that run in iOS 16 and later, and [doc:\/\/com.apple.documentation\/documentation\/StoreKit\/SKPaymentQueueDelegate\/paymentQueueShouldShowPriceConsent(_:)] and [doc:\/\/com.apple.documentation\/documentation\/StoreKit\/SKPaymentQueue\/showPriceConsentIfNeeded()] for apps that run in earlier versions.\n\nWhen the system displays the price increase consent sheet, it awaits a response from the user, which may be one of the following:\n\n- The user consents to the price increase.\n- The user does nothing. The subscription expires at the end of the subscription period.\n- The user cancels the subscription.\n\nSee the sections below for information about simulating these user responses in the testing environment. The system removes the pending price increase status when the user consents to the price increase, the subscription expires, or the user cancels the subscription and auto-renew is disabled.\n\nFor more information about increasing prices of auto-renewable subscriptions, see [https:\/\/developer.apple.com\/app-store\/subscriptions\/#managing-prices-for-existing-subscribers].\n\n### Test with dialogs enabled\n\nStart with [doc:\/\/com.apple.storekittest\/documentation\/StoreKitTest\/SKTestSession\/disableDialogs] set to `false`, so the system displays the price increase consent sheet in the testing environment.\n\nTo simulate a user consenting to a price increase, the tester consents to the price increase in the sheet. The auto-renewable subscription renews at the next renewal period.\n\nTo simulate a user not responding to the price increase, the tester closes the price increase consent sheet without consenting. The auto-renewable subscription expires at the end of the renewal period because the user didn’t consent to the price increase. To speed up the subscription expiration in the testing environment, set a shorter time rate in the [doc:\/\/com.apple.storekittest\/documentation\/StoreKitTest\/SKTestSession\/timeRate-swift.property] variable.\n\nTo simulate a user canceling their subscription, the tester closes the price increase consent sheet without consenting. On the next sheet, select to cancel the subscription. The auto-renewable subscription doesn’t renew at the next renewal period.\n\n### Test with dialogs disabled\n\nStart with [doc:\/\/com.apple.storekittest\/documentation\/StoreKitTest\/SKTestSession\/disableDialogs] set to `true`, so the system doesn’t displays the price increase consent sheet in the testing environment.\n\n\n\nTo simulate a user consenting to a price increase, call [doc:\/\/com.apple.storekittest\/documentation\/StoreKitTest\/SKTestSession\/consentToPriceIncreaseForTransaction(identifier:)]. The auto-renewable subscription renews at the next renewal period.\n\nTo simulate a user not responding to the price increase consent, wait until the end of the subscription’s renewal period. The auto-renewable subscription expires because the user didn’t consent to the price increase. To speed up the subscription expiration in the testing environment, set a shorter time rate in the [doc:\/\/com.apple.storekittest\/documentation\/StoreKitTest\/SKTestSession\/timeRate-swift.property] variable.\n\nTo simulate the user canceling their subscription, call [doc:\/\/com.apple.storekittest\/documentation\/StoreKitTest\/SKTestSession\/declinePriceIncreaseForTransaction(identifier:)]. The subscription doesn’t renew at the next renewal period because the auto-renew setting is off.\n\n## Testing price increase consent\n\n- **consentToPriceIncreaseForTransaction(identifier:)**: Simulates a user consenting to a price increase for an auto-renewable subscription.\n- **declinePriceIncreaseForTransaction(identifier:)**: Simulates a user canceling an auto-renewable subscription by disabling auto-renew.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Simulates a user consenting to a price increase for an auto-renewable subscription.",
          "name" : "consentToPriceIncreaseForTransaction(identifier:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKitTest\/SKTestSession\/consentToPriceIncreaseForTransaction(identifier:)"
        },
        {
          "description" : "Simulates a user canceling an auto-renewable subscription by disabling auto-renew.",
          "name" : "declinePriceIncreaseForTransaction(identifier:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKitTest\/SKTestSession\/declinePriceIncreaseForTransaction(identifier:)"
        }
      ],
      "title" : "Testing price increase consent"
    }
  ],
  "source" : "appleJSON",
  "title" : "requestPriceIncreaseConsentForTransaction(identifier:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/StoreKitTest\/SKTestSession\/requestPriceIncreaseConsentForTransaction(identifier:)"
}