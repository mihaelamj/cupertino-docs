{
  "abstract" : "The class you use to test ad impressions and postbacks in Xcode.",
  "codeExamples" : [

  ],
  "conformsTo" : [
    "CVarArg",
    "CustomDebugStringConvertible",
    "CustomStringConvertible",
    "Equatable",
    "Hashable",
    "NSObjectProtocol"
  ],
  "contentHash" : "80921c83e950d94fae5c29e3ee654138bae4566430a1aaf9bec126a0ced363c0",
  "crawledAt" : "2025-12-02T16:15:16Z",
  "declaration" : {
    "code" : "class SKAdTestSession",
    "language" : "swift"
  },
  "id" : "25BA4BC1-3ABC-4E0E-9B60-6CF50D717A09",
  "kind" : "class",
  "language" : "swift",
  "module" : "StoreKit Test",
  "overview" : "## Overview\n\nUse the `SKAdTestSession` class to test your implementations of SKAdNetwork. Create one instance of this class to use in multiple test cases. The instance represents a test session, and holds a set of test postbacks. Use [doc:\/\/com.apple.storekittest\/documentation\/StoreKitTest\/SKAdTestPostback] to create test postbacks. Call [doc:\/\/com.apple.storekittest\/documentation\/StoreKitTest\/SKAdTestSession\/setPostbacks(_:)] to add test postbacks to the test session. The test session deletes the postbacks from the instance after you call [doc:\/\/com.apple.storekittest\/documentation\/StoreKitTest\/SKAdTestSession\/flushPostbacks(responses:)].\n\n### Validate ad impressions\n\nIn the production environment, ad networks sign the ad impressions that apps display. In the testing environment, you have the opportunity to validate the ad impression signature. Ad networks provide two types of ads: StoreKit-rendered ads and view-through ads. To validate the ad impressions, use the following methods:\n\nYou need a cryptographic private key to generate signatures. Use a public\/private key pair that you create using an Elliptic Curve Digital Signature Algorithm (ECDSA) with a prime256V1 curve. Provide the public key in the validation methods. Secure your private keys as you would other credentials, such as passwords. Never share your private keys, store keys in a code repository, or include keys in client-facing code.\n\n### Test conversion values and postbacks\n\nIn the production environment, ad networks receive postbacks on their server after users install an advertised app and a timer expires. In the testing environment, you can control all aspects of the postback, including when it’s sent.\n\nIn the production environment, an advertised app may update a conversion value as the user interacts with the app. The final conversion value appears in the winning postback. In the testing environment, you have the opportunity to check the test postback before it’s sent to determine whether your app is updating conversion values as expected.\n\nTo perform tests on conversion values and postbacks, follow these steps:",
  "platforms" : [
    "iOS",
    "iPadOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/StoreKitTest\/SKAdTestSession\ncrawled: 2025-12-02T16:15:16Z\n---\n\n# SKAdTestSession\n\n**Class**\n\nThe class you use to test ad impressions and postbacks in Xcode.\n\n## Declaration\n\n```swift\nclass SKAdTestSession\n```\n\n## Overview\n\nUse the `SKAdTestSession` class to test your implementations of SKAdNetwork. Create one instance of this class to use in multiple test cases. The instance represents a test session, and holds a set of test postbacks. Use [doc:\/\/com.apple.storekittest\/documentation\/StoreKitTest\/SKAdTestPostback] to create test postbacks. Call [doc:\/\/com.apple.storekittest\/documentation\/StoreKitTest\/SKAdTestSession\/setPostbacks(_:)] to add test postbacks to the test session. The test session deletes the postbacks from the instance after you call [doc:\/\/com.apple.storekittest\/documentation\/StoreKitTest\/SKAdTestSession\/flushPostbacks(responses:)].\n\n\n\n### Validate ad impressions\n\nIn the production environment, ad networks sign the ad impressions that apps display. In the testing environment, you have the opportunity to validate the ad impression signature. Ad networks provide two types of ads: StoreKit-rendered ads and view-through ads. To validate the ad impressions, use the following methods:\n\n- [doc:\/\/com.apple.storekittest\/documentation\/StoreKitTest\/SKAdTestSession\/validate(_:publicKey:)] to test your signature for view-through ads\n- [doc:\/\/com.apple.storekittest\/documentation\/StoreKitTest\/SKAdTestSession\/validateImpression(parameters:publicKey:)] to test your signature for StoreKit-rendered ads\n- [doc:\/\/com.apple.storekittest\/documentation\/StoreKitTest\/SKAdTestSession\/validateWebAdImpressionPayload(_:publicKey:)] to test your signature for web ads\n\nYou need a cryptographic private key to generate signatures. Use a public\/private key pair that you create using an Elliptic Curve Digital Signature Algorithm (ECDSA) with a prime256V1 curve. Provide the public key in the validation methods. Secure your private keys as you would other credentials, such as passwords. Never share your private keys, store keys in a code repository, or include keys in client-facing code.\n\n### Test conversion values and postbacks\n\nIn the production environment, ad networks receive postbacks on their server after users install an advertised app and a timer expires. In the testing environment, you can control all aspects of the postback, including when it’s sent.\n\nIn the production environment, an advertised app may update a conversion value as the user interacts with the app. The final conversion value appears in the winning postback. In the testing environment, you have the opportunity to check the test postback before it’s sent to determine whether your app is updating conversion values as expected.\n\nTo perform tests on conversion values and postbacks, follow these steps:\n\n1. Create up to six test postbacks using [doc:\/\/com.apple.storekittest\/documentation\/StoreKitTest\/SKAdTestPostback].\n2. Add the test postbacks to the test session by calling [doc:\/\/com.apple.storekittest\/documentation\/StoreKitTest\/SKAdTestSession\/setPostbacks(_:)].\n3. In the code representing the advertised app, register the test postbacks by calling [doc:\/\/com.apple.documentation\/documentation\/StoreKit\/SKAdNetwork\/updatePostbackConversionValue(_:completionHandler:)]or [doc:\/\/com.apple.documentation\/documentation\/StoreKit\/SKAdNetwork\/registerAppForAdNetworkAttribution()].\n4. To test conversion values, call [doc:\/\/com.apple.documentation\/documentation\/StoreKit\/SKAdNetwork\/updatePostbackConversionValue(_:completionHandler:)] to update the conversion value of the winning test postback.\n5. Call [doc:\/\/com.apple.storekittest\/documentation\/StoreKitTest\/SKAdTestSession\/flushPostbacks(responses:)] when you’re done updating the conversion value and are ready to test receiving postbacks on your server. This method sends the test postbacks to your server, and removes them from the test session.\n\n## Validating impressions\n\n- **validate(_:publicKey:)**: Validates an impression for a view-through ad.\n- **validateImpression(parameters:publicKey:)**: Validates an impression for a StoreKit-rendered ad.\n- **validateWebAdImpressionPayload(_:publicKey:)**: Validates an impression for a web ad.\n\n## Adding and sending postbacks\n\n- **setPostbacks(_:)**: Add test postbacks to the test session.\n- **postbacks**: An array of test postbacks you set in the testing environment.\n- **flushPostbacks(responses:)**: Sends the test postbacks and handles the responses.\n- **SKANTestPostbackResponseHandler**: A type that represents the test postback response handler.\n\n## Viewing the developer postback URL\n\n- **developerPostbackURL**: The URL that SKAdNetwork computes to send copies of winning postbacks to the advertised app’s developer.\n\n## Initializing test sessions\n\n- **init()**: Initializes an SKAdNetwork test session.\n\n## Ad impression and postback testing\n\n- **Testing and validating ad impression signatures and postbacks for SKAdNetwork**: Validate your ad impressions and test your postbacks by creating unit tests using the StoreKit Test framework.\n- **SKAdTestPostback**: A test postback that contains ad conversion information in the testing environment.\n- **SKAdTestPostbackResponse**: The status and error information for a postback that the system sends in the testing environment.\n- **SKAdTestPostbackVersion**: A constant that indicates the postback version.\n\n## Inherits From\n\n- NSObject\n\n## Conforms To\n\n- CVarArg\n- CustomDebugStringConvertible\n- CustomStringConvertible\n- Equatable\n- Hashable\n- NSObjectProtocol\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Validates an impression for a view-through ad.",
          "name" : "validate(_:publicKey:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKitTest\/SKAdTestSession\/validate(_:publicKey:)"
        },
        {
          "description" : "Validates an impression for a StoreKit-rendered ad.",
          "name" : "validateImpression(parameters:publicKey:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKitTest\/SKAdTestSession\/validateImpression(parameters:publicKey:)"
        },
        {
          "description" : "Validates an impression for a web ad.",
          "name" : "validateWebAdImpressionPayload(_:publicKey:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKitTest\/SKAdTestSession\/validateWebAdImpressionPayload(_:publicKey:)"
        }
      ],
      "title" : "Validating impressions"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Add test postbacks to the test session.",
          "name" : "setPostbacks(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKitTest\/SKAdTestSession\/setPostbacks(_:)"
        },
        {
          "description" : "An array of test postbacks you set in the testing environment.",
          "name" : "postbacks",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKitTest\/SKAdTestSession\/postbacks"
        },
        {
          "description" : "Sends the test postbacks and handles the responses.",
          "name" : "flushPostbacks(responses:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKitTest\/SKAdTestSession\/flushPostbacks(responses:)"
        },
        {
          "description" : "A type that represents the test postback response handler.",
          "name" : "SKANTestPostbackResponseHandler",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKitTest\/SKANTestPostbackResponseHandler"
        }
      ],
      "title" : "Adding and sending postbacks"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "The URL that SKAdNetwork computes to send copies of winning postbacks to the advertised app’s developer.",
          "name" : "developerPostbackURL",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKitTest\/SKAdTestSession\/developerPostbackURL"
        }
      ],
      "title" : "Viewing the developer postback URL"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Initializes an SKAdNetwork test session.",
          "name" : "init()",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKitTest\/SKAdTestSession\/init()"
        }
      ],
      "title" : "Initializing test sessions"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Validate your ad impressions and test your postbacks by creating unit tests using the StoreKit Test framework.",
          "name" : "Testing and validating ad impression signatures and postbacks for SKAdNetwork",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKitTest\/testing-and-validating-ad-impression-signatures-and-postbacks-for-skadnetwork"
        },
        {
          "description" : "A test postback that contains ad conversion information in the testing environment.",
          "name" : "SKAdTestPostback",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKitTest\/SKAdTestPostback"
        },
        {
          "description" : "The status and error information for a postback that the system sends in the testing environment.",
          "name" : "SKAdTestPostbackResponse",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKitTest\/SKAdTestPostbackResponse"
        },
        {
          "description" : "A constant that indicates the postback version.",
          "name" : "SKAdTestPostbackVersion",
          "url" : "https:\/\/developer.apple.com\/documentation\/StoreKitTest\/SKAdTestPostbackVersion"
        }
      ],
      "title" : "Ad impression and postback testing"
    },
    {
      "content" : "",
      "items" : [
        {
          "name" : "NSObject"
        }
      ],
      "title" : "Inherits From"
    }
  ],
  "source" : "appleJSON",
  "title" : "SKAdTestSession",
  "url" : "https:\/\/developer.apple.com\/documentation\/StoreKitTest\/SKAdTestSession"
}