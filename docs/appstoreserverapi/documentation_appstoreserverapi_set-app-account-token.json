{
  "abstract" : "Sets the app account token value for a purchase the customer makes outside of your app, or updates its value in an existing transaction.",
  "codeExamples" : [

  ],
  "contentHash" : "56390320b44237eafb26242cf824725b98e520c207fda8daad83976d37d18941",
  "crawledAt" : "2025-12-03T04:22:39Z",
  "id" : "CE99EBED-D731-4EC7-B1FD-C9F991373FE8",
  "kind" : "unknown",
  "language" : "data",
  "module" : "App Store Server API",
  "overview" : "## Discussion\n\nAn [doc:\/\/com.apple.appstoreserverapi\/documentation\/AppStoreServerAPI\/appAccountToken] is a UUID you create to associate a transaction with a customer account in your system. Use the [doc:\/\/com.apple.appstoreserverapi\/documentation\/AppStoreServerAPI\/Set-App-Account-Token] endpoint to set or reset the `appAccountToken` associated with the transaction you specify in the `originalTransactionId` parameter.\n\nTypically, your app sets the [doc:\/\/com.apple.documentation\/documentation\/StoreKit\/Product\/PurchaseOption\/appAccountToken(_:)] when a customer makes a purchase in your app. However, customers can also purchase in-app products outside of your app, for example, by redeeming an offer code in the App Store. In that case, the original transaction doesn’t include an app account token. Use the `Set App Account Token` endpoint to associate an app account token with such transactions.\n\nThis endpoint supports setting the `appAccountToken` for all product types, including one-time purchases (consumables, non-consumables, and non-renewing subscriptions) and auto-renewable subscriptions. If you call this endpoint for a transaction that already has an `appAccountToken`, the endpoint replaces the existing value with the new value you supply.\n\nFor auto-renewable subscriptions, the endpoint applies the `appAccountToken` to the current renewal transaction and subsequent renewals, but it doesn’t affect past transactions. The same `appAccountToken` continues to apply to renewal transactions if the customer upgrades, downgrades, or cross-grades the subscription.\n\nThis endpoint doesn’t support transactions for products shared through Family Sharing, where the transaction has an [doc:\/\/com.apple.appstoreserverapi\/documentation\/AppStoreServerAPI\/inAppOwnershipType] value of `FAMILY_SHARED`.\n\nYou can assign the same `appAccountToken` value to more than one transaction, according to your needs. For example, you may choose to reuse the same `appAccountToken` value for every transaction that belongs to the same customer.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/AppStoreServerAPI\/Set-App-Account-Token\ncrawled: 2025-12-03T04:22:39Z\n---\n\n# Set App Account Token\n\n**Web Service Endpoint**\n\nSets the app account token value for a purchase the customer makes outside of your app, or updates its value in an existing transaction.\n\n## Discussion\n\nAn [doc:\/\/com.apple.appstoreserverapi\/documentation\/AppStoreServerAPI\/appAccountToken] is a UUID you create to associate a transaction with a customer account in your system. Use the [doc:\/\/com.apple.appstoreserverapi\/documentation\/AppStoreServerAPI\/Set-App-Account-Token] endpoint to set or reset the `appAccountToken` associated with the transaction you specify in the `originalTransactionId` parameter.\n\nTypically, your app sets the [doc:\/\/com.apple.documentation\/documentation\/StoreKit\/Product\/PurchaseOption\/appAccountToken(_:)] when a customer makes a purchase in your app. However, customers can also purchase in-app products outside of your app, for example, by redeeming an offer code in the App Store. In that case, the original transaction doesn’t include an app account token. Use the `Set App Account Token` endpoint to associate an app account token with such transactions.\n\nThis endpoint supports setting the `appAccountToken` for all product types, including one-time purchases (consumables, non-consumables, and non-renewing subscriptions) and auto-renewable subscriptions. If you call this endpoint for a transaction that already has an `appAccountToken`, the endpoint replaces the existing value with the new value you supply.\n\nFor auto-renewable subscriptions, the endpoint applies the `appAccountToken` to the current renewal transaction and subsequent renewals, but it doesn’t affect past transactions. The same `appAccountToken` continues to apply to renewal transactions if the customer upgrades, downgrades, or cross-grades the subscription.\n\nThis endpoint doesn’t support transactions for products shared through Family Sharing, where the transaction has an [doc:\/\/com.apple.appstoreserverapi\/documentation\/AppStoreServerAPI\/inAppOwnershipType] value of `FAMILY_SHARED`.\n\nYou can assign the same `appAccountToken` value to more than one transaction, according to your needs. For example, you may choose to reuse the same `appAccountToken` value for every transaction that belongs to the same customer.\n\n## App Account Token\n\n- **UpdateAppAccountTokenRequest**: The request body that contains an app account token value.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "The request body that contains an app account token value.",
          "name" : "UpdateAppAccountTokenRequest",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppStoreServerAPI\/UpdateAppAccountTokenRequest"
        }
      ],
      "title" : "App Account Token"
    }
  ],
  "source" : "appleJSON",
  "title" : "Set App Account Token",
  "url" : "https:\/\/developer.apple.com\/documentation\/AppStoreServerAPI\/Set-App-Account-Token"
}