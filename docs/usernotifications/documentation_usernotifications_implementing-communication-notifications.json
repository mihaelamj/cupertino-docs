{
  "abstract" : "Configure and display your app’s communication notifications by using intents.",
  "codeExamples" : [
    {
      "code" : "\/\/ Initialize only the sender for a one-to-one message intent.\nlet handle = INPersonHandle(value: \"unique-user-id-1\", type: .unknown)\nlet avatar = INImage(named: \"profilepicture.png\")\nlet sender = INPerson(personHandle: handle,\n                      nameComponents: nil,\n                      displayName: \"Example\",\n                      image: avatar,\n                      contactIdentifier: nil,\n                      customIdentifier: nil)\n\n\/\/ Because this communication is incoming, you can infer that the current user is\n\/\/ a recipient. Don't include the current user when initializing the intent.\nlet intent = INSendMessageIntent(recipients: nil,\n                                 outgoingMessageType: .outgoingMessageText,\n                                 content: \"Message content\",\n                                 speakableGroupName: nil,\n                                 conversationIdentifier: \"unique-conversation-id-1\",\n                                 serviceName: nil,\n                                 sender: sender,\n                                 attachments: nil)",
      "language" : "swift"
    },
    {
      "code" : "\/\/ Initialize only the caller for a one-to-one call intent.\nlet handle = INPersonHandle(value: \"unique-user-id-1\", type: .unknown)\nlet avatar = INImage(named: \"profilepicture.png\")\nlet caller = INPerson(personHandle: handle,\n                      nameComponents: nil,\n                      displayName: \"Example\",\n                      image: avatar,\n                      contactIdentifier: nil,\n                      customIdentifier: nil)\n\n\/\/ Include the other participants of the call in the contacts array.\n\/\/ Because this communication is incoming, you can infer that the current user is\n\/\/ a participant of the call. Don't include the user in the contacts array.\nlet intent = INStartCallIntent(callRecordFilter: nil,\n                               callRecordToCallBack: callRecordToCallBack,\n                               audioRoute: .bluetoothAudioRoute,\n                               destinationType: .normal,\n                               contacts: [caller],\n                               callCapability: .audioCall)",
      "language" : "swift"
    },
    {
      "code" : "func didReceive(_ request: UNNotificationRequest,\n                withContentHandler contentHandler:\n                @escaping (UNNotificationContent) -> Void) async {\n\n    \/\/ Create an intent as shown in previous code listings.\n    \/\/ For an incoming message, refer to the first code listing.\n    \/\/ For an incoming call, refer to the second code listing.\n    let intent: INSendMessageIntent = sendMessageIntent()\n\n    \/\/ Use the intent to initialize the interaction.\n    let interaction = INInteraction(intent: intent, response: nil)\n\n    \/\/ Interaction direction is incoming because the user is\n    \/\/ receiving this message.\n    interaction.direction = .incoming\n\n    \/\/ Donate the interaction before updating notification content.\n    do {\n        try await interaction.donate()\n    } catch {\n        \/\/ Handle errors that may occur during donation.\n        return\n    }\n        \n    \/\/ After donation, update the notification content.\n    let content = request.content\n    \n    do {\n        \/\/ Update notification content before displaying the\n        \/\/ communication notification.\n        let updatedContent = try content.updating(from: intent)\n        \n        \/\/ Call the content handler with the updated content\n        \/\/ to display the communication notification.\n        contentHandler(updatedContent)\n        \n    } catch {\n        \/\/ Handle errors that may occur while updating content.\n    }\n}",
      "language" : "swift"
    }
  ],
  "contentHash" : "9d2d8cce774c0d3afb9bed023983d712045fdaa9d39a9ba1b44c42adf7dbbc98",
  "crawledAt" : "2025-12-01T09:45:03Z",
  "id" : "4AB8F2A3-ACD8-4722-81FF-EE1ED6390972",
  "kind" : "article",
  "module" : "User Notifications",
  "overview" : "## Overview\n\nCommunication notifications provide a rich experience for direct communications. These notifications have a distinct user experience that features prominent avatars and group names. Communication notifications are unique in their ability to break through the scheduled notification summary by default, and can also break through a Focus.\n\nEnable the Communication Notifications capability in your app and include the activity types that your app supports in its `NSUserActivityTypes` array. Your app initializes relevant participants of the communication, configures an intent object that describes the communication taking place, and then donates the interaction. Siri uses these donations to refine suggestions given to the user. After your app donates the interaction, your app updates the incoming notification’s content and displays a communication notification. To learn more about SiriKit interaction donations, see [doc:\/\/com.apple.documentation\/documentation\/SiriKit\/donating-shortcuts].\n\n### Enable communication notifications\n\nEnable the Communication Notifications capability in your app target before you implement communication notifications. To learn more about enabling capabilities, see [doc:\/\/com.apple.documentation\/documentation\/Xcode\/adding-capabilities-to-your-app]. Add the class name of each intent that your app supports to the `NSUserActivityTypes` array in your `Info.plist`. To support [doc:\/\/com.apple.documentation\/documentation\/Intents\/INSendMessageIntent] donations, for example, ensure the `NSUserActivityTypes` array includes the string `INSendMessageIntent`.\n\nOnce you enable the Communications Notifications capability, begin updating the content of notifications that your app receives so it can display communication notifications. Implement this functionality wherever your app can receive notifications, including your app’s Notification Service Extension (NSE), which you use to modify the content of incoming notifications when your app is in the background. For more information about handling notifications in the background, refer to [doc:\/\/com.apple.usernotifications\/documentation\/UserNotifications\/modifying-content-in-newly-delivered-notifications].\n\n### Identify the participants\n\nYou must include relevant participants in communication notifications to ensure correct display and breakthrough behavior. Create an [doc:\/\/com.apple.documentation\/documentation\/Intents\/INPerson] object for each relevant participant of a communication when your app receives a communication notification. The current user is always a recipient of an incoming communication notification. Don’t include the current user as a participant of the communication for your app’s intent donations.\n\nIf a person in your app matches a contact in address book, provide the contact identifier when initializing the [doc:\/\/com.apple.documentation\/documentation\/Intents\/INPerson] object. If your app has access to a person’s email address or phone number, provide a person handle type of [doc:\/\/com.apple.documentation\/documentation\/Intents\/INPersonHandleType\/emailAddress] or [doc:\/\/com.apple.documentation\/documentation\/Intents\/INPersonHandleType\/phoneNumber] respectively, and also specify the person’s suggestion type as [doc:\/\/com.apple.documentation\/documentation\/Intents\/INPersonSuggestionType\/none]. Providing both of these types ensures an exact match for the corresponding email address or phone number in the user’s contacts.\n\nIf the information necessary to ensure an exact match isn’t available, create an [doc:\/\/com.apple.documentation\/documentation\/Intents\/INPersonHandle] specific to your app. Set the person’s [doc:\/\/com.apple.documentation\/documentation\/Intents\/INPersonSuggestionType] to whichever type it most closely resembles, which provides a contact suggestion to the user if a matching contact isn’t found.\n\n### Configure a message intent\n\nWhen the user receives a message, you create an [doc:\/\/com.apple.documentation\/documentation\/Intents\/INSendMessageIntent]. An [doc:\/\/com.apple.documentation\/documentation\/Intents\/INSendMessageIntent] has a single sender and one or more recipients. For incoming communication notification donations, the system includes the current user as a recipient in addition to those your app provides in the `recipients` array. Provide a unique `conversationIdentifier` that represents the conversation. Use the same identifier for each message that the user receives in the same conversation. This is especially important for group conversations where the group name and membership can change for each message.\n\nThe example below represents a direct message. There are no recipients other than the current user in this case. The `image` of the sender becomes the avatar for the notification.\n\nFor group message intents, provide an array that contains the other participants of the message for the `recipients` parameter. For example, in a group of three participants that includes the current user, the `sender` of the message and the current user are already represented. The `recipients` array contains one object — the other recipient. Group conversations can also provide a [doc:\/\/com.apple.documentation\/documentation\/Intents\/INSendMessageIntent\/speakableGroupName] if the conversation has a name. The notification shows a summary of the recipients if your app doesn’t provide one. Call [doc:\/\/com.apple.documentation\/documentation\/intents\/inintent\/2976224-setimage] on the intent using the [doc:\/\/com.apple.documentation\/documentation\/Intents\/INSendMessageIntent\/speakableGroupName] parameter to provide an avatar for a group message. Set the avatar image prior to donating the interaction.\n\n### Configure a call intent\n\nWhen the user receives an incoming call, you create an [doc:\/\/com.apple.documentation\/documentation\/Intents\/INStartCallIntent]. An [doc:\/\/com.apple.documentation\/documentation\/Intents\/INStartCallIntent] has an array of one or more contacts that are participants of the call. For incoming communication notification donations, the system includes the current user as a recipient in addition to those added to the `contacts` array. Provide the most accurate additional information available about the call, including a callback record to use in the event of a missed call. The example below represents a call between `caller` and the current user. The caller’s image becomes the avatar for the notification.\n\nFor group call intents, add the other participants to the `contacts` parameter array. In a group of three participants that includes the current user, for example, only include the caller and the third participant in the `contacts` array. Call [doc:\/\/com.apple.documentation\/documentation\/intents\/inintent\/2976224-setimage] on the intent using the [doc:\/\/com.apple.documentation\/documentation\/Intents\/INStartCallIntent\/callRecordToCallBack] parameter to provide an avatar for a group call. Set the avatar image prior to donating the interaction.\n\n### Donate an interaction and update the notification\n\nAfter you configure a communication intent, donate an interaction for the intent. Initialize an [doc:\/\/com.apple.documentation\/documentation\/Intents\/INInteraction] object from the previously configured message or call intent. Set the interaction’s direction to [doc:\/\/com.apple.documentation\/documentation\/Intents\/INInteractionDirection\/incoming]. This indicates the user is the recipient of an interaction — the incoming communication. Call [doc:\/\/com.apple.documentation\/documentation\/Intents\/INInteraction\/donate(completion:)] on the interaction and handle errors that may occur in its completion handler.\n\nIf the donation completes successfully, update the content of a received notification to display a communication notification. Call [doc:\/\/com.apple.usernotifications\/documentation\/UserNotifications\/UNNotificationContent\/updating(from:)] on the received notification content. Use the updated notification content to display a communication notification. In the example below, the handling of this process happens in an NSE. Call the `contentHandler` with the updated notification content to display a communication notification before returning from the [doc:\/\/com.apple.usernotifications\/documentation\/UserNotifications\/UNNotificationServiceExtension\/didReceive(_:withContentHandler:)] method.\n\n### Donate outgoing interactions\n\nOutgoing interactions are important to enable proper breakthrough behavior. An outgoing interaction represents a decision or action that the user initiates. Siri uses outgoing intent donations to refine suggestions to the user in a variety of ways, including Share Sheet recommendations and contact suggestions.\n\nInitializing an outgoing interaction is similar to initializing an incoming interaction. Set the `direction` of an outgoing interaction to [doc:\/\/com.apple.documentation\/documentation\/Intents\/INInteractionDirection\/outgoing] prior to donating. The process to donate an outgoing [doc:\/\/com.apple.documentation\/documentation\/Intents\/INStartCallIntent] interaction is identical to the process to donate incoming interactions. When donating an outgoing [doc:\/\/com.apple.documentation\/documentation\/Intents\/INSendMessageIntent] interaction, however, the current user becomes the sender. Therefore, leave the `sender` parameter of an outgoing [doc:\/\/com.apple.documentation\/documentation\/Intents\/INSendMessageIntent] `nil`, and provide the recipients of the message, and any other metadata available.\n\n### Additional donation metadata\n\nYou can provide optional donation metadata for message intent donations in the form of [doc:\/\/com.apple.documentation\/documentation\/Intents\/INSendMessageIntentDonationMetadata] objects. This additional metadata changes the behavior of the interaction donation.\n\nYou can manually specify the recipient count and initialize a partial list of relevant recipients when the full list of [doc:\/\/com.apple.documentation\/documentation\/Intents\/INSendMessageIntent] recipients is prohibitively large. Supply an [doc:\/\/com.apple.documentation\/documentation\/Intents\/INSendMessageIntentDonationMetadata] object to the intent and specify the full [doc:\/\/com.apple.documentation\/documentation\/Intents\/INSendMessageIntentDonationMetadata\/recipientCount]. This recipient count overrides the count of the recipients array on the intent. You must either provide the full recipient list to the intent, or instead provide an accurate recipient count on the intent’s donation metadata.\n\nYou can also use a donation metadata object when the user receives messages that explicity mention that user, or reply messages to previous conversations. Use a donation metadata object to specify this behavior. Set [doc:\/\/com.apple.documentation\/documentation\/Intents\/INSendMessageIntentDonationMetadata\/mentionsCurrentUser] and [doc:\/\/com.apple.documentation\/documentation\/Intents\/INSendMessageIntentDonationMetadata\/isReplyToCurrentUser] to enable these behaviors, respectively, on the communication notification.\n\nSomeone can choose to notify a user even when the other user has Focus enabled. Your app requires authorization to access the user’s Focus status for this functionality to work.\n\nReserve this functionality for instances where the sender has explicitly chosen to notify the user anyway. Users only expect an interruption like this after they’ve received a communication notification for a message that Focus silenced on their behalf.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/UserNotifications\/implementing-communication-notifications\ncrawled: 2025-12-01T09:45:03Z\n---\n\n# Implementing communication notifications\n\n**Article**\n\nConfigure and display your app’s communication notifications by using intents.\n\n## Overview\n\nCommunication notifications provide a rich experience for direct communications. These notifications have a distinct user experience that features prominent avatars and group names. Communication notifications are unique in their ability to break through the scheduled notification summary by default, and can also break through a Focus.\n\nEnable the Communication Notifications capability in your app and include the activity types that your app supports in its `NSUserActivityTypes` array. Your app initializes relevant participants of the communication, configures an intent object that describes the communication taking place, and then donates the interaction. Siri uses these donations to refine suggestions given to the user. After your app donates the interaction, your app updates the incoming notification’s content and displays a communication notification. To learn more about SiriKit interaction donations, see [doc:\/\/com.apple.documentation\/documentation\/SiriKit\/donating-shortcuts].\n\n### Enable communication notifications\n\nEnable the Communication Notifications capability in your app target before you implement communication notifications. To learn more about enabling capabilities, see [doc:\/\/com.apple.documentation\/documentation\/Xcode\/adding-capabilities-to-your-app]. Add the class name of each intent that your app supports to the `NSUserActivityTypes` array in your `Info.plist`. To support [doc:\/\/com.apple.documentation\/documentation\/Intents\/INSendMessageIntent] donations, for example, ensure the `NSUserActivityTypes` array includes the string `INSendMessageIntent`.\n\nOnce you enable the Communications Notifications capability, begin updating the content of notifications that your app receives so it can display communication notifications. Implement this functionality wherever your app can receive notifications, including your app’s Notification Service Extension (NSE), which you use to modify the content of incoming notifications when your app is in the background. For more information about handling notifications in the background, refer to [doc:\/\/com.apple.usernotifications\/documentation\/UserNotifications\/modifying-content-in-newly-delivered-notifications].\n\n### Identify the participants\n\nYou must include relevant participants in communication notifications to ensure correct display and breakthrough behavior. Create an [doc:\/\/com.apple.documentation\/documentation\/Intents\/INPerson] object for each relevant participant of a communication when your app receives a communication notification. The current user is always a recipient of an incoming communication notification. Don’t include the current user as a participant of the communication for your app’s intent donations.\n\nIf a person in your app matches a contact in address book, provide the contact identifier when initializing the [doc:\/\/com.apple.documentation\/documentation\/Intents\/INPerson] object. If your app has access to a person’s email address or phone number, provide a person handle type of [doc:\/\/com.apple.documentation\/documentation\/Intents\/INPersonHandleType\/emailAddress] or [doc:\/\/com.apple.documentation\/documentation\/Intents\/INPersonHandleType\/phoneNumber] respectively, and also specify the person’s suggestion type as [doc:\/\/com.apple.documentation\/documentation\/Intents\/INPersonSuggestionType\/none]. Providing both of these types ensures an exact match for the corresponding email address or phone number in the user’s contacts.\n\nIf the information necessary to ensure an exact match isn’t available, create an [doc:\/\/com.apple.documentation\/documentation\/Intents\/INPersonHandle] specific to your app. Set the person’s [doc:\/\/com.apple.documentation\/documentation\/Intents\/INPersonSuggestionType] to whichever type it most closely resembles, which provides a contact suggestion to the user if a matching contact isn’t found.\n\n### Configure a message intent\n\nWhen the user receives a message, you create an [doc:\/\/com.apple.documentation\/documentation\/Intents\/INSendMessageIntent]. An [doc:\/\/com.apple.documentation\/documentation\/Intents\/INSendMessageIntent] has a single sender and one or more recipients. For incoming communication notification donations, the system includes the current user as a recipient in addition to those your app provides in the `recipients` array. Provide a unique `conversationIdentifier` that represents the conversation. Use the same identifier for each message that the user receives in the same conversation. This is especially important for group conversations where the group name and membership can change for each message.\n\nThe example below represents a direct message. There are no recipients other than the current user in this case. The `image` of the sender becomes the avatar for the notification.\n\n```swift\n\/\/ Initialize only the sender for a one-to-one message intent.\nlet handle = INPersonHandle(value: \"unique-user-id-1\", type: .unknown)\nlet avatar = INImage(named: \"profilepicture.png\")\nlet sender = INPerson(personHandle: handle,\n                      nameComponents: nil,\n                      displayName: \"Example\",\n                      image: avatar,\n                      contactIdentifier: nil,\n                      customIdentifier: nil)\n\n\/\/ Because this communication is incoming, you can infer that the current user is\n\/\/ a recipient. Don't include the current user when initializing the intent.\nlet intent = INSendMessageIntent(recipients: nil,\n                                 outgoingMessageType: .outgoingMessageText,\n                                 content: \"Message content\",\n                                 speakableGroupName: nil,\n                                 conversationIdentifier: \"unique-conversation-id-1\",\n                                 serviceName: nil,\n                                 sender: sender,\n                                 attachments: nil)\n```\n\nFor group message intents, provide an array that contains the other participants of the message for the `recipients` parameter. For example, in a group of three participants that includes the current user, the `sender` of the message and the current user are already represented. The `recipients` array contains one object — the other recipient. Group conversations can also provide a [doc:\/\/com.apple.documentation\/documentation\/Intents\/INSendMessageIntent\/speakableGroupName] if the conversation has a name. The notification shows a summary of the recipients if your app doesn’t provide one. Call [doc:\/\/com.apple.documentation\/documentation\/intents\/inintent\/2976224-setimage] on the intent using the [doc:\/\/com.apple.documentation\/documentation\/Intents\/INSendMessageIntent\/speakableGroupName] parameter to provide an avatar for a group message. Set the avatar image prior to donating the interaction.\n\n### Configure a call intent\n\nWhen the user receives an incoming call, you create an [doc:\/\/com.apple.documentation\/documentation\/Intents\/INStartCallIntent]. An [doc:\/\/com.apple.documentation\/documentation\/Intents\/INStartCallIntent] has an array of one or more contacts that are participants of the call. For incoming communication notification donations, the system includes the current user as a recipient in addition to those added to the `contacts` array. Provide the most accurate additional information available about the call, including a callback record to use in the event of a missed call. The example below represents a call between `caller` and the current user. The caller’s image becomes the avatar for the notification.\n\n```swift\n\/\/ Initialize only the caller for a one-to-one call intent.\nlet handle = INPersonHandle(value: \"unique-user-id-1\", type: .unknown)\nlet avatar = INImage(named: \"profilepicture.png\")\nlet caller = INPerson(personHandle: handle,\n                      nameComponents: nil,\n                      displayName: \"Example\",\n                      image: avatar,\n                      contactIdentifier: nil,\n                      customIdentifier: nil)\n\n\/\/ Include the other participants of the call in the contacts array.\n\/\/ Because this communication is incoming, you can infer that the current user is\n\/\/ a participant of the call. Don't include the user in the contacts array.\nlet intent = INStartCallIntent(callRecordFilter: nil,\n                               callRecordToCallBack: callRecordToCallBack,\n                               audioRoute: .bluetoothAudioRoute,\n                               destinationType: .normal,\n                               contacts: [caller],\n                               callCapability: .audioCall)\n```\n\nFor group call intents, add the other participants to the `contacts` parameter array. In a group of three participants that includes the current user, for example, only include the caller and the third participant in the `contacts` array. Call [doc:\/\/com.apple.documentation\/documentation\/intents\/inintent\/2976224-setimage] on the intent using the [doc:\/\/com.apple.documentation\/documentation\/Intents\/INStartCallIntent\/callRecordToCallBack] parameter to provide an avatar for a group call. Set the avatar image prior to donating the interaction.\n\n### Donate an interaction and update the notification\n\nAfter you configure a communication intent, donate an interaction for the intent. Initialize an [doc:\/\/com.apple.documentation\/documentation\/Intents\/INInteraction] object from the previously configured message or call intent. Set the interaction’s direction to [doc:\/\/com.apple.documentation\/documentation\/Intents\/INInteractionDirection\/incoming]. This indicates the user is the recipient of an interaction — the incoming communication. Call [doc:\/\/com.apple.documentation\/documentation\/Intents\/INInteraction\/donate(completion:)] on the interaction and handle errors that may occur in its completion handler.\n\nIf the donation completes successfully, update the content of a received notification to display a communication notification. Call [doc:\/\/com.apple.usernotifications\/documentation\/UserNotifications\/UNNotificationContent\/updating(from:)] on the received notification content. Use the updated notification content to display a communication notification. In the example below, the handling of this process happens in an NSE. Call the `contentHandler` with the updated notification content to display a communication notification before returning from the [doc:\/\/com.apple.usernotifications\/documentation\/UserNotifications\/UNNotificationServiceExtension\/didReceive(_:withContentHandler:)] method.\n\n```swift\nfunc didReceive(_ request: UNNotificationRequest,\n                withContentHandler contentHandler:\n                @escaping (UNNotificationContent) -> Void) async {\n\n    \/\/ Create an intent as shown in previous code listings.\n    \/\/ For an incoming message, refer to the first code listing.\n    \/\/ For an incoming call, refer to the second code listing.\n    let intent: INSendMessageIntent = sendMessageIntent()\n\n    \/\/ Use the intent to initialize the interaction.\n    let interaction = INInteraction(intent: intent, response: nil)\n\n    \/\/ Interaction direction is incoming because the user is\n    \/\/ receiving this message.\n    interaction.direction = .incoming\n\n    \/\/ Donate the interaction before updating notification content.\n    do {\n        try await interaction.donate()\n    } catch {\n        \/\/ Handle errors that may occur during donation.\n        return\n    }\n        \n    \/\/ After donation, update the notification content.\n    let content = request.content\n    \n    do {\n        \/\/ Update notification content before displaying the\n        \/\/ communication notification.\n        let updatedContent = try content.updating(from: intent)\n        \n        \/\/ Call the content handler with the updated content\n        \/\/ to display the communication notification.\n        contentHandler(updatedContent)\n        \n    } catch {\n        \/\/ Handle errors that may occur while updating content.\n    }\n}\n```\n\n### Donate outgoing interactions\n\nOutgoing interactions are important to enable proper breakthrough behavior. An outgoing interaction represents a decision or action that the user initiates. Siri uses outgoing intent donations to refine suggestions to the user in a variety of ways, including Share Sheet recommendations and contact suggestions.\n\nInitializing an outgoing interaction is similar to initializing an incoming interaction. Set the `direction` of an outgoing interaction to [doc:\/\/com.apple.documentation\/documentation\/Intents\/INInteractionDirection\/outgoing] prior to donating. The process to donate an outgoing [doc:\/\/com.apple.documentation\/documentation\/Intents\/INStartCallIntent] interaction is identical to the process to donate incoming interactions. When donating an outgoing [doc:\/\/com.apple.documentation\/documentation\/Intents\/INSendMessageIntent] interaction, however, the current user becomes the sender. Therefore, leave the `sender` parameter of an outgoing [doc:\/\/com.apple.documentation\/documentation\/Intents\/INSendMessageIntent] `nil`, and provide the recipients of the message, and any other metadata available.\n\n### Additional donation metadata\n\nYou can provide optional donation metadata for message intent donations in the form of [doc:\/\/com.apple.documentation\/documentation\/Intents\/INSendMessageIntentDonationMetadata] objects. This additional metadata changes the behavior of the interaction donation.\n\nYou can manually specify the recipient count and initialize a partial list of relevant recipients when the full list of [doc:\/\/com.apple.documentation\/documentation\/Intents\/INSendMessageIntent] recipients is prohibitively large. Supply an [doc:\/\/com.apple.documentation\/documentation\/Intents\/INSendMessageIntentDonationMetadata] object to the intent and specify the full [doc:\/\/com.apple.documentation\/documentation\/Intents\/INSendMessageIntentDonationMetadata\/recipientCount]. This recipient count overrides the count of the recipients array on the intent. You must either provide the full recipient list to the intent, or instead provide an accurate recipient count on the intent’s donation metadata.\n\nYou can also use a donation metadata object when the user receives messages that explicity mention that user, or reply messages to previous conversations. Use a donation metadata object to specify this behavior. Set [doc:\/\/com.apple.documentation\/documentation\/Intents\/INSendMessageIntentDonationMetadata\/mentionsCurrentUser] and [doc:\/\/com.apple.documentation\/documentation\/Intents\/INSendMessageIntentDonationMetadata\/isReplyToCurrentUser] to enable these behaviors, respectively, on the communication notification.\n\nSomeone can choose to notify a user even when the other user has Focus enabled. Your app requires authorization to access the user’s Focus status for this functionality to work.\n\n- Request authorization by calling [doc:\/\/com.apple.documentation\/documentation\/Intents\/INFocusStatusCenter\/requestAuthorization(completionHandler:)] on the default [doc:\/\/com.apple.documentation\/documentation\/Intents\/INFocusStatusCenter] instance.\n- Ensure the user has authorized your app before continuing.\n- Set [doc:\/\/com.apple.documentation\/documentation\/Intents\/INSendMessageIntentDonationMetadata\/notifyRecipientAnyway] on the donation metadata object when the notification should break through Focus and interrupt them.\n\nReserve this functionality for instances where the sender has explicitly chosen to notify the user anyway. Users only expect an interruption like this after they’ve received a communication notification for a message that Focus silenced on their behalf.\n\n## Notification content\n\n- **UNNotificationContentProviding**: A protocol the system uses to provide context relevant to user notifications.\n- **UNNotificationActionIcon**: An icon associated with an action.\n- **UNMutableNotificationContent**: The editable content for a notification.\n- **UNNotificationContent**: The uneditable content of a notification.\n- **UNNotificationAttachment**: A media file associated with a notification.\n- **UNNotificationSound**: The sound played upon delivery of a notification.\n- **UNNotificationSoundName**: A string providing the name of a sound file.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "A protocol the system uses to provide context relevant to user notifications.",
          "name" : "UNNotificationContentProviding",
          "url" : "https:\/\/developer.apple.com\/documentation\/UserNotifications\/UNNotificationContentProviding"
        },
        {
          "description" : "An icon associated with an action.",
          "name" : "UNNotificationActionIcon",
          "url" : "https:\/\/developer.apple.com\/documentation\/UserNotifications\/UNNotificationActionIcon"
        },
        {
          "description" : "The editable content for a notification.",
          "name" : "UNMutableNotificationContent",
          "url" : "https:\/\/developer.apple.com\/documentation\/UserNotifications\/UNMutableNotificationContent"
        },
        {
          "description" : "The uneditable content of a notification.",
          "name" : "UNNotificationContent",
          "url" : "https:\/\/developer.apple.com\/documentation\/UserNotifications\/UNNotificationContent"
        },
        {
          "description" : "A media file associated with a notification.",
          "name" : "UNNotificationAttachment",
          "url" : "https:\/\/developer.apple.com\/documentation\/UserNotifications\/UNNotificationAttachment"
        },
        {
          "description" : "The sound played upon delivery of a notification.",
          "name" : "UNNotificationSound",
          "url" : "https:\/\/developer.apple.com\/documentation\/UserNotifications\/UNNotificationSound"
        },
        {
          "description" : "A string providing the name of a sound file.",
          "name" : "UNNotificationSoundName",
          "url" : "https:\/\/developer.apple.com\/documentation\/UserNotifications\/UNNotificationSoundName"
        }
      ],
      "title" : "Notification content"
    }
  ],
  "source" : "appleJSON",
  "title" : "Implementing communication notifications",
  "url" : "https:\/\/developer.apple.com\/documentation\/UserNotifications\/implementing-communication-notifications"
}