{
  "abstract" : "A DriverKit provider object that manages access to your custom PCI hardware.",
  "codeExamples" : [

  ],
  "contentHash" : "da9231d204fb8fa2d54806e0bcde1a555b343feb878dd2d78d57470bdedf40fe",
  "crawledAt" : "2025-12-07T00:23:40Z",
  "declaration" : {
    "code" : "class IOPCIDevice;",
    "language" : "swift"
  },
  "id" : "18BAAA51-0B03-4540-B5D2-45353BC831AD",
  "kind" : "class",
  "language" : "occ",
  "module" : "PCIDriverKit",
  "overview" : "## Overview\n\nUse an `IOPCIDevice` object to enable or manage the custom features of your PCI hardware. You don’t create instances of this class directly. Instead, the system creates an `IOPCIDevice` object and passes it to the [doc:\/\/com.apple.documentation\/documentation\/DriverKit\/IOService] subclass of your custom driver. Use the methods of this object to read and write your hardware’s configuration settings. You can also use it to read and write any custom data in your device’s memory-mapped I\/O.",
  "platforms" : [
    "Unsupported OS: driverkit"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/pcidriverkit\/iopcidevice\ncrawled: 2025-12-07T00:23:40Z\n---\n\n# IOPCIDevice\n\n**Class**\n\nA DriverKit provider object that manages access to your custom PCI hardware.\n\n## Declaration\n\n```swift\nclass IOPCIDevice;\n```\n\n## Overview\n\nUse an `IOPCIDevice` object to enable or manage the custom features of your PCI hardware. You don’t create instances of this class directly. Instead, the system creates an `IOPCIDevice` object and passes it to the [doc:\/\/com.apple.documentation\/documentation\/DriverKit\/IOService] subclass of your custom driver. Use the methods of this object to read and write your hardware’s configuration settings. You can also use it to read and write any custom data in your device’s memory-mapped I\/O.\n\n\n\n## Running the Service\n\n- **init**: Initializes the device.\n- **Open**: Opens a session to the PCI device.\n- **Close**: Closes the session to the PCI device.\n- **free**: Performs any final cleanup for the object.\n\n## Reading and Writing Configuration Data\n\n- **ConfigurationRead8**: Reads an 8-bit data value synchronously from the device’s configuration space.\n- **ConfigurationRead16**: Reads a 16-bit data value synchronously from the device’s configuration space.\n- **ConfigurationRead32**: Reads a 32-bit data value synchronously from the device’s configuration space.\n- **ConfigurationWrite8**: Writes an 8-bit data value to the device’s configuration space.\n- **ConfigurationWrite16**: Writes an 16-bit data value to the device’s configuration space.\n- **ConfigurationWrite32**: Writes an 32-bit data value to the device’s configuration space.\n- **Configuration Data Offsets**: Constants for the offsets that you use to read and write configuration registers.\n- **Bridge Header Offsets**: Constants that specify offsets to distinct registers in a memory range.\n- **Command Register Bits**: Constants that you use to access specific bits of the command register.\n- **Status Register Bits**: Constants that you use to access specific bits of the status register.\n\n## Reading and Writing Memory Locations\n\n- **MemoryRead8**: Reads a 8-bit value synchronously from the PCI device’s aperture at the specified memory index.\n- **MemoryRead8**: Reads a 8-bit value synchronously from the PCI device’s aperture at the specified memory index.\n- **MemoryRead16**: Reads a 16-bit value synchronously from the PCI device’s aperture at the specified memory index.\n- **MemoryRead16**: Reads a 16-bit value synchronously from the PCI device’s aperture at the specified memory index.\n- **MemoryRead32**: Reads a 32-bit value synchronously from the PCI device’s aperture at the specified memory index.\n- **MemoryRead32**: Reads a 32-bit value synchronously from the PCI device’s aperture at the specified memory index.\n- **MemoryRead64**: Reads a 64-bit value synchronously from the PCI device’s aperture at the specified memory index.\n- **MemoryRead64**: Reads a 64-bit value synchronously from the PCI device’s aperture at the specified memory index.\n- **MemoryWrite8**: Writes an 8-bit value to the PCI device’s aperture at the specified memory index.\n- **MemoryWrite8**: Writes an 8-bit value to the PCI device’s aperture at the specified memory index.\n- **MemoryWrite16**: Writes an 16-bit value to the PCI device’s aperture at the specified memory index.\n- **MemoryWrite16**: Writes an 16-bit value to the PCI device’s aperture at the specified memory index.\n- **MemoryWrite32**: Writes an 32-bit value to the PCI device’s aperture at the specified memory index.\n- **MemoryWrite32**: Writes an 32-bit value to the PCI device’s aperture at the specified memory index.\n- **MemoryWrite64**: Writes an 64-bit value to the PCI device’s aperture at the specified memory index.\n- **MemoryWrite64**: Writes an 64-bit value to the PCI device’s aperture at the specified memory index.\n\n## Getting Device Information\n\n- **FindPCICapability**: Search the configuration space for a PCI capability register.\n- **GetBusDeviceFunction**: Returns the device’s bus, device, and function numbers.\n- **PCI Capabilities**: Constants that you use to get the capabilities of the PCI device.\n- **Slot Capabilities**: Constants that you use to get the slot-related capabilities of the PCI device.\n\n## Managing Interrupts\n\n- **Interrupt Types**: Interrupt types that the device supports.\n\n## Managing Power\n\n- **HasPCIPowerManagement**: Determines whether the device has the specified PCI bus power management capabilities.\n- **EnablePCIPowerManagement**: Configures the device’s PCI bus power management capabilities.\n- **Power Management Capabilities**: Constants you use to get and set the state of the device’s power management features.\n- **Power Management Control\/Status Register**: Constants you use when checking bits in the power management register.\n\n## Getting Error Codes\n\n- **Correctable Error Bits**: Constants for the bits in the correctable error status register.\n- **Uncorrectable Error Bits**: Constants for the bits in the uncorrectable error status register.\n\n## Instance Methods\n\n- **ClientCrashed**\n- **ConfigureInterrupts**\n- **GetBARInfo**\n- **GetLinkSpeed**\n- **Reset**\n- **RestoreDeviceState**\n- **SaveDeviceState**\n- **SetASPMState**\n- **SetLinkSpeed**\n- **SetProperties**\n\n## Device Interface\n\n- **Creating Custom PCIe Drivers for Thunderbolt Devices**: Create a DriverKit extension to support your Thunderbolt device’s custom features.\n\n## Inherits From\n\n- IOService\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Initializes the device.",
          "name" : "init",
          "url" : "https:\/\/developer.apple.com\/documentation\/PCIDriverKit\/IOPCIDevice\/init"
        },
        {
          "description" : "Opens a session to the PCI device.",
          "name" : "Open",
          "url" : "https:\/\/developer.apple.com\/documentation\/PCIDriverKit\/IOPCIDevice\/Open"
        },
        {
          "description" : "Closes the session to the PCI device.",
          "name" : "Close",
          "url" : "https:\/\/developer.apple.com\/documentation\/PCIDriverKit\/IOPCIDevice\/Close"
        },
        {
          "description" : "Performs any final cleanup for the object.",
          "name" : "free",
          "url" : "https:\/\/developer.apple.com\/documentation\/PCIDriverKit\/IOPCIDevice\/free"
        }
      ],
      "title" : "Running the Service"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Reads an 8-bit data value synchronously from the device’s configuration space.",
          "name" : "ConfigurationRead8",
          "url" : "https:\/\/developer.apple.com\/documentation\/PCIDriverKit\/IOPCIDevice\/ConfigurationRead8"
        },
        {
          "description" : "Reads a 16-bit data value synchronously from the device’s configuration space.",
          "name" : "ConfigurationRead16",
          "url" : "https:\/\/developer.apple.com\/documentation\/PCIDriverKit\/IOPCIDevice\/ConfigurationRead16"
        },
        {
          "description" : "Reads a 32-bit data value synchronously from the device’s configuration space.",
          "name" : "ConfigurationRead32",
          "url" : "https:\/\/developer.apple.com\/documentation\/PCIDriverKit\/IOPCIDevice\/ConfigurationRead32"
        },
        {
          "description" : "Writes an 8-bit data value to the device’s configuration space.",
          "name" : "ConfigurationWrite8",
          "url" : "https:\/\/developer.apple.com\/documentation\/PCIDriverKit\/IOPCIDevice\/ConfigurationWrite8"
        },
        {
          "description" : "Writes an 16-bit data value to the device’s configuration space.",
          "name" : "ConfigurationWrite16",
          "url" : "https:\/\/developer.apple.com\/documentation\/PCIDriverKit\/IOPCIDevice\/ConfigurationWrite16"
        },
        {
          "description" : "Writes an 32-bit data value to the device’s configuration space.",
          "name" : "ConfigurationWrite32",
          "url" : "https:\/\/developer.apple.com\/documentation\/PCIDriverKit\/IOPCIDevice\/ConfigurationWrite32"
        },
        {
          "description" : "Constants for the offsets that you use to read and write configuration registers.",
          "name" : "Configuration Data Offsets",
          "url" : "https:\/\/developer.apple.com\/documentation\/PCIDriverKit\/configuration-data-offsets-enum"
        },
        {
          "description" : "Constants that specify offsets to distinct registers in a memory range.",
          "name" : "Bridge Header Offsets",
          "url" : "https:\/\/developer.apple.com\/documentation\/PCIDriverKit\/bridge-header-offsets-enum"
        },
        {
          "description" : "Constants that you use to access specific bits of the command register.",
          "name" : "Command Register Bits",
          "url" : "https:\/\/developer.apple.com\/documentation\/PCIDriverKit\/command-register-bits-enum"
        },
        {
          "description" : "Constants that you use to access specific bits of the status register.",
          "name" : "Status Register Bits",
          "url" : "https:\/\/developer.apple.com\/documentation\/PCIDriverKit\/status-register-bits-enum"
        }
      ],
      "title" : "Reading and Writing Configuration Data"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Reads a 8-bit value synchronously from the PCI device’s aperture at the specified memory index.",
          "name" : "MemoryRead8",
          "url" : "https:\/\/developer.apple.com\/documentation\/PCIDriverKit\/IOPCIDevice\/MemoryRead8-1edw0"
        },
        {
          "description" : "Reads a 8-bit value synchronously from the PCI device’s aperture at the specified memory index.",
          "name" : "MemoryRead8",
          "url" : "https:\/\/developer.apple.com\/documentation\/PCIDriverKit\/IOPCIDevice\/MemoryRead8-7b2zp"
        },
        {
          "description" : "Reads a 16-bit value synchronously from the PCI device’s aperture at the specified memory index.",
          "name" : "MemoryRead16",
          "url" : "https:\/\/developer.apple.com\/documentation\/PCIDriverKit\/IOPCIDevice\/MemoryRead16-9qkdh"
        },
        {
          "description" : "Reads a 16-bit value synchronously from the PCI device’s aperture at the specified memory index.",
          "name" : "MemoryRead16",
          "url" : "https:\/\/developer.apple.com\/documentation\/PCIDriverKit\/IOPCIDevice\/MemoryRead16-50bq8"
        },
        {
          "description" : "Reads a 32-bit value synchronously from the PCI device’s aperture at the specified memory index.",
          "name" : "MemoryRead32",
          "url" : "https:\/\/developer.apple.com\/documentation\/PCIDriverKit\/IOPCIDevice\/MemoryRead32-60hg9"
        },
        {
          "description" : "Reads a 32-bit value synchronously from the PCI device’s aperture at the specified memory index.",
          "name" : "MemoryRead32",
          "url" : "https:\/\/developer.apple.com\/documentation\/PCIDriverKit\/IOPCIDevice\/MemoryRead32-84jap"
        },
        {
          "description" : "Reads a 64-bit value synchronously from the PCI device’s aperture at the specified memory index.",
          "name" : "MemoryRead64",
          "url" : "https:\/\/developer.apple.com\/documentation\/PCIDriverKit\/IOPCIDevice\/MemoryRead64-9ntrf"
        },
        {
          "description" : "Reads a 64-bit value synchronously from the PCI device’s aperture at the specified memory index.",
          "name" : "MemoryRead64",
          "url" : "https:\/\/developer.apple.com\/documentation\/PCIDriverKit\/IOPCIDevice\/MemoryRead64-37uob"
        },
        {
          "description" : "Writes an 8-bit value to the PCI device’s aperture at the specified memory index.",
          "name" : "MemoryWrite8",
          "url" : "https:\/\/developer.apple.com\/documentation\/PCIDriverKit\/IOPCIDevice\/MemoryWrite8-1uey6"
        },
        {
          "description" : "Writes an 8-bit value to the PCI device’s aperture at the specified memory index.",
          "name" : "MemoryWrite8",
          "url" : "https:\/\/developer.apple.com\/documentation\/PCIDriverKit\/IOPCIDevice\/MemoryWrite8-fzh6"
        },
        {
          "description" : "Writes an 16-bit value to the PCI device’s aperture at the specified memory index.",
          "name" : "MemoryWrite16",
          "url" : "https:\/\/developer.apple.com\/documentation\/PCIDriverKit\/IOPCIDevice\/MemoryWrite16-8k6ch"
        },
        {
          "description" : "Writes an 16-bit value to the PCI device’s aperture at the specified memory index.",
          "name" : "MemoryWrite16",
          "url" : "https:\/\/developer.apple.com\/documentation\/PCIDriverKit\/IOPCIDevice\/MemoryWrite16-534yk"
        },
        {
          "description" : "Writes an 32-bit value to the PCI device’s aperture at the specified memory index.",
          "name" : "MemoryWrite32",
          "url" : "https:\/\/developer.apple.com\/documentation\/PCIDriverKit\/IOPCIDevice\/MemoryWrite32-4pmh"
        },
        {
          "description" : "Writes an 32-bit value to the PCI device’s aperture at the specified memory index.",
          "name" : "MemoryWrite32",
          "url" : "https:\/\/developer.apple.com\/documentation\/PCIDriverKit\/IOPCIDevice\/MemoryWrite32-ow7r"
        },
        {
          "description" : "Writes an 64-bit value to the PCI device’s aperture at the specified memory index.",
          "name" : "MemoryWrite64",
          "url" : "https:\/\/developer.apple.com\/documentation\/PCIDriverKit\/IOPCIDevice\/MemoryWrite64-8qyob"
        },
        {
          "description" : "Writes an 64-bit value to the PCI device’s aperture at the specified memory index.",
          "name" : "MemoryWrite64",
          "url" : "https:\/\/developer.apple.com\/documentation\/PCIDriverKit\/IOPCIDevice\/MemoryWrite64-nvpu"
        }
      ],
      "title" : "Reading and Writing Memory Locations"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Search the configuration space for a PCI capability register.",
          "name" : "FindPCICapability",
          "url" : "https:\/\/developer.apple.com\/documentation\/PCIDriverKit\/IOPCIDevice\/FindPCICapability"
        },
        {
          "description" : "Returns the device’s bus, device, and function numbers.",
          "name" : "GetBusDeviceFunction",
          "url" : "https:\/\/developer.apple.com\/documentation\/PCIDriverKit\/IOPCIDevice\/GetBusDeviceFunction"
        },
        {
          "description" : "Constants that you use to get the capabilities of the PCI device.",
          "name" : "PCI Capabilities",
          "url" : "https:\/\/developer.apple.com\/documentation\/PCIDriverKit\/pci-capabilities-enum"
        },
        {
          "description" : "Constants that you use to get the slot-related capabilities of the PCI device.",
          "name" : "Slot Capabilities",
          "url" : "https:\/\/developer.apple.com\/documentation\/PCIDriverKit\/slot-capabilities-enum"
        }
      ],
      "title" : "Getting Device Information"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Interrupt types that the device supports.",
          "name" : "Interrupt Types",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/1640325-interrupt_types"
        }
      ],
      "title" : "Managing Interrupts"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Determines whether the device has the specified PCI bus power management capabilities.",
          "name" : "HasPCIPowerManagement",
          "url" : "https:\/\/developer.apple.com\/documentation\/PCIDriverKit\/IOPCIDevice\/HasPCIPowerManagement"
        },
        {
          "description" : "Configures the device’s PCI bus power management capabilities.",
          "name" : "EnablePCIPowerManagement",
          "url" : "https:\/\/developer.apple.com\/documentation\/PCIDriverKit\/IOPCIDevice\/EnablePCIPowerManagement"
        },
        {
          "description" : "Constants you use to get and set the state of the device’s power management features.",
          "name" : "Power Management Capabilities",
          "url" : "https:\/\/developer.apple.com\/documentation\/PCIDriverKit\/power-management-capabilities-enum"
        },
        {
          "description" : "Constants you use when checking bits in the power management register.",
          "name" : "Power Management Control\/Status Register",
          "url" : "https:\/\/developer.apple.com\/documentation\/PCIDriverKit\/power-management-control-status-register-enum"
        }
      ],
      "title" : "Managing Power"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Constants for the bits in the correctable error status register.",
          "name" : "Correctable Error Bits",
          "url" : "https:\/\/developer.apple.com\/documentation\/PCIDriverKit\/correctable-error-bits-enum"
        },
        {
          "description" : "Constants for the bits in the uncorrectable error status register.",
          "name" : "Uncorrectable Error Bits",
          "url" : "https:\/\/developer.apple.com\/documentation\/PCIDriverKit\/uncorrectable-error-bits-enum"
        }
      ],
      "title" : "Getting Error Codes"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "",
          "name" : "ClientCrashed",
          "url" : "https:\/\/developer.apple.com\/documentation\/PCIDriverKit\/IOPCIDevice\/ClientCrashed"
        },
        {
          "description" : "",
          "name" : "ConfigureInterrupts",
          "url" : "https:\/\/developer.apple.com\/documentation\/PCIDriverKit\/IOPCIDevice\/ConfigureInterrupts"
        },
        {
          "description" : "",
          "name" : "GetBARInfo",
          "url" : "https:\/\/developer.apple.com\/documentation\/PCIDriverKit\/IOPCIDevice\/GetBARInfo"
        },
        {
          "description" : "",
          "name" : "GetLinkSpeed",
          "url" : "https:\/\/developer.apple.com\/documentation\/PCIDriverKit\/IOPCIDevice\/GetLinkSpeed"
        },
        {
          "description" : "",
          "name" : "Reset",
          "url" : "https:\/\/developer.apple.com\/documentation\/PCIDriverKit\/IOPCIDevice\/Reset"
        },
        {
          "description" : "",
          "name" : "RestoreDeviceState",
          "url" : "https:\/\/developer.apple.com\/documentation\/PCIDriverKit\/IOPCIDevice\/RestoreDeviceState"
        },
        {
          "description" : "",
          "name" : "SaveDeviceState",
          "url" : "https:\/\/developer.apple.com\/documentation\/PCIDriverKit\/IOPCIDevice\/SaveDeviceState"
        },
        {
          "description" : "",
          "name" : "SetASPMState",
          "url" : "https:\/\/developer.apple.com\/documentation\/PCIDriverKit\/IOPCIDevice\/SetASPMState"
        },
        {
          "description" : "",
          "name" : "SetLinkSpeed",
          "url" : "https:\/\/developer.apple.com\/documentation\/PCIDriverKit\/IOPCIDevice\/SetLinkSpeed"
        },
        {
          "description" : "",
          "name" : "SetProperties",
          "url" : "https:\/\/developer.apple.com\/documentation\/PCIDriverKit\/IOPCIDevice\/SetProperties"
        }
      ],
      "title" : "Instance Methods"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Create a DriverKit extension to support your Thunderbolt device’s custom features.",
          "name" : "Creating Custom PCIe Drivers for Thunderbolt Devices",
          "url" : "https:\/\/developer.apple.com\/documentation\/PCIDriverKit\/creating-custom-pcie-drivers-for-thunderbolt-devices"
        }
      ],
      "title" : "Device Interface"
    },
    {
      "content" : "",
      "items" : [
        {
          "name" : "IOService"
        }
      ],
      "title" : "Inherits From"
    }
  ],
  "source" : "appleJSON",
  "title" : "IOPCIDevice",
  "url" : "https:\/\/developer.apple.com\/documentation\/pcidriverkit\/iopcidevice"
}