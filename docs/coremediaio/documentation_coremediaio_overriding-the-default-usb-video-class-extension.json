{
  "abstract" : "Create a simple DriverKit extension to override the default driver-matching behavior for USB devices.",
  "codeExamples" : [
    {
      "code" : "<key>IOKitPersonalities<\/key>\n<dict>\n    <key>Camera-Identifier<\/key>\n    <dict>\n        <key>CFBundleIdentifierKernel<\/key>\n        <string>com.apple.UVCService<\/string>\n        <key>IOClass<\/key>\n        <string>UVCService<\/string>\n        <key>IOProviderClass<\/key>\n        <string>IOUSBHostInterface<\/string>\n        <key>bConfigurationValue<\/key>\n        <string>*<\/string>\n        <key>bInterfaceNumber<\/key>\n        <string>*<\/string>\n        <integer>14<\/integer>\n        <key>bInterfaceSubClass<\/key>\n        <string>*<\/string>\n        <key>IOUserClass<\/key>\n        <string>[DRIVERKIT CLASS NAME]<\/string>\n        <key>IOUserServerName<\/key>\n        <string>[DRIVERKIT SERVER NAME]<\/string>\n        <key>IOProbeScore<\/key>\n        <integer>9999<\/integer>\n        <key>idVendor<\/key>\n        <integer>123<\/integer>\n        <key>idProduct<\/key>\n        <integer>123<\/integer>\n        <key>IOProviderMergeProperties<\/key>\n        <dict>\n            <key>CameraAssistantBundleID<\/key>\n            <string>[YOUR CMIO EXTENSION ID]<\/string>\n        <\/dict>\n    <\/dict>\n\n<\/dict>",
      "language" : "swift"
    }
  ],
  "contentHash" : "5b4dfbdbfdd4033f1a68c5f1e150919ee15c7292f2e5b1f7b0cd1eff20e028d2",
  "crawledAt" : "2025-12-05T13:54:45Z",
  "id" : "68508207-C0DC-4CBB-AB59-34CF46C26939",
  "kind" : "article",
  "language" : "swift",
  "module" : "Core Media I\/O",
  "overview" : "## Overview\n\nStarting in macOS 12.3, the operating system provides a class-compliant Core Media I\/O (CMIO) extension that enables the use of USB cameras and other video capture devices. When you connect a USB camera, the system finds its default driver and connects it with the camera. To override the system’s default matching behavior so that you can load a custom CMIO extension instead, create a simple [doc:\/\/com.apple.documentation\/documentation\/DriverKit] extension.\n\n### Create a DriverKit extension\n\nIn a standalone Xcode project, or as a target within an existing project, create a new DriverKit extension. In Xcode’s menu, select File > New and choose either the Project or Target menu items as appropriate. In the dialog that appears, select the DriverKit tab and the Driver template, and click the Next button.\n\n\n\nIn the dialog that follows, give the driver an appropriate Product Name and click the Finish button to create it.\n\nThe default IOKit interface generator (`.iig`) and C++ implementation files that the template creates provide the sufficient implementation for your driver. The driver is effectively codeless, but the system requires a minimal binary for entitlement purposes.\n\n### Configure the Info.plist file\n\nSpecify your matching parameters as one or more entries in the [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Information-Property-List\/IOKitPersonalities] dictionary inside the DriverKit extension’s `Info.plist` file. The following example shows the standard configuration to provide within this file.\n\nSet [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Information-Property-List\/IOUserClass] and [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Information-Property-List\/IOUserServerName] values as appropriate for your newly created extension. Set a high `IOProbeScore` value to give priority to your driver, and set the identifiers of the vendor and product to match. In the `IOProviderMergeProperties`, specify the identifier of your custom CMIO extension to load in place of the default driver.\n\nWith the configuration of your DriverKit extension complete, refer to [doc:\/\/com.apple.documentation\/documentation\/SystemExtensions\/installing-system-extensions-and-drivers] for information on how to package and install your extension.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/coremediaio\/overriding-the-default-usb-video-class-extension\ncrawled: 2025-12-05T13:54:45Z\n---\n\n# Overriding the default USB video class extension\n\n**Article**\n\nCreate a simple DriverKit extension to override the default driver-matching behavior for USB devices.\n\n## Overview\n\nStarting in macOS 12.3, the operating system provides a class-compliant Core Media I\/O (CMIO) extension that enables the use of USB cameras and other video capture devices. When you connect a USB camera, the system finds its default driver and connects it with the camera. To override the system’s default matching behavior so that you can load a custom CMIO extension instead, create a simple [doc:\/\/com.apple.documentation\/documentation\/DriverKit] extension.\n\n### Create a DriverKit extension\n\nIn a standalone Xcode project, or as a target within an existing project, create a new DriverKit extension. In Xcode’s menu, select File > New and choose either the Project or Target menu items as appropriate. In the dialog that appears, select the DriverKit tab and the Driver template, and click the Next button.\n\n\n\nIn the dialog that follows, give the driver an appropriate Product Name and click the Finish button to create it.\n\nThe default IOKit interface generator (`.iig`) and C++ implementation files that the template creates provide the sufficient implementation for your driver. The driver is effectively codeless, but the system requires a minimal binary for entitlement purposes.\n\n### Configure the Info.plist file\n\nSpecify your matching parameters as one or more entries in the [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Information-Property-List\/IOKitPersonalities] dictionary inside the DriverKit extension’s `Info.plist` file. The following example shows the standard configuration to provide within this file.\n\n```swift\n<key>IOKitPersonalities<\/key>\n<dict>\n    <key>Camera-Identifier<\/key>\n    <dict>\n        <key>CFBundleIdentifierKernel<\/key>\n        <string>com.apple.UVCService<\/string>\n        <key>IOClass<\/key>\n        <string>UVCService<\/string>\n        <key>IOProviderClass<\/key>\n        <string>IOUSBHostInterface<\/string>\n        <key>bConfigurationValue<\/key>\n        <string>*<\/string>\n        <key>bInterfaceNumber<\/key>\n        <string>*<\/string>\n        <integer>14<\/integer>\n        <key>bInterfaceSubClass<\/key>\n        <string>*<\/string>\n        <key>IOUserClass<\/key>\n        <string>[DRIVERKIT CLASS NAME]<\/string>\n        <key>IOUserServerName<\/key>\n        <string>[DRIVERKIT SERVER NAME]<\/string>\n        <key>IOProbeScore<\/key>\n        <integer>9999<\/integer>\n        <key>idVendor<\/key>\n        <integer>123<\/integer>\n        <key>idProduct<\/key>\n        <integer>123<\/integer>\n        <key>IOProviderMergeProperties<\/key>\n        <dict>\n            <key>CameraAssistantBundleID<\/key>\n            <string>[YOUR CMIO EXTENSION ID]<\/string>\n        <\/dict>\n    <\/dict>\n\n<\/dict>\n```\n\nSet [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Information-Property-List\/IOUserClass] and [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Information-Property-List\/IOUserServerName] values as appropriate for your newly created extension. Set a high `IOProbeScore` value to give priority to your driver, and set the identifiers of the vendor and product to match. In the `IOProviderMergeProperties`, specify the identifier of your custom CMIO extension to load in place of the default driver.\n\nWith the configuration of your DriverKit extension complete, refer to [doc:\/\/com.apple.documentation\/documentation\/SystemExtensions\/installing-system-extensions-and-drivers] for information on how to package and install your extension.\n\n## Providers\n\n- **Creating a camera extension with Core Media I\/O**: Build high-performance camera drivers that are secure and simple to deploy.\n- **CMIOExtensionProvider**: An object that manages device connections for a provider.\n- **CMIOExtensionProviderSource**: A protocol for objects that act as provider sources.\n- **CMIOExtensionProviderProperties**: An object that manages the properties of an extension provider.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Build high-performance camera drivers that are secure and simple to deploy.",
          "name" : "Creating a camera extension with Core Media I\/O",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreMediaIO\/creating-a-camera-extension-with-core-media-i-o"
        },
        {
          "description" : "An object that manages device connections for a provider.",
          "name" : "CMIOExtensionProvider",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreMediaIO\/CMIOExtensionProvider"
        },
        {
          "description" : "A protocol for objects that act as provider sources.",
          "name" : "CMIOExtensionProviderSource",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreMediaIO\/CMIOExtensionProviderSource"
        },
        {
          "description" : "An object that manages the properties of an extension provider.",
          "name" : "CMIOExtensionProviderProperties",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreMediaIO\/CMIOExtensionProviderProperties"
        }
      ],
      "title" : "Providers"
    }
  ],
  "source" : "appleJSON",
  "title" : "Overriding the default USB video class extension",
  "url" : "https:\/\/developer.apple.com\/documentation\/coremediaio\/overriding-the-default-usb-video-class-extension"
}