{
  "abstract" : "Creates a single kernel object using a Metal Shading Language (MSL) kernel function.",
  "codeExamples" : [
    {
      "code" : "guard\n    let url = Bundle.main.url(forResource: \"default\", withExtension: \"metallib\"),\n    let data = try? Data(contentsOf: url) else {\n    fatalError(\"Unable to get metallib\")\n}\n \nguard let generalKernel = try? CIKernel(functionName: \"myKernel\", fromMetalLibraryData: data) else {\n    fatalError(\"Unable to create CIKernel from myKernel\")\n}",
      "language" : "swift"
    }
  ],
  "contentHash" : "eaef30d7909e88d52ec3537ee10afac66a5bb0ededf5b36f42f2548da2790231",
  "crawledAt" : "2025-12-06T10:36:57Z",
  "declaration" : {
    "code" : "convenience init(functionName name: String, fromMetalLibraryData data: Data) throws",
    "language" : "swift"
  },
  "id" : "1D8894C6-1E01-4032-9F0D-53DAD80A6617",
  "kind" : "unknown",
  "language" : "swift",
  "module" : "Core Image",
  "overview" : "## Discussion\n\n## Discussion\n\nThis method allows you to use MSL as the shader language for a Core Image kernel. Since MSL based kernels are precompiled, initializing them is faster than their than Core Image Kernel Language (CIKL) counterparts and Xcode can provide error diagnostics during development rather than at runtime. MSL is a more modern language than CIKL, and you can write shader code that uses arrays, structs and matrices.\n\nMSL based kernels still support concatenation and tiling and can work in the same filter graph as traditional CIKL kernels.\n\n### Specifying Compiler and Linker Options\n\nTo use MSL as the shader language for a [doc:\/\/com.apple.coreimage\/documentation\/CoreImage\/CIKernel], you must specify some options in Xcode under the *Build Settings* tab of your project’s target. The first option you need to specify is an `-fcikernel` flag in the Other Metal Compiler Flags option. The second is to add a user-defined setting with a key called `MTLLINKER_FLAGS` with a value of `-cikernel:`\n\n\n\n### Creating a General Kernel in Swift\n\nThe following code shows how you can create a general kernel based on a Metal function named `myKernel`.\n\nThe first step is to create a `Data` object that represents the the default Metal library. If you have built this in Xcode, it will be called `default.metallib` and can be loaded using the [https:\/\/developer.apple.com\/library\/archive\/documentation\/General\/Conceptual\/DevPedia-CocoaCore\/Bundle.html#\/\/apple_ref\/doc\/uid\/TP40008195-CH4] type’s `url` method.\n\nUsing the representation of the Metal library and the function name `myKernel`, you initialize a [doc:\/\/com.apple.coreimage\/documentation\/CoreImage\/CIKernel].\n\nThe code to create general, color, warp and blend filters is identical.\n\n### Metal Shading Language Extensions\n\nCore Image provides a set of language extensions to MSL in `CIKernelMetalLib.h`. These extensions include three new data types for working with images: `sampler` (for accessing the input image), `sample_t` (represents a single color sample from the input image), and `destination` (for accessing the output image). The extensions also include convenience functions such as color conversion and premultiply \/ unpremultiply.\n\nWhereas in CIKL, you typically called global functions when working with, for example, coordinates and samples, these functions are implemented as member functions on the new types.\n\nThe following table shows a summary of CIKL global functions and their equivalent MSL functions.",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "tvOS",
    "visionOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/CoreImage\/CIKernel\/init(functionName:fromMetalLibraryData:)\ncrawled: 2025-12-06T10:36:57Z\n---\n\n# init(functionName:fromMetalLibraryData:)\n\n**Initializer**\n\nCreates a single kernel object using a Metal Shading Language (MSL) kernel function.\n\n## Declaration\n\n```swift\nconvenience init(functionName name: String, fromMetalLibraryData data: Data) throws\n```\n\n## Discussion\n\n- name: The name of the function in the Metal shading language.\n- data: A metallib file compiled with the Core Image Standard Library.\n\n## Discussion\n\nThis method allows you to use MSL as the shader language for a Core Image kernel. Since MSL based kernels are precompiled, initializing them is faster than their than Core Image Kernel Language (CIKL) counterparts and Xcode can provide error diagnostics during development rather than at runtime. MSL is a more modern language than CIKL, and you can write shader code that uses arrays, structs and matrices.\n\nMSL based kernels still support concatenation and tiling and can work in the same filter graph as traditional CIKL kernels.\n\n### Specifying Compiler and Linker Options\n\nTo use MSL as the shader language for a [doc:\/\/com.apple.coreimage\/documentation\/CoreImage\/CIKernel], you must specify some options in Xcode under the *Build Settings* tab of your project’s target. The first option you need to specify is an `-fcikernel` flag in the Other Metal Compiler Flags option. The second is to add a user-defined setting with a key called `MTLLINKER_FLAGS` with a value of `-cikernel:`\n\n\n\n### Creating a General Kernel in Swift\n\nThe following code shows how you can create a general kernel based on a Metal function named `myKernel`.\n\nThe first step is to create a `Data` object that represents the the default Metal library. If you have built this in Xcode, it will be called `default.metallib` and can be loaded using the [https:\/\/developer.apple.com\/library\/archive\/documentation\/General\/Conceptual\/DevPedia-CocoaCore\/Bundle.html#\/\/apple_ref\/doc\/uid\/TP40008195-CH4] type’s `url` method.\n\nUsing the representation of the Metal library and the function name `myKernel`, you initialize a [doc:\/\/com.apple.coreimage\/documentation\/CoreImage\/CIKernel].\n\n```swift\nguard\n    let url = Bundle.main.url(forResource: \"default\", withExtension: \"metallib\"),\n    let data = try? Data(contentsOf: url) else {\n    fatalError(\"Unable to get metallib\")\n}\n \nguard let generalKernel = try? CIKernel(functionName: \"myKernel\", fromMetalLibraryData: data) else {\n    fatalError(\"Unable to create CIKernel from myKernel\")\n}\n```\n\nThe code to create general, color, warp and blend filters is identical.\n\n### Metal Shading Language Extensions\n\nCore Image provides a set of language extensions to MSL in `CIKernelMetalLib.h`. These extensions include three new data types for working with images: `sampler` (for accessing the input image), `sample_t` (represents a single color sample from the input image), and `destination` (for accessing the output image). The extensions also include convenience functions such as color conversion and premultiply \/ unpremultiply.\n\nWhereas in CIKL, you typically called global functions when working with, for example, coordinates and samples, these functions are implemented as member functions on the new types.\n\nThe following table shows a summary of CIKL global functions and their equivalent MSL functions.\n\n\n\n## Creating a Kernel Using Metal Shading Language\n\n- **init(functionName:fromMetalLibraryData:outputPixelFormat:)**: Creates a single kernel object using a Metal Shading Language kernel function with optional pixel format.\n- **kernelNames(fromMetalLibraryData:)**: Return an array of strings containing the names of all of the kernels contained in the Metal library.\n- **kernels(withMetalString:)**: Load kernels from a Metal language string.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Creates a single kernel object using a Metal Shading Language kernel function with optional pixel format.",
          "name" : "init(functionName:fromMetalLibraryData:outputPixelFormat:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreImage\/CIKernel\/init(functionName:fromMetalLibraryData:outputPixelFormat:)"
        },
        {
          "description" : "Return an array of strings containing the names of all of the kernels contained in the Metal library.",
          "name" : "kernelNames(fromMetalLibraryData:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreImage\/CIKernel\/kernelNames(fromMetalLibraryData:)"
        },
        {
          "description" : "Load kernels from a Metal language string.",
          "name" : "kernels(withMetalString:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreImage\/CIKernel\/kernels(withMetalString:)"
        }
      ],
      "title" : "Creating a Kernel Using Metal Shading Language"
    }
  ],
  "source" : "appleJSON",
  "title" : "init(functionName:fromMetalLibraryData:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/CoreImage\/CIKernel\/init(functionName:fromMetalLibraryData:)"
}