{
  "abstract" : "Degrade the quality of an image to make it look like dated, analog film.",
  "codeExamples" : [
    {
      "code" : "CIFilter<CISepiaTone> *sepiaFilter = CIFilter.sepiaToneFilter;\nsepiaFilter.inputImage = inputImage;\nsepiaFilter.intensity = 1.0;\nCIImage *sepiaCIImage = sepiaFilter.outputImage;",
      "language" : "swift"
    },
    {
      "code" : "CIFilter<CIRandomGenerator> *colorNoise = CIFilter.randomGeneratorFilter;\nCIImage* noiseImage = colorNoise.outputImage;",
      "language" : "swift"
    },
    {
      "code" : "CIVector *whitenVector = [CIVector vectorWithX:0 Y:1 Z:0 W:0];\nCIVector *fineGrain = [CIVector vectorWithX:0 Y:0.005 Z:0 W:0];\nCIVector *zeroVector = [CIVector vectorWithX:0 Y:0 Z:0 W: 0];\nCIFilter<CIColorMatrix> *whiteningFilter = CIFilter.colorMatrixFilter;\nwhiteningFilter.inputImage = noiseImage;\nwhiteningFilter.RVector = whitenVector;\nwhiteningFilter.RVector = whitenVector;\nwhiteningFilter.BVector = whitenVector;\nwhiteningFilter.AVector = fineGrain;\nwhiteningFilter.biasVector = zeroVector;\nCIImage *whiteSpecks = whiteningFilter.outputImage;",
      "language" : "swift"
    },
    {
      "code" : "CIFilter<CICompositeOperation> *speckCompositor = CIFilter.sourceOverCompositingFilter;\nspeckCompositor.inputImage = whiteSpecks;\nspeckCompositor.backgroundImage = sepiaCIImage;\nCIImage *speckledImage = speckCompositor.outputImage;",
      "language" : "swift"
    },
    {
      "code" : "CGAffineTransform verticalScale = CGAffineTransformMakeScale(1.5, 25);\nCIImage* transformedNoise = [noiseImage imageByApplyingTransform:verticalScale];",
      "language" : "swift"
    },
    {
      "code" : "CIFilter<CIColorMatrix>* darkeningFilter = CIFilter.colorMatrixFilter;\nCIVector* darkenVector = [CIVector vectorWithX:4 Y:0 Z:0 W:0];\nCIVector* darkenBias = [CIVector vectorWithX:0 Y:1 Z:1 W:1];\ndarkeningFilter.inputImage = noiseImage;\ndarkeningFilter.RVector = darkenVector;\ndarkeningFilter.GVector = zeroVector;\ndarkeningFilter.BVector = zeroVector;\ndarkeningFilter.AVector = zeroVector;\ndarkeningFilter.biasVector = darkenBias;\nCIImage* randomScratches = darkeningFilter.outputImage;",
      "language" : "swift"
    },
    {
      "code" : "CIFilter<CIMinimumComponent> *grayscaleFilter = CIFilter.minimumComponentFilter;\ngrayscaleFilter.inputImage = randomScratches;\nCIImage *darkScratches = grayscaleFilter.outputImage;",
      "language" : "swift"
    },
    {
      "code" : "CIFilter<CICompositeOperation> *oldFilmCompositor = CIFilter.multiplyCompositingFilter;\noldFilmCompositor.inputImage = darkScratches;\noldFilmCompositor.backgroundImage = speckledImage;\nCIImage *oldFilmImage = oldFilmCompositor.outputImage;",
      "language" : "swift"
    },
    {
      "code" : "CIImage* finalImage = [oldFilmImage imageByCroppingToRect:inputImage.extent];",
      "language" : "swift"
    }
  ],
  "contentHash" : "48a695ecdc57ea6ce2c3ad290714983585e194b53990380b4450baa42fe59a30",
  "crawledAt" : "2025-12-04T21:21:23Z",
  "id" : "D8DBB11F-1809-4C67-B2CA-3CE7244B7781",
  "kind" : "article",
  "language" : "swift",
  "module" : "Core Image",
  "overview" : "## Overview\n\nThe [doc:\/\/com.apple.coreimage\/documentation\/CoreImage\/CIFilter-swift.class\/sepiaTone()] filter changes the tint of an image to a reddish-brownish hue resembling old analog photographs. You can enhance the effect by applying random specks and scratches.\n\n\n\nThe following steps leverage built-in Core Image filters to tint and texture an image to look as if it were analog film:\n\n### Apply the Sepia Tone Filter to the Original Image\n\nTint the original image by applying the [doc:\/\/com.apple.coreimage\/documentation\/CoreImage\/CIFilter-swift.class\/sepiaTone()] filter.\n\n### Simulate Grain by Creating Randomly Varying Specks\n\nYou can use the output of the [doc:\/\/com.apple.coreimage\/documentation\/CoreImage\/CIFilter-swift.class\/randomGenerator()] filter to generate images containing random noise. Even though the noise pattern isn’t customizable in size, you can extend and crop it to fit the image.\n\nThe filter takes no inputs.\n\nNext, apply a whitening effect by chaining the noise output to a [doc:\/\/com.apple.coreimage\/documentation\/CoreImage\/CIFilter-swift.class\/colorMatrix()] filter. This built-in filter multiplies the noise color values individually and applies a bias to each component. For white grain, apply whitening to the y-component of RGB and no bias.\n\nThe `whiteSpecks` resulting from this filter have the appearance of spotty grain when viewed as an image.\n\n\n\nCreate the grainy image by compositing the whitened noise as input over the sepia-toned source image using the [doc:\/\/com.apple.coreimage\/documentation\/CoreImage\/CIFilter-swift.class\/sourceOverCompositing()] filter.\n\n### Simulate Scratch by Scaling Randomly Varying Noise\n\nThe process for applying random-looking scratches is the same as the technique used in the white grain: color the output of the [doc:\/\/com.apple.coreimage\/documentation\/CoreImage\/CIFilter-swift.class\/randomGenerator()] filter.\n\nTo make the speckle resemble scratches, scale the random noise output vertically by applying a scaling [doc:\/\/com.apple.documentation\/documentation\/CoreFoundation\/CGAffineTransform].\n\nPreviously, you whitened the speckle image by applying the `CIColorMatrix` filter evenly across all color components.  For the dark scratches, instead focus on only the red component, setting the other vector inputs to zero.  This time, instead of multiplying the green, blue, and alpha channels, add bias `(0, 1, 1, 1)`.\n\nThe resulting scratches are cyan, so grayscale them using the [doc:\/\/com.apple.coreimage\/documentation\/CoreImage\/CIFilter-swift.class\/minimumComponent()] filter, which takes the minimum of the RGB values to produce a grayscale image.\n\nThe grayscale filter produces random lines that resemble dark scratches.\n\n\n\n### Composite the Specks and Scratches to the Sepia Image\n\nNow that the components are set, you can add the scratches to the grainy sepia image produced earlier.  However, unlike the grainy texture, the scratches impact the image multiplicatively.  Instead of the [doc:\/\/com.apple.coreimage\/documentation\/CoreImage\/CIFilter-swift.class\/sourceOverCompositing()] filter, which composites source over background, use the [doc:\/\/com.apple.coreimage\/documentation\/CoreImage\/CIFilter-swift.class\/multiplyCompositing()] filter to compose the scratches multiplicatively.  Set the scratched image as the filter’s input image, and tab the speckle-composited sepia image as the input background image.\n\nSince the noise images had different dimensions than the source image, crop the composited result to the original image size to remove excess beyond the original extent.\n\nThe cropped image represents the final result: a sepia-toned image with simulated grain and scratches composited to give it an analog film appearance.\n\n",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/CoreImage\/simulating-scratchy-analog-film\ncrawled: 2025-12-04T21:21:23Z\n---\n\n# Simulating Scratchy Analog Film\n\n**Article**\n\nDegrade the quality of an image to make it look like dated, analog film.\n\n## Overview\n\nThe [doc:\/\/com.apple.coreimage\/documentation\/CoreImage\/CIFilter-swift.class\/sepiaTone()] filter changes the tint of an image to a reddish-brownish hue resembling old analog photographs. You can enhance the effect by applying random specks and scratches.\n\n\n\nThe following steps leverage built-in Core Image filters to tint and texture an image to look as if it were analog film:\n\n1. Apply the [doc:\/\/com.apple.coreimage\/documentation\/CoreImage\/CIFilter-swift.class\/sepiaTone()] filter.\n2. Create randomly varying white specks to simulate grain.\n3. Create randomly varying dark scratches to simulate scratchy film.\n4. Composite the speckle image and scratches onto the sepia-toned image.\n\n### Apply the Sepia Tone Filter to the Original Image\n\nTint the original image by applying the [doc:\/\/com.apple.coreimage\/documentation\/CoreImage\/CIFilter-swift.class\/sepiaTone()] filter.\n\n```swift\nCIFilter<CISepiaTone> *sepiaFilter = CIFilter.sepiaToneFilter;\nsepiaFilter.inputImage = inputImage;\nsepiaFilter.intensity = 1.0;\nCIImage *sepiaCIImage = sepiaFilter.outputImage;\n```\n\n### Simulate Grain by Creating Randomly Varying Specks\n\nYou can use the output of the [doc:\/\/com.apple.coreimage\/documentation\/CoreImage\/CIFilter-swift.class\/randomGenerator()] filter to generate images containing random noise. Even though the noise pattern isn’t customizable in size, you can extend and crop it to fit the image.\n\n\n\nThe filter takes no inputs.\n\n```swift\nCIFilter<CIRandomGenerator> *colorNoise = CIFilter.randomGeneratorFilter;\nCIImage* noiseImage = colorNoise.outputImage;\n```\n\nNext, apply a whitening effect by chaining the noise output to a [doc:\/\/com.apple.coreimage\/documentation\/CoreImage\/CIFilter-swift.class\/colorMatrix()] filter. This built-in filter multiplies the noise color values individually and applies a bias to each component. For white grain, apply whitening to the y-component of RGB and no bias.\n\n```swift\nCIVector *whitenVector = [CIVector vectorWithX:0 Y:1 Z:0 W:0];\nCIVector *fineGrain = [CIVector vectorWithX:0 Y:0.005 Z:0 W:0];\nCIVector *zeroVector = [CIVector vectorWithX:0 Y:0 Z:0 W: 0];\nCIFilter<CIColorMatrix> *whiteningFilter = CIFilter.colorMatrixFilter;\nwhiteningFilter.inputImage = noiseImage;\nwhiteningFilter.RVector = whitenVector;\nwhiteningFilter.RVector = whitenVector;\nwhiteningFilter.BVector = whitenVector;\nwhiteningFilter.AVector = fineGrain;\nwhiteningFilter.biasVector = zeroVector;\nCIImage *whiteSpecks = whiteningFilter.outputImage;\n```\n\nThe `whiteSpecks` resulting from this filter have the appearance of spotty grain when viewed as an image.\n\n\n\nCreate the grainy image by compositing the whitened noise as input over the sepia-toned source image using the [doc:\/\/com.apple.coreimage\/documentation\/CoreImage\/CIFilter-swift.class\/sourceOverCompositing()] filter.\n\n```swift\nCIFilter<CICompositeOperation> *speckCompositor = CIFilter.sourceOverCompositingFilter;\nspeckCompositor.inputImage = whiteSpecks;\nspeckCompositor.backgroundImage = sepiaCIImage;\nCIImage *speckledImage = speckCompositor.outputImage;\n```\n\n### Simulate Scratch by Scaling Randomly Varying Noise\n\nThe process for applying random-looking scratches is the same as the technique used in the white grain: color the output of the [doc:\/\/com.apple.coreimage\/documentation\/CoreImage\/CIFilter-swift.class\/randomGenerator()] filter.\n\nTo make the speckle resemble scratches, scale the random noise output vertically by applying a scaling [doc:\/\/com.apple.documentation\/documentation\/CoreFoundation\/CGAffineTransform].\n\n```swift\nCGAffineTransform verticalScale = CGAffineTransformMakeScale(1.5, 25);\nCIImage* transformedNoise = [noiseImage imageByApplyingTransform:verticalScale];\n```\n\nPreviously, you whitened the speckle image by applying the `CIColorMatrix` filter evenly across all color components.  For the dark scratches, instead focus on only the red component, setting the other vector inputs to zero.  This time, instead of multiplying the green, blue, and alpha channels, add bias `(0, 1, 1, 1)`.\n\n```swift\nCIFilter<CIColorMatrix>* darkeningFilter = CIFilter.colorMatrixFilter;\nCIVector* darkenVector = [CIVector vectorWithX:4 Y:0 Z:0 W:0];\nCIVector* darkenBias = [CIVector vectorWithX:0 Y:1 Z:1 W:1];\ndarkeningFilter.inputImage = noiseImage;\ndarkeningFilter.RVector = darkenVector;\ndarkeningFilter.GVector = zeroVector;\ndarkeningFilter.BVector = zeroVector;\ndarkeningFilter.AVector = zeroVector;\ndarkeningFilter.biasVector = darkenBias;\nCIImage* randomScratches = darkeningFilter.outputImage;\n```\n\nThe resulting scratches are cyan, so grayscale them using the [doc:\/\/com.apple.coreimage\/documentation\/CoreImage\/CIFilter-swift.class\/minimumComponent()] filter, which takes the minimum of the RGB values to produce a grayscale image.\n\n```swift\nCIFilter<CIMinimumComponent> *grayscaleFilter = CIFilter.minimumComponentFilter;\ngrayscaleFilter.inputImage = randomScratches;\nCIImage *darkScratches = grayscaleFilter.outputImage;\n```\n\nThe grayscale filter produces random lines that resemble dark scratches.\n\n\n\n### Composite the Specks and Scratches to the Sepia Image\n\nNow that the components are set, you can add the scratches to the grainy sepia image produced earlier.  However, unlike the grainy texture, the scratches impact the image multiplicatively.  Instead of the [doc:\/\/com.apple.coreimage\/documentation\/CoreImage\/CIFilter-swift.class\/sourceOverCompositing()] filter, which composites source over background, use the [doc:\/\/com.apple.coreimage\/documentation\/CoreImage\/CIFilter-swift.class\/multiplyCompositing()] filter to compose the scratches multiplicatively.  Set the scratched image as the filter’s input image, and tab the speckle-composited sepia image as the input background image.\n\n```swift\nCIFilter<CICompositeOperation> *oldFilmCompositor = CIFilter.multiplyCompositingFilter;\noldFilmCompositor.inputImage = darkScratches;\noldFilmCompositor.backgroundImage = speckledImage;\nCIImage *oldFilmImage = oldFilmCompositor.outputImage;\n```\n\nSince the noise images had different dimensions than the source image, crop the composited result to the original image size to remove excess beyond the original extent.\n\n```swift\nCIImage* finalImage = [oldFilmImage imageByCroppingToRect:inputImage.extent];\n```\n\nThe cropped image represents the final result: a sepia-toned image with simulated grain and scratches composited to give it an analog film appearance.\n\n\n\n## Filter Recipes\n\n- **Applying a Chroma Key Effect**: Replace a color in one image with the background from another.\n- **Selectively Focusing on an Image**: Focus on a part of an image by applying Gaussian blur and gradient masks.\n- **Customizing Image Transitions**: Transition between images in creative ways using Core Image filters.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Replace a color in one image with the background from another.",
          "name" : "Applying a Chroma Key Effect",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreImage\/applying-a-chroma-key-effect"
        },
        {
          "description" : "Focus on a part of an image by applying Gaussian blur and gradient masks.",
          "name" : "Selectively Focusing on an Image",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreImage\/selectively-focusing-on-an-image"
        },
        {
          "description" : "Transition between images in creative ways using Core Image filters.",
          "name" : "Customizing Image Transitions",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreImage\/customizing-image-transitions"
        }
      ],
      "title" : "Filter Recipes"
    }
  ],
  "source" : "appleJSON",
  "title" : "Simulating Scratchy Analog Film",
  "url" : "https:\/\/developer.apple.com\/documentation\/CoreImage\/simulating-scratchy-analog-film"
}