{
  "abstract" : "Notifies your app before the framework presents a context menu.",
  "codeExamples" : [
    {
      "code" : "func overlayView(_ overlayView: ImageAnalysisOverlayView, updateMenu menu: NSMenu, forEvent: NSEvent, atPoint point: CGPoint) -> NSMenu {\n\n    let copySubjectItem = menu.item(withTag:ImageAnalysisOverlayView.MenuTag.copySubject)\n    copySubjectItem.title = \"Copy and remove background\"\n\n    return menu\n}",
      "language" : "swift"
    },
    {
      "code" : "func overlayView(_ overlayView: ImageAnalysisOverlayView, updateMenu menu: NSMenu, forEvent: NSEvent, atPoint point: CGPoint) -> NSMenu {\n\n    let item = NSMenuItem()\n    let tag = ImageAnalysisOverlayView.MenuTag.recommendedAppItems\n    let index = menu.indexOfItem(withTag:tag)\n    menu.insertItem(item, at: index)\n\n    return menu\n}",
      "language" : "swift"
    }
  ],
  "contentHash" : "19432db5f4c7ed444129c93dbcc896c9cad96c77e95778e5c0e591982214cd3c",
  "crawledAt" : "2025-12-02T06:45:07Z",
  "declaration" : {
    "code" : "@MainActor func overlayView(_ overlayView: ImageAnalysisOverlayView, updatedMenuFor menu: NSMenu, for event: NSEvent, at point: CGPoint) -> NSMenu",
    "language" : "swift"
  },
  "id" : "5E1B3B84-29AB-4941-BF06-7DAFEBBB581A",
  "kind" : "method",
  "module" : "VisionKit",
  "overview" : "## Discussion\n\nThis callback enables your app to add custom context menu items or manage the framework-provided content menu items. For example, the following implementation changes the title of the framework-provided `copySubject` menu item from “Copy” to “Copy and remove background”.\n\nThe menu items don’t persist. However, your app can alter menu items and share them across different menus within the same menu session.\n\nTo add items to a menu, access  the recommended index for insertion by using the [doc:\/\/com.apple.VisionKit\/documentation\/VisionKit\/ImageAnalysisOverlayView\/MenuTag\/recommendedAppItems] menu tag, such as in the following code:",
  "platforms" : [
    "macOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/VisionKit\/ImageAnalysisOverlayViewDelegate\/overlayView(_:updatedMenuFor:for:at:)\ncrawled: 2025-12-02T06:45:07Z\n---\n\n# overlayView(_:updatedMenuFor:for:at:)\n\n**Instance Method**\n\nNotifies your app before the framework presents a context menu.\n\n## Declaration\n\n```swift\n@MainActor func overlayView(_ overlayView: ImageAnalysisOverlayView, updatedMenuFor menu: NSMenu, for event: NSEvent, at point: CGPoint) -> NSMenu\n```\n\n## Parameters\n\n- **overlayView**: The associated overlay view for the updated menu.\n- **menu**: The menu that appears.\n- **event**: The event associated with this menu.\n- **point**: The original location of the event for the menu.\n\n## Discussion\n\nThis callback enables your app to add custom context menu items or manage the framework-provided content menu items. For example, the following implementation changes the title of the framework-provided `copySubject` menu item from “Copy” to “Copy and remove background”.\n\n```swift\nfunc overlayView(_ overlayView: ImageAnalysisOverlayView, updateMenu menu: NSMenu, forEvent: NSEvent, atPoint point: CGPoint) -> NSMenu {\n\n    let copySubjectItem = menu.item(withTag:ImageAnalysisOverlayView.MenuTag.copySubject)\n    copySubjectItem.title = \"Copy and remove background\"\n\n    return menu\n}\n```\n\nThe menu items don’t persist. However, your app can alter menu items and share them across different menus within the same menu session.\n\nTo add items to a menu, access  the recommended index for insertion by using the [doc:\/\/com.apple.VisionKit\/documentation\/VisionKit\/ImageAnalysisOverlayView\/MenuTag\/recommendedAppItems] menu tag, such as in the following code:\n\n```swift\nfunc overlayView(_ overlayView: ImageAnalysisOverlayView, updateMenu menu: NSMenu, forEvent: NSEvent, atPoint point: CGPoint) -> NSMenu {\n\n    let item = NSMenuItem()\n    let tag = ImageAnalysisOverlayView.MenuTag.recommendedAppItems\n    let index = menu.indexOfItem(withTag:tag)\n    menu.insertItem(item, at: index)\n\n    return menu\n}\n```\n\n\n\n## Responding to key and menu events\n\n- **overlayView(_:shouldHandleKeyDownEvent:)**: Returns a Boolean value that indicates whether the overlay view consumes the given key-down event.\n- **overlayView(_:shouldShowMenuForEvent:atPoint:)**: Provides a Boolean value that indicates whether the overlay view shows a menu for the given event.\n- **overlayView(_:menu:willHighlight:)**: Notifies your app that the given menu item is highlighted.\n- **overlayView(_:willOpen:)**: Notifies your app that a given menu is opening imminently.\n- **overlayView(_:didClose:)**: Notifies your app that the given menu closed.\n- **overlayView(_:needsUpdate:)**: Notifies your app that the given menu needs updating.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Returns a Boolean value that indicates whether the overlay view consumes the given key-down event.",
          "name" : "overlayView(_:shouldHandleKeyDownEvent:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/VisionKit\/ImageAnalysisOverlayViewDelegate\/overlayView(_:shouldHandleKeyDownEvent:)"
        },
        {
          "description" : "Provides a Boolean value that indicates whether the overlay view shows a menu for the given event.",
          "name" : "overlayView(_:shouldShowMenuForEvent:atPoint:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/VisionKit\/ImageAnalysisOverlayViewDelegate\/overlayView(_:shouldShowMenuForEvent:atPoint:)"
        },
        {
          "description" : "Notifies your app that the given menu item is highlighted.",
          "name" : "overlayView(_:menu:willHighlight:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/VisionKit\/ImageAnalysisOverlayViewDelegate\/overlayView(_:menu:willHighlight:)"
        },
        {
          "description" : "Notifies your app that a given menu is opening imminently.",
          "name" : "overlayView(_:willOpen:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/VisionKit\/ImageAnalysisOverlayViewDelegate\/overlayView(_:willOpen:)"
        },
        {
          "description" : "Notifies your app that the given menu closed.",
          "name" : "overlayView(_:didClose:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/VisionKit\/ImageAnalysisOverlayViewDelegate\/overlayView(_:didClose:)"
        },
        {
          "description" : "Notifies your app that the given menu needs updating.",
          "name" : "overlayView(_:needsUpdate:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/VisionKit\/ImageAnalysisOverlayViewDelegate\/overlayView(_:needsUpdate:)"
        }
      ],
      "title" : "Responding to key and menu events"
    }
  ],
  "source" : "appleJSON",
  "title" : "overlayView(_:updatedMenuFor:for:at:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/VisionKit\/ImageAnalysisOverlayViewDelegate\/overlayView(_:updatedMenuFor:for:at:)"
}