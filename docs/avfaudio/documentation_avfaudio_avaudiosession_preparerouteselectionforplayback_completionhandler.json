{
  "abstract" : "Prepares the route selection for long-form video playback.",
  "codeExamples" : [
    {
      "code" : "let session = AVAudioSession.sharedInstance()\nsession.prepareRouteSelectionForPlayback { shouldStartPlayback, routeSelection in\n    if shouldStartPlayback {\n        \/\/ Prepare and present player.\n    }\n}",
      "language" : "swift"
    }
  ],
  "contentHash" : "1b03ecf1f2cf97d8671f71f57d4438924cbfc95e3e328370794443212f4656f2",
  "crawledAt" : "2025-11-30T22:39:08Z",
  "declaration" : {
    "code" : "func prepareRouteSelectionForPlayback(completionHandler: @escaping (Bool, AVAudioSession.RouteSelection) -> Void)",
    "language" : "swift"
  },
  "id" : "C478B428-38B0-46C3-8BCD-6A01B5E1A53E",
  "kind" : "method",
  "module" : "AVFAudio",
  "overview" : "## Discussion\n\nWhen playing long-form video content, call this method to indicate that playback is about to begin. Doing so provides the system the opportunity to prompt the user for an output destination, if needed, and perform any required routing.\n\nThe system only prompts the user to select a route if you’ve configured the audio session with a long-form video route-sharing policy. After the system configures the needed routing, it calls its completion handler, from which you can begin playback.",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "visionOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/AVFAudio\/AVAudioSession\/prepareRouteSelectionForPlayback(completionHandler:)\ncrawled: 2025-11-30T22:39:08Z\n---\n\n# prepareRouteSelectionForPlayback(completionHandler:)\n\n**Instance Method**\n\nPrepares the route selection for long-form video playback.\n\n## Declaration\n\n```swift\nfunc prepareRouteSelectionForPlayback(completionHandler: @escaping (Bool, AVAudioSession.RouteSelection) -> Void)\n```\n\n```swift\nfunc prepareRouteSelectionForPlayback() async -> (Bool, AVAudioSession.RouteSelection)\n```\n\n## Parameters\n\n- **completionHandler**: A completion handler called after the system finishes preparing the playback route. The system passes the completion handler the following parameters:\n\n\n\n## Discussion\n\nWhen playing long-form video content, call this method to indicate that playback is about to begin. Doing so provides the system the opportunity to prompt the user for an output destination, if needed, and perform any required routing.\n\nThe system only prompts the user to select a route if you’ve configured the audio session with a long-form video route-sharing policy. After the system configures the needed routing, it calls its completion handler, from which you can begin playback.\n\n```swift\nlet session = AVAudioSession.sharedInstance()\nsession.prepareRouteSelectionForPlayback { shouldStartPlayback, routeSelection in\n    if shouldStartPlayback {\n        \/\/ Prepare and present player.\n    }\n}\n```\n\n## Related Documentation\n\n- **setCategory(_:mode:policy:options:)**: Sets the session category, mode, route-sharing policy, and options.\n\n## Preparing for long-form video playback\n\n- **AVAudioSession.RouteSelection**: Constants used to define the active route selection.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Sets the session category, mode, route-sharing policy, and options.",
          "name" : "setCategory(_:mode:policy:options:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFAudio\/AVAudioSession\/setCategory(_:mode:policy:options:)"
        }
      ],
      "title" : "Related Documentation"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Constants used to define the active route selection.",
          "name" : "AVAudioSession.RouteSelection",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFAudio\/AVAudioSession\/RouteSelection"
        }
      ],
      "title" : "Preparing for long-form video playback"
    }
  ],
  "source" : "appleJSON",
  "title" : "prepareRouteSelectionForPlayback(completionHandler:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/AVFAudio\/AVAudioSession\/prepareRouteSelectionForPlayback(completionHandler:)"
}