{
  "abstract" : "Learn the best techniques for managing Sign in with Apple user sessions and responding to account deletion requests.",
  "codeExamples" : [

  ],
  "contentHash" : "041cfb44e84e78209ad8b383b7683cdaf808dc68421483c772933c9aac9a47a3",
  "crawledAt" : "2025-12-05T10:31:35Z",
  "id" : "1D219D96-5766-4D9B-B085-3CC92F6EA630",
  "kind" : "article",
  "language" : "swift",
  "overview" : "## Overview\n\nApps submitted to the App Store that support account creation must also let users initiate deletion of their account within the app, as of June 30, 2022. To learn more, see [https:\/\/developer.apple.com\/support\/offering-account-deletion-in-your-app\/].\n\nTo properly support both account creation, verification, and deletion in your app, securely store user credentials—for example, identity tokens and refresh tokens— and consider using a server infrastructure to handle token generation, validation, and revocation.\n\n## Invalidate a user session\n\nThe [doc:\/\/com.apple.documentation\/documentation\/SigninwithAppleRESTAPI\/Revoke-tokens] endpoint (`\/auth\/revoke`) is the only way to programmatically invalidate user tokens associated to your developer account without user interaction. Apps using Sign in with Apple are expected to securely transmit and store tokens when integrated with a server infrastructure. This allows you to validate all user tokens received from Apple, as well as verify the user’s identity and Apple’s public key before granting access to your app or its data. Because this endpoint manages your user sessions, either a valid refresh token or access token for invalidation is required.\n\nIf you don’t have the user’s refresh token, access token, or authorization code, you must still fulfill the user’s account deletion request and meet the account deletion requirement. To manually revoke the user credentials, follow the steps below:\n\n## Respond to credential revoked notifications\n\nOnce the user’s credentials are revoked by Apple, your client will receive a notification signaling the revocation event:\n\nWhen receiving either notification, ensure you’ve completed the following operations to meet the requirements of account deletion:\n\n## Securely store user tokens for account creations\n\nFor all new user account creations, properly store and handle the user credentials by following the authorization flow below:\n\nIf you have questions about implementing these flows, including client authorization, token validation, or token revocation, please see the following resources:\n\n## Revision History",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/Technotes\/tn3194-handling-account-deletions-and-revoking-tokens-for-sign-in-with-apple\ncrawled: 2025-12-05T10:31:35Z\n---\n\n# TN3194: Handling account deletions and revoking tokens for Sign in with Apple\n\n**Article**\n\nLearn the best techniques for managing Sign in with Apple user sessions and responding to account deletion requests.\n\n## Overview\n\nApps submitted to the App Store that support account creation must also let users initiate deletion of their account within the app, as of June 30, 2022. To learn more, see [https:\/\/developer.apple.com\/support\/offering-account-deletion-in-your-app\/].\n\nTo properly support both account creation, verification, and deletion in your app, securely store user credentials—for example, identity tokens and refresh tokens— and consider using a server infrastructure to handle token generation, validation, and revocation.\n\n## Invalidate a user session\n\nThe [doc:\/\/com.apple.documentation\/documentation\/SigninwithAppleRESTAPI\/Revoke-tokens] endpoint (`\/auth\/revoke`) is the only way to programmatically invalidate user tokens associated to your developer account without user interaction. Apps using Sign in with Apple are expected to securely transmit and store tokens when integrated with a server infrastructure. This allows you to validate all user tokens received from Apple, as well as verify the user’s identity and Apple’s public key before granting access to your app or its data. Because this endpoint manages your user sessions, either a valid refresh token or access token for invalidation is required.\n\nIf you don’t have the user’s refresh token, access token, or authorization code, you must still fulfill the user’s account deletion request and meet the account deletion requirement. To manually revoke the user credentials, follow the steps below:\n\n1. Delete the user’s account data from your systems.\n2. Direct the user to [https:\/\/support.apple.com\/en-us\/102571] for your client.\n3. Respond to the credential revoked notification to revert the client to an unauthenticated state\n\n\n\n## Respond to credential revoked notifications\n\nOnce the user’s credentials are revoked by Apple, your client will receive a notification signaling the revocation event:\n\n- For apps using the [doc:\/\/com.apple.documentation\/documentation\/AuthenticationServices] framework to implement Sign in with Apple, observe the [doc:\/\/com.apple.documentation\/documentation\/AuthenticationServices\/ASAuthorizationAppleIDProvider\/credentialRevokedNotification] and use [doc:\/\/com.apple.documentation\/documentation\/AuthenticationServices\/ASAuthorizationAppleIDProvider\/getCredentialState(forUserID:completion:)] on the [doc:\/\/com.apple.documentation\/documentation\/AuthenticationServices\/ASAuthorizationAppleIDProvider] object to respond to credential revocation and account deletion events.\n- For web services, if an endpoint is registered for [doc:\/\/com.apple.documentation\/documentation\/signinwithapple\/processing-changes-for-sign-in-with-apple-accounts], Apple broadcasts a notification to the specified endpoint with the `consent-revoked` event type.\n\nWhen receiving either notification, ensure you’ve completed the following operations to meet the requirements of account deletion:\n\n1. Delete all user-related account data, including:\n\n- The token used for token revocation;\n- Any user-related data stored in your app servers; and\n- Any user-related data store in the Keychain or securely on disk in the native app or locally on a web client.\n2. Revert the client to an unauthenticated state.\n\n## Securely store user tokens for account creations\n\nFor all new user account creations, properly store and handle the user credentials by following the authorization flow below:\n\n1. Securely transmit the identity token and authorization code to your app server.\n2. Verify the identity token and validate the authorization code using the `\/auth\/token` endpoint.\n3. Once the authorization code is validated, securely store the token response — including the identity token, refresh token, and access token.\n4. Validate the refresh token up to once per day with Apple servers (to manage the lifetime of your user session and for future token revocation requests), and obtain access tokens (for future token revocation, app transfer, or user migration requests).\n\nIf you have questions about implementing these flows, including client authorization, token validation, or token revocation, please see the following resources:\n\n- [doc:\/\/com.apple.documentation\/documentation\/signinwithapple\/verifying-a-user]\n- [doc:\/\/com.apple.documentation\/documentation\/AccountOrganizationalDataSharing\/creating-a-client-secret]\n- [doc:\/\/com.apple.documentation\/documentation\/SigninwithAppleRESTAPI\/Generate-and-validate-tokens]\n- [doc:\/\/com.apple.technotes\/documentation\/Technotes\/tn3107-resolving-sign-in-with-apple-response-errors]\n- [doc:\/\/com.apple.technotes\/documentation\/Technotes\/tn3159-migrating-sign-in-with-apple-users-for-an-app-transfer]\n\n## Revision History\n\n- **2025-10-03** First published.\n\n## Latest\n\n- **TN3190: USB audio device design considerations**: Learn the best techniques for designing devices that conform to the USB Audio Device Class specifications.\n- **TN3193: Managing the on-device foundation model’s context window**: Learn how to budget for the context window limit of Apple’s on-device foundation model and handle the error when reaching the limit.\n- **TN3115: Bluetooth State Restoration app relaunch rules**: Learn about the conditions under which an iOS app will be relaunched by Bluetooth State Restoration.\n- **TN3192: Migrating your iPad app from the deprecated UIRequiresFullScreen key**: Support iPad multitasking and dynamic resizing while updating your app to remove the deprecated full-screen compatibility mode.\n- **TN3151: Choosing the right networking API**: Learn which networking API is best for you.\n- **TN3111: iOS Wi-Fi API overview**: Explore the various Wi-Fi APIs available on iOS and their expected use cases.\n- **TN3191: IMAP extensions supported by Mail for iOS, iPadOS, and visionOS**: Learn which extensions to the RFC 3501 IMAP protocol are supported by Mail for iOS, iPadOS, and visionOS.\n- **TN3134: Network Extension provider deployment**: Explore the platforms, packaging, OS versions, and device configurations for Network Extension provider deployment.\n- **TN3179: Understanding local network privacy**: Learn how local network privacy affects your software.\n- **TN3189: Managing Mail background traffic load**: Identify iOS Mail background traffic and manage its impact on your IMAP server.\n- **TN3187: Migrating to the UIKit scene-based life cycle**: Update your app to receive scene-based life-cycle events and manage your user interface using scene objects and methods.\n- **TN3188: Troubleshooting In-App Purchases availability in the App Store**: Verify your In-App Purchases are approved and available for sale in the App Store.\n- **TN3186: Troubleshooting In-App Purchases availability in the sandbox**: Identify common configurations that make your In-App Purchases unavailable in the sandbox environment.\n- **TN3185: Troubleshooting In-App Purchases availability in Xcode**: Inspect your active StoreKit configuration file for unexpected configurations.\n- **TN3182: Adding privacy tracking keys to your privacy manifest**: Declare the tracking domains you use in your app or third-party SDK in a privacy manifest.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Learn the best techniques for designing devices that conform to the USB Audio Device Class specifications.",
          "name" : "TN3190: USB audio device design considerations",
          "url" : "https:\/\/developer.apple.com\/documentation\/Technotes\/tn3190-USB-audio-device-design-considerations"
        },
        {
          "description" : "Learn how to budget for the context window limit of Apple’s on-device foundation model and handle the error when reaching the limit.",
          "name" : "TN3193: Managing the on-device foundation model’s context window",
          "url" : "https:\/\/developer.apple.com\/documentation\/Technotes\/tn3193-managing-the-on-device-foundation-model-s-context-window"
        },
        {
          "description" : "Learn about the conditions under which an iOS app will be relaunched by Bluetooth State Restoration.",
          "name" : "TN3115: Bluetooth State Restoration app relaunch rules",
          "url" : "https:\/\/developer.apple.com\/documentation\/Technotes\/tn3115-bluetooth-state-restoration-app-relaunch-rules"
        },
        {
          "description" : "Support iPad multitasking and dynamic resizing while updating your app to remove the deprecated full-screen compatibility mode.",
          "name" : "TN3192: Migrating your iPad app from the deprecated UIRequiresFullScreen key",
          "url" : "https:\/\/developer.apple.com\/documentation\/Technotes\/tn3192-Migrating-your-app-from-the-deprecated-UIRequiresFullScreen-key"
        },
        {
          "description" : "Learn which networking API is best for you.",
          "name" : "TN3151: Choosing the right networking API",
          "url" : "https:\/\/developer.apple.com\/documentation\/Technotes\/tn3151-choosing-the-right-networking-api"
        },
        {
          "description" : "Explore the various Wi-Fi APIs available on iOS and their expected use cases.",
          "name" : "TN3111: iOS Wi-Fi API overview",
          "url" : "https:\/\/developer.apple.com\/documentation\/Technotes\/tn3111-ios-wifi-api-overview"
        },
        {
          "description" : "Learn which extensions to the RFC 3501 IMAP protocol are supported by Mail for iOS, iPadOS, and visionOS.",
          "name" : "TN3191: IMAP extensions supported by Mail for iOS, iPadOS, and visionOS",
          "url" : "https:\/\/developer.apple.com\/documentation\/Technotes\/tn3191-imap-extensions-supported-by-mail"
        },
        {
          "description" : "Explore the platforms, packaging, OS versions, and device configurations for Network Extension provider deployment.",
          "name" : "TN3134: Network Extension provider deployment",
          "url" : "https:\/\/developer.apple.com\/documentation\/Technotes\/tn3134-network-extension-provider-deployment"
        },
        {
          "description" : "Learn how local network privacy affects your software.",
          "name" : "TN3179: Understanding local network privacy",
          "url" : "https:\/\/developer.apple.com\/documentation\/Technotes\/tn3179-understanding-local-network-privacy"
        },
        {
          "description" : "Identify iOS Mail background traffic and manage its impact on your IMAP server.",
          "name" : "TN3189: Managing Mail background traffic load",
          "url" : "https:\/\/developer.apple.com\/documentation\/Technotes\/tn3189-managing-mail-background-traffic-load"
        },
        {
          "description" : "Update your app to receive scene-based life-cycle events and manage your user interface using scene objects and methods.",
          "name" : "TN3187: Migrating to the UIKit scene-based life cycle",
          "url" : "https:\/\/developer.apple.com\/documentation\/Technotes\/tn3187-Migrating-to-the-UIKit-scene-based-life-cycle"
        },
        {
          "description" : "Verify your In-App Purchases are approved and available for sale in the App Store.",
          "name" : "TN3188: Troubleshooting In-App Purchases availability in the App Store",
          "url" : "https:\/\/developer.apple.com\/documentation\/Technotes\/tn3188-troubleshooting-in-app-purchases-availability-in-the-app-store"
        },
        {
          "description" : "Identify common configurations that make your In-App Purchases unavailable in the sandbox environment.",
          "name" : "TN3186: Troubleshooting In-App Purchases availability in the sandbox",
          "url" : "https:\/\/developer.apple.com\/documentation\/Technotes\/tn3186-troubleshooting-in-app-purchases-availability-in-the-sandbox"
        },
        {
          "description" : "Inspect your active StoreKit configuration file for unexpected configurations.",
          "name" : "TN3185: Troubleshooting In-App Purchases availability in Xcode",
          "url" : "https:\/\/developer.apple.com\/documentation\/Technotes\/tn3185-troubleshooting-in-app-purchases-availability-in-xcode"
        },
        {
          "description" : "Declare the tracking domains you use in your app or third-party SDK in a privacy manifest.",
          "name" : "TN3182: Adding privacy tracking keys to your privacy manifest",
          "url" : "https:\/\/developer.apple.com\/documentation\/Technotes\/tn3182-adding-privacy-tracking-keys-to-your-privacy-manifest"
        }
      ],
      "title" : "Latest"
    }
  ],
  "source" : "appleJSON",
  "title" : "TN3194: Handling account deletions and revoking tokens for Sign in with Apple",
  "url" : "https:\/\/developer.apple.com\/documentation\/Technotes\/tn3194-handling-account-deletions-and-revoking-tokens-for-sign-in-with-apple"
}