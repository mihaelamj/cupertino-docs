{
  "abstract" : "Initiate outgoing calls with VoIP and configure your app to receive incoming calls.",
  "codeExamples" : [
    {
      "code" : "func startCall(handle: String, video: Bool = false) {\n    let handle = CXHandle(type: .phoneNumber, value: handle)\n    let startCallAction = CXStartCallAction(call: UUID(), handle: handle)\n\n    startCallAction.isVideo = video\n\n    let transaction = CXTransaction()\n    transaction.addAction(startCallAction)\n\n    requestTransaction(transaction)\n}\n\nprivate func requestTransaction(_ transaction: CXTransaction) {\n    callController.request(transaction) { error in\n        if let error = error {\n            print(\"Error requesting transaction:\", error.localizedDescription)\n        } else {\n            print(\"Requested transaction successfully\")\n        }\n    }\n}",
      "language" : "swift"
    },
    {
      "code" : "func provider(_ provider: CXProvider, perform action: CXStartCallAction) {\n    \/\/ Create and configure an instance of SpeakerboxCall to represent the new outgoing call.\n    let call = SpeakerboxCall(uuid: action.callUUID, isOutgoing: true)\n    call.handle = action.handle.value\n\n    \/*\n     Configure the audio session but do not start call audio here.\n     Call audio should not be started until the audio session is activated by the system,\n     after having its priority elevated.\n     *\/\n    configureAudioSession()\n\n    \/*\n     Set callbacks for significant events in the call's lifecycle,\n     so that the CXProvider can be updated to reflect the updated state.\n     *\/\n    call.hasStartedConnectingDidChange = { [weak self] in\n        self?.provider.reportOutgoingCall(with: call.uuid, startedConnectingAt: call.connectingDate)\n    }\n    call.hasConnectedDidChange = {[weak self] in\n        self?.provider.reportOutgoingCall(with: call.uuid, connectedAt: call.connectDate)\n    }\n\n    \/\/ Trigger the call to be started via the underlying network service.\n    call.startSpeakerboxCall { success in\n        if success {\n            \/\/ Signal to the system that the action was successfully performed.\n            action.fulfill()\n\n            \/\/ Add the new outgoing call to the app's list of calls.\n            self.callManager.addCall(call)\n        } else {\n            \/\/ Signal to the system that the action was unable to be performed.\n            action.fail()\n        }\n    }\n}",
      "language" : "swift"
    },
    {
      "code" : "if let uuidString = payload.dictionaryPayload[\"UUID\"] as? String,\n    let identifier = payload.dictionaryPayload[\"identifier\"] as? String,\n    let uuid = UUID(uuidString: uuidString)\n{\n    let update = CXCallUpdate()    \n    update.callerIdentifier = identifier\n    \n    provider.reportNewIncomingCall(with: uuid, update: update) { error in\n        \/\/ Add your implementation to report the call.\n        \/\/ ...\n    }\n}",
      "language" : "swift"
    },
    {
      "code" : "func provider(_ provider: CXProvider, perform action: CXAnswerCallAction) {\n    \/\/ Configure the audio session.\n    \/\/ ...\n    action.fulfill()\n}",
      "language" : "swift"
    }
  ],
  "contentHash" : "ae0afe4ee7bb93e4cbd80148812326b143b15ce5608cec2049e1225816120366",
  "crawledAt" : "2025-12-06T05:46:48Z",
  "id" : "9E93F385-63CD-49E9-9109-6F4DE177CFE9",
  "kind" : "article",
  "language" : "swift",
  "module" : "CallKit",
  "overview" : "## Overview\n\nYou can handle outgoing calls in your app by providing information about the recipient and initiating the call. To receive incoming calls, you can configure your app to respond to an external VoIP notification.\n\n### Make outgoing calls\n\nInitiate an outgoing call with a VoIP app in any of the following ways:\n\nFor more information about registering and handling URLs, see [doc:\/\/com.apple.documentation\/documentation\/Xcode\/defining-a-custom-url-scheme-for-your-app]. For more information about initiating a call using Siri, see the [doc:\/\/com.apple.documentation\/documentation\/Intents\/INStartCallIntentHandling] protocol.\n\nTo make an outgoing call, request a [doc:\/\/com.apple.callkit\/documentation\/CallKit\/CXStartCallAction] object. The action consists of a UUID to uniquely identify the call and a [doc:\/\/com.apple.callkit\/documentation\/CallKit\/CXHandle] object to specify the recipient, as shown in the following example from the [doc:\/\/com.apple.callkit\/documentation\/CallKit\/voip-calling-with-callkit] sample code project:\n\nThe `CXHandle` object specifies metadata for the outgoing call. In the example above, it uses an email address. The system on the receiving device uses this metadata to display caller information in the CallKit interface by looking for a matching contact in the recipient’s Contacts app. If the system finds a match, the CallKit interface uses the matching contact data to display the name and a photo as a poster or contact icon. If the recipient’s system can’t find a matching contact in the Contacts app and you provide a Call Directory app extension, it uses the extension to identify the caller and display rich contact information in the CallKit interface. For more information about creating a Call Directory app extension, see [doc:\/\/com.apple.callkit\/documentation\/CallKit\/identifying-and-blocking-calls].\n\nAfter you request to start a VoIP call using a [doc:\/\/com.apple.callkit\/documentation\/CallKit\/CXTransaction], you need to wait for confirmation from the system to actually start the call. After you requested a call as shown in the example above, the system calls your provider delegate’s [doc:\/\/com.apple.callkit\/documentation\/CallKit\/CXProviderDelegate\/provider(_:perform:)-2lem5] method to let you know that it accepted the [doc:\/\/com.apple.callkit\/documentation\/CallKit\/CXTransaction] you created and that you can start your VoIP session. In your implementation of the [doc:\/\/com.apple.callkit\/documentation\/CallKit\/CXProviderDelegate\/provider(_:perform:)-2lem5] callback method, configure an [doc:\/\/com.apple.documentation\/documentation\/AVFAudio\/AVAudioSession] and call the [doc:\/\/com.apple.callkit\/documentation\/CallKit\/CXAction\/fulfill()] method on the action object when it finishes, as shown in the following code snippet from the [doc:\/\/com.apple.callkit\/documentation\/CallKit\/voip-calling-with-callkit] sample code project:\n\n### Receive incoming calls\n\nTo configure your app to receive incoming calls, first create a [doc:\/\/com.apple.callkit\/documentation\/CallKit\/CXProvider] object and store it for global access. An app reports an incoming call to the provider in response to an external notification, such as a VoIP push notification from [doc:\/\/com.apple.documentation\/documentation\/PushKit], with the [doc:\/\/com.apple.documentation\/documentation\/PushKit\/PKPushRegistryDelegate\/pushRegistry(_:didReceiveIncomingPushWith:for:completion:)] and [doc:\/\/com.apple.documentation\/documentation\/PushKit\/PKPushRegistryDelegate\/pushRegistry(_:didReceiveIncomingPushWith:for:completion:)] callbacks.\n\nUsing the information from the external notification in the callback, the app creates a UUID and a [doc:\/\/com.apple.callkit\/documentation\/CallKit\/CXCallUpdate] object to uniquely identify the call and the caller. Then it passes them both to the provider using the [doc:\/\/com.apple.callkit\/documentation\/CallKit\/CXProvider\/reportNewIncomingCall(with:update:completion:)] method to report the incoming call.\n\nAfter the call connects, the system calls the [doc:\/\/com.apple.callkit\/documentation\/CallKit\/CXProviderDelegate\/provider(_:perform:)-2lem5] method of the provider delegate. In your implementation, the delegate is responsible for configuring an [doc:\/\/com.apple.documentation\/documentation\/AVFAudio\/AVAudioSession] to initiate the audio for a call and calling [doc:\/\/com.apple.callkit\/documentation\/CallKit\/CXAction\/fulfill()] on the action when it finishes.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/callkit\/making-and-receiving-voip-calls\ncrawled: 2025-12-06T05:46:48Z\n---\n\n# Making and receiving VoIP calls\n\n**Article**\n\nInitiate outgoing calls with VoIP and configure your app to receive incoming calls.\n\n## Overview\n\nYou can handle outgoing calls in your app by providing information about the recipient and initiating the call. To receive incoming calls, you can configure your app to respond to an external VoIP notification.\n\n### Make outgoing calls\n\nInitiate an outgoing call with a VoIP app in any of the following ways:\n\n- Perform an interaction within the app.\n- Open a link with a supported custom URL scheme.\n- Begin a VoIP call using Siri.\n\nFor more information about registering and handling URLs, see [doc:\/\/com.apple.documentation\/documentation\/Xcode\/defining-a-custom-url-scheme-for-your-app]. For more information about initiating a call using Siri, see the [doc:\/\/com.apple.documentation\/documentation\/Intents\/INStartCallIntentHandling] protocol.\n\nTo make an outgoing call, request a [doc:\/\/com.apple.callkit\/documentation\/CallKit\/CXStartCallAction] object. The action consists of a UUID to uniquely identify the call and a [doc:\/\/com.apple.callkit\/documentation\/CallKit\/CXHandle] object to specify the recipient, as shown in the following example from the [doc:\/\/com.apple.callkit\/documentation\/CallKit\/voip-calling-with-callkit] sample code project:\n\n```swift\nfunc startCall(handle: String, video: Bool = false) {\n    let handle = CXHandle(type: .phoneNumber, value: handle)\n    let startCallAction = CXStartCallAction(call: UUID(), handle: handle)\n\n    startCallAction.isVideo = video\n\n    let transaction = CXTransaction()\n    transaction.addAction(startCallAction)\n\n    requestTransaction(transaction)\n}\n\nprivate func requestTransaction(_ transaction: CXTransaction) {\n    callController.request(transaction) { error in\n        if let error = error {\n            print(\"Error requesting transaction:\", error.localizedDescription)\n        } else {\n            print(\"Requested transaction successfully\")\n        }\n    }\n}\n```\n\nThe `CXHandle` object specifies metadata for the outgoing call. In the example above, it uses an email address. The system on the receiving device uses this metadata to display caller information in the CallKit interface by looking for a matching contact in the recipient’s Contacts app. If the system finds a match, the CallKit interface uses the matching contact data to display the name and a photo as a poster or contact icon. If the recipient’s system can’t find a matching contact in the Contacts app and you provide a Call Directory app extension, it uses the extension to identify the caller and display rich contact information in the CallKit interface. For more information about creating a Call Directory app extension, see [doc:\/\/com.apple.callkit\/documentation\/CallKit\/identifying-and-blocking-calls].\n\nAfter you request to start a VoIP call using a [doc:\/\/com.apple.callkit\/documentation\/CallKit\/CXTransaction], you need to wait for confirmation from the system to actually start the call. After you requested a call as shown in the example above, the system calls your provider delegate’s [doc:\/\/com.apple.callkit\/documentation\/CallKit\/CXProviderDelegate\/provider(_:perform:)-2lem5] method to let you know that it accepted the [doc:\/\/com.apple.callkit\/documentation\/CallKit\/CXTransaction] you created and that you can start your VoIP session. In your implementation of the [doc:\/\/com.apple.callkit\/documentation\/CallKit\/CXProviderDelegate\/provider(_:perform:)-2lem5] callback method, configure an [doc:\/\/com.apple.documentation\/documentation\/AVFAudio\/AVAudioSession] and call the [doc:\/\/com.apple.callkit\/documentation\/CallKit\/CXAction\/fulfill()] method on the action object when it finishes, as shown in the following code snippet from the [doc:\/\/com.apple.callkit\/documentation\/CallKit\/voip-calling-with-callkit] sample code project:\n\n```swift\nfunc provider(_ provider: CXProvider, perform action: CXStartCallAction) {\n    \/\/ Create and configure an instance of SpeakerboxCall to represent the new outgoing call.\n    let call = SpeakerboxCall(uuid: action.callUUID, isOutgoing: true)\n    call.handle = action.handle.value\n\n    \/*\n     Configure the audio session but do not start call audio here.\n     Call audio should not be started until the audio session is activated by the system,\n     after having its priority elevated.\n     *\/\n    configureAudioSession()\n\n    \/*\n     Set callbacks for significant events in the call's lifecycle,\n     so that the CXProvider can be updated to reflect the updated state.\n     *\/\n    call.hasStartedConnectingDidChange = { [weak self] in\n        self?.provider.reportOutgoingCall(with: call.uuid, startedConnectingAt: call.connectingDate)\n    }\n    call.hasConnectedDidChange = {[weak self] in\n        self?.provider.reportOutgoingCall(with: call.uuid, connectedAt: call.connectDate)\n    }\n\n    \/\/ Trigger the call to be started via the underlying network service.\n    call.startSpeakerboxCall { success in\n        if success {\n            \/\/ Signal to the system that the action was successfully performed.\n            action.fulfill()\n\n            \/\/ Add the new outgoing call to the app's list of calls.\n            self.callManager.addCall(call)\n        } else {\n            \/\/ Signal to the system that the action was unable to be performed.\n            action.fail()\n        }\n    }\n}\n```\n\n### Receive incoming calls\n\nTo configure your app to receive incoming calls, first create a [doc:\/\/com.apple.callkit\/documentation\/CallKit\/CXProvider] object and store it for global access. An app reports an incoming call to the provider in response to an external notification, such as a VoIP push notification from [doc:\/\/com.apple.documentation\/documentation\/PushKit], with the [doc:\/\/com.apple.documentation\/documentation\/PushKit\/PKPushRegistryDelegate\/pushRegistry(_:didReceiveIncomingPushWith:for:completion:)] and [doc:\/\/com.apple.documentation\/documentation\/PushKit\/PKPushRegistryDelegate\/pushRegistry(_:didReceiveIncomingPushWith:for:completion:)] callbacks.\n\n\n\nUsing the information from the external notification in the callback, the app creates a UUID and a [doc:\/\/com.apple.callkit\/documentation\/CallKit\/CXCallUpdate] object to uniquely identify the call and the caller. Then it passes them both to the provider using the [doc:\/\/com.apple.callkit\/documentation\/CallKit\/CXProvider\/reportNewIncomingCall(with:update:completion:)] method to report the incoming call.\n\n```swift\nif let uuidString = payload.dictionaryPayload[\"UUID\"] as? String,\n    let identifier = payload.dictionaryPayload[\"identifier\"] as? String,\n    let uuid = UUID(uuidString: uuidString)\n{\n    let update = CXCallUpdate()    \n    update.callerIdentifier = identifier\n    \n    provider.reportNewIncomingCall(with: uuid, update: update) { error in\n        \/\/ Add your implementation to report the call.\n        \/\/ ...\n    }\n}\n```\n\nAfter the call connects, the system calls the [doc:\/\/com.apple.callkit\/documentation\/CallKit\/CXProviderDelegate\/provider(_:perform:)-2lem5] method of the provider delegate. In your implementation, the delegate is responsible for configuring an [doc:\/\/com.apple.documentation\/documentation\/AVFAudio\/AVAudioSession] to initiate the audio for a call and calling [doc:\/\/com.apple.callkit\/documentation\/CallKit\/CXAction\/fulfill()] on the action when it finishes.\n\n```swift\nfunc provider(_ provider: CXProvider, perform action: CXAnswerCallAction) {\n    \/\/ Configure the audio session.\n    \/\/ ...\n    action.fulfill()\n}\n```\n\n## Essentials\n\n- **CXProvider**: An object that represents a telephony provider.\n- **CXProviderDelegate**: A collection of methods that a telephony provider object calls.\n- **CXProviderConfiguration**: An encapsulation of the configuration of a provider object.\n- **VoIP calling with CallKit**: Use the CallKit framework to integrate native VoIP calling.\n- **Preparing your app to be the default calling app**: Configure your CallKit or LiveCommunicationKit app so people can set it as the default calling app on their device.\n- **CallKit updates**: Learn about important changes to CallKit.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "An object that represents a telephony provider.",
          "name" : "CXProvider",
          "url" : "https:\/\/developer.apple.com\/documentation\/CallKit\/CXProvider"
        },
        {
          "description" : "A collection of methods that a telephony provider object calls.",
          "name" : "CXProviderDelegate",
          "url" : "https:\/\/developer.apple.com\/documentation\/CallKit\/CXProviderDelegate"
        },
        {
          "description" : "An encapsulation of the configuration of a provider object.",
          "name" : "CXProviderConfiguration",
          "url" : "https:\/\/developer.apple.com\/documentation\/CallKit\/CXProviderConfiguration"
        },
        {
          "description" : "Use the CallKit framework to integrate native VoIP calling.",
          "name" : "VoIP calling with CallKit",
          "url" : "https:\/\/developer.apple.com\/documentation\/CallKit\/voip-calling-with-callkit"
        },
        {
          "description" : "Configure your CallKit or LiveCommunicationKit app so people can set it as the default calling app on their device.",
          "name" : "Preparing your app to be the default calling app",
          "url" : "https:\/\/developer.apple.com\/documentation\/CallKit\/Preparing-your-app-to-be-the-default-calling-app"
        },
        {
          "description" : "Learn about important changes to CallKit.",
          "name" : "CallKit updates",
          "url" : "https:\/\/developer.apple.com\/documentation\/Updates\/CallKit"
        }
      ],
      "title" : "Essentials"
    }
  ],
  "source" : "appleJSON",
  "title" : "Making and receiving VoIP calls",
  "url" : "https:\/\/developer.apple.com\/documentation\/callkit\/making-and-receiving-voip-calls"
}