{
  "abstract" : "Support payments using Apple Pay on your website.",
  "codeExamples" : [
    {
      "code" : "let applePayPaymentMethodData = {\n    supportedMethods: \"https:\/\/apple.com\/apple-pay\",\n    data: {\n        version: 12,\n        \/\/ Add additional ApplePayRequest attributes here.\n    },\n};",
      "language" : "javascript"
    },
    {
      "code" : "let applePayPaymentDetailsModifier = {\n    supportedMethods: \"https:\/\/apple.com\/apple-pay\",\n    data: {\n        paymentMethodType: \"credit\",\n        \/\/ Add additional ApplePayModifier attributes here.\n    },\n};",
      "language" : "javascript"
    },
    {
      "code" : "paymentRequest.addEventListener(\"paymentmethodchange\", function(event) {\n    if (event.methodName === \"https:\/\/apple.com\/apple-pay\") {\n        if (event.methodDetails.couponCode) {\n            let applePayCouponCodeDetails = event.methodDetails;\n            \/\/ Handle coupon code updates here.\n            return;\n        }\n\n        let applePayPaymentMethodDetails = event.methodDetails;\n        if (applePayPaymentMethodDetails.type === \"credit\") {\n            \/\/ Handle credit payment method type changes here.\n        } else {\n            \/\/ Handle other payment method type changes here.\n        }\n    }\n});",
      "language" : "javascript"
    },
    {
      "code" : "paymentRequest.addEventListener(\"shippingaddresschange\", function(event) {\n    if (event.methodName === \"https:\/\/apple.com\/apple-pay\") {\n        if (event.methodDetails.couponCode) {\n            let applePayCouponCodeDetails = event.methodDetails;\n            if (!isValidCouponCode(applePayCouponCodeDetails.couponCode) {\n                event.updateWith({\n                    paymentMethodErrors: [\n                        new ApplePayError(\"couponCodeInvalid\", undefined, \"Coupon code is invalid\"),\n                    ],\n                });\n                return;\n            }\n\n            \/\/ Handle valid coupon code updates here.\n            return;\n        }\n\n        let applePayPaymentMethodDetails = event.methodDetails;\n        if (applePayPaymentMethodDetails.type === \"credit\") {\n            \/\/ Handle credit payment method type changes here.\n        } else {\n            \/\/ Handle other payment method type changes here.\n        }\n    }\n});\n\npaymentRequest.show().then(function(paymentResponse) {\n    if (paymentResponse.methodName === \"https:\/\/apple.com\/apple-pay\") {\n        if (!hasValidShippingZIPCode(paymentResponse)) {\n            paymentResponse.retry({\n                paymentMethod: [\n                    new ApplePayError(\"shippingContactInvalid\", \"postalCode\", \"ZIP Code is invalid\"),\n                ],\n            });\n            return;\n        }\n\n        \/\/ Handle authorization with valid details here.\n    }\n});\n",
      "language" : "javascript"
    },
    {
      "code" : "function hasValidShippingZIPCode(paymentResponse) {\n    if (paymentResponse.methodName === \"https:\/\/apple.com\/apple-pay\") {\n        let applePayPayment = paymentResponse.details;\n        let shippingZIPCode = applePayPayment.shippingContact.postalCode;\n        \/\/ Validate shipping ZIP code here.\n    }\n}",
      "language" : "javascript"
    }
  ],
  "contentHash" : "2c72daa51a1bb3edc775e1d9fa28348761d5195d240ef32181b224db5e2b87a8",
  "crawledAt" : "2025-12-02T14:19:06Z",
  "id" : "5B094299-9770-4374-B9F2-933DDA6DD2C4",
  "kind" : "article",
  "module" : "Apple Pay on the Web",
  "overview" : "## Overview\n\nThroughout the [https:\/\/www.w3.org\/TR\/payment-request\/], properties and attributes with the type `object` contain specific data related to payment methods. When using Apple Pay, keep in mind that these properties and attributes with the type `object` have a concrete type.\n\nTo indicate that data is specific to Apple Pay, set the [https:\/\/www.w3.org\/TR\/payment-request\/#dom-paymentmethoddata-supportedmethods] property of the W3C [https:\/\/www.w3.org\/TR\/payment-request\/#paymentmethoddata-dictionary] dictionary and W3C [https:\/\/www.w3.org\/TR\/payment-request\/#paymentdetailsmodifier-dictionary] dictionary to the Apple Pay URL `https:\/\/apple.com\/apple-pay`.\n\nSet up the payment request by setting the [https:\/\/www.w3.org\/TR\/payment-request\/#dom-paymentmethoddata-data] property of the W3C [https:\/\/www.w3.org\/TR\/payment-request\/#paymentmethoddata-dictionary] dictionary to an [doc:\/\/com.apple.applepayontheweb\/documentation\/ApplePayontheWeb\/ApplePayRequest] dictionary. The following is an example of an [doc:\/\/com.apple.applepayontheweb\/documentation\/ApplePayontheWeb\/ApplePayRequest] dictionary that requires Apple Pay Version 12:\n\nCustomize the payment request by setting the [https:\/\/www.w3.org\/TR\/payment-request\/#dom-paymentdetailsmodifier-data] property of the W3C [https:\/\/www.w3.org\/TR\/payment-request\/#paymentdetailsmodifier-dictionary] dictionary to an [doc:\/\/com.apple.applepayontheweb\/documentation\/ApplePayontheWeb\/ApplePayModifier] dictionary. The following is an example of an [doc:\/\/com.apple.applepayontheweb\/documentation\/ApplePayontheWeb\/ApplePayModifier] dictionary that only applies to credit cards:\n\nHandle changes made by the user to features specific to Apple Pay by looking at the [doc:\/\/com.apple.applepayontheweb\/documentation\/ApplePayontheWeb\/PaymentMethodChangeEvent\/methodDetails] attribute of the W3C [doc:\/\/com.apple.applepayontheweb\/documentation\/ApplePayontheWeb\/PaymentMethodChangeEvent]:\n\nThe following is an example of how to differentiate these different scenarios when handling a W3C [doc:\/\/com.apple.applepayontheweb\/documentation\/ApplePayontheWeb\/PaymentMethodChangeEvent]:\n\nExplain issues by creating custom error messages using an array of [doc:\/\/com.apple.applepayontheweb\/documentation\/ApplePayontheWeb\/ApplePayError] objects:\n\nThe following is an example of how to show custom error messages if the user inputs an invalid coupon code or shipping postal code:\n\nGet the payment information after the user authorizes the payment request by looking at the [https:\/\/www.w3.org\/TR\/payment-request\/#dom-paymentresponse-details] attribute of the W3C [https:\/\/www.w3.org\/TR\/payment-request\/#paymentresponse-interface], which is an [doc:\/\/com.apple.applepayontheweb\/documentation\/ApplePayontheWeb\/ApplePayPayment] dictionary. The following example accesses the [doc:\/\/com.apple.applepayontheweb\/documentation\/ApplePayontheWeb\/ApplePayPaymentContact\/postalCode] after authorization:",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/applepayontheweb\/setting-up-the-payment-request-api-to-accept-apple-pay\ncrawled: 2025-12-02T14:19:06Z\n---\n\n# Setting up the payment request API to accept Apple Pay\n\n**Article**\n\nSupport payments using Apple Pay on your website.\n\n## Overview\n\nThroughout the [https:\/\/www.w3.org\/TR\/payment-request\/], properties and attributes with the type `object` contain specific data related to payment methods. When using Apple Pay, keep in mind that these properties and attributes with the type `object` have a concrete type.\n\nTo indicate that data is specific to Apple Pay, set the [https:\/\/www.w3.org\/TR\/payment-request\/#dom-paymentmethoddata-supportedmethods] property of the W3C [https:\/\/www.w3.org\/TR\/payment-request\/#paymentmethoddata-dictionary] dictionary and W3C [https:\/\/www.w3.org\/TR\/payment-request\/#paymentdetailsmodifier-dictionary] dictionary to the Apple Pay URL `https:\/\/apple.com\/apple-pay`.\n\nSet up the payment request by setting the [https:\/\/www.w3.org\/TR\/payment-request\/#dom-paymentmethoddata-data] property of the W3C [https:\/\/www.w3.org\/TR\/payment-request\/#paymentmethoddata-dictionary] dictionary to an [doc:\/\/com.apple.applepayontheweb\/documentation\/ApplePayontheWeb\/ApplePayRequest] dictionary. The following is an example of an [doc:\/\/com.apple.applepayontheweb\/documentation\/ApplePayontheWeb\/ApplePayRequest] dictionary that requires Apple Pay Version 12:\n\n```javascript\nlet applePayPaymentMethodData = {\n    supportedMethods: \"https:\/\/apple.com\/apple-pay\",\n    data: {\n        version: 12,\n        \/\/ Add additional ApplePayRequest attributes here.\n    },\n};\n```\n\nCustomize the payment request by setting the [https:\/\/www.w3.org\/TR\/payment-request\/#dom-paymentdetailsmodifier-data] property of the W3C [https:\/\/www.w3.org\/TR\/payment-request\/#paymentdetailsmodifier-dictionary] dictionary to an [doc:\/\/com.apple.applepayontheweb\/documentation\/ApplePayontheWeb\/ApplePayModifier] dictionary. The following is an example of an [doc:\/\/com.apple.applepayontheweb\/documentation\/ApplePayontheWeb\/ApplePayModifier] dictionary that only applies to credit cards:\n\n```javascript\nlet applePayPaymentDetailsModifier = {\n    supportedMethods: \"https:\/\/apple.com\/apple-pay\",\n    data: {\n        paymentMethodType: \"credit\",\n        \/\/ Add additional ApplePayModifier attributes here.\n    },\n};\n```\n\nHandle changes made by the user to features specific to Apple Pay by looking at the [doc:\/\/com.apple.applepayontheweb\/documentation\/ApplePayontheWeb\/PaymentMethodChangeEvent\/methodDetails] attribute of the W3C [doc:\/\/com.apple.applepayontheweb\/documentation\/ApplePayontheWeb\/PaymentMethodChangeEvent]:\n\n- If the user changes the payment method type, the [doc:\/\/com.apple.applepayontheweb\/documentation\/ApplePayontheWeb\/PaymentMethodChangeEvent\/methodDetails] attribute is an [doc:\/\/com.apple.applepayontheweb\/documentation\/ApplePayontheWeb\/ApplePayPaymentMethod] dictionary.\n- If the user changes the coupon code, the [doc:\/\/com.apple.applepayontheweb\/documentation\/ApplePayontheWeb\/PaymentMethodChangeEvent\/methodDetails] attribute is an [doc:\/\/com.apple.applepayontheweb\/documentation\/ApplePayontheWeb\/ApplePayCouponCodeDetails] dictionary.\n\nThe following is an example of how to differentiate these different scenarios when handling a W3C [doc:\/\/com.apple.applepayontheweb\/documentation\/ApplePayontheWeb\/PaymentMethodChangeEvent]:\n\n```javascript\npaymentRequest.addEventListener(\"paymentmethodchange\", function(event) {\n    if (event.methodName === \"https:\/\/apple.com\/apple-pay\") {\n        if (event.methodDetails.couponCode) {\n            let applePayCouponCodeDetails = event.methodDetails;\n            \/\/ Handle coupon code updates here.\n            return;\n        }\n\n        let applePayPaymentMethodDetails = event.methodDetails;\n        if (applePayPaymentMethodDetails.type === \"credit\") {\n            \/\/ Handle credit payment method type changes here.\n        } else {\n            \/\/ Handle other payment method type changes here.\n        }\n    }\n});\n```\n\nExplain issues by creating custom error messages using an array of [doc:\/\/com.apple.applepayontheweb\/documentation\/ApplePayontheWeb\/ApplePayError] objects:\n\n- If the user makes any problematic changes, set the [https:\/\/www.w3.org\/TR\/payment-request\/#dom-paymentdetailsupdate-paymentmethoderrors] property of the W3C [https:\/\/www.w3.org\/TR\/payment-request\/#paymentdetailsupdate-dictionary] dictionary.\n- If a problem occurs during authorization, set the [https:\/\/www.w3.org\/TR\/payment-request\/#dom-paymentvalidationerrors-paymentmethod] property of the W3C [https:\/\/www.w3.org\/TR\/payment-request\/#dom-paymentvalidationerrors] dictionary.\n\nThe following is an example of how to show custom error messages if the user inputs an invalid coupon code or shipping postal code:\n\n```javascript\npaymentRequest.addEventListener(\"shippingaddresschange\", function(event) {\n    if (event.methodName === \"https:\/\/apple.com\/apple-pay\") {\n        if (event.methodDetails.couponCode) {\n            let applePayCouponCodeDetails = event.methodDetails;\n            if (!isValidCouponCode(applePayCouponCodeDetails.couponCode) {\n                event.updateWith({\n                    paymentMethodErrors: [\n                        new ApplePayError(\"couponCodeInvalid\", undefined, \"Coupon code is invalid\"),\n                    ],\n                });\n                return;\n            }\n\n            \/\/ Handle valid coupon code updates here.\n            return;\n        }\n\n        let applePayPaymentMethodDetails = event.methodDetails;\n        if (applePayPaymentMethodDetails.type === \"credit\") {\n            \/\/ Handle credit payment method type changes here.\n        } else {\n            \/\/ Handle other payment method type changes here.\n        }\n    }\n});\n\npaymentRequest.show().then(function(paymentResponse) {\n    if (paymentResponse.methodName === \"https:\/\/apple.com\/apple-pay\") {\n        if (!hasValidShippingZIPCode(paymentResponse)) {\n            paymentResponse.retry({\n                paymentMethod: [\n                    new ApplePayError(\"shippingContactInvalid\", \"postalCode\", \"ZIP Code is invalid\"),\n                ],\n            });\n            return;\n        }\n\n        \/\/ Handle authorization with valid details here.\n    }\n});\n\n```\n\nGet the payment information after the user authorizes the payment request by looking at the [https:\/\/www.w3.org\/TR\/payment-request\/#dom-paymentresponse-details] attribute of the W3C [https:\/\/www.w3.org\/TR\/payment-request\/#paymentresponse-interface], which is an [doc:\/\/com.apple.applepayontheweb\/documentation\/ApplePayontheWeb\/ApplePayPayment] dictionary. The following example accesses the [doc:\/\/com.apple.applepayontheweb\/documentation\/ApplePayontheWeb\/ApplePayPaymentContact\/postalCode] after authorization:\n\n```javascript\nfunction hasValidShippingZIPCode(paymentResponse) {\n    if (paymentResponse.methodName === \"https:\/\/apple.com\/apple-pay\") {\n        let applePayPayment = paymentResponse.details;\n        let shippingZIPCode = applePayPayment.shippingContact.postalCode;\n        \/\/ Validate shipping ZIP code here.\n    }\n}\n```\n\n## Payment request\n\n- **ApplePayRequestBase**: A dictionary that defines basic payment and contact information that the Apple Pay payment request object uses for the W3C Payment Request API.\n- **ApplePayRequest**: A dictionary that defines the Apple Pay payment request object to use for the W3C Payment Request API.\n- **ApplePayModifier**: A dictionary that defines the Apple Pay modifiers for a payment type in the W3C Payment Request API.\n- **ApplePayPaymentCompleteDetails**\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "A dictionary that defines basic payment and contact information that the Apple Pay payment request object uses for the W3C Payment Request API.",
          "name" : "ApplePayRequestBase",
          "url" : "https:\/\/developer.apple.com\/documentation\/ApplePayontheWeb\/ApplePayRequestBase"
        },
        {
          "description" : "A dictionary that defines the Apple Pay payment request object to use for the W3C Payment Request API.",
          "name" : "ApplePayRequest",
          "url" : "https:\/\/developer.apple.com\/documentation\/ApplePayontheWeb\/ApplePayRequest"
        },
        {
          "description" : "A dictionary that defines the Apple Pay modifiers for a payment type in the W3C Payment Request API.",
          "name" : "ApplePayModifier",
          "url" : "https:\/\/developer.apple.com\/documentation\/ApplePayontheWeb\/ApplePayModifier"
        },
        {
          "description" : "",
          "name" : "ApplePayPaymentCompleteDetails",
          "url" : "https:\/\/developer.apple.com\/documentation\/ApplePayontheWeb\/ApplePayPaymentCompleteDetails"
        }
      ],
      "title" : "Payment request"
    }
  ],
  "source" : "appleJSON",
  "title" : "Setting up the payment request API to accept Apple Pay",
  "url" : "https:\/\/developer.apple.com\/documentation\/applepayontheweb\/setting-up-the-payment-request-api-to-accept-apple-pay"
}