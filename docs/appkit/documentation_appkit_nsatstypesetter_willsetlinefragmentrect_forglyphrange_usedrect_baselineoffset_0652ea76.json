{
  "abstract" : "Notifies subclasses that the typesetter is about to set a new line fragment.",
  "codeExamples" : [

  ],
  "contentHash" : "5aebfe0b3580a02c26d7c28de0f61350c26fad3fd8c31ba9114851fa524eeb9b",
  "crawledAt" : "2025-12-04T03:59:36Z",
  "declaration" : {
    "code" : "func willSetLineFragmentRect(_ lineRect: UnsafeMutablePointer<NSRect>, forGlyphRange glyphRange: NSRange, usedRect: UnsafeMutablePointer<NSRect>, baselineOffset: UnsafeMutablePointer<CGFloat>)",
    "language" : "swift"
  },
  "id" : "CEE9C0E5-EEDD-4C96-8C84-57F7764CC634",
  "kind" : "method",
  "language" : "swift",
  "module" : "AppKit",
  "overview" : "## Discussion\n\nThe typesetter calls this method before calling [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSLayoutManager\/setLineFragmentRect(_:forGlyphRange:usedRect:)], which stores the actual line fragment rectangle location in the layout manager.\n\nThe `lineRect` argument is the rectangle in which the glyphs in `glyphRange` are laid out. The `usedRect` argument indicates the portion of `lineRect`, in the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextContainer] object’s coordinate system, that actually contains glyphs or other marks that are drawn (including the text container’s line fragment padding). The `usedRect` must be equal to or contained within `lineRect`. The `baselineOffset` argument is the vertical distance in pixels from the line fragment origin to the baseline on which the glyphs align.\n\nA subclass can override this method to customize the text layout process. For example, it could change the shape of the line fragment rectangle. The subclass is responsible for ensuring that the modified rectangle remains valid (for example, that it lies within the text container).",
  "platforms" : [
    "macOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/AppKit\/NSATSTypesetter\/willSetLineFragmentRect(_:forGlyphRange:usedRect:baselineOffset:)\ncrawled: 2025-12-04T03:59:36Z\n---\n\n# willSetLineFragmentRect(_:forGlyphRange:usedRect:baselineOffset:)\n\n**Instance Method**\n\nNotifies subclasses that the typesetter is about to set a new line fragment.\n\n## Declaration\n\n```swift\nfunc willSetLineFragmentRect(_ lineRect: UnsafeMutablePointer<NSRect>, forGlyphRange glyphRange: NSRange, usedRect: UnsafeMutablePointer<NSRect>, baselineOffset: UnsafeMutablePointer<CGFloat>)\n```\n\n## Discussion\n\nThe typesetter calls this method before calling [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSLayoutManager\/setLineFragmentRect(_:forGlyphRange:usedRect:)], which stores the actual line fragment rectangle location in the layout manager.\n\nThe `lineRect` argument is the rectangle in which the glyphs in `glyphRange` are laid out. The `usedRect` argument indicates the portion of `lineRect`, in the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextContainer] object’s coordinate system, that actually contains glyphs or other marks that are drawn (including the text container’s line fragment padding). The `usedRect` must be equal to or contained within `lineRect`. The `baselineOffset` argument is the vertical distance in pixels from the line fragment origin to the baseline on which the glyphs align.\n\nA subclass can override this method to customize the text layout process. For example, it could change the shape of the line fragment rectangle. The subclass is responsible for ensuring that the modified rectangle remains valid (for example, that it lies within the text container).\n\n## Laying Out Glyphs\n\n- **boundingBox(forControlGlyphAt:for:proposedLineFragment:glyphPosition:characterIndex:)**: Returns the bounding rectangle for a control glyph, at the specified glyph position and character index in the text container.\n- **getLineFragmentRect(_:usedRect:forParagraphSeparatorGlyphRange:atProposedOrigin:)**: Calculates the line fragment rectangle and the portion of the rectangle that contains marks.\n- **hyphenCharacter(forGlyphAt:)**: Returns the hyphen character to be inserted after the specified glyph when hyphenation is enabled in the layout manager.\n- **hyphenationFactor(forGlyphAt:)**: Returns the hyphenation factor in effect at the specified glyph index.\n- **shouldBreakLine(byHyphenatingBeforeCharacterAt:)**: Breaks a line by hyphenating before the character at the specified index.\n- **shouldBreakLine(byWordBeforeCharacterAt:)**: Breaks a line by word-wrapping before the character at the specified index.\n- **setHardInvalidation(_:forGlyphRange:)**: Sets a Boolean value that determines whether the layout manager invalidates the specified portion of the glyph cache.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Returns the bounding rectangle for a control glyph, at the specified glyph position and character index in the text container.",
          "name" : "boundingBox(forControlGlyphAt:for:proposedLineFragment:glyphPosition:characterIndex:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSATSTypesetter\/boundingBox(forControlGlyphAt:for:proposedLineFragment:glyphPosition:characterIndex:)"
        },
        {
          "description" : "Calculates the line fragment rectangle and the portion of the rectangle that contains marks.",
          "name" : "getLineFragmentRect(_:usedRect:forParagraphSeparatorGlyphRange:atProposedOrigin:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSATSTypesetter\/getLineFragmentRect(_:usedRect:forParagraphSeparatorGlyphRange:atProposedOrigin:)"
        },
        {
          "description" : "Returns the hyphen character to be inserted after the specified glyph when hyphenation is enabled in the layout manager.",
          "name" : "hyphenCharacter(forGlyphAt:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSATSTypesetter\/hyphenCharacter(forGlyphAt:)"
        },
        {
          "description" : "Returns the hyphenation factor in effect at the specified glyph index.",
          "name" : "hyphenationFactor(forGlyphAt:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSATSTypesetter\/hyphenationFactor(forGlyphAt:)"
        },
        {
          "description" : "Breaks a line by hyphenating before the character at the specified index.",
          "name" : "shouldBreakLine(byHyphenatingBeforeCharacterAt:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSATSTypesetter\/shouldBreakLine(byHyphenatingBeforeCharacterAt:)"
        },
        {
          "description" : "Breaks a line by word-wrapping before the character at the specified index.",
          "name" : "shouldBreakLine(byWordBeforeCharacterAt:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSATSTypesetter\/shouldBreakLine(byWordBeforeCharacterAt:)"
        },
        {
          "description" : "Sets a Boolean value that determines whether the layout manager invalidates the specified portion of the glyph cache.",
          "name" : "setHardInvalidation(_:forGlyphRange:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSATSTypesetter\/setHardInvalidation(_:forGlyphRange:)"
        }
      ],
      "title" : "Laying Out Glyphs"
    }
  ],
  "source" : "appleJSON",
  "title" : "willSetLineFragmentRect(_:forGlyphRange:usedRect:baselineOffset:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSATSTypesetter\/willSetLineFragmentRect(_:forGlyphRange:usedRect:baselineOffset:)"
}