{
  "abstract" : "Returns the index of the glyph at the specified point using the container’s coordinate system.",
  "codeExamples" : [

  ],
  "contentHash" : "24468d1401b81f0a61488b3017df3155f48b41714c871835d32ec9a43d2cfc5d",
  "crawledAt" : "2025-12-04T02:27:37Z",
  "declaration" : {
    "code" : "func glyphIndex(for point: NSPoint, in container: NSTextContainer, fractionOfDistanceThroughGlyph partialFraction: UnsafeMutablePointer<CGFloat>?) -> Int",
    "language" : "swift"
  },
  "id" : "D0F7685F-AF0F-49F0-8F9F-10273F3F1BD8",
  "kind" : "method",
  "language" : "swift",
  "module" : "AppKit",
  "overview" : "## Return Value\n\nThe index of the glyph falling under the given point, expressed in the given container’s coordinate system.\n\n## Discussion\n\nIf no glyph is under `point`, the nearest glyph is returned, where nearest is defined according to the requirements of selection by mouse. Clients who wish to determine whether the the point actually lies within the bounds of the glyph returned should follow this with a call to [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSLayoutManager\/boundingRect(forGlyphRange:in:)] and test whether the point falls in the rectangle returned by that method. If `partialFraction` is non-NULL, it returns by reference the fraction of the distance between the location of the glyph returned and the location of the next glyph.\n\nFor purposes such as dragging out a selection or placing the insertion point, a partial percentage less than or equal to 0.5 indicates that `point` should be considered as falling before the glyph index returned; a partial percentage greater than 0.5 indicates that it should be considered as falling after the glyph index returned. If the nearest glyph doesn’t lie under `point` at all (for example, if `point` is beyond the beginning or end of a line), this ratio is 0 or 1.\n\nIf the glyph stream contains the glyphs “A” and “b”, with the width of “A” being 13 points, and the user clicks at a location 8 points into “A”, `partialFraction` is 8\/13, or 0.615. In this case, the point given should be considered as falling between “A” and “b” for purposes such as dragging out a selection or placing the insertion point.\n\nPerforms glyph generation and layout if needed.\n\nAs part of its implementation, this method calls [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSLayoutManager\/fractionOfDistanceThroughGlyph(for:in:)] and [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSLayoutManager\/glyphIndex(for:in:)]. To change this method’s behavior, override those two methods instead of this one.",
  "platforms" : [
    "macOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/AppKit\/NSLayoutManager\/glyphIndex(for:in:fractionOfDistanceThroughGlyph:)\ncrawled: 2025-12-04T02:27:37Z\n---\n\n# glyphIndex(for:in:fractionOfDistanceThroughGlyph:)\n\n**Instance Method**\n\nReturns the index of the glyph at the specified point using the container’s coordinate system.\n\n## Declaration\n\n```swift\nfunc glyphIndex(for point: NSPoint, in container: NSTextContainer, fractionOfDistanceThroughGlyph partialFraction: UnsafeMutablePointer<CGFloat>?) -> Int\n```\n\n## Parameters\n\n- **point**: The point for which to return the glyph, in coordinates of `container`.\n- **container**: The container in which the returned glyph is laid out.\n- **partialFraction**: If not `NULL`, on output, the fraction of the distance between the location of the glyph returned and the location of the next glyph.\n\n## Return Value\n\nThe index of the glyph falling under the given point, expressed in the given container’s coordinate system.\n\n## Discussion\n\nIf no glyph is under `point`, the nearest glyph is returned, where nearest is defined according to the requirements of selection by mouse. Clients who wish to determine whether the the point actually lies within the bounds of the glyph returned should follow this with a call to [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSLayoutManager\/boundingRect(forGlyphRange:in:)] and test whether the point falls in the rectangle returned by that method. If `partialFraction` is non-NULL, it returns by reference the fraction of the distance between the location of the glyph returned and the location of the next glyph.\n\nFor purposes such as dragging out a selection or placing the insertion point, a partial percentage less than or equal to 0.5 indicates that `point` should be considered as falling before the glyph index returned; a partial percentage greater than 0.5 indicates that it should be considered as falling after the glyph index returned. If the nearest glyph doesn’t lie under `point` at all (for example, if `point` is beyond the beginning or end of a line), this ratio is 0 or 1.\n\nIf the glyph stream contains the glyphs “A” and “b”, with the width of “A” being 13 points, and the user clicks at a location 8 points into “A”, `partialFraction` is 8\/13, or 0.615. In this case, the point given should be considered as falling between “A” and “b” for purposes such as dragging out a selection or placing the insertion point.\n\nPerforms glyph generation and layout if needed.\n\nAs part of its implementation, this method calls [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSLayoutManager\/fractionOfDistanceThroughGlyph(for:in:)] and [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSLayoutManager\/glyphIndex(for:in:)]. To change this method’s behavior, override those two methods instead of this one.\n\n## Performing advanced layout queries\n\n- **boundingRect(forGlyphRange:in:)**: Returns the bounding rectangle for the specified glyphs in a container.\n- **characterIndex(for:in:fractionOfDistanceBetweenInsertionPoints:)**: Returns the index of the character that lies beneath the specified point using the specified container’s coordinate system.\n- **characterRange(forGlyphRange:actualGlyphRange:)**: Returns the range of characters that correspond to the glyphs in the specified glyph range.\n- **enumerateEnclosingRects(forGlyphRange:withinSelectedGlyphRange:in:using:)**: Enumerates enclosing rectangles for the specified glyph range in a text container.\n- **enumerateLineFragments(forGlyphRange:using:)**: Enumerates line fragments intersecting with the specified glyph range.\n- **fractionOfDistanceThroughGlyph(for:in:)**: Returns the fraction of the distance between the glyph at the specified point and the next glyph.\n- **getLineFragmentInsertionPoints(forCharacterAt:alternatePositions:inDisplayOrder:positions:characterIndexes:)**: Returns insertion points in bulk for a specified line fragment.\n- **glyphIndex(for:in:)**: Returns the index of the glyph at the specified location in a text container.\n- **glyphRange(forBoundingRect:in:)**: Returns the smallest contiguous range for glyphs lying wholly or partially within the specified rectangle of the text container.\n- **glyphRange(forBoundingRectWithoutAdditionalLayout:in:)**: Returns the smallest contiguous range for glyphs lying wholly or partially within the specified rectangle of the text container.\n- **glyphRange(for:)**: Returns the range of glyphs lying within the specified text container.\n- **glyphRange(forCharacterRange:actualCharacterRange:)**: Returns the range of glyphs that the specified range of characters generates.\n- **range(ofNominallySpacedGlyphsContaining:)**: Returns the range of displayable glyphs that surround the glyph at the specified index.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Returns the bounding rectangle for the specified glyphs in a container.",
          "name" : "boundingRect(forGlyphRange:in:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSLayoutManager\/boundingRect(forGlyphRange:in:)"
        },
        {
          "description" : "Returns the index of the character that lies beneath the specified point using the specified container’s coordinate system.",
          "name" : "characterIndex(for:in:fractionOfDistanceBetweenInsertionPoints:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSLayoutManager\/characterIndex(for:in:fractionOfDistanceBetweenInsertionPoints:)"
        },
        {
          "description" : "Returns the range of characters that correspond to the glyphs in the specified glyph range.",
          "name" : "characterRange(forGlyphRange:actualGlyphRange:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSLayoutManager\/characterRange(forGlyphRange:actualGlyphRange:)"
        },
        {
          "description" : "Enumerates enclosing rectangles for the specified glyph range in a text container.",
          "name" : "enumerateEnclosingRects(forGlyphRange:withinSelectedGlyphRange:in:using:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSLayoutManager\/enumerateEnclosingRects(forGlyphRange:withinSelectedGlyphRange:in:using:)"
        },
        {
          "description" : "Enumerates line fragments intersecting with the specified glyph range.",
          "name" : "enumerateLineFragments(forGlyphRange:using:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSLayoutManager\/enumerateLineFragments(forGlyphRange:using:)"
        },
        {
          "description" : "Returns the fraction of the distance between the glyph at the specified point and the next glyph.",
          "name" : "fractionOfDistanceThroughGlyph(for:in:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSLayoutManager\/fractionOfDistanceThroughGlyph(for:in:)"
        },
        {
          "description" : "Returns insertion points in bulk for a specified line fragment.",
          "name" : "getLineFragmentInsertionPoints(forCharacterAt:alternatePositions:inDisplayOrder:positions:characterIndexes:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSLayoutManager\/getLineFragmentInsertionPoints(forCharacterAt:alternatePositions:inDisplayOrder:positions:characterIndexes:)"
        },
        {
          "description" : "Returns the index of the glyph at the specified location in a text container.",
          "name" : "glyphIndex(for:in:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSLayoutManager\/glyphIndex(for:in:)"
        },
        {
          "description" : "Returns the smallest contiguous range for glyphs lying wholly or partially within the specified rectangle of the text container.",
          "name" : "glyphRange(forBoundingRect:in:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSLayoutManager\/glyphRange(forBoundingRect:in:)"
        },
        {
          "description" : "Returns the smallest contiguous range for glyphs lying wholly or partially within the specified rectangle of the text container.",
          "name" : "glyphRange(forBoundingRectWithoutAdditionalLayout:in:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSLayoutManager\/glyphRange(forBoundingRectWithoutAdditionalLayout:in:)"
        },
        {
          "description" : "Returns the range of glyphs lying within the specified text container.",
          "name" : "glyphRange(for:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSLayoutManager\/glyphRange(for:)"
        },
        {
          "description" : "Returns the range of glyphs that the specified range of characters generates.",
          "name" : "glyphRange(forCharacterRange:actualCharacterRange:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSLayoutManager\/glyphRange(forCharacterRange:actualCharacterRange:)"
        },
        {
          "description" : "Returns the range of displayable glyphs that surround the glyph at the specified index.",
          "name" : "range(ofNominallySpacedGlyphsContaining:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSLayoutManager\/range(ofNominallySpacedGlyphsContaining:)"
        }
      ],
      "title" : "Performing advanced layout queries"
    }
  ],
  "source" : "appleJSON",
  "title" : "glyphIndex(for:in:fractionOfDistanceThroughGlyph:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSLayoutManager\/glyphIndex(for:in:fractionOfDistanceThroughGlyph:)"
}