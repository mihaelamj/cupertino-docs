{
  "abstract" : "Incorporate the system text cursor into your custom text UI in AppKit.",
  "codeExamples" : [
    {
      "code" : "\/\/ Set up the text cursor.\nlet textCursor = NSTextInsertionIndicator(frame: .zero)\ndocumentView.addSubview(textCursor)",
      "language" : "swift"
    },
    {
      "code" : "\/\/ Show the text cursor when the text view becomes active.\nfunc didBecomeActive() {\n    textCursor.displayMode = .automatic\n}",
      "language" : "swift"
    },
    {
      "code" : "\/\/ Specify custom view hierarchy placement for the animated effects view.\ntextCursor.effectsViewInserter = { view in\n    documentView.addSubview(view, positioned: .below, relativeTo: textCursor)\n}",
      "language" : "swift"
    },
    {
      "code" : "\/\/ Hide the text cursor when the text view becomes inactive.\nfunc didBecomeInactive() {\n    textCursor.displayMode = .hidden\n}",
      "language" : "swift"
    }
  ],
  "contentHash" : "ce189576e5840385b6c971a70610b7df56ca57e4c52b6a21d991e534e1338a0a",
  "crawledAt" : "2025-12-05T22:06:04Z",
  "id" : "1E59963B-EF5B-4515-BA92-D2A2D2DBCAA5",
  "kind" : "article",
  "language" : "swift",
  "module" : "AppKit",
  "overview" : "## Overview\n\nPeople can enter text into your app in a variety of ways, such as typing, copy and paste, or dictation. macOS 14 introduces enhancements to the system UI for the text cursor to provide a more seamless text experience.\n\nIf your app handles text input through standard AppKit views such as [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextView] or [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextField], your app automatically uses the system UI for the text cursor. This system UI includes the following elements:\n\nIf you have a highly customized UI for displaying text, you can adopt this system UI in your AppKit app.\n\n### Add the system text cursor to a custom text view\n\nIf your app handles text input through a custom view that builds on [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextInputClient], you can display the system text cursor manually. Create an [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextInsertionIndicator] view and add it on top of the view that displays text in your app.\n\nWhen your custom text view becomes active or becomes first responder, update the display mode of the text cursor.\n\n### Configure the text cursor animations\n\nDepending on the behavior you need at a particular point in time, you can determine how the text cursor handles animations by selecting one of these display modes:\n\nWhen you use the automatic display mode, you can further customize the animation options depending on the needs of your app.\n\nThe following code shows how to customize the placement of the animated effects view to place it directly below the text cursor.\n\n### Update the text cursor position\n\nYour custom text view is responsible for updating the position of the text cursor when a person inputs text, but the system provides the appropriate animated effect. For example, the following image shows the system animation effect that applies to the text cursor during dictation.\n\n\n\nAs a person types or inserts text during dictation, update the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSView\/frame] of the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextInsertionIndicator] view. The view automatically changes its appearance in response to that movement, matching the system UI for the corresponding type of input (typing or dictation).\n\n### Configure the placements of text cursor accessories\n\nThe system text cursor displays accessories that indicate state, such as current input source language, dictation, and Caps Lock. For example, the following image shows the text cursor with the dictation indicator and the current input language set to English.\n\n\n\nWhen a person changes the input language, the accessory expands to show the language selection UI in the language switcher accessory.\n\n\n\n[doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextInsertionIndicator] draws these accessories automatically, but you can specify where in relation to the text cursor to draw them. In your custom text view, you can override the placement of these accessories by specifying [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextInputClient\/preferredTextAccessoryPlacement()] in your implementation of [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextInputClient]. When the system renders the text cursor in your custom view, it uses the return value of this method to determine where to draw the accessories.\n\n### Indicate the offscreen text cursor position during dictation\n\nThe system text cursor shows a dictation indicator accessory during an active dictation session. When a person scrolls the text cursor offscreen during dictation, the system also draws a scroll-away indicator to indicate the position of the cursor. For example, the following image shows a scroll-away indicator that points downwards, indicating that the text cursor is out of view below.\n\n\n\nFor the system to show the scroll-away indicator on a custom text view, you need to complete the following steps:\n\n### Hide the system text cursor\n\nWhen your custom text view resigns first responder status, update the display mode of the text cursor to [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextInsertionIndicator\/DisplayMode-swift.enum\/hidden].\n\nIf you implement custom text UI in a UIKit app, see [doc:\/\/com.apple.documentation\/documentation\/UIKit\/adopting-system-selection-ui-in-custom-text-views].",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/appkit\/adopting-the-system-text-cursor-in-custom-text-views\ncrawled: 2025-12-05T22:06:04Z\n---\n\n# Adopting the system text cursor in custom text views\n\n**Article**\n\nIncorporate the system text cursor into your custom text UI in AppKit.\n\n## Overview\n\nPeople can enter text into your app in a variety of ways, such as typing, copy and paste, or dictation. macOS 14 introduces enhancements to the system UI for the text cursor to provide a more seamless text experience.\n\nIf your app handles text input through standard AppKit views such as [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextView] or [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextField], your app automatically uses the system UI for the text cursor. This system UI includes the following elements:\n\n- The text cursor that indicates the insertion point of the text\n- Text cursor accessories that indicate state, such as current input source language, dictation, and Caps Lock\n- Animation effects that surround the text cursor during dictation\n\nIf you have a highly customized UI for displaying text, you can adopt this system UI in your AppKit app.\n\n### Add the system text cursor to a custom text view\n\nIf your app handles text input through a custom view that builds on [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextInputClient], you can display the system text cursor manually. Create an [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextInsertionIndicator] view and add it on top of the view that displays text in your app.\n\n```swift\n\/\/ Set up the text cursor.\nlet textCursor = NSTextInsertionIndicator(frame: .zero)\ndocumentView.addSubview(textCursor)\n```\n\nWhen your custom text view becomes active or becomes first responder, update the display mode of the text cursor.\n\n```swift\n\/\/ Show the text cursor when the text view becomes active.\nfunc didBecomeActive() {\n    textCursor.displayMode = .automatic\n}\n```\n\n### Configure the text cursor animations\n\nDepending on the behavior you need at a particular point in time, you can determine how the text cursor handles animations by selecting one of these display modes:\n\n- Automatic. Set the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextInsertionIndicator\/DisplayMode-swift.enum\/automatic] display mode to stop and start animations for the text cursor automatically. These animations include a blinking effect that applies to the text cursor during typing and dictation, animated transitions between dictation states, and automatic hiding of the text cursor during tracking loops. This display mode is appropriate in the majority of cases when your custom text view is accepting text input.\n- Always visible. Set the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextInsertionIndicator\/DisplayMode-swift.enum\/visible] display mode to always show the text cursor and disable animations. This display mode is appropriate when the text cursor needs to appear without blinking â€” for example, to indicate a drop destination as part of a drag and drop interaction.\n\nWhen you use the automatic display mode, you can further customize the animation options depending on the needs of your app.\n\n- By default, the text cursor hides automatically during tracking loops. Include the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextInsertionIndicator\/AutomaticModeOptions-swift.struct\/showWhileTracking] option in [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextInsertionIndicator\/automaticModeOptions-swift.property] to show the text cursor during tracking instead.\n- By default, the text cursor shows an animated effect during dictation. To completely hide the view that draws the animated effect, remove [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextInsertionIndicator\/AutomaticModeOptions-swift.struct\/showEffectsView] from [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextInsertionIndicator\/automaticModeOptions-swift.property]. To customize the placement of this view in your view hierarchy, specify [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextInsertionIndicator\/effectsViewInserter].\n\nThe following code shows how to customize the placement of the animated effects view to place it directly below the text cursor.\n\n```swift\n\/\/ Specify custom view hierarchy placement for the animated effects view.\ntextCursor.effectsViewInserter = { view in\n    documentView.addSubview(view, positioned: .below, relativeTo: textCursor)\n}\n```\n\n### Update the text cursor position\n\nYour custom text view is responsible for updating the position of the text cursor when a person inputs text, but the system provides the appropriate animated effect. For example, the following image shows the system animation effect that applies to the text cursor during dictation.\n\n\n\nAs a person types or inserts text during dictation, update the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSView\/frame] of the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextInsertionIndicator] view. The view automatically changes its appearance in response to that movement, matching the system UI for the corresponding type of input (typing or dictation).\n\n### Configure the placements of text cursor accessories\n\nThe system text cursor displays accessories that indicate state, such as current input source language, dictation, and Caps Lock. For example, the following image shows the text cursor with the dictation indicator and the current input language set to English.\n\n\n\nWhen a person changes the input language, the accessory expands to show the language selection UI in the language switcher accessory.\n\n\n\n[doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextInsertionIndicator] draws these accessories automatically, but you can specify where in relation to the text cursor to draw them. In your custom text view, you can override the placement of these accessories by specifying [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextInputClient\/preferredTextAccessoryPlacement()] in your implementation of [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextInputClient]. When the system renders the text cursor in your custom view, it uses the return value of this method to determine where to draw the accessories.\n\n### Indicate the offscreen text cursor position during dictation\n\nThe system text cursor shows a dictation indicator accessory during an active dictation session. When a person scrolls the text cursor offscreen during dictation, the system also draws a scroll-away indicator to indicate the position of the cursor. For example, the following image shows a scroll-away indicator that points downwards, indicating that the text cursor is out of view below.\n\n\n\nFor the system to show the scroll-away indicator on a custom text view, you need to complete the following steps:\n\n- Adopt [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextInputClient] and implement [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextInputClient\/unionRectInVisibleSelectedRange] and [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextInputClient\/documentVisibleRect]. These properties provide the system with the coordinate information it needs to draw the scroll-away indicator in the appropriate position.\n- Notify the system when a person starts or stops scrolling, so the system can display the indicator at the appropriate time. Call [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextInputContext\/textInputClientWillStartScrollingOrZooming()] when scrolling starts, and [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextInputContext\/textInputClientDidEndScrollingOrZooming()] when scrolling ends.\n\n### Hide the system text cursor\n\nWhen your custom text view resigns first responder status, update the display mode of the text cursor to [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextInsertionIndicator\/DisplayMode-swift.enum\/hidden].\n\n```swift\n\/\/ Hide the text cursor when the text view becomes inactive.\nfunc didBecomeInactive() {\n    textCursor.displayMode = .hidden\n}\n```\n\nIf you implement custom text UI in a UIKit app, see [doc:\/\/com.apple.documentation\/documentation\/UIKit\/adopting-system-selection-ui-in-custom-text-views].\n\n\n\n## Text input\n\n- **NSTextInputContext**: An object that represents the Cocoa text input system.\n- **NSTextInputClient**: A set of methods that text views need to implement to interact properly with the text input management system.\n- **NSTextAlternatives**: A list of alternative strings for a piece of text.\n- **NSTextContent**: A protocol that describes specific kinds of input content types.\n- **NSTextInsertionIndicator**: A view that represents the insertion indicator in text.\n- **NSTextInsertionIndicator.DisplayMode**: Constants that determine how to display the system text cursor in a custom text UI.\n- **NSTextInsertionIndicator.AutomaticModeOptions**: Options that affect the automatic display mode.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "An object that represents the Cocoa text input system.",
          "name" : "NSTextInputContext",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSTextInputContext"
        },
        {
          "description" : "A set of methods that text views need to implement to interact properly with the text input management system.",
          "name" : "NSTextInputClient",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSTextInputClient"
        },
        {
          "description" : "A list of alternative strings for a piece of text.",
          "name" : "NSTextAlternatives",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSTextAlternatives"
        },
        {
          "description" : "A protocol that describes specific kinds of input content types.",
          "name" : "NSTextContent",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSTextContent"
        },
        {
          "description" : "A view that represents the insertion indicator in text.",
          "name" : "NSTextInsertionIndicator",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSTextInsertionIndicator"
        },
        {
          "description" : "Constants that determine how to display the system text cursor in a custom text UI.",
          "name" : "NSTextInsertionIndicator.DisplayMode",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSTextInsertionIndicator\/DisplayMode-swift.enum"
        },
        {
          "description" : "Options that affect the automatic display mode.",
          "name" : "NSTextInsertionIndicator.AutomaticModeOptions",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSTextInsertionIndicator\/AutomaticModeOptions-swift.struct"
        }
      ],
      "title" : "Text input"
    }
  ],
  "source" : "appleJSON",
  "title" : "Adopting the system text cursor in custom text views",
  "url" : "https:\/\/developer.apple.com\/documentation\/appkit\/adopting-the-system-text-cursor-in-custom-text-views"
}