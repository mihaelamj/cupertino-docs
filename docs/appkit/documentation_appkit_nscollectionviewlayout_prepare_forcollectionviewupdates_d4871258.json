{
  "abstract" : "Performs needed tasks before items are inserted, deleted, or moved within the collection view.",
  "codeExamples" : [

  ],
  "contentHash" : "07eba094741e9a78d90e95ff6579e52a35c6b29fd76ff36a94b2cae7f85c28f0",
  "crawledAt" : "2025-12-05T21:49:32Z",
  "declaration" : {
    "code" : "@MainActor func prepare(forCollectionViewUpdates updateItems: [NSCollectionViewUpdateItem])",
    "language" : "swift"
  },
  "id" : "385133BA-1DD3-4DA1-93C2-7093B65E469A",
  "kind" : "method",
  "language" : "swift",
  "module" : "AppKit",
  "overview" : "## Discussion\n\nWhen items are inserted, deleted, or moved, the collection view calls this method to report those changes to the layout object. The default implementation uses the provided information to plan the layout animations needed to respond to the changes. Subclasses can override this method and use it to prepare for any custom changes, but you should always call `super` at some point in your implementation.",
  "platforms" : [
    "macOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/AppKit\/NSCollectionViewLayout\/prepare(forCollectionViewUpdates:)\ncrawled: 2025-12-05T21:49:32Z\n---\n\n# prepare(forCollectionViewUpdates:)\n\n**Instance Method**\n\nPerforms needed tasks before items are inserted, deleted, or moved within the collection view.\n\n## Declaration\n\n```swift\n@MainActor func prepare(forCollectionViewUpdates updateItems: [NSCollectionViewUpdateItem])\n```\n\n## Parameters\n\n- **updateItems**: An array of [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSCollectionViewUpdateItem] objects that identify the changes being made.\n\n## Discussion\n\nWhen items are inserted, deleted, or moved, the collection view calls this method to report those changes to the layout object. The default implementation uses the provided information to plan the layout animations needed to respond to the changes. Subclasses can override this method and use it to prepare for any custom changes, but you should always call `super` at some point in your implementation.\n\n## Responding to Collection View Updates\n\n- **finalizeCollectionViewUpdates()**: Performs needed steps after items are inserted, deleted, or moved within a collection view.\n- **indexPathsToInsertForSupplementaryView(ofKind:)**: Returns the index paths for any supplementary views that the layout object wants to add to the collection view.\n- **indexPathsToInsertForDecorationView(ofKind:)**: Returns the index paths for any decoration views that the layout object wants to add to the collection view.\n- **initialLayoutAttributesForAppearingItem(at:)**: Returns the starting layout information for an item being inserted into the collection view.\n- **initialLayoutAttributesForAppearingSupplementaryElement(ofKind:at:)**: Returns the starting layout information for a supplementary view being added to the collection view.\n- **initialLayoutAttributesForAppearingDecorationElement(ofKind:at:)**: Returns the starting layout information for a decoration view being added to the collection view.\n- **indexPathsToDeleteForSupplementaryView(ofKind:)**: Returns the index paths for any supplementary views that the layout object wants to remove from the collection view.\n- **indexPathsToDeleteForDecorationView(ofKind:)**: Returns index paths for any decoration views that the layout object wants to remove from the collection view.\n- **finalLayoutAttributesForDisappearingItem(at:)**: Returns the ending layout information for an item being removed from the collection view.\n- **finalLayoutAttributesForDisappearingSupplementaryElement(ofKind:at:)**: Returns the ending layout information for a supplementary view being removed from the collection view.\n- **finalLayoutAttributesForDisappearingDecorationElement(ofKind:at:)**: Returns the ending layout information for a decoration view being removed from the collection view.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Performs needed steps after items are inserted, deleted, or moved within a collection view.",
          "name" : "finalizeCollectionViewUpdates()",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSCollectionViewLayout\/finalizeCollectionViewUpdates()"
        },
        {
          "description" : "Returns the index paths for any supplementary views that the layout object wants to add to the collection view.",
          "name" : "indexPathsToInsertForSupplementaryView(ofKind:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSCollectionViewLayout\/indexPathsToInsertForSupplementaryView(ofKind:)"
        },
        {
          "description" : "Returns the index paths for any decoration views that the layout object wants to add to the collection view.",
          "name" : "indexPathsToInsertForDecorationView(ofKind:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSCollectionViewLayout\/indexPathsToInsertForDecorationView(ofKind:)"
        },
        {
          "description" : "Returns the starting layout information for an item being inserted into the collection view.",
          "name" : "initialLayoutAttributesForAppearingItem(at:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSCollectionViewLayout\/initialLayoutAttributesForAppearingItem(at:)"
        },
        {
          "description" : "Returns the starting layout information for a supplementary view being added to the collection view.",
          "name" : "initialLayoutAttributesForAppearingSupplementaryElement(ofKind:at:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSCollectionViewLayout\/initialLayoutAttributesForAppearingSupplementaryElement(ofKind:at:)"
        },
        {
          "description" : "Returns the starting layout information for a decoration view being added to the collection view.",
          "name" : "initialLayoutAttributesForAppearingDecorationElement(ofKind:at:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSCollectionViewLayout\/initialLayoutAttributesForAppearingDecorationElement(ofKind:at:)"
        },
        {
          "description" : "Returns the index paths for any supplementary views that the layout object wants to remove from the collection view.",
          "name" : "indexPathsToDeleteForSupplementaryView(ofKind:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSCollectionViewLayout\/indexPathsToDeleteForSupplementaryView(ofKind:)"
        },
        {
          "description" : "Returns index paths for any decoration views that the layout object wants to remove from the collection view.",
          "name" : "indexPathsToDeleteForDecorationView(ofKind:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSCollectionViewLayout\/indexPathsToDeleteForDecorationView(ofKind:)"
        },
        {
          "description" : "Returns the ending layout information for an item being removed from the collection view.",
          "name" : "finalLayoutAttributesForDisappearingItem(at:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSCollectionViewLayout\/finalLayoutAttributesForDisappearingItem(at:)"
        },
        {
          "description" : "Returns the ending layout information for a supplementary view being removed from the collection view.",
          "name" : "finalLayoutAttributesForDisappearingSupplementaryElement(ofKind:at:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSCollectionViewLayout\/finalLayoutAttributesForDisappearingSupplementaryElement(ofKind:at:)"
        },
        {
          "description" : "Returns the ending layout information for a decoration view being removed from the collection view.",
          "name" : "finalLayoutAttributesForDisappearingDecorationElement(ofKind:at:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSCollectionViewLayout\/finalLayoutAttributesForDisappearingDecorationElement(ofKind:at:)"
        }
      ],
      "title" : "Responding to Collection View Updates"
    }
  ],
  "source" : "appleJSON",
  "title" : "prepare(forCollectionViewUpdates:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSCollectionViewLayout\/prepare(forCollectionViewUpdates:)"
}