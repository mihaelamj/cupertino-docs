{
  "abstract" : "Write an app that creates, manages, edits, and saves text documents.",
  "codeExamples" : [
    {
      "code" : "class Content: NSObject {\n    @objc dynamic var contentString = \"\"\n    \n    public init(contentString: String) {\n        self.contentString = contentString\n    }\n    \n}",
      "language" : "swift"
    },
    {
      "code" : "override func makeWindowControllers() {\n    \/\/ Returns the storyboard that contains your document window.\n    let storyboard = NSStoryboard(name: NSStoryboard.Name(\"Main\"), bundle: nil)\n    if let windowController =\n        storyboard.instantiateController(\n            withIdentifier: NSStoryboard.SceneIdentifier(\"Document Window Controller\")) as? NSWindowController {\n        addWindowController(windowController)\n        \n        \/\/ Set the view controller's represented object as your document.\n        if let contentVC = windowController.contentViewController as? ViewController {\n            contentVC.representedObject = content\n            contentViewController = contentVC\n        }\n    }\n}",
      "language" : "swift"
    },
    {
      "code" : "override var representedObject: Any? {\n    didSet {\n        \/\/ Pass down the represented object to all of the child view controllers.\n        for child in children {\n            child.representedObject = representedObject\n        }\n    }\n}",
      "language" : "swift"
    },
    {
      "code" : "override func read(from data: Data, ofType typeName: String) throws {\n    content.read(from: data)\n}",
      "language" : "swift"
    },
    {
      "code" : "override func data(ofType typeName: String) throws -> Data {\n    return content.data()!\n}",
      "language" : "swift"
    }
  ],
  "contentHash" : "02b62447a7a91f1554d414904fdb868bdc009ca29a154d67a1bf92ac1ab1e769",
  "crawledAt" : "2025-12-03T09:17:43Z",
  "id" : "59DC4B55-8705-4474-9C31-C754ADA7F00C",
  "kind" : "unknown",
  "language" : "swift",
  "module" : "AppKit",
  "overview" : "## Overview\n\nThis sample shows how to use the Cocoa document architecture to manage documents. A document is a body of information, such as pages of text, stored in a file locally or in iCloud.\n\nIn the Cocoa document architecture, your document is represented by a custom subclass of [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSDocument]. The `NSDocument` class provides most of the behavior for managing your document. In your subclass, you override or fine-tune this behavior by providing custom code for reading and writing document data. A document’s data is called the *data model*. Each `NSDocument` has its own [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSWindowController], which in turn creates an [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSWindow] object for displaying the document content.\n\nBecause a document-based app handles multiple documents that are open at the same time, it uses [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSDocumentController] to manage them. Cocoa provides most of the infrastructure for managing your documents. With file coordination, version management, and conflict resolution among other documents, it provides the easiest path to using iCloud.\n\n\n\n### Declare the Document Type\n\nApps must use Xcode’s Document Types editor to define the types of documents they can open. When Xcode builds your app, it places the document type information in your app’s information property list (`Info.plist`) file. When users install your app, the system uses that information to determine how to send your app the files to be opened.\n\nYour app declares its document type as a uniform type identifier (UTI), which is a name that identifies a data format. There are two types of UTIs: system UTIs, which are predefined identifiers known to all systems, and user-defined UTIs, which are custom identifiers you can provide for your custom data formats.\n\nThe DocumentBasedApp sample has one document type for files containing plain text. Because text is a standard data format, the sample uses the `public.plain-text` system UTI.\n\nThe values in the Document Types editor for this sample as follows:\n\n`Name` is a human-readable description of the document type, shown in the Finder when users inspect your document type. `Class` is the name of the `NSDocument` subclass that handles this document type. Because this sample edits plain-text documents, its `Role` for this document type is an editor. `Bundle` is turned off because plain-text files aren’t distributed as bundles or packages.\n\nA UTI also specifies which file extension is used by files of this type.  The `public.plain-text` UTI specifies extension `.txt`, so the document files that this sample opens or creates have the `.txt` extension at the end of the filename.\n\n### Design the Document Content\n\nThis sample app is a text editor, implementing a subclass of `NSDocument` called `Document` with a data model called `Content`.\n\nThe `Content` object encapsulates the document’s data into a single package. Putting all of the document’s data into a single `Content` object simplifies data management. For example, it’s easier to add new data elements to the document later.\n\nThe `Content` object contains a single attribute called `contentString`, which is made up of a single `String`.\n\nUsing a centralized `Content` object encapsulates the document’s data model into a single package. If you need to add new data elements to your data model later, you’ll also place them within the `Content` model. The model object is therefore responsible for encoding and decoding its content for reading and writing to disk.\n\n### Design the Document User Interface\n\nThis sample follows the Model–View–Controller design pattern by separating its data from the user interface.  The *model* portion is the `Content` object, the *view* portion is document’s `NSWindow` plus the `NSView` hierarchy it contains, and the *controller* portion is divided among various controller objects, including your `Document` object. The document’s `NSWindowController` object and the view hierarchy of `NSViewController` objects descend from the window controller’s `contentViewController`.\n\nWhen you create your `Document` subclass, you determine which window controller the document will use by implementing the `makeWindowControllers()` function. This function also sets a reference to the document object as the `contentViewController`‘s `representedObject`, allowing the user interface elements to bind the document’s data model. Hence the user interface elements get their values through the `representedObject`.\n\nWhen you organize the user interface into groups of view controllers called *child view controllers*, `NSViewController` passes down its `representedObject` to all of its children.\n\nAs a result, the `NSTextView` containing the plain text is bound to the document’s data model using [doc:\/\/com.apple.appkit\/documentation\/AppKit\/cocoa-bindings] to keep the text view’s data in sync with the data model. The `Value` binding of the `NSTextView` is set to the following key path of its view controller:\n\n`representedObject.contentString`\n\n\n\n### Read the Document Content\n\nAt runtime, the `Document` calls `read(from:ofType:)` function to read in the data of a specified type from a file. This overridden function ignores the `typeName` parameter because this sample handles documents of a single known type.\n\n### Write the Document Content\n\nAt runtime, the `Document` calls `data(ofType:)` function to write the plain text to a file. This overridden function ignores the `typeName` parameter because this sample handles documents of a single known type.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/appkit\/developing-a-document-based-app\ncrawled: 2025-12-03T09:17:43Z\n---\n\n# Developing a Document-Based App\n\n**Sample Code**\n\nWrite an app that creates, manages, edits, and saves text documents.\n\n## Overview\n\nThis sample shows how to use the Cocoa document architecture to manage documents. A document is a body of information, such as pages of text, stored in a file locally or in iCloud.\n\nIn the Cocoa document architecture, your document is represented by a custom subclass of [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSDocument]. The `NSDocument` class provides most of the behavior for managing your document. In your subclass, you override or fine-tune this behavior by providing custom code for reading and writing document data. A document’s data is called the *data model*. Each `NSDocument` has its own [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSWindowController], which in turn creates an [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSWindow] object for displaying the document content.\n\nBecause a document-based app handles multiple documents that are open at the same time, it uses [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSDocumentController] to manage them. Cocoa provides most of the infrastructure for managing your documents. With file coordination, version management, and conflict resolution among other documents, it provides the easiest path to using iCloud.\n\n\n\n### Declare the Document Type\n\nApps must use Xcode’s Document Types editor to define the types of documents they can open. When Xcode builds your app, it places the document type information in your app’s information property list (`Info.plist`) file. When users install your app, the system uses that information to determine how to send your app the files to be opened.\n\nYour app declares its document type as a uniform type identifier (UTI), which is a name that identifies a data format. There are two types of UTIs: system UTIs, which are predefined identifiers known to all systems, and user-defined UTIs, which are custom identifiers you can provide for your custom data formats.\n\nThe DocumentBasedApp sample has one document type for files containing plain text. Because text is a standard data format, the sample uses the `public.plain-text` system UTI.\n\nThe values in the Document Types editor for this sample as follows:\n\n- Name = Plain Text\n- Identifier = `public.plain-text`\n- Class = `$(PRODUCT_MODULE_NAME).Document`\n- Role = Editor\n- Bundle = Unchecked\n\n`Name` is a human-readable description of the document type, shown in the Finder when users inspect your document type. `Class` is the name of the `NSDocument` subclass that handles this document type. Because this sample edits plain-text documents, its `Role` for this document type is an editor. `Bundle` is turned off because plain-text files aren’t distributed as bundles or packages.\n\nA UTI also specifies which file extension is used by files of this type.  The `public.plain-text` UTI specifies extension `.txt`, so the document files that this sample opens or creates have the `.txt` extension at the end of the filename.\n\n### Design the Document Content\n\nThis sample app is a text editor, implementing a subclass of `NSDocument` called `Document` with a data model called `Content`.\n\nThe `Content` object encapsulates the document’s data into a single package. Putting all of the document’s data into a single `Content` object simplifies data management. For example, it’s easier to add new data elements to the document later.\n\nThe `Content` object contains a single attribute called `contentString`, which is made up of a single `String`.\n\n```swift\nclass Content: NSObject {\n    @objc dynamic var contentString = \"\"\n    \n    public init(contentString: String) {\n        self.contentString = contentString\n    }\n    \n}\n```\n\n\n\nUsing a centralized `Content` object encapsulates the document’s data model into a single package. If you need to add new data elements to your data model later, you’ll also place them within the `Content` model. The model object is therefore responsible for encoding and decoding its content for reading and writing to disk.\n\n### Design the Document User Interface\n\nThis sample follows the Model–View–Controller design pattern by separating its data from the user interface.  The *model* portion is the `Content` object, the *view* portion is document’s `NSWindow` plus the `NSView` hierarchy it contains, and the *controller* portion is divided among various controller objects, including your `Document` object. The document’s `NSWindowController` object and the view hierarchy of `NSViewController` objects descend from the window controller’s `contentViewController`.\n\nWhen you create your `Document` subclass, you determine which window controller the document will use by implementing the `makeWindowControllers()` function. This function also sets a reference to the document object as the `contentViewController`‘s `representedObject`, allowing the user interface elements to bind the document’s data model. Hence the user interface elements get their values through the `representedObject`.\n\n```swift\noverride func makeWindowControllers() {\n    \/\/ Returns the storyboard that contains your document window.\n    let storyboard = NSStoryboard(name: NSStoryboard.Name(\"Main\"), bundle: nil)\n    if let windowController =\n        storyboard.instantiateController(\n            withIdentifier: NSStoryboard.SceneIdentifier(\"Document Window Controller\")) as? NSWindowController {\n        addWindowController(windowController)\n        \n        \/\/ Set the view controller's represented object as your document.\n        if let contentVC = windowController.contentViewController as? ViewController {\n            contentVC.representedObject = content\n            contentViewController = contentVC\n        }\n    }\n}\n```\n\nWhen you organize the user interface into groups of view controllers called *child view controllers*, `NSViewController` passes down its `representedObject` to all of its children.\n\n```swift\noverride var representedObject: Any? {\n    didSet {\n        \/\/ Pass down the represented object to all of the child view controllers.\n        for child in children {\n            child.representedObject = representedObject\n        }\n    }\n}\n```\n\nAs a result, the `NSTextView` containing the plain text is bound to the document’s data model using [doc:\/\/com.apple.appkit\/documentation\/AppKit\/cocoa-bindings] to keep the text view’s data in sync with the data model. The `Value` binding of the `NSTextView` is set to the following key path of its view controller:\n\n`representedObject.contentString`\n\n\n\n### Read the Document Content\n\nAt runtime, the `Document` calls `read(from:ofType:)` function to read in the data of a specified type from a file. This overridden function ignores the `typeName` parameter because this sample handles documents of a single known type.\n\n```swift\noverride func read(from data: Data, ofType typeName: String) throws {\n    content.read(from: data)\n}\n```\n\n### Write the Document Content\n\nAt runtime, the `Document` calls `data(ofType:)` function to write the plain text to a file. This overridden function ignores the `typeName` parameter because this sample handles documents of a single known type.\n\n```swift\noverride func data(ofType typeName: String) throws -> Data {\n    return content.data()!\n}\n```\n\n## Documents\n\n- **NSDocument**: An abstract class that defines the interface for macOS documents.\n- **NSDocumentController**: An object that manages an app’s documents.\n- **NSPersistentDocument**: A document object that can integrate with Core Data.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "An abstract class that defines the interface for macOS documents.",
          "name" : "NSDocument",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSDocument"
        },
        {
          "description" : "An object that manages an app’s documents.",
          "name" : "NSDocumentController",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSDocumentController"
        },
        {
          "description" : "A document object that can integrate with Core Data.",
          "name" : "NSPersistentDocument",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSPersistentDocument"
        }
      ],
      "title" : "Documents"
    }
  ],
  "source" : "appleJSON",
  "title" : "Developing a Document-Based App",
  "url" : "https:\/\/developer.apple.com\/documentation\/appkit\/developing-a-document-based-app"
}