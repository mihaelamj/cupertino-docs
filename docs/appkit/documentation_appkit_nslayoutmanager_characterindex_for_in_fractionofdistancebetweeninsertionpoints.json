{
  "abstract" : "Returns the index of the character that lies beneath the specified point using the specified container’s coordinate system.",
  "codeExamples" : [

  ],
  "contentHash" : "b0c6ffa852b860166831f4430914a2af5422f286cdc05de27fad1cb9995edc9f",
  "crawledAt" : "2025-12-02T07:32:28Z",
  "declaration" : {
    "code" : "func characterIndex(for point: NSPoint, in container: NSTextContainer, fractionOfDistanceBetweenInsertionPoints partialFraction: UnsafeMutablePointer<CGFloat>?) -> Int",
    "language" : "swift"
  },
  "id" : "43180B12-13A9-4E5D-B6ED-B4F2EC8C81C8",
  "kind" : "method",
  "module" : "AppKit",
  "overview" : "## Return Value\n\nThe index of the character falling under `point`.\n\n## Discussion\n\nAnalogous to [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSLayoutManager\/glyphIndex(for:in:fractionOfDistanceThroughGlyph:)], but expressed in character index terms. The method returns the index of the character falling under `point`, expressed in coordinate system of `container`; if no character is under the point, the nearest character is returned, where nearest is defined according to the requirements of selection by mouse. However, this is not simply equivalent to taking the result of the corresponding glyph index method and converting it to a character index, because in some cases a single glyph represents more than one selectable character, for example an fi ligature glyph. In that case, there is an insertion point within the glyph, and this method returns one character or the other, depending on whether the specified point lies to the left or the right of that insertion point.\n\nIn general, this method returns only character indexes for which there is an insertion point. The `partialFraction` is a fraction of the distance from the insertion point, logically before the given character to the next one, which may be either to the right or to the left depending on directionality.",
  "platforms" : [
    "macOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/AppKit\/NSLayoutManager\/characterIndex(for:in:fractionOfDistanceBetweenInsertionPoints:)\ncrawled: 2025-12-02T07:32:28Z\n---\n\n# characterIndex(for:in:fractionOfDistanceBetweenInsertionPoints:)\n\n**Instance Method**\n\nReturns the index of the character that lies beneath the specified point using the specified container’s coordinate system.\n\n## Declaration\n\n```swift\nfunc characterIndex(for point: NSPoint, in container: NSTextContainer, fractionOfDistanceBetweenInsertionPoints partialFraction: UnsafeMutablePointer<CGFloat>?) -> Int\n```\n\n## Parameters\n\n- **point**: The point to test.\n- **container**: The text container within which the point is tested.\n- **partialFraction**: A fraction of the distance from the insertion point, logically before the given character to the next one.\n\n## Return Value\n\nThe index of the character falling under `point`.\n\n## Discussion\n\nAnalogous to [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSLayoutManager\/glyphIndex(for:in:fractionOfDistanceThroughGlyph:)], but expressed in character index terms. The method returns the index of the character falling under `point`, expressed in coordinate system of `container`; if no character is under the point, the nearest character is returned, where nearest is defined according to the requirements of selection by mouse. However, this is not simply equivalent to taking the result of the corresponding glyph index method and converting it to a character index, because in some cases a single glyph represents more than one selectable character, for example an fi ligature glyph. In that case, there is an insertion point within the glyph, and this method returns one character or the other, depending on whether the specified point lies to the left or the right of that insertion point.\n\nIn general, this method returns only character indexes for which there is an insertion point. The `partialFraction` is a fraction of the distance from the insertion point, logically before the given character to the next one, which may be either to the right or to the left depending on directionality.\n\n## Performing advanced layout queries\n\n- **boundingRect(forGlyphRange:in:)**: Returns the bounding rectangle for the specified glyphs in a container.\n- **characterRange(forGlyphRange:actualGlyphRange:)**: Returns the range of characters that correspond to the glyphs in the specified glyph range.\n- **enumerateEnclosingRects(forGlyphRange:withinSelectedGlyphRange:in:using:)**: Enumerates enclosing rectangles for the specified glyph range in a text container.\n- **enumerateLineFragments(forGlyphRange:using:)**: Enumerates line fragments intersecting with the specified glyph range.\n- **fractionOfDistanceThroughGlyph(for:in:)**: Returns the fraction of the distance between the glyph at the specified point and the next glyph.\n- **getLineFragmentInsertionPoints(forCharacterAt:alternatePositions:inDisplayOrder:positions:characterIndexes:)**: Returns insertion points in bulk for a specified line fragment.\n- **glyphIndex(for:in:)**: Returns the index of the glyph at the specified location in a text container.\n- **glyphIndex(for:in:fractionOfDistanceThroughGlyph:)**: Returns the index of the glyph at the specified point using the container’s coordinate system.\n- **glyphRange(forBoundingRect:in:)**: Returns the smallest contiguous range for glyphs lying wholly or partially within the specified rectangle of the text container.\n- **glyphRange(forBoundingRectWithoutAdditionalLayout:in:)**: Returns the smallest contiguous range for glyphs lying wholly or partially within the specified rectangle of the text container.\n- **glyphRange(for:)**: Returns the range of glyphs lying within the specified text container.\n- **glyphRange(forCharacterRange:actualCharacterRange:)**: Returns the range of glyphs that the specified range of characters generates.\n- **range(ofNominallySpacedGlyphsContaining:)**: Returns the range of displayable glyphs that surround the glyph at the specified index.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Returns the bounding rectangle for the specified glyphs in a container.",
          "name" : "boundingRect(forGlyphRange:in:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSLayoutManager\/boundingRect(forGlyphRange:in:)"
        },
        {
          "description" : "Returns the range of characters that correspond to the glyphs in the specified glyph range.",
          "name" : "characterRange(forGlyphRange:actualGlyphRange:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSLayoutManager\/characterRange(forGlyphRange:actualGlyphRange:)"
        },
        {
          "description" : "Enumerates enclosing rectangles for the specified glyph range in a text container.",
          "name" : "enumerateEnclosingRects(forGlyphRange:withinSelectedGlyphRange:in:using:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSLayoutManager\/enumerateEnclosingRects(forGlyphRange:withinSelectedGlyphRange:in:using:)"
        },
        {
          "description" : "Enumerates line fragments intersecting with the specified glyph range.",
          "name" : "enumerateLineFragments(forGlyphRange:using:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSLayoutManager\/enumerateLineFragments(forGlyphRange:using:)"
        },
        {
          "description" : "Returns the fraction of the distance between the glyph at the specified point and the next glyph.",
          "name" : "fractionOfDistanceThroughGlyph(for:in:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSLayoutManager\/fractionOfDistanceThroughGlyph(for:in:)"
        },
        {
          "description" : "Returns insertion points in bulk for a specified line fragment.",
          "name" : "getLineFragmentInsertionPoints(forCharacterAt:alternatePositions:inDisplayOrder:positions:characterIndexes:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSLayoutManager\/getLineFragmentInsertionPoints(forCharacterAt:alternatePositions:inDisplayOrder:positions:characterIndexes:)"
        },
        {
          "description" : "Returns the index of the glyph at the specified location in a text container.",
          "name" : "glyphIndex(for:in:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSLayoutManager\/glyphIndex(for:in:)"
        },
        {
          "description" : "Returns the index of the glyph at the specified point using the container’s coordinate system.",
          "name" : "glyphIndex(for:in:fractionOfDistanceThroughGlyph:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSLayoutManager\/glyphIndex(for:in:fractionOfDistanceThroughGlyph:)"
        },
        {
          "description" : "Returns the smallest contiguous range for glyphs lying wholly or partially within the specified rectangle of the text container.",
          "name" : "glyphRange(forBoundingRect:in:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSLayoutManager\/glyphRange(forBoundingRect:in:)"
        },
        {
          "description" : "Returns the smallest contiguous range for glyphs lying wholly or partially within the specified rectangle of the text container.",
          "name" : "glyphRange(forBoundingRectWithoutAdditionalLayout:in:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSLayoutManager\/glyphRange(forBoundingRectWithoutAdditionalLayout:in:)"
        },
        {
          "description" : "Returns the range of glyphs lying within the specified text container.",
          "name" : "glyphRange(for:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSLayoutManager\/glyphRange(for:)"
        },
        {
          "description" : "Returns the range of glyphs that the specified range of characters generates.",
          "name" : "glyphRange(forCharacterRange:actualCharacterRange:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSLayoutManager\/glyphRange(forCharacterRange:actualCharacterRange:)"
        },
        {
          "description" : "Returns the range of displayable glyphs that surround the glyph at the specified index.",
          "name" : "range(ofNominallySpacedGlyphsContaining:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSLayoutManager\/range(ofNominallySpacedGlyphsContaining:)"
        }
      ],
      "title" : "Performing advanced layout queries"
    }
  ],
  "source" : "appleJSON",
  "title" : "characterIndex(for:in:fractionOfDistanceBetweenInsertionPoints:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSLayoutManager\/characterIndex(for:in:fractionOfDistanceBetweenInsertionPoints:)"
}