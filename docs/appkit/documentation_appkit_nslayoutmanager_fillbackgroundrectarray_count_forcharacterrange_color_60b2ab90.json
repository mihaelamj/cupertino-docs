{
  "abstract" : "Fills background rectangles with a color.",
  "codeExamples" : [

  ],
  "contentHash" : "07f0182b3da5d530d23eebdfab4b8ec2826e0f2d9ea776de0711781f81fc9e43",
  "crawledAt" : "2025-12-04T03:59:14Z",
  "declaration" : {
    "code" : "func fillBackgroundRectArray(_ rectArray: UnsafePointer<NSRect>, count rectCount: Int, forCharacterRange charRange: NSRange, color: NSColor)",
    "language" : "swift"
  },
  "id" : "FD322675-13D8-4B41-A2B2-0340602412AC",
  "kind" : "method",
  "language" : "swift",
  "module" : "AppKit",
  "overview" : "## Discussion\n\nThis is the primitive method used by [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSLayoutManager\/drawBackground(forGlyphRange:at:)], providing a finer-grained override point for actually filling rectangles with a particular background color for a background color attribute, a selected or marked range highlight, a block decoration, or any other rectangle fill needed by that method. As with [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSLayoutManager\/showPackedGlyphs:length:glyphRange:atPoint:font:color:printingAdjustment:], the `charRange` and `color` parameters are passed in merely for informational purposes; the color is already set in the graphics state. If for any reason you modify it, you must restore it before returning from this method.\n\nThis method operates in terms of character ranges, because the relevant attributes are expressed on characters, and they don’t always lie on glyph boundaries—for example, when one character of an “fi” ligature is highlighted.\n\nYou should never call this method, but you might override it. The default implementation simply fills the rectangles in the specified array. The graphics operation used for this fill is controlled by a link check; for compatibility reasons, it is [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSCompositeCopy] for applications linked prior to OS X v10.6 and [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSCompositeSourceOver] for applications linked on macOS 10.6 or later. Applications can control the operation used, or modify the drawing, by overriding this method in an `NSLayoutManager` subclass.",
  "platforms" : [
    "macOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/AppKit\/NSLayoutManager\/fillBackgroundRectArray(_:count:forCharacterRange:color:)\ncrawled: 2025-12-04T03:59:14Z\n---\n\n# fillBackgroundRectArray(_:count:forCharacterRange:color:)\n\n**Instance Method**\n\nFills background rectangles with a color.\n\n## Declaration\n\n```swift\nfunc fillBackgroundRectArray(_ rectArray: UnsafePointer<NSRect>, count rectCount: Int, forCharacterRange charRange: NSRange, color: NSColor)\n```\n\n## Parameters\n\n- **rectArray**: The array of rectangles to fill.\n- **rectCount**: The number of rectangles in `rectArray`.\n- **charRange**: The range of characters whose background rectangles are filled.\n- **color**: The fill color.\n\n## Discussion\n\nThis is the primitive method used by [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSLayoutManager\/drawBackground(forGlyphRange:at:)], providing a finer-grained override point for actually filling rectangles with a particular background color for a background color attribute, a selected or marked range highlight, a block decoration, or any other rectangle fill needed by that method. As with [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSLayoutManager\/showPackedGlyphs:length:glyphRange:atPoint:font:color:printingAdjustment:], the `charRange` and `color` parameters are passed in merely for informational purposes; the color is already set in the graphics state. If for any reason you modify it, you must restore it before returning from this method.\n\nThis method operates in terms of character ranges, because the relevant attributes are expressed on characters, and they don’t always lie on glyph boundaries—for example, when one character of an “fi” ligature is highlighted.\n\nYou should never call this method, but you might override it. The default implementation simply fills the rectangles in the specified array. The graphics operation used for this fill is controlled by a link check; for compatibility reasons, it is [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSCompositeCopy] for applications linked prior to OS X v10.6 and [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSCompositeSourceOver] for applications linked on macOS 10.6 or later. Applications can control the operation used, or modify the drawing, by overriding this method in an `NSLayoutManager` subclass.\n\n## Drawing\n\n- **drawBackground(forGlyphRange:at:)**: Draws background marks for the specified glyphs, which must lie completely within a single text container.\n- **drawGlyphs(forGlyphRange:at:)**: Draws the specified glyphs, which must lie completely within a single text container.\n- **drawStrikethrough(forGlyphRange:strikethroughType:baselineOffset:lineFragmentRect:lineFragmentGlyphRange:containerOrigin:)**: Draws a strikethrough for the specified glyphs.\n- **drawUnderline(forGlyphRange:underlineType:baselineOffset:lineFragmentRect:lineFragmentGlyphRange:containerOrigin:)**: Draws underlining for the glyphs in a specified range.\n- **showCGGlyphs(_:positions:count:font:textMatrix:attributes:in:)**: Renders the glyphs at the specified positions, using the specified attributes.\n- **strikethroughGlyphRange(_:strikethroughType:lineFragmentRect:lineFragmentGlyphRange:containerOrigin:)**: Calculates and draws strikethrough for the specified glyphs.\n- **underlineGlyphRange(_:underlineType:lineFragmentRect:lineFragmentGlyphRange:containerOrigin:)**: Calculates subranges to underline for the specified glyphs and draws the underlining as appropriate.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Draws background marks for the specified glyphs, which must lie completely within a single text container.",
          "name" : "drawBackground(forGlyphRange:at:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSLayoutManager\/drawBackground(forGlyphRange:at:)"
        },
        {
          "description" : "Draws the specified glyphs, which must lie completely within a single text container.",
          "name" : "drawGlyphs(forGlyphRange:at:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSLayoutManager\/drawGlyphs(forGlyphRange:at:)"
        },
        {
          "description" : "Draws a strikethrough for the specified glyphs.",
          "name" : "drawStrikethrough(forGlyphRange:strikethroughType:baselineOffset:lineFragmentRect:lineFragmentGlyphRange:containerOrigin:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSLayoutManager\/drawStrikethrough(forGlyphRange:strikethroughType:baselineOffset:lineFragmentRect:lineFragmentGlyphRange:containerOrigin:)"
        },
        {
          "description" : "Draws underlining for the glyphs in a specified range.",
          "name" : "drawUnderline(forGlyphRange:underlineType:baselineOffset:lineFragmentRect:lineFragmentGlyphRange:containerOrigin:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSLayoutManager\/drawUnderline(forGlyphRange:underlineType:baselineOffset:lineFragmentRect:lineFragmentGlyphRange:containerOrigin:)"
        },
        {
          "description" : "Renders the glyphs at the specified positions, using the specified attributes.",
          "name" : "showCGGlyphs(_:positions:count:font:textMatrix:attributes:in:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSLayoutManager\/showCGGlyphs(_:positions:count:font:textMatrix:attributes:in:)"
        },
        {
          "description" : "Calculates and draws strikethrough for the specified glyphs.",
          "name" : "strikethroughGlyphRange(_:strikethroughType:lineFragmentRect:lineFragmentGlyphRange:containerOrigin:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSLayoutManager\/strikethroughGlyphRange(_:strikethroughType:lineFragmentRect:lineFragmentGlyphRange:containerOrigin:)"
        },
        {
          "description" : "Calculates subranges to underline for the specified glyphs and draws the underlining as appropriate.",
          "name" : "underlineGlyphRange(_:underlineType:lineFragmentRect:lineFragmentGlyphRange:containerOrigin:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSLayoutManager\/underlineGlyphRange(_:underlineType:lineFragmentRect:lineFragmentGlyphRange:containerOrigin:)"
        }
      ],
      "title" : "Drawing"
    }
  ],
  "source" : "appleJSON",
  "title" : "fillBackgroundRectArray(_:count:forCharacterRange:color:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSLayoutManager\/fillBackgroundRectArray(_:count:forCharacterRange:color:)"
}