{
  "abstract" : "A concrete object for managing your view’s text content and generating the text elements necessary for layout.",
  "codeExamples" : [

  ],
  "conformsTo" : [
    "CVarArg",
    "CustomDebugStringConvertible",
    "CustomStringConvertible",
    "Equatable",
    "Hashable",
    "NSCoding",
    "NSObjectProtocol",
    "NSSecureCoding",
    "NSTextElementProvider",
    "NSTextStorageObserving",
    "Sendable",
    "SendableMetatype"
  ],
  "contentHash" : "1308ba4d49bf3ec18e4c2d5f5bb71db6bb782bb600c088a741823d3e005812d0",
  "crawledAt" : "2025-12-01T09:23:01Z",
  "declaration" : {
    "code" : "class NSTextContentStorage",
    "language" : "swift"
  },
  "id" : "ADCC65C4-703E-4DC2-A4AE-48B27B1BC3D7",
  "kind" : "class",
  "module" : "AppKit",
  "overview" : "## Overview\n\nAn [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextContentStorage] object provides the backing store for a view that contains text. This object stores the text in an attributed string object, and defaults to using an [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextStorage] object. It also maps portions of the text to [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextElement] objects to organize the text into paragraphs, lists, and other common element types found in text content. During layout, TextKit uses these elements to lay out and render the text in your view.\n\nThe standard system views use an [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextContentStorage] object to manage their text content. When building a custom text view, use this type to store the text for your view. [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextContentStorage] works with an associated [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextLayoutManager] to lay out your view’s text. When someone inserts new text or edits the existing text, call the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextContentManager\/performEditingTransaction(_:)] method and use a block to modify the contents of the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextContentStorage\/attributedString] property. Wrapping your edits in an edit transaction lets the rest of the text system respond to those changes.\n\nTextKit uses the abstract [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextLocation] protocol to identify locations within text. [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextContentStorage] manager provides its own implementation of this protocol to represent locations within its storage object. To get the start and end locations, access the object’s [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextElementProvider\/documentRange] property and use them to create new location objects. If you provide your own implementation of the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextLocation] protocol to manage locations in your content, subclass [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextContentManager] and implement your own storage object to support those locations.",
  "platforms" : [
    "macOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/AppKit\/NSTextContentStorage\ncrawled: 2025-12-01T09:23:01Z\n---\n\n# NSTextContentStorage\n\n**Class**\n\nA concrete object for managing your view’s text content and generating the text elements necessary for layout.\n\n## Declaration\n\n```swift\nclass NSTextContentStorage\n```\n\n## Overview\n\nAn [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextContentStorage] object provides the backing store for a view that contains text. This object stores the text in an attributed string object, and defaults to using an [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextStorage] object. It also maps portions of the text to [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextElement] objects to organize the text into paragraphs, lists, and other common element types found in text content. During layout, TextKit uses these elements to lay out and render the text in your view.\n\nThe standard system views use an [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextContentStorage] object to manage their text content. When building a custom text view, use this type to store the text for your view. [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextContentStorage] works with an associated [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextLayoutManager] to lay out your view’s text. When someone inserts new text or edits the existing text, call the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextContentManager\/performEditingTransaction(_:)] method and use a block to modify the contents of the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextContentStorage\/attributedString] property. Wrapping your edits in an edit transaction lets the rest of the text system respond to those changes.\n\nTextKit uses the abstract [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextLocation] protocol to identify locations within text. [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextContentStorage] manager provides its own implementation of this protocol to represent locations within its storage object. To get the start and end locations, access the object’s [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextElementProvider\/documentRange] property and use them to create new location objects. If you provide your own implementation of the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextLocation] protocol to manage locations in your content, subclass [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextContentManager] and implement your own storage object to support those locations.\n\n## Managing the stored text\n\n- **attributedString**: An attributed string that contains the contents of the document.\n\n## Accessing paragraphs\n\n- **delegate**: The delegate for the content storage object.\n- **NSTextContentStorageDelegate**: The optional methods that delegates of content storage objects implement to handle content processing.\n\n## Finding ranges, locations, and offsets\n\n- **location(_:offsetBy:)**: Returns a new text location object based on an existing location and offset you provide.\n- **offset(from:to:)**: Returns the number of characters between the specified locations.\n- **adjustedRange(from:forEditingTextSelection:)**: Returns the text range, if any, in the backing store that required manual adjustment after editing.\n\n## Managing text elements\n\n- **textElement(for:)**: Returns the text element corresponding to object’s attributed string.\n- **attributedString(for:)**: Returns a new attributed string for the text element.\n\n## Instance Properties\n\n- **includesTextListMarkers**\n\n## Text management\n\n- **NSTextContentManager**: An abstract class that defines the interface and a default implementation for managing the text document contents.\n- **NSAttributedString**: A string of text that manages data, layout, and stylistic information for ranges of characters to support rendering.\n- **NSMutableAttributedString**: A mutable string with associated attributes (such as visual style, hyperlinks, or accessibility data) for portions of its text.\n\n## Inherits From\n\n- NSTextContentManager\n\n## Conforms To\n\n- CVarArg\n- CustomDebugStringConvertible\n- CustomStringConvertible\n- Equatable\n- Hashable\n- NSCoding\n- NSObjectProtocol\n- NSSecureCoding\n- NSTextElementProvider\n- NSTextStorageObserving\n- Sendable\n- SendableMetatype\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "An attributed string that contains the contents of the document.",
          "name" : "attributedString",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSTextContentStorage\/attributedString"
        }
      ],
      "title" : "Managing the stored text"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "The delegate for the content storage object.",
          "name" : "delegate",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSTextContentStorage\/delegate"
        },
        {
          "description" : "The optional methods that delegates of content storage objects implement to handle content processing.",
          "name" : "NSTextContentStorageDelegate",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSTextContentStorageDelegate"
        }
      ],
      "title" : "Accessing paragraphs"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Returns a new text location object based on an existing location and offset you provide.",
          "name" : "location(_:offsetBy:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSTextContentStorage\/location(_:offsetBy:)"
        },
        {
          "description" : "Returns the number of characters between the specified locations.",
          "name" : "offset(from:to:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSTextContentStorage\/offset(from:to:)"
        },
        {
          "description" : "Returns the text range, if any, in the backing store that required manual adjustment after editing.",
          "name" : "adjustedRange(from:forEditingTextSelection:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSTextContentStorage\/adjustedRange(from:forEditingTextSelection:)"
        }
      ],
      "title" : "Finding ranges, locations, and offsets"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Returns the text element corresponding to object’s attributed string.",
          "name" : "textElement(for:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSTextContentStorage\/textElement(for:)"
        },
        {
          "description" : "Returns a new attributed string for the text element.",
          "name" : "attributedString(for:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSTextContentStorage\/attributedString(for:)"
        }
      ],
      "title" : "Managing text elements"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "",
          "name" : "includesTextListMarkers",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSTextContentStorage\/includesTextListMarkers"
        }
      ],
      "title" : "Instance Properties"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "An abstract class that defines the interface and a default implementation for managing the text document contents.",
          "name" : "NSTextContentManager",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSTextContentManager"
        },
        {
          "description" : "A string of text that manages data, layout, and stylistic information for ranges of characters to support rendering.",
          "name" : "NSAttributedString",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSAttributedString"
        },
        {
          "description" : "A mutable string with associated attributes (such as visual style, hyperlinks, or accessibility data) for portions of its text.",
          "name" : "NSMutableAttributedString",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSMutableAttributedString"
        }
      ],
      "title" : "Text management"
    },
    {
      "content" : "",
      "items" : [
        {
          "name" : "NSTextContentManager"
        }
      ],
      "title" : "Inherits From"
    }
  ],
  "source" : "appleJSON",
  "title" : "NSTextContentStorage",
  "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSTextContentStorage"
}