{
  "abstract" : "An optional search-and-replace find interface inside a view, usually a scroll view.",
  "codeExamples" : [
    {
      "code" : "- (void)performAction:(NSTextFinderAction)action;",
      "language" : "objc"
    },
    {
      "code" : "- (BOOL)validateAction:(NSTextFinderAction)action;",
      "language" : "objc"
    }
  ],
  "conformsTo" : [
    "CVarArg",
    "CustomDebugStringConvertible",
    "CustomStringConvertible",
    "Equatable",
    "Hashable",
    "NSCoding",
    "NSObjectProtocol"
  ],
  "contentHash" : "1145382f04cb83ec5837f27c13b869a5f417a8ee8dbc99ef17ba4d020c760c8d",
  "crawledAt" : "2025-12-02T07:21:22Z",
  "declaration" : {
    "code" : "class NSTextFinder",
    "language" : "swift"
  },
  "id" : "3748CD8E-A552-4619-98EA-ADF79A8C8107",
  "kind" : "class",
  "module" : "AppKit",
  "overview" : "## Overview\n\nThe class serves as a controller for the standard Cocoa find bar. The `NSTextFinder` class interacts heavily with a `client` object which supports the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinderClient] protocol. The client object provides access to the content being searched and provides visual feedback for a search operation.\n\nAll menu items related to finding (Find…, Find Next, Find Previous, Use Selection for Find, etc.) should have the same action, [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSResponder\/performTextFinderAction(_:)], which gets sent down the responder chain in the standard method.\n\n### Implementing a Find Bar\n\nA responder of [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSResponder\/performTextFinderAction(_:)] is responsible for creating and owning an instance of `NSTextFinder`. Before any other messages are sent to the `NSTextFinder`, you should set its [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinder\/client] property to an object which implements the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinderClient] protocol.\n\nEach user interface item used for finding has a different tag value , which corresponds to the appropriate value in [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinder\/Action]. Upon receipt of the  [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSResponder\/performTextFinderAction(_:)] message, the responder should call the following on its `NSTextFinder` instance:\n\nThis method will determine the desired action from the tag and make various callbacks to [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinder\/client] to perform that action. These callbacks are defined in the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinderClient] protocol.\n\nValidation occurs by a similar pattern. The responder should implement [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSUserInterfaceValidations\/validateUserInterfaceItem(_:)] and, when the item’s action is the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSResponder\/performTextFinderAction(_:)] method, it should pass the item’s tag to the following method and return the result:\n\nThis method will invoke the required client methods to determine what the appropriate response should be. These callbacks are also defined in the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinderClient] protocol.\n\nWhen an action is performed, the text finder will ask its client for the string to search. There are two ways the client can provide this string. It can either implement the `string` method, and simply return an `NSString` instance, or it can implement the following methods: [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinderClient\/string(at:effectiveRange:endsWithSearchBoundary:)] and [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinderClient\/stringLength()].\n\nThese methods make it possible to use the text finder with data that cannot be easily or efficiently flattened into a single string. In the first method, the client should return the string which contains the character at the given index in as conceptual concatenation of all strings that are to be searched.\n\nFor example, if a client had the strings “The quick”, “brown fox” , “jumped over the lazy”, and “dog”, and a `NSTextFinder` instance requests the string at index 17, then the client should return “brown fox”. If all the strings were concatenated together, this would be the ‘x’ in “fox”. Additionally, the client should return, by-reference through the `outRange` parameter, the effective range of the string that is returned. In this example, the range of “brown fox” is {9, 9}, because, in the imagined concatenation, the substring starts at index 9 and is 9 characters long.\n\nIn some cases, it is not desirable for a match to be found which overlaps multiple strings returned by the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinderClient\/string(at:effectiveRange:endsWithSearchBoundary:)] method. For example, suppose a client has a list of names like “John Doe”, and “Jane Doe”, etc. Normally, if the string is concatenated together like so: “John Doe Jane Doe”, then a search for “Doe Jane” would succeed. To prevent this often undesirable behavior, the client should return [doc:\/\/com.apple.documentation\/documentation\/Swift\/true], by-reference, through the `outFlag` parameter, when returning each individual string. This indicates that there is a boundary between the current string and the next string that should not be crossed when searching for a match.\n\nOne of the two approaches (implementing the `string` method the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinderClient\/string(at:effectiveRange:endsWithSearchBoundary:)] and [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinderClient\/stringLength()] methods) must be implemented by the client or the `NSTextFinder` instance will not function. If all three methods are implemented, [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinderClient\/string(at:effectiveRange:endsWithSearchBoundary:)] will be used by default.\n\nThe text finder may require additional information from the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinder\/client] object to perform an action, or it may require the `client` to perform some parts of the action on its behalf. The  methods and properties described in [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinder#Text-Finder-Client-Implementation-Requirements] describes the hooks the text finder requires for each of the actions it supports. If the client does not implement one of these methods or properties, then the action that requires it will be disabled.\n\n#### Text Finder Client Implementation Requirements\n\nThe text finder’s client may implement the following properties for by the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinder\/validateAction(_:)] method: [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinderClient\/isSelectable], [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinderClient\/allowsMultipleSelection], and `editable`. If any of these properties is not implemented, a value of [doc:\/\/com.apple.documentation\/documentation\/Swift\/true] is assumed. Returning [doc:\/\/com.apple.documentation\/documentation\/Swift\/false] from any of these methods will disable the actions that require them. For more information about these properties see [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinderClient].\n\nThe following implementation’s are required by the text client to support the specified actions:\n\n### Incremental Search Support\n\nA common feature used in conjunction with the find bar is incremental search. This feature allows users to find matches immediately as they are typing. In OS X v10.7, the text finder provides this feature for its clients with minimal additional API.\n\nIncremental searching can be enabled by setting the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinder\/isIncrementalSearchingEnabled] property [doc:\/\/com.apple.documentation\/documentation\/Swift\/true]. This property alone is sufficient to start searching incrementally.\n\nFor improved responsiveness, when a document is sufficiently long, the text finder will search the document in the background. To ensure thread-safety, a client using incremental search must call the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinder\/noteClientStringWillChange()] method before any changes are made to the string provided to the text finder.\n\nDuring incremental search, all visible matches are highlighted. If the `client` object that conforms to the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinderClient] protocol implements the read-only [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinderClient\/visibleCharacterRanges] property, then by default a gray overlay will appear over your find bar container’s content view with transparent areas for each match. This view should be a superview of all subviews reported by the text finder client. The `NSScrollView` class already implements this property, so you only need to implement this property when using a different container class.\n\nFinally, this mode also requires the same two [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinderClient] protocol methods that are used to display the find indicator: [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinderClient\/contentView(at:effectiveCharacterRange:)] and [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinderClient\/rects(forCharacterRange:)] be implemented. However, the implementation of these methods is identical for both purposes, so no additional work is required to support incremental search.\n\n### Replacing Text\n\nThe text replacement methods:[doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinder\/Action], [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinder\/findIndicatorNeedsUpdate], and [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinder\/validateAction(_:)] are used by the replace, replace all, replace all in section, and replace and find actions.\n\nBefore a replace operation is performed, the `NSTextFinder` instance calls the `client` object’s [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinder\/Action] method to determine if a replacement should take place. If it returns [doc:\/\/com.apple.documentation\/documentation\/Swift\/false], then the characters in the given ranges will not be replaced. If the method returns [doc:\/\/com.apple.documentation\/documentation\/Swift\/true], or is not implemented, then the second method, [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinder\/findIndicatorNeedsUpdate], instructing the client to carry out the replacement. Finally, [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinder\/validateAction(_:)], if implemented, is invoked to indicate that the replacement was completed.\n\nFor replace all actions, these methods will be called multiple times, starting from the last match and moving toward the first, in order to preserve the indexes of the matches which precede the current one.\n\n### The Text Finder Container\n\nIn order to display the find bar, a container for the find bar must be specified. The container is an object that conforms to the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinderBarContainer] protocol. You specify a find bar container using the following NSTextFinder class’s [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinder\/findBarContainer] property.\n\nWhen a new NSTextFinder instance is created and instructed to display the find bar, it will create a view for the find bar and assign that to the container via the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinderBarContainer] class’s [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinderBarContainer\/findBarView] property. The container then owns that view and should release it when the container is deallocated. The container should make the find bar visible when the container’s [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinderBarContainer\/isFindBarVisible] property is set to [doc:\/\/com.apple.documentation\/documentation\/Swift\/true]. The container should implement the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinderBarContainer\/findBarViewDidChangeHeight()] method so it can reposition the find bar when its height changes, usually in response to user action.\n\n### Implementation by AppKit Classes\n\nTwo AppKit classes already provide support for the `NSTextFinder` class, including: the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSScrollView] and [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextView] classes.\n\n#### Scroll View Support for the Find Bar\n\nThe [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSScrollView] class conforms to [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinderBarContainer] protocol in order to support the find bar for any document view searched by the find bar. The find bar can be positioned either above or below the document view by assigning one of the values of the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSScrollView\/FindBarPosition-swift.enum] constants to the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSScrollView\/findBarPosition-swift.property] property.\n\n#### Text View Support for the Find Bar\n\nThe [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextView] class also supports the find bar. The find bar can be enabled or disabled on a text view with the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextView\/usesFindBar] property.\n\nSince OS X v10.5, the `NSTextView` class has used an animated find indicator to give feedback to the user about a successful find action. The find indicator could be activated manually on an text view via the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextView\/showFindIndicator(for:)] method.\n\nTo provide this functionality for text finder clients in OS X v10.7, the `NSTextFinder` class shows the find indicator at the appropriate time automatically when performing a find. However, text finder needs to know where to show the indicator and it needs assistance in drawing the text contents of the find indicator. During incremental search the `NSTextFinder` class needs also to know the locations of all the visible matches so it can highlight them as well. The following method additions to the `NSTextFinderClient` protocol provide these capabilities: [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinderClient\/contentView(at:effectiveCharacterRange:)] and [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinderClient\/rects(forCharacterRange:)].\n\nThe [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinderClient\/contentView(at:effectiveCharacterRange:)] method is called to determine what view the content is displayed in, that is, over which the find indicator will be displayed. Since content may potentially be spread over multiple views (like the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSLayoutManager] class , which supports multiple text views), the method asks for the view at a given index, and the full range of the string that is contained by that view.\n\nIn the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinderClient\/rects(forCharacterRange:)] method, the client should determine and return the rectangles in which the content with the given range is displayed in its `contentView`. The given range is guaranteed not to span multiple content views. The returned rectangles tell the `NSTextFinder` instance where the matched range is found, so it can show the find indicator there.\n\nThe `NSTextFinder` and [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSView] classes will handle the find indicator correctly when the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinderBarContainer\/contentView()] is resized, moved, or removed from the view hierarchy. If your content view’s scrolling is done by an [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSScrollView] object, the find indicator will also be handled for you during scrolling. Beyond these cases, there may be some circumstances where the find indicator should be immediately cancelled and hidden, such as when the view’s content or selection is changed without the knowledge of the text finder . The find indicator can be cancelled using the `NSTextFinder` [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinder\/cancelFindIndicator()] method. If your document is not scrolled by `NSScrollView`, then you should set the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinder\/findIndicatorNeedsUpdate] property to [doc:\/\/com.apple.documentation\/documentation\/Swift\/true].\n\n`NSTextFinder` is responsible for drawing the yellow find indicator background bezel, but the view must provide the contents. `NSTextFinder` also sets up a drawing context and causes the content view to draw into it. There are two ways this can happen.\n\nIn OS X v10.7, the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextView] class also provides incremental search support. It is disabled by default, but can be enabled by setting the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextView\/isIncrementalSearchingEnabled] property to [doc:\/\/com.apple.documentation\/documentation\/Swift\/true]. Also, because incremental searching requires the find bar, [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextView\/usesFindBar] must be set to [doc:\/\/com.apple.documentation\/documentation\/Swift\/true] for incremental searching to be occur.",
  "platforms" : [
    "macOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/AppKit\/NSTextFinder\ncrawled: 2025-12-02T07:21:22Z\n---\n\n# NSTextFinder\n\n**Class**\n\nAn optional search-and-replace find interface inside a view, usually a scroll view.\n\n## Declaration\n\n```swift\nclass NSTextFinder\n```\n\n## Overview\n\nThe class serves as a controller for the standard Cocoa find bar. The `NSTextFinder` class interacts heavily with a `client` object which supports the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinderClient] protocol. The client object provides access to the content being searched and provides visual feedback for a search operation.\n\nAll menu items related to finding (Find…, Find Next, Find Previous, Use Selection for Find, etc.) should have the same action, [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSResponder\/performTextFinderAction(_:)], which gets sent down the responder chain in the standard method.\n\n\n\n### Implementing a Find Bar\n\nA responder of [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSResponder\/performTextFinderAction(_:)] is responsible for creating and owning an instance of `NSTextFinder`. Before any other messages are sent to the `NSTextFinder`, you should set its [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinder\/client] property to an object which implements the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinderClient] protocol.\n\nEach user interface item used for finding has a different tag value , which corresponds to the appropriate value in [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinder\/Action]. Upon receipt of the  [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSResponder\/performTextFinderAction(_:)] message, the responder should call the following on its `NSTextFinder` instance:\n\n```objc\n- (void)performAction:(NSTextFinderAction)action;\n```\n\nThis method will determine the desired action from the tag and make various callbacks to [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinder\/client] to perform that action. These callbacks are defined in the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinderClient] protocol.\n\nValidation occurs by a similar pattern. The responder should implement [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSUserInterfaceValidations\/validateUserInterfaceItem(_:)] and, when the item’s action is the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSResponder\/performTextFinderAction(_:)] method, it should pass the item’s tag to the following method and return the result:\n\n```objc\n- (BOOL)validateAction:(NSTextFinderAction)action;\n```\n\nThis method will invoke the required client methods to determine what the appropriate response should be. These callbacks are also defined in the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinderClient] protocol.\n\nWhen an action is performed, the text finder will ask its client for the string to search. There are two ways the client can provide this string. It can either implement the `string` method, and simply return an `NSString` instance, or it can implement the following methods: [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinderClient\/string(at:effectiveRange:endsWithSearchBoundary:)] and [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinderClient\/stringLength()].\n\nThese methods make it possible to use the text finder with data that cannot be easily or efficiently flattened into a single string. In the first method, the client should return the string which contains the character at the given index in as conceptual concatenation of all strings that are to be searched.\n\nFor example, if a client had the strings “The quick”, “brown fox” , “jumped over the lazy”, and “dog”, and a `NSTextFinder` instance requests the string at index 17, then the client should return “brown fox”. If all the strings were concatenated together, this would be the ‘x’ in “fox”. Additionally, the client should return, by-reference through the `outRange` parameter, the effective range of the string that is returned. In this example, the range of “brown fox” is {9, 9}, because, in the imagined concatenation, the substring starts at index 9 and is 9 characters long.\n\nIn some cases, it is not desirable for a match to be found which overlaps multiple strings returned by the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinderClient\/string(at:effectiveRange:endsWithSearchBoundary:)] method. For example, suppose a client has a list of names like “John Doe”, and “Jane Doe”, etc. Normally, if the string is concatenated together like so: “John Doe Jane Doe”, then a search for “Doe Jane” would succeed. To prevent this often undesirable behavior, the client should return [doc:\/\/com.apple.documentation\/documentation\/Swift\/true], by-reference, through the `outFlag` parameter, when returning each individual string. This indicates that there is a boundary between the current string and the next string that should not be crossed when searching for a match.\n\nOne of the two approaches (implementing the `string` method the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinderClient\/string(at:effectiveRange:endsWithSearchBoundary:)] and [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinderClient\/stringLength()] methods) must be implemented by the client or the `NSTextFinder` instance will not function. If all three methods are implemented, [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinderClient\/string(at:effectiveRange:endsWithSearchBoundary:)] will be used by default.\n\nThe text finder may require additional information from the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinder\/client] object to perform an action, or it may require the `client` to perform some parts of the action on its behalf. The  methods and properties described in [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinder#Text-Finder-Client-Implementation-Requirements] describes the hooks the text finder requires for each of the actions it supports. If the client does not implement one of these methods or properties, then the action that requires it will be disabled.\n\n#### Text Finder Client Implementation Requirements\n\nThe text finder’s client may implement the following properties for by the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinder\/validateAction(_:)] method: [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinderClient\/isSelectable], [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinderClient\/allowsMultipleSelection], and `editable`. If any of these properties is not implemented, a value of [doc:\/\/com.apple.documentation\/documentation\/Swift\/true] is assumed. Returning [doc:\/\/com.apple.documentation\/documentation\/Swift\/false] from any of these methods will disable the actions that require them. For more information about these properties see [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinderClient].\n\nThe following implementation’s are required by the text client to support the specified actions:\n\n- The [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinderClient] protocol must implement the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinderClient\/firstSelectedRange] property to support the following functionality: [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinder\/Action\/nextMatch], [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinder\/Action\/previousMatch], [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinder\/Action\/replace], [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinder\/Action\/replaceAndFind], and [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinder\/Action\/setSearchString] actions. The `client` implementation of [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinderClient\/firstSelectedRange] needs to return its first selected range, or {index, 0} to indicate the location of the insertion point if there is no selection.\n- The [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinderClient\/selectedRanges] property is required for the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinder\/Action\/replaceAllInSelection], [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinder\/Action\/selectAll], and [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinder\/Action\/selectAllInSelection] actions. The array should contain `NSRange` structures wrapped in `NSValue` instances.\n- The [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinderClient\/scrollRangeToVisible(_:)] method is used by many actions, but is not strictly required by any to perform correctly.\n- The client protocol’s [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinderClient\/shouldReplaceCharacters(inRanges:with:)], [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinderClient\/replaceCharacters(in:with:)] and [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinderClient\/didReplaceCharacters()] methods are used by the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinder\/Action\/replace], [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinder\/Action\/replaceAll], [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinder\/Action\/replaceAllInSelection], and [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinder\/Action\/replaceAndFind] actions. The NSTextFinder instance does not have the ability to directly make changes to the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinder\/client] content, so the `client` is responsible for performing replace operations in these methods.\n- Before a replace operation is performed, the `NSTextFinder` instance calls the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinderClient\/shouldReplaceCharacters(inRanges:with:)] method to determine if a replacement should take place. If it returns [doc:\/\/com.apple.documentation\/documentation\/Swift\/false], then the given range will not be replaced. If the method returns [doc:\/\/com.apple.documentation\/documentation\/Swift\/true], or is not implemented, then the `NSTextFinder` instance will call the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinderClient\/replaceCharacters(in:with:)] method, instructing the `client` to carry out the replacement. Finally, the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinderClient\/didReplaceCharacters()] method will be called, if implemented, to indicate that the replacement was completed. For [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinder\/Action\/replaceAll] actions, these methods may be called multiple times, starting from the end of the string and moving toward the beginning, in order to preserve the indexes of the matches which precede the current one.\n\n### Incremental Search Support\n\nA common feature used in conjunction with the find bar is incremental search. This feature allows users to find matches immediately as they are typing. In OS X v10.7, the text finder provides this feature for its clients with minimal additional API.\n\nIncremental searching can be enabled by setting the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinder\/isIncrementalSearchingEnabled] property [doc:\/\/com.apple.documentation\/documentation\/Swift\/true]. This property alone is sufficient to start searching incrementally.\n\nFor improved responsiveness, when a document is sufficiently long, the text finder will search the document in the background. To ensure thread-safety, a client using incremental search must call the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinder\/noteClientStringWillChange()] method before any changes are made to the string provided to the text finder.\n\nDuring incremental search, all visible matches are highlighted. If the `client` object that conforms to the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinderClient] protocol implements the read-only [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinderClient\/visibleCharacterRanges] property, then by default a gray overlay will appear over your find bar container’s content view with transparent areas for each match. This view should be a superview of all subviews reported by the text finder client. The `NSScrollView` class already implements this property, so you only need to implement this property when using a different container class.\n\nFinally, this mode also requires the same two [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinderClient] protocol methods that are used to display the find indicator: [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinderClient\/contentView(at:effectiveCharacterRange:)] and [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinderClient\/rects(forCharacterRange:)] be implemented. However, the implementation of these methods is identical for both purposes, so no additional work is required to support incremental search.\n\n### Replacing Text\n\nThe text replacement methods:[doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinder\/Action], [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinder\/findIndicatorNeedsUpdate], and [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinder\/validateAction(_:)] are used by the replace, replace all, replace all in section, and replace and find actions.\n\nBefore a replace operation is performed, the `NSTextFinder` instance calls the `client` object’s [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinder\/Action] method to determine if a replacement should take place. If it returns [doc:\/\/com.apple.documentation\/documentation\/Swift\/false], then the characters in the given ranges will not be replaced. If the method returns [doc:\/\/com.apple.documentation\/documentation\/Swift\/true], or is not implemented, then the second method, [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinder\/findIndicatorNeedsUpdate], instructing the client to carry out the replacement. Finally, [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinder\/validateAction(_:)], if implemented, is invoked to indicate that the replacement was completed.\n\nFor replace all actions, these methods will be called multiple times, starting from the last match and moving toward the first, in order to preserve the indexes of the matches which precede the current one.\n\n### The Text Finder Container\n\nIn order to display the find bar, a container for the find bar must be specified. The container is an object that conforms to the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinderBarContainer] protocol. You specify a find bar container using the following NSTextFinder class’s [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinder\/findBarContainer] property.\n\nWhen a new NSTextFinder instance is created and instructed to display the find bar, it will create a view for the find bar and assign that to the container via the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinderBarContainer] class’s [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinderBarContainer\/findBarView] property. The container then owns that view and should release it when the container is deallocated. The container should make the find bar visible when the container’s [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinderBarContainer\/isFindBarVisible] property is set to [doc:\/\/com.apple.documentation\/documentation\/Swift\/true]. The container should implement the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinderBarContainer\/findBarViewDidChangeHeight()] method so it can reposition the find bar when its height changes, usually in response to user action.\n\n\n\n### Implementation by AppKit Classes\n\nTwo AppKit classes already provide support for the `NSTextFinder` class, including: the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSScrollView] and [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextView] classes.\n\n#### Scroll View Support for the Find Bar\n\nThe [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSScrollView] class conforms to [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinderBarContainer] protocol in order to support the find bar for any document view searched by the find bar. The find bar can be positioned either above or below the document view by assigning one of the values of the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSScrollView\/FindBarPosition-swift.enum] constants to the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSScrollView\/findBarPosition-swift.property] property.\n\n\n\n#### Text View Support for the Find Bar\n\nThe [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextView] class also supports the find bar. The find bar can be enabled or disabled on a text view with the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextView\/usesFindBar] property.\n\nSince OS X v10.5, the `NSTextView` class has used an animated find indicator to give feedback to the user about a successful find action. The find indicator could be activated manually on an text view via the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextView\/showFindIndicator(for:)] method.\n\nTo provide this functionality for text finder clients in OS X v10.7, the `NSTextFinder` class shows the find indicator at the appropriate time automatically when performing a find. However, text finder needs to know where to show the indicator and it needs assistance in drawing the text contents of the find indicator. During incremental search the `NSTextFinder` class needs also to know the locations of all the visible matches so it can highlight them as well. The following method additions to the `NSTextFinderClient` protocol provide these capabilities: [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinderClient\/contentView(at:effectiveCharacterRange:)] and [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinderClient\/rects(forCharacterRange:)].\n\nThe [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinderClient\/contentView(at:effectiveCharacterRange:)] method is called to determine what view the content is displayed in, that is, over which the find indicator will be displayed. Since content may potentially be spread over multiple views (like the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSLayoutManager] class , which supports multiple text views), the method asks for the view at a given index, and the full range of the string that is contained by that view.\n\nIn the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinderClient\/rects(forCharacterRange:)] method, the client should determine and return the rectangles in which the content with the given range is displayed in its `contentView`. The given range is guaranteed not to span multiple content views. The returned rectangles tell the `NSTextFinder` instance where the matched range is found, so it can show the find indicator there.\n\nThe `NSTextFinder` and [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSView] classes will handle the find indicator correctly when the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinderBarContainer\/contentView()] is resized, moved, or removed from the view hierarchy. If your content view’s scrolling is done by an [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSScrollView] object, the find indicator will also be handled for you during scrolling. Beyond these cases, there may be some circumstances where the find indicator should be immediately cancelled and hidden, such as when the view’s content or selection is changed without the knowledge of the text finder . The find indicator can be cancelled using the `NSTextFinder` [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinder\/cancelFindIndicator()] method. If your document is not scrolled by `NSScrollView`, then you should set the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinder\/findIndicatorNeedsUpdate] property to [doc:\/\/com.apple.documentation\/documentation\/Swift\/true].\n\n`NSTextFinder` is responsible for drawing the yellow find indicator background bezel, but the view must provide the contents. `NSTextFinder` also sets up a drawing context and causes the content view to draw into it. There are two ways this can happen.\n\n- The `NSTextFinder` instance invokes the `client` object’s [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinderClient\/drawCharacters(in:forContentView:)] method, if implemented. The client should then draw the requested characters (or ask the containing view to draw the characters, which is provided as a convenience) at the origin of the current context. If the requested character range partially intersects a glyph range, the client may draw the entire glyph, if necessary for performance.\n- If [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinderClient\/drawCharacters(in:forContentView:)] method is not implemented, then the `NSTextFinder` instance uses the normal view drawing mechanisms. The `contentView` does not need take any additional action to make this happen\n\nIn OS X v10.7, the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextView] class also provides incremental search support. It is disabled by default, but can be enabled by setting the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextView\/isIncrementalSearchingEnabled] property to [doc:\/\/com.apple.documentation\/documentation\/Swift\/true]. Also, because incremental searching requires the find bar, [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextView\/usesFindBar] must be set to [doc:\/\/com.apple.documentation\/documentation\/Swift\/true] for incremental searching to be occur.\n\n## Initializing the Text Finder\n\n- **init()**: Initializes and returns a new `NSTextFinder` instance.\n\n## Validating and Performing Text Finding\n\n- **performAction(_:)**: Performs the specified text finding action.\n- **validateAction(_:)**: Allows validation of the find action before performing.\n- **cancelFindIndicator()**: Cancels the find indicator immediately.\n\n## Getting the Find Bar Container\n\n- **findBarContainer**: Specifies the find bar container.\n\n## Getting and Setting the Find Bar Client\n\n- **client**: The object that provides the target search string, find bar location, and feedback methods.\n\n## Noting Changes in the Original Content\n\n- **noteClientStringWillChange()**: Invoke this method when the searched content will change.\n\n## Updating the Find Indicator\n\n- **findIndicatorNeedsUpdate**: Invoke to specify that the find indicator needs updating when not contained within a scroll view.\n\n## Incremental Search Configuration\n\n- **drawIncrementalMatchHighlight(in:)**: Override this method to draw custom highlighting.\n- **incrementalMatchRanges**: Array of incremental search matches posted on the main queue, which have been found during a background search.\n- **isIncrementalSearchingEnabled**: Determines if incremental searching is enabled.\n- **incrementalSearchingShouldDimContentView**: Determines the type of incremental search feedback to be presented\n\n## Constants\n\n- **NSTextFinder.Action**: These constants specify the user interface item tags that correspond find action. These constants are passed to the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSResponder\/performTextFinderAction(_:)] method, the responder will call the appropriate method for the tag. That method will, in turn, determine the desired action and invoke the appropriate method in the `NSTextFinder` object’s `NSTextFinderClient` protocol.\n- **Text Finder Options For The Pasteboard**: The following keys are used for communicating `NSTextFinder` search options via pasteboard. Use the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSPasteboard\/PasteboardType\/textFinderOptions] type\n- **NSTextFinder.MatchingType**: The following constants indicate the type of search anchor an action should perform.\n\n## Initializers\n\n- **init(coder:)**\n\n## Search and Replace\n\n- **NSTextFinderBarContainer**: A protocol that provides a container in which the find bar is displayed.\n- **NSTextFinderClient**: A set of methods implemented by objects that support searching using the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinder] class and the in-window text find bar.\n\n## Inherits From\n\n- NSObject\n\n## Conforms To\n\n- CVarArg\n- CustomDebugStringConvertible\n- CustomStringConvertible\n- Equatable\n- Hashable\n- NSCoding\n- NSObjectProtocol\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Initializes and returns a new `NSTextFinder` instance.",
          "name" : "init()",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSTextFinder\/init()"
        }
      ],
      "title" : "Initializing the Text Finder"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Performs the specified text finding action.",
          "name" : "performAction(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSTextFinder\/performAction(_:)"
        },
        {
          "description" : "Allows validation of the find action before performing.",
          "name" : "validateAction(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSTextFinder\/validateAction(_:)"
        },
        {
          "description" : "Cancels the find indicator immediately.",
          "name" : "cancelFindIndicator()",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSTextFinder\/cancelFindIndicator()"
        }
      ],
      "title" : "Validating and Performing Text Finding"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Specifies the find bar container.",
          "name" : "findBarContainer",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSTextFinder\/findBarContainer"
        }
      ],
      "title" : "Getting the Find Bar Container"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "The object that provides the target search string, find bar location, and feedback methods.",
          "name" : "client",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSTextFinder\/client"
        }
      ],
      "title" : "Getting and Setting the Find Bar Client"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Invoke this method when the searched content will change.",
          "name" : "noteClientStringWillChange()",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSTextFinder\/noteClientStringWillChange()"
        }
      ],
      "title" : "Noting Changes in the Original Content"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Invoke to specify that the find indicator needs updating when not contained within a scroll view.",
          "name" : "findIndicatorNeedsUpdate",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSTextFinder\/findIndicatorNeedsUpdate"
        }
      ],
      "title" : "Updating the Find Indicator"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Override this method to draw custom highlighting.",
          "name" : "drawIncrementalMatchHighlight(in:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSTextFinder\/drawIncrementalMatchHighlight(in:)"
        },
        {
          "description" : "Array of incremental search matches posted on the main queue, which have been found during a background search.",
          "name" : "incrementalMatchRanges",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSTextFinder\/incrementalMatchRanges"
        },
        {
          "description" : "Determines if incremental searching is enabled.",
          "name" : "isIncrementalSearchingEnabled",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSTextFinder\/isIncrementalSearchingEnabled"
        },
        {
          "description" : "Determines the type of incremental search feedback to be presented",
          "name" : "incrementalSearchingShouldDimContentView",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSTextFinder\/incrementalSearchingShouldDimContentView"
        }
      ],
      "title" : "Incremental Search Configuration"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "These constants specify the user interface item tags that correspond find action. These constants are passed to the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSResponder\/performTextFinderAction(_:)] method, the responder will call the appropriate method for the tag. That method will, in turn, determine the desired action and invoke the appropriate method in the `NSTextFinder` object’s `NSTextFinderClient` protocol.",
          "name" : "NSTextFinder.Action",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSTextFinder\/Action"
        },
        {
          "description" : "The following keys are used for communicating `NSTextFinder` search options via pasteboard. Use the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSPasteboard\/PasteboardType\/textFinderOptions] type",
          "name" : "Text Finder Options For The Pasteboard",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/text-finder-options-for-the-pasteboard"
        },
        {
          "description" : "The following constants indicate the type of search anchor an action should perform.",
          "name" : "NSTextFinder.MatchingType",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSTextFinder\/MatchingType"
        }
      ],
      "title" : "Constants"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "",
          "name" : "init(coder:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSTextFinder\/init(coder:)"
        }
      ],
      "title" : "Initializers"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "A protocol that provides a container in which the find bar is displayed.",
          "name" : "NSTextFinderBarContainer",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSTextFinderBarContainer"
        },
        {
          "description" : "A set of methods implemented by objects that support searching using the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTextFinder] class and the in-window text find bar.",
          "name" : "NSTextFinderClient",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSTextFinderClient"
        }
      ],
      "title" : "Search and Replace"
    },
    {
      "content" : "",
      "items" : [
        {
          "name" : "NSObject"
        }
      ],
      "title" : "Inherits From"
    }
  ],
  "source" : "appleJSON",
  "title" : "NSTextFinder",
  "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSTextFinder"
}