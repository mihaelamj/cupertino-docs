{
  "abstract" : "Called by the typesetter just prior to storing the actual line fragment rectangle location in the layout manager.",
  "codeExamples" : [

  ],
  "contentHash" : "b31e14187ed5d3803a726905f00dfb8b631e5f98c33284e0d083add98e2db7d6",
  "crawledAt" : "2025-12-04T02:28:43Z",
  "declaration" : {
    "code" : "func willSetLineFragmentRect(_ lineRect: NSRectPointer, forGlyphRange glyphRange: NSRange, usedRect: NSRectPointer, baselineOffset: UnsafeMutablePointer<CGFloat>)",
    "language" : "swift"
  },
  "id" : "D491F06F-261D-4969-B706-14592F71AF5B",
  "kind" : "method",
  "language" : "swift",
  "module" : "AppKit",
  "overview" : "## Discussion\n\nCalled by the typesetter just prior to calling [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTypesetter\/setLineFragmentRect(_:forGlyphRange:usedRect:baselineOffset:)] which stores the actual line fragment rectangle location in the layout manager.\n\nA subclass can override this method to customize the text layout process. For example, it could change the shape of the line fragment rectangle. The subclass is responsible for ensuring that the modified rectangle remains valid (for example, that it lies within the text container).",
  "platforms" : [
    "macOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/AppKit\/NSTypesetter\/willSetLineFragmentRect(_:forGlyphRange:usedRect:baselineOffset:)\ncrawled: 2025-12-04T02:28:43Z\n---\n\n# willSetLineFragmentRect(_:forGlyphRange:usedRect:baselineOffset:)\n\n**Instance Method**\n\nCalled by the typesetter just prior to storing the actual line fragment rectangle location in the layout manager.\n\n## Declaration\n\n```swift\nfunc willSetLineFragmentRect(_ lineRect: NSRectPointer, forGlyphRange glyphRange: NSRange, usedRect: NSRectPointer, baselineOffset: UnsafeMutablePointer<CGFloat>)\n```\n\n## Parameters\n\n- **lineRect**: The rectangle in which the glyphs in `glyphRange` are laid out.\n- **glyphRange**: The range of the glyphs to lay out.\n- **usedRect**: The portion of `lineRect`, in the NSTextContainer object’s coordinate system, that actually contains glyphs or other marks that are drawn (including the text container’s line fragment padding). The `usedRect` must be equal to or contained within `lineRect`.\n- **baselineOffset**: The vertical distance in pixels from the line fragment origin to the baseline on which the glyphs align.\n\n## Discussion\n\nCalled by the typesetter just prior to calling [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSTypesetter\/setLineFragmentRect(_:forGlyphRange:usedRect:baselineOffset:)] which stores the actual line fragment rectangle location in the layout manager.\n\nA subclass can override this method to customize the text layout process. For example, it could change the shape of the line fragment rectangle. The subclass is responsible for ensuring that the modified rectangle remains valid (for example, that it lies within the text container).\n\n## Laying out glyphs\n\n- **layoutGlyphs(in:startingAtGlyphIndex:maxNumberOfLineFragments:nextGlyphIndex:)**: Lays out glyphs in the specified layout manager starting at a specified glyph.\n- **boundingBox(forControlGlyphAt:for:proposedLineFragment:glyphPosition:characterIndex:)**: Returns the bounding rectangle for the specified control glyph with the specified parameters.\n- **getLineFragmentRect(_:usedRect:forParagraphSeparatorGlyphRange:atProposedOrigin:)**: Calculates the line fragment rectangle and line fragment used rectangle for blank lines.\n- **getLineFragmentRect(_:usedRect:remaining:forStartingGlyphAt:proposedRect:lineSpacing:paragraphSpacingBefore:paragraphSpacingAfter:)**: Calculates line fragment rectangle, line fragment used rectangle, and remaining rectangle for a line fragment.\n- **hyphenCharacter(forGlyphAt:)**: Returns the hyphen character to be inserted after the specified glyph.\n- **hyphenationFactor(forGlyphAt:)**: Returns the hyphenation factor in effect at a specified location.\n- **shouldBreakLine(byHyphenatingBeforeCharacterAt:)**: Returns whether the line being laid out should be broken by hyphenating at the specified character.\n- **shouldBreakLine(byWordBeforeCharacterAt:)**: Returns whether the line being laid out should be broken by a word break at the specified character.\n- **setHardInvalidation(_:forGlyphRange:)**: Sets whether to force the layout manager to invalidate the specified portion of the glyph cache when invalidating layout.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Lays out glyphs in the specified layout manager starting at a specified glyph.",
          "name" : "layoutGlyphs(in:startingAtGlyphIndex:maxNumberOfLineFragments:nextGlyphIndex:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSTypesetter\/layoutGlyphs(in:startingAtGlyphIndex:maxNumberOfLineFragments:nextGlyphIndex:)"
        },
        {
          "description" : "Returns the bounding rectangle for the specified control glyph with the specified parameters.",
          "name" : "boundingBox(forControlGlyphAt:for:proposedLineFragment:glyphPosition:characterIndex:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSTypesetter\/boundingBox(forControlGlyphAt:for:proposedLineFragment:glyphPosition:characterIndex:)"
        },
        {
          "description" : "Calculates the line fragment rectangle and line fragment used rectangle for blank lines.",
          "name" : "getLineFragmentRect(_:usedRect:forParagraphSeparatorGlyphRange:atProposedOrigin:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSTypesetter\/getLineFragmentRect(_:usedRect:forParagraphSeparatorGlyphRange:atProposedOrigin:)"
        },
        {
          "description" : "Calculates line fragment rectangle, line fragment used rectangle, and remaining rectangle for a line fragment.",
          "name" : "getLineFragmentRect(_:usedRect:remaining:forStartingGlyphAt:proposedRect:lineSpacing:paragraphSpacingBefore:paragraphSpacingAfter:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSTypesetter\/getLineFragmentRect(_:usedRect:remaining:forStartingGlyphAt:proposedRect:lineSpacing:paragraphSpacingBefore:paragraphSpacingAfter:)"
        },
        {
          "description" : "Returns the hyphen character to be inserted after the specified glyph.",
          "name" : "hyphenCharacter(forGlyphAt:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSTypesetter\/hyphenCharacter(forGlyphAt:)"
        },
        {
          "description" : "Returns the hyphenation factor in effect at a specified location.",
          "name" : "hyphenationFactor(forGlyphAt:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSTypesetter\/hyphenationFactor(forGlyphAt:)"
        },
        {
          "description" : "Returns whether the line being laid out should be broken by hyphenating at the specified character.",
          "name" : "shouldBreakLine(byHyphenatingBeforeCharacterAt:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSTypesetter\/shouldBreakLine(byHyphenatingBeforeCharacterAt:)"
        },
        {
          "description" : "Returns whether the line being laid out should be broken by a word break at the specified character.",
          "name" : "shouldBreakLine(byWordBeforeCharacterAt:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSTypesetter\/shouldBreakLine(byWordBeforeCharacterAt:)"
        },
        {
          "description" : "Sets whether to force the layout manager to invalidate the specified portion of the glyph cache when invalidating layout.",
          "name" : "setHardInvalidation(_:forGlyphRange:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSTypesetter\/setHardInvalidation(_:forGlyphRange:)"
        }
      ],
      "title" : "Laying out glyphs"
    }
  ],
  "source" : "appleJSON",
  "title" : "willSetLineFragmentRect(_:forGlyphRange:usedRect:baselineOffset:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSTypesetter\/willSetLineFragmentRect(_:forGlyphRange:usedRect:baselineOffset:)"
}