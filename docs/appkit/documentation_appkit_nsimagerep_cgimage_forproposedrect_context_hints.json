{
  "abstract" : "Returns a Core Graphics image object that captures the drawing of the image.",
  "codeExamples" : [

  ],
  "contentHash" : "fae69487cd6e66c2fff9d4a3423e58dffb197707c05ac41636199ffce6371f5b",
  "crawledAt" : "2025-12-02T07:26:02Z",
  "declaration" : {
    "code" : "func cgImage(forProposedRect proposedDestRect: UnsafeMutablePointer<NSRect>?, context: NSGraphicsContext?, hints: [NSImageRep.HintKey : Any]?) -> CGImage?",
    "language" : "swift"
  },
  "id" : "F2A95628-2C3C-49C7-8B77-B7E82DB6B69B",
  "kind" : "method",
  "module" : "AppKit",
  "overview" : "## Return Value\n\nA [doc:\/\/com.apple.documentation\/documentation\/CoreGraphics\/CGImage]. This may be an existing [doc:\/\/com.apple.documentation\/documentation\/CoreGraphics\/CGImage] if one is available. If not, a new [doc:\/\/com.apple.documentation\/documentation\/CoreGraphics\/CGImage] is created.\n\n## Discussion\n\nAn [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSImage] is potentially resolution independent, and may have representations that allow it to draw well in many contexts. A [doc:\/\/com.apple.documentation\/documentation\/CoreGraphics\/CGImage] is more like a single pixel-based representation. This method produces a snapshot of how the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSImage] would draw if it was asked to draw in the proposed rectangle in the graphics context.\n\nAll input parameters are optional. They provide hints for how to choose among existing [doc:\/\/com.apple.documentation\/documentation\/CoreGraphics\/CGImage] objects, or how to create one if there isn’t already a [doc:\/\/com.apple.documentation\/documentation\/CoreGraphics\/CGImage] available. The parameters are only hints.\n\nThis method is intended as an override point for image representation subclasses that naturally have a [doc:\/\/com.apple.documentation\/documentation\/CoreGraphics\/CGImage] available. For example, [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSBitmapImageRep] overrides it to return the [doc:\/\/com.apple.documentation\/documentation\/CoreGraphics\/CGImage] that naturally backs the representation. You don’t need to override the method except possibly for performance, though. The [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSImageRep]-level implementation will produce a [doc:\/\/com.apple.documentation\/documentation\/CoreGraphics\/CGImage] by making a buffer and calling [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSImageRep\/draw()]. That’s likely to be the best possible implementation for reps that aren’t naturally [doc:\/\/com.apple.documentation\/documentation\/CoreGraphics\/CGImage]-backed. The [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSImageRep\/draw()] method remains the only method of [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSImageRep] that a subclasser really needs to override.",
  "platforms" : [
    "macOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/AppKit\/NSImageRep\/cgImage(forProposedRect:context:hints:)\ncrawled: 2025-12-02T07:26:02Z\n---\n\n# cgImage(forProposedRect:context:hints:)\n\n**Instance Method**\n\nReturns a Core Graphics image object that captures the drawing of the image.\n\n## Declaration\n\n```swift\nfunc cgImage(forProposedRect proposedDestRect: UnsafeMutablePointer<NSRect>?, context: NSGraphicsContext?, hints: [NSImageRep.HintKey : Any]?) -> CGImage?\n```\n\n## Parameters\n\n- **proposedDestRect**: On input, the proposed destination rectangle for drawing the image. If `nil`, it defaults to the smallest pixel-integral rectangle containing `{{0,0}, self.size}`. The `proposedDestRect` is in user space in the reference context.\n\nOn output, the `proposedDestRect` may have been altered. This is because a [doc:\/\/com.apple.documentation\/documentation\/CoreGraphics\/CGImage] is necessarily pixel-integral, while an [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSImage] is not. In order to produce a [doc:\/\/com.apple.documentation\/documentation\/CoreGraphics\/CGImage] for rect `(0.5, 0.5, 4.0, 4.0)` without distortion or double-antialiasing, we may have to produce a 5x5 `CGImage`, and also inflate the `proposedDestRect`. Drawing the `CGImage` in the out-value `proposedDestRect` is the same as drawing the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSImage] in the in-value of proposed rect.\n- **context**: A graphics context. Can be `nil`.\n- **hints**: An optional dictionary of hints that provide more context for selecting or generating the image. See [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSImageRep\/HintKey] for a summary of the possible key-value pairs.\n\n## Return Value\n\nA [doc:\/\/com.apple.documentation\/documentation\/CoreGraphics\/CGImage]. This may be an existing [doc:\/\/com.apple.documentation\/documentation\/CoreGraphics\/CGImage] if one is available. If not, a new [doc:\/\/com.apple.documentation\/documentation\/CoreGraphics\/CGImage] is created.\n\n## Discussion\n\nAn [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSImage] is potentially resolution independent, and may have representations that allow it to draw well in many contexts. A [doc:\/\/com.apple.documentation\/documentation\/CoreGraphics\/CGImage] is more like a single pixel-based representation. This method produces a snapshot of how the [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSImage] would draw if it was asked to draw in the proposed rectangle in the graphics context.\n\nAll input parameters are optional. They provide hints for how to choose among existing [doc:\/\/com.apple.documentation\/documentation\/CoreGraphics\/CGImage] objects, or how to create one if there isn’t already a [doc:\/\/com.apple.documentation\/documentation\/CoreGraphics\/CGImage] available. The parameters are only hints.\n\nThis method is intended as an override point for image representation subclasses that naturally have a [doc:\/\/com.apple.documentation\/documentation\/CoreGraphics\/CGImage] available. For example, [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSBitmapImageRep] overrides it to return the [doc:\/\/com.apple.documentation\/documentation\/CoreGraphics\/CGImage] that naturally backs the representation. You don’t need to override the method except possibly for performance, though. The [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSImageRep]-level implementation will produce a [doc:\/\/com.apple.documentation\/documentation\/CoreGraphics\/CGImage] by making a buffer and calling [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSImageRep\/draw()]. That’s likely to be the best possible implementation for reps that aren’t naturally [doc:\/\/com.apple.documentation\/documentation\/CoreGraphics\/CGImage]-backed. The [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSImageRep\/draw()] method remains the only method of [doc:\/\/com.apple.appkit\/documentation\/AppKit\/NSImageRep] that a subclasser really needs to override.\n\n",
  "sections" : [

  ],
  "source" : "appleJSON",
  "title" : "cgImage(forProposedRect:context:hints:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSImageRep\/cgImage(forProposedRect:context:hints:)"
}