{
  "abstract" : "Retrieve motion data that the system processed to remove environmental bias, such as the effects of gravity.",
  "codeExamples" : [
    {
      "code" : "func startDeviceMotion() {\n    if motion.isDeviceMotionAvailable {\n        self.motion.deviceMotionUpdateInterval = 1.0 \/ 50.0\n        self.motion.showsDeviceMovementDisplay = true\n        self.motion.startDeviceMotionUpdates(using: .xMagneticNorthZVertical)\n        \n        \/\/ Configure a timer to fetch the motion data.\n        self.timer = Timer(fire: Date(), interval: (1.0 \/ 50.0), repeats: true,\n                           block: { (timer) in\n                            if let data = self.motion.deviceMotion {\n                                \/\/ Get the attitude relative to the magnetic north reference frame.\n                                let x = data.attitude.pitch\n                                let y = data.attitude.roll\n                                let z = data.attitude.yaw\n                                \n                                \/\/ Use the motion data in your app.\n                            }\n        })\n        \n        \/\/ Add the timer to the current run loop.\n        RunLoop.current.add(self.timer!, forMode: RunLoop.Mode.default)\n    }\n}",
      "language" : "swift"
    },
    {
      "code" : "func startQueuedUpdates() {\n   if motion.isDeviceMotionAvailable {\n      self.motion.deviceMotionUpdateInterval = 1.0 \/ 60.0\n      self.motion.showsDeviceMovementDisplay = true\n      self.motion.startDeviceMotionUpdates(using: .xMagneticNorthZVertical, \n               to: self.queue, withHandler: { (data, error) in\n         \/\/ Make sure the data is valid before accessing it.\n         if let validData = data {\n            \/\/ Get the attitude relative to the magnetic north reference frame. \n            let roll = validData.attitude.roll\n            let pitch = validData.attitude.pitch\n            let yaw = validData.attitude.yaw\n\n            \/\/ Use the motion data in your app.\n         }\n      })\n   }\n}\n",
      "language" : "swift"
    }
  ],
  "contentHash" : "4e5f843751a409665b9467bf57b362c1a3956e7038e7d170e7397ab8e83bb5b7",
  "crawledAt" : "2025-12-04T21:41:27Z",
  "id" : "8C2B93B1-3B96-439A-879F-84A9DF2C7E12",
  "kind" : "article",
  "language" : "swift",
  "module" : "Core Motion",
  "overview" : "## Overview\n\nThe Core Motion framework gives you access to the raw data from many different types of hardware sensors, including accelerometers, gyroscopes, and magnetometers. While the raw data is useful, it sometimes contains additional information you don’t need. For example, the raw accelerometer data contains both the acceleration caused by gravity and by the device’s motion. To get only the device-specific acceleration, you must remove the gravitational acceleration from the raw data values. The removal of this data requires additional information and extra processing time.\n\nTo make it easier to get the data you want, the device-motion service processes the raw data and makes the following values available:\n\nThe device-motion service combines information from multiple sensors to provide the listed results. Device-motion services are available from [doc:\/\/com.apple.coremotion\/documentation\/CoreMotion\/CMMotionManager], [doc:\/\/com.apple.coremotion\/documentation\/CoreMotion\/CMHeadphoneMotionManager], and [doc:\/\/com.apple.coremotion\/documentation\/CoreMotion\/CMBatchedSensorManager]. If your app can’t function without accelerometer or gyroscope data, update your app’s list of required device capabilities to include that hardware. For more information about specifying required device capabilities, see [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Information-Property-List\/UIRequiredDeviceCapabilities].\n\n### Check for the availability of motion data\n\nDevice-motion data might be unavailable for a variety of reasons, so verify that the service is available before you try to start it. Check the value of the [doc:\/\/com.apple.coremotion\/documentation\/CoreMotion\/CMMotionManager\/isDeviceMotionAvailable] property of `CMMotionManager` and make sure it’s `true`. If it’s `false`, starting the service doesn’t deliver any data to your app.\n\n### Choose a frame of reference for interpreting attitude data\n\nThe attitude of a device refers to the amount of rotation around each of the device’s axes. The device-motion service reports attitude values relative to a known orientation of the device, also known as the device’s frame of reference. When you start the device-motion service, you specify which frame of reference you want Core Motion to use.\n\nThe default frame of reference is [doc:\/\/com.apple.coremotion\/documentation\/CoreMotion\/CMAttitudeReferenceFrame\/xArbitraryZVertical], which places the z-axis perpendicular to the ground and matches the x- and y-axes to the device’s current orientation in space. Use this option or the [doc:\/\/com.apple.coremotion\/documentation\/CoreMotion\/CMAttitudeReferenceFrame\/xArbitraryCorrectedZVertical] option to measure changes relative to the device’s initial starting position. For example, a golf swing analysis app might use this frame of reference to measure a person’s golf swing. For compass or navigation apps, choose the [doc:\/\/com.apple.coremotion\/documentation\/CoreMotion\/CMAttitudeReferenceFrame\/xMagneticNorthZVertical] or [doc:\/\/com.apple.coremotion\/documentation\/CoreMotion\/CMAttitudeReferenceFrame\/xTrueNorthZVertical] frames of reference, which report the device’s orientation relative to specific magnetic and true north, respectively.\n\nSpecify the reference frame you want when you start the device-motion service. The `CMMotionManager` object stores your chosen frame of reference in its [doc:\/\/com.apple.coremotion\/documentation\/CoreMotion\/CMMotionManager\/attitudeReferenceFrame] property, and makes it the default choice.\n\nWhen a device’s orientation matches the frame of reference’s orientation, the [doc:\/\/com.apple.coremotion\/documentation\/CoreMotion\/CMAttitude\/roll], [doc:\/\/com.apple.coremotion\/documentation\/CoreMotion\/CMAttitude\/pitch], and [doc:\/\/com.apple.coremotion\/documentation\/CoreMotion\/CMAttitude\/yaw] rotation values of a reported `CMAttitude` contain the value `0`. As a person rotates the device, the roll, pitch, and yaw values reflect the amount of rotation (in radians) relative to the frame of reference. The following figure shows how to interpret these values around each axis. Rotation values are in the range -π to π.\n\n\n\nFor information about the coordinate axes of different device types, see [doc:\/\/com.apple.coremotion\/documentation\/CoreMotion\/CMMotionManager] or [doc:\/\/com.apple.coremotion\/documentation\/CoreMotion\/CMHeadphoneMotionManager].\n\n### Start device-motion updates\n\nTo start collecting device-motion data, create a `CMMotionManager` object and call one of the appropriate methods. Core Motion offers two options for processing device-motion updates:\n\nBoth options require you to specify the frequency of updates from the system using the [doc:\/\/com.apple.coremotion\/documentation\/CoreMotion\/CMMotionManager\/deviceMotionUpdateInterval] property of your `CMMotionManager` type. The maximum update frequency is hardware dependent, but is usually at least 100 Hz. If you specify an update frequency greater than what the hardware supports, Core Motion uses the maximum frequency instead.\n\nThe following example configures the device-motion service to deliver updates 50 times per second, and to deliver attitude data relative to magnetic north. When starting device motion without a closure, it’s your responsibility to check the [doc:\/\/com.apple.coremotion\/documentation\/CoreMotion\/CMMotionManager\/deviceMotion] property of your `CMMotionManager` at regular intervals. This example sets up a timer to check the value of the property and apply the latest data to the app’s content:\n\nTo process a steady stream of events, start the device-motion services using an [doc:\/\/com.apple.documentation\/documentation\/Foundation\/OperationQueue] object and a closure of type [doc:\/\/com.apple.coremotion\/documentation\/CoreMotion\/CMDeviceMotionHandler]. Each time Core Motion receives a new data value, it runs your closure on the operation queue. Each new data value comes with a [doc:\/\/com.apple.coremotion\/documentation\/CoreMotion\/CMLogItem\/timestamp] value, which you can use to verify the timeliness of the data and discard data that’s older than a certain threshold. The following example uses an operation queue to process 60 updates per second:\n\n### Stop device-motion updates\n\nTo minimize the impact on a device’s battery life, always call the [doc:\/\/com.apple.coremotion\/documentation\/CoreMotion\/CMMotionManager\/stopDeviceMotionUpdates()] method of your [doc:\/\/com.apple.coremotion\/documentation\/CoreMotion\/CMMotionManager] object when you no longer need motion data. The device-motion service captures motion data using special hardware, and running this hardware consumes additional power. In particular, stop services:\n\nIf your app doesn’t require constant motion updates, start the device-motion service, fetch the data you need, and stop the service immediately. Don’t leave the service running any longer than necessary.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/CoreMotion\/getting-processed-device-motion-data\ncrawled: 2025-12-04T21:41:27Z\n---\n\n# Getting processed device-motion data\n\n**Article**\n\nRetrieve motion data that the system processed to remove environmental bias, such as the effects of gravity.\n\n## Overview\n\nThe Core Motion framework gives you access to the raw data from many different types of hardware sensors, including accelerometers, gyroscopes, and magnetometers. While the raw data is useful, it sometimes contains additional information you don’t need. For example, the raw accelerometer data contains both the acceleration caused by gravity and by the device’s motion. To get only the device-specific acceleration, you must remove the gravitational acceleration from the raw data values. The removal of this data requires additional information and extra processing time.\n\nTo make it easier to get the data you want, the device-motion service processes the raw data and makes the following values available:\n\n- The device’s attitude (or orientation) in three-dimensional space\n- The unbiased rotation rate of the device\n- The current gravity vector\n- The device-specific acceleration (without gravity)\n- The current magnetic field vector\n\nThe device-motion service combines information from multiple sensors to provide the listed results. Device-motion services are available from [doc:\/\/com.apple.coremotion\/documentation\/CoreMotion\/CMMotionManager], [doc:\/\/com.apple.coremotion\/documentation\/CoreMotion\/CMHeadphoneMotionManager], and [doc:\/\/com.apple.coremotion\/documentation\/CoreMotion\/CMBatchedSensorManager]. If your app can’t function without accelerometer or gyroscope data, update your app’s list of required device capabilities to include that hardware. For more information about specifying required device capabilities, see [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Information-Property-List\/UIRequiredDeviceCapabilities].\n\n### Check for the availability of motion data\n\nDevice-motion data might be unavailable for a variety of reasons, so verify that the service is available before you try to start it. Check the value of the [doc:\/\/com.apple.coremotion\/documentation\/CoreMotion\/CMMotionManager\/isDeviceMotionAvailable] property of `CMMotionManager` and make sure it’s `true`. If it’s `false`, starting the service doesn’t deliver any data to your app.\n\n\n\n### Choose a frame of reference for interpreting attitude data\n\nThe attitude of a device refers to the amount of rotation around each of the device’s axes. The device-motion service reports attitude values relative to a known orientation of the device, also known as the device’s frame of reference. When you start the device-motion service, you specify which frame of reference you want Core Motion to use.\n\nThe default frame of reference is [doc:\/\/com.apple.coremotion\/documentation\/CoreMotion\/CMAttitudeReferenceFrame\/xArbitraryZVertical], which places the z-axis perpendicular to the ground and matches the x- and y-axes to the device’s current orientation in space. Use this option or the [doc:\/\/com.apple.coremotion\/documentation\/CoreMotion\/CMAttitudeReferenceFrame\/xArbitraryCorrectedZVertical] option to measure changes relative to the device’s initial starting position. For example, a golf swing analysis app might use this frame of reference to measure a person’s golf swing. For compass or navigation apps, choose the [doc:\/\/com.apple.coremotion\/documentation\/CoreMotion\/CMAttitudeReferenceFrame\/xMagneticNorthZVertical] or [doc:\/\/com.apple.coremotion\/documentation\/CoreMotion\/CMAttitudeReferenceFrame\/xTrueNorthZVertical] frames of reference, which report the device’s orientation relative to specific magnetic and true north, respectively.\n\nSpecify the reference frame you want when you start the device-motion service. The `CMMotionManager` object stores your chosen frame of reference in its [doc:\/\/com.apple.coremotion\/documentation\/CoreMotion\/CMMotionManager\/attitudeReferenceFrame] property, and makes it the default choice.\n\nWhen a device’s orientation matches the frame of reference’s orientation, the [doc:\/\/com.apple.coremotion\/documentation\/CoreMotion\/CMAttitude\/roll], [doc:\/\/com.apple.coremotion\/documentation\/CoreMotion\/CMAttitude\/pitch], and [doc:\/\/com.apple.coremotion\/documentation\/CoreMotion\/CMAttitude\/yaw] rotation values of a reported `CMAttitude` contain the value `0`. As a person rotates the device, the roll, pitch, and yaw values reflect the amount of rotation (in radians) relative to the frame of reference. The following figure shows how to interpret these values around each axis. Rotation values are in the range -π to π.\n\n\n\nFor information about the coordinate axes of different device types, see [doc:\/\/com.apple.coremotion\/documentation\/CoreMotion\/CMMotionManager] or [doc:\/\/com.apple.coremotion\/documentation\/CoreMotion\/CMHeadphoneMotionManager].\n\n### Start device-motion updates\n\nTo start collecting device-motion data, create a `CMMotionManager` object and call one of the appropriate methods. Core Motion offers two options for processing device-motion updates:\n\n- Process a steady stream of updates using a closure.\n- Process updates when you want them.\n\nBoth options require you to specify the frequency of updates from the system using the [doc:\/\/com.apple.coremotion\/documentation\/CoreMotion\/CMMotionManager\/deviceMotionUpdateInterval] property of your `CMMotionManager` type. The maximum update frequency is hardware dependent, but is usually at least 100 Hz. If you specify an update frequency greater than what the hardware supports, Core Motion uses the maximum frequency instead.\n\nThe following example configures the device-motion service to deliver updates 50 times per second, and to deliver attitude data relative to magnetic north. When starting device motion without a closure, it’s your responsibility to check the [doc:\/\/com.apple.coremotion\/documentation\/CoreMotion\/CMMotionManager\/deviceMotion] property of your `CMMotionManager` at regular intervals. This example sets up a timer to check the value of the property and apply the latest data to the app’s content:\n\n```swift\nfunc startDeviceMotion() {\n    if motion.isDeviceMotionAvailable {\n        self.motion.deviceMotionUpdateInterval = 1.0 \/ 50.0\n        self.motion.showsDeviceMovementDisplay = true\n        self.motion.startDeviceMotionUpdates(using: .xMagneticNorthZVertical)\n        \n        \/\/ Configure a timer to fetch the motion data.\n        self.timer = Timer(fire: Date(), interval: (1.0 \/ 50.0), repeats: true,\n                           block: { (timer) in\n                            if let data = self.motion.deviceMotion {\n                                \/\/ Get the attitude relative to the magnetic north reference frame.\n                                let x = data.attitude.pitch\n                                let y = data.attitude.roll\n                                let z = data.attitude.yaw\n                                \n                                \/\/ Use the motion data in your app.\n                            }\n        })\n        \n        \/\/ Add the timer to the current run loop.\n        RunLoop.current.add(self.timer!, forMode: RunLoop.Mode.default)\n    }\n}\n```\n\nTo process a steady stream of events, start the device-motion services using an [doc:\/\/com.apple.documentation\/documentation\/Foundation\/OperationQueue] object and a closure of type [doc:\/\/com.apple.coremotion\/documentation\/CoreMotion\/CMDeviceMotionHandler]. Each time Core Motion receives a new data value, it runs your closure on the operation queue. Each new data value comes with a [doc:\/\/com.apple.coremotion\/documentation\/CoreMotion\/CMLogItem\/timestamp] value, which you can use to verify the timeliness of the data and discard data that’s older than a certain threshold. The following example uses an operation queue to process 60 updates per second:\n\n```swift\nfunc startQueuedUpdates() {\n   if motion.isDeviceMotionAvailable {\n      self.motion.deviceMotionUpdateInterval = 1.0 \/ 60.0\n      self.motion.showsDeviceMovementDisplay = true\n      self.motion.startDeviceMotionUpdates(using: .xMagneticNorthZVertical, \n               to: self.queue, withHandler: { (data, error) in\n         \/\/ Make sure the data is valid before accessing it.\n         if let validData = data {\n            \/\/ Get the attitude relative to the magnetic north reference frame. \n            let roll = validData.attitude.roll\n            let pitch = validData.attitude.pitch\n            let yaw = validData.attitude.yaw\n\n            \/\/ Use the motion data in your app.\n         }\n      })\n   }\n}\n\n```\n\n### Stop device-motion updates\n\nTo minimize the impact on a device’s battery life, always call the [doc:\/\/com.apple.coremotion\/documentation\/CoreMotion\/CMMotionManager\/stopDeviceMotionUpdates()] method of your [doc:\/\/com.apple.coremotion\/documentation\/CoreMotion\/CMMotionManager] object when you no longer need motion data. The device-motion service captures motion data using special hardware, and running this hardware consumes additional power. In particular, stop services:\n\n- When your app deactivates or enters the background\n- When the person stops interacting with the feature that requires motion data\n- As soon as your app has all the motion data it needs\n\nIf your app doesn’t require constant motion updates, start the device-motion service, fetch the data you need, and stop the service immediately. Don’t leave the service running any longer than necessary.\n\n## Device motion\n\n- **CMDeviceMotion**: Encapsulated measurements of the attitude, rotation rate, and acceleration of a device.\n- **CMAttitude**: The device’s orientation relative to a known frame of reference at a point in time.\n- **CMAttitudeReferenceFrame**: Constants that indicate the frame of reference for attitude-related motion data.\n- **CMHeadphoneMotionManager**: An object that starts and manages headphone motion services.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Encapsulated measurements of the attitude, rotation rate, and acceleration of a device.",
          "name" : "CMDeviceMotion",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreMotion\/CMDeviceMotion"
        },
        {
          "description" : "The device’s orientation relative to a known frame of reference at a point in time.",
          "name" : "CMAttitude",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreMotion\/CMAttitude"
        },
        {
          "description" : "Constants that indicate the frame of reference for attitude-related motion data.",
          "name" : "CMAttitudeReferenceFrame",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreMotion\/CMAttitudeReferenceFrame"
        },
        {
          "description" : "An object that starts and manages headphone motion services.",
          "name" : "CMHeadphoneMotionManager",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreMotion\/CMHeadphoneMotionManager"
        }
      ],
      "title" : "Device motion"
    }
  ],
  "source" : "appleJSON",
  "title" : "Getting processed device-motion data",
  "url" : "https:\/\/developer.apple.com\/documentation\/CoreMotion\/getting-processed-device-motion-data"
}