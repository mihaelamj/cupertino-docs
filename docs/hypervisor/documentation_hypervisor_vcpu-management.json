{
  "abstract" : "Create and run virtual CPUs, and manage CPU-specific registers and features.",
  "codeExamples" : [

  ],
  "contentHash" : "981b378b7fce7567a06a79b64a5eda7bb87211a6c0c9edf460fe4e213efbc3ad",
  "crawledAt" : "2025-12-02T14:20:16Z",
  "id" : "11ACAECC-241C-4C42-A096-00029317863A",
  "kind" : "collection",
  "module" : "Hypervisor",
  "overview" : "## Overview\n\nHypervisor creates Virtual CPUs with [doc:\/\/com.apple.hypervisor\/documentation\/Hypervisor\/hv_vcpu_create(_:_:)]. Call functions that operate on the vCPU from the same thread with the exception of [doc:\/\/com.apple.hypervisor\/documentation\/Hypervisor\/hv_vcpus_exit(_:_:)].\n\nEnter the vCPU by using [doc:\/\/com.apple.hypervisor\/documentation\/Hypervisor\/hv_vcpu_run(_:)]. The function runs until the guest traps or an other thread calls [doc:\/\/com.apple.hypervisor\/documentation\/Hypervisor\/hv_vcpus_exit(_:_:)]. On exit, [doc:\/\/com.apple.hypervisor\/documentation\/Hypervisor\/hv_vcpu_run(_:)] populates the [doc:\/\/com.apple.hypervisor\/documentation\/Hypervisor\/hv_vcpu_exit_t] with the exit reason.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/Hypervisor\/vcpu-management\ncrawled: 2025-12-02T14:20:16Z\n---\n\n# vCPU Management\n\n**API Collection**\n\nCreate and run virtual CPUs, and manage CPU-specific registers and features.\n\n## Overview\n\nHypervisor creates Virtual CPUs with [doc:\/\/com.apple.hypervisor\/documentation\/Hypervisor\/hv_vcpu_create(_:_:)]. Call functions that operate on the vCPU from the same thread with the exception of [doc:\/\/com.apple.hypervisor\/documentation\/Hypervisor\/hv_vcpus_exit(_:_:)].\n\nEnter the vCPU by using [doc:\/\/com.apple.hypervisor\/documentation\/Hypervisor\/hv_vcpu_run(_:)]. The function runs until the guest traps or an other thread calls [doc:\/\/com.apple.hypervisor\/documentation\/Hypervisor\/hv_vcpus_exit(_:_:)]. On exit, [doc:\/\/com.apple.hypervisor\/documentation\/Hypervisor\/hv_vcpu_run(_:)] populates the [doc:\/\/com.apple.hypervisor\/documentation\/Hypervisor\/hv_vcpu_exit_t] with the exit reason.\n\n\n\n## Configuration\n\n- **hv_vcpu_config_create()**: Creates a vCPU configuration object.\n- **hv_vcpu_config_get_feature_reg(_:_:_:)**: Gets the value of a feature register.\n- **hv_vcpu_config_get_ccsidr_el1_sys_reg_values(_:_:_:)**: Returns the Cache Size ID Register (CCSIDR_EL1) values for the vCPU configuration and cache type you specify.\n- **hv_vcpu_config_t**: The type that defines a vCPU configuration.\n- **OS_hv_vcpu_config**: Configuration for a virtual CPU.\n- **hv_feature_reg_t**: The type that defines feature registers.\n\n## Creation and destruction\n\n- **hv_vm_get_max_vcpu_count(_:)**: Returns the maximum number of vCPUs that the hypervisor supports.\n- **hv_vcpu_create(_:_:)**: Creates a vCPU instance for the current thread.\n- **hv_vcpu_destroy(_:)**: Destroys the vCPU instance associated with the current thread.\n- **hv_vcpu_t**: An opaque value that represents a vCPU instance.\n\n## Runtime\n\n- **hv_vcpu_run(_:)**: Starts the execution of a vCPU.\n- **hv_vcpus_exit(_:_:)**: Forces an immediate exit of a set of vCPUs of the VM.\n- **hv_vcpu_get_pending_interrupt(_:_:_:)**: Gets pending interrupts for a vCPU.\n- **hv_vcpu_set_pending_interrupt(_:_:_:)**: Sets pending interrupts for a vCPU.\n- **hv_vcpu_get_exec_time(_:_:)**: Returns, by reference, the cumulative execution time of a vCPU, in nanoseconds.\n- **hv_interrupt_type_t**: The type that defines the vCPU’s interrupts.\n- **Exits**: Describe virtual machine exit conditions.\n\n## General registers\n\n- **hv_vcpu_get_reg(_:_:_:)**: Gets the current value of a vCPU register.\n- **hv_vcpu_set_reg(_:_:_:)**: Sets the value of a vCPU register.\n- **hv_reg_t**: The type that defines general registers.\n\n## SIMD & Floating-point registers\n\n- **hv_vcpu_get_simd_fp_reg(_:_:_:)**: Gets the current value of a vCPU SIMD and FP register.\n- **hv_vcpu_set_simd_fp_reg(_:_:_:)**: Sets the value of a vCPU SIMD&FP register.\n- **hv_simd_fp_uchar16_t**: The value that represents an ARM SIMD and FP register.\n- **hv_simd_fp_reg_t**: The type that defines SIMD and floating-point registers.\n\n## System registers\n\n- **hv_vcpu_get_sys_reg(_:_:_:)**: Gets the current value of a vCPU system register.\n- **hv_vcpu_set_sys_reg(_:_:_:)**: Sets the value of a vCPU system register.\n- **hv_sys_reg_t**: The type of system registers.\n\n## Trap configuration\n\n- **hv_vcpu_get_trap_debug_exceptions(_:_:)**: Gets whether debug exceptions exit the guest.\n- **hv_vcpu_set_trap_debug_exceptions(_:_:)**: Sets whether debug exceptions exit the guest.\n- **hv_vcpu_get_trap_debug_reg_accesses(_:_:)**: Gets whether debug-register accesses exit the guest.\n- **hv_vcpu_set_trap_debug_reg_accesses(_:_:)**: Sets whether debug-register accesses exit the guest.\n\n## Resource management\n\n- **Memory management**: Map memory into the physical address space of the virtual machine.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Creates a vCPU configuration object.",
          "name" : "hv_vcpu_config_create()",
          "url" : "https:\/\/developer.apple.com\/documentation\/Hypervisor\/hv_vcpu_config_create()"
        },
        {
          "description" : "Gets the value of a feature register.",
          "name" : "hv_vcpu_config_get_feature_reg(_:_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Hypervisor\/hv_vcpu_config_get_feature_reg(_:_:_:)"
        },
        {
          "description" : "Returns the Cache Size ID Register (CCSIDR_EL1) values for the vCPU configuration and cache type you specify.",
          "name" : "hv_vcpu_config_get_ccsidr_el1_sys_reg_values(_:_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Hypervisor\/hv_vcpu_config_get_ccsidr_el1_sys_reg_values(_:_:_:)"
        },
        {
          "description" : "The type that defines a vCPU configuration.",
          "name" : "hv_vcpu_config_t",
          "url" : "https:\/\/developer.apple.com\/documentation\/Hypervisor\/hv_vcpu_config_t"
        },
        {
          "description" : "Configuration for a virtual CPU.",
          "name" : "OS_hv_vcpu_config",
          "url" : "https:\/\/developer.apple.com\/documentation\/Hypervisor\/OS_hv_vcpu_config"
        },
        {
          "description" : "The type that defines feature registers.",
          "name" : "hv_feature_reg_t",
          "url" : "https:\/\/developer.apple.com\/documentation\/Hypervisor\/hv_feature_reg_t"
        }
      ],
      "title" : "Configuration"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Returns the maximum number of vCPUs that the hypervisor supports.",
          "name" : "hv_vm_get_max_vcpu_count(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Hypervisor\/hv_vm_get_max_vcpu_count(_:)"
        },
        {
          "description" : "Creates a vCPU instance for the current thread.",
          "name" : "hv_vcpu_create(_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Hypervisor\/hv_vcpu_create(_:_:)"
        },
        {
          "description" : "Destroys the vCPU instance associated with the current thread.",
          "name" : "hv_vcpu_destroy(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Hypervisor\/hv_vcpu_destroy(_:)"
        },
        {
          "description" : "An opaque value that represents a vCPU instance.",
          "name" : "hv_vcpu_t",
          "url" : "https:\/\/developer.apple.com\/documentation\/Hypervisor\/hv_vcpu_t"
        }
      ],
      "title" : "Creation and destruction"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Starts the execution of a vCPU.",
          "name" : "hv_vcpu_run(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Hypervisor\/hv_vcpu_run(_:)"
        },
        {
          "description" : "Forces an immediate exit of a set of vCPUs of the VM.",
          "name" : "hv_vcpus_exit(_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Hypervisor\/hv_vcpus_exit(_:_:)"
        },
        {
          "description" : "Gets pending interrupts for a vCPU.",
          "name" : "hv_vcpu_get_pending_interrupt(_:_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Hypervisor\/hv_vcpu_get_pending_interrupt(_:_:_:)"
        },
        {
          "description" : "Sets pending interrupts for a vCPU.",
          "name" : "hv_vcpu_set_pending_interrupt(_:_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Hypervisor\/hv_vcpu_set_pending_interrupt(_:_:_:)"
        },
        {
          "description" : "Returns, by reference, the cumulative execution time of a vCPU, in nanoseconds.",
          "name" : "hv_vcpu_get_exec_time(_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Hypervisor\/hv_vcpu_get_exec_time(_:_:)"
        },
        {
          "description" : "The type that defines the vCPU’s interrupts.",
          "name" : "hv_interrupt_type_t",
          "url" : "https:\/\/developer.apple.com\/documentation\/Hypervisor\/hv_interrupt_type_t"
        },
        {
          "description" : "Describe virtual machine exit conditions.",
          "name" : "Exits",
          "url" : "https:\/\/developer.apple.com\/documentation\/Hypervisor\/exits"
        }
      ],
      "title" : "Runtime"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Gets the current value of a vCPU register.",
          "name" : "hv_vcpu_get_reg(_:_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Hypervisor\/hv_vcpu_get_reg(_:_:_:)"
        },
        {
          "description" : "Sets the value of a vCPU register.",
          "name" : "hv_vcpu_set_reg(_:_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Hypervisor\/hv_vcpu_set_reg(_:_:_:)"
        },
        {
          "description" : "The type that defines general registers.",
          "name" : "hv_reg_t",
          "url" : "https:\/\/developer.apple.com\/documentation\/Hypervisor\/hv_reg_t"
        }
      ],
      "title" : "General registers"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Gets the current value of a vCPU SIMD and FP register.",
          "name" : "hv_vcpu_get_simd_fp_reg(_:_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Hypervisor\/hv_vcpu_get_simd_fp_reg(_:_:_:)"
        },
        {
          "description" : "Sets the value of a vCPU SIMD&FP register.",
          "name" : "hv_vcpu_set_simd_fp_reg(_:_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Hypervisor\/hv_vcpu_set_simd_fp_reg(_:_:_:)"
        },
        {
          "description" : "The value that represents an ARM SIMD and FP register.",
          "name" : "hv_simd_fp_uchar16_t",
          "url" : "https:\/\/developer.apple.com\/documentation\/Hypervisor\/hv_simd_fp_uchar16_t"
        },
        {
          "description" : "The type that defines SIMD and floating-point registers.",
          "name" : "hv_simd_fp_reg_t",
          "url" : "https:\/\/developer.apple.com\/documentation\/Hypervisor\/hv_simd_fp_reg_t"
        }
      ],
      "title" : "SIMD & Floating-point registers"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Gets the current value of a vCPU system register.",
          "name" : "hv_vcpu_get_sys_reg(_:_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Hypervisor\/hv_vcpu_get_sys_reg(_:_:_:)"
        },
        {
          "description" : "Sets the value of a vCPU system register.",
          "name" : "hv_vcpu_set_sys_reg(_:_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Hypervisor\/hv_vcpu_set_sys_reg(_:_:_:)"
        },
        {
          "description" : "The type of system registers.",
          "name" : "hv_sys_reg_t",
          "url" : "https:\/\/developer.apple.com\/documentation\/Hypervisor\/hv_sys_reg_t"
        }
      ],
      "title" : "System registers"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Gets whether debug exceptions exit the guest.",
          "name" : "hv_vcpu_get_trap_debug_exceptions(_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Hypervisor\/hv_vcpu_get_trap_debug_exceptions(_:_:)"
        },
        {
          "description" : "Sets whether debug exceptions exit the guest.",
          "name" : "hv_vcpu_set_trap_debug_exceptions(_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Hypervisor\/hv_vcpu_set_trap_debug_exceptions(_:_:)"
        },
        {
          "description" : "Gets whether debug-register accesses exit the guest.",
          "name" : "hv_vcpu_get_trap_debug_reg_accesses(_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Hypervisor\/hv_vcpu_get_trap_debug_reg_accesses(_:_:)"
        },
        {
          "description" : "Sets whether debug-register accesses exit the guest.",
          "name" : "hv_vcpu_set_trap_debug_reg_accesses(_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Hypervisor\/hv_vcpu_set_trap_debug_reg_accesses(_:_:)"
        }
      ],
      "title" : "Trap configuration"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Map memory into the physical address space of the virtual machine.",
          "name" : "Memory management",
          "url" : "https:\/\/developer.apple.com\/documentation\/Hypervisor\/memory-management"
        }
      ],
      "title" : "Resource management"
    }
  ],
  "source" : "appleJSON",
  "title" : "vCPU Management",
  "url" : "https:\/\/developer.apple.com\/documentation\/Hypervisor\/vcpu-management"
}