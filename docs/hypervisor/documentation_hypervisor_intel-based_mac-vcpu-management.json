{
  "abstract" : "Create and run virtual CPUs, and manage CPU-specific registers and features.",
  "codeExamples" : [

  ],
  "contentHash" : "67c49cced17ebcfe296feccbae495c8a9f0ee072f4be38018d6563890e111b94",
  "crawledAt" : "2025-12-05T18:41:04Z",
  "id" : "5947C87C-E24C-4CAC-B8DD-9F9B758440B3",
  "kind" : "collection",
  "language" : "swift",
  "module" : "Hypervisor",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/hypervisor\/intel-based_mac-vcpu-management\ncrawled: 2025-12-05T18:41:04Z\n---\n\n# vCPU Management\n\n**API Collection**\n\nCreate and run virtual CPUs, and manage CPU-specific registers and features.\n\n## Creation and destruction\n\n- **hv_vcpu_create(_:_:)**: Creates a vCPU instance for the current thread.\n- **hv_vcpu_destroy(_:)**: Destroys the vCPU instance associated with the current thread.\n- **hv_vcpu_options_t**: Options for creating a new vCPU instance.\n- **vCPU Creation Behavior**: An enumeration representing the default creation options for virtual CPUs.\n- **hv_vcpuid_t**: The type that describes a vCPU ID.\n\n## Runtime\n\n- **hv_vcpu_run_until(_:_:)**: Executes a vCPU until it reaches the deadline defined in absolute time units you provide.\n- **hv_vcpu_interrupt(_:_:)**: Forces the vCPU instances you provide to immediately exit the VM.\n- **hv_vcpu_invalidate_tlb(_:)**: Invalidates the translation look-aside buffer (TLB) of a vCPU.\n- **hv_vcpu_flush(_:)**: Flushes the cached state of a vCPU.\n- **hv_vcpu_get_exec_time(_:_:)**: Returns, by reference, the cumulative execution time of a vCPU, in nanoseconds.\n- **hv_vcpu_run(_:)**: Starts the execution of a vCPU.\n- **Execution Deadlines**: An enumeration that describes available execution deadlines available to vCPUs.\n\n## Synchronization\n\n- **hv_vm_sync_tsc(_:)**: Synchronizes guest timestamp counters (TSC) across all vCPUs.\n\n## Model-Specific Registers\n\n- **Extending vCPU Capabilities Using Model-Specific Registers**: Configure specific client performance monitoring and enable other vCPU capabilities using Model-Specific Registers.\n- **hv_vcpu_read_msr(_:_:_:)**: Returns, by reference, the current value of a Model-Specific Register (MSR) of a vCPU.\n- **hv_vcpu_write_msr(_:_:_:)**: Sets the value of a Model-Specific Register (MSR) of a vCPU.\n- **hv_vcpu_enable_native_msr(_:_:_:)**: Enables or disables a Model-Specific Register (MSR) that the VM uses natively.\n- **hv_vcpu_set_msr_access(_:_:_:)**: Controls the guest access of a managed Model-Specific Register (MSR).\n- **hv_vcpu_enable_managed_msr(_:_:_:)**: Enables the guest access of a managed Model-Specific Register (MSR).\n- **hv_msr_flags_t**: The type representing the native Model-Specific Register (MSR) permissions.\n- **Model-Specific Registers**\n- **MSR Permissions**: An enumeration that describes possible Model-Specific Register (MSR) permisssions.\n\n## CPU Registers\n\n- **hv_vcpu_read_register(_:_:_:)**: Returns, by reference, the current value of an architectural x86 register of a vCPU.\n- **hv_vcpu_write_register(_:_:_:)**: Sets the value of an architectural x86 register of a vCPU.\n- **hv_x86_reg_t**: The type that defines x86 architectural registers.\n\n## Floating Point (FP) State\n\n- **hv_vcpu_read_fpstate(_:_:_:)**: Returns, by reference, the current architectural x86 floating point and SIMD state of a vCPU.\n- **hv_vcpu_write_fpstate(_:_:_:)**: Sets the architectural x86 floating point and SIMD state of a vCPU.\n\n## Memory Affinity\n\n- **hv_vcpu_set_space(_:_:)**: Associates the vCPU instance with an allocated address space.\n\n## Resource management\n\n- **Memory Management**: Map memory into the physical address space of the virtual machine, and allocate additional memory for the current task.\n- **Virtual Machine Control Structure (VMCS)**: Read and write to fields of the virtual machine control structure.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Creates a vCPU instance for the current thread.",
          "name" : "hv_vcpu_create(_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Hypervisor\/hv_vcpu_create(_:_:)"
        },
        {
          "description" : "Destroys the vCPU instance associated with the current thread.",
          "name" : "hv_vcpu_destroy(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Hypervisor\/hv_vcpu_destroy(_:)"
        },
        {
          "description" : "Options for creating a new vCPU instance.",
          "name" : "hv_vcpu_options_t",
          "url" : "https:\/\/developer.apple.com\/documentation\/Hypervisor\/hv_vcpu_options_t"
        },
        {
          "description" : "An enumeration representing the default creation options for virtual CPUs.",
          "name" : "vCPU Creation Behavior",
          "url" : "https:\/\/developer.apple.com\/documentation\/Hypervisor\/1447317-vcpu-creation-behavior"
        },
        {
          "description" : "The type that describes a vCPU ID.",
          "name" : "hv_vcpuid_t",
          "url" : "https:\/\/developer.apple.com\/documentation\/Hypervisor\/hv_vcpuid_t"
        }
      ],
      "title" : "Creation and destruction"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Executes a vCPU until it reaches the deadline defined in absolute time units you provide.",
          "name" : "hv_vcpu_run_until(_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Hypervisor\/hv_vcpu_run_until(_:_:)"
        },
        {
          "description" : "Forces the vCPU instances you provide to immediately exit the VM.",
          "name" : "hv_vcpu_interrupt(_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Hypervisor\/hv_vcpu_interrupt(_:_:)"
        },
        {
          "description" : "Invalidates the translation look-aside buffer (TLB) of a vCPU.",
          "name" : "hv_vcpu_invalidate_tlb(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Hypervisor\/hv_vcpu_invalidate_tlb(_:)"
        },
        {
          "description" : "Flushes the cached state of a vCPU.",
          "name" : "hv_vcpu_flush(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Hypervisor\/hv_vcpu_flush(_:)"
        },
        {
          "description" : "Returns, by reference, the cumulative execution time of a vCPU, in nanoseconds.",
          "name" : "hv_vcpu_get_exec_time(_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Hypervisor\/hv_vcpu_get_exec_time(_:_:)"
        },
        {
          "description" : "Starts the execution of a vCPU.",
          "name" : "hv_vcpu_run(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Hypervisor\/hv_vcpu_run(_:)"
        },
        {
          "description" : "An enumeration that describes available execution deadlines available to vCPUs.",
          "name" : "Execution Deadlines",
          "url" : "https:\/\/developer.apple.com\/documentation\/Hypervisor\/3553338-execution-deadlines"
        }
      ],
      "title" : "Runtime"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Synchronizes guest timestamp counters (TSC) across all vCPUs.",
          "name" : "hv_vm_sync_tsc(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Hypervisor\/hv_vm_sync_tsc(_:)"
        }
      ],
      "title" : "Synchronization"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Configure specific client performance monitoring and enable other vCPU capabilities using Model-Specific Registers.",
          "name" : "Extending vCPU Capabilities Using Model-Specific Registers",
          "url" : "https:\/\/developer.apple.com\/documentation\/Hypervisor\/extending-vcpu-capabilities-using-model-specific-registers"
        },
        {
          "description" : "Returns, by reference, the current value of a Model-Specific Register (MSR) of a vCPU.",
          "name" : "hv_vcpu_read_msr(_:_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Hypervisor\/hv_vcpu_read_msr(_:_:_:)"
        },
        {
          "description" : "Sets the value of a Model-Specific Register (MSR) of a vCPU.",
          "name" : "hv_vcpu_write_msr(_:_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Hypervisor\/hv_vcpu_write_msr(_:_:_:)"
        },
        {
          "description" : "Enables or disables a Model-Specific Register (MSR) that the VM uses natively.",
          "name" : "hv_vcpu_enable_native_msr(_:_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Hypervisor\/hv_vcpu_enable_native_msr(_:_:_:)"
        },
        {
          "description" : "Controls the guest access of a managed Model-Specific Register (MSR).",
          "name" : "hv_vcpu_set_msr_access(_:_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Hypervisor\/hv_vcpu_set_msr_access(_:_:_:)"
        },
        {
          "description" : "Enables the guest access of a managed Model-Specific Register (MSR).",
          "name" : "hv_vcpu_enable_managed_msr(_:_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Hypervisor\/hv_vcpu_enable_managed_msr(_:_:_:)"
        },
        {
          "description" : "The type representing the native Model-Specific Register (MSR) permissions.",
          "name" : "hv_msr_flags_t",
          "url" : "https:\/\/developer.apple.com\/documentation\/Hypervisor\/hv_msr_flags_t"
        },
        {
          "description" : "",
          "name" : "Model-Specific Registers",
          "url" : "https:\/\/developer.apple.com\/documentation\/Hypervisor\/3727856-model-specific-registers"
        },
        {
          "description" : "An enumeration that describes possible Model-Specific Register (MSR) permisssions.",
          "name" : "MSR Permissions",
          "url" : "https:\/\/developer.apple.com\/documentation\/Hypervisor\/3567078-msr_permissions-enum"
        }
      ],
      "title" : "Model-Specific Registers"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Returns, by reference, the current value of an architectural x86 register of a vCPU.",
          "name" : "hv_vcpu_read_register(_:_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Hypervisor\/hv_vcpu_read_register(_:_:_:)"
        },
        {
          "description" : "Sets the value of an architectural x86 register of a vCPU.",
          "name" : "hv_vcpu_write_register(_:_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Hypervisor\/hv_vcpu_write_register(_:_:_:)"
        },
        {
          "description" : "The type that defines x86 architectural registers.",
          "name" : "hv_x86_reg_t",
          "url" : "https:\/\/developer.apple.com\/documentation\/Hypervisor\/hv_x86_reg_t"
        }
      ],
      "title" : "CPU Registers"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Returns, by reference, the current architectural x86 floating point and SIMD state of a vCPU.",
          "name" : "hv_vcpu_read_fpstate(_:_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Hypervisor\/hv_vcpu_read_fpstate(_:_:_:)"
        },
        {
          "description" : "Sets the architectural x86 floating point and SIMD state of a vCPU.",
          "name" : "hv_vcpu_write_fpstate(_:_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Hypervisor\/hv_vcpu_write_fpstate(_:_:_:)"
        }
      ],
      "title" : "Floating Point (FP) State"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Associates the vCPU instance with an allocated address space.",
          "name" : "hv_vcpu_set_space(_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Hypervisor\/hv_vcpu_set_space(_:_:)"
        }
      ],
      "title" : "Memory Affinity"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Map memory into the physical address space of the virtual machine, and allocate additional memory for the current task.",
          "name" : "Memory Management",
          "url" : "https:\/\/developer.apple.com\/documentation\/Hypervisor\/intel-based_mac-memory-management"
        },
        {
          "description" : "Read and write to fields of the virtual machine control structure.",
          "name" : "Virtual Machine Control Structure (VMCS)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Hypervisor\/virtual-machine-control-structure-vmcs"
        }
      ],
      "title" : "Resource management"
    }
  ],
  "source" : "appleJSON",
  "title" : "vCPU Management",
  "url" : "https:\/\/developer.apple.com\/documentation\/hypervisor\/intel-based_mac-vcpu-management"
}