{
  "abstract" : "A storage device attachment backed by a Network Block Device (NBD) client.",
  "codeExamples" : [

  ],
  "conformsTo" : [
    "CVarArg",
    "CustomDebugStringConvertible",
    "CustomStringConvertible",
    "Equatable",
    "Hashable",
    "NSObjectProtocol"
  ],
  "contentHash" : "13684f6e9b9ff3c0ff637e7ee020a8f1159abffdbf4c17bd20259f503f744402",
  "crawledAt" : "2025-12-02T06:54:42Z",
  "declaration" : {
    "code" : "class VZNetworkBlockDeviceStorageDeviceAttachment",
    "language" : "swift"
  },
  "id" : "84DE7D90-6CDD-40DD-A53C-FAAA02DAE17D",
  "kind" : "class",
  "module" : "Virtualization",
  "overview" : "## Overview\n\nThis storage device attachment provides a Network Block Device (NBD) client implementation. The NBD client connects to an NBD server referred to by an NBD Uniform Resource Indicator (URI), represented as an URL in this API. The NBD server runs outside of and isn’t controlled by the Virtualization framework. The NBD client forwards the guest’s I\/O operations to the NBD server, which handles the I\/O operations.\n\nThe NBD client attempts to connect to the NBD server referred to by the URL used when you started the VM with [doc:\/\/com.apple.virtualization\/documentation\/Virtualization\/VZVirtualMachine\/start()]. However, it’s important to note that a connection attempt isn’t made when the framework initializes the attachment object.\n\nReconnection attempts take place throughout the life cycle of the VM when the NBD client encounters a recoverable error such as connection timeout and unexpected connection errors. The NBD client disconnects from the server when the VM shuts down.\n\nUsing this attachment requires the app to have the [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Entitlements\/com.apple.security.network.client] entitlement because this attachment opens an outgoing network connection.\n\nTo create a device that uses an NBD service, first initialize a `VZNetworkBlockDeviceStorageDeviceAttachment` with the URI of an NBD server, then use the attachment to configure a [doc:\/\/com.apple.virtualization\/documentation\/Virtualization\/VZStorageDeviceConfiguration] as shown in the example below (the attachment works with any subclass of [doc:\/\/com.apple.virtualization\/documentation\/Virtualization\/VZStorageDeviceConfiguration], not just [doc:\/\/com.apple.virtualization\/documentation\/Virtualization\/VZVirtioBlockDeviceConfiguration]):\n\nFor more information about Network Block Devices, see the [https:\/\/github.com\/NetworkBlockDevice\/nbd\/blob\/master\/doc\/proto.md] on GitHub.\n\nFor more information about the NBD URL format, see the [https:\/\/github.com\/NetworkBlockDevice\/nbd\/blob\/master\/doc\/uri.md] on GitHub.",
  "platforms" : [
    "macOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/Virtualization\/VZNetworkBlockDeviceStorageDeviceAttachment\ncrawled: 2025-12-02T06:54:42Z\n---\n\n# VZNetworkBlockDeviceStorageDeviceAttachment\n\n**Class**\n\nA storage device attachment backed by a Network Block Device (NBD) client.\n\n## Declaration\n\n```swift\nclass VZNetworkBlockDeviceStorageDeviceAttachment\n```\n\n## Overview\n\nThis storage device attachment provides a Network Block Device (NBD) client implementation. The NBD client connects to an NBD server referred to by an NBD Uniform Resource Indicator (URI), represented as an URL in this API. The NBD server runs outside of and isn’t controlled by the Virtualization framework. The NBD client forwards the guest’s I\/O operations to the NBD server, which handles the I\/O operations.\n\nThe NBD client attempts to connect to the NBD server referred to by the URL used when you started the VM with [doc:\/\/com.apple.virtualization\/documentation\/Virtualization\/VZVirtualMachine\/start()]. However, it’s important to note that a connection attempt isn’t made when the framework initializes the attachment object.\n\nReconnection attempts take place throughout the life cycle of the VM when the NBD client encounters a recoverable error such as connection timeout and unexpected connection errors. The NBD client disconnects from the server when the VM shuts down.\n\nUsing this attachment requires the app to have the [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Entitlements\/com.apple.security.network.client] entitlement because this attachment opens an outgoing network connection.\n\nTo create a device that uses an NBD service, first initialize a `VZNetworkBlockDeviceStorageDeviceAttachment` with the URI of an NBD server, then use the attachment to configure a [doc:\/\/com.apple.virtualization\/documentation\/Virtualization\/VZStorageDeviceConfiguration] as shown in the example below (the attachment works with any subclass of [doc:\/\/com.apple.virtualization\/documentation\/Virtualization\/VZStorageDeviceConfiguration], not just [doc:\/\/com.apple.virtualization\/documentation\/Virtualization\/VZVirtioBlockDeviceConfiguration]):\n\n\n\nFor more information about Network Block Devices, see the [https:\/\/github.com\/NetworkBlockDevice\/nbd\/blob\/master\/doc\/proto.md] on GitHub.\n\nFor more information about the NBD URL format, see the [https:\/\/github.com\/NetworkBlockDevice\/nbd\/blob\/master\/doc\/uri.md] on GitHub.\n\n## Creating network block device attachments\n\n- **init(url:)**: Creates a new network block device (NBD) storage attachment from an NDB Uniform Resource Indicator (URI) represented as a URL that you provide.\n- **init(url:timeout:isForcedReadOnly:synchronizationMode:)**: Creates a new network block device storage attachment from an NBD Uniform Resource Indicator (URI) represented as a URL, timeout value, and read-only and synchronization modes that you provide.\n\n## Validating a network block device’s URL\n\n- **validate(_:)**: Checks if the URL is a valid network block device URL.\n\n## Getting information about the attachment point\n\n- **isForcedReadOnly**: Returns a Boolean value that indicates whether the underlying disk attachment network is in a read-only state.\n- **synchronizationMode**: The mode in which the NBD client synchronizes data with the NBD server.\n- **timeout**: The timeout value in seconds for the connection between the client and server.\n- **url**: The URL that refers to the NBD server to which the NBD client will connect.\n\n## Observing changes to the network block device\n\n- **delegate**: The object that receives messages about changes to the network block device attachment.\n- **VZNetworkBlockDeviceStorageDeviceAttachmentDelegate**: Methods you implement to respond to changes to a network block device attachment.\n\n## Attachment points\n\n- **VZDiskBlockDeviceStorageDeviceAttachment**: A storage device attachment that uses a disk to store data.\n- **VZDiskImageStorageDeviceAttachment**: A device that stores content in a disk image.\n- **VZStorageDeviceAttachment**: The common behaviors for storage devices in the guest system.\n\n## Inherits From\n\n- VZStorageDeviceAttachment\n\n## Conforms To\n\n- CVarArg\n- CustomDebugStringConvertible\n- CustomStringConvertible\n- Equatable\n- Hashable\n- NSObjectProtocol\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Creates a new network block device (NBD) storage attachment from an NDB Uniform Resource Indicator (URI) represented as a URL that you provide.",
          "name" : "init(url:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Virtualization\/VZNetworkBlockDeviceStorageDeviceAttachment\/init(url:)"
        },
        {
          "description" : "Creates a new network block device storage attachment from an NBD Uniform Resource Indicator (URI) represented as a URL, timeout value, and read-only and synchronization modes that you provide.",
          "name" : "init(url:timeout:isForcedReadOnly:synchronizationMode:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Virtualization\/VZNetworkBlockDeviceStorageDeviceAttachment\/init(url:timeout:isForcedReadOnly:synchronizationMode:)"
        }
      ],
      "title" : "Creating network block device attachments"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Checks if the URL is a valid network block device URL.",
          "name" : "validate(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Virtualization\/VZNetworkBlockDeviceStorageDeviceAttachment\/validate(_:)"
        }
      ],
      "title" : "Validating a network block device’s URL"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Returns a Boolean value that indicates whether the underlying disk attachment network is in a read-only state.",
          "name" : "isForcedReadOnly",
          "url" : "https:\/\/developer.apple.com\/documentation\/Virtualization\/VZNetworkBlockDeviceStorageDeviceAttachment\/isForcedReadOnly"
        },
        {
          "description" : "The mode in which the NBD client synchronizes data with the NBD server.",
          "name" : "synchronizationMode",
          "url" : "https:\/\/developer.apple.com\/documentation\/Virtualization\/VZNetworkBlockDeviceStorageDeviceAttachment\/synchronizationMode"
        },
        {
          "description" : "The timeout value in seconds for the connection between the client and server.",
          "name" : "timeout",
          "url" : "https:\/\/developer.apple.com\/documentation\/Virtualization\/VZNetworkBlockDeviceStorageDeviceAttachment\/timeout"
        },
        {
          "description" : "The URL that refers to the NBD server to which the NBD client will connect.",
          "name" : "url",
          "url" : "https:\/\/developer.apple.com\/documentation\/Virtualization\/VZNetworkBlockDeviceStorageDeviceAttachment\/url"
        }
      ],
      "title" : "Getting information about the attachment point"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "The object that receives messages about changes to the network block device attachment.",
          "name" : "delegate",
          "url" : "https:\/\/developer.apple.com\/documentation\/Virtualization\/VZNetworkBlockDeviceStorageDeviceAttachment\/delegate"
        },
        {
          "description" : "Methods you implement to respond to changes to a network block device attachment.",
          "name" : "VZNetworkBlockDeviceStorageDeviceAttachmentDelegate",
          "url" : "https:\/\/developer.apple.com\/documentation\/Virtualization\/VZNetworkBlockDeviceStorageDeviceAttachmentDelegate"
        }
      ],
      "title" : "Observing changes to the network block device"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "A storage device attachment that uses a disk to store data.",
          "name" : "VZDiskBlockDeviceStorageDeviceAttachment",
          "url" : "https:\/\/developer.apple.com\/documentation\/Virtualization\/VZDiskBlockDeviceStorageDeviceAttachment"
        },
        {
          "description" : "A device that stores content in a disk image.",
          "name" : "VZDiskImageStorageDeviceAttachment",
          "url" : "https:\/\/developer.apple.com\/documentation\/Virtualization\/VZDiskImageStorageDeviceAttachment"
        },
        {
          "description" : "The common behaviors for storage devices in the guest system.",
          "name" : "VZStorageDeviceAttachment",
          "url" : "https:\/\/developer.apple.com\/documentation\/Virtualization\/VZStorageDeviceAttachment"
        }
      ],
      "title" : "Attachment points"
    },
    {
      "content" : "",
      "items" : [
        {
          "name" : "VZStorageDeviceAttachment"
        }
      ],
      "title" : "Inherits From"
    }
  ],
  "source" : "appleJSON",
  "title" : "VZNetworkBlockDeviceStorageDeviceAttachment",
  "url" : "https:\/\/developer.apple.com\/documentation\/Virtualization\/VZNetworkBlockDeviceStorageDeviceAttachment"
}