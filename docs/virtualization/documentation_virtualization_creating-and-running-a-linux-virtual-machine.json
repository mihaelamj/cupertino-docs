{
  "abstract" : "Design and run custom Linux guests on Apple silicon or Intel-based Mac Computers.",
  "codeExamples" : [

  ],
  "contentHash" : "fa36d5af098c51f8dde3d5c70305686c032388c7fb183ce8879b63482be555f7",
  "crawledAt" : "2025-12-04T03:24:21Z",
  "id" : "13C79C28-F5CD-4C18-B577-2BBBA98073A1",
  "kind" : "article",
  "language" : "swift",
  "module" : "Virtualization",
  "overview" : "## Overview\n\nRunning a Linux virtual machine (VM) is an additive process that starts with selecting a Linux distribution and obtaining Linux kernel and RAM disk images, and ends with instantiating and running the Linux VM on the user’s computer.\n\nThere many Linux distributions to choose from, select one that both meets your app’s needs in terms of device and application support, and supports ARM64 or 64-bit Intel-based CPUs. You’ll also need to decide how much of the host computer’s CPU resources and memory to dedicate to the VM in order to configure a [doc:\/\/com.apple.virtualization\/documentation\/Virtualization\/VZVirtualMachineConfiguration]. Unless your VM is solving self-contained computing problems, it’s likely your VM needs to interact with the user, access the network, and so on, so you’ll want to add devices to the VM to make this possible.\n\nFinally, after creating a suitable [doc:\/\/com.apple.virtualization\/documentation\/Virtualization\/VZVirtualMachineConfiguration], you’ll use a [doc:\/\/com.apple.virtualization\/documentation\/Virtualization\/VZLinuxBootLoader] to launch your VM and a [doc:\/\/com.apple.virtualization\/documentation\/Virtualization\/VZVirtualMachine] instance to control it.\n\n### Obtain the Kernel and RAM Disk Images\n\nYou can obtain images for many Linux distributions, including [https:\/\/cloud-images.ubuntu.com\/releases\/hirsute\/release\/unpacked\/]. Most Linux distributions provide downloadable kernel and RAM disk images that can run on Mac computers; however, you’ll need to download images for your specific CPU:\n\nIf your app is universal, you’ll need to obtain images for both Apple silicon and Intel-based Mac computers in order to be able to run the appropriate Linux VM on the respective Apple silicon or Intel-based Mac computer.\n\nSome Linux distributions store kernel images in a compressed format, sometimes indicated by a `.gz` filename extension. If the image doesn’t have a file extension, you can determine the file’s compression status using the `file` command. After determining the file format for the image, add the appropriate filename extension. For example, if the output shows the file format as “gzip compressed data,” add the `.gz` extension to the image, and then use the `gzip` or `gunzip` command to unpack the image. Running `file` against the unpacked image reveals details about the kernel image you’re verifying.\n\nYou can include the Linux kernel and RAM disk as resources in your Xcode project for use in your app, or implement a custom solution that allows the user to download and save images over the network.\n\n### Set Up the Linux VM Configuration\n\nConfigure a [doc:\/\/com.apple.virtualization\/documentation\/Virtualization\/VZVirtualMachineConfiguration] with the number of CPUs and amount of memory you want to use with your VM:\n\n### Add Devices to Your VM\n\nNext, you’ll need to decide what devices your Linux VM needs. Because you can’t change or add devices to a running VM, consider what devices you’ll need to support your app’s use cases and add them to the VM’s configuration. For example, if you need:\n\nThe example below adds a serial console, and sound input and output devices to the VM’s configuration:\n\nFor more information on devices that Linux guests can support, see the Devices section on the [doc:\/\/com.apple.virtualization\/documentation\/Virtualization] framework.\n\n### Create a Boot Loader\n\nCreate an instance of a [doc:\/\/com.apple.virtualization\/documentation\/Virtualization\/VZLinuxBootLoader] on the `VZVirtualMachineConfiguration` with a Linux kernel and a RAM disk that you load from locations on disk:\n\n### Instantiate and Run the Linux VM\n\nInstantiate a [doc:\/\/com.apple.virtualization\/documentation\/Virtualization\/VZVirtualMachine] from the `VZVirtualMachineConfiguration` that you use to start, stop, and control your Linux guest:",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/virtualization\/creating-and-running-a-linux-virtual-machine\ncrawled: 2025-12-04T03:24:21Z\n---\n\n# Creating and Running a Linux Virtual Machine\n\n**Article**\n\nDesign and run custom Linux guests on Apple silicon or Intel-based Mac Computers.\n\n## Overview\n\nRunning a Linux virtual machine (VM) is an additive process that starts with selecting a Linux distribution and obtaining Linux kernel and RAM disk images, and ends with instantiating and running the Linux VM on the user’s computer.\n\nThere many Linux distributions to choose from, select one that both meets your app’s needs in terms of device and application support, and supports ARM64 or 64-bit Intel-based CPUs. You’ll also need to decide how much of the host computer’s CPU resources and memory to dedicate to the VM in order to configure a [doc:\/\/com.apple.virtualization\/documentation\/Virtualization\/VZVirtualMachineConfiguration]. Unless your VM is solving self-contained computing problems, it’s likely your VM needs to interact with the user, access the network, and so on, so you’ll want to add devices to the VM to make this possible.\n\nFinally, after creating a suitable [doc:\/\/com.apple.virtualization\/documentation\/Virtualization\/VZVirtualMachineConfiguration], you’ll use a [doc:\/\/com.apple.virtualization\/documentation\/Virtualization\/VZLinuxBootLoader] to launch your VM and a [doc:\/\/com.apple.virtualization\/documentation\/Virtualization\/VZVirtualMachine] instance to control it.\n\n### Obtain the Kernel and RAM Disk Images\n\nYou can obtain images for many Linux distributions, including [https:\/\/cloud-images.ubuntu.com\/releases\/hirsute\/release\/unpacked\/]. Most Linux distributions provide downloadable kernel and RAM disk images that can run on Mac computers; however, you’ll need to download images for your specific CPU:\n\n- For Apple silicon Mac computers, download ARM 64-bit images.\n- For Intel-based Mac computers, download AMD64 images.\n\nIf your app is universal, you’ll need to obtain images for both Apple silicon and Intel-based Mac computers in order to be able to run the appropriate Linux VM on the respective Apple silicon or Intel-based Mac computer.\n\n\n\nSome Linux distributions store kernel images in a compressed format, sometimes indicated by a `.gz` filename extension. If the image doesn’t have a file extension, you can determine the file’s compression status using the `file` command. After determining the file format for the image, add the appropriate filename extension. For example, if the output shows the file format as “gzip compressed data,” add the `.gz` extension to the image, and then use the `gzip` or `gunzip` command to unpack the image. Running `file` against the unpacked image reveals details about the kernel image you’re verifying.\n\nYou can include the Linux kernel and RAM disk as resources in your Xcode project for use in your app, or implement a custom solution that allows the user to download and save images over the network.\n\n### Set Up the Linux VM Configuration\n\nConfigure a [doc:\/\/com.apple.virtualization\/documentation\/Virtualization\/VZVirtualMachineConfiguration] with the number of CPUs and amount of memory you want to use with your VM:\n\n\n\n### Add Devices to Your VM\n\nNext, you’ll need to decide what devices your Linux VM needs. Because you can’t change or add devices to a running VM, consider what devices you’ll need to support your app’s use cases and add them to the VM’s configuration. For example, if you need:\n\n- To connect to network services from your VM, add a [doc:\/\/com.apple.virtualization\/documentation\/Virtualization\/VZVirtioNetworkDeviceConfiguration].\n- A source of entropy, add a [doc:\/\/com.apple.virtualization\/documentation\/Virtualization\/VZVirtioEntropyDeviceConfiguration].\n- Audio devices, add [doc:\/\/com.apple.virtualization\/documentation\/Virtualization\/VZVirtioSoundDeviceOutputStreamConfiguration], [doc:\/\/com.apple.virtualization\/documentation\/Virtualization\/VZVirtioSoundDeviceOutputStreamConfiguration], and their associated stream sources and device configurations.\n\nThe example below adds a serial console, and sound input and output devices to the VM’s configuration:\n\n\n\nFor more information on devices that Linux guests can support, see the Devices section on the [doc:\/\/com.apple.virtualization\/documentation\/Virtualization] framework.\n\n### Create a Boot Loader\n\nCreate an instance of a [doc:\/\/com.apple.virtualization\/documentation\/Virtualization\/VZLinuxBootLoader] on the `VZVirtualMachineConfiguration` with a Linux kernel and a RAM disk that you load from locations on disk:\n\n\n\n### Instantiate and Run the Linux VM\n\nInstantiate a [doc:\/\/com.apple.virtualization\/documentation\/Virtualization\/VZVirtualMachine] from the `VZVirtualMachineConfiguration` that you use to start, stop, and control your Linux guest:\n\n\n\n## Virtual machine setup\n\n- **Running macOS in a virtual machine on Apple silicon**: Install and run macOS in a virtual machine using the Virtualization framework.\n- **Running Linux in a Virtual Machine**: Run a Linux operating system on your Mac using the Virtualization framework.\n- **Running GUI Linux in a virtual machine on a Mac**: Install and run GUI Linux in a virtual machine using the Virtualization framework.\n- **Installing macOS on a Virtual Machine**: Download a macOS restore image and install it in a new VM.\n- **Virtualize macOS on a Mac**: Configure and run macOS guests on Apple silicon.\n- **Virtualize Linux on a Mac**: Configure and run Linux guests on Apple silicon and Intel-based Mac computers.\n- **Running Intel Binaries in Linux VMs with Rosetta**: Run x86_64 Linux binaries under ARM Linux on Apple silicon.\n- **Accelerating the performance of Rosetta**: Improve Rosetta performance by adding support for the total store ordering (TSO) memory model to your Linux kernel.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Install and run macOS in a virtual machine using the Virtualization framework.",
          "name" : "Running macOS in a virtual machine on Apple silicon",
          "url" : "https:\/\/developer.apple.com\/documentation\/Virtualization\/running-macos-in-a-virtual-machine-on-apple-silicon"
        },
        {
          "description" : "Run a Linux operating system on your Mac using the Virtualization framework.",
          "name" : "Running Linux in a Virtual Machine",
          "url" : "https:\/\/developer.apple.com\/documentation\/Virtualization\/running-linux-in-a-virtual-machine"
        },
        {
          "description" : "Install and run GUI Linux in a virtual machine using the Virtualization framework.",
          "name" : "Running GUI Linux in a virtual machine on a Mac",
          "url" : "https:\/\/developer.apple.com\/documentation\/Virtualization\/running-gui-linux-in-a-virtual-machine-on-a-mac"
        },
        {
          "description" : "Download a macOS restore image and install it in a new VM.",
          "name" : "Installing macOS on a Virtual Machine",
          "url" : "https:\/\/developer.apple.com\/documentation\/Virtualization\/installing-macos-on-a-virtual-machine"
        },
        {
          "description" : "Configure and run macOS guests on Apple silicon.",
          "name" : "Virtualize macOS on a Mac",
          "url" : "https:\/\/developer.apple.com\/documentation\/Virtualization\/virtualize-macos-on-a-mac"
        },
        {
          "description" : "Configure and run Linux guests on Apple silicon and Intel-based Mac computers.",
          "name" : "Virtualize Linux on a Mac",
          "url" : "https:\/\/developer.apple.com\/documentation\/Virtualization\/virtualize-linux-on-a-mac"
        },
        {
          "description" : "Run x86_64 Linux binaries under ARM Linux on Apple silicon.",
          "name" : "Running Intel Binaries in Linux VMs with Rosetta",
          "url" : "https:\/\/developer.apple.com\/documentation\/Virtualization\/running-intel-binaries-in-linux-vms-with-rosetta"
        },
        {
          "description" : "Improve Rosetta performance by adding support for the total store ordering (TSO) memory model to your Linux kernel.",
          "name" : "Accelerating the performance of Rosetta",
          "url" : "https:\/\/developer.apple.com\/documentation\/Virtualization\/accelerating-the-performance-of-rosetta"
        }
      ],
      "title" : "Virtual machine setup"
    }
  ],
  "source" : "appleJSON",
  "title" : "Creating and Running a Linux Virtual Machine",
  "url" : "https:\/\/developer.apple.com\/documentation\/virtualization\/creating-and-running-a-linux-virtual-machine"
}