{
  "abstract" : "A device that stores content in a disk image.",
  "codeExamples" : [
    {
      "code" : "diskutil image create blank --fs none --format FORMAT --size SIZE IMAGE_PATH"
    },
    {
      "code" : "diskutil image create blank --fs none --format RAW --size SIZE IMAGE_PATH"
    },
    {
      "code" : "diskutil image create blank --fs none --format ASIF --size SIZE IMAGE_PATH"
    }
  ],
  "conformsTo" : [
    "CVarArg",
    "CustomDebugStringConvertible",
    "CustomStringConvertible",
    "Equatable",
    "Hashable",
    "NSObjectProtocol"
  ],
  "contentHash" : "b96d90358d491d7f8d5fdf27d04a0222399dc0e8008a32503622acb9387e8e0a",
  "crawledAt" : "2025-12-04T01:52:32Z",
  "declaration" : {
    "code" : "class VZDiskImageStorageDeviceAttachment",
    "language" : "swift"
  },
  "id" : "8C0C3746-3DCD-4872-8E71-C04D971E6E05",
  "kind" : "class",
  "language" : "swift",
  "module" : "Virtualization",
  "overview" : "## Overview\n\nUse a [doc:\/\/com.apple.virtualization\/documentation\/Virtualization\/VZDiskImageStorageDeviceAttachment] object to manage the storage for a disk in a virtual machine (VM). The guest operating system sees the storage as a disk, and when the guest operating system writes files to the disk, the virtual machine stores the files in the disk image you provide.\n\nThe virtualization framework supports two disk image formats:\n\n## Create the disk image\n\nCreate disk images using `diskutil`, a command-line utility you can access through the Terminal app. The `diskutil` utility performs a number of functions. The command uses a specific structure that tells the app what function it’s performing, including many arguments documented in its online manual page documents. For more information, see the `diskutil` manual page by using the command `man diskutil` in Terminal.\n\nThe command to creates disk image files you use with VMs starts with `diskutil image create blank`, followed by three required arguments that describe the structure, size, and location of the disk image. The general format of the command follows the pattern shown here:\n\nUse these parameters to specify the configuration of the disk image:\n\nTo create a RAW disk image in the file system of the host computer, open Terminal and run the following command, replacing the placeholder values with your own, for example:\n\nA best practice is to give disk images a common and easily recognizable file extension, such as `.img`; for example `VM_Image.img`.\n\nTo create an ASIF image, replace `RAW` with `ASIF`, as shown here:\n\nYou can execute `diskutil` commands under app control to create disk images programmatically.\n\nYou can also create `ASIF` or `RAW` disk images interactively using Disk Utility, a utility app that Apple provides with macOS. To create volumes with Disk Utility, open the app, then select File > New Image > Blank Image. Configure the form by selecting the disk format (either `ASIF` or `RAW`), volume size, and location for the new volume, and then click Save. For more information on using Disk Utility, see [https:\/\/support.apple.com\/guide\/disk-utility\/welcome\/mac].\n\nAlternatively, you can create a raw disk image programmatically using the UNIX `open()` and `truncate()` standard library functions as shown here:\n\n### Initialize the disk image\n\nAfter creating the disk image, you use it to initialize a VM’s [doc:\/\/com.apple.virtualization\/documentation\/Virtualization\/VZDiskImageStorageDeviceAttachment] object. Use the attachment object to configure the [doc:\/\/com.apple.virtualization\/documentation\/Virtualization\/VZVirtioBlockDeviceConfiguration] object that you add to your virtual machine’s configuration, as shown here:",
  "platforms" : [
    "macOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/Virtualization\/VZDiskImageStorageDeviceAttachment\ncrawled: 2025-12-04T01:52:32Z\n---\n\n# VZDiskImageStorageDeviceAttachment\n\n**Class**\n\nA device that stores content in a disk image.\n\n## Declaration\n\n```swift\nclass VZDiskImageStorageDeviceAttachment\n```\n\n## Overview\n\nUse a [doc:\/\/com.apple.virtualization\/documentation\/Virtualization\/VZDiskImageStorageDeviceAttachment] object to manage the storage for a disk in a virtual machine (VM). The guest operating system sees the storage as a disk, and when the guest operating system writes files to the disk, the virtual machine stores the files in the disk image you provide.\n\nThe virtualization framework supports two disk image formats:\n\n\n\n## Create the disk image\n\nCreate disk images using `diskutil`, a command-line utility you can access through the Terminal app. The `diskutil` utility performs a number of functions. The command uses a specific structure that tells the app what function it’s performing, including many arguments documented in its online manual page documents. For more information, see the `diskutil` manual page by using the command `man diskutil` in Terminal.\n\nThe command to creates disk image files you use with VMs starts with `diskutil image create blank`, followed by three required arguments that describe the structure, size, and location of the disk image. The general format of the command follows the pattern shown here:\n\n```\ndiskutil image create blank --fs none --format FORMAT --size SIZE IMAGE_PATH\n```\n\nUse these parameters to specify the configuration of the disk image:\n\n\n\n\n\nTo create a RAW disk image in the file system of the host computer, open Terminal and run the following command, replacing the placeholder values with your own, for example:\n\n```\ndiskutil image create blank --fs none --format RAW --size SIZE IMAGE_PATH\n```\n\nA best practice is to give disk images a common and easily recognizable file extension, such as `.img`; for example `VM_Image.img`.\n\nTo create an ASIF image, replace `RAW` with `ASIF`, as shown here:\n\n```\ndiskutil image create blank --fs none --format ASIF --size SIZE IMAGE_PATH\n```\n\nYou can execute `diskutil` commands under app control to create disk images programmatically.\n\nYou can also create `ASIF` or `RAW` disk images interactively using Disk Utility, a utility app that Apple provides with macOS. To create volumes with Disk Utility, open the app, then select File > New Image > Blank Image. Configure the form by selecting the disk format (either `ASIF` or `RAW`), volume size, and location for the new volume, and then click Save. For more information on using Disk Utility, see [https:\/\/support.apple.com\/guide\/disk-utility\/welcome\/mac].\n\nAlternatively, you can create a raw disk image programmatically using the UNIX `open()` and `truncate()` standard library functions as shown here:\n\n\n\n### Initialize the disk image\n\nAfter creating the disk image, you use it to initialize a VM’s [doc:\/\/com.apple.virtualization\/documentation\/Virtualization\/VZDiskImageStorageDeviceAttachment] object. Use the attachment object to configure the [doc:\/\/com.apple.virtualization\/documentation\/Virtualization\/VZVirtioBlockDeviceConfiguration] object that you add to your virtual machine’s configuration, as shown here:\n\n\n\n## Creating the attachment point\n\n- **init(url:readOnly:)**: Creates the attachment object from the specified disk image.\n- **init(url:readOnly:cachingMode:synchronizationMode:)**: Initialize the attachment from a local file URL.\n\n## Getting the disk image details\n\n- **url**: The URL of the underlying disk image.\n- **isReadOnly**: A Boolean value that indicates whether the underlying disk image is read-only.\n- **cachingMode**: The current cacheing mode for the virtual disk image.\n- **synchronizationMode**: The mode in which the disk image synchronizes data with the underlying storage device.\n\n## Attachment points\n\n- **VZDiskBlockDeviceStorageDeviceAttachment**: A storage device attachment that uses a disk to store data.\n- **VZNetworkBlockDeviceStorageDeviceAttachment**: A storage device attachment backed by a Network Block Device (NBD) client.\n- **VZStorageDeviceAttachment**: The common behaviors for storage devices in the guest system.\n\n## Inherits From\n\n- VZStorageDeviceAttachment\n\n## Conforms To\n\n- CVarArg\n- CustomDebugStringConvertible\n- CustomStringConvertible\n- Equatable\n- Hashable\n- NSObjectProtocol\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Creates the attachment object from the specified disk image.",
          "name" : "init(url:readOnly:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Virtualization\/VZDiskImageStorageDeviceAttachment\/init(url:readOnly:)"
        },
        {
          "description" : "Initialize the attachment from a local file URL.",
          "name" : "init(url:readOnly:cachingMode:synchronizationMode:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Virtualization\/VZDiskImageStorageDeviceAttachment\/init(url:readOnly:cachingMode:synchronizationMode:)"
        }
      ],
      "title" : "Creating the attachment point"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "The URL of the underlying disk image.",
          "name" : "url",
          "url" : "https:\/\/developer.apple.com\/documentation\/Virtualization\/VZDiskImageStorageDeviceAttachment\/url"
        },
        {
          "description" : "A Boolean value that indicates whether the underlying disk image is read-only.",
          "name" : "isReadOnly",
          "url" : "https:\/\/developer.apple.com\/documentation\/Virtualization\/VZDiskImageStorageDeviceAttachment\/isReadOnly"
        },
        {
          "description" : "The current cacheing mode for the virtual disk image.",
          "name" : "cachingMode",
          "url" : "https:\/\/developer.apple.com\/documentation\/Virtualization\/VZDiskImageStorageDeviceAttachment\/cachingMode"
        },
        {
          "description" : "The mode in which the disk image synchronizes data with the underlying storage device.",
          "name" : "synchronizationMode",
          "url" : "https:\/\/developer.apple.com\/documentation\/Virtualization\/VZDiskImageStorageDeviceAttachment\/synchronizationMode"
        }
      ],
      "title" : "Getting the disk image details"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "A storage device attachment that uses a disk to store data.",
          "name" : "VZDiskBlockDeviceStorageDeviceAttachment",
          "url" : "https:\/\/developer.apple.com\/documentation\/Virtualization\/VZDiskBlockDeviceStorageDeviceAttachment"
        },
        {
          "description" : "A storage device attachment backed by a Network Block Device (NBD) client.",
          "name" : "VZNetworkBlockDeviceStorageDeviceAttachment",
          "url" : "https:\/\/developer.apple.com\/documentation\/Virtualization\/VZNetworkBlockDeviceStorageDeviceAttachment"
        },
        {
          "description" : "The common behaviors for storage devices in the guest system.",
          "name" : "VZStorageDeviceAttachment",
          "url" : "https:\/\/developer.apple.com\/documentation\/Virtualization\/VZStorageDeviceAttachment"
        }
      ],
      "title" : "Attachment points"
    },
    {
      "content" : "",
      "items" : [
        {
          "name" : "VZStorageDeviceAttachment"
        }
      ],
      "title" : "Inherits From"
    }
  ],
  "source" : "appleJSON",
  "title" : "VZDiskImageStorageDeviceAttachment",
  "url" : "https:\/\/developer.apple.com\/documentation\/Virtualization\/VZDiskImageStorageDeviceAttachment"
}