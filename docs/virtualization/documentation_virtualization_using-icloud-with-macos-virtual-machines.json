{
  "abstract" : "Access iCloud from macOS guest virtual machines.",
  "codeExamples" : [

  ],
  "contentHash" : "1ad03c0bc1168219c5caecebaf4ab5efdb16d061b71ebf3b9cecb52987e67056",
  "crawledAt" : "2025-12-04T01:52:44Z",
  "id" : "6F584CC5-40FE-4300-BC31-7CAA37718299",
  "kind" : "article",
  "language" : "swift",
  "module" : "Virtualization",
  "overview" : "## Overview\n\nIn macOS 15 and later, Virtualization supports access to iCloud accounts and resources when running macOS in a virtual machine (VM) on Apple silicon. When you create a VM in macOS 15 from a macOS 15 software image (an `.ipsw` file) using a [doc:\/\/com.apple.virtualization\/documentation\/Virtualization\/VZMacHardwareModel] that you obtain from a [doc:\/\/com.apple.virtualization\/documentation\/Virtualization\/VZMacOSRestoreImage], Virtualization configures an identity for the VM that it derives from security information in the host’s Secure Enclave. Just as individual physical devices have distinct identities based on their Secure Enclaves, this identity is distinct from other VMs.\n\nIf someone moves a VM to a different Mac host and restarts it, the Virtualization framework automatically creates a new identity for the VM using the information from the Secure Enclave of the new Mac host. This identity change requires the person using the VM to reauthenticate to allow iCloud to restart syncing data to the VM.\n\nAdditionally, the Virtualization framework detects attempts to start multiple copies of the same VM simultaneously on the same Mac host. For example, when someone duplicates the files that make up a VM, the framework treats the copy of the VM as a clone of the first one. Starting a second clone while another clone is already running causes the Virtualization framework to automatically construct a new identity for the second clone. This preserves the integrity that different VMs have distinct identities, and requires that the person using the VM reauthenticate to use iCloud services.\n\n### Migrate data from older VMs to new VMs to access iCloud\n\niCloud support for VMs is available in macOS 15 and later. Be sure to let anyone using your virtualization-enabled app know that they need to migrate their data from older VMs to a macOS 15 or later VM. Using a macOS 15 installer to upgrade an older VM doesn’t provide support for iCloud.\n\n### Let people know where to look for additional iCloud support\n\nAdding information to your app about additional [https:\/\/support.apple.com\/icloud], such as in your app’s help and tips, can help people using your app understand how to troubleshoot any issues when accessing iCloud from the VMs your app supports.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/virtualization\/using-icloud-with-macos-virtual-machines\ncrawled: 2025-12-04T01:52:44Z\n---\n\n# Using iCloud with macOS virtual machines\n\n**Article**\n\nAccess iCloud from macOS guest virtual machines.\n\n## Overview\n\nIn macOS 15 and later, Virtualization supports access to iCloud accounts and resources when running macOS in a virtual machine (VM) on Apple silicon. When you create a VM in macOS 15 from a macOS 15 software image (an `.ipsw` file) using a [doc:\/\/com.apple.virtualization\/documentation\/Virtualization\/VZMacHardwareModel] that you obtain from a [doc:\/\/com.apple.virtualization\/documentation\/Virtualization\/VZMacOSRestoreImage], Virtualization configures an identity for the VM that it derives from security information in the host’s Secure Enclave. Just as individual physical devices have distinct identities based on their Secure Enclaves, this identity is distinct from other VMs.\n\nIf someone moves a VM to a different Mac host and restarts it, the Virtualization framework automatically creates a new identity for the VM using the information from the Secure Enclave of the new Mac host. This identity change requires the person using the VM to reauthenticate to allow iCloud to restart syncing data to the VM.\n\nAdditionally, the Virtualization framework detects attempts to start multiple copies of the same VM simultaneously on the same Mac host. For example, when someone duplicates the files that make up a VM, the framework treats the copy of the VM as a clone of the first one. Starting a second clone while another clone is already running causes the Virtualization framework to automatically construct a new identity for the second clone. This preserves the integrity that different VMs have distinct identities, and requires that the person using the VM reauthenticate to use iCloud services.\n\n### Migrate data from older VMs to new VMs to access iCloud\n\niCloud support for VMs is available in macOS 15 and later. Be sure to let anyone using your virtualization-enabled app know that they need to migrate their data from older VMs to a macOS 15 or later VM. Using a macOS 15 installer to upgrade an older VM doesn’t provide support for iCloud.\n\n### Let people know where to look for additional iCloud support\n\nAdding information to your app about additional [https:\/\/support.apple.com\/icloud], such as in your app’s help and tips, can help people using your app understand how to troubleshoot any issues when accessing iCloud from the VMs your app supports.\n\n## Related Documentation\n\n- **TipKit**: Display tips that help people discover features in your app.\n- **NSHelpManager**: An object for displaying online help for an app.\n\n## Essentials\n\n- **Adding the Virtualization Entitlement to Your Project**: Configure your project to use the Virtualization framework.\n- **com.apple.security.virtualization**: A Boolean value that indicates whether your app can use the Virtualization framework.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Display tips that help people discover features in your app.",
          "name" : "TipKit",
          "url" : "https:\/\/developer.apple.com\/documentation\/TipKit"
        },
        {
          "description" : "An object for displaying online help for an app.",
          "name" : "NSHelpManager",
          "url" : "https:\/\/developer.apple.com\/documentation\/AppKit\/NSHelpManager"
        }
      ],
      "title" : "Related Documentation"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Configure your project to use the Virtualization framework.",
          "name" : "Adding the Virtualization Entitlement to Your Project",
          "url" : "https:\/\/developer.apple.com\/documentation\/Virtualization\/adding-the-virtualization-entitlement-to-your-project"
        },
        {
          "description" : "A Boolean value that indicates whether your app can use the Virtualization framework.",
          "name" : "com.apple.security.virtualization",
          "url" : "https:\/\/developer.apple.com\/documentation\/BundleResources\/Entitlements\/com.apple.security.virtualization"
        }
      ],
      "title" : "Essentials"
    }
  ],
  "source" : "appleJSON",
  "title" : "Using iCloud with macOS virtual machines",
  "url" : "https:\/\/developer.apple.com\/documentation\/virtualization\/using-icloud-with-macos-virtual-machines"
}