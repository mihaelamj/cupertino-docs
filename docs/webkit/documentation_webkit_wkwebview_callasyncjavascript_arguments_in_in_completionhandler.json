{
  "abstract" : "Executes the specified string as an asynchronous JavaScript function.",
  "codeExamples" : [
    {
      "code" : "return x ? y : z",
      "language" : "javascript"
    },
    {
      "code" : "var p = new Promise(function (f) {\n   window.setTimeout(\"f(42)\", 1000);\n});\nawait p;\nreturn p;",
      "language" : "javascript"
    }
  ],
  "contentHash" : "88ee472480a1ab16ddddad5007585fe99e1eb270dd461d059e2da2bc9c74023d",
  "crawledAt" : "2025-12-01T02:51:35Z",
  "declaration" : {
    "code" : "@MainActor @preconcurrency func callAsyncJavaScript(_ functionBody: String, arguments: [String : Any] = [:], in frame: WKFrameInfo? = nil, in contentWorld: WKContentWorld, completionHandler: (@MainActor (Result<Any, any Error>) -> Void)? = nil)",
    "language" : "swift"
  },
  "id" : "55203223-E2E0-440D-9F97-5D3DC62542EA",
  "kind" : "method",
  "module" : "WebKit",
  "overview" : "## Discussion\n\nDon’t format the string in the `functionBody` parameter as a function-like callable object, as you would in pure JavaScript. Instead, put only the body of the function in the string. For example, the following string shows a valid function body that takes `x`, `y`, and `z` arguments and returns a result.\n\nIf your JavaScript code returns an object with a callable `then` property, WebKit calls that property on the resulting object and waits for its resolution. If resolution succeeds, WebKit passes the resulting object to your completion handler. If resolution fails, WebKit returns a `WKErrorJavaScriptAsyncFunctionResultRejected` error to your completion handler. Examine the userInfo dictionary of the error object to determine the reason for the object’s rejection. If the garbage collector reclaims the object before resolution finishes, WebKit returns a `WKErrorJavaScriptAsyncFunctionResultUnreachable` error to your completion handler.\n\nBecause this method calls your JavaScript code asynchronously, you can call `await` on objects with a `then` property inside your function body. The following code example illustrates this technique.",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "visionOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/WebKit\/WKWebView\/callAsyncJavaScript(_:arguments:in:in:completionHandler:)\ncrawled: 2025-12-01T02:51:35Z\n---\n\n# callAsyncJavaScript(_:arguments:in:in:completionHandler:)\n\n**Instance Method**\n\nExecutes the specified string as an asynchronous JavaScript function.\n\n## Declaration\n\n```swift\n@MainActor @preconcurrency func callAsyncJavaScript(_ functionBody: String, arguments: [String : Any] = [:], in frame: WKFrameInfo? = nil, in contentWorld: WKContentWorld, completionHandler: (@MainActor (Result<Any, any Error>) -> Void)? = nil)\n```\n\n## Parameters\n\n- **functionBody**: The JavaScript string to use as the function body. This method treats the string as an anonymous JavaScript function body and calls it with the named arguments in the `arguments` parameter.\n- **arguments**: A dictionary of the arguments to pass to the function call. Each key in the dictionary corresponds to the name of an argument in the `functionBody` string, and the value of that key is the value to use during the evaluation of the code. Supported value types are [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSNumber], [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSString], [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSDate], [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSArray], [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSDictionary], or [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSNull]. All items in an array or dictionary must also be one of the supported types.\n- **frame**: The frame in which to evaluate the JavaScript code. Specify `nil` to target the main frame. If this frame is no longer valid when script evaluation begins, this method returns a [doc:\/\/com.apple.webkit\/documentation\/WebKit\/WKError\/Code\/javaScriptInvalidFrameTarget] error.\n- **contentWorld**: The namespace in which to evaluate the JavaScript code. This parameter doesn’t apply to changes you make to the underlying web content, such as the document’s DOM structure. Those changes remain visible to all scripts, regardless of which content world you specify. For more information about content worlds, see [doc:\/\/com.apple.webkit\/documentation\/WebKit\/WKContentWorld].\n- **completionHandler**: A handler block to execute when script evaluation finishes. The method calls your block whether script evaluation completes successfully or fails. The block has no return value and takes the following parameter:\n\n\n\n## Discussion\n\nDon’t format the string in the `functionBody` parameter as a function-like callable object, as you would in pure JavaScript. Instead, put only the body of the function in the string. For example, the following string shows a valid function body that takes `x`, `y`, and `z` arguments and returns a result.\n\n```javascript\nreturn x ? y : z\n```\n\nIf your JavaScript code returns an object with a callable `then` property, WebKit calls that property on the resulting object and waits for its resolution. If resolution succeeds, WebKit passes the resulting object to your completion handler. If resolution fails, WebKit returns a `WKErrorJavaScriptAsyncFunctionResultRejected` error to your completion handler. Examine the userInfo dictionary of the error object to determine the reason for the object’s rejection. If the garbage collector reclaims the object before resolution finishes, WebKit returns a `WKErrorJavaScriptAsyncFunctionResultUnreachable` error to your completion handler.\n\nBecause this method calls your JavaScript code asynchronously, you can call `await` on objects with a `then` property inside your function body. The following code example illustrates this technique.\n\n```javascript\nvar p = new Promise(function (f) {\n   window.setTimeout(\"f(42)\", 1000);\n});\nawait p;\nreturn p;\n```\n\n## Executing JavaScript\n\n- **evaluateJavaScript(_:completionHandler:)**: Evaluates the specified JavaScript string.\n- **evaluateJavaScript(_:in:in:completionHandler:)**: Evaluates a JavaScript string in the context of the specified frame and content world.\n- **evaluateJavaScript(_:in:contentWorld:)**: Evaluates a JavaScript string in the context of the specified frame and content world.\n- **callAsyncJavaScript(_:arguments:in:contentWorld:)**: Executes the specified string as an asynchronous JavaScript function.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Evaluates the specified JavaScript string.",
          "name" : "evaluateJavaScript(_:completionHandler:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/WebKit\/WKWebView\/evaluateJavaScript(_:completionHandler:)"
        },
        {
          "description" : "Evaluates a JavaScript string in the context of the specified frame and content world.",
          "name" : "evaluateJavaScript(_:in:in:completionHandler:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/WebKit\/WKWebView\/evaluateJavaScript(_:in:in:completionHandler:)"
        },
        {
          "description" : "Evaluates a JavaScript string in the context of the specified frame and content world.",
          "name" : "evaluateJavaScript(_:in:contentWorld:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/WebKit\/WKWebView\/evaluateJavaScript(_:in:contentWorld:)"
        },
        {
          "description" : "Executes the specified string as an asynchronous JavaScript function.",
          "name" : "callAsyncJavaScript(_:arguments:in:contentWorld:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/WebKit\/WKWebView\/callAsyncJavaScript(_:arguments:in:contentWorld:)"
        }
      ],
      "title" : "Executing JavaScript"
    }
  ],
  "source" : "appleJSON",
  "title" : "callAsyncJavaScript(_:arguments:in:in:completionHandler:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/WebKit\/WKWebView\/callAsyncJavaScript(_:arguments:in:in:completionHandler:)"
}