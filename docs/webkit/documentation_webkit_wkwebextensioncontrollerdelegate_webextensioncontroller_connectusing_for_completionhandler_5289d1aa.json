{
  "abstract" : "Called when an extension context wants to establish a persistent connection to an application.",
  "codeExamples" : [

  ],
  "contentHash" : "b9e7e2717c70042624aea53d084388a58f1c4e51167049ed8d35c658f459e51c",
  "crawledAt" : "2025-12-07T15:10:07Z",
  "declaration" : {
    "code" : "@MainActor optional func webExtensionController(_ controller: WKWebExtensionController, connectUsing port: WKWebExtension.MessagePort, for extensionContext: WKWebExtensionContext, completionHandler: @escaping ((any Error)?) -> Void)",
    "language" : "swift"
  },
  "id" : "A037D920-704C-4BE0-9B86-777CA1C2C121",
  "kind" : "method",
  "language" : "swift",
  "module" : "WebKit",
  "overview" : "## Discussion\n\nThis method should be implemented by the app to handle establishing connections to applications.\n\nThe provided [doc:\/\/com.apple.webkit\/documentation\/WebKit\/WKWebExtension\/MessagePort] object can be used to handle message sending, receiving, and disconnection.\n\nYou should retain the port object for as long as the connection remains active. Releasing the port will disconnect it.\n\nIf not implemented, the default behavior is to pass the messages to the app extension handler within the extension’s bundle, if the extension was loaded from an app extension bundle; otherwise, no action is performed if not implemented.",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "visionOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/WebKit\/WKWebExtensionControllerDelegate\/webExtensionController(_:connectUsing:for:completionHandler:)\ncrawled: 2025-12-07T15:10:07Z\n---\n\n# webExtensionController(_:connectUsing:for:completionHandler:)\n\n**Instance Method**\n\nCalled when an extension context wants to establish a persistent connection to an application.\n\n## Declaration\n\n```swift\n@MainActor optional func webExtensionController(_ controller: WKWebExtensionController, connectUsing port: WKWebExtension.MessagePort, for extensionContext: WKWebExtensionContext, completionHandler: @escaping ((any Error)?) -> Void)\n```\n\n```swift\n@MainActor optional func webExtensionController(_ controller: WKWebExtensionController, connectUsing port: WKWebExtension.MessagePort, for extensionContext: WKWebExtensionContext) async throws\n```\n\n## Parameters\n\n- **controller**: The web extension controller that is managing the extension.\n- **port**: A port object for handling the message exchange.\n- **extensionContext**: The context in which the web extension is running.\n- **completionHandler**: A block to be called when the connection is ready to use, taking an optional error. If the connection is successfully established, the error should be \\c nil.\n\n## Discussion\n\nThis method should be implemented by the app to handle establishing connections to applications.\n\nThe provided [doc:\/\/com.apple.webkit\/documentation\/WebKit\/WKWebExtension\/MessagePort] object can be used to handle message sending, receiving, and disconnection.\n\nYou should retain the port object for as long as the connection remains active. Releasing the port will disconnect it.\n\nIf not implemented, the default behavior is to pass the messages to the app extension handler within the extension’s bundle, if the extension was loaded from an app extension bundle; otherwise, no action is performed if not implemented.\n\n",
  "sections" : [

  ],
  "source" : "appleJSON",
  "title" : "webExtensionController(_:connectUsing:for:completionHandler:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/WebKit\/WKWebExtensionControllerDelegate\/webExtensionController(_:connectUsing:for:completionHandler:)"
}