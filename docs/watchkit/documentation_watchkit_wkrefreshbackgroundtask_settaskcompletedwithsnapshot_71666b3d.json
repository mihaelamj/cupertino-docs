{
  "abstract" : "Marks the task as complete and indicates whether the system should take a new snapshot of the app.",
  "codeExamples" : [

  ],
  "contentHash" : "03b38f0e62f2457525d8dd9f62dfa344432c9991fe54cca3c8ae902bbb2804aa",
  "crawledAt" : "2025-12-03T20:10:31Z",
  "declaration" : {
    "code" : "func setTaskCompletedWithSnapshot(_ refreshSnapshot: Bool)",
    "language" : "swift"
  },
  "id" : "9F0031CC-6210-4FEC-9F64-DCCB97899B48",
  "kind" : "method",
  "language" : "swift",
  "module" : "WatchKit",
  "overview" : "## Discussion\n\nCall this method as soon as a nonsnapshot background task (any [doc:\/\/com.apple.watchkit\/documentation\/WatchKit\/WKRefreshBackgroundTask] subclass except the [doc:\/\/com.apple.watchkit\/documentation\/WatchKit\/WKSnapshotRefreshBackgroundTask] class) is complete.\n\nTo update the app’s snapshot in response to the current task, pass [doc:\/\/com.apple.documentation\/documentation\/Swift\/true], and the system schedules an immediate snapshot. This request counts against the standard snapshot budget and overwrites any requests made using the [doc:\/\/com.apple.watchkit\/documentation\/WatchKit\/WKExtension\/scheduleSnapshotRefresh(withPreferredDate:userInfo:scheduledCompletion:)] method. As with all snapshots, your app receives a [doc:\/\/com.apple.watchkit\/documentation\/WatchKit\/WKSnapshotRefreshBackgroundTask] before the snapshot is taken.\n\nThe system provides your extension with a limited amount of time (on the order of seconds) to finish this task. If you do not call [doc:\/\/com.apple.watchkit\/documentation\/WatchKit\/WKRefreshBackgroundTask\/setTaskCompletedWithSnapshot(_:)] on the task, the system continues to run in the background until all available time is consumed, wasting battery power.\n\nThe system suspends the extension as soon as all background tasks are complete.\n\nWhen completing a snapshot background task, you generally call the [doc:\/\/com.apple.watchkit\/documentation\/WatchKit\/WKSnapshotRefreshBackgroundTask\/setTaskCompleted(restoredDefaultState:estimatedSnapshotExpiration:userInfo:)]method and explicitly set the date for the next snapshot. You can call [doc:\/\/com.apple.watchkit\/documentation\/WatchKit\/WKRefreshBackgroundTask\/setTaskCompletedWithSnapshot(_:)] as a simpler alternative. If you pass [doc:\/\/com.apple.documentation\/documentation\/Swift\/true], the system schedules a new snapshot task in one hour. If you pass [doc:\/\/com.apple.documentation\/documentation\/Swift\/false], no snapshot is scheduled.",
  "platforms" : [
    "watchOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/WatchKit\/WKRefreshBackgroundTask\/setTaskCompletedWithSnapshot(_:)\ncrawled: 2025-12-03T20:10:31Z\n---\n\n# setTaskCompletedWithSnapshot(_:)\n\n**Instance Method**\n\nMarks the task as complete and indicates whether the system should take a new snapshot of the app.\n\n## Declaration\n\n```swift\nfunc setTaskCompletedWithSnapshot(_ refreshSnapshot: Bool)\n```\n\n## Parameters\n\n- **refreshSnapshot**: A Boolean value that indicates whether the system should take a new snapshot of the app.\n\n## Discussion\n\nCall this method as soon as a nonsnapshot background task (any [doc:\/\/com.apple.watchkit\/documentation\/WatchKit\/WKRefreshBackgroundTask] subclass except the [doc:\/\/com.apple.watchkit\/documentation\/WatchKit\/WKSnapshotRefreshBackgroundTask] class) is complete.\n\nTo update the app’s snapshot in response to the current task, pass [doc:\/\/com.apple.documentation\/documentation\/Swift\/true], and the system schedules an immediate snapshot. This request counts against the standard snapshot budget and overwrites any requests made using the [doc:\/\/com.apple.watchkit\/documentation\/WatchKit\/WKExtension\/scheduleSnapshotRefresh(withPreferredDate:userInfo:scheduledCompletion:)] method. As with all snapshots, your app receives a [doc:\/\/com.apple.watchkit\/documentation\/WatchKit\/WKSnapshotRefreshBackgroundTask] before the snapshot is taken.\n\nThe system provides your extension with a limited amount of time (on the order of seconds) to finish this task. If you do not call [doc:\/\/com.apple.watchkit\/documentation\/WatchKit\/WKRefreshBackgroundTask\/setTaskCompletedWithSnapshot(_:)] on the task, the system continues to run in the background until all available time is consumed, wasting battery power.\n\nThe system suspends the extension as soon as all background tasks are complete.\n\nWhen completing a snapshot background task, you generally call the [doc:\/\/com.apple.watchkit\/documentation\/WatchKit\/WKSnapshotRefreshBackgroundTask\/setTaskCompleted(restoredDefaultState:estimatedSnapshotExpiration:userInfo:)]method and explicitly set the date for the next snapshot. You can call [doc:\/\/com.apple.watchkit\/documentation\/WatchKit\/WKRefreshBackgroundTask\/setTaskCompletedWithSnapshot(_:)] as a simpler alternative. If you pass [doc:\/\/com.apple.documentation\/documentation\/Swift\/true], the system schedules a new snapshot task in one hour. If you pass [doc:\/\/com.apple.documentation\/documentation\/Swift\/false], no snapshot is scheduled.\n\n## Completing the background task\n\n- **expirationHandler**: A block that the system calls when the available runtime for a background task is about to expire.\n- **setTaskCompleted()**: Marks the task as complete.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "A block that the system calls when the available runtime for a background task is about to expire.",
          "name" : "expirationHandler",
          "url" : "https:\/\/developer.apple.com\/documentation\/WatchKit\/WKRefreshBackgroundTask\/expirationHandler"
        },
        {
          "description" : "Marks the task as complete.",
          "name" : "setTaskCompleted()",
          "url" : "https:\/\/developer.apple.com\/documentation\/WatchKit\/WKRefreshBackgroundTask\/setTaskCompleted()"
        }
      ],
      "title" : "Completing the background task"
    }
  ],
  "source" : "appleJSON",
  "title" : "setTaskCompletedWithSnapshot(_:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/WatchKit\/WKRefreshBackgroundTask\/setTaskCompletedWithSnapshot(_:)"
}