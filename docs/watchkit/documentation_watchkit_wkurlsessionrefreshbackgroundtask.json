{
  "abstract" : "A task that responds to background URL sessions.",
  "codeExamples" : [
    {
      "code" : "\/\/ Create a background session configuration.\nlet config = URLSessionConfiguration.background(withIdentifier: myRequestID)\nconfig.isDiscretionary = true\nconfig.sessionSendsLaunchEvents = true\n\n\/\/ Create the background download task and schedule it to run in 15 minutes.\nlet urlSession = URLSession(configuration: config,\n                            delegate: self,\n                            delegateQueue: nil)\n\n\nlet backgroundTask = urlSession.downloadTask(with: url)\nbackgroundTask.earliestBeginDate = Date().addingTimeInterval(15 * 60)\n\n\/\/ Run the task.\nbackgroundTask.resume()",
      "language" : "swift"
    }
  ],
  "conformsTo" : [
    "CVarArg",
    "CustomDebugStringConvertible",
    "CustomStringConvertible",
    "Equatable",
    "Hashable",
    "NSObjectProtocol",
    "Sendable",
    "SendableMetatype"
  ],
  "contentHash" : "92e355c7878e963826bd3d0490ac26a9be551afd88691fd7327babb88955e84e",
  "crawledAt" : "2025-12-02T21:59:19Z",
  "declaration" : {
    "code" : "class WKURLSessionRefreshBackgroundTask",
    "language" : "swift"
  },
  "id" : "F1603799-134B-41BA-BD3E-3FDB3F8746BF",
  "kind" : "class",
  "language" : "swift",
  "module" : "WatchKit",
  "overview" : "## Overview\n\nAlways upload and download data using a [doc:\/\/com.apple.documentation\/documentation\/Foundation\/URLSession] background transfer. Background transfers occur in a separate process and continue to transfer data even after your app terminates. Asynchronous uploads and downloads, on the other hand, suspend with your app. Because watchOS apps have a short runtime, you can’t guarantee that an asynchronous transfer finishes before the app suspends. For more information on background transfers, see [doc:\/\/com.apple.documentation\/documentation\/Foundation\/downloading-files-in-the-background].\n\nSchedule a background URL session to download an item as shown below.\n\nIf your app has a complication on the active watch face, it can receive up to four [doc:\/\/com.apple.watchkit\/documentation\/WatchKit\/WKURLSessionRefreshBackgroundTask] tasks per hour. To avoid throttling, use the [doc:\/\/com.apple.documentation\/documentation\/Foundation\/URLSessionTask\/earliestBeginDate] property to schedule background URL session tasks no closer than 15 minutes apart.\n\nDon’t subclass or create instances of this class. Instead, the system instantiates a [doc:\/\/com.apple.watchkit\/documentation\/WatchKit\/WKURLSessionRefreshBackgroundTask] object and passes the task object to your extension delegate’s [doc:\/\/com.apple.watchkit\/documentation\/WatchKit\/WKApplicationDelegate\/handle(_:)-4vdjo] method in response to [doc:\/\/com.apple.documentation\/documentation\/Foundation\/URLSession] events. Defer calling the background [doc:\/\/com.apple.documentation\/documentation\/Foundation\/URLSession] task’s `setTaskCompleted()` method until all the delegate method calls finish processing.\n\nThe system creates a background [doc:\/\/com.apple.documentation\/documentation\/Foundation\/URLSession] task when any of the following events occur:\n\nTo get more information about the transfer, create a background configuration object with the same session identifier. Next, create a session object using the configuration object and a session delegate. The system automatically associates the new session with the transfer and calls the appropriate delegate methods.",
  "platforms" : [
    "watchOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/WatchKit\/WKURLSessionRefreshBackgroundTask\ncrawled: 2025-12-02T21:59:19Z\n---\n\n# WKURLSessionRefreshBackgroundTask\n\n**Class**\n\nA task that responds to background URL sessions.\n\n## Declaration\n\n```swift\nclass WKURLSessionRefreshBackgroundTask\n```\n\n## Overview\n\nAlways upload and download data using a [doc:\/\/com.apple.documentation\/documentation\/Foundation\/URLSession] background transfer. Background transfers occur in a separate process and continue to transfer data even after your app terminates. Asynchronous uploads and downloads, on the other hand, suspend with your app. Because watchOS apps have a short runtime, you can’t guarantee that an asynchronous transfer finishes before the app suspends. For more information on background transfers, see [doc:\/\/com.apple.documentation\/documentation\/Foundation\/downloading-files-in-the-background].\n\nSchedule a background URL session to download an item as shown below.\n\n```swift\n\/\/ Create a background session configuration.\nlet config = URLSessionConfiguration.background(withIdentifier: myRequestID)\nconfig.isDiscretionary = true\nconfig.sessionSendsLaunchEvents = true\n\n\/\/ Create the background download task and schedule it to run in 15 minutes.\nlet urlSession = URLSession(configuration: config,\n                            delegate: self,\n                            delegateQueue: nil)\n\n\nlet backgroundTask = urlSession.downloadTask(with: url)\nbackgroundTask.earliestBeginDate = Date().addingTimeInterval(15 * 60)\n\n\/\/ Run the task.\nbackgroundTask.resume()\n```\n\nIf your app has a complication on the active watch face, it can receive up to four [doc:\/\/com.apple.watchkit\/documentation\/WatchKit\/WKURLSessionRefreshBackgroundTask] tasks per hour. To avoid throttling, use the [doc:\/\/com.apple.documentation\/documentation\/Foundation\/URLSessionTask\/earliestBeginDate] property to schedule background URL session tasks no closer than 15 minutes apart.\n\nDon’t subclass or create instances of this class. Instead, the system instantiates a [doc:\/\/com.apple.watchkit\/documentation\/WatchKit\/WKURLSessionRefreshBackgroundTask] object and passes the task object to your extension delegate’s [doc:\/\/com.apple.watchkit\/documentation\/WatchKit\/WKApplicationDelegate\/handle(_:)-4vdjo] method in response to [doc:\/\/com.apple.documentation\/documentation\/Foundation\/URLSession] events. Defer calling the background [doc:\/\/com.apple.documentation\/documentation\/Foundation\/URLSession] task’s `setTaskCompleted()` method until all the delegate method calls finish processing.\n\n\n\nThe system creates a background [doc:\/\/com.apple.documentation\/documentation\/Foundation\/URLSession] task when any of the following events occur:\n\n- The server requires authentication to complete a background transfer.\n- All background transfers associated with a session identifier complete (either successfully or unsuccessfully).\n\nTo get more information about the transfer, create a background configuration object with the same session identifier. Next, create a session object using the configuration object and a session delegate. The system automatically associates the new session with the transfer and calls the appropriate delegate methods.\n\n## Accessing background task data\n\n- **sessionIdentifier**: The identifier for the triggering background transfer.\n\n## Background tasks\n\n- **Using background tasks**: Handle scheduled update tasks in the background, and respond to background system interactions including Siri intents and incoming Bluetooth messages.\n- **Preparing to take your watchOS app’s snapshot**: Provide a timely, accurate snapshot of your app by using snapshot background tasks.\n- **WKApplicationRefreshBackgroundTask**: A task that updates your app’s state in the background.\n- **WKWatchConnectivityRefreshBackgroundTask**: A background task used to receive background updates from the Watch Connectivity framework.\n- **WKBluetoothAlertRefreshBackgroundTask**: A task for handling timely Bluetooth alerts in the background.\n- **WKIntentDidRunRefreshBackgroundTask**: A background task used to update your app after a SiriKit intent runs.\n- **WKRelevantShortcutRefreshBackgroundTask**: A background task used to periodically donate relevant Siri shortcuts.\n- **WKSnapshotRefreshBackgroundTask**: A background task used to update your app’s user interface in preparation for a snapshot.\n- **WKRefreshBackgroundTask**: The abstract superclass for WatchKit’s background task classes.\n\n## Inherits From\n\n- WKRefreshBackgroundTask\n\n## Conforms To\n\n- CVarArg\n- CustomDebugStringConvertible\n- CustomStringConvertible\n- Equatable\n- Hashable\n- NSObjectProtocol\n- Sendable\n- SendableMetatype\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "The identifier for the triggering background transfer.",
          "name" : "sessionIdentifier",
          "url" : "https:\/\/developer.apple.com\/documentation\/WatchKit\/WKURLSessionRefreshBackgroundTask\/sessionIdentifier"
        }
      ],
      "title" : "Accessing background task data"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Handle scheduled update tasks in the background, and respond to background system interactions including Siri intents and incoming Bluetooth messages.",
          "name" : "Using background tasks",
          "url" : "https:\/\/developer.apple.com\/documentation\/WatchKit\/using-background-tasks"
        },
        {
          "description" : "Provide a timely, accurate snapshot of your app by using snapshot background tasks.",
          "name" : "Preparing to take your watchOS app’s snapshot",
          "url" : "https:\/\/developer.apple.com\/documentation\/WatchKit\/preparing-to-take-your-watchos-app-s-snapshot"
        },
        {
          "description" : "A task that updates your app’s state in the background.",
          "name" : "WKApplicationRefreshBackgroundTask",
          "url" : "https:\/\/developer.apple.com\/documentation\/WatchKit\/WKApplicationRefreshBackgroundTask"
        },
        {
          "description" : "A background task used to receive background updates from the Watch Connectivity framework.",
          "name" : "WKWatchConnectivityRefreshBackgroundTask",
          "url" : "https:\/\/developer.apple.com\/documentation\/WatchKit\/WKWatchConnectivityRefreshBackgroundTask"
        },
        {
          "description" : "A task for handling timely Bluetooth alerts in the background.",
          "name" : "WKBluetoothAlertRefreshBackgroundTask",
          "url" : "https:\/\/developer.apple.com\/documentation\/WatchKit\/WKBluetoothAlertRefreshBackgroundTask"
        },
        {
          "description" : "A background task used to update your app after a SiriKit intent runs.",
          "name" : "WKIntentDidRunRefreshBackgroundTask",
          "url" : "https:\/\/developer.apple.com\/documentation\/WatchKit\/WKIntentDidRunRefreshBackgroundTask"
        },
        {
          "description" : "A background task used to periodically donate relevant Siri shortcuts.",
          "name" : "WKRelevantShortcutRefreshBackgroundTask",
          "url" : "https:\/\/developer.apple.com\/documentation\/WatchKit\/WKRelevantShortcutRefreshBackgroundTask"
        },
        {
          "description" : "A background task used to update your app’s user interface in preparation for a snapshot.",
          "name" : "WKSnapshotRefreshBackgroundTask",
          "url" : "https:\/\/developer.apple.com\/documentation\/WatchKit\/WKSnapshotRefreshBackgroundTask"
        },
        {
          "description" : "The abstract superclass for WatchKit’s background task classes.",
          "name" : "WKRefreshBackgroundTask",
          "url" : "https:\/\/developer.apple.com\/documentation\/WatchKit\/WKRefreshBackgroundTask"
        }
      ],
      "title" : "Background tasks"
    },
    {
      "content" : "",
      "items" : [
        {
          "name" : "WKRefreshBackgroundTask"
        }
      ],
      "title" : "Inherits From"
    }
  ],
  "source" : "appleJSON",
  "title" : "WKURLSessionRefreshBackgroundTask",
  "url" : "https:\/\/developer.apple.com\/documentation\/WatchKit\/WKURLSessionRefreshBackgroundTask"
}