{
  "abstract" : "Starts a new scope that can contain a dynamic number of child tasks.",
  "codeExamples" : [
    {
      "code" : "var sum = 0\nfor await result in group {\n    sum += result\n}",
      "language" : "swift"
    },
    {
      "code" : "guard let first = await group.next() else {\n    group.cancelAll()\n    return 0\n}\nlet second = await group.next() ?? 0\ngroup.cancelAll()\nreturn first + second",
      "language" : "swift"
    }
  ],
  "contentHash" : "4fbdd97072f7fe7d3f0127f6db80eb6525d1ceea9f3c8132f2dece454091ace0",
  "crawledAt" : "2025-12-02T21:38:23Z",
  "declaration" : {
    "code" : "@backDeployed(before: macOS 15.0, iOS 18.0, watchOS 11.0, tvOS 18.0, visionOS 2.0)\nfunc withTaskGroup<ChildTaskResult, GroupResult>(of childTaskResultType: ChildTaskResult.Type = ChildTaskResult.self, returning returnType: GroupResult.Type = GroupResult.self, isolation: isolated (any Actor)? = #isolation, body: (inout TaskGroup<ChildTaskResult>) async -> GroupResult) async -> GroupResult where ChildTaskResult : Sendable",
    "language" : "swift"
  },
  "id" : "79EE60B2-217F-4681-8A0E-639CB0CA6C3A",
  "kind" : "function",
  "language" : "swift",
  "module" : "Swift",
  "overview" : "## Discussion\n\nA group *always* waits for all of its child tasks to complete before it returns. Even canceled tasks must run until completion before this function returns. Canceled child tasks cooperatively react to cancellation and attempt to return as early as possible. After this function returns, the task group is always empty.\n\nTo collect the results of the group’s child tasks, you can use a `for`-`await`-`in` loop:\n\nIf you need more control or only a few results, you can call `next()` directly:\n\nRefer to [doc:\/\/com.apple.Swift\/documentation\/Swift\/TaskGroup] documentation for detailed discussion of semantics shared between all task groups.",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "tvOS",
    "visionOS",
    "watchOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/Swift\/withTaskGroup(of:returning:isolation:body:)\ncrawled: 2025-12-02T21:38:23Z\n---\n\n# withTaskGroup(of:returning:isolation:body:)\n\n**Function**\n\nStarts a new scope that can contain a dynamic number of child tasks.\n\n## Declaration\n\n```swift\n@backDeployed(before: macOS 15.0, iOS 18.0, watchOS 11.0, tvOS 18.0, visionOS 2.0)\nfunc withTaskGroup<ChildTaskResult, GroupResult>(of childTaskResultType: ChildTaskResult.Type = ChildTaskResult.self, returning returnType: GroupResult.Type = GroupResult.self, isolation: isolated (any Actor)? = #isolation, body: (inout TaskGroup<ChildTaskResult>) async -> GroupResult) async -> GroupResult where ChildTaskResult : Sendable\n```\n\n## Discussion\n\nA group *always* waits for all of its child tasks to complete before it returns. Even canceled tasks must run until completion before this function returns. Canceled child tasks cooperatively react to cancellation and attempt to return as early as possible. After this function returns, the task group is always empty.\n\nTo collect the results of the group’s child tasks, you can use a `for`-`await`-`in` loop:\n\n```swift\nvar sum = 0\nfor await result in group {\n    sum += result\n}\n```\n\nIf you need more control or only a few results, you can call `next()` directly:\n\n```swift\nguard let first = await group.next() else {\n    group.cancelAll()\n    return 0\n}\nlet second = await group.next() ?? 0\ngroup.cancelAll()\nreturn first + second\n```\n\nRefer to [doc:\/\/com.apple.Swift\/documentation\/Swift\/TaskGroup] documentation for detailed discussion of semantics shared between all task groups.\n\n\n\n## Tasks\n\n- **Task**: A unit of asynchronous work.\n- **TaskGroup**: A group that contains dynamically created child tasks.\n- **ThrowingTaskGroup**: A group that contains throwing, dynamically created child tasks.\n- **withThrowingTaskGroup(of:returning:isolation:body:)**: Starts a new scope that can contain a dynamic number of throwing child tasks.\n- **TaskPriority**: The priority of a task.\n- **DiscardingTaskGroup**: A discarding group that contains dynamically created child tasks.\n- **withDiscardingTaskGroup(returning:isolation:body:)**: Starts a new scope that can contain a dynamic number of child tasks.\n- **ThrowingDiscardingTaskGroup**: A throwing discarding group that contains dynamically created child tasks.\n- **withThrowingDiscardingTaskGroup(returning:isolation:body:)**: Starts a new scope that can contain a dynamic number of child tasks.\n- **UnsafeCurrentTask**: An unsafe reference to the current task.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "A unit of asynchronous work.",
          "name" : "Task",
          "url" : "https:\/\/developer.apple.com\/documentation\/Swift\/Task"
        },
        {
          "description" : "A group that contains dynamically created child tasks.",
          "name" : "TaskGroup",
          "url" : "https:\/\/developer.apple.com\/documentation\/Swift\/TaskGroup"
        },
        {
          "description" : "A group that contains throwing, dynamically created child tasks.",
          "name" : "ThrowingTaskGroup",
          "url" : "https:\/\/developer.apple.com\/documentation\/Swift\/ThrowingTaskGroup"
        },
        {
          "description" : "Starts a new scope that can contain a dynamic number of throwing child tasks.",
          "name" : "withThrowingTaskGroup(of:returning:isolation:body:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Swift\/withThrowingTaskGroup(of:returning:isolation:body:)"
        },
        {
          "description" : "The priority of a task.",
          "name" : "TaskPriority",
          "url" : "https:\/\/developer.apple.com\/documentation\/Swift\/TaskPriority"
        },
        {
          "description" : "A discarding group that contains dynamically created child tasks.",
          "name" : "DiscardingTaskGroup",
          "url" : "https:\/\/developer.apple.com\/documentation\/Swift\/DiscardingTaskGroup"
        },
        {
          "description" : "Starts a new scope that can contain a dynamic number of child tasks.",
          "name" : "withDiscardingTaskGroup(returning:isolation:body:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Swift\/withDiscardingTaskGroup(returning:isolation:body:)"
        },
        {
          "description" : "A throwing discarding group that contains dynamically created child tasks.",
          "name" : "ThrowingDiscardingTaskGroup",
          "url" : "https:\/\/developer.apple.com\/documentation\/Swift\/ThrowingDiscardingTaskGroup"
        },
        {
          "description" : "Starts a new scope that can contain a dynamic number of child tasks.",
          "name" : "withThrowingDiscardingTaskGroup(returning:isolation:body:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Swift\/withThrowingDiscardingTaskGroup(returning:isolation:body:)"
        },
        {
          "description" : "An unsafe reference to the current task.",
          "name" : "UnsafeCurrentTask",
          "url" : "https:\/\/developer.apple.com\/documentation\/Swift\/UnsafeCurrentTask"
        }
      ],
      "title" : "Tasks"
    }
  ],
  "source" : "appleJSON",
  "title" : "withTaskGroup(of:returning:isolation:body:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/Swift\/withTaskGroup(of:returning:isolation:body:)"
}