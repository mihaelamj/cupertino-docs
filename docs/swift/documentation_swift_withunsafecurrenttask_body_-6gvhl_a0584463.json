{
  "abstract" : "Calls a closure with an unsafe reference to the current task.",
  "codeExamples" : [

  ],
  "contentHash" : "362dbffb8c6c02c68b01ddaa80c672ddd09966a52184fa18120d6aa01a9d4b64",
  "crawledAt" : "2025-12-05T08:57:43Z",
  "declaration" : {
    "code" : "func withUnsafeCurrentTask<T>(body: (UnsafeCurrentTask?) throws -> T) rethrows -> T",
    "language" : "swift"
  },
  "id" : "6210300E-A79D-430E-9A35-A7C86FCB27BC",
  "kind" : "function",
  "language" : "swift",
  "module" : "Swift",
  "overview" : "## Return Value\n\nThe return value, if any, of the `body` closure.\n\n## Discussion\n\nIf you call this function from the body of an asynchronous function, the unsafe task handle passed to the closure is always non-`nil` because an asynchronous function always runs in the context of a task. However, if you call this function from the body of a synchronous function, and that function isn’t executing in the context of any task, the unsafe task handle is `nil`.\n\nDon’t store an unsafe task reference for use outside this method’s closure. Storing an unsafe reference doesn’t affect the task’s actual life cycle, and the behavior of accessing an unsafe task reference outside of the `withUnsafeCurrentTask(body:)` method’s closure isn’t defined. There’s no safe way to retrieve a reference to the current task and save it for long-term use. To query the current task without saving a reference to it, use properties like `currentPriority`. If you need to store a reference to a task, create an unstructured task using `Task.detached(priority:operation:)` instead.",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "tvOS",
    "visionOS",
    "watchOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/swift\/withunsafecurrenttask(body:)-6gvhl\ncrawled: 2025-12-05T08:57:43Z\n---\n\n# withUnsafeCurrentTask(body:)\n\n**Function**\n\nCalls a closure with an unsafe reference to the current task.\n\n## Declaration\n\n```swift\nfunc withUnsafeCurrentTask<T>(body: (UnsafeCurrentTask?) throws -> T) rethrows -> T\n```\n\n## Parameters\n\n- **body**: A closure that takes an `UnsafeCurrentTask` parameter. If `body` has a return value, that value is also used as the return value for the `withUnsafeCurrentTask(body:)` function.\n\n## Return Value\n\nThe return value, if any, of the `body` closure.\n\n## Discussion\n\nIf you call this function from the body of an asynchronous function, the unsafe task handle passed to the closure is always non-`nil` because an asynchronous function always runs in the context of a task. However, if you call this function from the body of a synchronous function, and that function isn’t executing in the context of any task, the unsafe task handle is `nil`.\n\nDon’t store an unsafe task reference for use outside this method’s closure. Storing an unsafe reference doesn’t affect the task’s actual life cycle, and the behavior of accessing an unsafe task reference outside of the `withUnsafeCurrentTask(body:)` method’s closure isn’t defined. There’s no safe way to retrieve a reference to the current task and save it for long-term use. To query the current task without saving a reference to it, use properties like `currentPriority`. If you need to store a reference to a task, create an unstructured task using `Task.detached(priority:operation:)` instead.\n\n## Getting an Unsafe Reference to the Current Task\n\n- **withUnsafeCurrentTask(body:)**\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "",
          "name" : "withUnsafeCurrentTask(body:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Swift\/withUnsafeCurrentTask(body:)-2cbzn"
        }
      ],
      "title" : "Getting an Unsafe Reference to the Current Task"
    }
  ],
  "source" : "appleJSON",
  "title" : "withUnsafeCurrentTask(body:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/swift\/withunsafecurrenttask(body:)-6gvhl"
}