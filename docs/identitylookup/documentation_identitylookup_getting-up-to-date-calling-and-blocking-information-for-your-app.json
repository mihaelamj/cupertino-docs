{
  "abstract" : "Implement the Live Caller ID Lookup app extension to provide call-blocking and identity services.",
  "codeExamples" : [
    {
      "code" : "import Foundation\nimport IdentityLookup\n\n@main\nstruct MyAppExtension: LiveCallerIDLookupProtocol {    \n    var context: LiveCallerIDLookupExtensionContext { get {\n        return LiveCallerIDLookupExtensionContext(\n            \/\/ The URL for the server endpoint that the system uses to fetch incoming call information.\n            serviceURL: URL(string: \"https:\/\/app.apple.com\")!,\n            \/\/ The URL of the token issuer.\n            tokenIssuerURL: URL(string: \"https:\/\/app.apple.com\")!,\n            \/\/ The token to authenticate the app. \n            userTierToken: Data(base64Encoded: \"BBBB\")!\n        )\n    }}\n}",
      "language" : "swift"
    },
    {
      "code" : "\/\/ Check the status of your app extension.\nif LiveCallerIDLookupManager.shared.status(forExtensionWithIdentifier: extensionName) == .disabled {\n    \/\/ Show an alert.\n}\n\n\/\/ Open Settings.\ntry await LiveCallerIDLookupManager.shared.openSettings()",
      "language" : "swift"
    }
  ],
  "contentHash" : "331a43661c7da3ec35c586cab55565cc20176291a546e01c2ed5180a6c980f5b",
  "crawledAt" : "2025-12-02T17:02:36Z",
  "id" : "4B873355-4D71-40D5-8D31-4D998717C895",
  "kind" : "article",
  "language" : "swift",
  "module" : "SMS and Call Reporting",
  "overview" : "## Overview\n\nWith the Live Caller ID Lookup app extension, you can provide caller ID and call-blocking services from a server you maintain. The app extension tells the system how to communicate with your server. When someone’s device receives a phone call, the system communicates with your back-end server to retrieve caller ID and blocking information, and then displays that information on the incoming call screen and in the device’s recent phone calls.\n\n### Add the app extension to your project\n\nTo use the Live Caller ID Lookup app extension, you need to add it to your Xcode project by choosing File > New > Target, selecting its template, and clicking Next.\n\n\n\nWhen you add this target to your project, it provides the initial files you need for your app extension.\n\n### Specify your server information\n\nAfter adding the app extension, the system needs configuration data to connect to your server and authenticate the person using your app. The app extension’s entrypoint is an object that adopts the [doc:\/\/com.apple.identitylookup\/documentation\/IdentityLookup\/LiveCallerIDLookupProtocol]. This defines a context parameter where you provide information for the system about your server and access tokens. The [doc:\/\/com.apple.identitylookup\/documentation\/IdentityLookup\/LiveCallerIDLookupExtensionContext] takes three parameters:\n\nThe system uses Private Information Retrieval (PIR) to fetch a database entry without disclosing the query to the server. When an incoming call occurs, the PIR process privately checks the number against your server before revealing relevant caller information to the system.\n\nThe system caches the responses for server-side per entry configuration time. This means, if a second phone call comes in from the same number before the cache expires, the system uses the cached values instead of making another PIR request. For more information about setting up your server endpoints, see [doc:\/\/com.apple.identitylookup\/documentation\/IdentityLookup\/setting-up-the-http-endpoints-for-live-caller-id-lookup].\n\n### Manage the app extension\n\nAfter configuring your data and connecting the app extension to the server, you have access to several functions and variables through the [doc:\/\/com.apple.identitylookup\/documentation\/IdentityLookup\/LiveCallerIDLookupManager] class. This allows you to manage the state of the app extension.\n\nThe app extension needs to be in an enabled state so the system can communicate with your server. To check the status of your app extension, use the [doc:\/\/com.apple.identitylookup\/documentation\/IdentityLookup\/LiveCallerIDLookupManager\/status(forExtensionWithIdentifier:)] function. You can call [doc:\/\/com.apple.identitylookup\/documentation\/IdentityLookup\/LiveCallerIDLookupManager\/openSettings()] to navigate to Settings, where the user can enable the app extension.\n\n### Refresh the data\n\nThe system fetches data from the parameters in the [doc:\/\/com.apple.identitylookup\/documentation\/IdentityLookup\/LiveCallerIDLookupExtensionContext] structure to communicate with the server. If you need to update the extension context, use the [doc:\/\/com.apple.identitylookup\/documentation\/IdentityLookup\/LiveCallerIDLookupManager\/reset(forExtensionWithIdentifier:)] method. This reregisters your app extension so the system caches the new parameters.\n\nIf you communicate to your app through push notifications, or other means, about changes to your server-side parameters, use the [doc:\/\/com.apple.identitylookup\/documentation\/IdentityLookup\/LiveCallerIDLookupManager\/refreshPIRParameters(forExtensionWithIdentifier:)] to update your dataset immediately. This function asks the system to refresh information about the server dataset, such as its size. The system periodically refreshes these parameters automatically.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/IdentityLookup\/getting-up-to-date-calling-and-blocking-information-for-your-app\ncrawled: 2025-12-02T17:02:36Z\n---\n\n# Getting up-to-date calling and blocking information for your app\n\n**Article**\n\nImplement the Live Caller ID Lookup app extension to provide call-blocking and identity services.\n\n## Overview\n\nWith the Live Caller ID Lookup app extension, you can provide caller ID and call-blocking services from a server you maintain. The app extension tells the system how to communicate with your server. When someone’s device receives a phone call, the system communicates with your back-end server to retrieve caller ID and blocking information, and then displays that information on the incoming call screen and in the device’s recent phone calls.\n\n\n\n### Add the app extension to your project\n\nTo use the Live Caller ID Lookup app extension, you need to add it to your Xcode project by choosing File > New > Target, selecting its template, and clicking Next.\n\n\n\nWhen you add this target to your project, it provides the initial files you need for your app extension.\n\n### Specify your server information\n\nAfter adding the app extension, the system needs configuration data to connect to your server and authenticate the person using your app. The app extension’s entrypoint is an object that adopts the [doc:\/\/com.apple.identitylookup\/documentation\/IdentityLookup\/LiveCallerIDLookupProtocol]. This defines a context parameter where you provide information for the system about your server and access tokens. The [doc:\/\/com.apple.identitylookup\/documentation\/IdentityLookup\/LiveCallerIDLookupExtensionContext] takes three parameters:\n\n- [doc:\/\/com.apple.identitylookup\/documentation\/IdentityLookup\/LiveCallerIDLookupExtensionContext\/serviceURL] — The endpoint for fetching information from your server.\n- [doc:\/\/com.apple.identitylookup\/documentation\/IdentityLookup\/LiveCallerIDLookupExtensionContext\/tokenIssuerURL]— The URL for the Private Access token issuer.\n- [doc:\/\/com.apple.identitylookup\/documentation\/IdentityLookup\/LiveCallerIDLookupExtensionContext\/userTierToken] — An HTTP bearer token that authenticates the person using your app.\n\nThe system uses Private Information Retrieval (PIR) to fetch a database entry without disclosing the query to the server. When an incoming call occurs, the PIR process privately checks the number against your server before revealing relevant caller information to the system.\n\nThe system caches the responses for server-side per entry configuration time. This means, if a second phone call comes in from the same number before the cache expires, the system uses the cached values instead of making another PIR request. For more information about setting up your server endpoints, see [doc:\/\/com.apple.identitylookup\/documentation\/IdentityLookup\/setting-up-the-http-endpoints-for-live-caller-id-lookup].\n\n```swift\nimport Foundation\nimport IdentityLookup\n\n@main\nstruct MyAppExtension: LiveCallerIDLookupProtocol {    \n    var context: LiveCallerIDLookupExtensionContext { get {\n        return LiveCallerIDLookupExtensionContext(\n            \/\/ The URL for the server endpoint that the system uses to fetch incoming call information.\n            serviceURL: URL(string: \"https:\/\/app.apple.com\")!,\n            \/\/ The URL of the token issuer.\n            tokenIssuerURL: URL(string: \"https:\/\/app.apple.com\")!,\n            \/\/ The token to authenticate the app. \n            userTierToken: Data(base64Encoded: \"BBBB\")!\n        )\n    }}\n}\n```\n\n### Manage the app extension\n\nAfter configuring your data and connecting the app extension to the server, you have access to several functions and variables through the [doc:\/\/com.apple.identitylookup\/documentation\/IdentityLookup\/LiveCallerIDLookupManager] class. This allows you to manage the state of the app extension.\n\nThe app extension needs to be in an enabled state so the system can communicate with your server. To check the status of your app extension, use the [doc:\/\/com.apple.identitylookup\/documentation\/IdentityLookup\/LiveCallerIDLookupManager\/status(forExtensionWithIdentifier:)] function. You can call [doc:\/\/com.apple.identitylookup\/documentation\/IdentityLookup\/LiveCallerIDLookupManager\/openSettings()] to navigate to Settings, where the user can enable the app extension.\n\n```swift\n\/\/ Check the status of your app extension.\nif LiveCallerIDLookupManager.shared.status(forExtensionWithIdentifier: extensionName) == .disabled {\n    \/\/ Show an alert.\n}\n\n\/\/ Open Settings.\ntry await LiveCallerIDLookupManager.shared.openSettings()\n```\n\n### Refresh the data\n\nThe system fetches data from the parameters in the [doc:\/\/com.apple.identitylookup\/documentation\/IdentityLookup\/LiveCallerIDLookupExtensionContext] structure to communicate with the server. If you need to update the extension context, use the [doc:\/\/com.apple.identitylookup\/documentation\/IdentityLookup\/LiveCallerIDLookupManager\/reset(forExtensionWithIdentifier:)] method. This reregisters your app extension so the system caches the new parameters.\n\nIf you communicate to your app through push notifications, or other means, about changes to your server-side parameters, use the [doc:\/\/com.apple.identitylookup\/documentation\/IdentityLookup\/LiveCallerIDLookupManager\/refreshPIRParameters(forExtensionWithIdentifier:)] to update your dataset immediately. This function asks the system to refresh information about the server dataset, such as its size. The system periodically refreshes these parameters automatically.\n\n## Live Caller ID Lookup\n\n- **Understanding how Live Caller ID Lookup preserves privacy**: Use Live Caller ID Lookup to protect user privacy by hiding the client’s IP address, using anonymous authentication, and hiding the incoming phone number.\n- **Formatting data for blocking and identity information**: Set up your PIR payload for call blocking and identity information.\n- **Setting up the HTTP endpoints for Live Caller ID Lookup**: Connect the on-device system to your server.\n- **LiveCallerIDLookupProtocol**: Information the system uses to query the app extension for context.\n- **LiveCallerIDLookupExtensionConfiguration**: An object that allows the system to query the app extension.\n- **LiveCallerIDLookupExtensionContext**: The information the system uses for configuration.\n- **CallLookupExtensionStatus**: Returns a value with the current state of the app extension.\n- **LiveCallerIDLookupManager**: The entry point that provides access to a collection of functions that help manage the state of the Live Caller ID Lookup app extension.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Use Live Caller ID Lookup to protect user privacy by hiding the client’s IP address, using anonymous authentication, and hiding the incoming phone number.",
          "name" : "Understanding how Live Caller ID Lookup preserves privacy",
          "url" : "https:\/\/developer.apple.com\/documentation\/IdentityLookup\/understanding-how-live-caller-id-lookup-preserves-privacy"
        },
        {
          "description" : "Set up your PIR payload for call blocking and identity information.",
          "name" : "Formatting data for blocking and identity information",
          "url" : "https:\/\/developer.apple.com\/documentation\/IdentityLookup\/formatting-data-for-blocking-and-identity-information"
        },
        {
          "description" : "Connect the on-device system to your server.",
          "name" : "Setting up the HTTP endpoints for Live Caller ID Lookup",
          "url" : "https:\/\/developer.apple.com\/documentation\/IdentityLookup\/setting-up-the-http-endpoints-for-live-caller-id-lookup"
        },
        {
          "description" : "Information the system uses to query the app extension for context.",
          "name" : "LiveCallerIDLookupProtocol",
          "url" : "https:\/\/developer.apple.com\/documentation\/IdentityLookup\/LiveCallerIDLookupProtocol"
        },
        {
          "description" : "An object that allows the system to query the app extension.",
          "name" : "LiveCallerIDLookupExtensionConfiguration",
          "url" : "https:\/\/developer.apple.com\/documentation\/IdentityLookup\/LiveCallerIDLookupExtensionConfiguration"
        },
        {
          "description" : "The information the system uses for configuration.",
          "name" : "LiveCallerIDLookupExtensionContext",
          "url" : "https:\/\/developer.apple.com\/documentation\/IdentityLookup\/LiveCallerIDLookupExtensionContext"
        },
        {
          "description" : "Returns a value with the current state of the app extension.",
          "name" : "CallLookupExtensionStatus",
          "url" : "https:\/\/developer.apple.com\/documentation\/IdentityLookup\/CallLookupExtensionStatus"
        },
        {
          "description" : "The entry point that provides access to a collection of functions that help manage the state of the Live Caller ID Lookup app extension.",
          "name" : "LiveCallerIDLookupManager",
          "url" : "https:\/\/developer.apple.com\/documentation\/IdentityLookup\/LiveCallerIDLookupManager"
        }
      ],
      "title" : "Live Caller ID Lookup"
    }
  ],
  "source" : "appleJSON",
  "title" : "Getting up-to-date calling and blocking information for your app",
  "url" : "https:\/\/developer.apple.com\/documentation\/IdentityLookup\/getting-up-to-date-calling-and-blocking-information-for-your-app"
}