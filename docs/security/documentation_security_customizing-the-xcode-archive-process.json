{
  "abstract" : "Archive, export, and notarize your app in one step using Xcode post-action build scripts.",
  "codeExamples" : [
    {
      "code" : "# notarytool credentials.\n# AC_PASSWORD is the name of the keychain item created with `notarytool store-credentials`.\n# Grant keychain access to Xcode if prompted by Xcode.\nAC_PASSWORD=\"App Store Connect Profile\"\n\n# Do all of the work in a subdirectory of \/tmp, and use a\n# unique ID so that there's no collision with previous builds.\nEXPORT_UUID=`uuidgen`\nEXPORT_PATH=\"\/tmp\/$PRODUCT_NAME-$EXPORT_UUID\/\"\nAPP_PATH=\"$EXPORT_PATH\/$PRODUCT_NAME.app\"\nDMG_PATH=\"$EXPORT_PATH\/$PRODUCT_NAME.dmg\"\n\nmkdir -p \"$EXPORT_PATH\"\n\n# Xcode doesn't show run script errors in build log.\nexec > \"$EXPORT_PATH\/Xcode run script.log\" 2>&1\n\n# Use osascript(1) to present notification banners; otherwise\n# there's no progress indication until the script finishes.\n\/usr\/bin\/osascript -e 'display notification \"Exporting application archive…\" with title \"Submitting app for notarization\"'\n\n# Ask xcodebuild(1) to export the app. Use the export options\n# from a previous manual export that used a Developer ID.\n\/usr\/bin\/xcodebuild -exportArchive -archivePath \"$ARCHIVE_PATH\" -exportOptionsPlist \"$SRCROOT\/ExportOptions.plist\" -exportPath \"$EXPORT_PATH\"\n\nosascript -e 'display notification \"Creating UDIF Disk Image…\" with title \"Submitting app for notarization\"'\n\n# Create a UDIF bzip2-compressed disk image.\ncd \"$EXPORT_PATH\/\"\nmkdir \"$PRODUCT_NAME\"\nmv -v \"$APP_PATH\" \"$PRODUCT_NAME\"\n\n\/usr\/bin\/hdiutil create -srcfolder \"$PRODUCT_NAME\" -format UDBZ \"$DMG_PATH\"\n\nosascript -e 'display notification \"Submitting UDIF Disk Image for notarization…\" with title \"Submitting app for notarization\"'\n\n# Submit the finished deliverables for notarization.\n# Wait up to 2 hours for a response.\n# Use verbose logging in order to file feedback if an error occurs.\n\"$DEVELOPER_BIN_DIR\/notarytool\" submit -p \"$AC_PASSWORD\" --verbose \"$DMG_PATH\" --wait --timeout 2h --output-format plist > \"NotarizationResponse.plist\"\n\nreturn_code=$?\n\nif [ $return_code -eq 0 ]; then\nmessage=`\/usr\/libexec\/PlistBuddy -c \"Print :message\" \"NotarizationResponse.plist\"`\nstatus=`\/usr\/libexec\/PlistBuddy -c \"Print :status\" \"NotarizationResponse.plist\"`\nelse\nmessage=\"An Error Occurred.\"\nstatus=\"Check Xcode log.\"\nopen \"$EXPORT_PATH\/Xcode run script.log\"\nfi\n\n# Show and speak the final status.\nosascript -e \"on run(argv)\" \\\n-e 'display notification item 1 of argv & \" : \" & item 2 of argv with title \"Submitting app for notarization\" sound name \"Crystal\"' \\\n-e 'set text item delimiters to \", \"' \\\n-e \"set args to argv as text\" \\\n-e \"say args\" \\\n-e \"delay 5\" \\\n-e \"end\" \\\n-- \"$message\" \"$status\"\n\n# Open the folder that was created, which also signals completion.\nopen \"$EXPORT_PATH\"",
      "language" : "sh"
    }
  ],
  "contentHash" : "5f19b85540fbb3ff6efe67f1d1f29d98861e90860620cc94c599064ae92e18f8",
  "crawledAt" : "2025-12-03T05:05:00Z",
  "id" : "874589D0-ACEF-4B33-9E6F-B5C123074FBA",
  "kind" : "article",
  "language" : "swift",
  "module" : "Security",
  "overview" : "## Overview\n\nBefore distributing your software, you must create an archive containing your executables. From that archive, you must perform additional steps to create a distributable version of your software and to notarize your executables. To simplify the workflow, you can incorporate the distribution and notarization steps into the archive process using post-action scripts.\n\nA post-action script adds custom script commands to the end of standard Xcode commands. To add a script to the Archive command, open the [https:\/\/help.apple.com\/xcode\/mac\/11.4\/#\/dev0bee46f46] for your project and expand the Archive scheme. Select the post-actions option and enter the details of your script in the space provided.\n\n\n\nThe following sample script exports your archive to a format that can be sent to the Apple notary service. The script includes several calls to the `osascript` command to display progress messages. Replace the value of the `AC_PASSWORD` variable with an appropriate value for your App Store Connect account.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/Security\/customizing-the-xcode-archive-process\ncrawled: 2025-12-03T05:05:00Z\n---\n\n# Customizing the Xcode archive process\n\n**Article**\n\nArchive, export, and notarize your app in one step using Xcode post-action build scripts.\n\n## Overview\n\nBefore distributing your software, you must create an archive containing your executables. From that archive, you must perform additional steps to create a distributable version of your software and to notarize your executables. To simplify the workflow, you can incorporate the distribution and notarization steps into the archive process using post-action scripts.\n\nA post-action script adds custom script commands to the end of standard Xcode commands. To add a script to the Archive command, open the [https:\/\/help.apple.com\/xcode\/mac\/11.4\/#\/dev0bee46f46] for your project and expand the Archive scheme. Select the post-actions option and enter the details of your script in the space provided.\n\n\n\nThe following sample script exports your archive to a format that can be sent to the Apple notary service. The script includes several calls to the `osascript` command to display progress messages. Replace the value of the `AC_PASSWORD` variable with an appropriate value for your App Store Connect account.\n\n```sh\n# notarytool credentials.\n# AC_PASSWORD is the name of the keychain item created with `notarytool store-credentials`.\n# Grant keychain access to Xcode if prompted by Xcode.\nAC_PASSWORD=\"App Store Connect Profile\"\n\n# Do all of the work in a subdirectory of \/tmp, and use a\n# unique ID so that there's no collision with previous builds.\nEXPORT_UUID=`uuidgen`\nEXPORT_PATH=\"\/tmp\/$PRODUCT_NAME-$EXPORT_UUID\/\"\nAPP_PATH=\"$EXPORT_PATH\/$PRODUCT_NAME.app\"\nDMG_PATH=\"$EXPORT_PATH\/$PRODUCT_NAME.dmg\"\n\nmkdir -p \"$EXPORT_PATH\"\n\n# Xcode doesn't show run script errors in build log.\nexec > \"$EXPORT_PATH\/Xcode run script.log\" 2>&1\n\n# Use osascript(1) to present notification banners; otherwise\n# there's no progress indication until the script finishes.\n\/usr\/bin\/osascript -e 'display notification \"Exporting application archive…\" with title \"Submitting app for notarization\"'\n\n# Ask xcodebuild(1) to export the app. Use the export options\n# from a previous manual export that used a Developer ID.\n\/usr\/bin\/xcodebuild -exportArchive -archivePath \"$ARCHIVE_PATH\" -exportOptionsPlist \"$SRCROOT\/ExportOptions.plist\" -exportPath \"$EXPORT_PATH\"\n\nosascript -e 'display notification \"Creating UDIF Disk Image…\" with title \"Submitting app for notarization\"'\n\n# Create a UDIF bzip2-compressed disk image.\ncd \"$EXPORT_PATH\/\"\nmkdir \"$PRODUCT_NAME\"\nmv -v \"$APP_PATH\" \"$PRODUCT_NAME\"\n\n\/usr\/bin\/hdiutil create -srcfolder \"$PRODUCT_NAME\" -format UDBZ \"$DMG_PATH\"\n\nosascript -e 'display notification \"Submitting UDIF Disk Image for notarization…\" with title \"Submitting app for notarization\"'\n\n# Submit the finished deliverables for notarization.\n# Wait up to 2 hours for a response.\n# Use verbose logging in order to file feedback if an error occurs.\n\"$DEVELOPER_BIN_DIR\/notarytool\" submit -p \"$AC_PASSWORD\" --verbose \"$DMG_PATH\" --wait --timeout 2h --output-format plist > \"NotarizationResponse.plist\"\n\nreturn_code=$?\n\nif [ $return_code -eq 0 ]; then\nmessage=`\/usr\/libexec\/PlistBuddy -c \"Print :message\" \"NotarizationResponse.plist\"`\nstatus=`\/usr\/libexec\/PlistBuddy -c \"Print :status\" \"NotarizationResponse.plist\"`\nelse\nmessage=\"An Error Occurred.\"\nstatus=\"Check Xcode log.\"\nopen \"$EXPORT_PATH\/Xcode run script.log\"\nfi\n\n# Show and speak the final status.\nosascript -e \"on run(argv)\" \\\n-e 'display notification item 1 of argv & \" : \" & item 2 of argv with title \"Submitting app for notarization\" sound name \"Crystal\"' \\\n-e 'set text item delimiters to \", \"' \\\n-e \"set args to argv as text\" \\\n-e \"say args\" \\\n-e \"delay 5\" \\\n-e \"end\" \\\n-- \"$message\" \"$status\"\n\n# Open the folder that was created, which also signals completion.\nopen \"$EXPORT_PATH\"\n```\n\n",
  "sections" : [

  ],
  "source" : "appleJSON",
  "title" : "Customizing the Xcode archive process",
  "url" : "https:\/\/developer.apple.com\/documentation\/Security\/customizing-the-xcode-archive-process"
}