{
  "abstract" : "Enforce secure network links in your app by relying on App Transport Security.",
  "codeExamples" : [
    {
      "code" : "App Transport Security has blocked a cleartext HTTP (http:\/\/) resource\nload since it is insecure. Temporary exceptions can be configured via\nyour app's Info.plist file.",
      "language" : "console"
    },
    {
      "code" : "NSAppTransportSecurity : Dictionary {\n    NSAllowsArbitraryLoads : Boolean\n    NSAllowsArbitraryLoadsForMedia : Boolean\n    NSAllowsArbitraryLoadsInWebContent : Boolean\n    NSAllowsLocalNetworking : Boolean\n    NSExceptionDomains : Dictionary {\n        <domain-name-string> : Dictionary {\n            NSIncludesSubdomains : Boolean\n            NSExceptionAllowsInsecureHTTPLoads : Boolean\n            NSExceptionMinimumTLSVersion : String\n            NSExceptionRequiresForwardSecrecy : Boolean\n            NSRequiresCertificateTransparency : Boolean\n        }\n    }\n}",
      "language" : "console"
    }
  ],
  "contentHash" : "135f47b9dcd29caf872aecc63bfadff45853d16d66382aa5ee42ddbf4e4cee79",
  "crawledAt" : "2025-12-03T09:48:22Z",
  "id" : "4E94E045-8BCF-4682-8602-BD7318A20513",
  "kind" : "collection",
  "language" : "swift",
  "module" : "Security",
  "overview" : "## Overview\n\nOn Apple platforms, a networking security feature called App Transport Security (ATS) improves privacy and data integrity for all apps and app extensions. It does this by requiring that network connections made by your app are secured by the Transport Layer Security (TLS) protocol using reliable certificates and ciphers. ATS blocks connections that don’t meet minimum security requirements.\n\n\n\nATS operates by default for apps linked against the iOS 9.0 or macOS 10.11 SDKs or later. In cases where you need to connect to a server that isn’t fully secure—and that you can’t reconfigure to make more secure—you can add exceptions to loosen some of the ATS requirements.\n\n### Prefer High-Level Frameworks in Your App\n\nThe system enforces ATS when you use the standard [doc:\/\/com.apple.documentation\/documentation\/Foundation\/url-loading-system]. Instances of [doc:\/\/com.apple.documentation\/documentation\/Foundation\/URLSession] automatically negotiate the most secure connection available from the server. The only action your app must take is to use secure URLs, like those beginning with `https`. Otherwise, ATS denies the connection and prints a console message:\n\nATS doesn’t apply to calls your app makes to lower-level networking interfaces like the [doc:\/\/com.apple.documentation\/documentation\/Network] framework or [doc:\/\/com.apple.documentation\/documentation\/CFNetwork]. In these cases, you take responsibility for ensuring the security of the connection. You can construct a secure connection this way, but mistakes are both easy to make and costly. It’s typically safest to rely on the [doc:\/\/com.apple.documentation\/documentation\/Foundation\/url-loading-system] instead.\n\n### Ensure the Network Server Meets Minimum Requirements\n\nA secure server establishes its identity using an X.509 digital certificate. A connecting client examines this certificate to perform default server trust evaluation, which includes checking that the certificate:\n\nATS requires all of these things, and then provides extended security checks:\n\n### Configure Exceptions Only When Needed; Prefer Server Fixes\n\nATS disallows a connection if the server fails to meet one of the security checks discussed in the previous section. Your best response is to update the server. If you can’t do that for some reason, you can specify exceptions in your app to disable one or more aspects of ATS.\n\nYou configure ATS exceptions by providing a dictionary as the value for the optional [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Information-Property-List\/NSAppTransportSecurity] key in your app’s [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Information-Property-List] file. The dictionary has the following structure, where all keys are optional:\n\nKeys at the first level of the [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Information-Property-List\/NSAppTransportSecurity] dictionary apply to connections made to any domain not specifically called out in the [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Information-Property-List\/NSAppTransportSecurity\/NSExceptionDomains] sub-dictionary. For example, by setting [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Information-Property-List\/NSAppTransportSecurity\/NSAllowsArbitraryLoads] set to `YES`, you completely disable ATS for all network connections:\n\n\n\nDepending on your use case, you can provide narrower exceptions. For example, by setting [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Information-Property-List\/NSAppTransportSecurity\/NSAllowsArbitraryLoadsInWebContent] to `YES`, you can disable ATS restrictions on calls made from within web views, like instances of [doc:\/\/com.apple.documentation\/documentation\/WebKit\/WKWebView]:\n\n\n\nYou might only need to limit your ATS exception to a single domain. For example, if you need to access the insecure server `http:\/\/example.com`, you can still maintain all the benefits of ATS for other domains by setting the [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Information-Property-List\/NSExceptionAllowsInsecureHTTPLoads] to `YES` in the domain-specific sub-dictionary:\n\n\n\nYou can use the `nscurl` command line tool to connect to a server using different combinations of ATS exceptions. This helps you quickly narrow down the source of any ATS failures you have and figure out what exceptions you need. See [doc:\/\/com.apple.security\/documentation\/Security\/identifying-the-source-of-blocked-connections] for details.\n\n### Provide Justification for Exceptions\n\nAdding certain ATS exceptions to your app’s [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Information-Property-List] file requires you to provide justification, and might trigger additional App Store review for your app. Exceptions that require justification are:\n\nSome examples of justifications eligible for consideration are:\n\nWhen submitting your app to the App Store, provide sufficient information for the App Store to determine why your app cannot make secure connections by default.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/Security\/preventing-insecure-network-connections\ncrawled: 2025-12-03T09:48:22Z\n---\n\n# Preventing Insecure Network Connections\n\nEnforce secure network links in your app by relying on App Transport Security.\n\n## Overview\n\nOn Apple platforms, a networking security feature called App Transport Security (ATS) improves privacy and data integrity for all apps and app extensions. It does this by requiring that network connections made by your app are secured by the Transport Layer Security (TLS) protocol using reliable certificates and ciphers. ATS blocks connections that don’t meet minimum security requirements.\n\n\n\nATS operates by default for apps linked against the iOS 9.0 or macOS 10.11 SDKs or later. In cases where you need to connect to a server that isn’t fully secure—and that you can’t reconfigure to make more secure—you can add exceptions to loosen some of the ATS requirements.\n\n\n\n### Prefer High-Level Frameworks in Your App\n\nThe system enforces ATS when you use the standard [doc:\/\/com.apple.documentation\/documentation\/Foundation\/url-loading-system]. Instances of [doc:\/\/com.apple.documentation\/documentation\/Foundation\/URLSession] automatically negotiate the most secure connection available from the server. The only action your app must take is to use secure URLs, like those beginning with `https`. Otherwise, ATS denies the connection and prints a console message:\n\n```console\nApp Transport Security has blocked a cleartext HTTP (http:\/\/) resource\nload since it is insecure. Temporary exceptions can be configured via\nyour app's Info.plist file.\n```\n\nATS doesn’t apply to calls your app makes to lower-level networking interfaces like the [doc:\/\/com.apple.documentation\/documentation\/Network] framework or [doc:\/\/com.apple.documentation\/documentation\/CFNetwork]. In these cases, you take responsibility for ensuring the security of the connection. You can construct a secure connection this way, but mistakes are both easy to make and costly. It’s typically safest to rely on the [doc:\/\/com.apple.documentation\/documentation\/Foundation\/url-loading-system] instead.\n\n### Ensure the Network Server Meets Minimum Requirements\n\nA secure server establishes its identity using an X.509 digital certificate. A connecting client examines this certificate to perform default server trust evaluation, which includes checking that the certificate:\n\n- Has an intact digital signature, showing that the certificate hasn’t been tampered with.\n- Isn’t expired.\n- Has a name that matches the server’s DNS name.\n- Is signed by another valid certificate, which is in turned signed by another, and so on back to a trusted anchor certificate, which must be issued by a Certificate Authority (CA). The anchor certificate must be part of the client operating system, as indicated in [https:\/\/support.apple.com\/en-us\/HT204132], or be installed on the client by the user or a system administrator.\n\nATS requires all of these things, and then provides extended security checks:\n\n- The server certificate must be signed with either a Rivest-Shamir-Adleman (RSA) key of at least 2048 bits, or an Elliptic-Curve Cryptography (ECC) key of at least 256 bits.\n- The certificate must use the Secure Hash Algorithm 2 (SHA-2) with a digest length, sometimes called a *fingerprint*, of at least 256 bits (that is, SHA-256 or greater).\n- The connection must use Transport Layer Security (TLS) protocol version 1.2 or later.\n- Data must be exchanged using either the AES-128 or the AES-256 symmetric cipher.\n- The link must support perfect forward secrecy (PFS) through Elliptic Curve Diffie-Hellman Ephemeral (ECDHE) key exchange.\n\n\n\n### Configure Exceptions Only When Needed; Prefer Server Fixes\n\nATS disallows a connection if the server fails to meet one of the security checks discussed in the previous section. Your best response is to update the server. If you can’t do that for some reason, you can specify exceptions in your app to disable one or more aspects of ATS.\n\n\n\nYou configure ATS exceptions by providing a dictionary as the value for the optional [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Information-Property-List\/NSAppTransportSecurity] key in your app’s [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Information-Property-List] file. The dictionary has the following structure, where all keys are optional:\n\n```console\nNSAppTransportSecurity : Dictionary {\n    NSAllowsArbitraryLoads : Boolean\n    NSAllowsArbitraryLoadsForMedia : Boolean\n    NSAllowsArbitraryLoadsInWebContent : Boolean\n    NSAllowsLocalNetworking : Boolean\n    NSExceptionDomains : Dictionary {\n        <domain-name-string> : Dictionary {\n            NSIncludesSubdomains : Boolean\n            NSExceptionAllowsInsecureHTTPLoads : Boolean\n            NSExceptionMinimumTLSVersion : String\n            NSExceptionRequiresForwardSecrecy : Boolean\n            NSRequiresCertificateTransparency : Boolean\n        }\n    }\n}\n```\n\nKeys at the first level of the [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Information-Property-List\/NSAppTransportSecurity] dictionary apply to connections made to any domain not specifically called out in the [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Information-Property-List\/NSAppTransportSecurity\/NSExceptionDomains] sub-dictionary. For example, by setting [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Information-Property-List\/NSAppTransportSecurity\/NSAllowsArbitraryLoads] set to `YES`, you completely disable ATS for all network connections:\n\n\n\nDepending on your use case, you can provide narrower exceptions. For example, by setting [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Information-Property-List\/NSAppTransportSecurity\/NSAllowsArbitraryLoadsInWebContent] to `YES`, you can disable ATS restrictions on calls made from within web views, like instances of [doc:\/\/com.apple.documentation\/documentation\/WebKit\/WKWebView]:\n\n\n\nYou might only need to limit your ATS exception to a single domain. For example, if you need to access the insecure server `http:\/\/example.com`, you can still maintain all the benefits of ATS for other domains by setting the [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Information-Property-List\/NSExceptionAllowsInsecureHTTPLoads] to `YES` in the domain-specific sub-dictionary:\n\n\n\n\n\nYou can use the `nscurl` command line tool to connect to a server using different combinations of ATS exceptions. This helps you quickly narrow down the source of any ATS failures you have and figure out what exceptions you need. See [doc:\/\/com.apple.security\/documentation\/Security\/identifying-the-source-of-blocked-connections] for details.\n\n### Provide Justification for Exceptions\n\nAdding certain ATS exceptions to your app’s [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Information-Property-List] file requires you to provide justification, and might trigger additional App Store review for your app. Exceptions that require justification are:\n\n- Arbitrary connection exceptions ([doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Information-Property-List\/NSAppTransportSecurity\/NSAllowsArbitraryLoads])\n- Media streaming exceptions ([doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Information-Property-List\/NSAppTransportSecurity\/NSAllowsArbitraryLoadsForMedia])\n- Web content loads ([doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Information-Property-List\/NSAppTransportSecurity\/NSAllowsArbitraryLoadsInWebContent])\n- Per-domain nonsecure connections ([doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Information-Property-List\/NSExceptionAllowsInsecureHTTPLoads])\n- Per-domain minimum TLS version ([doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Information-Property-List\/NSExceptionMinimumTLSVersion])\n\nSome examples of justifications eligible for consideration are:\n\n- The app must connect to a server managed by another entity that doesn’t support secure connections.\n- The app must support connecting to devices that cannot be upgraded to use secure connections, and that must be accessed using public host names.\n- The app must display embedded web content from a variety of sources, but can’t use a class supported by the web content exception.\n- The app loads media content that is encrypted and that contains no personalized information.\n\nWhen submitting your app to the App Store, provide sufficient information for the App Store to determine why your app cannot make secure connections by default.\n\n\n\n## Evaluation\n\n- **Identifying the Source of Blocked Connections**: Figure out why App Transport Security denies a network connection.\n\n## Exceptions\n\n- **NSAppTransportSecurity**: A description of changes made to the default security for HTTP connections.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Figure out why App Transport Security denies a network connection.",
          "name" : "Identifying the Source of Blocked Connections",
          "url" : "https:\/\/developer.apple.com\/documentation\/Security\/identifying-the-source-of-blocked-connections"
        }
      ],
      "title" : "Evaluation"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "A description of changes made to the default security for HTTP connections.",
          "name" : "NSAppTransportSecurity",
          "url" : "https:\/\/developer.apple.com\/documentation\/BundleResources\/Information-Property-List\/NSAppTransportSecurity"
        }
      ],
      "title" : "Exceptions"
    }
  ],
  "source" : "appleJSON",
  "title" : "Preventing Insecure Network Connections",
  "url" : "https:\/\/developer.apple.com\/documentation\/Security\/preventing-insecure-network-connections"
}