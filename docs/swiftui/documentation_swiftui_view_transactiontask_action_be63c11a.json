{
  "abstract" : "Provides a task to perform before this view appears",
  "codeExamples" : [
    {
      "code" : " struct TransactionView: View {\n     @State private var configuration: CredentialTransaction.Configuration?\n     private var assertion: PresentmentIntentAssertion \/\/ acquirePresentmentIntentAssertion() before transitioning into this view (step 1)\n     private var activeSession: CredentialSession\n     private var selectedCredential: Credential\n\n     var body: some View {\n         VStack {\n             Button(\"Perform Transaction\") {\n                 guard let configuration else {\n                    configuration = activeSession.configuration()\n                    return\n                 }\n\n                 configuration.invalidate() \/\/ step 3\n                 \/\/ Optional\n                 assertion = try await session.acquirePresentmentIntentAssertion() \/\/ step 4\n                 \/\/ handle any proprietary UI\n                 try await assertion.relinquish() \/\/ step 5\n                 \/\/ Optional end\n             }\n             .transactionTask(configuration) { transaction in\n                 do {\n                     try await assertion.relinquish() \/\/ step 2\n                     try await transaction.performTransaction(using: selectedCredential)\n                 } catch {\n                     \/\/ code to handle error\n                 }\n             }\n         }\n     }\n }",
      "language" : "swift"
    }
  ],
  "contentHash" : "efc577bd418d311eec571e9988d158178defca5bd1ab033bca6a92559be0a808",
  "crawledAt" : "2025-12-02T17:26:15Z",
  "declaration" : {
    "code" : "nonisolated func transactionTask(_ configuration: CredentialTransaction.Configuration?, action: @escaping (CredentialTransaction) async -> Void) -> some View\n",
    "language" : "swift"
  },
  "id" : "710B01CE-976D-4625-80BE-B50868855F8C",
  "kind" : "method",
  "language" : "swift",
  "module" : "SecureElementCredential",
  "overview" : "## Discussion\n\nThis task provides an instance of a `CredentialTransaction` to be used to perform transactions.\n\nA typical client should use the APIs in the following sequence:\n\nFor example:",
  "platforms" : [
    "iOS",
    "iPadOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/SwiftUI\/View\/transactionTask(_:action:)\ncrawled: 2025-12-02T17:26:15Z\n---\n\n# transactionTask(_:action:)\n\n**Instance Method**\n\nProvides a task to perform before this view appears\n\n## Declaration\n\n```swift\nnonisolated func transactionTask(_ configuration: CredentialTransaction.Configuration?, action: @escaping (CredentialTransaction) async -> Void) -> some View\n\n```\n\n## Parameters\n\n- **configuration**: A configuration containing information about the transaction task. When the task is completed or an error is encountered while performing the task, the system invalidates this configuration, and the `CredentialTransaction` is invalidated.\n- **action**: A closure that will be called when `isPerformingTransaction` is `true`. It provides a `CredentialTransaction` instance that can be used to perform transactions.\n\n## Discussion\n\nThis task provides an instance of a `CredentialTransaction` to be used to perform transactions.\n\nA typical client should use the APIs in the following sequence:\n\n1. `acquirePresentmentIntentAssertion()` prior to showing any proprietary payment UI\n2. `relinquish()` the assertion before invoking the transaction API\n3. `configuration.invalidate()` after presenting the credential\n4. Optionally, `acquirePresentmentIntentAssertion()` to finish up any proprietary payment UI\n5. `relinquish()` the assertion\n\nFor example:\n\n```swift\n struct TransactionView: View {\n     @State private var configuration: CredentialTransaction.Configuration?\n     private var assertion: PresentmentIntentAssertion \/\/ acquirePresentmentIntentAssertion() before transitioning into this view (step 1)\n     private var activeSession: CredentialSession\n     private var selectedCredential: Credential\n\n     var body: some View {\n         VStack {\n             Button(\"Perform Transaction\") {\n                 guard let configuration else {\n                    configuration = activeSession.configuration()\n                    return\n                 }\n\n                 configuration.invalidate() \/\/ step 3\n                 \/\/ Optional\n                 assertion = try await session.acquirePresentmentIntentAssertion() \/\/ step 4\n                 \/\/ handle any proprietary UI\n                 try await assertion.relinquish() \/\/ step 5\n                 \/\/ Optional end\n             }\n             .transactionTask(configuration) { transaction in\n                 do {\n                     try await assertion.relinquish() \/\/ step 2\n                     try await transaction.performTransaction(using: selectedCredential)\n                 } catch {\n                     \/\/ code to handle error\n                 }\n             }\n         }\n     }\n }\n```\n\n## Accessing Apple Pay and Wallet\n\n- **PayWithApplePayButton**: A type that provides a button to pay with Apple pay.\n- **AddPassToWalletButton**: A type that provides a button that enables people to add a new or existing pass to Apple Wallet.\n- **VerifyIdentityWithWalletButton**: A type that displays a button to present the identity verification flow.\n- **addOrderToWalletButtonStyle(_:)**: Sets the button’s style.\n- **addPassToWalletButtonStyle(_:)**: Sets the style to be used by the button. (see `PKAddPassButtonStyle`).\n- **onApplePayCouponCodeChange(perform:)**: Called when a user has entered or updated a coupon code. This is required if the user is being asked to provide a coupon code.\n- **onApplePayPaymentMethodChange(perform:)**: Called when a payment method has changed and asks for an update payment request. If this modifier isn’t provided Wallet will assume the payment method is valid.\n- **onApplePayShippingContactChange(perform:)**: Called when a user selected a shipping address. This is required if the user is being asked to provide a shipping contact.\n- **onApplePayShippingMethodChange(perform:)**: Called when a user selected a shipping method. This is required if the user is being asked to provide a shipping method.\n- **payLaterViewAction(_:)**: Sets the action on the PayLaterView. See `PKPayLaterAction`.\n- **payLaterViewDisplayStyle(_:)**: Sets the display style on the PayLaterView. See `PKPayLaterDisplayStyle`.\n- **payWithApplePayButtonStyle(_:)**: Sets the style to be used by the button. (see `PayWithApplePayButtonStyle`).\n- **verifyIdentityWithWalletButtonStyle(_:)**: Sets the style to be used by the button. (see `PKIdentityButtonStyle`).\n- **AsyncShareablePassConfiguration**\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "A type that provides a button to pay with Apple pay.",
          "name" : "PayWithApplePayButton",
          "url" : "https:\/\/developer.apple.com\/documentation\/PassKit\/PayWithApplePayButton"
        },
        {
          "description" : "A type that provides a button that enables people to add a new or existing pass to Apple Wallet.",
          "name" : "AddPassToWalletButton",
          "url" : "https:\/\/developer.apple.com\/documentation\/PassKit\/AddPassToWalletButton"
        },
        {
          "description" : "A type that displays a button to present the identity verification flow.",
          "name" : "VerifyIdentityWithWalletButton",
          "url" : "https:\/\/developer.apple.com\/documentation\/PassKit\/VerifyIdentityWithWalletButton"
        },
        {
          "description" : "Sets the button’s style.",
          "name" : "addOrderToWalletButtonStyle(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/SwiftUI\/View\/addOrderToWalletButtonStyle(_:)"
        },
        {
          "description" : "Sets the style to be used by the button. (see `PKAddPassButtonStyle`).",
          "name" : "addPassToWalletButtonStyle(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/SwiftUI\/View\/addPassToWalletButtonStyle(_:)"
        },
        {
          "description" : "Called when a user has entered or updated a coupon code. This is required if the user is being asked to provide a coupon code.",
          "name" : "onApplePayCouponCodeChange(perform:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/SwiftUI\/View\/onApplePayCouponCodeChange(perform:)"
        },
        {
          "description" : "Called when a payment method has changed and asks for an update payment request. If this modifier isn’t provided Wallet will assume the payment method is valid.",
          "name" : "onApplePayPaymentMethodChange(perform:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/SwiftUI\/View\/onApplePayPaymentMethodChange(perform:)"
        },
        {
          "description" : "Called when a user selected a shipping address. This is required if the user is being asked to provide a shipping contact.",
          "name" : "onApplePayShippingContactChange(perform:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/SwiftUI\/View\/onApplePayShippingContactChange(perform:)"
        },
        {
          "description" : "Called when a user selected a shipping method. This is required if the user is being asked to provide a shipping method.",
          "name" : "onApplePayShippingMethodChange(perform:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/SwiftUI\/View\/onApplePayShippingMethodChange(perform:)"
        },
        {
          "description" : "Sets the action on the PayLaterView. See `PKPayLaterAction`.",
          "name" : "payLaterViewAction(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/SwiftUI\/View\/payLaterViewAction(_:)"
        },
        {
          "description" : "Sets the display style on the PayLaterView. See `PKPayLaterDisplayStyle`.",
          "name" : "payLaterViewDisplayStyle(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/SwiftUI\/View\/payLaterViewDisplayStyle(_:)"
        },
        {
          "description" : "Sets the style to be used by the button. (see `PayWithApplePayButtonStyle`).",
          "name" : "payWithApplePayButtonStyle(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/SwiftUI\/View\/payWithApplePayButtonStyle(_:)"
        },
        {
          "description" : "Sets the style to be used by the button. (see `PKIdentityButtonStyle`).",
          "name" : "verifyIdentityWithWalletButtonStyle(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/SwiftUI\/View\/verifyIdentityWithWalletButtonStyle(_:)"
        },
        {
          "description" : "",
          "name" : "AsyncShareablePassConfiguration",
          "url" : "https:\/\/developer.apple.com\/documentation\/PassKit\/AsyncShareablePassConfiguration"
        }
      ],
      "title" : "Accessing Apple Pay and Wallet"
    }
  ],
  "source" : "appleJSON",
  "title" : "transactionTask(_:action:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/SwiftUI\/View\/transactionTask(_:action:)"
}