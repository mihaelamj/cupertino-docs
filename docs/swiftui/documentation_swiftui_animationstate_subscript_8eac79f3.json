{
  "abstract" : "Accesses the state for a custom key.",
  "codeExamples" : [
    {
      "code" : "private struct PausableState<Value: VectorArithmetic>: AnimationStateKey {\n    var paused = false\n    var pauseTime: TimeInterval = 0.0\n\n    static var defaultValue: Self { .init() }\n}",
      "language" : "swift"
    },
    {
      "code" : "extension AnimationContext {\n    fileprivate var pausableState: PausableState<Value> {\n        get { state[PausableState<Value>.self] }\n        set { state[PausableState<Value>.self] = newValue }\n    }\n}",
      "language" : "swift"
    },
    {
      "code" : "struct PausableAnimation: CustomAnimation {\n    let base: Animation\n\n    func animate<V>(value: V, time: TimeInterval, context: inout AnimationContext<V>) -> V? where V : VectorArithmetic {\n        let paused = context.environment.animationPaused\n\n        let pausableState = context.pausableState\n        var pauseTime = pausableState.pauseTime\n        if pausableState.paused != paused {\n            pauseTime = time - pauseTime\n            context.pausableState = PausableState(paused: paused, pauseTime: pauseTime)\n        }\n\n        let effectiveTime = paused ? pauseTime : time - pauseTime\n        let result = base.animate(value: value, time: effectiveTime, context: &context)\n        return result\n    }\n}",
      "language" : "swift"
    }
  ],
  "contentHash" : "253063a771fda7ae8574e44882f67b0c8387de28bfb04bc95bccabc7629734b6",
  "crawledAt" : "2025-12-03T05:55:43Z",
  "declaration" : {
    "code" : "subscript<K>(key: K.Type) -> K.Value where K : AnimationStateKey { get set }",
    "language" : "swift"
  },
  "id" : "BDE647B3-7287-45E3-A2F4-09A18676AB02",
  "kind" : "unknown",
  "language" : "swift",
  "module" : "SwiftUI",
  "overview" : "## Overview\n\nCreate a custom animation state value by defining a key that conforms to the [doc:\/\/com.apple.SwiftUI\/documentation\/SwiftUI\/AnimationStateKey] protocol and provide the [doc:\/\/com.apple.SwiftUI\/documentation\/SwiftUI\/AnimationStateKey\/defaultValue] for the key. Also include properties to read and write state values that your [doc:\/\/com.apple.SwiftUI\/documentation\/SwiftUI\/CustomAnimation] uses. For example, the following code defines a key named `PausableState` that has two state values, `paused` and `pauseTime`:\n\nUse that key with the subscript operator of the [doc:\/\/com.apple.SwiftUI\/documentation\/SwiftUI\/AnimationState] structure to get and set a value for the key. For more convenient access to the key value, extend [doc:\/\/com.apple.SwiftUI\/documentation\/SwiftUI\/AnimationContext] with a computed property that gets and sets the key’s value.\n\nTo access the state values in a [doc:\/\/com.apple.SwiftUI\/documentation\/SwiftUI\/CustomAnimation], call the custom computed property, then read and write the state values that the custom [doc:\/\/com.apple.SwiftUI\/documentation\/SwiftUI\/AnimationStateKey] provides.",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "tvOS",
    "visionOS",
    "watchOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/SwiftUI\/AnimationState\/subscript(_:)\ncrawled: 2025-12-03T05:55:43Z\n---\n\n# subscript(_:)\n\n**Instance Subscript**\n\nAccesses the state for a custom key.\n\n## Declaration\n\n```swift\nsubscript<K>(key: K.Type) -> K.Value where K : AnimationStateKey { get set }\n```\n\n## Overview\n\nCreate a custom animation state value by defining a key that conforms to the [doc:\/\/com.apple.SwiftUI\/documentation\/SwiftUI\/AnimationStateKey] protocol and provide the [doc:\/\/com.apple.SwiftUI\/documentation\/SwiftUI\/AnimationStateKey\/defaultValue] for the key. Also include properties to read and write state values that your [doc:\/\/com.apple.SwiftUI\/documentation\/SwiftUI\/CustomAnimation] uses. For example, the following code defines a key named `PausableState` that has two state values, `paused` and `pauseTime`:\n\n```swift\nprivate struct PausableState<Value: VectorArithmetic>: AnimationStateKey {\n    var paused = false\n    var pauseTime: TimeInterval = 0.0\n\n    static var defaultValue: Self { .init() }\n}\n```\n\nUse that key with the subscript operator of the [doc:\/\/com.apple.SwiftUI\/documentation\/SwiftUI\/AnimationState] structure to get and set a value for the key. For more convenient access to the key value, extend [doc:\/\/com.apple.SwiftUI\/documentation\/SwiftUI\/AnimationContext] with a computed property that gets and sets the key’s value.\n\n```swift\nextension AnimationContext {\n    fileprivate var pausableState: PausableState<Value> {\n        get { state[PausableState<Value>.self] }\n        set { state[PausableState<Value>.self] = newValue }\n    }\n}\n```\n\nTo access the state values in a [doc:\/\/com.apple.SwiftUI\/documentation\/SwiftUI\/CustomAnimation], call the custom computed property, then read and write the state values that the custom [doc:\/\/com.apple.SwiftUI\/documentation\/SwiftUI\/AnimationStateKey] provides.\n\n```swift\nstruct PausableAnimation: CustomAnimation {\n    let base: Animation\n\n    func animate<V>(value: V, time: TimeInterval, context: inout AnimationContext<V>) -> V? where V : VectorArithmetic {\n        let paused = context.environment.animationPaused\n\n        let pausableState = context.pausableState\n        var pauseTime = pausableState.pauseTime\n        if pausableState.paused != paused {\n            pauseTime = time - pauseTime\n            context.pausableState = PausableState(paused: paused, pauseTime: pauseTime)\n        }\n\n        let effectiveTime = paused ? pauseTime : time - pauseTime\n        let result = base.animate(value: value, time: effectiveTime, context: &context)\n        return result\n    }\n}\n```\n\n",
  "sections" : [

  ],
  "source" : "appleJSON",
  "title" : "subscript(_:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/SwiftUI\/AnimationState\/subscript(_:)"
}