{
  "abstract" : "Adds a task to perform before this view appears or when the translation configuration changes.",
  "codeExamples" : [
    {
      "code" : "struct ContentView: View {\n    @State private var sourceText = \"Hallo, Welt!\"\n    var sourceLanguage: Locale.Language?\n    var targetLanguage: Locale.Language?\n\n    @State private var targetText: String?\n    @State private var configuration: TranslationSession.Configuration?\n\n    var body: some View {\n        VStack {\n            Text(targetText ?? sourceText)\n            Button(\"Translate\") {\n                guard configuration == nil else {\n                    configuration?.invalidate()\n                    return\n                }\n\n                 configuration = TranslationSession.Configuration(\n                    source: sourceLanguage,\n                    target: targetLanguage)\n            }\n            .translationTask(configuration) { session in\n                Task { @MainActor in\n                    do {\n                        let response = try await session.translate(sourceText)\n                        targetText = response.targetText\n                    } catch {\n                        \/\/ code to handle error\n                    }\n                }\n            }\n        }\n    }\n}",
      "language" : "swift"
    }
  ],
  "contentHash" : "54753db89951e4e8664adea8025570ce18375377dae316f322e1fb0c5ff660da",
  "crawledAt" : "2025-12-02T16:05:45Z",
  "declaration" : {
    "code" : "nonisolated func translationTask(_ configuration: TranslationSession.Configuration?, action: @escaping (TranslationSession) async -> Void) -> some View\n",
    "language" : "swift"
  },
  "id" : "09C1A52C-1413-452D-AF90-1F3FD68557F1",
  "kind" : "method",
  "language" : "swift",
  "module" : "Translation",
  "overview" : "## Discussion\n\nThis task provides an instance of `TranslationSession` to use in translations. Whenever [doc:\/\/com.apple.documentation\/documentation\/Translation\/TranslationSession\/Configuration]  changes and isn’t `nil`, the closure `action` runs, providing a `TranslationSession` instance to perform one or more translations.\n\nFor example, you can create a [doc:\/\/com.apple.documentation\/documentation\/Translation\/TranslationSession\/Configuration] in response to a button press to trigger translation:\n\nThe system throws a `fatalError` if you use a `TranslationSession` instance after the attached view disappears or if you use it after changing the `configuration`. This causes the `action` closure to provide a new `TranslationSession` instance.",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/SwiftUI\/View\/translationTask(_:action:)\ncrawled: 2025-12-02T16:05:45Z\n---\n\n# translationTask(_:action:)\n\n**Instance Method**\n\nAdds a task to perform before this view appears or when the translation configuration changes.\n\n## Declaration\n\n```swift\nnonisolated func translationTask(_ configuration: TranslationSession.Configuration?, action: @escaping (TranslationSession) async -> Void) -> some View\n\n```\n\n## Parameters\n\n- **configuration**: A configuration for a `TranslationSession`. When this configuration is non-nil and changes, the `action` runs providing an instance of `TranslationSession` to perform translations.\n- **action**: This closure runs when the `configuration` is non-nil and changes. If the `configuration` is initially non-nil, it calls the action closure when the view appears and provides a `TranslationSession` instance to perform one or multiple translations.\n\n## Discussion\n\nThis task provides an instance of `TranslationSession` to use in translations. Whenever [doc:\/\/com.apple.documentation\/documentation\/Translation\/TranslationSession\/Configuration]  changes and isn’t `nil`, the closure `action` runs, providing a `TranslationSession` instance to perform one or more translations.\n\nFor example, you can create a [doc:\/\/com.apple.documentation\/documentation\/Translation\/TranslationSession\/Configuration] in response to a button press to trigger translation:\n\n```swift\nstruct ContentView: View {\n    @State private var sourceText = \"Hallo, Welt!\"\n    var sourceLanguage: Locale.Language?\n    var targetLanguage: Locale.Language?\n\n    @State private var targetText: String?\n    @State private var configuration: TranslationSession.Configuration?\n\n    var body: some View {\n        VStack {\n            Text(targetText ?? sourceText)\n            Button(\"Translate\") {\n                guard configuration == nil else {\n                    configuration?.invalidate()\n                    return\n                }\n\n                 configuration = TranslationSession.Configuration(\n                    source: sourceLanguage,\n                    target: targetLanguage)\n            }\n            .translationTask(configuration) { session in\n                Task { @MainActor in\n                    do {\n                        let response = try await session.translate(sourceText)\n                        targetText = response.targetText\n                    } catch {\n                        \/\/ code to handle error\n                    }\n                }\n            }\n        }\n    }\n}\n```\n\nThe system throws a `fatalError` if you use a `TranslationSession` instance after the attached view disappears or if you use it after changing the `configuration`. This causes the `action` closure to provide a new `TranslationSession` instance.\n\n## Showing a translation\n\n- **translationPresentation(isPresented:text:attachmentAnchor:arrowEdge:replacementAction:)**: Presents a translation popover when a given condition is true.\n- **translationTask(source:target:action:)**: Adds a task to perform before this view appears or when the specified source or target languages change.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Presents a translation popover when a given condition is true.",
          "name" : "translationPresentation(isPresented:text:attachmentAnchor:arrowEdge:replacementAction:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/SwiftUI\/View\/translationPresentation(isPresented:text:attachmentAnchor:arrowEdge:replacementAction:)"
        },
        {
          "description" : "Adds a task to perform before this view appears or when the specified source or target languages change.",
          "name" : "translationTask(source:target:action:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/SwiftUI\/View\/translationTask(source:target:action:)"
        }
      ],
      "title" : "Showing a translation"
    }
  ],
  "source" : "appleJSON",
  "title" : "translationTask(_:action:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/SwiftUI\/View\/translationTask(_:action:)"
}