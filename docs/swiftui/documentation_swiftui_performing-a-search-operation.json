{
  "abstract" : "Update search results based on search text and optional tokens that you store.",
  "codeExamples" : [
    {
      "code" : "@State private var searchText: String = \"\"",
      "language" : "swift"
    },
    {
      "code" : "class Model: ObservableObject {\n    @Published var searchText: String = \"\"\n}",
      "language" : "swift"
    },
    {
      "code" : "struct ContentView: View {\n    @EnvironmentObject private var model: Model\n    @State private var departmentId: Department.ID?\n    @State private var productId: Product.ID?\n\n    var body: some View {\n        NavigationSplitView {\n            DepartmentList(departmentId: $departmentId)\n        } content: {\n            ProductList(departmentId: departmentId, productId: $productId)\n                .searchable(text: $model.searchText)\n        } detail: {\n            ProductDetails(productId: productId)\n        }\n    }\n}",
      "language" : "swift"
    },
    {
      "code" : "enum FruitToken: String, Identifiable, Hashable, CaseIterable {\n    case apple\n    case pear\n    case banana\n    var id: Self { self }\n}",
      "language" : "swift"
    },
    {
      "code" : "@Published var tokens: [FruitToken] = []",
      "language" : "swift"
    },
    {
      "code" : "ProductList(departmentId: departmentId, productId: $productId)\n    .searchable(text: $model.searchText, tokens: $model.tokens) { token in\n        switch token {\n        case .apple: Text(\"Apple\")\n        case .pear: Text(\"Pear\")\n        case .banana: Text(\"Banana\")\n        }\n    }",
      "language" : "swift"
    },
    {
      "code" : "struct FruitToken: String, Identifiable, Hashable, CaseIterable {\n    enum Kind {\n        case apple\n        case pear\n        case banana\n        var id: Self { self }\n    }\n\n    enum Hydration: String, Identifiable, Hashable, CaseIterable {\n        case hydrated\n        case dehydrated\n    }\n\n    var kind: Kind\n    var hydration: Hydration = .hydrated\n}",
      "language" : "swift"
    },
    {
      "code" : "ProductList(departmentId: departmentId, productId: $productId)\n    .searchable(text: $model.searchText, tokens: $model.tokens) { $token in\n        Picker(selection: $token.hydration) {\n            ForEach(FruitToken.Hydration.allCases) { hydration in\n                switch hydration {\n                case .hydrated: Text(\"Hydrated\")\n                case .dehydrated: Text(\"Dehydrated\")\n                }\n            }\n        } label: {\n            switch token.kind {\n            case .apple: Text(\"Apple\")\n            case .pear: Text(\"Pear\")\n            case .banana: Text(\"Banana\")\n            }\n        }\n    }",
      "language" : "swift"
    },
    {
      "code" : "func filteredProducts(\n    products: [Product],\n    searchText: String,\n    tokens: [FruitToken]\n) -> [Product] {\n    guard !searchText.isEmpty || !tokens.isEmpty else { return products }\n    return products.filter { product in\n        product.name.lowercased().contains(searchText.lowercased()) ||\n        tokens.map({ $0.rawValue }).contains(product.name.lowercased())\n    }\n}",
      "language" : "swift"
    }
  ],
  "contentHash" : "c4af366dd5236953f9d6726273d2fe83f0129e1c5d3110095d56ca2dc9a33e1a",
  "crawledAt" : "2025-12-02T17:12:56Z",
  "id" : "BA1D7FD7-E2F3-42B5-829D-6F8269B84E86",
  "kind" : "article",
  "language" : "swift",
  "module" : "SwiftUI",
  "overview" : "## Overview\n\nTo conduct a search in your app’s data model, create storage for the query text and present it with a searchable view modifier. Because you manage the storage, you can detect when it changes and update the search operation in response. By updating search results as people type, you ensure that your app’s search interface is responsive.\n\nYou can also optionally provide storage for tokens, which are discrete search terms that your app recognizes. Tokens provide a way to combine multiple search terms, and make it easier for you to indicate that a search term is common or expected in your app.\n\n\n\nFor information on how to control the placement of the search field in your app’s interface, see [doc:\/\/com.apple.SwiftUI\/documentation\/SwiftUI\/Adding-a-search-interface-to-your-app].\n\n### Provide storage for a string\n\nThe searchable modifiers take a [doc:\/\/com.apple.SwiftUI\/documentation\/SwiftUI\/Binding] to a string value for the `text` input. The string serves as the storage for the search query field that SwiftUI displays. You can create this storage inside a view using a [doc:\/\/com.apple.SwiftUI\/documentation\/SwiftUI\/State] property, and initialize it to an empty string:\n\nTo make it easier to share the search query among different views, you can create a published value inside an observable object that’s part of your app’s model:\n\nIn either case, pass a [doc:\/\/com.apple.SwiftUI\/documentation\/SwiftUI\/Binding] to this string into the searchable view modifier by adding the dollar sign (`$`) prefix to the value:\n\n### Provide storage for tokens\n\nIn addition to a search string, the search field can also display tokens when you use one of the searchable modifiers that has a `tokens` parameter, like [doc:\/\/com.apple.SwiftUI\/documentation\/SwiftUI\/View\/searchable(text:tokens:placement:prompt:token:)].\n\nYou create tokens by defining a group of values that conform to the [doc:\/\/com.apple.documentation\/documentation\/Swift\/Identifiable] protocol, then instantiate the collection of values. For example you can create an enumeration of fruit tokens:\n\nThen add a new published property to your model to store a collection of tokens:\n\nTo display tokens, provide a [doc:\/\/com.apple.SwiftUI\/documentation\/SwiftUI\/Binding] to the `tokens` array as the searchable modifier’s `tokens` input parameter, and describe how to draw each token using the `token` closure. From the closure, return the [doc:\/\/com.apple.SwiftUI\/documentation\/SwiftUI\/View] that represents the token given as an input. For example, you can use a [doc:\/\/com.apple.SwiftUI\/documentation\/SwiftUI\/Text] view to represent each token:\n\nYou can represent the token with a [doc:\/\/com.apple.SwiftUI\/documentation\/SwiftUI\/Text] view, as the above example demonstrates. In iOS and iPadOS, you can use a [doc:\/\/com.apple.SwiftUI\/documentation\/SwiftUI\/Label] instead. Ensure the view clearly represents the corresponding search query, and if you use a label, that the tokens fit the search query field’s height. Tokens appear at the beginning of the search field before any plain text. The following shows how the search field looks when the `tokens` array contains the `apple` and `banana` tokens:\n\n\n\n### Support tokens that have a mutable component\n\nYou can enable people to mutate part of the data that represents a token by using a [doc:\/\/com.apple.SwiftUI\/documentation\/SwiftUI\/Picker] in the `token` closure. For example, suppose you have fruit token data that contains both a kind and a hydration property:\n\nWith your new model, specify a [doc:\/\/com.apple.SwiftUI\/documentation\/SwiftUI\/Binding] to the token in the `token` closure by adding a dollar sign (`$`). Use the binding to create a picker for the `hydration` property and a label that uses the `kind` property:\n\n### Add tokens to the search\n\nProvide a way for people to add tokens to the search field. You can do this in different ways. For example, you can:\n\n### Conduct the search\n\nWhen you detect changes in the search query, your app can begin a search. How you perform the search operation depends on how your app stores and presents data. One approach is to filter the elements that appear in a [doc:\/\/com.apple.SwiftUI\/documentation\/SwiftUI\/List] based on whether a field in the list’s items matches the search query. For example, you can create a method that returns only the items in an array of products with names that match the search text or one of the tokens currently in the search field:\n\nConsider the complexity of the search and the cost of changing the search terms. If the cost is high, like when updates require network access, or for complex filter logic, consider prefetching and caching data or reducing the frequency of updates. Alternatively, you can wait until someone submits the query before conducting the search. For information about detecting query submission, see [doc:\/\/com.apple.SwiftUI\/documentation\/SwiftUI\/Managing-search-interface-activation].\n\nIf the search space can be broken into broad categories, you can help people narrow the search more quickly by providing a scope. See [doc:\/\/com.apple.SwiftUI\/documentation\/SwiftUI\/Scoping-a-search-operation].",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/SwiftUI\/Performing-a-search-operation\ncrawled: 2025-12-02T17:12:56Z\n---\n\n# Performing a search operation\n\n**Article**\n\nUpdate search results based on search text and optional tokens that you store.\n\n## Overview\n\nTo conduct a search in your app’s data model, create storage for the query text and present it with a searchable view modifier. Because you manage the storage, you can detect when it changes and update the search operation in response. By updating search results as people type, you ensure that your app’s search interface is responsive.\n\nYou can also optionally provide storage for tokens, which are discrete search terms that your app recognizes. Tokens provide a way to combine multiple search terms, and make it easier for you to indicate that a search term is common or expected in your app.\n\n\n\nFor information on how to control the placement of the search field in your app’s interface, see [doc:\/\/com.apple.SwiftUI\/documentation\/SwiftUI\/Adding-a-search-interface-to-your-app].\n\n### Provide storage for a string\n\nThe searchable modifiers take a [doc:\/\/com.apple.SwiftUI\/documentation\/SwiftUI\/Binding] to a string value for the `text` input. The string serves as the storage for the search query field that SwiftUI displays. You can create this storage inside a view using a [doc:\/\/com.apple.SwiftUI\/documentation\/SwiftUI\/State] property, and initialize it to an empty string:\n\n```swift\n@State private var searchText: String = \"\"\n```\n\nTo make it easier to share the search query among different views, you can create a published value inside an observable object that’s part of your app’s model:\n\n```swift\nclass Model: ObservableObject {\n    @Published var searchText: String = \"\"\n}\n```\n\nIn either case, pass a [doc:\/\/com.apple.SwiftUI\/documentation\/SwiftUI\/Binding] to this string into the searchable view modifier by adding the dollar sign (`$`) prefix to the value:\n\n```swift\nstruct ContentView: View {\n    @EnvironmentObject private var model: Model\n    @State private var departmentId: Department.ID?\n    @State private var productId: Product.ID?\n\n    var body: some View {\n        NavigationSplitView {\n            DepartmentList(departmentId: $departmentId)\n        } content: {\n            ProductList(departmentId: departmentId, productId: $productId)\n                .searchable(text: $model.searchText)\n        } detail: {\n            ProductDetails(productId: productId)\n        }\n    }\n}\n```\n\n### Provide storage for tokens\n\nIn addition to a search string, the search field can also display tokens when you use one of the searchable modifiers that has a `tokens` parameter, like [doc:\/\/com.apple.SwiftUI\/documentation\/SwiftUI\/View\/searchable(text:tokens:placement:prompt:token:)].\n\nYou create tokens by defining a group of values that conform to the [doc:\/\/com.apple.documentation\/documentation\/Swift\/Identifiable] protocol, then instantiate the collection of values. For example you can create an enumeration of fruit tokens:\n\n```swift\nenum FruitToken: String, Identifiable, Hashable, CaseIterable {\n    case apple\n    case pear\n    case banana\n    var id: Self { self }\n}\n```\n\nThen add a new published property to your model to store a collection of tokens:\n\n```swift\n@Published var tokens: [FruitToken] = []\n```\n\nTo display tokens, provide a [doc:\/\/com.apple.SwiftUI\/documentation\/SwiftUI\/Binding] to the `tokens` array as the searchable modifier’s `tokens` input parameter, and describe how to draw each token using the `token` closure. From the closure, return the [doc:\/\/com.apple.SwiftUI\/documentation\/SwiftUI\/View] that represents the token given as an input. For example, you can use a [doc:\/\/com.apple.SwiftUI\/documentation\/SwiftUI\/Text] view to represent each token:\n\n```swift\nProductList(departmentId: departmentId, productId: $productId)\n    .searchable(text: $model.searchText, tokens: $model.tokens) { token in\n        switch token {\n        case .apple: Text(\"Apple\")\n        case .pear: Text(\"Pear\")\n        case .banana: Text(\"Banana\")\n        }\n    }\n```\n\nYou can represent the token with a [doc:\/\/com.apple.SwiftUI\/documentation\/SwiftUI\/Text] view, as the above example demonstrates. In iOS and iPadOS, you can use a [doc:\/\/com.apple.SwiftUI\/documentation\/SwiftUI\/Label] instead. Ensure the view clearly represents the corresponding search query, and if you use a label, that the tokens fit the search query field’s height. Tokens appear at the beginning of the search field before any plain text. The following shows how the search field looks when the `tokens` array contains the `apple` and `banana` tokens:\n\n\n\n### Support tokens that have a mutable component\n\nYou can enable people to mutate part of the data that represents a token by using a [doc:\/\/com.apple.SwiftUI\/documentation\/SwiftUI\/Picker] in the `token` closure. For example, suppose you have fruit token data that contains both a kind and a hydration property:\n\n```swift\nstruct FruitToken: String, Identifiable, Hashable, CaseIterable {\n    enum Kind {\n        case apple\n        case pear\n        case banana\n        var id: Self { self }\n    }\n\n    enum Hydration: String, Identifiable, Hashable, CaseIterable {\n        case hydrated\n        case dehydrated\n    }\n\n    var kind: Kind\n    var hydration: Hydration = .hydrated\n}\n```\n\nWith your new model, specify a [doc:\/\/com.apple.SwiftUI\/documentation\/SwiftUI\/Binding] to the token in the `token` closure by adding a dollar sign (`$`). Use the binding to create a picker for the `hydration` property and a label that uses the `kind` property:\n\n```swift\nProductList(departmentId: departmentId, productId: $productId)\n    .searchable(text: $model.searchText, tokens: $model.tokens) { $token in\n        Picker(selection: $token.hydration) {\n            ForEach(FruitToken.Hydration.allCases) { hydration in\n                switch hydration {\n                case .hydrated: Text(\"Hydrated\")\n                case .dehydrated: Text(\"Dehydrated\")\n                }\n            }\n        } label: {\n            switch token.kind {\n            case .apple: Text(\"Apple\")\n            case .pear: Text(\"Pear\")\n            case .banana: Text(\"Banana\")\n            }\n        }\n    }\n```\n\n### Add tokens to the search\n\nProvide a way for people to add tokens to the search field. You can do this in different ways. For example, you can:\n\n- Suggest tokens to add to the array by using one of the searchable view modifiers that have a `suggestedTokens` input parameter, like [doc:\/\/com.apple.SwiftUI\/documentation\/SwiftUI\/View\/searchable(text:tokens:suggestedTokens:placement:prompt:token:)]. People select suggestions from a list that appears below the search field. For more information about offering suggestions for tokens, as well as for search text, see [doc:\/\/com.apple.SwiftUI\/documentation\/SwiftUI\/Suggesting-search-terms].\n- Monitor the search string as people edit it. When you detect a substring that matches one of the tokens, convert the text into a token by removing the relevant characters from the string and add the corresponding token to the `tokens` array.\n- Wait until you see a dividing character in the search string, like a comma or a space, and then attempt to tokenize the preceding characters.\n- Wait until someone submits the search, and then attempt to tokenize the entire search string. For more information about submitting a search, see [doc:\/\/com.apple.SwiftUI\/documentation\/SwiftUI\/Managing-search-interface-activation].\n\n### Conduct the search\n\nWhen you detect changes in the search query, your app can begin a search. How you perform the search operation depends on how your app stores and presents data. One approach is to filter the elements that appear in a [doc:\/\/com.apple.SwiftUI\/documentation\/SwiftUI\/List] based on whether a field in the list’s items matches the search query. For example, you can create a method that returns only the items in an array of products with names that match the search text or one of the tokens currently in the search field:\n\n```swift\nfunc filteredProducts(\n    products: [Product],\n    searchText: String,\n    tokens: [FruitToken]\n) -> [Product] {\n    guard !searchText.isEmpty || !tokens.isEmpty else { return products }\n    return products.filter { product in\n        product.name.lowercased().contains(searchText.lowercased()) ||\n        tokens.map({ $0.rawValue }).contains(product.name.lowercased())\n    }\n}\n```\n\nConsider the complexity of the search and the cost of changing the search terms. If the cost is high, like when updates require network access, or for complex filter logic, consider prefetching and caching data or reducing the frequency of updates. Alternatively, you can wait until someone submits the query before conducting the search. For information about detecting query submission, see [doc:\/\/com.apple.SwiftUI\/documentation\/SwiftUI\/Managing-search-interface-activation].\n\nIf the search space can be broken into broad categories, you can help people narrow the search more quickly by providing a scope. See [doc:\/\/com.apple.SwiftUI\/documentation\/SwiftUI\/Scoping-a-search-operation].\n\n## Searching your app’s data model\n\n- **Adding a search interface to your app**: Present an interface that people can use to search for content in your app.\n- **searchable(text:placement:prompt:)**: Marks this view as searchable, which configures the display of a search field.\n- **searchable(text:tokens:placement:prompt:token:)**: Marks this view as searchable with text and tokens.\n- **searchable(text:editableTokens:placement:prompt:token:)**: Marks this view as searchable, which configures the display of a search field.\n- **SearchFieldPlacement**: The placement of a search field in a view hierarchy.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Present an interface that people can use to search for content in your app.",
          "name" : "Adding a search interface to your app",
          "url" : "https:\/\/developer.apple.com\/documentation\/SwiftUI\/Adding-a-search-interface-to-your-app"
        },
        {
          "description" : "Marks this view as searchable, which configures the display of a search field.",
          "name" : "searchable(text:placement:prompt:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/SwiftUI\/View\/searchable(text:placement:prompt:)"
        },
        {
          "description" : "Marks this view as searchable with text and tokens.",
          "name" : "searchable(text:tokens:placement:prompt:token:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/SwiftUI\/View\/searchable(text:tokens:placement:prompt:token:)"
        },
        {
          "description" : "Marks this view as searchable, which configures the display of a search field.",
          "name" : "searchable(text:editableTokens:placement:prompt:token:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/SwiftUI\/View\/searchable(text:editableTokens:placement:prompt:token:)"
        },
        {
          "description" : "The placement of a search field in a view hierarchy.",
          "name" : "SearchFieldPlacement",
          "url" : "https:\/\/developer.apple.com\/documentation\/SwiftUI\/SearchFieldPlacement"
        }
      ],
      "title" : "Searching your app’s data model"
    }
  ],
  "source" : "appleJSON",
  "title" : "Performing a search operation",
  "url" : "https:\/\/developer.apple.com\/documentation\/SwiftUI\/Performing-a-search-operation"
}