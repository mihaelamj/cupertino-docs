{
  "abstract" : "Selects a subscription offer to apply to a purchase that a customer makes from a subscription store view, a store view, or a product view.",
  "codeExamples" : [
    {
      "code" : "import SwiftUI\nimport StoreKit\n\n@available(iOS 18.0, macOS 15.0, tvOS 18.0, watchOS 11.0, visionOS 2.0, *)\nstruct MyView: View {\n\n    var body: some View {\n        SubscriptionStoreView(groupID: groupIdentifier)\n            .preferredSubscriptionOffer { product, subscription, eligibleOffers in\n                \/\/ Determine the offer to use from the list of eligibleOffers.\n                \/\/ This example just uses the first offer.\n                return eligibleOffers.first\n            }\n    }\n}",
      "language" : "swift"
    }
  ],
  "contentHash" : "101c837f00e344aeee98f26da8e9d9bbd9ae6d43e70e52b268d2f76dc4a55c61",
  "crawledAt" : "2025-12-02T17:25:08Z",
  "declaration" : {
    "code" : "nonisolated func preferredSubscriptionOffer(_ offer: @escaping (Product, Product.SubscriptionInfo, [Product.SubscriptionOffer]) -> Product.SubscriptionOffer?) -> some View\n",
    "language" : "swift"
  },
  "id" : "78B0F058-AD26-479C-90B8-94DF4D2255F7",
  "kind" : "method",
  "language" : "swift",
  "module" : "StoreKit",
  "overview" : "## Discussion\n\nSubscription stores within this view use the subscription offer you specify to configure the appearance of the subscription plans. [doc:\/\/com.apple.documentation\/documentation\/StoreKit\/ProductView] doesn’t display the terms of a subscription offer in the UI, but you can still use this modifier to declare which offer product views within a view hierarchy apply to a purchase.\n\nOffer preferences that use this modifier override offer preferences from ancestor views.\n\nIf StoreKit determines that the customer is eligible for more than one offer, the system calls the `offer` closure before it draws the product on the subscription store view, or before the customer initiates a purchase on a store view or product view. Return the subscription offer to apply to the product, if any, to have system-provided UI reflect the discounted pricing terms under the selected offer.\n\nIf your `offer` closure returns nil, the system selects the introductory offer, if it exists, and if the customer is eligible for it.\n\nThe following code example sets the preferred subscription offer to the first offer the customer is eligible for:",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "tvOS",
    "visionOS",
    "watchOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/SwiftUI\/View\/preferredSubscriptionOffer(_:)\ncrawled: 2025-12-02T17:25:08Z\n---\n\n# preferredSubscriptionOffer(_:)\n\n**Instance Method**\n\nSelects a subscription offer to apply to a purchase that a customer makes from a subscription store view, a store view, or a product view.\n\n## Declaration\n\n```swift\nnonisolated func preferredSubscriptionOffer(_ offer: @escaping (Product, Product.SubscriptionInfo, [Product.SubscriptionOffer]) -> Product.SubscriptionOffer?) -> some View\n\n```\n\n## Parameters\n\n- **offer**: A closure that returns the subscription offer to apply to the customer’s purchase.\n\n## Discussion\n\nSubscription stores within this view use the subscription offer you specify to configure the appearance of the subscription plans. [doc:\/\/com.apple.documentation\/documentation\/StoreKit\/ProductView] doesn’t display the terms of a subscription offer in the UI, but you can still use this modifier to declare which offer product views within a view hierarchy apply to a purchase.\n\nOffer preferences that use this modifier override offer preferences from ancestor views.\n\n\n\nIf StoreKit determines that the customer is eligible for more than one offer, the system calls the `offer` closure before it draws the product on the subscription store view, or before the customer initiates a purchase on a store view or product view. Return the subscription offer to apply to the product, if any, to have system-provided UI reflect the discounted pricing terms under the selected offer.\n\nIf your `offer` closure returns nil, the system selects the introductory offer, if it exists, and if the customer is eligible for it.\n\nThe following code example sets the preferred subscription offer to the first offer the customer is eligible for:\n\n```swift\nimport SwiftUI\nimport StoreKit\n\n@available(iOS 18.0, macOS 15.0, tvOS 18.0, watchOS 11.0, visionOS 2.0, *)\nstruct MyView: View {\n\n    var body: some View {\n        SubscriptionStoreView(groupID: groupIdentifier)\n            .preferredSubscriptionOffer { product, subscription, eligibleOffers in\n                \/\/ Determine the offer to use from the list of eligibleOffers.\n                \/\/ This example just uses the first offer.\n                return eligibleOffers.first\n            }\n    }\n}\n```\n\n## Interacting with the App Store and Apple Music\n\n- **appStoreOverlay(isPresented:configuration:)**: Presents a StoreKit overlay when a given condition is true.\n- **manageSubscriptionsSheet(isPresented:)**\n- **refundRequestSheet(for:isPresented:onDismiss:)**: Display the refund request sheet for the given transaction.\n- **offerCodeRedemption(isPresented:onCompletion:)**: Presents a sheet that enables customers to redeem offer codes that you configure in App Store Connect.\n- **musicSubscriptionOffer(isPresented:options:onLoadCompletion:)**: Initiates the process of presenting a sheet with subscription offers for Apple Music when the `isPresented` binding is `true`.\n- **currentEntitlementTask(for:priority:action:)**: Declares the view as dependent on the entitlement of an In-App Purchase product, and returns a modified view.\n- **inAppPurchaseOptions(_:)**: Add a function to call before initiating a purchase from StoreKit view within this view, providing a set of options for the purchase.\n- **manageSubscriptionsSheet(isPresented:subscriptionGroupID:)**\n- **onInAppPurchaseCompletion(perform:)**: Add an action to perform when a purchase initiated from a StoreKit view within this view completes.\n- **onInAppPurchaseStart(perform:)**: Add an action to perform when a user triggers the purchase button on a StoreKit view within this view.\n- **productIconBorder()**: Adds a standard border to an in-app purchase product’s icon .\n- **productViewStyle(_:)**: Sets the style for In-App Purchase product views within a view.\n- **productDescription(_:)**: Configure the visibility of labels displaying an in-app purchase product description within the view.\n- **storeButton(_:for:)**: Specifies the visibility of auxiliary buttons that store view and subscription store view instances may use.\n- **storeProductTask(for:priority:action:)**: Declares the view as dependent on an In-App Purchase product and returns a modified view.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Presents a StoreKit overlay when a given condition is true.",
          "name" : "appStoreOverlay(isPresented:configuration:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/SwiftUI\/View\/appStoreOverlay(isPresented:configuration:)"
        },
        {
          "description" : "",
          "name" : "manageSubscriptionsSheet(isPresented:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/SwiftUI\/View\/manageSubscriptionsSheet(isPresented:)"
        },
        {
          "description" : "Display the refund request sheet for the given transaction.",
          "name" : "refundRequestSheet(for:isPresented:onDismiss:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/SwiftUI\/View\/refundRequestSheet(for:isPresented:onDismiss:)"
        },
        {
          "description" : "Presents a sheet that enables customers to redeem offer codes that you configure in App Store Connect.",
          "name" : "offerCodeRedemption(isPresented:onCompletion:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/SwiftUI\/View\/offerCodeRedemption(isPresented:onCompletion:)"
        },
        {
          "description" : "Initiates the process of presenting a sheet with subscription offers for Apple Music when the `isPresented` binding is `true`.",
          "name" : "musicSubscriptionOffer(isPresented:options:onLoadCompletion:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/SwiftUI\/View\/musicSubscriptionOffer(isPresented:options:onLoadCompletion:)"
        },
        {
          "description" : "Declares the view as dependent on the entitlement of an In-App Purchase product, and returns a modified view.",
          "name" : "currentEntitlementTask(for:priority:action:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/SwiftUI\/View\/currentEntitlementTask(for:priority:action:)"
        },
        {
          "description" : "Add a function to call before initiating a purchase from StoreKit view within this view, providing a set of options for the purchase.",
          "name" : "inAppPurchaseOptions(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/SwiftUI\/View\/inAppPurchaseOptions(_:)"
        },
        {
          "description" : "",
          "name" : "manageSubscriptionsSheet(isPresented:subscriptionGroupID:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/SwiftUI\/View\/manageSubscriptionsSheet(isPresented:subscriptionGroupID:)"
        },
        {
          "description" : "Add an action to perform when a purchase initiated from a StoreKit view within this view completes.",
          "name" : "onInAppPurchaseCompletion(perform:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/SwiftUI\/View\/onInAppPurchaseCompletion(perform:)"
        },
        {
          "description" : "Add an action to perform when a user triggers the purchase button on a StoreKit view within this view.",
          "name" : "onInAppPurchaseStart(perform:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/SwiftUI\/View\/onInAppPurchaseStart(perform:)"
        },
        {
          "description" : "Adds a standard border to an in-app purchase product’s icon .",
          "name" : "productIconBorder()",
          "url" : "https:\/\/developer.apple.com\/documentation\/SwiftUI\/View\/productIconBorder()"
        },
        {
          "description" : "Sets the style for In-App Purchase product views within a view.",
          "name" : "productViewStyle(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/SwiftUI\/View\/productViewStyle(_:)"
        },
        {
          "description" : "Configure the visibility of labels displaying an in-app purchase product description within the view.",
          "name" : "productDescription(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/SwiftUI\/View\/productDescription(_:)"
        },
        {
          "description" : "Specifies the visibility of auxiliary buttons that store view and subscription store view instances may use.",
          "name" : "storeButton(_:for:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/SwiftUI\/View\/storeButton(_:for:)"
        },
        {
          "description" : "Declares the view as dependent on an In-App Purchase product and returns a modified view.",
          "name" : "storeProductTask(for:priority:action:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/SwiftUI\/View\/storeProductTask(for:priority:action:)"
        }
      ],
      "title" : "Interacting with the App Store and Apple Music"
    }
  ],
  "source" : "appleJSON",
  "title" : "preferredSubscriptionOffer(_:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/SwiftUI\/View\/preferredSubscriptionOffer(_:)"
}