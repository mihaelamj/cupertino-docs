{
  "abstract" : "Exchange discovery tokens over the local network.",
  "codeExamples" : [
    {
      "code" : "<key>NSBonjourServices<\/key>\n<array>\n    <string>_myAppName._tcp<\/string>\n    <string>_myAppName._udp<\/string>\n<\/array>",
      "language" : "swift"
    },
    {
      "code" : "let data = try! NSKeyedArchiver.archivedData(withRootObject: niSession.discoverToken, requiringSecureCoding: true)\n",
      "language" : "swift"
    },
    {
      "code" : "let peerDiscoverToken = try! NSKeyedUnarchiver.unarchivedObject(ofClass: NIDiscoverToken, from: data) ",
      "language" : "swift"
    }
  ],
  "contentHash" : "2fcdf24b816fc386de23a64f516222ba98c80622f336d0f340af61503c6953b3",
  "crawledAt" : "2025-12-02T16:12:23Z",
  "id" : "B29FDA28-9329-4399-9402-E75229591254",
  "kind" : "article",
  "language" : "swift",
  "module" : "Nearby Interaction",
  "overview" : "## Overview\n\nTo start an interaction session with a nearby device, an app checks for nearby peer devices. When the app finds a peer, it creates an [doc:\/\/com.apple.nearbyinteraction\/documentation\/NearbyInteraction\/NISession] and sends the session’s [doc:\/\/com.apple.nearbyinteraction\/documentation\/NearbyInteraction\/NISession\/discoveryToken] to the peer using the network technology on which they have agreed. An app can use [doc:\/\/com.apple.documentation\/documentation\/MultipeerConnectivity] to find nearby peers and exchange discovery tokens over the local network.\n\nFor an example app that find peer devices using Multipeer Connectivity, see [doc:\/\/com.apple.nearbyinteraction\/documentation\/NearbyInteraction\/implementing-interactions-between-users-in-close-proximity].\n\n### Add Bonjour Services Plist Keys\n\nTo use the local network on iOS and iPadOS 14, your app requires the [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Information-Property-List\/NSBonjourServices] key present in its `Info.plist`. The value of the key adheres to the following convention, including `.tcp` and `.udp` extensions.\n\nIn addition, the system prompts users to grant the app explicit permission to use the local network. To control the messaging of this prompt, your app can include the `NSLocalNetworkUsageDescription` key.\n\n### Check for a Nearby Peer\n\nTo broadcast a device’s ability to communicate through Multipeer Connectivity, your app creates an [doc:\/\/com.apple.documentation\/documentation\/MultipeerConnectivity\/MCNearbyServiceAdvertiser]. The app creates an [doc:\/\/com.apple.documentation\/documentation\/MultipeerConnectivity\/MCNearbyServiceBrowser] to find other devices advertising with the same technology. When the browser finds another device, it calls [doc:\/\/com.apple.documentation\/documentation\/MultipeerConnectivity\/MCNearbyServiceBrowserDelegate\/browser(_:foundPeer:withDiscoveryInfo:)] and invites the peer to exchange tokens by calling [doc:\/\/com.apple.documentation\/documentation\/MultipeerConnectivity\/MCNearbyServiceBrowser\/invitePeer(_:to:withContext:timeout:)].\n\nAfter the other device receives the invitation, [doc:\/\/com.apple.documentation\/documentation\/MultipeerConnectivity\/MCNearbyServiceAdvertiser] calls [doc:\/\/com.apple.documentation\/documentation\/MultipeerConnectivity\/MCNearbyServiceAdvertiserDelegate\/advertiser(_:didReceiveInvitationFromPeer:withContext:invitationHandler:)], in which the apps can begin sharing their discovery tokens.\n\n### Exchange Discovery Tokens\n\nTo respond to the invitation, the app sends its NI session’s [doc:\/\/com.apple.nearbyinteraction\/documentation\/NearbyInteraction\/NINearbyObject\/discoveryToken] to the peer. Because Multipeer Connectivity requires serialization of the data it transmits, the app archives it first.\n\nWhen the receiving peer accepts data from the Multipeer Connectivity session, the app unarchives the data to deserialize the peer’s discovery token.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/NearbyInteraction\/discovering-peers-with-multipeer-connectivity\ncrawled: 2025-12-02T16:12:23Z\n---\n\n# Discovering peers with Multipeer Connectivity\n\n**Article**\n\nExchange discovery tokens over the local network.\n\n## Overview\n\nTo start an interaction session with a nearby device, an app checks for nearby peer devices. When the app finds a peer, it creates an [doc:\/\/com.apple.nearbyinteraction\/documentation\/NearbyInteraction\/NISession] and sends the session’s [doc:\/\/com.apple.nearbyinteraction\/documentation\/NearbyInteraction\/NISession\/discoveryToken] to the peer using the network technology on which they have agreed. An app can use [doc:\/\/com.apple.documentation\/documentation\/MultipeerConnectivity] to find nearby peers and exchange discovery tokens over the local network.\n\nFor an example app that find peer devices using Multipeer Connectivity, see [doc:\/\/com.apple.nearbyinteraction\/documentation\/NearbyInteraction\/implementing-interactions-between-users-in-close-proximity].\n\n### Add Bonjour Services Plist Keys\n\nTo use the local network on iOS and iPadOS 14, your app requires the [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Information-Property-List\/NSBonjourServices] key present in its `Info.plist`. The value of the key adheres to the following convention, including `.tcp` and `.udp` extensions.\n\n```swift\n<key>NSBonjourServices<\/key>\n<array>\n    <string>_myAppName._tcp<\/string>\n    <string>_myAppName._udp<\/string>\n<\/array>\n```\n\nIn addition, the system prompts users to grant the app explicit permission to use the local network. To control the messaging of this prompt, your app can include the `NSLocalNetworkUsageDescription` key.\n\n### Check for a Nearby Peer\n\nTo broadcast a device’s ability to communicate through Multipeer Connectivity, your app creates an [doc:\/\/com.apple.documentation\/documentation\/MultipeerConnectivity\/MCNearbyServiceAdvertiser]. The app creates an [doc:\/\/com.apple.documentation\/documentation\/MultipeerConnectivity\/MCNearbyServiceBrowser] to find other devices advertising with the same technology. When the browser finds another device, it calls [doc:\/\/com.apple.documentation\/documentation\/MultipeerConnectivity\/MCNearbyServiceBrowserDelegate\/browser(_:foundPeer:withDiscoveryInfo:)] and invites the peer to exchange tokens by calling [doc:\/\/com.apple.documentation\/documentation\/MultipeerConnectivity\/MCNearbyServiceBrowser\/invitePeer(_:to:withContext:timeout:)].\n\nAfter the other device receives the invitation, [doc:\/\/com.apple.documentation\/documentation\/MultipeerConnectivity\/MCNearbyServiceAdvertiser] calls [doc:\/\/com.apple.documentation\/documentation\/MultipeerConnectivity\/MCNearbyServiceAdvertiserDelegate\/advertiser(_:didReceiveInvitationFromPeer:withContext:invitationHandler:)], in which the apps can begin sharing their discovery tokens.\n\n\n\n### Exchange Discovery Tokens\n\nTo respond to the invitation, the app sends its NI session’s [doc:\/\/com.apple.nearbyinteraction\/documentation\/NearbyInteraction\/NINearbyObject\/discoveryToken] to the peer. Because Multipeer Connectivity requires serialization of the data it transmits, the app archives it first.\n\n```swift\nlet data = try! NSKeyedArchiver.archivedData(withRootObject: niSession.discoverToken, requiringSecureCoding: true)\n\n```\n\nWhen the receiving peer accepts data from the Multipeer Connectivity session, the app unarchives the data to deserialize the peer’s discovery token.\n\n```swift\nlet peerDiscoverToken = try! NSKeyedUnarchiver.unarchivedObject(ofClass: NIDiscoverToken, from: data) \n```\n\n## Phone interaction\n\n- **Implementing Interactions Between Users in Close Proximity**: Enable devices to access relative positioning information.\n- **Extending advanced direction finding and ranging**: Extend your app’s direction finding capabilities with data from Ultra Wideband devices.\n- **NINearbyPeerConfiguration**: A configuration that enables interaction between iPhone or Apple Watch devices.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Enable devices to access relative positioning information.",
          "name" : "Implementing Interactions Between Users in Close Proximity",
          "url" : "https:\/\/developer.apple.com\/documentation\/NearbyInteraction\/implementing-interactions-between-users-in-close-proximity"
        },
        {
          "description" : "Extend your app’s direction finding capabilities with data from Ultra Wideband devices.",
          "name" : "Extending advanced direction finding and ranging",
          "url" : "https:\/\/developer.apple.com\/documentation\/NearbyInteraction\/extending-advanced-direction-finding-and-ranging"
        },
        {
          "description" : "A configuration that enables interaction between iPhone or Apple Watch devices.",
          "name" : "NINearbyPeerConfiguration",
          "url" : "https:\/\/developer.apple.com\/documentation\/NearbyInteraction\/NINearbyPeerConfiguration"
        }
      ],
      "title" : "Phone interaction"
    }
  ],
  "source" : "appleJSON",
  "title" : "Discovering peers with Multipeer Connectivity",
  "url" : "https:\/\/developer.apple.com\/documentation\/NearbyInteraction\/discovering-peers-with-multipeer-connectivity"
}