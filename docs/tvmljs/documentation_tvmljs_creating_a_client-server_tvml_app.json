{
  "abstract" : "Display and navigate between TVML documents on Apple TV by retrieving and parsing information from a remote server.",
  "codeExamples" : [
    {
      "code" : "var baseURL;\nvar serverURL;\n\nApp.onLaunch = function(options) {\n    baseURL = options.BASEURL;\n    serverURL = options.BASEURL + \"\/Server\";\n    var extension = \"\/Templates\/InitialPage.xml\";\n    getDocument(extension);\n}",
      "language" : "javascript"
    },
    {
      "code" : "function loadingTemplate() {\n    var template = '<document><loadingTemplate><activityIndicator><text>Loading<\/text><\/activityIndicator><\/loadingTemplate><\/document>';\n    var templateParser = new DOMParser();\n    var parsedTemplate = templateParser.parseFromString(template, \"application\/xml\");\n    navigationDocument.pushDocument(parsedTemplate);\n    return parsedTemplate;\n}",
      "language" : "javascript"
    },
    {
      "code" : "function getDocument(extension) {\n    var templateXHR = new XMLHttpRequest();\n    var url = serverURL + extension;\n    var loadingScreen = loadingTemplate();\n    \n    templateXHR.responseType = \"document\";\n    templateXHR.addEventListener(\"load\", function() {pushPage(templateXHR.responseXML, loadingScreen);}, false);\n    templateXHR.open(\"GET\", url, true);\n    templateXHR.send();\n}",
      "language" : "javascript"
    },
    {
      "code" : "function pushPage(page, loading) {\n    var currentDoc = getActiveDocument();\n    navigationDocument.replaceDocument(page, loading);\n}",
      "language" : "javascript"
    }
  ],
  "contentHash" : "3a6644b56edd997e9f7a4f06c3d176fc1daff0c647c45116ec4943b70039d430",
  "crawledAt" : "2025-12-02T15:51:48Z",
  "id" : "916214CB-341D-4C2E-981A-35B3D461608D",
  "kind" : "unknown",
  "language" : "data",
  "module" : "TVMLKit JS",
  "overview" : "## Overview\n\nA TVML app creates a client-server connection to retrieve information stored on a server. The retrieved information is parsed into a document and displayed on a TV screen. Use this sample code project to create your first client-server app. The app uses JavaScript to load an initial TVML document from a local server. The user navigates between two images and the app loads a new document after the user selects one of the images. For detailed information about the TVML framework, see [doc:\/\/com.apple.TVML\/documentation\/TVML].\n\n### Configure the Sample Code Project\n\nBefore running the app, you need to set up a local server on your machine:\n\nAfter testing the sample app in Apple TV Simulator, you can close the local server by pressing Control-C in Terminal. Closing the Terminal window also kills the server.\n\n### Display the Initial Document\n\nThe `application.js` file controls the app. The app creates two global variables that contain URL information. When the app launches, the app populates the variables with information contained in the `AppDelegate.swift` file and retrieves the first document from the server.\n\n### Retrieve a TVML Document From the Server\n\nWhile you can’t control a user’s internet access, you can control what they see on the screen. To avoid showing a blank screen, create and display a loading document to provide users with a visual cue that your app is working, despite not having a connection to the server.\n\nCreate and display the loading document from inside your main JavaScript file. This ensures that you can always display the loading document, even if access to the server is down. The following code creates a loading document and pushes it onto the navigation stack for display.\n\nCreate a new [doc:\/\/com.apple.documentation\/documentation\/tvmljs\/xmlhttprequest] to retrieve information from the server. After successfully loading a new document, push the document onto the navigation stack to display it.\n\n### Replace the Previous Document\n\nAfter the user selects a new document, push that document onto the navigation stack. This places the new document at the top of the current document stack and displays it. When the user presses the Menu button on the Siri Remote, the system removes the current document from the stack and displays the previous document. Doing this causes the previous loading document to display when you want the user to see the selection document.\n\nTo fix this, replace the loading document with the new document using the [doc:\/\/com.apple.documentation\/documentation\/tvmljs\/navigationdocument\/1627430-replacedocument] method. The following function takes the new document and the loading document as parameters and replaces the loading document with the new document.\n\n### Select a New TVML Document\n\nEach file on your server contains the information to display a single document onscreen. In this app, the initial document contains information that displays two images, each with their own title. Each image is a [doc:\/\/com.apple.TVML\/documentation\/TVML\/lockup-elements] element. When the user selects a lockup, the app uses the `onselect` attribute to call the `getDocument` method. The lockup passes the URL for the next document to the `getDocument` method.\n\n`<lockup onselect=\"getDocument('\/Templates\/PageOne.xml')\">`\n\nThe image element contains the URL and size specifications for the displayed image.\n\n`<img width=\"182\" height=\"274\" src=\"http:\/\/localhost:9001\/Server\/Images\/Car_Movie_250x375_A.png\"\/>`",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/tvmljs\/creating_a_client-server_tvml_app\ncrawled: 2025-12-02T15:51:48Z\n---\n\n# Creating a Client-Server TVML App\n\n**Sample Code**\n\nDisplay and navigate between TVML documents on Apple TV by retrieving and parsing information from a remote server.\n\n## Overview\n\nA TVML app creates a client-server connection to retrieve information stored on a server. The retrieved information is parsed into a document and displayed on a TV screen. Use this sample code project to create your first client-server app. The app uses JavaScript to load an initial TVML document from a local server. The user navigates between two images and the app loads a new document after the user selects one of the images. For detailed information about the TVML framework, see [doc:\/\/com.apple.TVML\/documentation\/TVML].\n\n### Configure the Sample Code Project\n\nBefore running the app, you need to set up a local server on your machine:\n\n1. In Finder, navigate to the CreateTVMLApp directory inside of the CreateTVMLApp project directory.\n2. In Terminal, enter at the prompt, `cd` followed by a space.\n3. Drag the CreateTVMLApp folder from the Finder window into the Terminal window, and press Return. This changes the directory to that folder.\n4. In Terminal, enter `ruby -run -ehttpd . -p9001` to run the server.\n5. Build and run the app.\n\nAfter testing the sample app in Apple TV Simulator, you can close the local server by pressing Control-C in Terminal. Closing the Terminal window also kills the server.\n\n### Display the Initial Document\n\nThe `application.js` file controls the app. The app creates two global variables that contain URL information. When the app launches, the app populates the variables with information contained in the `AppDelegate.swift` file and retrieves the first document from the server.\n\n```javascript\nvar baseURL;\nvar serverURL;\n\nApp.onLaunch = function(options) {\n    baseURL = options.BASEURL;\n    serverURL = options.BASEURL + \"\/Server\";\n    var extension = \"\/Templates\/InitialPage.xml\";\n    getDocument(extension);\n}\n```\n\n### Retrieve a TVML Document From the Server\n\nWhile you can’t control a user’s internet access, you can control what they see on the screen. To avoid showing a blank screen, create and display a loading document to provide users with a visual cue that your app is working, despite not having a connection to the server.\n\nCreate and display the loading document from inside your main JavaScript file. This ensures that you can always display the loading document, even if access to the server is down. The following code creates a loading document and pushes it onto the navigation stack for display.\n\n```javascript\nfunction loadingTemplate() {\n    var template = '<document><loadingTemplate><activityIndicator><text>Loading<\/text><\/activityIndicator><\/loadingTemplate><\/document>';\n    var templateParser = new DOMParser();\n    var parsedTemplate = templateParser.parseFromString(template, \"application\/xml\");\n    navigationDocument.pushDocument(parsedTemplate);\n    return parsedTemplate;\n}\n```\n\nCreate a new [doc:\/\/com.apple.documentation\/documentation\/tvmljs\/xmlhttprequest] to retrieve information from the server. After successfully loading a new document, push the document onto the navigation stack to display it.\n\n```javascript\nfunction getDocument(extension) {\n    var templateXHR = new XMLHttpRequest();\n    var url = serverURL + extension;\n    var loadingScreen = loadingTemplate();\n    \n    templateXHR.responseType = \"document\";\n    templateXHR.addEventListener(\"load\", function() {pushPage(templateXHR.responseXML, loadingScreen);}, false);\n    templateXHR.open(\"GET\", url, true);\n    templateXHR.send();\n}\n```\n\n### Replace the Previous Document\n\nAfter the user selects a new document, push that document onto the navigation stack. This places the new document at the top of the current document stack and displays it. When the user presses the Menu button on the Siri Remote, the system removes the current document from the stack and displays the previous document. Doing this causes the previous loading document to display when you want the user to see the selection document.\n\nTo fix this, replace the loading document with the new document using the [doc:\/\/com.apple.documentation\/documentation\/tvmljs\/navigationdocument\/1627430-replacedocument] method. The following function takes the new document and the loading document as parameters and replaces the loading document with the new document.\n\n```javascript\nfunction pushPage(page, loading) {\n    var currentDoc = getActiveDocument();\n    navigationDocument.replaceDocument(page, loading);\n}\n```\n\n### Select a New TVML Document\n\nEach file on your server contains the information to display a single document onscreen. In this app, the initial document contains information that displays two images, each with their own title. Each image is a [doc:\/\/com.apple.TVML\/documentation\/TVML\/lockup-elements] element. When the user selects a lockup, the app uses the `onselect` attribute to call the `getDocument` method. The lockup passes the URL for the next document to the `getDocument` method.\n\n`<lockup onselect=\"getDocument('\/Templates\/PageOne.xml')\">`\n\nThe image element contains the URL and size specifications for the displayed image.\n\n`<img width=\"182\" height=\"274\" src=\"http:\/\/localhost:9001\/Server\/Images\/Car_Movie_250x375_A.png\"\/>`\n\n",
  "sections" : [

  ],
  "source" : "appleJSON",
  "title" : "Creating a Client-Server TVML App",
  "url" : "https:\/\/developer.apple.com\/documentation\/tvmljs\/creating_a_client-server_tvml_app"
}