{
  "abstract" : "Create full-fledged TVML documents by using data binding and queries on simplified TVML files.",
  "codeExamples" : [
    {
      "code" : "<prototypes>\n    <lockup prototype=\"beach\">\n        <img binding=\"@src:{url};\" width=\"200\" height=\"300\"\/>\n        <placeholder tag=\"title2\" \/>",
      "language" : "swift"
    },
    {
      "code" : "<rules>\n    <specialize state=\"({hoursRemaining}-less-than:24)\">\n        <title tag=\"title2\" class=\"expiresSoon\" binding=\"textContent:{title};\" \/>\"\n    <\/specialize>\n    <specialize state=\"({hoursRemaining}-greater-than-equal:24)\">\n        <title tag=\"title2\" class=\"expiresLater\" binding=\"textContent:{title};\" \/>\"\n    <\/specialize>\n<\/rules>",
      "language" : "swift"
    },
    {
      "code" : "{\n    \"beaches\": [\n        {\"type\": \"beach\", \"ID\": \"00\", \"url\": \"Images\/Beach_Movie_HiRes\/Beach_Movie_250x375_A.png\", \"title\": \"Surf's Up!\", \"hoursRemaining\": 48},\n        {\"type\": \"beach\", \"ID\": \"02\", \"url\": \"Images\/Beach_Movie_HiRes\/Beach_Movie_250x375_C.png\", \"title\": \"Relaxing\", \"hoursRemaining\": 48},\n        {\"type\": \"beach\", \"ID\": \"01\", \"url\": \"Images\/Beach_Movie_HiRes\/Beach_Movie_250x375.png\", \"title\": \"Sunset\", \"hoursRemaining\": 12}\n    ],\n    \"cars\": [\n        {\"type\": \"cars\", \"ID\": \"03\", \"url\": \"Images\/Car_Movie_HiRes\/Car_Movie_250x375_A.png\", \"title\": \"Drifting\", \"hoursRemaining\": 48},\n        {\"type\": \"cars\", \"ID\": \"04\", \"url\": \"Images\/Car_Movie_HiRes\/Car_Movie_250x375_B.png\", \"title\": \"Escape!\", \"hoursRemaining\": 10}\n    ]\n}",
      "language" : "swift"
    },
    {
      "code" : "\/\/ Parse the JSON information.\nvar results = JSON.parse(information);\n\n\/\/ Find the shelf elements.\nlet shelves = template.getElementsByTagName('shelf');\n\nif (shelves.length > 0) {\n    for (var i = 0; i < shelves.length; i++) {\n        let shelf = shelves.item(i);\n        let section = shelf.getElementsByTagName(\"section\").item(0);",
      "language" : "javascript"
    },
    {
      "code" : "let newItems = results.cars.map((result) => {\n    let objectItem = new DataItem(result.type, result.ID);\n    objectItem.url = baseURL + result.url;\n    objectItem.title = result.title;\n    objectItem.hoursRemaining = result.hoursRemaining;\n    return objectItem;\n});\nsection.dataItem.setPropertyPath(\"images\", newItems);",
      "language" : "javascript"
    },
    {
      "code" : "section.dataItem.setPropertyPath(\"images\", newItems);",
      "language" : "swift"
    }
  ],
  "contentHash" : "c3172ad7b9786bac5b5237f003487e5fa89698c4090ce823d005ce09f3f94353",
  "crawledAt" : "2025-12-02T15:33:38Z",
  "id" : "4B87B9F6-9314-4B75-BB8C-1299CBFDDD8E",
  "kind" : "unknown",
  "language" : "data",
  "module" : "TVMLKit JS",
  "overview" : "## Overview\n\nThis sample shows how to combine JavaScript, JSON data, and TVML elements to create compact TVML documents. You start by creating a local server on your computer to store all of the JSON data and TVML documents. The app reads the JSON data and applies it to the TVML document, and then displays movie posters onscreen. The titles display with different colors based on the amount of rental time remaining.\n\n### Configure the sample code project\n\nBefore running the app, you need to set up a local server:\n\nAfter testing the sample app in Apple TV simulator, you can close the local server by pressing Control-C in Terminal. Closing the Terminal window also stops the server.\n\n### Set up the TVML document\n\nThe TVML document uses the `prototypes` element to create a reusable collection of elements. Use the `prototype` attribute to uniquely identify the elements. The app creates two `lockup` elements that contain movie poster information.\n\nRather than creating a separate `lockup` in the TVML document for each JSON object, the sample uses a separate JSON file that contains the data that the `lockup` elements use. This creates smaller TVML files that are easier to read and understand. Reusing `lockup` elements also improves the loading speed when using large data sets.\n\nEach `lockup` contains a set of rules, or queries, that change the color of the movie poster’s title based on the JSON data. `specialize` elements contain queries that interact with JSON data and act as `if-then` statements. When the JSON data matches the query, the elements inside the `specialize` element replace the `placeholder` element with the matching `tag`. In the app, a movie poster’s title appears in one of two colors, depending on the amount of time remaining for that object’s availability. For example, movie titles appear in a default color when a user rents them; and then the titles change to an alternate color when the user has fewer than 24 hours remaining in the rental period.\n\n### Retrieve the JSON data\n\nUse an [doc:\/\/com.apple.documentation\/documentation\/tvmljs\/xmlhttprequest] to retrieve the JSON information from your server. This creates two arrays that hold JSON objects. Each object has the following properties: `type`, `ID`, `url`, `title`, and `hoursRemaining`. The `hoursRemaining` property contains the data that the queries in the previous section use.\n\n### Bind the JSON data\n\nYou need to add a type and an identifier to each JSON object because creating new `DataItem` objects requires both a type and a unique identifier for each object. The `type` groups like items together and identifies the correct element to populate the `section` element. The `ID` identifies each object and needs to be unique within each type.\n\nParse the JSON data into a separate variable. Retrieve the desired `section` element and create a new data item for the section. This sample uses the `lockup` element to populate two `shelf` elements. Inside each shelf is a `section` element that contains the binding variable.\n\nCreate a new item to contain the JSON information. A mapping function creates a new `DataItem` object with the `type` and `ID` from a JSON object. Populate the object with the remaining JSON data. Return the object to map the information to your array of new items.\n\nUse the `setPropertyPath` method to bind the new data items with the `section` data item.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/tvmljs\/binding_json_data_to_tvml_documents\ncrawled: 2025-12-02T15:33:38Z\n---\n\n# Binding JSON data to TVML documents\n\n**Sample Code**\n\nCreate full-fledged TVML documents by using data binding and queries on simplified TVML files.\n\n## Overview\n\nThis sample shows how to combine JavaScript, JSON data, and TVML elements to create compact TVML documents. You start by creating a local server on your computer to store all of the JSON data and TVML documents. The app reads the JSON data and applies it to the TVML document, and then displays movie posters onscreen. The titles display with different colors based on the amount of rental time remaining.\n\n### Configure the sample code project\n\nBefore running the app, you need to set up a local server:\n\n1. In Finder, choose DataBindings > DataBindings in the sample project directory.\n2. In Terminal, type `cd` followed by a space.\n3. Drag the DataBindings folder from the Finder window into the Terminal window, and press Return. This changes the directory to that folder.\n4. In Terminal, type `ruby -run -ehttpd . -p9001` and press Return to run the server.\n5. Build and run the app in Xcode.\n\nAfter testing the sample app in Apple TV simulator, you can close the local server by pressing Control-C in Terminal. Closing the Terminal window also stops the server.\n\n### Set up the TVML document\n\nThe TVML document uses the `prototypes` element to create a reusable collection of elements. Use the `prototype` attribute to uniquely identify the elements. The app creates two `lockup` elements that contain movie poster information.\n\nRather than creating a separate `lockup` in the TVML document for each JSON object, the sample uses a separate JSON file that contains the data that the `lockup` elements use. This creates smaller TVML files that are easier to read and understand. Reusing `lockup` elements also improves the loading speed when using large data sets.\n\n```swift\n<prototypes>\n    <lockup prototype=\"beach\">\n        <img binding=\"@src:{url};\" width=\"200\" height=\"300\"\/>\n        <placeholder tag=\"title2\" \/>\n```\n\nEach `lockup` contains a set of rules, or queries, that change the color of the movie poster’s title based on the JSON data. `specialize` elements contain queries that interact with JSON data and act as `if-then` statements. When the JSON data matches the query, the elements inside the `specialize` element replace the `placeholder` element with the matching `tag`. In the app, a movie poster’s title appears in one of two colors, depending on the amount of time remaining for that object’s availability. For example, movie titles appear in a default color when a user rents them; and then the titles change to an alternate color when the user has fewer than 24 hours remaining in the rental period.\n\n```swift\n<rules>\n    <specialize state=\"({hoursRemaining}-less-than:24)\">\n        <title tag=\"title2\" class=\"expiresSoon\" binding=\"textContent:{title};\" \/>\"\n    <\/specialize>\n    <specialize state=\"({hoursRemaining}-greater-than-equal:24)\">\n        <title tag=\"title2\" class=\"expiresLater\" binding=\"textContent:{title};\" \/>\"\n    <\/specialize>\n<\/rules>\n```\n\n### Retrieve the JSON data\n\nUse an [doc:\/\/com.apple.documentation\/documentation\/tvmljs\/xmlhttprequest] to retrieve the JSON information from your server. This creates two arrays that hold JSON objects. Each object has the following properties: `type`, `ID`, `url`, `title`, and `hoursRemaining`. The `hoursRemaining` property contains the data that the queries in the previous section use.\n\n```swift\n{\n    \"beaches\": [\n        {\"type\": \"beach\", \"ID\": \"00\", \"url\": \"Images\/Beach_Movie_HiRes\/Beach_Movie_250x375_A.png\", \"title\": \"Surf's Up!\", \"hoursRemaining\": 48},\n        {\"type\": \"beach\", \"ID\": \"02\", \"url\": \"Images\/Beach_Movie_HiRes\/Beach_Movie_250x375_C.png\", \"title\": \"Relaxing\", \"hoursRemaining\": 48},\n        {\"type\": \"beach\", \"ID\": \"01\", \"url\": \"Images\/Beach_Movie_HiRes\/Beach_Movie_250x375.png\", \"title\": \"Sunset\", \"hoursRemaining\": 12}\n    ],\n    \"cars\": [\n        {\"type\": \"cars\", \"ID\": \"03\", \"url\": \"Images\/Car_Movie_HiRes\/Car_Movie_250x375_A.png\", \"title\": \"Drifting\", \"hoursRemaining\": 48},\n        {\"type\": \"cars\", \"ID\": \"04\", \"url\": \"Images\/Car_Movie_HiRes\/Car_Movie_250x375_B.png\", \"title\": \"Escape!\", \"hoursRemaining\": 10}\n    ]\n}\n```\n\n### Bind the JSON data\n\nYou need to add a type and an identifier to each JSON object because creating new `DataItem` objects requires both a type and a unique identifier for each object. The `type` groups like items together and identifies the correct element to populate the `section` element. The `ID` identifies each object and needs to be unique within each type.\n\nParse the JSON data into a separate variable. Retrieve the desired `section` element and create a new data item for the section. This sample uses the `lockup` element to populate two `shelf` elements. Inside each shelf is a `section` element that contains the binding variable.\n\n```javascript\n\/\/ Parse the JSON information.\nvar results = JSON.parse(information);\n\n\/\/ Find the shelf elements.\nlet shelves = template.getElementsByTagName('shelf');\n\nif (shelves.length > 0) {\n    for (var i = 0; i < shelves.length; i++) {\n        let shelf = shelves.item(i);\n        let section = shelf.getElementsByTagName(\"section\").item(0);\n```\n\nCreate a new item to contain the JSON information. A mapping function creates a new `DataItem` object with the `type` and `ID` from a JSON object. Populate the object with the remaining JSON data. Return the object to map the information to your array of new items.\n\n```javascript\nlet newItems = results.cars.map((result) => {\n    let objectItem = new DataItem(result.type, result.ID);\n    objectItem.url = baseURL + result.url;\n    objectItem.title = result.title;\n    objectItem.hoursRemaining = result.hoursRemaining;\n    return objectItem;\n});\nsection.dataItem.setPropertyPath(\"images\", newItems);\n```\n\nUse the `setPropertyPath` method to bind the new data items with the `section` data item.\n\n```swift\nsection.dataItem.setPropertyPath(\"images\", newItems);\n```\n\n## Data Storage and Retrieval\n\n- **XMLHttpRequest**: An object used to retrieve data from a URL.\n- **DataItem**: An object used to create observable objects from JSON objects for data binding.\n- **Storage**: An object used to store key-value-pair information.\n- **DataSource**: An interface that allows the system to detect and respond to changes in your data.\n- **LoadIndexesRequest**: A request created when the [doc:\/\/com.apple.documentation\/documentation\/tvmljs\/datasource\/datasource\/3192119-loadindexes] event is triggered.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "An object used to retrieve data from a URL.",
          "name" : "XMLHttpRequest",
          "url" : "https:\/\/developer.apple.com\/documentation\/tvmljs\/xmlhttprequest"
        },
        {
          "description" : "An object used to create observable objects from JSON objects for data binding.",
          "name" : "DataItem",
          "url" : "https:\/\/developer.apple.com\/documentation\/tvmljs\/dataitem"
        },
        {
          "description" : "An object used to store key-value-pair information.",
          "name" : "Storage",
          "url" : "https:\/\/developer.apple.com\/documentation\/tvmljs\/storage"
        },
        {
          "description" : "An interface that allows the system to detect and respond to changes in your data.",
          "name" : "DataSource",
          "url" : "https:\/\/developer.apple.com\/documentation\/tvmljs\/datasource"
        },
        {
          "description" : "A request created when the [doc:\/\/com.apple.documentation\/documentation\/tvmljs\/datasource\/datasource\/3192119-loadindexes] event is triggered.",
          "name" : "LoadIndexesRequest",
          "url" : "https:\/\/developer.apple.com\/documentation\/tvmljs\/loadindexesrequest"
        }
      ],
      "title" : "Data Storage and Retrieval"
    }
  ],
  "source" : "appleJSON",
  "title" : "Binding JSON data to TVML documents",
  "url" : "https:\/\/developer.apple.com\/documentation\/tvmljs\/binding_json_data_to_tvml_documents"
}