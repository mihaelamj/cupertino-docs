{
  "abstract" : "Update onscreen information by adding event listeners to your Apple TV app.",
  "codeExamples" : [
    {
      "code" : "<menuItem selectTargetURL=\"Server\/Templates\/firstmenutabpage.xml\">\n    <title>Tab 1<\/title>\n<\/menuItem>",
      "language" : "swift"
    },
    {
      "code" : "if (request.status == 200) {\n    var document = request.responseXML;\n    document.addEventListener(\"select\", handleSelectEvent);\n    navigationDocument.replaceDocument(document, loadingDocument)",
      "language" : "javascript"
    },
    {
      "code" : "function handleSelectEvent(event) {\n    var selectedElement = event.target;\n    \n    var targetURL = selectedElement.getAttribute(\"selectTargetURL\");\n    if (!targetURL) {\n        return;\n    }\n    targetURL = baseURL + targetURL;\n    \n    if (selectedElement.tagName == \"menuItem\") {\n        updateMenuItem(selectedElement, targetURL);\n    }\n    else {\n        loadAndPushDocument(targetURL);\n    }\n}",
      "language" : "javascript"
    },
    {
      "code" : "function updateMenuItem(menuItem, url) {\n    var request = new XMLHttpRequest();\n    request.open(\"GET\", url, true);\n    \n    request.onreadystatechange = function() {\n        if (request.status == 200) {\n            var document = request.responseXML;\n            var menuItemDocument = menuItem.parentNode.getFeature(\"MenuBarDocument\");\n            menuItemDocument.setDocument(document, menuItem)\n        }\n    };\n    \n    request.send();\n}",
      "language" : "javascript"
    }
  ],
  "contentHash" : "21c0c8785c20bbadc010ff12d0c0d98367fae32b44e5969821055ce65ae80951",
  "crawledAt" : "2025-12-02T15:33:47Z",
  "id" : "B8208BDE-EDA2-44C5-81E3-C58F06B25FAD",
  "kind" : "unknown",
  "language" : "data",
  "module" : "TVMLKit JS",
  "overview" : "## Overview\n\nAs the user navigates to a menu item along the top of the screen, the screen updates with information related to that menu item. This app shows you how to use events to update the screen when the user moves to a menu item, but doesn’t select the item.\n\n### Configure the Sample Code Project\n\nBefore running the app, set up a local server on your machine:\n\nAfter testing the sample app in Apple TV Simulator, you can quit the local server by pressing Control-C in Terminal or closing the Terminal window.\n\n### Add URL Information to the menuBar Template Code\n\nAdd the `selectTargetURL` attribute to each `menuItem` element inside of the `menuBarTemplate`. As the user moves between menu items, an event fires in order to update the onscreen information. The `selectTargetURL` attribute identifies the location of the TVML page associated with the highlighted menu item. An example of a formatted menu item follows:\n\n### Set Up the Event Listeners\n\nUse the `XMLHttpRequest` function to load the `menuBar` template and then add an event listener to the document using the JavaScript `addEventListener` function. The event listener notifies the app when the user moves to a new menu item. The app calls the user-defined `handleSelectEvent` function and automatically sends all of the the events to the function.\n\n### Respond to an Event\n\nUse the `handleSelectEvent` function to verify that the event fired for the correct TVML element. The event’s `target` property contains the highlighted element. The function then verifies that the highlighted element contains the `selectTargetURL` attribute. If the highlighted element is also a `menuItem` element and not a different element with the `selectTargetURL` attribute, the function calls the `updateMenuItem` function, which will update the displayed document, that is, the information associated with the highlighted menu item.\n\n### Update the Document\n\nUse the `updateMenuItem` function to load the new document from the server. After loading the new document, retrieve the menu item’s parent node and the [doc:\/\/com.apple.documentation\/documentation\/tvmljs\/menubardocument] object. Finally, associate the new document to the `menuItem` element using the [doc:\/\/com.apple.documentation\/documentation\/tvmljs\/menubardocument\/1627374-setdocument]. This displays the document associated with the menu item.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/tvmljs\/responding_to_user_interaction\ncrawled: 2025-12-02T15:33:47Z\n---\n\n# Responding to User Interaction\n\n**Sample Code**\n\nUpdate onscreen information by adding event listeners to your Apple TV app.\n\n## Overview\n\nAs the user navigates to a menu item along the top of the screen, the screen updates with information related to that menu item. This app shows you how to use events to update the screen when the user moves to a menu item, but doesn’t select the item.\n\n### Configure the Sample Code Project\n\nBefore running the app, set up a local server on your machine:\n\n1. In Finder, navigate to the Incorporating Event Listeners directory inside of the Incorporating Event Listeners directory.\n2. In Terminal, enter `cd`, followed by a space.\n3. Drag the Incorporating Event Listeners folder from the Finder window into the Terminal window, and press Return. The current directory changes to that folder.\n4. In Terminal, enter `ruby -run -ehttpd . -p9001` to run the server.\n5. Build and run the app in Apple TV Simulator.\n\nAfter testing the sample app in Apple TV Simulator, you can quit the local server by pressing Control-C in Terminal or closing the Terminal window.\n\n### Add URL Information to the menuBar Template Code\n\nAdd the `selectTargetURL` attribute to each `menuItem` element inside of the `menuBarTemplate`. As the user moves between menu items, an event fires in order to update the onscreen information. The `selectTargetURL` attribute identifies the location of the TVML page associated with the highlighted menu item. An example of a formatted menu item follows:\n\n```swift\n<menuItem selectTargetURL=\"Server\/Templates\/firstmenutabpage.xml\">\n    <title>Tab 1<\/title>\n<\/menuItem>\n```\n\n### Set Up the Event Listeners\n\nUse the `XMLHttpRequest` function to load the `menuBar` template and then add an event listener to the document using the JavaScript `addEventListener` function. The event listener notifies the app when the user moves to a new menu item. The app calls the user-defined `handleSelectEvent` function and automatically sends all of the the events to the function.\n\n```javascript\nif (request.status == 200) {\n    var document = request.responseXML;\n    document.addEventListener(\"select\", handleSelectEvent);\n    navigationDocument.replaceDocument(document, loadingDocument)\n```\n\n### Respond to an Event\n\nUse the `handleSelectEvent` function to verify that the event fired for the correct TVML element. The event’s `target` property contains the highlighted element. The function then verifies that the highlighted element contains the `selectTargetURL` attribute. If the highlighted element is also a `menuItem` element and not a different element with the `selectTargetURL` attribute, the function calls the `updateMenuItem` function, which will update the displayed document, that is, the information associated with the highlighted menu item.\n\n```javascript\nfunction handleSelectEvent(event) {\n    var selectedElement = event.target;\n    \n    var targetURL = selectedElement.getAttribute(\"selectTargetURL\");\n    if (!targetURL) {\n        return;\n    }\n    targetURL = baseURL + targetURL;\n    \n    if (selectedElement.tagName == \"menuItem\") {\n        updateMenuItem(selectedElement, targetURL);\n    }\n    else {\n        loadAndPushDocument(targetURL);\n    }\n}\n```\n\n### Update the Document\n\nUse the `updateMenuItem` function to load the new document from the server. After loading the new document, retrieve the menu item’s parent node and the [doc:\/\/com.apple.documentation\/documentation\/tvmljs\/menubardocument] object. Finally, associate the new document to the `menuItem` element using the [doc:\/\/com.apple.documentation\/documentation\/tvmljs\/menubardocument\/1627374-setdocument]. This displays the document associated with the menu item.\n\n```javascript\nfunction updateMenuItem(menuItem, url) {\n    var request = new XMLHttpRequest();\n    request.open(\"GET\", url, true);\n    \n    request.onreadystatechange = function() {\n        if (request.status == 200) {\n            var document = request.responseXML;\n            var menuItemDocument = menuItem.parentNode.getFeature(\"MenuBarDocument\");\n            menuItemDocument.setDocument(document, menuItem)\n        }\n    };\n    \n    request.send();\n}\n```\n\n## App Initialization\n\n- **App**: An object that provides access to—and a means to respond to—app life-cycle events.\n- **UserDefaults**: An object that contains the app's default preferences.\n- **NavigationDocument**: A document stack that holds the individual TVML documents for a client-server app.\n- **EventListenerObject**: An object that communicates events and allows other objects to add themselves as listeners.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "An object that provides access to—and a means to respond to—app life-cycle events.",
          "name" : "App",
          "url" : "https:\/\/developer.apple.com\/documentation\/tvmljs\/app"
        },
        {
          "description" : "An object that contains the app's default preferences.",
          "name" : "UserDefaults",
          "url" : "https:\/\/developer.apple.com\/documentation\/tvmljs\/userdefaults"
        },
        {
          "description" : "A document stack that holds the individual TVML documents for a client-server app.",
          "name" : "NavigationDocument",
          "url" : "https:\/\/developer.apple.com\/documentation\/tvmljs\/navigationdocument"
        },
        {
          "description" : "An object that communicates events and allows other objects to add themselves as listeners.",
          "name" : "EventListenerObject",
          "url" : "https:\/\/developer.apple.com\/documentation\/tvmljs\/eventlistenerobject"
        }
      ],
      "title" : "App Initialization"
    }
  ],
  "source" : "appleJSON",
  "title" : "Responding to User Interaction",
  "url" : "https:\/\/developer.apple.com\/documentation\/tvmljs\/responding_to_user_interaction"
}