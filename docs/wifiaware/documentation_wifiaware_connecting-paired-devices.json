{
  "abstract" : "Make outgoing and accept incoming secure connections with paired devices.",
  "codeExamples" : [
    {
      "code" : "\/\/ Specifies a service.\nextension WAPublishableService {\n    public static var exampleService: WAPublishableService {\n        allServices[\"_example-service._tcp\"]!\n    }\n}\n\n\/\/ Selects devices from the list of the example app's paired devices.\nlet devices = #Predicate<WAPairedDevice> { $0.name?.starts(with: \"My Device\") ?? false }\n\n\/\/ Constructs a `NetworkListener` to publish the service and accept connections from the selected devices.\ntry await NetworkListener(for:\n    .wifiAware(.connecting(to: .exampleService, from: .matching(devices))),\nusing: {\n    TLS()\n})\n.onStateUpdate { listener, state in\n    \/\/ Processes state updates.\n}\n.run { connection in\n    \/\/ Handle incoming connections.\n}",
      "language" : "swift"
    },
    {
      "code" : "\/\/ Specifies a service.\nextension WASubscribableService {\n    public static var exampleService: WASubscribableService {\n        allServices[\"_example-service._tcp\"]!\n    }\n}\n\n\/\/ Selects `devices` from the list of all paired devices.\nlet devices = #Predicate<WAPairedDevice> { $0.name?.starts(with: \"My Device\") ?? false }\n\n\/\/ Constructs a `NetworkBrowser` to subscribe for the service on the selected devices. \nlet browser = NetworkBrowser(\n    for:\n        .wifiAware( .connecting(to: .matching(devices),  from: .exampleService))\n)\n.onStateUpdate { browser, state in\n    \/\/ Processes state updates.\n}\n\n\/\/ Run the browser and get discovered endpoints\nlet endpoint = try await browser.run { waEndpoints in\n    \/\/ Handle discovered endpoints.\n    \/\/ Return .finish(endpoint) once the desired endpoint(s) are discovered or .continue to keep the browser active.\n}",
      "language" : "swift"
    },
    {
      "code" : "\/\/ On the browser device, construct a `NetworkConnection` to make a connection to one of the discovered endpoints from the browse operation.\nlet connection = NetworkConnection(\n    to:\n        endpoint,\n    using: {\n        TLS()\n    }\n).onStateUpdate { connection, state in\n    \/\/ Processes state updates.\n}\n\n\/\/ The run closure on the `NetworkListener` device receives the incoming connection.",
      "language" : "swift"
    },
    {
      "code" : "if let wifiAwarePath = try await connection.currentPath?.wifiAware {\n    let performanceReport = wifiAwarePath.performance\n\n    \/\/ Use the performance report.\n}",
      "language" : "swift"
    },
    {
      "code" : ".onStateUpdate { _, state in\n    switch state {\n    ...\n\n    case .failed(let nwError): let wifiAwareError = error.wifiAware\n    default: break\n    }\n}",
      "language" : "swift"
    }
  ],
  "contentHash" : "cdae1527f58cc2e080763d86ba2c2066cbe80aa92ba245552ab354d068e60770",
  "crawledAt" : "2025-12-02T16:03:20Z",
  "id" : "1EECE257-5772-4D56-ABF5-FEA4B3C245E7",
  "kind" : "article",
  "language" : "swift",
  "module" : "Wi-Fi Aware",
  "overview" : "## Overview\n\nWith the Wi-Fi Aware™ technology, your app can securely establish peer-to-peer (P2P) connections between Wi-Fi devices. By using the Wi-Fi Aware framework, devices can discover, pair, and communicate with other nearby devices without an internet connection or access point.\n\nFor your app to pair devices, or ask the person using your app for access to existing devices, you can use either of the following two methods:\n\nAfter a person pairs a device or grants your app access to a device, the system adds the device to your app’s [doc:\/\/com.apple.wifiaware\/documentation\/WiFiAware\/WAPairedDevice\/Devices] collection, which is accessible through the [doc:\/\/com.apple.wifiaware\/documentation\/WiFiAware\/WAPairedDevice\/allDevices] APIs.\n\n### Connect paired devices\n\nAfter your app pairs devices, it can initiate secure peer-to-peer Wi-Fi connections between those devices on demand. The Wi-Fi Aware framework integrates with the [https:\/\/developer.apple.com\/documentation\/Network] framework to provide Wi-Fi Aware connections and related functionality, extending several common networking primitives:\n\n### Create a listener to publish\n\nThe following code example creates a `NetworkListener` that publishes the `_example-service._tcp` service over Wi-Fi Aware, and accepts incoming connections from the specified paired devices:\n\n### Create a browser to subscribe\n\nThe following code example creates a `NetworkBrowser` that subscribes for the `_example-service._tcp` service over Wi-Fi Aware, and provides browse results that the system can use to make outgoing connections to the specified paired devices:\n\n### Make a connection\n\nThe following code example creates a `NetworkConnection` to a discovered Wi-Fi Aware endpoint:\n\n### Monitor connection performance\n\nThe following code example gets the Wi-Fi Aware performance report from the current path of a connection.\n\n### Get Wi-Fi Aware errors\n\nThe following code example gets the Wi-Fi Aware specific error code from the [doc:\/\/com.apple.documentation\/documentation\/Network\/NWError] reported by the Network framework as part of the state updates provided for the `NetworkBrowser`, `NetworkListener` and `NetworkConnection` instances.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/WiFiAware\/Connecting-paired-devices\ncrawled: 2025-12-02T16:03:20Z\n---\n\n# Connecting devices for peer-to-peer Wi-Fi\n\n**Article**\n\nMake outgoing and accept incoming secure connections with paired devices.\n\n## Overview\n\nWith the Wi-Fi Aware™ technology, your app can securely establish peer-to-peer (P2P) connections between Wi-Fi devices. By using the Wi-Fi Aware framework, devices can discover, pair, and communicate with other nearby devices without an internet connection or access point.\n\nFor your app to pair devices, or ask the person using your app for access to existing devices, you can use either of the following two methods:\n\n- [https:\/\/developer.apple.com\/documentation\/devicediscoveryui]: Pair any kind of device for device-to-device and app-to-app use cases, such as file transfer and media streaming.\n- [https:\/\/developer.apple.com\/documentation\/accessorysetupkit]: Pair a person’s personal hardware accessory with the accessory’s companion app, such as for setup and accessory management.\n\nAfter a person pairs a device or grants your app access to a device, the system adds the device to your app’s [doc:\/\/com.apple.wifiaware\/documentation\/WiFiAware\/WAPairedDevice\/Devices] collection, which is accessible through the [doc:\/\/com.apple.wifiaware\/documentation\/WiFiAware\/WAPairedDevice\/allDevices] APIs.\n\n### Connect paired devices\n\nAfter your app pairs devices, it can initiate secure peer-to-peer Wi-Fi connections between those devices on demand. The Wi-Fi Aware framework integrates with the [https:\/\/developer.apple.com\/documentation\/Network] framework to provide Wi-Fi Aware connections and related functionality, extending several common networking primitives:\n\n- [doc:\/\/com.apple.documentation\/documentation\/Network\/NetworkBrowser] subscribes to Wi-Fi Aware services on paired devices, and makes outgoing secure connections to them.\n- [doc:\/\/com.apple.documentation\/documentation\/Network\/NetworkListener] publishes Wi-Fi Aware services to paired devices, and accepts incoming secure connections from them.\n- [doc:\/\/com.apple.documentation\/documentation\/Network\/NetworkConnection] opens a secure, high-performance data connection to Wi-Fi Aware devices.\n- [doc:\/\/com.apple.documentation\/documentation\/Network\/NWParameters] configures Wi-Fi Aware parameters.\n- [doc:\/\/com.apple.documentation\/documentation\/Network\/NWPath] fetches Wi-Fi Aware connection statuses and performance metrics.\n- [doc:\/\/com.apple.documentation\/documentation\/Network\/NWError] fetches Wi-Fi Aware error statuses.\n\n### Create a listener to publish\n\nThe following code example creates a `NetworkListener` that publishes the `_example-service._tcp` service over Wi-Fi Aware, and accepts incoming connections from the specified paired devices:\n\n```swift\n\/\/ Specifies a service.\nextension WAPublishableService {\n    public static var exampleService: WAPublishableService {\n        allServices[\"_example-service._tcp\"]!\n    }\n}\n\n\/\/ Selects devices from the list of the example app's paired devices.\nlet devices = #Predicate<WAPairedDevice> { $0.name?.starts(with: \"My Device\") ?? false }\n\n\/\/ Constructs a `NetworkListener` to publish the service and accept connections from the selected devices.\ntry await NetworkListener(for:\n    .wifiAware(.connecting(to: .exampleService, from: .matching(devices))),\nusing: {\n    TLS()\n})\n.onStateUpdate { listener, state in\n    \/\/ Processes state updates.\n}\n.run { connection in\n    \/\/ Handle incoming connections.\n}\n```\n\n### Create a browser to subscribe\n\nThe following code example creates a `NetworkBrowser` that subscribes for the `_example-service._tcp` service over Wi-Fi Aware, and provides browse results that the system can use to make outgoing connections to the specified paired devices:\n\n```swift\n\/\/ Specifies a service.\nextension WASubscribableService {\n    public static var exampleService: WASubscribableService {\n        allServices[\"_example-service._tcp\"]!\n    }\n}\n\n\/\/ Selects `devices` from the list of all paired devices.\nlet devices = #Predicate<WAPairedDevice> { $0.name?.starts(with: \"My Device\") ?? false }\n\n\/\/ Constructs a `NetworkBrowser` to subscribe for the service on the selected devices. \nlet browser = NetworkBrowser(\n    for:\n        .wifiAware( .connecting(to: .matching(devices),  from: .exampleService))\n)\n.onStateUpdate { browser, state in\n    \/\/ Processes state updates.\n}\n\n\/\/ Run the browser and get discovered endpoints\nlet endpoint = try await browser.run { waEndpoints in\n    \/\/ Handle discovered endpoints.\n    \/\/ Return .finish(endpoint) once the desired endpoint(s) are discovered or .continue to keep the browser active.\n}\n```\n\n### Make a connection\n\nThe following code example creates a `NetworkConnection` to a discovered Wi-Fi Aware endpoint:\n\n```swift\n\/\/ On the browser device, construct a `NetworkConnection` to make a connection to one of the discovered endpoints from the browse operation.\nlet connection = NetworkConnection(\n    to:\n        endpoint,\n    using: {\n        TLS()\n    }\n).onStateUpdate { connection, state in\n    \/\/ Processes state updates.\n}\n\n\/\/ The run closure on the `NetworkListener` device receives the incoming connection.\n```\n\n### Monitor connection performance\n\nThe following code example gets the Wi-Fi Aware performance report from the current path of a connection.\n\n```swift\nif let wifiAwarePath = try await connection.currentPath?.wifiAware {\n    let performanceReport = wifiAwarePath.performance\n\n    \/\/ Use the performance report.\n}\n```\n\n### Get Wi-Fi Aware errors\n\nThe following code example gets the Wi-Fi Aware specific error code from the [doc:\/\/com.apple.documentation\/documentation\/Network\/NWError] reported by the Network framework as part of the state updates provided for the `NetworkBrowser`, `NetworkListener` and `NetworkConnection` instances.\n\n```swift\n.onStateUpdate { _, state in\n    switch state {\n    ...\n\n    case .failed(let nwError): let wifiAwareError = error.wifiAware\n    default: break\n    }\n}\n```\n\n## Essentials\n\n- **Building peer-to-peer apps**: Communicate with nearby devices over a secure, high-throughput, low-latency connection by using Wi-Fi Aware.\n- **Adopting Wi-Fi Aware**: Add entitlements and declare your app’s services.\n- **com.apple.developer.wifi-aware**: The entitlement the system requires for an app to use the Wi-Fi Aware framework.\n- **WiFiAwareServices**: Dictionaries of Wi-Fi Aware services that the app can publish or subscribe to.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Communicate with nearby devices over a secure, high-throughput, low-latency connection by using Wi-Fi Aware.",
          "name" : "Building peer-to-peer apps",
          "url" : "https:\/\/developer.apple.com\/documentation\/WiFiAware\/Building-peer-to-peer-apps"
        },
        {
          "description" : "Add entitlements and declare your app’s services.",
          "name" : "Adopting Wi-Fi Aware",
          "url" : "https:\/\/developer.apple.com\/documentation\/WiFiAware\/Adopting-Wi-Fi-Aware"
        },
        {
          "description" : "The entitlement the system requires for an app to use the Wi-Fi Aware framework.",
          "name" : "com.apple.developer.wifi-aware",
          "url" : "https:\/\/developer.apple.com\/documentation\/BundleResources\/Entitlements\/com.apple.developer.wifi-aware"
        },
        {
          "description" : "Dictionaries of Wi-Fi Aware services that the app can publish or subscribe to.",
          "name" : "WiFiAwareServices",
          "url" : "https:\/\/developer.apple.com\/documentation\/BundleResources\/Information-Property-List\/WiFiAwareServices"
        }
      ],
      "title" : "Essentials"
    }
  ],
  "source" : "appleJSON",
  "title" : "Connecting devices for peer-to-peer Wi-Fi",
  "url" : "https:\/\/developer.apple.com\/documentation\/WiFiAware\/Connecting-paired-devices"
}