{
  "abstract" : "A report that provides metrics about the establishment of a connection.",
  "codeExamples" : [

  ],
  "conformsTo" : [
    "CustomDebugStringConvertible",
    "Sendable",
    "SendableMetatype"
  ],
  "contentHash" : "8dd7065f7923bded86fbf0e86db297dca24bfe99ba197b633197b0ffe85e2adb",
  "crawledAt" : "2025-12-02T16:16:46Z",
  "declaration" : {
    "code" : "struct EstablishmentReport",
    "language" : "swift"
  },
  "id" : "9CB47155-76D7-4CC3-AD1C-11511797A431",
  "kind" : "struct",
  "language" : "swift",
  "module" : "Network",
  "overview" : "## Overview\n\nUse this report to inspect connection establishment details, such as its resolution steps, use of proxies, and duration.\n\nThis report shows different data when iCloud Private Relay makes the connection. iCloud Private Relay can change the timing and sequence of events for your connections by using a set of privacy proxies.\n\nWhen iCloud Private Relay is in use, any proxied connections have the [doc:\/\/com.apple.network\/documentation\/Network\/NWConnection\/EstablishmentReport\/usedProxy] property set. The [doc:\/\/com.apple.network\/documentation\/Network\/NWConnection\/EstablishmentReport\/handshakes] property contains information about the stages of proxy connections used, and the timings to establish the end-to-end connection.\n\nConnections that aren’t proxied might still use iCloud Private Relay for name resolution. In this case, the [doc:\/\/com.apple.network\/documentation\/Network\/NWConnection\/EstablishmentReport\/resolutions] property includes information about resolutions that use the `https` DNS protocol.",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "tvOS",
    "visionOS",
    "watchOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/Network\/NWConnection\/EstablishmentReport\ncrawled: 2025-12-02T16:16:46Z\n---\n\n# NWConnection.EstablishmentReport\n\n**Structure**\n\nA report that provides metrics about the establishment of a connection.\n\n## Declaration\n\n```swift\nstruct EstablishmentReport\n```\n\n## Overview\n\nUse this report to inspect connection establishment details, such as its resolution steps, use of proxies, and duration.\n\nThis report shows different data when iCloud Private Relay makes the connection. iCloud Private Relay can change the timing and sequence of events for your connections by using a set of privacy proxies.\n\nWhen iCloud Private Relay is in use, any proxied connections have the [doc:\/\/com.apple.network\/documentation\/Network\/NWConnection\/EstablishmentReport\/usedProxy] property set. The [doc:\/\/com.apple.network\/documentation\/Network\/NWConnection\/EstablishmentReport\/handshakes] property contains information about the stages of proxy connections used, and the timings to establish the end-to-end connection.\n\nConnections that aren’t proxied might still use iCloud Private Relay for name resolution. In this case, the [doc:\/\/com.apple.network\/documentation\/Network\/NWConnection\/EstablishmentReport\/resolutions] property includes information about resolutions that use the `https` DNS protocol.\n\n## Inspecting Connection Attempts\n\n- **duration**: The total duration of the successful connection establishment attempt, from the preparing state to the ready state.\n- **previousAttemptCount**: The number of attempts made before the successful attempt, when the connection moved from the preparing state back to the waiting state.\n- **attemptStartedAfterInterval**: The time between the call to start and the beginning of the successful connection attempt.\n\n## Inspecting Resolution\n\n- **resolutions**: The array of resolution steps performed during connection establishment, in order from first resolved to last resolved.\n- **NWConnection.EstablishmentReport.Resolution**: A description of a single DNS resolution step.\n\n## Inspecting Protocol Handshakes\n\n- **handshakes**: The array of protocol handshakes in order from first completed to last completed.\n- **NWConnection.EstablishmentReport.Handshake**: A description of a single protocol handshake.\n\n## Checking for Proxies\n\n- **proxyConfigured**: A Boolean indicating whether a proxy was configured on the connection.\n- **usedProxy**: A Boolean indicating whether the connection used a proxy.\n- **proxyEndpoint**: The endpoint of the proxy the connection used.\n\n## Collecting Connection Metrics\n\n- **Collecting Network Connection Metrics**: Use reports to understand how DNS and protocol handshakes impact connection establishment.\n- **requestEstablishmentReport(queue:completion:)**: Requests a copy of the connection’s establishment report once the connection is in the ready state.\n- **startDataTransferReport()**: Begins a new data transfer report, which can later be collected.\n- **NWConnection.PendingDataTransferReport**: An outstanding data transfer report that has yet to be collected.\n- **NWConnection.DataTransferReport**: A report that provides metrics about data being sent and received on a connection.\n\n## Conforms To\n\n- CustomDebugStringConvertible\n- Sendable\n- SendableMetatype\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "The total duration of the successful connection establishment attempt, from the preparing state to the ready state.",
          "name" : "duration",
          "url" : "https:\/\/developer.apple.com\/documentation\/Network\/NWConnection\/EstablishmentReport\/duration"
        },
        {
          "description" : "The number of attempts made before the successful attempt, when the connection moved from the preparing state back to the waiting state.",
          "name" : "previousAttemptCount",
          "url" : "https:\/\/developer.apple.com\/documentation\/Network\/NWConnection\/EstablishmentReport\/previousAttemptCount"
        },
        {
          "description" : "The time between the call to start and the beginning of the successful connection attempt.",
          "name" : "attemptStartedAfterInterval",
          "url" : "https:\/\/developer.apple.com\/documentation\/Network\/NWConnection\/EstablishmentReport\/attemptStartedAfterInterval"
        }
      ],
      "title" : "Inspecting Connection Attempts"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "The array of resolution steps performed during connection establishment, in order from first resolved to last resolved.",
          "name" : "resolutions",
          "url" : "https:\/\/developer.apple.com\/documentation\/Network\/NWConnection\/EstablishmentReport\/resolutions"
        },
        {
          "description" : "A description of a single DNS resolution step.",
          "name" : "NWConnection.EstablishmentReport.Resolution",
          "url" : "https:\/\/developer.apple.com\/documentation\/Network\/NWConnection\/EstablishmentReport\/Resolution"
        }
      ],
      "title" : "Inspecting Resolution"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "The array of protocol handshakes in order from first completed to last completed.",
          "name" : "handshakes",
          "url" : "https:\/\/developer.apple.com\/documentation\/Network\/NWConnection\/EstablishmentReport\/handshakes"
        },
        {
          "description" : "A description of a single protocol handshake.",
          "name" : "NWConnection.EstablishmentReport.Handshake",
          "url" : "https:\/\/developer.apple.com\/documentation\/Network\/NWConnection\/EstablishmentReport\/Handshake"
        }
      ],
      "title" : "Inspecting Protocol Handshakes"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "A Boolean indicating whether a proxy was configured on the connection.",
          "name" : "proxyConfigured",
          "url" : "https:\/\/developer.apple.com\/documentation\/Network\/NWConnection\/EstablishmentReport\/proxyConfigured"
        },
        {
          "description" : "A Boolean indicating whether the connection used a proxy.",
          "name" : "usedProxy",
          "url" : "https:\/\/developer.apple.com\/documentation\/Network\/NWConnection\/EstablishmentReport\/usedProxy"
        },
        {
          "description" : "The endpoint of the proxy the connection used.",
          "name" : "proxyEndpoint",
          "url" : "https:\/\/developer.apple.com\/documentation\/Network\/NWConnection\/EstablishmentReport\/proxyEndpoint"
        }
      ],
      "title" : "Checking for Proxies"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Use reports to understand how DNS and protocol handshakes impact connection establishment.",
          "name" : "Collecting Network Connection Metrics",
          "url" : "https:\/\/developer.apple.com\/documentation\/Network\/collecting-network-connection-metrics"
        },
        {
          "description" : "Requests a copy of the connection’s establishment report once the connection is in the ready state.",
          "name" : "requestEstablishmentReport(queue:completion:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Network\/NWConnection\/requestEstablishmentReport(queue:completion:)"
        },
        {
          "description" : "Begins a new data transfer report, which can later be collected.",
          "name" : "startDataTransferReport()",
          "url" : "https:\/\/developer.apple.com\/documentation\/Network\/NWConnection\/startDataTransferReport()"
        },
        {
          "description" : "An outstanding data transfer report that has yet to be collected.",
          "name" : "NWConnection.PendingDataTransferReport",
          "url" : "https:\/\/developer.apple.com\/documentation\/Network\/NWConnection\/PendingDataTransferReport"
        },
        {
          "description" : "A report that provides metrics about data being sent and received on a connection.",
          "name" : "NWConnection.DataTransferReport",
          "url" : "https:\/\/developer.apple.com\/documentation\/Network\/NWConnection\/DataTransferReport"
        }
      ],
      "title" : "Collecting Connection Metrics"
    }
  ],
  "source" : "appleJSON",
  "title" : "NWConnection.EstablishmentReport",
  "url" : "https:\/\/developer.apple.com\/documentation\/Network\/NWConnection\/EstablishmentReport"
}