{
  "abstract" : "Instructs the target to invoke a client-supplied block repeatedly, at its convenience, in order to gather sample buffers for display.",
  "codeExamples" : [

  ],
  "contentHash" : "b4349231163e28412f6314eb8e30b9c5fdc7bddc55900025df07172e2a0e1341",
  "crawledAt" : "2025-12-07T13:32:04Z",
  "declaration" : {
    "code" : "func requestMediaDataWhenReady(on queue: dispatch_queue_t, using block: @escaping () -> Void)",
    "language" : "swift"
  },
  "id" : "5DD6D507-7CC6-4F7F-8166-1650360E44E8",
  "kind" : "method",
  "language" : "swift",
  "module" : "AVFoundation",
  "overview" : "## Discussion\n\nApple discourages the use of this symbol in iOS 17, tvOS 17, and macOS 14 and later. Use [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVQueuedSampleBufferRendering\/requestMediaDataWhenReady(on:using:)] on the [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVSampleBufferDisplayLayer\/sampleBufferRenderer] instead.\n\nThe block is expected to call the [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVSampleBufferDisplayLayer\/enqueue(_:)] in order to provide media data for decompression (if necessary) and rendering while the [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVSampleBufferDisplayLayer\/isReadyForMoreMediaData] property remains [doc:\/\/com.apple.documentation\/documentation\/Swift\/true], or until it can provide no additional media. When the layer has decoded enough media data that it is ready for additional media data, it will invoke the block again.\n\nBy allowing the display layer to determine when to invoke the block, the implementation of incremental I\/O operations is simplified when supplying synchronized media data during rendering.\n\nIf this function is called multiple times, only the last call is effective.\n\nYou invoke the [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVSampleBufferDisplayLayer\/stopRequestingMediaData()] method to cancel this request.\n\nEach call to `requestMediaDataWhenReadyOnQueue:usingBlock:` must be balanced with a corresponding call to [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVSampleBufferDisplayLayer\/stopRequestingMediaData()].\n\nReleasing the receiver instance without a call to [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVSampleBufferDisplayLayer\/stopRequestingMediaData()] will result in undefined behavior.",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "tvOS",
    "visionOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVSampleBufferDisplayLayer\/requestMediaDataWhenReady(on:using:)\ncrawled: 2025-12-07T13:32:04Z\n---\n\n# requestMediaDataWhenReady(on:using:)\n\n**Instance Method**\n\nInstructs the target to invoke a client-supplied block repeatedly, at its convenience, in order to gather sample buffers for display.\n\n## Declaration\n\n```swift\nfunc requestMediaDataWhenReady(on queue: dispatch_queue_t, using block: @escaping () -> Void)\n```\n\n## Parameters\n\n- **queue**: The dispatch queue.\n- **block**: The block that provides media data.\n\n## Discussion\n\nApple discourages the use of this symbol in iOS 17, tvOS 17, and macOS 14 and later. Use [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVQueuedSampleBufferRendering\/requestMediaDataWhenReady(on:using:)] on the [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVSampleBufferDisplayLayer\/sampleBufferRenderer] instead.\n\nThe block is expected to call the [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVSampleBufferDisplayLayer\/enqueue(_:)] in order to provide media data for decompression (if necessary) and rendering while the [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVSampleBufferDisplayLayer\/isReadyForMoreMediaData] property remains [doc:\/\/com.apple.documentation\/documentation\/Swift\/true], or until it can provide no additional media. When the layer has decoded enough media data that it is ready for additional media data, it will invoke the block again.\n\nBy allowing the display layer to determine when to invoke the block, the implementation of incremental I\/O operations is simplified when supplying synchronized media data during rendering.\n\nIf this function is called multiple times, only the last call is effective.\n\nYou invoke the [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVSampleBufferDisplayLayer\/stopRequestingMediaData()] method to cancel this request.\n\nEach call to `requestMediaDataWhenReadyOnQueue:usingBlock:` must be balanced with a corresponding call to [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVSampleBufferDisplayLayer\/stopRequestingMediaData()].\n\nReleasing the receiver instance without a call to [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVSampleBufferDisplayLayer\/stopRequestingMediaData()] will result in undefined behavior.\n\n## Initiating media data requests\n\n- **isReadyForMoreMediaData**: A Boolean value that indicates the readiness of the layer to accept more sample buffers.\n- **requiresFlushToResumeDecoding**: A Boolean value that indicates whether the layer needs to flush its state to continue decoding frames.\n- **stopRequestingMediaData()**: Cancels any current media data request.\n- **hasSufficientMediaDataForReliablePlaybackStart**: A Boolean value that indicates whether the enqueued media data meets the renderer’s preroll level.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "A Boolean value that indicates the readiness of the layer to accept more sample buffers.",
          "name" : "isReadyForMoreMediaData",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVSampleBufferDisplayLayer\/isReadyForMoreMediaData"
        },
        {
          "description" : "A Boolean value that indicates whether the layer needs to flush its state to continue decoding frames.",
          "name" : "requiresFlushToResumeDecoding",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVSampleBufferDisplayLayer\/requiresFlushToResumeDecoding"
        },
        {
          "description" : "Cancels any current media data request.",
          "name" : "stopRequestingMediaData()",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVSampleBufferDisplayLayer\/stopRequestingMediaData()"
        },
        {
          "description" : "A Boolean value that indicates whether the enqueued media data meets the renderer’s preroll level.",
          "name" : "hasSufficientMediaDataForReliablePlaybackStart",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVSampleBufferDisplayLayer\/hasSufficientMediaDataForReliablePlaybackStart"
        }
      ],
      "title" : "Initiating media data requests"
    }
  ],
  "source" : "appleJSON",
  "title" : "requestMediaDataWhenReady(on:using:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVSampleBufferDisplayLayer\/requestMediaDataWhenReady(on:using:)"
}