{
  "abstract" : "Check for portrait effects matte metadata in existing images.",
  "codeExamples" : [

  ],
  "contentHash" : "6d179e3796a7079e8b632e78bcf0d659b1e8246adc7a8e750d1917b15e746e21",
  "crawledAt" : "2025-12-05T07:10:22Z",
  "id" : "52B5FB57-5504-4EF9-943B-826F5215EE07",
  "kind" : "article",
  "language" : "swift",
  "module" : "AVFoundation",
  "overview" : "## Overview\n\nThe portrait effects matte is stored in the image file alongside the depth data auxiliary image. You can load, view, and edit the portrait effects matte as a high-level object called an [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVPortraitEffectsMatte], analogous to [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVDepthData]. This mirrors traditional depth map access using [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVDepthData] in its technique to get the elementary auxiliary image bits out of the file.\n\n\n\n### Load and view a matting image from file\n\nLoad the portrait effects matte by using [doc:\/\/com.apple.documentation\/documentation\/ImageIO] to extract an auxiliary image of type [doc:\/\/com.apple.documentation\/documentation\/ImageIO\/kCGImageAuxiliaryDataTypePortraitEffectsMatte]. Convert this auxiliary image to an auxiliary information dictionary, which contains the matte as metadata of class [doc:\/\/com.apple.documentation\/documentation\/ImageIO\/CGImageMetadata]. Generate the portrait effects matte object, [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVPortraitEffectsMatte], by passing the dictionary to [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVPortraitEffectsMatte\/init(fromDictionaryRepresentation:)]. From this object, you can generate a [doc:\/\/com.apple.documentation\/documentation\/CoreImage\/CIImage] object to bring the image into viewable forms, like [doc:\/\/com.apple.documentation\/documentation\/UIKit\/UIImage].\n\nWith this matte image, your app can:\n\nWhen decompressed, the matte images are natively L008 ([doc:\/\/com.apple.documentation\/documentation\/CoreVideo\/kCVPixelFormatType_OneComponent8]), which is an 8-bit one-component format where black is zero. Portrait effects matte images are not gamma corrected. They’re tagged with a linear transfer function, indicating that no color correction should be applied when working with them.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/AVFoundation\/extracting-portrait-effects-matte-image-data-from-a-photo\ncrawled: 2025-12-05T07:10:22Z\n---\n\n# Extracting Portrait Effects matte image data from a photo\n\n**Article**\n\nCheck for portrait effects matte metadata in existing images.\n\n## Overview\n\nThe portrait effects matte is stored in the image file alongside the depth data auxiliary image. You can load, view, and edit the portrait effects matte as a high-level object called an [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVPortraitEffectsMatte], analogous to [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVDepthData]. This mirrors traditional depth map access using [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVDepthData] in its technique to get the elementary auxiliary image bits out of the file.\n\n\n\n### Load and view a matting image from file\n\nLoad the portrait effects matte by using [doc:\/\/com.apple.documentation\/documentation\/ImageIO] to extract an auxiliary image of type [doc:\/\/com.apple.documentation\/documentation\/ImageIO\/kCGImageAuxiliaryDataTypePortraitEffectsMatte]. Convert this auxiliary image to an auxiliary information dictionary, which contains the matte as metadata of class [doc:\/\/com.apple.documentation\/documentation\/ImageIO\/CGImageMetadata]. Generate the portrait effects matte object, [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVPortraitEffectsMatte], by passing the dictionary to [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVPortraitEffectsMatte\/init(fromDictionaryRepresentation:)]. From this object, you can generate a [doc:\/\/com.apple.documentation\/documentation\/CoreImage\/CIImage] object to bring the image into viewable forms, like [doc:\/\/com.apple.documentation\/documentation\/UIKit\/UIImage].\n\n\n\nWith this matte image, your app can:\n\n- Access the uncompressed pixels of the portrait effects matte in memory.\n- Create rotated or flipped derivative copies of the mask.\n- Replace a pixel of the matte with one of your own, reflecting an effect you’re applying to the main image.\n- Create a dictionary of elementary PEM parts suitable for writing to a file using Image I\/O’s [doc:\/\/com.apple.documentation\/documentation\/ImageIO\/CGImageDestination].\n\nWhen decompressed, the matte images are natively L008 ([doc:\/\/com.apple.documentation\/documentation\/CoreVideo\/kCVPixelFormatType_OneComponent8]), which is an 8-bit one-component format where black is zero. Portrait effects matte images are not gamma corrected. They’re tagged with a linear transfer function, indicating that no color correction should be applied when working with them.\n\n## Examining a Portrait Effects matte\n\n- **mattingImage**: The portrait effects matte’s internal image, formatted as a pixel buffer.\n- **pixelFormatType**: The pixel format type of this portrait effects matte’s internal image.\n- **dictionaryRepresentation(forAuxiliaryDataType:)**: A dictionary of primitive map information used for writing an image file with a portrait effects matte.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "The portrait effects matte’s internal image, formatted as a pixel buffer.",
          "name" : "mattingImage",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVPortraitEffectsMatte\/mattingImage"
        },
        {
          "description" : "The pixel format type of this portrait effects matte’s internal image.",
          "name" : "pixelFormatType",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVPortraitEffectsMatte\/pixelFormatType"
        },
        {
          "description" : "A dictionary of primitive map information used for writing an image file with a portrait effects matte.",
          "name" : "dictionaryRepresentation(forAuxiliaryDataType:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVPortraitEffectsMatte\/dictionaryRepresentation(forAuxiliaryDataType:)"
        }
      ],
      "title" : "Examining a Portrait Effects matte"
    }
  ],
  "source" : "appleJSON",
  "title" : "Extracting Portrait Effects matte image data from a photo",
  "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/extracting-portrait-effects-matte-image-data-from-a-photo"
}