{
  "abstract" : "A protocol that defines the methods custom video compositors must implement.",
  "codeExamples" : [

  ],
  "contentHash" : "3083c20708a88eea62c6f3df26139ae3e35d7595e89d9bd6739b89197c66b85c",
  "crawledAt" : "2025-12-03T12:06:34Z",
  "declaration" : {
    "code" : "protocol AVVideoCompositing : NSObjectProtocol, Sendable",
    "language" : "swift"
  },
  "id" : "519C3092-30D8-477E-9B64-8474C6177F43",
  "kind" : "protocol",
  "language" : "swift",
  "module" : "AVFoundation",
  "overview" : "## Overview\n\nFor each AVFoundation object of class [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVPlayerItem], [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVAssetExportSession], [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVAssetImageGenerator], or [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVAssetReaderVideoCompositionOutput] that has a non-`nil` value for its `videoComposition` property, and the value of the [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVVideoComposition\/customVideoCompositorClass] property of the `AVVideoComposition` isn’t `nil`, AVFoundation creates and uses an instance of that custom video compositor class to process the instructions contained in the [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVVideoComposition].\n\nThe system creates a custom video compositor instance when you assign `videoComposition` an instance of [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVVideoComposition] that’s associated with a different custom video compositor class than the object was previously using.\n\nWhen creating instances of custom video compositors, AVFoundation initializes them by calling `init` and then makes them available as the value of the `customVideoCompositor` property of the object. You then can do any additional setup or configuration to the custom compositor.\n\nThe AVFoundation object retains the custom video compositor instances for as long as the value of the `videoComposition` property indicates that there’s an instance of the same custom video compositor class. This is true even when the value changes from one instance of AVVideoComposition to another associated instance with the same custom video compositor class.",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "tvOS",
    "visionOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/avfoundation\/avvideocompositing\ncrawled: 2025-12-03T12:06:34Z\n---\n\n# AVVideoCompositing\n\n**Protocol**\n\nA protocol that defines the methods custom video compositors must implement.\n\n## Declaration\n\n```swift\nprotocol AVVideoCompositing : NSObjectProtocol, Sendable\n```\n\n## Overview\n\nFor each AVFoundation object of class [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVPlayerItem], [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVAssetExportSession], [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVAssetImageGenerator], or [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVAssetReaderVideoCompositionOutput] that has a non-`nil` value for its `videoComposition` property, and the value of the [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVVideoComposition\/customVideoCompositorClass] property of the `AVVideoComposition` isn’t `nil`, AVFoundation creates and uses an instance of that custom video compositor class to process the instructions contained in the [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVVideoComposition].\n\nThe system creates a custom video compositor instance when you assign `videoComposition` an instance of [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVVideoComposition] that’s associated with a different custom video compositor class than the object was previously using.\n\nWhen creating instances of custom video compositors, AVFoundation initializes them by calling `init` and then makes them available as the value of the `customVideoCompositor` property of the object. You then can do any additional setup or configuration to the custom compositor.\n\nThe AVFoundation object retains the custom video compositor instances for as long as the value of the `videoComposition` property indicates that there’s an instance of the same custom video compositor class. This is true even when the value changes from one instance of AVVideoComposition to another associated instance with the same custom video compositor class.\n\n## Inspecting processing requirements\n\n- **sourcePixelBufferAttributes**: The pixel buffer attributes that the compositor accepts for source frames.\n- **requiredPixelBufferAttributesForRenderContext**: The pixel buffer attributes that the compositor requires for pixel buffers that it creates.\n- **supportsHDRSourceFrames**: A Boolean value that indicates whether the compositor handles source frames that contain high dynamic range (HDR) properties.\n- **supportsWideColorSourceFrames**: A Boolean value that indicates whether the compositor handles source frames that contains wide color properties.\n- **canConformColorOfSourceFrames**: A Boolean value that indicates whether the compositor conforms the color space of source frames to the composition color space.\n- **supportsSourceTaggedBuffers**\n\n## Observing render context changes\n\n- **renderContextChanged(_:)**: Tells the compositor that the composition changed render contexts.\n- **AVVideoCompositionRenderContext**: An object that defines the context in which custom compositors render pixel buffers.\n\n## Preparing to render frames\n\n- **anticipateRendering(using:)**: Informs a custom video compositor about upcoming rendering requests.\n- **prerollForRendering(using:)**: Tells a custom video compositor to perform any work in the prerolling phase.\n- **AVVideoCompositionRenderHint**: Information about upcoming composition requests, such as composition start time and end time.\n\n## Rendering the composition\n\n- **startRequest(_:)**: Directs a custom video compositor object to create a new pixel buffer composed asynchronously from a collection of sources.\n- **AVAsynchronousVideoCompositionRequest**: An object that contains information a video compositor needs to render an output pixel buffer.\n- **cancelAllPendingVideoCompositionRequests()**: Directs a custom video compositor object to cancel or finish all pending video composition requests.\n\n## Custom video compositing\n\n- **Processing spatial video with a custom video compositor**: Create a custom video compositor to edit spatial video for playback and export.\n\n## Inherits From\n\n- NSObjectProtocol\n- Sendable\n- SendableMetatype\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "The pixel buffer attributes that the compositor accepts for source frames.",
          "name" : "sourcePixelBufferAttributes",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVVideoCompositing\/sourcePixelBufferAttributes"
        },
        {
          "description" : "The pixel buffer attributes that the compositor requires for pixel buffers that it creates.",
          "name" : "requiredPixelBufferAttributesForRenderContext",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVVideoCompositing\/requiredPixelBufferAttributesForRenderContext"
        },
        {
          "description" : "A Boolean value that indicates whether the compositor handles source frames that contain high dynamic range (HDR) properties.",
          "name" : "supportsHDRSourceFrames",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVVideoCompositing\/supportsHDRSourceFrames"
        },
        {
          "description" : "A Boolean value that indicates whether the compositor handles source frames that contains wide color properties.",
          "name" : "supportsWideColorSourceFrames",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVVideoCompositing\/supportsWideColorSourceFrames"
        },
        {
          "description" : "A Boolean value that indicates whether the compositor conforms the color space of source frames to the composition color space.",
          "name" : "canConformColorOfSourceFrames",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVVideoCompositing\/canConformColorOfSourceFrames"
        },
        {
          "description" : "",
          "name" : "supportsSourceTaggedBuffers",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVVideoCompositing\/supportsSourceTaggedBuffers"
        }
      ],
      "title" : "Inspecting processing requirements"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Tells the compositor that the composition changed render contexts.",
          "name" : "renderContextChanged(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVVideoCompositing\/renderContextChanged(_:)"
        },
        {
          "description" : "An object that defines the context in which custom compositors render pixel buffers.",
          "name" : "AVVideoCompositionRenderContext",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVVideoCompositionRenderContext"
        }
      ],
      "title" : "Observing render context changes"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Informs a custom video compositor about upcoming rendering requests.",
          "name" : "anticipateRendering(using:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVVideoCompositing\/anticipateRendering(using:)"
        },
        {
          "description" : "Tells a custom video compositor to perform any work in the prerolling phase.",
          "name" : "prerollForRendering(using:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVVideoCompositing\/prerollForRendering(using:)"
        },
        {
          "description" : "Information about upcoming composition requests, such as composition start time and end time.",
          "name" : "AVVideoCompositionRenderHint",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVVideoCompositionRenderHint"
        }
      ],
      "title" : "Preparing to render frames"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Directs a custom video compositor object to create a new pixel buffer composed asynchronously from a collection of sources.",
          "name" : "startRequest(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVVideoCompositing\/startRequest(_:)"
        },
        {
          "description" : "An object that contains information a video compositor needs to render an output pixel buffer.",
          "name" : "AVAsynchronousVideoCompositionRequest",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVAsynchronousVideoCompositionRequest"
        },
        {
          "description" : "Directs a custom video compositor object to cancel or finish all pending video composition requests.",
          "name" : "cancelAllPendingVideoCompositionRequests()",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVVideoCompositing\/cancelAllPendingVideoCompositionRequests()"
        }
      ],
      "title" : "Rendering the composition"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Create a custom video compositor to edit spatial video for playback and export.",
          "name" : "Processing spatial video with a custom video compositor",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/processing-spatial-video-with-a-custom-video-compositor"
        }
      ],
      "title" : "Custom video compositing"
    },
    {
      "content" : "",
      "items" : [
        {
          "name" : "NSObjectProtocol"
        },
        {
          "name" : "Sendable"
        },
        {
          "name" : "SendableMetatype"
        }
      ],
      "title" : "Inherits From"
    }
  ],
  "source" : "appleJSON",
  "title" : "AVVideoCompositing",
  "url" : "https:\/\/developer.apple.com\/documentation\/avfoundation\/avvideocompositing"
}