{
  "abstract" : "Appends sample data to a media file and adds sample references for the added data to a track’s media sample tables.",
  "codeExamples" : [

  ],
  "contentHash" : "0405e6bbbc55d32d508e1aceb72addec1c9c8e25421a635d58812af10308c455",
  "crawledAt" : "2025-12-05T08:45:17Z",
  "declaration" : {
    "code" : "func append(_ sampleBuffer: CMSampleBuffer, decodeTime outDecodeTime: UnsafeMutablePointer<CMTime>?, presentationTime outPresentationTime: UnsafeMutablePointer<CMTime>?) throws",
    "language" : "swift"
  },
  "id" : "AFC48184-8CC3-4B89-8D27-4DA10B64A349",
  "kind" : "method",
  "language" : "swift",
  "module" : "AVFoundation",
  "overview" : "## Discussion\n\nIf the sample buffer carries sample data, the sample data is written to the container specified by the track property [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVMutableMovieTrack\/mediaDataStorage] if non-nil, or by the movie property [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVMutableMovie\/defaultMediaDataStorage] if non-nil, and sample references are appended to the track’s media. If both media data storage properties are `nil`, the method will fail and return `NO`.\n\nIf the sample buffer carries sample references only, sample data will not be written and sample references to the samples in their original container are appended to the track’s media as necessary.\n\nTo make the new samples appear in the track’s timeline, invoke [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVMutableMovieTrack\/insertMediaTimeRange(_:into:)]. Retrieve the [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVMovieTrack\/mediaPresentationTimeRange] property before and after appending a sequence of samples, using [doc:\/\/com.apple.documentation\/documentation\/CoreMedia\/CMTimeRangeGetEnd(_:)] on each to calculate the media time range for [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVMutableMovieTrack\/insertMediaTimeRange(_:into:)].\n\nIt’s safe for multiple threads to call this method on different tracks at the same time.",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "visionOS",
    "watchOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVMutableMovieTrack\/append(_:decodeTime:presentationTime:)\ncrawled: 2025-12-05T08:45:17Z\n---\n\n# append(_:decodeTime:presentationTime:)\n\n**Instance Method**\n\nAppends sample data to a media file and adds sample references for the added data to a track’s media sample tables.\n\n## Declaration\n\n```swift\nfunc append(_ sampleBuffer: CMSampleBuffer, decodeTime outDecodeTime: UnsafeMutablePointer<CMTime>?, presentationTime outPresentationTime: UnsafeMutablePointer<CMTime>?) throws\n```\n\n## Parameters\n\n- **sampleBuffer**: The sample buffer to be appended.\n- **outDecodeTime**: A pointer to a [doc:\/\/com.apple.documentation\/documentation\/CoreMedia\/CMTime] structure to receive the decode time in the media of the first sample appended from the sample buffer. Pass `NULL` if the information is not needed.\n- **outPresentationTime**: A pointer to a [doc:\/\/com.apple.documentation\/documentation\/CoreMedia\/CMTime] structure to receive the presentation time in the media of the first sample appended from the sample buffer. Pass `NULL` if the information is not needed.\n\n## Discussion\n\nIf the sample buffer carries sample data, the sample data is written to the container specified by the track property [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVMutableMovieTrack\/mediaDataStorage] if non-nil, or by the movie property [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVMutableMovie\/defaultMediaDataStorage] if non-nil, and sample references are appended to the track’s media. If both media data storage properties are `nil`, the method will fail and return `NO`.\n\nIf the sample buffer carries sample references only, sample data will not be written and sample references to the samples in their original container are appended to the track’s media as necessary.\n\n\n\nTo make the new samples appear in the track’s timeline, invoke [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVMutableMovieTrack\/insertMediaTimeRange(_:into:)]. Retrieve the [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVMovieTrack\/mediaPresentationTimeRange] property before and after appending a sequence of samples, using [doc:\/\/com.apple.documentation\/documentation\/CoreMedia\/CMTimeRangeGetEnd(_:)] on each to calculate the media time range for [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVMutableMovieTrack\/insertMediaTimeRange(_:into:)].\n\nIt’s safe for multiple threads to call this method on different tracks at the same time.\n\n## Appending sample data\n\n- **append(_:)**: Appends sample data to a media file and adds sample references for the added data to a track’s media sample tables.\n- **insertMediaTimeRange(_:into:)**: Inserts a reference to a media time range into a track.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Appends sample data to a media file and adds sample references for the added data to a track’s media sample tables.",
          "name" : "append(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVMutableMovieTrack\/append(_:)"
        },
        {
          "description" : "Inserts a reference to a media time range into a track.",
          "name" : "insertMediaTimeRange(_:into:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVMutableMovieTrack\/insertMediaTimeRange(_:into:)"
        }
      ],
      "title" : "Appending sample data"
    }
  ],
  "source" : "appleJSON",
  "title" : "append(_:decodeTime:presentationTime:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVMutableMovieTrack\/append(_:decodeTime:presentationTime:)"
}