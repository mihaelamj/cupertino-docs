{
  "abstract" : "An object that describes how to compose video frames at particular points in time.",
  "codeExamples" : [

  ],
  "conformsTo" : [
    "CVarArg",
    "CustomDebugStringConvertible",
    "CustomStringConvertible",
    "Equatable",
    "Hashable",
    "NSCopying",
    "NSMutableCopying",
    "NSObjectProtocol",
    "Sendable",
    "SendableMetatype"
  ],
  "contentHash" : "4cab1e08f4b85a293f3821c17dcf25e185c803b5b76a8bc3803aa401d982b37b",
  "crawledAt" : "2025-12-02T16:09:59Z",
  "declaration" : {
    "code" : "class AVVideoComposition",
    "language" : "swift"
  },
  "id" : "BEBABE06-679D-4ACB-9F08-0E47E4964F9A",
  "inheritedBy" : [
    "AVMutableVideoComposition"
  ],
  "kind" : "class",
  "language" : "swift",
  "module" : "AVFoundation",
  "overview" : "## Overview\n\nIf you use the built-in video compositor, the instructions a video composition contain can specify a spatial transformation, an opacity value, and a cropping rectangle for each video source. This values can vary over time by applying linear ramping functions.\n\nYou can create a custom video compositor by implementing the [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVVideoCompositing] protocol. The system provides the custom video compositor with pixel buffers for each of its video sources during playback, and can perform arbitrary graphical operations on them to produce visual output.",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "tvOS",
    "visionOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVVideoComposition\ncrawled: 2025-12-02T16:09:59Z\n---\n\n# AVVideoComposition\n\n**Class**\n\nAn object that describes how to compose video frames at particular points in time.\n\n## Declaration\n\n```swift\nclass AVVideoComposition\n```\n\n## Overview\n\nIf you use the built-in video compositor, the instructions a video composition contain can specify a spatial transformation, an opacity value, and a cropping rectangle for each video source. This values can vary over time by applying linear ramping functions.\n\nYou can create a custom video compositor by implementing the [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVVideoCompositing] protocol. The system provides the custom video compositor with pixel buffers for each of its video sources during playback, and can perform arbitrary graphical operations on them to produce visual output.\n\n## Creating a video composition\n\n- **init(configuration:)**: Initialize an AVVideoComposition with a configuration.\n- **AVVideoComposition.Configuration**: Configurable properties for initializing a new AVVideoComposition instance.\n- **init(applyingFiltersTo:applier:)**: Creates a video composition configured to apply Core Image filters to each video frame of the specified asset.\n- **videoComposition(with:applyingCIFiltersWithHandler:completionHandler:)**: Returns a new video composition that’s configured to apply Core Image filters to each video frame of the specified asset.\n- **AVAsynchronousCIImageFilteringRequest**: An object that supports using Core Image filters to process an individual video frame in a video composition.\n- **AVCIImageFilteringParameters**\n- **AVCIImageFilteringResult**: An output video frame processed with Core Image filtering.\n- **videoComposition(withPropertiesOf:completionHandler:)**: Returns a new video composition that’s configured to present the video tracks of the specified asset.\n- **init(propertiesOf:)**: Creates a video composition object configured to present the video tracks of the specified asset.\n- **init(asset:applyingCIFiltersWithHandler:)**: Creates a video composition configured to apply Core Image filters to each video frame of the specified asset.\n\n## Inspecting the video composition\n\n- **renderSize**: The size at which the video composition should render.\n- **renderScale**: The scale at which the video composition should render.\n- **frameDuration**: A time interval for which the video composition should render composed video frames.\n- **animationTool**: A video composition tool to use with Core Animation in offline rendering.\n- **colorPrimaries**: The color primaries used for video composition.\n- **colorTransferFunction**: The transfer function used for video composition.\n- **colorYCbCrMatrix**: The YCbCr matrix used for video composition.\n- **customVideoCompositorClass**: A custom compositor class to use.\n- **outputBufferDescription**: The output buffers of the video composition can be specified with the outputBufferDescription. The value is an array of an array of CMTag objects that describes the output buffers.\n- **spatialVideoConfigurations**: Indicates the spatial configurations that are available to associate with the output of the video composition.\n- **AVSpatialVideoConfiguration**\n\n## Validating the time range\n\n- **isValid(for:assetDuration:timeRange:validationDelegate:)**: Indicates whether the time ranges of the composition’s instructions conform to validation requirements.\n- **AVVideoCompositionValidationHandling**: Methods you can implement to indicate whether validation of a video composition should continue after specific errors are found.\n- **determineValidity(for:timeRange:validationDelegate:completionHandler:)**: Determines whether the time ranges of the composition’s instructions conform to validation requirements.\n- **isValid(for:timeRange:validationDelegate:)**: Indicates whether the time ranges of the composition’s instructions conform to validation requirements.\n\n## Reading instructions\n\n- **instructions**: The video composition instructions.\n- **AVVideoCompositionInstructionProtocol**: A protocol that defines the interface for a video composition instruction.\n\n## Identifying source tracks\n\n- **sourceTrackIDForFrameTiming**: An identifier of the source track from which the video composition derives frame timing.\n- **sourceSampleDataTrackIDs**: The identifiers of source sample data tracks in the composition that the object requires to compose frames.\n\n## Configuring HDR metadata\n\n- **perFrameHDRDisplayMetadataPolicy**: The policy for display of HDR display metadata on the rendered frame.\n- **AVVideoComposition.PerFrameHDRDisplayMetadataPolicy**: A type that defines the policy for handling of per frame HDR metadata.\n\n## Built-in video compositing\n\n- **Editing and playing HDR video**: Support high-dynamic-range (HDR) video content in your app by using the HDR editing and playback capabilities of AVFoundation.\n- **Debugging AVFoundation audio mixes, compositions, and video compositions**: Resolve common problems when creating compositions, video compositions, and audio mixes.\n- **AVVideoCompositionInstruction**: An operation that a compositor performs.\n- **AVVideoCompositionLayerInstruction**: An object used to modify the transform, cropping, and opacity ramps applied to a given track in a composition.\n- **AVMutableVideoComposition**: A mutable video composition subclass.\n- **AVMutableVideoCompositionInstruction**: A mutable video composition instruction subclass.\n- **AVMutableVideoCompositionLayerInstruction**: An object used to modify the transform, cropping, and opacity ramps applied to a given track in a mutable composition.\n\n## Inherits From\n\n- NSObject\n\n## Inherited By\n\n- AVMutableVideoComposition\n\n## Conforms To\n\n- CVarArg\n- CustomDebugStringConvertible\n- CustomStringConvertible\n- Equatable\n- Hashable\n- NSCopying\n- NSMutableCopying\n- NSObjectProtocol\n- Sendable\n- SendableMetatype\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Initialize an AVVideoComposition with a configuration.",
          "name" : "init(configuration:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVVideoComposition\/init(configuration:)"
        },
        {
          "description" : "Configurable properties for initializing a new AVVideoComposition instance.",
          "name" : "AVVideoComposition.Configuration",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVVideoComposition\/Configuration"
        },
        {
          "description" : "Creates a video composition configured to apply Core Image filters to each video frame of the specified asset.",
          "name" : "init(applyingFiltersTo:applier:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVVideoComposition\/init(applyingFiltersTo:applier:)"
        },
        {
          "description" : "Returns a new video composition that’s configured to apply Core Image filters to each video frame of the specified asset.",
          "name" : "videoComposition(with:applyingCIFiltersWithHandler:completionHandler:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVVideoComposition\/videoComposition(with:applyingCIFiltersWithHandler:completionHandler:)"
        },
        {
          "description" : "An object that supports using Core Image filters to process an individual video frame in a video composition.",
          "name" : "AVAsynchronousCIImageFilteringRequest",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVAsynchronousCIImageFilteringRequest"
        },
        {
          "description" : "",
          "name" : "AVCIImageFilteringParameters",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVCIImageFilteringParameters"
        },
        {
          "description" : "An output video frame processed with Core Image filtering.",
          "name" : "AVCIImageFilteringResult",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVCIImageFilteringResult"
        },
        {
          "description" : "Returns a new video composition that’s configured to present the video tracks of the specified asset.",
          "name" : "videoComposition(withPropertiesOf:completionHandler:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVVideoComposition\/videoComposition(withPropertiesOf:completionHandler:)"
        },
        {
          "description" : "Creates a video composition object configured to present the video tracks of the specified asset.",
          "name" : "init(propertiesOf:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVVideoComposition\/init(propertiesOf:)"
        },
        {
          "description" : "Creates a video composition configured to apply Core Image filters to each video frame of the specified asset.",
          "name" : "init(asset:applyingCIFiltersWithHandler:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVVideoComposition\/init(asset:applyingCIFiltersWithHandler:)"
        }
      ],
      "title" : "Creating a video composition"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "The size at which the video composition should render.",
          "name" : "renderSize",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVVideoComposition\/renderSize"
        },
        {
          "description" : "The scale at which the video composition should render.",
          "name" : "renderScale",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVVideoComposition\/renderScale"
        },
        {
          "description" : "A time interval for which the video composition should render composed video frames.",
          "name" : "frameDuration",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVVideoComposition\/frameDuration"
        },
        {
          "description" : "A video composition tool to use with Core Animation in offline rendering.",
          "name" : "animationTool",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVVideoComposition\/animationTool"
        },
        {
          "description" : "The color primaries used for video composition.",
          "name" : "colorPrimaries",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVVideoComposition\/colorPrimaries"
        },
        {
          "description" : "The transfer function used for video composition.",
          "name" : "colorTransferFunction",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVVideoComposition\/colorTransferFunction"
        },
        {
          "description" : "The YCbCr matrix used for video composition.",
          "name" : "colorYCbCrMatrix",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVVideoComposition\/colorYCbCrMatrix"
        },
        {
          "description" : "A custom compositor class to use.",
          "name" : "customVideoCompositorClass",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVVideoComposition\/customVideoCompositorClass"
        },
        {
          "description" : "The output buffers of the video composition can be specified with the outputBufferDescription. The value is an array of an array of CMTag objects that describes the output buffers.",
          "name" : "outputBufferDescription",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVVideoComposition\/outputBufferDescription-3ayt8"
        },
        {
          "description" : "Indicates the spatial configurations that are available to associate with the output of the video composition.",
          "name" : "spatialVideoConfigurations",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVVideoComposition\/spatialVideoConfigurations-80iab"
        },
        {
          "description" : "",
          "name" : "AVSpatialVideoConfiguration",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVSpatialVideoConfiguration-swift.struct"
        }
      ],
      "title" : "Inspecting the video composition"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Indicates whether the time ranges of the composition’s instructions conform to validation requirements.",
          "name" : "isValid(for:assetDuration:timeRange:validationDelegate:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVVideoComposition\/isValid(for:assetDuration:timeRange:validationDelegate:)"
        },
        {
          "description" : "Methods you can implement to indicate whether validation of a video composition should continue after specific errors are found.",
          "name" : "AVVideoCompositionValidationHandling",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVVideoCompositionValidationHandling"
        },
        {
          "description" : "Determines whether the time ranges of the composition’s instructions conform to validation requirements.",
          "name" : "determineValidity(for:timeRange:validationDelegate:completionHandler:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVVideoComposition\/determineValidity(for:timeRange:validationDelegate:completionHandler:)"
        },
        {
          "description" : "Indicates whether the time ranges of the composition’s instructions conform to validation requirements.",
          "name" : "isValid(for:timeRange:validationDelegate:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVVideoComposition\/isValid(for:timeRange:validationDelegate:)"
        }
      ],
      "title" : "Validating the time range"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "The video composition instructions.",
          "name" : "instructions",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVVideoComposition\/instructions"
        },
        {
          "description" : "A protocol that defines the interface for a video composition instruction.",
          "name" : "AVVideoCompositionInstructionProtocol",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVVideoCompositionInstructionProtocol"
        }
      ],
      "title" : "Reading instructions"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "An identifier of the source track from which the video composition derives frame timing.",
          "name" : "sourceTrackIDForFrameTiming",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVVideoComposition\/sourceTrackIDForFrameTiming"
        },
        {
          "description" : "The identifiers of source sample data tracks in the composition that the object requires to compose frames.",
          "name" : "sourceSampleDataTrackIDs",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVVideoComposition\/sourceSampleDataTrackIDs-2hgue"
        }
      ],
      "title" : "Identifying source tracks"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "The policy for display of HDR display metadata on the rendered frame.",
          "name" : "perFrameHDRDisplayMetadataPolicy",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVVideoComposition\/perFrameHDRDisplayMetadataPolicy-swift.property"
        },
        {
          "description" : "A type that defines the policy for handling of per frame HDR metadata.",
          "name" : "AVVideoComposition.PerFrameHDRDisplayMetadataPolicy",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVVideoComposition\/PerFrameHDRDisplayMetadataPolicy-swift.struct"
        }
      ],
      "title" : "Configuring HDR metadata"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Support high-dynamic-range (HDR) video content in your app by using the HDR editing and playback capabilities of AVFoundation.",
          "name" : "Editing and playing HDR video",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/editing-and-playing-hdr-video"
        },
        {
          "description" : "Resolve common problems when creating compositions, video compositions, and audio mixes.",
          "name" : "Debugging AVFoundation audio mixes, compositions, and video compositions",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/debugging-avfoundation-audio-mixes-compositions-and-video-compositions"
        },
        {
          "description" : "An operation that a compositor performs.",
          "name" : "AVVideoCompositionInstruction",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVVideoCompositionInstruction-swift.class"
        },
        {
          "description" : "An object used to modify the transform, cropping, and opacity ramps applied to a given track in a composition.",
          "name" : "AVVideoCompositionLayerInstruction",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVVideoCompositionLayerInstruction"
        },
        {
          "description" : "A mutable video composition subclass.",
          "name" : "AVMutableVideoComposition",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVMutableVideoComposition"
        },
        {
          "description" : "A mutable video composition instruction subclass.",
          "name" : "AVMutableVideoCompositionInstruction",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVMutableVideoCompositionInstruction"
        },
        {
          "description" : "An object used to modify the transform, cropping, and opacity ramps applied to a given track in a mutable composition.",
          "name" : "AVMutableVideoCompositionLayerInstruction",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVMutableVideoCompositionLayerInstruction"
        }
      ],
      "title" : "Built-in video compositing"
    },
    {
      "content" : "",
      "items" : [
        {
          "name" : "NSObject"
        }
      ],
      "title" : "Inherits From"
    }
  ],
  "source" : "appleJSON",
  "title" : "AVVideoComposition",
  "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVVideoComposition"
}