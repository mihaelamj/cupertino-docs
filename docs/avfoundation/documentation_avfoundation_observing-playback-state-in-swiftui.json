{
  "abstract" : "Keep your user interface in sync with state changes from playback objects.",
  "codeExamples" : [
    {
      "code" : "\/\/ Opt-in to observing with the Observation framework.\nAVPlayer.isObservationEnabled = true",
      "language" : "swift"
    },
    {
      "code" : "struct PlayerView: View {\n    let url: URL\n    \/\/ Don't create the player directly to avoid performance issues or other side effects.\n    @State private var player: AVPlayer?\n    \n    var body: some View {\n        ZStack {\n            if let player {\n                VideoView(player: player)\n                TransportView(player: player)\n            } else {\n                LoadingView()\n            }\n        }\n        \/\/ Use the task modifier to defer creating the player to ensure\n        \/\/ SwiftUI creates it only once when it first presents the view.\n        .task {\n            player = AVPlayer(url: url)\n        }\n    }\n}",
      "language" : "swift"
    },
    {
      "code" : "struct TransportView: View {\n    \n    \/\/ A player object passed from the view that owns the player reference.\n    let player: AVPlayer\n    \n    \/\/ Observe the time control status property to determine whether playback is active.\n    private var isPlaying: Bool {\n        player.timeControlStatus == .playing\n    }\n    \n    var body: some View {\n        \/\/ A button that toggles the state of playback.\n        Button {\n            if isPlaying {\n                player.pause()\n            } else {\n                player.play()\n            }\n        } label: {\n            Image(systemName: isPlaying ? \"pause.fill\" : \"play.fill\")\n        }\n        \/\/ Observe the player item's status property to determine when to enable the button.\n        .disabled(player.currentItem?.status != .readyToPlay)\n    }\n}",
      "language" : "swift"
    }
  ],
  "contentHash" : "0703951336eef4c19a37ef0caf369021f0ac7be77719ff3e078aa7ae1d34c8b1",
  "crawledAt" : "2025-12-02T15:25:49Z",
  "id" : "42647EA5-99A8-48E2-838D-9D7B9AA5D292",
  "kind" : "article",
  "language" : "swift",
  "module" : "AVFoundation",
  "overview" : "## Overview\n\nAn essential task when building custom media players is observing the state of playback objects to determine their readiness for playback and track other important lifecycle events. The way you typically do this is using key-value observing, but starting in iOS 26, tvOS 26, macOS 26, and visionOS 26, AVFoundation provides a new way to monitor playback state based on the [doc:\/\/com.apple.documentation\/documentation\/Observation] framework. AVFoundation supports this framework by making its core playback types conform to the [doc:\/\/com.apple.documentation\/documentation\/Observation\/Observable] protocol. This means you can use [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVPlayer] or [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVQueuePlayer], along with their associated [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVPlayerItem] and [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVPlayerItemTrack] objects to drive state changes directly within your SwiftUI views.\n\n## Opt-in to playback observation\n\nAVFoundation supports monitoring playback state with Observation, but it doesn’t enable this feature by default. Instead, you opt-in to this behavior by setting a `true` value for the  `isObservationEnabled` property of the [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVPlayer] class.\n\nPerform this opt-in early in your app lifecycle, such as in your main [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/App] structure or [doc:\/\/com.apple.documentation\/documentation\/UIKit\/UIApplicationDelegate] (in a mixed UIKit and SwiftUI app). This setting is global to your app and must be set *before* creating playback objects. Attempting to change its value after creating these objects results in AVFoundation throwing an exception.\n\n## Store playback state\n\nYou define a single source of truth in your app using a SwiftUI [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/State] variable. This property wrapper always instantiates its default value when SwiftUI creates a view. When using it to store playback objects, either directly or as part of a custom `@Observable` model object, avoid performance issues or other potential side effects by deferring the creation of these objects by using the [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/View\/task(priority:_:)] modifier. For example, in a simple playback case you could define a state variable to hold a player object and initialize it like shown below:\n\nUsing the task modifier ensures that SwiftUI initializes the player object only once when it first presents the view.\n\n## Observe state changes\n\nBecause the playback objects adopt the [doc:\/\/com.apple.documentation\/documentation\/Observation\/Observable] protocol, you can use them directly within SwiftUI views like any other `@Observable` object. For example, you can pass a player instance to a view and have the view automatically redraw itself as playback state changes.\n\nThe transport view defines an `isPlaying` property that uses the player object’s [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVPlayer\/timeControlStatus-swift.property] property to determine whether it’s actively playing media. It uses this property to drive changes to the button’s presentation and behavior. The view also observes the current player item and enables the button only after the item’s [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVPlayerItem\/status-swift.property] indicates it’s ready to play.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/AVFoundation\/observing-playback-state-in-swiftui\ncrawled: 2025-12-02T15:25:49Z\n---\n\n# Observing playback state in SwiftUI\n\n**Article**\n\nKeep your user interface in sync with state changes from playback objects.\n\n## Overview\n\nAn essential task when building custom media players is observing the state of playback objects to determine their readiness for playback and track other important lifecycle events. The way you typically do this is using key-value observing, but starting in iOS 26, tvOS 26, macOS 26, and visionOS 26, AVFoundation provides a new way to monitor playback state based on the [doc:\/\/com.apple.documentation\/documentation\/Observation] framework. AVFoundation supports this framework by making its core playback types conform to the [doc:\/\/com.apple.documentation\/documentation\/Observation\/Observable] protocol. This means you can use [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVPlayer] or [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVQueuePlayer], along with their associated [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVPlayerItem] and [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVPlayerItemTrack] objects to drive state changes directly within your SwiftUI views.\n\n## Opt-in to playback observation\n\nAVFoundation supports monitoring playback state with Observation, but it doesn’t enable this feature by default. Instead, you opt-in to this behavior by setting a `true` value for the  `isObservationEnabled` property of the [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVPlayer] class.\n\n```swift\n\/\/ Opt-in to observing with the Observation framework.\nAVPlayer.isObservationEnabled = true\n```\n\nPerform this opt-in early in your app lifecycle, such as in your main [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/App] structure or [doc:\/\/com.apple.documentation\/documentation\/UIKit\/UIApplicationDelegate] (in a mixed UIKit and SwiftUI app). This setting is global to your app and must be set *before* creating playback objects. Attempting to change its value after creating these objects results in AVFoundation throwing an exception.\n\n## Store playback state\n\nYou define a single source of truth in your app using a SwiftUI [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/State] variable. This property wrapper always instantiates its default value when SwiftUI creates a view. When using it to store playback objects, either directly or as part of a custom `@Observable` model object, avoid performance issues or other potential side effects by deferring the creation of these objects by using the [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/View\/task(priority:_:)] modifier. For example, in a simple playback case you could define a state variable to hold a player object and initialize it like shown below:\n\n```swift\nstruct PlayerView: View {\n    let url: URL\n    \/\/ Don't create the player directly to avoid performance issues or other side effects.\n    @State private var player: AVPlayer?\n    \n    var body: some View {\n        ZStack {\n            if let player {\n                VideoView(player: player)\n                TransportView(player: player)\n            } else {\n                LoadingView()\n            }\n        }\n        \/\/ Use the task modifier to defer creating the player to ensure\n        \/\/ SwiftUI creates it only once when it first presents the view.\n        .task {\n            player = AVPlayer(url: url)\n        }\n    }\n}\n```\n\nUsing the task modifier ensures that SwiftUI initializes the player object only once when it first presents the view.\n\n## Observe state changes\n\nBecause the playback objects adopt the [doc:\/\/com.apple.documentation\/documentation\/Observation\/Observable] protocol, you can use them directly within SwiftUI views like any other `@Observable` object. For example, you can pass a player instance to a view and have the view automatically redraw itself as playback state changes.\n\n```swift\nstruct TransportView: View {\n    \n    \/\/ A player object passed from the view that owns the player reference.\n    let player: AVPlayer\n    \n    \/\/ Observe the time control status property to determine whether playback is active.\n    private var isPlaying: Bool {\n        player.timeControlStatus == .playing\n    }\n    \n    var body: some View {\n        \/\/ A button that toggles the state of playback.\n        Button {\n            if isPlaying {\n                player.pause()\n            } else {\n                player.play()\n            }\n        } label: {\n            Image(systemName: isPlaying ? \"pause.fill\" : \"play.fill\")\n        }\n        \/\/ Observe the player item's status property to determine when to enable the button.\n        .disabled(player.currentItem?.status != .readyToPlay)\n    }\n}\n```\n\nThe transport view defines an `isPlaying` property that uses the player object’s [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVPlayer\/timeControlStatus-swift.property] property to determine whether it’s actively playing media. It uses this property to drive changes to the button’s presentation and behavior. The view also observes the current player item and enables the button only after the item’s [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVPlayerItem\/status-swift.property] indicates it’s ready to play.\n\n\n\n## Playback control\n\n- **Controlling the transport behavior of a player**: Play, pause, and seek through a media presentation.\n- **Creating a seamless multiview playback experience**: Build advanced multiview playback experiences with the AVFoundation and AVRouting frameworks.\n- **AVPlayer**: An object that provides the interface to control the player’s transport behavior.\n- **AVPlayerItem**: An object that models the timing and presentation state of an asset during playback.\n- **AVPlayerItemTrack**: An object that represents the presentation state of an asset track during playback.\n- **AVQueuePlayer**: An object that plays a sequence of player items.\n- **AVPlayerLooper**: An object that loops media content using a queue player.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Play, pause, and seek through a media presentation.",
          "name" : "Controlling the transport behavior of a player",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/controlling-the-transport-behavior-of-a-player"
        },
        {
          "description" : "Build advanced multiview playback experiences with the AVFoundation and AVRouting frameworks.",
          "name" : "Creating a seamless multiview playback experience",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/creating-a-seamless-multiview-playback-experience"
        },
        {
          "description" : "An object that provides the interface to control the player’s transport behavior.",
          "name" : "AVPlayer",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVPlayer"
        },
        {
          "description" : "An object that models the timing and presentation state of an asset during playback.",
          "name" : "AVPlayerItem",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVPlayerItem"
        },
        {
          "description" : "An object that represents the presentation state of an asset track during playback.",
          "name" : "AVPlayerItemTrack",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVPlayerItemTrack"
        },
        {
          "description" : "An object that plays a sequence of player items.",
          "name" : "AVQueuePlayer",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVQueuePlayer"
        },
        {
          "description" : "An object that loops media content using a queue player.",
          "name" : "AVPlayerLooper",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVPlayerLooper"
        }
      ],
      "title" : "Playback control"
    }
  ],
  "source" : "appleJSON",
  "title" : "Observing playback state in SwiftUI",
  "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/observing-playback-state-in-swiftui"
}