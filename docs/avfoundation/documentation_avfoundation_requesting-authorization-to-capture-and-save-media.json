{
  "abstract" : "Prompt the user to authorize access to the camera, microphone, and photo library.",
  "codeExamples" : [
    {
      "code" : "var isAuthorized: Bool {\n    get async {\n        let status = AVCaptureDevice.authorizationStatus(for: .video)\n        \n        \/\/ Determine if the user previously authorized camera access.\n        var isAuthorized = status == .authorized\n        \n        \/\/ If the system hasn't determined the user's authorization status,\n        \/\/ explicitly prompt them for approval.\n        if status == .notDetermined {\n            isAuthorized = await AVCaptureDevice.requestAccess(for: .video)\n        }\n        \n        return isAuthorized\n    }\n}\n\nfunc setUpCaptureSession() async {\n    guard await isAuthorized else { return }\n    \/\/ Set up the capture session.\n}",
      "language" : "swift"
    }
  ],
  "contentHash" : "b74186a4eb78a96e54d710e7dd8ac2094eca321cf6e76f460ce5a2d41af39d09",
  "crawledAt" : "2025-12-03T20:08:32Z",
  "id" : "4EEB6BC7-1E58-4E11-8526-FBE5654F18B5",
  "kind" : "article",
  "language" : "swift",
  "module" : "AVFoundation",
  "overview" : "## Overview\n\nIn iOS and macOS 10.14 and later, the user must explicitly grant permission for each app to access the camera and microphone. Before your app can use a capture device for the first time, the system presents an alert with an app-specific message that you specify, to ask the user to grant your app access to the capture device. For example, the following screenshots show the camera access alert in iOS and macOS 10.14 and later:\n\n\n\n\n\nThe system remembers the user’s response to each access alert, so subsequent uses of the corresponding capture device don’t cause the alert to appear again. The user can change permission settings for your app in Settings > Privacy in iOS and in System Preferences > Security & Privacy in macOS.\n\nThis article outlines the steps you can take to ensure your app has permission before it attempts to capture media.\n\n### Configure access alerts\n\nThe system requires that your app provides static messages to display to the user when the system asks for permission to access the camera or microphone:\n\nFor each key, provide a message that explains to the user why your app needs to capture media so the user can feel confident granting permission to your app.\n\n\n\n### Enable entitlements in macOS\n\nIn macOS, you also need to enable the following entitlements in Signing & Capabilities for your app targets:\n\n\n\n### Verify and request authorization for capture\n\nAlways test the [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCaptureDevice] [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCaptureDevice\/authorizationStatus(for:)] method before setting up a capture session. If the user hasn’t granted or denied capture permission, the authorization status is [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVAuthorizationStatus\/notDetermined]. In this case, use the [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCaptureDevice\/requestAccess(for:completionHandler:)] method to tell the system to prompt the user.\n\nCall [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCaptureDevice\/requestAccess(for:completionHandler:)] before starting capture, but only at a time that’s appropriate for your app. For example, if photo or video capture isn’t the main focus of your app, check for permission only when the user invokes your app’s camera-related features. Here’s an example:\n\n### Request authorization to save captured media\n\nYour app must get permission to access the photo library before it attempts to save photos or videos; otherwise the system terminates your app. Which permission you request depends on the types of media you want to save:",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/AVFoundation\/requesting-authorization-to-capture-and-save-media\ncrawled: 2025-12-03T20:08:32Z\n---\n\n# Requesting authorization to capture and save media\n\n**Article**\n\nPrompt the user to authorize access to the camera, microphone, and photo library.\n\n## Overview\n\nIn iOS and macOS 10.14 and later, the user must explicitly grant permission for each app to access the camera and microphone. Before your app can use a capture device for the first time, the system presents an alert with an app-specific message that you specify, to ask the user to grant your app access to the capture device. For example, the following screenshots show the camera access alert in iOS and macOS 10.14 and later:\n\n\n\n\n\nThe system remembers the user’s response to each access alert, so subsequent uses of the corresponding capture device don’t cause the alert to appear again. The user can change permission settings for your app in Settings > Privacy in iOS and in System Preferences > Security & Privacy in macOS.\n\nThis article outlines the steps you can take to ensure your app has permission before it attempts to capture media.\n\n### Configure access alerts\n\nThe system requires that your app provides static messages to display to the user when the system asks for permission to access the camera or microphone:\n\n- If your app uses device cameras, include the [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Information-Property-List\/NSCameraUsageDescription] key in your app’s `Info.plist` file.\n- If your app uses device microphones, include the [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Information-Property-List\/NSMicrophoneUsageDescription] key in your app’s `Info.plist` file.\n\nFor each key, provide a message that explains to the user why your app needs to capture media so the user can feel confident granting permission to your app.\n\n\n\n### Enable entitlements in macOS\n\nIn macOS, you also need to enable the following entitlements in Signing & Capabilities for your app targets:\n\n- If your app uses device cameras, enable the [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Entitlements\/com.apple.security.device.camera].\n- If your app uses device microphones, enable the [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Entitlements\/com.apple.security.device.audio-input].\n\n\n\n\n\n### Verify and request authorization for capture\n\nAlways test the [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCaptureDevice] [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCaptureDevice\/authorizationStatus(for:)] method before setting up a capture session. If the user hasn’t granted or denied capture permission, the authorization status is [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVAuthorizationStatus\/notDetermined]. In this case, use the [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCaptureDevice\/requestAccess(for:completionHandler:)] method to tell the system to prompt the user.\n\nCall [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCaptureDevice\/requestAccess(for:completionHandler:)] before starting capture, but only at a time that’s appropriate for your app. For example, if photo or video capture isn’t the main focus of your app, check for permission only when the user invokes your app’s camera-related features. Here’s an example:\n\n```swift\nvar isAuthorized: Bool {\n    get async {\n        let status = AVCaptureDevice.authorizationStatus(for: .video)\n        \n        \/\/ Determine if the user previously authorized camera access.\n        var isAuthorized = status == .authorized\n        \n        \/\/ If the system hasn't determined the user's authorization status,\n        \/\/ explicitly prompt them for approval.\n        if status == .notDetermined {\n            isAuthorized = await AVCaptureDevice.requestAccess(for: .video)\n        }\n        \n        return isAuthorized\n    }\n}\n\nfunc setUpCaptureSession() async {\n    guard await isAuthorized else { return }\n    \/\/ Set up the capture session.\n}\n```\n\n### Request authorization to save captured media\n\nYour app must get permission to access the photo library before it attempts to save photos or videos; otherwise the system terminates your app. Which permission you request depends on the types of media you want to save:\n\n- For most photo and video capture workflows, including Live Photos and RAW format capture, use the [doc:\/\/com.apple.documentation\/documentation\/Photos\/PHPhotoLibrary] and [doc:\/\/com.apple.documentation\/documentation\/Photos\/PHAssetCreationRequest] classes. These classes require read\/write access to the photo library, so you need to use the [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Information-Property-List\/NSPhotoLibraryUsageDescription] key in your `Info.plist` file to provide the user a message to request access. For additional information, see [doc:\/\/com.apple.documentation\/documentation\/PhotoKit\/delivering-an-enhanced-privacy-experience-in-your-photos-app].\n- If your app only needs to save video to the photo library, the [doc:\/\/com.apple.documentation\/documentation\/UIKit\/UISaveVideoAtPathToSavedPhotosAlbum(_:_:_:_:)] function is a simpler alternative to [doc:\/\/com.apple.documentation\/documentation\/Photos\/PHPhotoLibrary]. This function only requires write access to the library. Use the [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Information-Property-List\/NSPhotoLibraryAddUsageDescription] key in your `Info.plist` file to provide the user a message to request permission to save to the photo library.\n\n\n\n",
  "sections" : [

  ],
  "source" : "appleJSON",
  "title" : "Requesting authorization to capture and save media",
  "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/requesting-authorization-to-capture-and-save-media"
}