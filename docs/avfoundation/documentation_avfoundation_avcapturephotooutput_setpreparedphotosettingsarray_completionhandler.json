{
  "abstract" : "Tells the photo capture output to prepare resources for future capture requests with the specified settings.",
  "codeExamples" : [

  ],
  "contentHash" : "4636b6bba950b056b4e887fec2d577d8203be6823414deb508c2d70c326bc3eb",
  "crawledAt" : "2025-11-30T23:09:16Z",
  "declaration" : {
    "code" : "func setPreparedPhotoSettingsArray(_ preparedPhotoSettingsArray: [AVCapturePhotoSettings], completionHandler: ((Bool, (any Error)?) -> Void)? = nil)",
    "language" : "swift"
  },
  "id" : "A42E9533-66D1-4DBF-8743-4898D39D24EB",
  "kind" : "method",
  "module" : "AVFoundation",
  "overview" : "## Discussion\n\nSome types of photo capture, such as bracketed captures and RAW captures, require the photo output to allocate additional buffers or prepare other resources. To prevent photo capture requests from executing slowly due to lazy resource allocation, you may call this method with an array of settings objects representative of the types of capture you will be performing (such as settings for a bracketed capture, RAW capture, or capture with still image stabilization).\n\nBy default, the photo output prepares sufficient resources to capture photos with default settings (as defined by the [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCapturePhotoSettings] default initializer). To reclaim all possible resources, call this method with an empty array.\n\nEach time you call this method with an array of settings, the photo output evaluates what additional resources it needs to allocate, as well as existing resources that can be reclaimed, and calls your `completionHandler` block when it has finished preparing (and possibly reclaiming) needed resources. To provide an early hint as to which capture features you intend to use, you can call this method even before calling the [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCaptureSession\/startRunning()] method on your capture session.\n\nPreparation for photo capture is always optional. You may call the [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCapturePhotoOutput\/capturePhoto(with:delegate:)] method without first calling this method—however, some of your photo captures may execute slowly as the capture system allocates additional resources on a just-in-time basis.\n\nIf you call this method while your capture session is not running, your `completionHandler` block is not immediately called. The photo output calls your completion handler only after you’ve called the [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCaptureSession\/startRunning()] method on your capture session and the needed resources have actually been prepared. If you call the [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCapturePhotoOutput\/setPreparedPhotoSettingsArray(_:completionHandler:)] method with an array of settings, and then call it a second time, the first call’s completion handler fires immediately with a `prepared` argument of [doc:\/\/com.apple.documentation\/documentation\/Swift\/false].\n\nPrepared settings persist across session starts\/stops and committed configuration changes and participate in the deferred work behavior defined by the [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCaptureSession] class. That is, if you call your capture session’s [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCaptureSession\/beginConfiguration()] method, change your session’s input\/output topology, and then call this method, the capture session defers any preparation work until you call the [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCaptureSession\/commitConfiguration()] method. This pattern lets you atomically commit a new configuration as well as prepare to take photos in that new configuration.\n\nAfter you call this method and your `completionHandler` block has fired, the [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCapturePhotoOutput\/preparedPhotoSettingsArray] property lists the photo settings for which the capture system has prepared resources.",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "tvOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVCapturePhotoOutput\/setPreparedPhotoSettingsArray(_:completionHandler:)\ncrawled: 2025-11-30T23:09:16Z\n---\n\n# setPreparedPhotoSettingsArray(_:completionHandler:)\n\n**Instance Method**\n\nTells the photo capture output to prepare resources for future capture requests with the specified settings.\n\n## Declaration\n\n```swift\nfunc setPreparedPhotoSettingsArray(_ preparedPhotoSettingsArray: [AVCapturePhotoSettings], completionHandler: ((Bool, (any Error)?) -> Void)? = nil)\n```\n\n```swift\nfunc setPreparedPhotoSettingsArray(_ preparedPhotoSettingsArray: [AVCapturePhotoSettings]) async throws\n```\n\n## Parameters\n\n- **preparedPhotoSettingsArray**: An array of photo capture settings objects indicating the types of capture for which the photo output should prepare resources.\n- **completionHandler**: A completion block to be called on a serial dispatch queue after the photo output has finished preparing resources. Pass `nil` if you do not wish to be notified when preparation is complete.\n\n## Discussion\n\nSome types of photo capture, such as bracketed captures and RAW captures, require the photo output to allocate additional buffers or prepare other resources. To prevent photo capture requests from executing slowly due to lazy resource allocation, you may call this method with an array of settings objects representative of the types of capture you will be performing (such as settings for a bracketed capture, RAW capture, or capture with still image stabilization).\n\nBy default, the photo output prepares sufficient resources to capture photos with default settings (as defined by the [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCapturePhotoSettings] default initializer). To reclaim all possible resources, call this method with an empty array.\n\nEach time you call this method with an array of settings, the photo output evaluates what additional resources it needs to allocate, as well as existing resources that can be reclaimed, and calls your `completionHandler` block when it has finished preparing (and possibly reclaiming) needed resources. To provide an early hint as to which capture features you intend to use, you can call this method even before calling the [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCaptureSession\/startRunning()] method on your capture session.\n\nPreparation for photo capture is always optional. You may call the [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCapturePhotoOutput\/capturePhoto(with:delegate:)] method without first calling this method—however, some of your photo captures may execute slowly as the capture system allocates additional resources on a just-in-time basis.\n\nIf you call this method while your capture session is not running, your `completionHandler` block is not immediately called. The photo output calls your completion handler only after you’ve called the [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCaptureSession\/startRunning()] method on your capture session and the needed resources have actually been prepared. If you call the [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCapturePhotoOutput\/setPreparedPhotoSettingsArray(_:completionHandler:)] method with an array of settings, and then call it a second time, the first call’s completion handler fires immediately with a `prepared` argument of [doc:\/\/com.apple.documentation\/documentation\/Swift\/false].\n\nPrepared settings persist across session starts\/stops and committed configuration changes and participate in the deferred work behavior defined by the [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCaptureSession] class. That is, if you call your capture session’s [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCaptureSession\/beginConfiguration()] method, change your session’s input\/output topology, and then call this method, the capture session defers any preparation work until you call the [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCaptureSession\/commitConfiguration()] method. This pattern lets you atomically commit a new configuration as well as prepare to take photos in that new configuration.\n\nAfter you call this method and your `completionHandler` block has fired, the [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCapturePhotoOutput\/preparedPhotoSettingsArray] property lists the photo settings for which the capture system has prepared resources.\n\n## Preparing for resource-intensive captures\n\n- **preparedPhotoSettingsArray**: An array of photo settings for which the photo output has prepared capture resources.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "An array of photo settings for which the photo output has prepared capture resources.",
          "name" : "preparedPhotoSettingsArray",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVCapturePhotoOutput\/preparedPhotoSettingsArray"
        }
      ],
      "title" : "Preparing for resource-intensive captures"
    }
  ],
  "source" : "appleJSON",
  "title" : "setPreparedPhotoSettingsArray(_:completionHandler:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVCapturePhotoOutput\/setPreparedPhotoSettingsArray(_:completionHandler:)"
}