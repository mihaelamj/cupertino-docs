{
  "abstract" : "Sets the sample buffer delegate and the queue for invoking callbacks.",
  "codeExamples" : [

  ],
  "contentHash" : "cf47f048d8f0356b554c097b9ac026b57778935e50c4156264a65be075320008",
  "crawledAt" : "2025-12-02T17:58:12Z",
  "declaration" : {
    "code" : "func setSampleBufferDelegate(_ sampleBufferDelegate: (any AVCaptureVideoDataOutputSampleBufferDelegate)?, queue sampleBufferCallbackQueue: dispatch_queue_t?)",
    "language" : "swift"
  },
  "id" : "3101ACD5-C583-4620-A903-DC204EAB7C80",
  "kind" : "method",
  "language" : "swift",
  "module" : "AVFoundation",
  "overview" : "## Discussion\n\nWhen a new video sample buffer is captured, it is sent to the sample buffer delegate using [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCaptureVideoDataOutputSampleBufferDelegate\/captureOutput(_:didOutput:from:)]. All delegate methods are invoked on the specified dispatch queue.\n\nIf the queue is blocked when new frames are captured, those frames will be automatically dropped at a time determined by the value of the [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCaptureVideoDataOutput\/alwaysDiscardsLateVideoFrames] property. This allows you to process existing frames on the same queue without having to manage the potential memory usage increases that would otherwise occur when that processing is unable to keep up with the rate of incoming frames.\n\nIf your frame processing is consistently unable to keep up with the rate of incoming frames, you should consider using the [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCaptureVideoDataOutput\/minFrameDuration] property, which will generally yield better performance characteristics and more consistent frame rates than frame dropping alone.\n\nIf you need to minimize the chances of frames being dropped, you should specify a queue on which a sufficiently small amount of processing is being done outside of receiving sample buffers. However, if you migrate extra processing to another queue, you are responsible for ensuring that memory usage does not grow without bound from frames that have not been processed.\n\n### Special considerations\n\nThis method uses [doc:\/\/com.apple.documentation\/documentation\/dispatch\/1496306-dispatch_retain] and [doc:\/\/com.apple.documentation\/documentation\/dispatch\/1496328-dispatch_release] to manage the queue.",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "tvOS",
    "visionOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVCaptureVideoDataOutput\/setSampleBufferDelegate(_:queue:)\ncrawled: 2025-12-02T17:58:12Z\n---\n\n# setSampleBufferDelegate(_:queue:)\n\n**Instance Method**\n\nSets the sample buffer delegate and the queue for invoking callbacks.\n\n## Declaration\n\n```swift\nfunc setSampleBufferDelegate(_ sampleBufferDelegate: (any AVCaptureVideoDataOutputSampleBufferDelegate)?, queue sampleBufferCallbackQueue: dispatch_queue_t?)\n```\n\n## Parameters\n\n- **sampleBufferDelegate**: An object conforming to the [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCaptureVideoDataOutputSampleBufferDelegate] protocol that will receive sample buffers after they are captured.\n- **sampleBufferCallbackQueue**: The queue on which callbacks should be invoked. You must use a serial dispatch queue, to guarantee that video frames will be delivered in order.\n\nThe sampleBufferCallbackQueue parameter may not be `NULL`, except when setting the `sampleBufferDelegate` to `nil`.\n\n## Discussion\n\nWhen a new video sample buffer is captured, it is sent to the sample buffer delegate using [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCaptureVideoDataOutputSampleBufferDelegate\/captureOutput(_:didOutput:from:)]. All delegate methods are invoked on the specified dispatch queue.\n\nIf the queue is blocked when new frames are captured, those frames will be automatically dropped at a time determined by the value of the [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCaptureVideoDataOutput\/alwaysDiscardsLateVideoFrames] property. This allows you to process existing frames on the same queue without having to manage the potential memory usage increases that would otherwise occur when that processing is unable to keep up with the rate of incoming frames.\n\nIf your frame processing is consistently unable to keep up with the rate of incoming frames, you should consider using the [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCaptureVideoDataOutput\/minFrameDuration] property, which will generally yield better performance characteristics and more consistent frame rates than frame dropping alone.\n\nIf you need to minimize the chances of frames being dropped, you should specify a queue on which a sufficiently small amount of processing is being done outside of receiving sample buffers. However, if you migrate extra processing to another queue, you are responsible for ensuring that memory usage does not grow without bound from frames that have not been processed.\n\n### Special considerations\n\nThis method uses [doc:\/\/com.apple.documentation\/documentation\/dispatch\/1496306-dispatch_retain] and [doc:\/\/com.apple.documentation\/documentation\/dispatch\/1496328-dispatch_release] to manage the queue.\n\n## Receiving captured video data\n\n- **sampleBufferDelegate**: The capture object’s delegate.\n- **sampleBufferCallbackQueue**: The queue on which the system invokes delegate callbacks.\n- **AVCaptureVideoDataOutputSampleBufferDelegate**: Methods for receiving sample buffers from, and monitoring the status of, a video data output.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "The capture object’s delegate.",
          "name" : "sampleBufferDelegate",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVCaptureVideoDataOutput\/sampleBufferDelegate"
        },
        {
          "description" : "The queue on which the system invokes delegate callbacks.",
          "name" : "sampleBufferCallbackQueue",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVCaptureVideoDataOutput\/sampleBufferCallbackQueue"
        },
        {
          "description" : "Methods for receiving sample buffers from, and monitoring the status of, a video data output.",
          "name" : "AVCaptureVideoDataOutputSampleBufferDelegate",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVCaptureVideoDataOutputSampleBufferDelegate"
        }
      ],
      "title" : "Receiving captured video data"
    }
  ],
  "source" : "appleJSON",
  "title" : "setSampleBufferDelegate(_:queue:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVCaptureVideoDataOutput\/setSampleBufferDelegate(_:queue:)"
}