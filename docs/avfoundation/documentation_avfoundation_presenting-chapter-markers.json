{
  "abstract" : "Add chapter markers to enable users to quickly navigate your content.",
  "codeExamples" : [
    {
      "code" : "let asset = AVAsset(url: <# Asset URL #>)\nlet chapterLocalesKey = \"availableChapterLocales\"\n \nasset.loadValuesAsynchronously(forKeys: [chapterLocalesKey]) {\n    var error: NSError?\n    let status = asset.statusOfValue(forKey: chapterLocalesKey, error: &error)\n    if status == .loaded {\n        let languages = Locale.preferredLanguages\n        let chapterMetadata = asset.chapterMetadataGroups(bestMatchingPreferredLanguages: languages)\n        \/\/ Process chapter metadata.\n    }\n    else {\n        \/\/ Handle other status cases.\n    }\n}",
      "language" : "swift"
    },
    {
      "code" : "func convertTimedMetadataGroupsToChapters(groups: [AVTimedMetadataGroup]) -> [Chapter] {\n    return groups.map { group in\n        \/\/ Retrieve the title metadata items.\n        let titleItems = AVMetadataItem.metadataItems(from: group.items,\n                                                      filteredByIdentifier: .commonIdentifierTitle)\n\n        \/\/ Retrieve the artwork metadata items.\n        let artworkItems = AVMetadataItem.metadataItems(from: group.items,\n                                                        filteredByIdentifier: .commonIdentifierArtwork)\n\n        var title = \"Default Title\"\n        var image = UIImage(named: \"placeholder\")!\n\n        if let titleValue = titleItems.first?.stringValue {\n            title = titleValue\n        }\n\n        if let imgData = artworkItems.first?.dataValue, let imageValue = UIImage(data: imgData) {\n            image = imageValue\n        }\n\n        return Chapter(time: group.timeRange.start, title: title, image: image)\n    }\n}",
      "language" : "swift"
    }
  ],
  "contentHash" : "e5de3cdbb00efe2525f72a739d745d0a107e8ee95fd6b120a242b0ec7b412bab",
  "crawledAt" : "2025-12-03T12:09:38Z",
  "id" : "7798947A-1DEE-4A6B-9E90-30E354959F3B",
  "kind" : "article",
  "language" : "swift",
  "module" : "AVFoundation",
  "overview" : "## Overview\n\nChapter markers enable users to quickly navigate your content. [doc:\/\/com.apple.documentation\/documentation\/AVKit\/AVPlayerViewController] automatically presents a chapter-selection interface if it finds chapter markers in the currently played asset. You can also directly retrieve this data whenever you want to create your own custom chapter-selection interface.\n\n### Retrieve the timed metadata\n\nChapter markers are a type of timed metadata that apply only to ranges of time within the asset’s timeline. You retrieve an asset’s chapter metadata using either the [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVAsset\/chapterMetadataGroups(bestMatchingPreferredLanguages:)] or [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVAsset\/chapterMetadataGroups(withTitleLocale:containingItemsWithCommonKeys:)] methods. These methods become callable without blocking after you asynchronously load the value of the asset’s [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVAsset\/availableChapterLocales] key.\n\n### Convert timed metadata into chapter data\n\nThe value returned from the methods described above is an array of [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVTimedMetadataGroup] objects, each representing an individual chapter marker. An [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVTimedMetadataGroup] object contains a [doc:\/\/com.apple.documentation\/documentation\/CoreMedia\/CMTimeRange], defining the time range to which its metadata applies, an array of [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVMetadataItem] objects representing the chapter’s title, and optionally, its thumbnail image. The following example shows how to convert the [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVTimedMetadataGroup] data into an array of custom model objects, called `Chapter`, to pass to the app’s view layer.\n\nWith the relevant data converted, you can build a chapter-selection interface and use the time value of the chapter object to seek the current presentation using an [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVPlayer] object’s [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVPlayer\/seek(to:)-87h2r] method.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/AVFoundation\/presenting-chapter-markers\ncrawled: 2025-12-03T12:09:38Z\n---\n\n# Presenting chapter markers\n\n**Article**\n\nAdd chapter markers to enable users to quickly navigate your content.\n\n## Overview\n\nChapter markers enable users to quickly navigate your content. [doc:\/\/com.apple.documentation\/documentation\/AVKit\/AVPlayerViewController] automatically presents a chapter-selection interface if it finds chapter markers in the currently played asset. You can also directly retrieve this data whenever you want to create your own custom chapter-selection interface.\n\n### Retrieve the timed metadata\n\nChapter markers are a type of timed metadata that apply only to ranges of time within the asset’s timeline. You retrieve an asset’s chapter metadata using either the [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVAsset\/chapterMetadataGroups(bestMatchingPreferredLanguages:)] or [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVAsset\/chapterMetadataGroups(withTitleLocale:containingItemsWithCommonKeys:)] methods. These methods become callable without blocking after you asynchronously load the value of the asset’s [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVAsset\/availableChapterLocales] key.\n\n```swift\nlet asset = AVAsset(url: <# Asset URL #>)\nlet chapterLocalesKey = \"availableChapterLocales\"\n \nasset.loadValuesAsynchronously(forKeys: [chapterLocalesKey]) {\n    var error: NSError?\n    let status = asset.statusOfValue(forKey: chapterLocalesKey, error: &error)\n    if status == .loaded {\n        let languages = Locale.preferredLanguages\n        let chapterMetadata = asset.chapterMetadataGroups(bestMatchingPreferredLanguages: languages)\n        \/\/ Process chapter metadata.\n    }\n    else {\n        \/\/ Handle other status cases.\n    }\n}\n```\n\n### Convert timed metadata into chapter data\n\nThe value returned from the methods described above is an array of [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVTimedMetadataGroup] objects, each representing an individual chapter marker. An [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVTimedMetadataGroup] object contains a [doc:\/\/com.apple.documentation\/documentation\/CoreMedia\/CMTimeRange], defining the time range to which its metadata applies, an array of [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVMetadataItem] objects representing the chapter’s title, and optionally, its thumbnail image. The following example shows how to convert the [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVTimedMetadataGroup] data into an array of custom model objects, called `Chapter`, to pass to the app’s view layer.\n\n```swift\nfunc convertTimedMetadataGroupsToChapters(groups: [AVTimedMetadataGroup]) -> [Chapter] {\n    return groups.map { group in\n        \/\/ Retrieve the title metadata items.\n        let titleItems = AVMetadataItem.metadataItems(from: group.items,\n                                                      filteredByIdentifier: .commonIdentifierTitle)\n\n        \/\/ Retrieve the artwork metadata items.\n        let artworkItems = AVMetadataItem.metadataItems(from: group.items,\n                                                        filteredByIdentifier: .commonIdentifierArtwork)\n\n        var title = \"Default Title\"\n        var image = UIImage(named: \"placeholder\")!\n\n        if let titleValue = titleItems.first?.stringValue {\n            title = titleValue\n        }\n\n        if let imgData = artworkItems.first?.dataValue, let imageValue = UIImage(data: imgData) {\n            image = imageValue\n        }\n\n        return Chapter(time: group.timeRange.start, title: title, image: image)\n    }\n}\n```\n\nWith the relevant data converted, you can build a chapter-selection interface and use the time value of the chapter object to seek the current presentation using an [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVPlayer] object’s [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVPlayer\/seek(to:)-87h2r] method.\n\n## Timed metadata\n\n- **AVMetadataGroup**: A collection of metadata items associated with a timeline segment.\n- **AVTimedMetadataGroup**: A collection of metadata items that are valid for use during a specific time range.\n- **AVMutableTimedMetadataGroup**: A mutable collection of metadata items that are valid for use during a specific time range.\n- **AVDateRangeMetadataGroup**: A collection of metadata items that are valid for use within a specific date range.\n- **AVMutableDateRangeMetadataGroup**: A mutable collection of metadata items that are valid for use within a specific range of dates.\n- **AVPlayerItemMediaDataCollector**: The abstract base for media data collectors.\n- **AVPlayerItemMetadataCollector**: An object used to capture the date range metadata defined for an HTTP Live Streaming asset.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "A collection of metadata items associated with a timeline segment.",
          "name" : "AVMetadataGroup",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVMetadataGroup"
        },
        {
          "description" : "A collection of metadata items that are valid for use during a specific time range.",
          "name" : "AVTimedMetadataGroup",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVTimedMetadataGroup"
        },
        {
          "description" : "A mutable collection of metadata items that are valid for use during a specific time range.",
          "name" : "AVMutableTimedMetadataGroup",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVMutableTimedMetadataGroup"
        },
        {
          "description" : "A collection of metadata items that are valid for use within a specific date range.",
          "name" : "AVDateRangeMetadataGroup",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVDateRangeMetadataGroup"
        },
        {
          "description" : "A mutable collection of metadata items that are valid for use within a specific range of dates.",
          "name" : "AVMutableDateRangeMetadataGroup",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVMutableDateRangeMetadataGroup"
        },
        {
          "description" : "The abstract base for media data collectors.",
          "name" : "AVPlayerItemMediaDataCollector",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVPlayerItemMediaDataCollector"
        },
        {
          "description" : "An object used to capture the date range metadata defined for an HTTP Live Streaming asset.",
          "name" : "AVPlayerItemMetadataCollector",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVPlayerItemMetadataCollector"
        }
      ],
      "title" : "Timed metadata"
    }
  ],
  "source" : "appleJSON",
  "title" : "Presenting chapter markers",
  "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/presenting-chapter-markers"
}