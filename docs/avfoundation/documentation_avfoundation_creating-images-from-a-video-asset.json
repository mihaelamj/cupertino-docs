{
  "abstract" : "Display images for specific times within the media timeline by generating images from a video’s frames.",
  "codeExamples" : [
    {
      "code" : "let asset: AVAsset = \/\/ A video asset.\nlet generator = AVAssetImageGenerator(asset: asset)",
      "language" : "swift"
    },
    {
      "code" : "\/\/ Generate the equivalent of a 150-pixel-wide @2x image.\ngenerator.maximumSize = CGSize(width: 300, height: 0)",
      "language" : "swift"
    },
    {
      "code" : "\/\/ Configure the generator's time tolerance values.\ngenerator.requestedTimeToleranceBefore = .zero\ngenerator.requestedTimeToleranceAfter = CMTime(seconds: 2, preferredTimescale: 600)",
      "language" : "swift"
    },
    {
      "code" : "\/\/ Generate an image at time zero.\nlet (image, actualTime) = try await generator.image(at: .zero)",
      "language" : "swift"
    },
    {
      "code" : "\/\/ Generate an image at time zero. Access the image alone.\nlet image = try await generator.image(at: .zero).image",
      "language" : "swift"
    },
    {
      "code" : "let times: [CMTime] = \/\/ An array of times at which to create images.\nfor await result in generator.images(for: times) {\n    switch result {\n    case .success(requestedTime: let requested, image: let image, actualTime: let actual):\n        \/\/ Process the image for the requested time.\n    case .failure(requestedTime: let requested, error: let error):\n        \/\/ Handle the failure for the requested time.\n    }\n}",
      "language" : "swift"
    }
  ],
  "contentHash" : "9cbd2ceda8254792c3a03dc38d046070593f47d6615517cd54f6da90f0efd7fe",
  "crawledAt" : "2025-12-03T12:08:20Z",
  "id" : "33C29FDF-26E9-4D43-8226-01CB508F65DD",
  "kind" : "article",
  "language" : "swift",
  "module" : "AVFoundation",
  "overview" : "## Overview\n\nA common requirement when you build video apps is to display images of a video’s content. You may want to show a single thumbnail next to a video in a list, or show several images spanning a video’s duration that you use to build a visual scrubbing or selection user interface. AVFoundation makes it simple to produce images from your app’s video content by using [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVAssetImageGenerator].\n\n\n\n[doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVAssetImageGenerator] is a utility class that creates images from assets that contain one or more video tracks. You can use it to generate an image for a single point in time, or a series of images by passing it an array of times.\n\n### Configure an image generator\n\nCreate an instance of [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVAssetImageGenerator] by passing it a video asset to retrieve images from. A generator supports creating images from local and remote file–based media, and also from HTTP Live Streaming (HLS) video that provides I-frame only renditions.\n\nAn image generator is ready to produce images when you create it, but it also provides configurable properties that you can use to customize its behavior. One property that you typically set is its [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVAssetImageGenerator\/maximumSize]. By default, a generator produces images at the video’s native resolution, which is often larger than required, and can be CPU and memory intensive. Instead, set a value for its [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVAssetImageGenerator\/maximumSize] property to constrain the size of its output. For example, you can constrain the width to a specific value, and specify `0` to proportionally scale the height, by setting a maximum size as follows.\n\n### Specify the time precision\n\nBy default, an image generator creates images near the time you request, but its actual time may be slightly before or after for efficiency sake. To change the amount of time you allow the generator to deviate from the requested time, set the value of its [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVAssetImageGenerator\/requestedTimeToleranceBefore] and [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVAssetImageGenerator\/requestedTimeToleranceAfter] properties. For example, to allow image generation to occur over a time range that starts no earlier than your requested time, and no later than two seconds after, set its tolerance values as shown below.\n\nYou can request frame-accurate image generation by setting the values of the before and after tolerances to [doc:\/\/com.apple.documentation\/documentation\/CoreMedia\/CMTime\/zero]. However, configuring the generator this way requires it to perform additional frame decoding, which impacts its image generation speed.\n\n### Generate images\n\nRetrieving and decoding the media data that a generator requires to produce images takes an unknown amount of time. It’s not safe to perform image generation synchronously because it blocks the calling thread, which can degrade your app’s user experience and may even result in a crash. Instead, perform image generation asynchronously.\n\nTo create a single image from the video timeline, call the asynchronous [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVAssetImageGenerator\/image(at:)] method, passing it your requested time. The following example shows how to create an image for the first frame in the video.\n\nBecause the time at which it creates an image may vary from your requested time, the method returns the actual image-generation time along with the image in a tuple. If you don’t require this information, you can retrieve the image more succinctly as shown below.\n\nYou can also use an image generator to create a sequence of images from the video timeline. To generate multiple images from a video asset, call the asynchronous [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVAssetImageGenerator\/images(for:)] method as shown below.\n\nThis method returns an asynchronous sequence of type [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVAssetImageGenerator\/Images] that you iterate over and await results from. If image generation for a requested time succeeds, the result provides the image, along with the requested and actual image generation times. If a requested time fails, the result provides the time and an error that describes the failure.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/avfoundation\/creating-images-from-a-video-asset\ncrawled: 2025-12-03T12:08:20Z\n---\n\n# Creating images from a video asset\n\n**Article**\n\nDisplay images for specific times within the media timeline by generating images from a video’s frames.\n\n## Overview\n\nA common requirement when you build video apps is to display images of a video’s content. You may want to show a single thumbnail next to a video in a list, or show several images spanning a video’s duration that you use to build a visual scrubbing or selection user interface. AVFoundation makes it simple to produce images from your app’s video content by using [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVAssetImageGenerator].\n\n\n\n[doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVAssetImageGenerator] is a utility class that creates images from assets that contain one or more video tracks. You can use it to generate an image for a single point in time, or a series of images by passing it an array of times.\n\n### Configure an image generator\n\nCreate an instance of [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVAssetImageGenerator] by passing it a video asset to retrieve images from. A generator supports creating images from local and remote file–based media, and also from HTTP Live Streaming (HLS) video that provides I-frame only renditions.\n\n```swift\nlet asset: AVAsset = \/\/ A video asset.\nlet generator = AVAssetImageGenerator(asset: asset)\n```\n\n\n\nAn image generator is ready to produce images when you create it, but it also provides configurable properties that you can use to customize its behavior. One property that you typically set is its [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVAssetImageGenerator\/maximumSize]. By default, a generator produces images at the video’s native resolution, which is often larger than required, and can be CPU and memory intensive. Instead, set a value for its [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVAssetImageGenerator\/maximumSize] property to constrain the size of its output. For example, you can constrain the width to a specific value, and specify `0` to proportionally scale the height, by setting a maximum size as follows.\n\n```swift\n\/\/ Generate the equivalent of a 150-pixel-wide @2x image.\ngenerator.maximumSize = CGSize(width: 300, height: 0)\n```\n\n### Specify the time precision\n\nBy default, an image generator creates images near the time you request, but its actual time may be slightly before or after for efficiency sake. To change the amount of time you allow the generator to deviate from the requested time, set the value of its [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVAssetImageGenerator\/requestedTimeToleranceBefore] and [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVAssetImageGenerator\/requestedTimeToleranceAfter] properties. For example, to allow image generation to occur over a time range that starts no earlier than your requested time, and no later than two seconds after, set its tolerance values as shown below.\n\n```swift\n\/\/ Configure the generator's time tolerance values.\ngenerator.requestedTimeToleranceBefore = .zero\ngenerator.requestedTimeToleranceAfter = CMTime(seconds: 2, preferredTimescale: 600)\n```\n\nYou can request frame-accurate image generation by setting the values of the before and after tolerances to [doc:\/\/com.apple.documentation\/documentation\/CoreMedia\/CMTime\/zero]. However, configuring the generator this way requires it to perform additional frame decoding, which impacts its image generation speed.\n\n### Generate images\n\nRetrieving and decoding the media data that a generator requires to produce images takes an unknown amount of time. It’s not safe to perform image generation synchronously because it blocks the calling thread, which can degrade your app’s user experience and may even result in a crash. Instead, perform image generation asynchronously.\n\nTo create a single image from the video timeline, call the asynchronous [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVAssetImageGenerator\/image(at:)] method, passing it your requested time. The following example shows how to create an image for the first frame in the video.\n\n```swift\n\/\/ Generate an image at time zero.\nlet (image, actualTime) = try await generator.image(at: .zero)\n```\n\nBecause the time at which it creates an image may vary from your requested time, the method returns the actual image-generation time along with the image in a tuple. If you don’t require this information, you can retrieve the image more succinctly as shown below.\n\n```swift\n\/\/ Generate an image at time zero. Access the image alone.\nlet image = try await generator.image(at: .zero).image\n```\n\nYou can also use an image generator to create a sequence of images from the video timeline. To generate multiple images from a video asset, call the asynchronous [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVAssetImageGenerator\/images(for:)] method as shown below.\n\n```swift\nlet times: [CMTime] = \/\/ An array of times at which to create images.\nfor await result in generator.images(for: times) {\n    switch result {\n    case .success(requestedTime: let requested, image: let image, actualTime: let actual):\n        \/\/ Process the image for the requested time.\n    case .failure(requestedTime: let requested, error: let error):\n        \/\/ Handle the failure for the requested time.\n    }\n}\n```\n\nThis method returns an asynchronous sequence of type [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVAssetImageGenerator\/Images] that you iterate over and await results from. If image generation for a requested time succeeds, the result provides the image, along with the requested and actual image generation times. If a requested time fails, the result provides the time and an error that describes the failure.\n\n## Image generation\n\n- **AVAssetImageGenerator**: An object that generates images from a video asset.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "An object that generates images from a video asset.",
          "name" : "AVAssetImageGenerator",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVAssetImageGenerator"
        }
      ],
      "title" : "Image generation"
    }
  ],
  "source" : "appleJSON",
  "title" : "Creating images from a video asset",
  "url" : "https:\/\/developer.apple.com\/documentation\/avfoundation\/creating-images-from-a-video-asset"
}