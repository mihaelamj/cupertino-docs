{
  "abstract" : "A mutable video composition subclass.",
  "codeExamples" : [

  ],
  "conformsTo" : [
    "CVarArg",
    "CustomDebugStringConvertible",
    "CustomStringConvertible",
    "Equatable",
    "Hashable",
    "NSCopying",
    "NSMutableCopying",
    "NSObjectProtocol",
    "Sendable",
    "SendableMetatype"
  ],
  "contentHash" : "83bd1ba21d8082626d6acf5b606808a42056776ece592ff4337f71fc198e9f4e",
  "crawledAt" : "2025-12-02T15:51:11Z",
  "declaration" : {
    "code" : "class AVMutableVideoComposition",
    "language" : "swift"
  },
  "id" : "5367EC92-F8B9-4437-9053-799106D64A81",
  "kind" : "class",
  "language" : "swift",
  "module" : "AVFoundation",
  "overview" : "## Overview\n\nIf you use the built-in video compositor, the instructions a video composition contain can specify a spatial transformation, an opacity value, and a cropping rectangle for each video source. This values can vary over time by applying linear ramping functions.\n\nYou can create a custom video compositor by implementing the [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVVideoCompositing] protocol. The system provides the custom video compositor with pixel buffers for each of its video sources during playback, and can perform arbitrary graphical operations on them to produce visual output.",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "tvOS",
    "visionOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVMutableVideoComposition\ncrawled: 2025-12-02T15:51:11Z\n---\n\n# AVMutableVideoComposition\n\n**Class**\n\nA mutable video composition subclass.\n\n## Declaration\n\n```swift\nclass AVMutableVideoComposition\n```\n\n## Overview\n\nIf you use the built-in video compositor, the instructions a video composition contain can specify a spatial transformation, an opacity value, and a cropping rectangle for each video source. This values can vary over time by applying linear ramping functions.\n\nYou can create a custom video compositor by implementing the [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVVideoCompositing] protocol. The system provides the custom video compositor with pixel buffers for each of its video sources during playback, and can perform arbitrary graphical operations on them to produce visual output.\n\n## Creating a video composition\n\n- **videoComposition(withPropertiesOf:completionHandler:)**: Returns a new video composition that’s configured to present the video tracks of the specified asset.\n- **videoComposition(withPropertiesOf:prototypeInstruction:completionHandler:)**: Returns a new mutable video composition with the specified asset properties and a prototype video composition instruction.\n- **videoComposition(with:applyingCIFiltersWithHandler:completionHandler:)**: Returns a new video composition that’s configured to apply Core Image filters to each video frame of the specified asset.\n- **init(propertiesOf:)**: Creates a mutable video composition with the specified asset properties.\n- **init(propertiesOf:prototypeInstruction:)**: Creates a mutable video composition with the specified asset properties and a prototype video composition instruction.\n- **init(asset:applyingCIFiltersWithHandler:)**: Creates a mutable video composition configured to apply Core Image filters to each video frame of the specified asset.\n\n## Configuring video composition properties\n\n- **frameDuration**: A time interval for which the video composition should render composed video frames.\n- **renderSize**: The size at which the video composition should render.\n- **renderScale**: The scale at which the video composition should render.\n- **animationTool**: A video composition tool to use with Core Animation in offline rendering.\n\n## Specifying composition instructions\n\n- **instructions**: The video composition instructions.\n- **AVVideoCompositionInstructionProtocol**: A protocol that defines the interface for a video composition instruction.\n\n## Configuring HDR metadata\n\n- **perFrameHDRDisplayMetadataPolicy**: Configures the policy for display of HDR display metadata on the rendered frame.\n- **AVVideoComposition.PerFrameHDRDisplayMetadataPolicy**: A type that defines the policy for handling of per frame HDR metadata.\n\n## Configuring color\n\n- **colorPrimaries**: The color primaries used for video composition.\n- **colorTransferFunction**: The transfer function used for video composition.\n- **colorYCbCrMatrix**: The YCbCr matrix used for video composition.\n\n## Identifying source tracks\n\n- **sourceTrackIDForFrameTiming**: An identifier of the source track from which the video composition derives frame timing.\n- **sourceSampleDataTrackIDs**: The identifiers of source sample data tracks in the composition that the object requires to compose frames.\n\n## Specifying a custom compositor\n\n- **customVideoCompositorClass**: The custom compositor class to use.\n\n## Built-in video compositing\n\n- **Editing and playing HDR video**: Support high-dynamic-range (HDR) video content in your app by using the HDR editing and playback capabilities of AVFoundation.\n- **Debugging AVFoundation audio mixes, compositions, and video compositions**: Resolve common problems when creating compositions, video compositions, and audio mixes.\n- **AVVideoComposition**: An object that describes how to compose video frames at particular points in time.\n- **AVVideoCompositionInstruction**: An operation that a compositor performs.\n- **AVVideoCompositionLayerInstruction**: An object used to modify the transform, cropping, and opacity ramps applied to a given track in a composition.\n- **AVMutableVideoCompositionInstruction**: A mutable video composition instruction subclass.\n- **AVMutableVideoCompositionLayerInstruction**: An object used to modify the transform, cropping, and opacity ramps applied to a given track in a mutable composition.\n\n## Inherits From\n\n- AVVideoComposition\n\n## Conforms To\n\n- CVarArg\n- CustomDebugStringConvertible\n- CustomStringConvertible\n- Equatable\n- Hashable\n- NSCopying\n- NSMutableCopying\n- NSObjectProtocol\n- Sendable\n- SendableMetatype\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Returns a new video composition that’s configured to present the video tracks of the specified asset.",
          "name" : "videoComposition(withPropertiesOf:completionHandler:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVMutableVideoComposition\/videoComposition(withPropertiesOf:completionHandler:)"
        },
        {
          "description" : "Returns a new mutable video composition with the specified asset properties and a prototype video composition instruction.",
          "name" : "videoComposition(withPropertiesOf:prototypeInstruction:completionHandler:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVMutableVideoComposition\/videoComposition(withPropertiesOf:prototypeInstruction:completionHandler:)"
        },
        {
          "description" : "Returns a new video composition that’s configured to apply Core Image filters to each video frame of the specified asset.",
          "name" : "videoComposition(with:applyingCIFiltersWithHandler:completionHandler:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVMutableVideoComposition\/videoComposition(with:applyingCIFiltersWithHandler:completionHandler:)"
        },
        {
          "description" : "Creates a mutable video composition with the specified asset properties.",
          "name" : "init(propertiesOf:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVMutableVideoComposition\/init(propertiesOf:)"
        },
        {
          "description" : "Creates a mutable video composition with the specified asset properties and a prototype video composition instruction.",
          "name" : "init(propertiesOf:prototypeInstruction:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVMutableVideoComposition\/init(propertiesOf:prototypeInstruction:)"
        },
        {
          "description" : "Creates a mutable video composition configured to apply Core Image filters to each video frame of the specified asset.",
          "name" : "init(asset:applyingCIFiltersWithHandler:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVMutableVideoComposition\/init(asset:applyingCIFiltersWithHandler:)"
        }
      ],
      "title" : "Creating a video composition"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "A time interval for which the video composition should render composed video frames.",
          "name" : "frameDuration",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVMutableVideoComposition\/frameDuration"
        },
        {
          "description" : "The size at which the video composition should render.",
          "name" : "renderSize",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVMutableVideoComposition\/renderSize"
        },
        {
          "description" : "The scale at which the video composition should render.",
          "name" : "renderScale",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVMutableVideoComposition\/renderScale"
        },
        {
          "description" : "A video composition tool to use with Core Animation in offline rendering.",
          "name" : "animationTool",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVMutableVideoComposition\/animationTool"
        }
      ],
      "title" : "Configuring video composition properties"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "The video composition instructions.",
          "name" : "instructions",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVMutableVideoComposition\/instructions"
        },
        {
          "description" : "A protocol that defines the interface for a video composition instruction.",
          "name" : "AVVideoCompositionInstructionProtocol",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVVideoCompositionInstructionProtocol"
        }
      ],
      "title" : "Specifying composition instructions"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Configures the policy for display of HDR display metadata on the rendered frame.",
          "name" : "perFrameHDRDisplayMetadataPolicy",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVMutableVideoComposition\/perFrameHDRDisplayMetadataPolicy"
        },
        {
          "description" : "A type that defines the policy for handling of per frame HDR metadata.",
          "name" : "AVVideoComposition.PerFrameHDRDisplayMetadataPolicy",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVVideoComposition\/PerFrameHDRDisplayMetadataPolicy-swift.struct"
        }
      ],
      "title" : "Configuring HDR metadata"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "The color primaries used for video composition.",
          "name" : "colorPrimaries",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVMutableVideoComposition\/colorPrimaries"
        },
        {
          "description" : "The transfer function used for video composition.",
          "name" : "colorTransferFunction",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVMutableVideoComposition\/colorTransferFunction"
        },
        {
          "description" : "The YCbCr matrix used for video composition.",
          "name" : "colorYCbCrMatrix",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVMutableVideoComposition\/colorYCbCrMatrix"
        }
      ],
      "title" : "Configuring color"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "An identifier of the source track from which the video composition derives frame timing.",
          "name" : "sourceTrackIDForFrameTiming",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVMutableVideoComposition\/sourceTrackIDForFrameTiming"
        },
        {
          "description" : "The identifiers of source sample data tracks in the composition that the object requires to compose frames.",
          "name" : "sourceSampleDataTrackIDs",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVMutableVideoComposition\/sourceSampleDataTrackIDs-7i02t"
        }
      ],
      "title" : "Identifying source tracks"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "The custom compositor class to use.",
          "name" : "customVideoCompositorClass",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVMutableVideoComposition\/customVideoCompositorClass"
        }
      ],
      "title" : "Specifying a custom compositor"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Support high-dynamic-range (HDR) video content in your app by using the HDR editing and playback capabilities of AVFoundation.",
          "name" : "Editing and playing HDR video",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/editing-and-playing-hdr-video"
        },
        {
          "description" : "Resolve common problems when creating compositions, video compositions, and audio mixes.",
          "name" : "Debugging AVFoundation audio mixes, compositions, and video compositions",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/debugging-avfoundation-audio-mixes-compositions-and-video-compositions"
        },
        {
          "description" : "An object that describes how to compose video frames at particular points in time.",
          "name" : "AVVideoComposition",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVVideoComposition"
        },
        {
          "description" : "An operation that a compositor performs.",
          "name" : "AVVideoCompositionInstruction",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVVideoCompositionInstruction-swift.class"
        },
        {
          "description" : "An object used to modify the transform, cropping, and opacity ramps applied to a given track in a composition.",
          "name" : "AVVideoCompositionLayerInstruction",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVVideoCompositionLayerInstruction"
        },
        {
          "description" : "A mutable video composition instruction subclass.",
          "name" : "AVMutableVideoCompositionInstruction",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVMutableVideoCompositionInstruction"
        },
        {
          "description" : "An object used to modify the transform, cropping, and opacity ramps applied to a given track in a mutable composition.",
          "name" : "AVMutableVideoCompositionLayerInstruction",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVMutableVideoCompositionLayerInstruction"
        }
      ],
      "title" : "Built-in video compositing"
    },
    {
      "content" : "",
      "items" : [
        {
          "name" : "AVVideoComposition"
        }
      ],
      "title" : "Inherits From"
    }
  ],
  "source" : "appleJSON",
  "title" : "AVMutableVideoComposition",
  "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVMutableVideoComposition"
}