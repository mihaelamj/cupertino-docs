{
  "abstract" : "Appends sample data to a media file and adds sample references for the added data to a track’s media sample tables.",
  "codeExamples" : [

  ],
  "contentHash" : "5aefc365fc95b5ef4fd962d635ca3032b927038d7911ce3aa6c07d7acd54d260",
  "crawledAt" : "2025-12-05T07:13:43Z",
  "declaration" : {
    "code" : "func append(_ sampleBuffer: CMReadySampleBuffer<CMSampleBuffer.DynamicContent>) throws -> (decodeTime: CMTime, presentationTime: CMTime)",
    "language" : "swift"
  },
  "id" : "01129B47-4940-4B66-A41C-9F73AE0927FD",
  "kind" : "method",
  "language" : "swift",
  "module" : "AVFoundation",
  "overview" : "## Return Value\n\nA tuple containing the decodeTime & presentationTime.\n\n## Discussion\n\nIf the ready sample buffer carries sample data, the sample data is written to the container specified by the track property mediaDataStorage if non-nil, or else by the movie property defaultMediaDataStorage if non-nil, and sample references will be appended to the track’s media. If both media data storage properties are nil, the method will fail with an error.\n\nIf the sample buffer carries sample references only, sample data will not be written and sample references to the samples in their original container will be appended to the track’s media as necessary. Note regarding sample timing: in a track’s media, the first sample’s decode timestamp must always be zero. For an audio track, each sample buffer’s duration is used as the sample decode duration. For other track types, difference between a sample’s decode timestamp and the following sample’s decode timestamp is used as the first sample’s decode duration, so as to preserve the relative timing.\n\nNote that this method does not modify the track’s sourceTimeMappings but only appends sample references and sample data to the track’s media. To make the new samples appear in the track’s timeline, invoke -insertMediaTimeRange:intoTimeRange:. You can retrieve the mediaPresentationTimeRange property before and after appending a sequence of samples, using CMTimeRangeGetEnd on each to calculate the media TimeRange for -insertMediaTimeRange:intoTimeRange:.\n\nNote that this method expects\n\nIt’s safe for multiple threads to call this method on different tracks at once.",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "visionOS",
    "watchOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVMutableMovieTrack\/append(_:)\ncrawled: 2025-12-05T07:13:43Z\n---\n\n# append(_:)\n\n**Instance Method**\n\nAppends sample data to a media file and adds sample references for the added data to a track’s media sample tables.\n\n## Declaration\n\n```swift\nfunc append(_ sampleBuffer: CMReadySampleBuffer<CMSampleBuffer.DynamicContent>) throws -> (decodeTime: CMTime, presentationTime: CMTime)\n```\n\n## Parameters\n\n- **sampleBuffer**: The CMReadySampleBuffer to be appended; this may be obtained from an instance of AVAssetReader.\n\n## Return Value\n\nA tuple containing the decodeTime & presentationTime.\n\n- decodeTime: CMTime structure to receive the decode time in the media of the first sample appended from the sample buffer.\n- presentationTime: CMTime structure to receive the presentation time in the media of the first sample appended from the sample buffer. Pass NULL if you do not need this information.\n\n## Discussion\n\nIf the ready sample buffer carries sample data, the sample data is written to the container specified by the track property mediaDataStorage if non-nil, or else by the movie property defaultMediaDataStorage if non-nil, and sample references will be appended to the track’s media. If both media data storage properties are nil, the method will fail with an error.\n\nIf the sample buffer carries sample references only, sample data will not be written and sample references to the samples in their original container will be appended to the track’s media as necessary. Note regarding sample timing: in a track’s media, the first sample’s decode timestamp must always be zero. For an audio track, each sample buffer’s duration is used as the sample decode duration. For other track types, difference between a sample’s decode timestamp and the following sample’s decode timestamp is used as the first sample’s decode duration, so as to preserve the relative timing.\n\nNote that this method does not modify the track’s sourceTimeMappings but only appends sample references and sample data to the track’s media. To make the new samples appear in the track’s timeline, invoke -insertMediaTimeRange:intoTimeRange:. You can retrieve the mediaPresentationTimeRange property before and after appending a sequence of samples, using CMTimeRangeGetEnd on each to calculate the media TimeRange for -insertMediaTimeRange:intoTimeRange:.\n\nNote that this method expects\n\n- the sample buffer’s media type must match with track’s media type\n- the sample buffer must contain encoded video (should not contain image buffers)\n- the sample buffer must contain encoded media data (should not contain caption groups)\n\nIt’s safe for multiple threads to call this method on different tracks at once.\n\n\n\n## Appending sample data\n\n- **append(_:decodeTime:presentationTime:)**: Appends sample data to a media file and adds sample references for the added data to a track’s media sample tables.\n- **insertMediaTimeRange(_:into:)**: Inserts a reference to a media time range into a track.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Appends sample data to a media file and adds sample references for the added data to a track’s media sample tables.",
          "name" : "append(_:decodeTime:presentationTime:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVMutableMovieTrack\/append(_:decodeTime:presentationTime:)"
        },
        {
          "description" : "Inserts a reference to a media time range into a track.",
          "name" : "insertMediaTimeRange(_:into:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVMutableMovieTrack\/insertMediaTimeRange(_:into:)"
        }
      ],
      "title" : "Appending sample data"
    }
  ],
  "source" : "appleJSON",
  "title" : "append(_:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVMutableMovieTrack\/append(_:)"
}