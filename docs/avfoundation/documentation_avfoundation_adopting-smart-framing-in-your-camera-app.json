{
  "abstract" : "Capture the optimal shot by providing automatic framing recommendations.",
  "codeExamples" : [
    {
      "code" : "func findAndConfigureSmartFramingDevice() -> AVCaptureDevice? {\n    \/\/ Configure the discovery session to find an Ultra Wide front camera.\n    let discoverySession = AVCaptureDevice.DiscoverySession(\n        deviceTypes: [.builtInUltraWideCamera],\n        mediaType: .video,\n        position: .front\n    )\n\n    \/\/ Find the first matching device and format that supports smart framing.\n    guard let device = discoverySession.devices.first,\n          let format = device.formats.first(where: \\.isSmartFramingSupported) else {\n        \/\/ Return nil if the device doesn't have an Ultra Wide front camera.\n        return nil\n    }\n\n    if device.activeFormat.isSmartFramingSupported {\n        \/\/ Return the device if already configured for smart framing.\n        return device\n    } else {\n        \/\/ Otherwise, attempt to configure the device and return it, if successful.\n        do {\n            try device.lockForConfiguration()\n            defer { device.unlockForConfiguration() }\n            \/\/ Set the smart framing format as active.\n            device.activeFormat = format\n            return device\n        } catch {\n            return nil\n        }\n    }\n}",
      "language" : "swift"
    },
    {
      "code" : "func configureSmartFraming() async {\n    \/\/ Access the smart framing monitor, if available.\n    guard let monitor = currentDevice?.smartFramingMonitor else { return }\n    \/\/ Enable all supported framings.\n    monitor.enabledFramings = monitor.supportedFramings\n}",
      "language" : "swift"
    },
    {
      "code" : "func startMonitoring() async {\n    \/\/ Return early if the monitor doesn't exist or is currently monitoring.\n    guard let monitor = currentDevice?.smartFramingMonitor, !monitor.isMonitoring else { return }\n\n    \/\/ Key-value observe changes to the monitor's framing recommendations.\n    framingObservation = monitor.observe(\\.recommendedFraming, options: [.new]) { [weak self] monitor, change in\n        \/\/ Access the recommended framing.\n        guard let self, let framing = monitor.recommendedFraming else { return }\n        \/\/ Configure the device with the latest recommendation.\n        Task { await self.applyRecommendedFraming(framing) }\n    }\n\n    do {\n        \/\/ Start monitoring for framing recommendations.\n        try monitor.startMonitoring()\n    } catch {\n        logger.error(\"Unable to start monitoring: \\(error)\")\n    }\n}",
      "language" : "swift"
    },
    {
      "code" : "func stopMonitoring() async {\n    \/\/ Stop key-value observing the monitor.\n    framingObservation?.invalidate()\n    framingObservation = nil\n\n    guard let monitor = currentDevice?.smartFramingMonitor else { return }\n    \/\/ Stop monitoring for smart framing recommendations.\n    monitor.stopMonitoring()\n}",
      "language" : "swift"
    },
    {
      "code" : "private func applyRecommendedFraming(_ framing: AVCaptureFraming) async {\n    guard let device = currentDevice else { return }\n    do {\n        \/\/ Request exclusive control of the device.\n        try device.lockForConfiguration()\n        do {\n            \/\/ Set the recommended aspect ratio and zoom factor.\n            try await device.setDynamicAspectRatio(framing.aspectRatio)\n            device.videoZoomFactor = CGFloat(framing.zoomFactor)\n        } catch {\n            logger.error(\"Failed to set aspect ratio: \\(error)\")\n        }\n        \/\/ Release exclusive control of the device.\n        device.unlockForConfiguration()\n    } catch {\n        logger.error(\"Failed to lock device for configuration: \\(error)\")\n    }\n}",
      "language" : "swift"
    }
  ],
  "contentHash" : "a8610813fdffa742a5c54e8fd90a6f02ede29e972535f97e5c4435ba63bde621",
  "crawledAt" : "2025-12-01T09:50:14Z",
  "id" : "6EB939C0-34E5-402B-866F-31950A7308CF",
  "kind" : "article",
  "module" : "AVFoundation",
  "overview" : "## Overview\n\nSmart framing detects when people enter or leave the scene, and frames the shot to compose a great photo. Available in iPhone 17, iPhone Air, and iPhone 17 Pro, the front Ultra Wide camera enables dynamic aspect ratio changes without interrupting the camera’s preview. You can add smart framing to your app by adopting [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCaptureSmartFramingMonitor].\n\nThe [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCaptureSmartFramingMonitor] class monitors a supported camera’s field of view and provides aspect ratio and zoom factor suggestions for better photographic composition. When optimal framing opportunities occur, the monitor provides recommendations through its [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCaptureSmartFramingMonitor\/recommendedFraming] property.\n\n## Find a smart framing-capable device\n\nStart by verifying whether the person’s device supports smart framing:\n\nThe above code uses an [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCaptureDevice\/DiscoverySession] object to find the front Ultra Wide camera, and validates that it provides an [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCaptureDevice\/Format] that supports the feature. If the device configuration supports smart framing, it returns the capture device. Otherwise, it sets the [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCaptureDevice\/activeFormat] and then returns the configured device.\n\n## Configure the smart framing monitor\n\nAfter finding a supported capture device, configure its monitoring behavior by accessing the device’s associated [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCaptureSmartFramingMonitor] object:\n\nBy default, the smart framing monitor isn’t configured to provide recommendations. Attempting to start it in this state results in an error. To monitor the scene, specify the framings the monitor should consider by setting its [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCaptureSmartFramingMonitor\/enabledFramings] property value. The example above enables all the monitor’s [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCaptureSmartFramingMonitor\/supportedFramings], but you can enable a subset of these values, depending on the needs of your app. For example, it could limit the enabled framings to [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCaptureDevice\/AspectRatio\/ratio3x4] and [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCaptureDevice\/AspectRatio\/ratio4x3] for photo capture, or [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCaptureDevice\/AspectRatio\/ratio9x16] and [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCaptureDevice\/AspectRatio\/ratio16x9] for video.\n\n## Monitor framing recommendations\n\nWith the smart framing monitor configured, it’s ready to start generating framing recommendations. To respond to new recommendations, key-value observe the monitor’s [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCaptureSmartFramingMonitor\/recommendedFraming] property like shown below:\n\nThe code example configures an observer to respond to new framing recommendations. When it observes a new value, it calls a method to apply the framing to the capture device. After configuring the observer, the example calls the monitor’s  [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCaptureSmartFramingMonitor\/startMonitoring()] method to generate framing recommendations.\n\nTo disable smart framing, and allow a person to manually frame their shot, invalidate your key-value observation and call the monitor’s [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCaptureSmartFramingMonitor\/stopMonitoring()] method, as shown here:\n\nCalling this method causes the monitor to stop generating recommendations until you restart monitoring.\n\n## Apply framing recommendations\n\nWhen the monitor generates new framing recommendations, apply them by setting the device’s dynamic aspect ratio and video zoom factor as follows:\n\nThe order of applying aspect ratio and zoom factor affects the visual transition. Apply the aspect ratio change first, then update the zoom factor to provide a smooth transition between framings.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/AVFoundation\/adopting-smart-framing-in-your-camera-app\ncrawled: 2025-12-01T09:50:14Z\n---\n\n# Adopting smart framing in your camera app\n\n**Article**\n\nCapture the optimal shot by providing automatic framing recommendations.\n\n## Overview\n\nSmart framing detects when people enter or leave the scene, and frames the shot to compose a great photo. Available in iPhone 17, iPhone Air, and iPhone 17 Pro, the front Ultra Wide camera enables dynamic aspect ratio changes without interrupting the camera’s preview. You can add smart framing to your app by adopting [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCaptureSmartFramingMonitor].\n\nThe [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCaptureSmartFramingMonitor] class monitors a supported camera’s field of view and provides aspect ratio and zoom factor suggestions for better photographic composition. When optimal framing opportunities occur, the monitor provides recommendations through its [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCaptureSmartFramingMonitor\/recommendedFraming] property.\n\n## Find a smart framing-capable device\n\nStart by verifying whether the person’s device supports smart framing:\n\n```swift\nfunc findAndConfigureSmartFramingDevice() -> AVCaptureDevice? {\n    \/\/ Configure the discovery session to find an Ultra Wide front camera.\n    let discoverySession = AVCaptureDevice.DiscoverySession(\n        deviceTypes: [.builtInUltraWideCamera],\n        mediaType: .video,\n        position: .front\n    )\n\n    \/\/ Find the first matching device and format that supports smart framing.\n    guard let device = discoverySession.devices.first,\n          let format = device.formats.first(where: \\.isSmartFramingSupported) else {\n        \/\/ Return nil if the device doesn't have an Ultra Wide front camera.\n        return nil\n    }\n\n    if device.activeFormat.isSmartFramingSupported {\n        \/\/ Return the device if already configured for smart framing.\n        return device\n    } else {\n        \/\/ Otherwise, attempt to configure the device and return it, if successful.\n        do {\n            try device.lockForConfiguration()\n            defer { device.unlockForConfiguration() }\n            \/\/ Set the smart framing format as active.\n            device.activeFormat = format\n            return device\n        } catch {\n            return nil\n        }\n    }\n}\n```\n\nThe above code uses an [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCaptureDevice\/DiscoverySession] object to find the front Ultra Wide camera, and validates that it provides an [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCaptureDevice\/Format] that supports the feature. If the device configuration supports smart framing, it returns the capture device. Otherwise, it sets the [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCaptureDevice\/activeFormat] and then returns the configured device.\n\n## Configure the smart framing monitor\n\nAfter finding a supported capture device, configure its monitoring behavior by accessing the device’s associated [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCaptureSmartFramingMonitor] object:\n\n```swift\nfunc configureSmartFraming() async {\n    \/\/ Access the smart framing monitor, if available.\n    guard let monitor = currentDevice?.smartFramingMonitor else { return }\n    \/\/ Enable all supported framings.\n    monitor.enabledFramings = monitor.supportedFramings\n}\n```\n\nBy default, the smart framing monitor isn’t configured to provide recommendations. Attempting to start it in this state results in an error. To monitor the scene, specify the framings the monitor should consider by setting its [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCaptureSmartFramingMonitor\/enabledFramings] property value. The example above enables all the monitor’s [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCaptureSmartFramingMonitor\/supportedFramings], but you can enable a subset of these values, depending on the needs of your app. For example, it could limit the enabled framings to [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCaptureDevice\/AspectRatio\/ratio3x4] and [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCaptureDevice\/AspectRatio\/ratio4x3] for photo capture, or [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCaptureDevice\/AspectRatio\/ratio9x16] and [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCaptureDevice\/AspectRatio\/ratio16x9] for video.\n\n## Monitor framing recommendations\n\nWith the smart framing monitor configured, it’s ready to start generating framing recommendations. To respond to new recommendations, key-value observe the monitor’s [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCaptureSmartFramingMonitor\/recommendedFraming] property like shown below:\n\n```swift\nfunc startMonitoring() async {\n    \/\/ Return early if the monitor doesn't exist or is currently monitoring.\n    guard let monitor = currentDevice?.smartFramingMonitor, !monitor.isMonitoring else { return }\n\n    \/\/ Key-value observe changes to the monitor's framing recommendations.\n    framingObservation = monitor.observe(\\.recommendedFraming, options: [.new]) { [weak self] monitor, change in\n        \/\/ Access the recommended framing.\n        guard let self, let framing = monitor.recommendedFraming else { return }\n        \/\/ Configure the device with the latest recommendation.\n        Task { await self.applyRecommendedFraming(framing) }\n    }\n\n    do {\n        \/\/ Start monitoring for framing recommendations.\n        try monitor.startMonitoring()\n    } catch {\n        logger.error(\"Unable to start monitoring: \\(error)\")\n    }\n}\n```\n\nThe code example configures an observer to respond to new framing recommendations. When it observes a new value, it calls a method to apply the framing to the capture device. After configuring the observer, the example calls the monitor’s  [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCaptureSmartFramingMonitor\/startMonitoring()] method to generate framing recommendations.\n\nTo disable smart framing, and allow a person to manually frame their shot, invalidate your key-value observation and call the monitor’s [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCaptureSmartFramingMonitor\/stopMonitoring()] method, as shown here:\n\n```swift\nfunc stopMonitoring() async {\n    \/\/ Stop key-value observing the monitor.\n    framingObservation?.invalidate()\n    framingObservation = nil\n\n    guard let monitor = currentDevice?.smartFramingMonitor else { return }\n    \/\/ Stop monitoring for smart framing recommendations.\n    monitor.stopMonitoring()\n}\n```\n\nCalling this method causes the monitor to stop generating recommendations until you restart monitoring.\n\n\n\n## Apply framing recommendations\n\nWhen the monitor generates new framing recommendations, apply them by setting the device’s dynamic aspect ratio and video zoom factor as follows:\n\n```swift\nprivate func applyRecommendedFraming(_ framing: AVCaptureFraming) async {\n    guard let device = currentDevice else { return }\n    do {\n        \/\/ Request exclusive control of the device.\n        try device.lockForConfiguration()\n        do {\n            \/\/ Set the recommended aspect ratio and zoom factor.\n            try await device.setDynamicAspectRatio(framing.aspectRatio)\n            device.videoZoomFactor = CGFloat(framing.zoomFactor)\n        } catch {\n            logger.error(\"Failed to set aspect ratio: \\(error)\")\n        }\n        \/\/ Release exclusive control of the device.\n        device.unlockForConfiguration()\n    } catch {\n        logger.error(\"Failed to lock device for configuration: \\(error)\")\n    }\n}\n```\n\nThe order of applying aspect ratio and zoom factor affects the visual transition. Apply the aspect ratio change first, then update the zoom factor to provide a smooth transition between framings.\n\n## Capture devices\n\n- **Choosing a capture device**: Select the front or back camera, or use advanced features like the TrueDepth camera or dual camera.\n- **AVCaptureDevice**: An object that represents a hardware or virtual capture device like a camera or microphone.\n- **AVCaptureDeviceInput**: An object that provides media input from a capture device to a capture session.\n- **AVContinuityDevice**: A class that represents a physical iOS device that’s nearby and can provide access to its cameras and microphones.\n- **AVExternalStorageDevice**: Represents a physical external storage device that stores media assets.\n- **AVExternalStorageDeviceDiscoverySession**: Informs your app when the external storage devices connect to and disconnect from the system.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Select the front or back camera, or use advanced features like the TrueDepth camera or dual camera.",
          "name" : "Choosing a capture device",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/choosing-a-capture-device"
        },
        {
          "description" : "An object that represents a hardware or virtual capture device like a camera or microphone.",
          "name" : "AVCaptureDevice",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVCaptureDevice"
        },
        {
          "description" : "An object that provides media input from a capture device to a capture session.",
          "name" : "AVCaptureDeviceInput",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVCaptureDeviceInput"
        },
        {
          "description" : "A class that represents a physical iOS device that’s nearby and can provide access to its cameras and microphones.",
          "name" : "AVContinuityDevice",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVContinuityDevice"
        },
        {
          "description" : "Represents a physical external storage device that stores media assets.",
          "name" : "AVExternalStorageDevice",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVExternalStorageDevice"
        },
        {
          "description" : "Informs your app when the external storage devices connect to and disconnect from the system.",
          "name" : "AVExternalStorageDeviceDiscoverySession",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/AVExternalStorageDeviceDiscoverySession"
        }
      ],
      "title" : "Capture devices"
    }
  ],
  "source" : "appleJSON",
  "title" : "Adopting smart framing in your camera app",
  "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/adopting-smart-framing-in-your-camera-app"
}