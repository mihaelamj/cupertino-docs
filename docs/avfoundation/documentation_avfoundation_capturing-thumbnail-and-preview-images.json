{
  "abstract" : "Enable delivery of reduced-size images with the main image in a photo capture.",
  "codeExamples" : [
    {
      "code" : "if photoSettings.availablePreviewPhotoPixelFormatTypes.count > 0 {\n    photoSettings.previewPhotoFormat = [\n        kCVPixelBufferPixelFormatTypeKey : photoSettings.availablePreviewPhotoPixelFormatTypes.first!,\n        kCVPixelBufferWidthKey : 512,\n        kCVPixelBufferHeightKey : 512\n    ] as [String: Any]\n}\n",
      "language" : "swift"
    },
    {
      "code" : "photoSettings.embeddedThumbnailPhotoFormat = [\n    AVVideoCodecKey: AVVideoCodecType.jpeg,\n    AVVideoWidthKey: 1024,\n    AVVideoHeightKey: 1024,\n]",
      "language" : "swift"
    },
    {
      "code" : "func showPreview(for photo: AVCapturePhoto) {\n    guard let previewPixelBuffer = photo.previewPixelBuffer else { return }\n    let ciImage = CIImage(cvPixelBuffer: previewPixelBuffer)\n    let uiImage = UIImage(ciImage: ciImage)\n    self.imageView.image = uiImage\n}\n",
      "language" : "swift"
    }
  ],
  "contentHash" : "211898e78717fca6bc8bab7c64ff7a4815d84ae6069a7c3128e8d744a133ceb3",
  "crawledAt" : "2025-12-02T19:05:03Z",
  "id" : "6BCCFF99-A832-42C1-8A31-DF652C5D7E8F",
  "kind" : "article",
  "language" : "swift",
  "module" : "AVFoundation",
  "overview" : "## Overview\n\nGenerating your own preview or thumbnail images from high-resolution source images can be difficult and time-consuming. Instead, use [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCapturePhotoOutput] to get easy, fast preview and thumbnail generation as part of your capture process.\n\nIn the capture system, the names *preview* and *thumbnail* have specific meanings:\n\nYou can add preview images, thumbnail images, or both with minor additions to any [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCapturePhotoOutput] workflow (see [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/capturing-still-and-live-photos] and related topics).\n\n### Choose settings\n\nAfter you create an [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCapturePhotoSettings] object for the kind of photo you plan to shoot, use its [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCapturePhotoSettings\/previewPhotoFormat] dictionary to specify the format and size of preview image you want.\n\nTo request that a thumbnail version of the photo be embedded in the resulting image file, use the photo settings object’s [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCapturePhotoSettings\/embeddedThumbnailPhotoFormat] dictionary to specify the format and size of the thumbnail.\n\n### Handle results\n\nWhen the photo output calls your delegate’s [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCapturePhotoCaptureDelegate\/photoOutput(_:didFinishProcessingPhoto:error:)] method, you can get the preview image from the [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCapturePhoto] [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCapturePhoto\/previewPixelBuffer] property. A pixel buffer provides direct access to pixel data, so you can process or display it using other graphics technologies such as Metal, Vision, or Core Image. One way to simply display the preview image in your UI is to use Core Image to wrap the buffer in a UIImage object:\n\nIf you requested an embedded thumbnail image, that image isn’t directly accessible from the [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCapturePhoto] object—it’s embedded in the image file data that you get by calling the photo object’s [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCapturePhoto\/fileDataRepresentation()] method.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/AVFoundation\/capturing-thumbnail-and-preview-images\ncrawled: 2025-12-02T19:05:03Z\n---\n\n# Capturing thumbnail and preview images\n\n**Article**\n\nEnable delivery of reduced-size images with the main image in a photo capture.\n\n## Overview\n\nGenerating your own preview or thumbnail images from high-resolution source images can be difficult and time-consuming. Instead, use [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCapturePhotoOutput] to get easy, fast preview and thumbnail generation as part of your capture process.\n\nIn the capture system, the names *preview* and *thumbnail* have specific meanings:\n\n- A *preview image* is a reduced-size (screen resolution or smaller) version of the photo, in an uncompressed format, delivered only in memory for purposes of displaying feedback shortly after capture. For example, the system Camera app displays a preview image of the last captured photo.\n- A *thumbnail image* is a smaller version of the photo, encoded in a compressed format and embedded in the output image file for use by other software. For example, image browsers reading a folder full of images can preview the contents of many files without reading and decoding each file’s entire contents.\n\nYou can add preview images, thumbnail images, or both with minor additions to any [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCapturePhotoOutput] workflow (see [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/capturing-still-and-live-photos] and related topics).\n\n### Choose settings\n\nAfter you create an [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCapturePhotoSettings] object for the kind of photo you plan to shoot, use its [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCapturePhotoSettings\/previewPhotoFormat] dictionary to specify the format and size of preview image you want.\n\n```swift\nif photoSettings.availablePreviewPhotoPixelFormatTypes.count > 0 {\n    photoSettings.previewPhotoFormat = [\n        kCVPixelBufferPixelFormatTypeKey : photoSettings.availablePreviewPhotoPixelFormatTypes.first!,\n        kCVPixelBufferWidthKey : 512,\n        kCVPixelBufferHeightKey : 512\n    ] as [String: Any]\n}\n\n```\n\nTo request that a thumbnail version of the photo be embedded in the resulting image file, use the photo settings object’s [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCapturePhotoSettings\/embeddedThumbnailPhotoFormat] dictionary to specify the format and size of the thumbnail.\n\n```swift\nphotoSettings.embeddedThumbnailPhotoFormat = [\n    AVVideoCodecKey: AVVideoCodecType.jpeg,\n    AVVideoWidthKey: 1024,\n    AVVideoHeightKey: 1024,\n]\n```\n\n### Handle results\n\nWhen the photo output calls your delegate’s [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCapturePhotoCaptureDelegate\/photoOutput(_:didFinishProcessingPhoto:error:)] method, you can get the preview image from the [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCapturePhoto] [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCapturePhoto\/previewPixelBuffer] property. A pixel buffer provides direct access to pixel data, so you can process or display it using other graphics technologies such as Metal, Vision, or Core Image. One way to simply display the preview image in your UI is to use Core Image to wrap the buffer in a UIImage object:\n\n```swift\nfunc showPreview(for photo: AVCapturePhoto) {\n    guard let previewPixelBuffer = photo.previewPixelBuffer else { return }\n    let ciImage = CIImage(cvPixelBuffer: previewPixelBuffer)\n    let uiImage = UIImage(ciImage: ciImage)\n    self.imageView.image = uiImage\n}\n\n```\n\nIf you requested an embedded thumbnail image, that image isn’t directly accessible from the [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCapturePhoto] object—it’s embedded in the image file data that you get by calling the photo object’s [doc:\/\/com.apple.avfoundation\/documentation\/AVFoundation\/AVCapturePhoto\/fileDataRepresentation()] method.\n\n## More capture options\n\n- **Capturing photos with depth**: Get a depth map with a photo to create effects like the system camera’s Portrait mode (on compatible devices).\n- **Capturing a bracketed photo sequence**: Capture several photos at once, varying parameters like exposure duration or light sensitivity.\n- **Capturing uncompressed image data**: Get processed image data without compression to use for filtering or lossless output.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Get a depth map with a photo to create effects like the system camera’s Portrait mode (on compatible devices).",
          "name" : "Capturing photos with depth",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/capturing-photos-with-depth"
        },
        {
          "description" : "Capture several photos at once, varying parameters like exposure duration or light sensitivity.",
          "name" : "Capturing a bracketed photo sequence",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/capturing-a-bracketed-photo-sequence"
        },
        {
          "description" : "Get processed image data without compression to use for filtering or lossless output.",
          "name" : "Capturing uncompressed image data",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/capturing-uncompressed-image-data"
        }
      ],
      "title" : "More capture options"
    }
  ],
  "source" : "appleJSON",
  "title" : "Capturing thumbnail and preview images",
  "url" : "https:\/\/developer.apple.com\/documentation\/AVFoundation\/capturing-thumbnail-and-preview-images"
}