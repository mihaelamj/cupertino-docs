{
  "abstract" : "Release a loaded kext based on its load tag.",
  "codeExamples" : [

  ],
  "contentHash" : "db1ea64845deab2347046c944c4033d5334a93043788046fad64c84c7058bb3b",
  "crawledAt" : "2025-12-06T13:37:20Z",
  "declaration" : {
    "code" : "OSReturn OSKextReleaseKextWithLoadTag(OSKextLoadTag loadTag);",
    "language" : "swift"
  },
  "id" : "A7D45120-F172-4A23-99CA-02AC77C3CB68",
  "kind" : "function",
  "language" : "occ",
  "module" : "Kernel",
  "overview" : "## Return Value\n\n`kOSReturnSuccess` if the kext was released. `kOSKextReturnNotFound` if the kext was not found. `kOSKextReturnInvalidArgument` if `loadTag` is `kOSKextInvalidLoadTag`.\n\n## Discussion\n\nThe kext should have been retained previously via [doc:\/\/com.apple.documentation\/documentation\/kernel\/1508272-oskextretainkextwithloadtag].\n\nThis function schedules an autounload scan for all kexts. When that scan occurs, if a kext has autounload enabled, it will be unloaded if there are no outstanding references to it and there are no instances of its Libkern C++ classes (if any).\n\nKexts that define subclasses of IOService have autounload enabled automatically. Other kexts can use the reference count to manage automatic unload without having to define and create Libkern C++ objects. For example, a filesystem kext can be retained whenever a new mount is created, and released when a mount is removed. When the last mount is removed, the kext will be unloaded after a brief delay.\n\nWhile the autounload scan takes place after a delay of at least a minute, a kext that manages its own reference counts for autounload should be prepared to have its module stop function called even while the function calling this function is still running.\n\nA kext can get its own load tag using the [doc:\/\/com.apple.documentation\/documentation\/kernel\/1508336-oskextgetcurrentloadtag].\n\nKexts should not retain and release other kexts; linkage references are accounted for internally.",
  "platforms" : [
    "macOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/kernel\/1508339-oskextreleasekextwithloadtag\ncrawled: 2025-12-06T13:37:20Z\n---\n\n# OSKextReleaseKextWithLoadTag\n\n**Function**\n\nRelease a loaded kext based on its load tag.\n\n## Declaration\n\n```swift\nOSReturn OSKextReleaseKextWithLoadTag(OSKextLoadTag loadTag);\n```\n\n## Parameters\n\n- **loadTag**: The load tag of the kext to be released. See [doc:\/\/com.apple.documentation\/documentation\/kernel\/1508336-oskextgetcurrentloadtag].\n\n## Return Value\n\n`kOSReturnSuccess` if the kext was released. `kOSKextReturnNotFound` if the kext was not found. `kOSKextReturnInvalidArgument` if `loadTag` is `kOSKextInvalidLoadTag`.\n\n## Discussion\n\nThe kext should have been retained previously via [doc:\/\/com.apple.documentation\/documentation\/kernel\/1508272-oskextretainkextwithloadtag].\n\nThis function schedules an autounload scan for all kexts. When that scan occurs, if a kext has autounload enabled, it will be unloaded if there are no outstanding references to it and there are no instances of its Libkern C++ classes (if any).\n\nKexts that define subclasses of IOService have autounload enabled automatically. Other kexts can use the reference count to manage automatic unload without having to define and create Libkern C++ objects. For example, a filesystem kext can be retained whenever a new mount is created, and released when a mount is removed. When the last mount is removed, the kext will be unloaded after a brief delay.\n\nWhile the autounload scan takes place after a delay of at least a minute, a kext that manages its own reference counts for autounload should be prepared to have its module stop function called even while the function calling this function is still running.\n\nA kext can get its own load tag using the [doc:\/\/com.apple.documentation\/documentation\/kernel\/1508336-oskextgetcurrentloadtag].\n\nKexts should not retain and release other kexts; linkage references are accounted for internally.\n\n## kext\n\n- **kext_alloc**\n- **kext_alloc_init**\n- **kext_free**\n- **kext_request**\n- **kextd_ping**\n- **OSKextCancelRequest**: Cancels a pending user-space kext request without invoking the callback.\n- **OSKextGetCurrentIdentifier**: Returns the CFBundleIdentifier for the calling kext as a C string.\n- **OSKextGetCurrentLoadTag**: Returns the run-time load tag for the calling kext as an `OSKextLoadTag`.\n- **OSKextGetCurrentVersionString**: Returns the CFBundleVersion for the calling kext as a C string.\n- **OSKextGrabPgoData**\n- **OSKextLoadKextWithIdentifier**: Request that a kext be loaded.\n- **OSKextRequestResource**: Requests data from a nonlocalized resource file in a kext bundle on disk.\n- **OSKextResetPgoCounters**\n- **OSKextResetPgoCountersLock**\n- **OSKextResetPgoCountersUnlock**\n- **OSKextRetainKextWithLoadTag**: Retain a loaded kext based on its load tag, and enable autounload for that kext.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "name" : "kext_alloc",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/1577598-kext_alloc"
        },
        {
          "name" : "kext_alloc_init",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/1577599-kext_alloc_init"
        },
        {
          "name" : "kext_free",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/1577600-kext_free"
        },
        {
          "name" : "kext_request",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/1588829-kext_request"
        },
        {
          "name" : "kextd_ping",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/1520989-kextd_ping"
        },
        {
          "description" : "Cancels a pending user-space kext request without invoking the callback.",
          "name" : "OSKextCancelRequest",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/1508350-oskextcancelrequest"
        },
        {
          "description" : "Returns the CFBundleIdentifier for the calling kext as a C string.",
          "name" : "OSKextGetCurrentIdentifier",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/1508305-oskextgetcurrentidentifier"
        },
        {
          "description" : "Returns the run-time load tag for the calling kext as an `OSKextLoadTag`.",
          "name" : "OSKextGetCurrentLoadTag",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/1508336-oskextgetcurrentloadtag"
        },
        {
          "description" : "Returns the CFBundleVersion for the calling kext as a C string.",
          "name" : "OSKextGetCurrentVersionString",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/1508326-oskextgetcurrentversionstring"
        },
        {
          "name" : "OSKextGrabPgoData",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/1508333-oskextgrabpgodata"
        },
        {
          "description" : "Request that a kext be loaded.",
          "name" : "OSKextLoadKextWithIdentifier",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/1508323-oskextloadkextwithidentifier"
        },
        {
          "description" : "Requests data from a nonlocalized resource file in a kext bundle on disk.",
          "name" : "OSKextRequestResource",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/1508294-oskextrequestresource"
        },
        {
          "name" : "OSKextResetPgoCounters",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/1646298-oskextresetpgocounters"
        },
        {
          "name" : "OSKextResetPgoCountersLock",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/1646299-oskextresetpgocounterslock"
        },
        {
          "name" : "OSKextResetPgoCountersUnlock",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/1646297-oskextresetpgocountersunlock"
        },
        {
          "description" : "Retain a loaded kext based on its load tag, and enable autounload for that kext.",
          "name" : "OSKextRetainKextWithLoadTag",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/1508272-oskextretainkextwithloadtag"
        }
      ],
      "title" : "kext"
    }
  ],
  "source" : "appleJSON",
  "title" : "OSKextReleaseKextWithLoadTag",
  "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/1508339-oskextreleasekextwithloadtag"
}