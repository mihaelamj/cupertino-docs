{
  "abstract" : "Interrupt the kernel on a target Mac and attach a remote debugger to it.",
  "codeExamples" : [
    {
      "code" : "sudo nvram boot-args=\"<current settings> debug=0x8004\"",
      "language" : "other"
    },
    {
      "code" : "sudo nvram -d boot-args",
      "language" : "other"
    }
  ],
  "contentHash" : "6a57d1b060569297e47698eefae1ab63fd884f117459a6a73185c052f4edc46b",
  "crawledAt" : "2025-12-03T17:04:48Z",
  "id" : "26CFD866-1712-41E7-A2FC-2748E7F64395",
  "kind" : "article",
  "language" : "occ",
  "module" : "Kernel",
  "overview" : "## Overview\n\nDebugging many types of kernel-level problems requires a second Mac computer to run the debugger. On your target Mac, configure the `debug` boot arg with the options you need to support non-maskable interrupts (NMIs). The `DB_NMI` (`0x4`) flag causes the kernel on the target Mac to wait for a debuger to attach when an NMI occurs; add other flags as needed. After an NMI occurs, use the debugger on your second Mac to examine the system and diagnose any issues.\n\nFor information about how to configure your Mac to debug kernel processes, sign in and download the Kernel Debug Kit from [link-3618660]. \n\n### Trigger a Non-Maskable Interrupt Manually\n\nThe following table lists the keys you press to trigger an NMI on different types of Mac. \n\nFor information about which Intel-based Mac computers have the Apple T2 Security Chip, see [link-3625571].\n\n### Configure a One-Button NMI\n\nTo trigger an NMI manually using only the target Mac’s power button, add the `DB_NMI_BTN_ENA` (`0x8000`) flag to the `debug` boot arg. Using only the power button makes it possible to trigger an NMI early in the Mac’s boot sequence. For example, you can trigger an NMI before the system loads the USB keyboard driver, or trigger one on systems with no keyboard at all. Combine this flag with the `DB_NMI` flag and set the boot args on your target Mac as shown in the following example:\n\nWhen you set one or more debug flags, the target Mac retains the designated capabilities until you remove the flags using the `nvram` tool. To remove all boot args, run the `nvram` tool with the `-d` option, as shown in the following example:\n\n",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/kernel\/generating_a_non-maskable_interrupt\ncrawled: 2025-12-03T17:04:48Z\n---\n\n# Generating a Non-Maskable Interrupt\n\n**Article**\n\nInterrupt the kernel on a target Mac and attach a remote debugger to it.\n\n## Overview\n\nDebugging many types of kernel-level problems requires a second Mac computer to run the debugger. On your target Mac, configure the `debug` boot arg with the options you need to support non-maskable interrupts (NMIs). The `DB_NMI` (`0x4`) flag causes the kernel on the target Mac to wait for a debuger to attach when an NMI occurs; add other flags as needed. After an NMI occurs, use the debugger on your second Mac to examine the system and diagnose any issues.\n\nFor information about how to configure your Mac to debug kernel processes, sign in and download the Kernel Debug Kit from [link-3618660]. \n\n### Trigger a Non-Maskable Interrupt Manually\n\nThe following table lists the keys you press to trigger an NMI on different types of Mac. \n\n\n\nFor information about which Intel-based Mac computers have the Apple T2 Security Chip, see [link-3625571].\n\n### Configure a One-Button NMI\n\nTo trigger an NMI manually using only the target Mac’s power button, add the `DB_NMI_BTN_ENA` (`0x8000`) flag to the `debug` boot arg. Using only the power button makes it possible to trigger an NMI early in the Mac’s boot sequence. For example, you can trigger an NMI before the system loads the USB keyboard driver, or trigger one on systems with no keyboard at all. Combine this flag with the `DB_NMI` flag and set the boot args on your target Mac as shown in the following example:\n\n```other\nsudo nvram boot-args=\"<current settings> debug=0x8004\"\n```\n\nWhen you set one or more debug flags, the target Mac retains the designated capabilities until you remove the flags using the `nvram` tool. To remove all boot args, run the `nvram` tool with the `-d` option, as shown in the following example:\n\n```other\nsudo nvram -d boot-args\n```\n\n\n\n\n\n## Kernel Extensions\n\n- **Implementing drivers, system extensions, and kexts**: Create drivers and system extensions to communicate with hardware and provide low-level services, and only use kernel extensions for a few tasks. \n- **Installing a custom kernel extension**: Install kernel extensions using a custom installer package, and help users understand the installation process.\n- **Debugging a custom kernel extension**: Configure your system to enable the debugging of custom kernel extensions from a second Mac.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Create drivers and system extensions to communicate with hardware and provide low-level services, and only use kernel extensions for a few tasks. ",
          "name" : "Implementing drivers, system extensions, and kexts",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/implementing_drivers_system_extensions_and_kexts"
        },
        {
          "description" : "Install kernel extensions using a custom installer package, and help users understand the installation process.",
          "name" : "Installing a custom kernel extension",
          "url" : "https:\/\/developer.apple.com\/documentation\/Apple-Silicon\/installing-a-custom-kernel-extension"
        },
        {
          "description" : "Configure your system to enable the debugging of custom kernel extensions from a second Mac.",
          "name" : "Debugging a custom kernel extension",
          "url" : "https:\/\/developer.apple.com\/documentation\/Apple-Silicon\/debugging-a-custom-kernel-extension"
        }
      ],
      "title" : "Kernel Extensions"
    }
  ],
  "source" : "appleJSON",
  "title" : "Generating a Non-Maskable Interrupt",
  "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/generating_a_non-maskable_interrupt"
}