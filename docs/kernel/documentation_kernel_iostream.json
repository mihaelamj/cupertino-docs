{
  "abstract" : "A class representing a stream of data buffers passed from kernel to user space and back again.",
  "codeExamples" : [

  ],
  "contentHash" : "2ad6be739da047afb78b43dad83afcda885730bdf2db28954d8a714d03989b27",
  "crawledAt" : "2025-12-05T02:50:52Z",
  "declaration" : {
    "code" : "class IOStream : IOService",
    "language" : "swift"
  },
  "id" : "61F4DE77-50FD-4CCD-BFA9-131232A48D99",
  "kind" : "class",
  "language" : "occ",
  "module" : "Kernel",
  "overview" : "## Overview\n\nThe IOStream class defines a mechanism for moving buffers of data from kernel space to user space or vice-versa. The policy for which direction the data flows and the nature of the data is left up the the implementer of the driver which uses IOStream.\n\nAlthough it is expected that the client of an IOStream will be in user space, this is not required.\n\nReferences to \"output\" mean \"from the IOStream to the user client\", and \"input\" means \"from the user client to the IOStream.\"",
  "platforms" : [
    "macOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/kernel\/iostream\ncrawled: 2025-12-05T02:50:52Z\n---\n\n# IOStream\n\n**Class**\n\nA class representing a stream of data buffers passed from kernel to user space and back again.\n\n## Declaration\n\n```swift\nclass IOStream : IOService\n```\n\n## Overview\n\nThe IOStream class defines a mechanism for moving buffers of data from kernel space to user space or vice-versa. The policy for which direction the data flows and the nature of the data is left up the the implementer of the driver which uses IOStream.\n\nAlthough it is expected that the client of an IOStream will be in user space, this is not required.\n\nReferences to \"output\" mean \"from the IOStream to the user client\", and \"input\" means \"from the user client to the IOStream.\"\n\n## Stream control\n\n- **getStreamMode**: Returns the mode of the stream, either input or output.\n- **setStreamMode**: Sets the mode of the stream, either input or output.\n- **startStream**: Start sending data on a stream.\n- **stopStream**: Stop sending data on a stream.\n- **suspendStream**: Temporarily suspend data flow on the stream.\n\n## Queueing and dequeueing buffers\n\n- **dequeueInputEntry**\n- **enqueueOutputBuffer**: A convenience method for enqueueing a buffer.\n- **enqueueOutputEntry**\n\n## Opening and closing streams\n\n- **handleClose**: The handleClose method destroys the shared input and output queues.\n- **handleOpen**: The handleOpen() method relies on the default IOService behavior to ensure that only one client has the stream open at a time. The shared input and output queues are created at open time.\n\n## Managing user clients\n\n- **newUserClient**: See the documentation for the IOService method newUserClient.\n\n## Managing shared queues\n\n- **createQueues**: Creates the shared input and output queues, without regard to whether the stream is open or not. Normally this is called by handleOpen().\n- **destroyQueues**: Releases the shared input and output queues.\n- **getInputQueue**\n- **getInputQueueMemoryDescriptor**\n- **getOutputQueue**\n- **getOutputQueueMemoryDescriptor**\n\n## Managing notifications\n\n- **inputCallback**: Input callback function to be implemented by a subclass;\n- **inputSyncCallback**: Input callback function to be implemented by a subclass.\n\n## Managing notification ports\n\n- **getInputPort**: Get the Mach port used to receive notifications from user space that a buffer has been added to the input queue.\n- **getOutputPort**: Get the Mach port used to send notifications to user space that a buffer has been added to the output queue.\n- **sendOutputNotification**: Send a notification to the user client that data is available for reading on the output queue. This will result in the user's output handler being called, if they registered one.\n- **setInputPort**: Set the Mach port used to receive notifications from user space that a buffer has been added to the input queue.\n- **setOutputPort**: Set the Mach port used to send notifications to user space that a buffer has been added to the output queue.\n\n## Managing buffers in an IOStream\n\n- **addBuffer**: Add a buffer to an IOStream.\n- **addBuffers**\n- **getBufferCount**\n- **getBuffers**: Get an array containing all the buffers in the stream.\n- **getBufferWithID**\n- **removeAllBuffers()**\n- **removeAllBuffers()**\n- **removeBuffer(IOStreamBuffer *)**: Removes a buffer from the stream. Buffers cannot be removed while the stream is open, as this will change the buffer IDs of existing buffers.\n- **removeBuffer(IOStreamBufferID)**: Removes a buffer from the stream. Buffers cannot be removed while the stream is open, as this will change the buffer IDs of existing buffers.\n\n## Creating IOStream objects\n\n- **free**\n- **initWithBuffers**\n- **withBuffers**\n\n## Instance Methods\n\n- **addBuffer**\n- **addBuffers**\n- **createQueues**\n- **dequeueInputEntry**\n- **destroyQueues**\n- **enqueueOutputBuffer**\n- **enqueueOutputEntry**\n- **free**\n- **getBufferCount**\n- **getBufferWithID**\n- **getBuffers**\n- **getInputPort**\n- **getInputQueue**\n- **getInputQueueMemoryDescriptor**\n- **getMetaClass**\n- **getOutputPort**\n- **getOutputQueue**\n- **getOutputQueueMemoryDescriptor**\n- **getStreamMode**\n- **handleClose**\n- **handleOpen**\n- **init**\n- **initWithBuffers**\n- **inputCallback**\n- **inputSyncCallback**\n- **newUserClient**\n- **removeAllBuffers**\n- **removeBuffer**\n- **removeBuffer**\n- **sendOutputNotification**\n- **setInputPort**\n- **setOutputPort**\n- **setStreamMode**\n- **startStream**\n- **stopStream**\n- **suspendStream**\n\n## Type Methods\n\n- **withBuffers**\n\n## User-Space Interactions\n\n- **IOSharedDataQueue**: A generic queue designed to pass data both from the kernel to a user process and from a user process to the kernel.\n- **IOSharedInterruptController**\n- **IOUserClient**: Provides a basis for communication between client applications and I\/O Kit objects.\n- **IOStreamUserClient**\n- **IOStreamBuffer**: A class representing a data buffer that is part of an IOStream.\n- **OSAction_IOUserClient_KernelCompletion**\n- **OSAction_IOUserClient_KernelCompletionInterface**\n\n## Inherits From\n\n- IOService\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Returns the mode of the stream, either input or output.",
          "name" : "getStreamMode",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iostream\/1809626-getstreammode"
        },
        {
          "description" : "Sets the mode of the stream, either input or output.",
          "name" : "setStreamMode",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iostream\/1809631-setstreammode"
        },
        {
          "description" : "Start sending data on a stream.",
          "name" : "startStream",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iostream\/1809638-startstream"
        },
        {
          "description" : "Stop sending data on a stream.",
          "name" : "stopStream",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iostream\/1809642-stopstream"
        },
        {
          "description" : "Temporarily suspend data flow on the stream.",
          "name" : "suspendStream",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iostream\/1809648-suspendstream"
        }
      ],
      "title" : "Stream control"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "",
          "name" : "dequeueInputEntry",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iostream\/1809653-dequeueinputentry"
        },
        {
          "description" : "A convenience method for enqueueing a buffer.",
          "name" : "enqueueOutputBuffer",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iostream\/1809665-enqueueoutputbuffer"
        },
        {
          "description" : "",
          "name" : "enqueueOutputEntry",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iostream\/1809670-enqueueoutputentry"
        }
      ],
      "title" : "Queueing and dequeueing buffers"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "The handleClose method destroys the shared input and output queues.",
          "name" : "handleClose",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iostream\/1809680-handleclose"
        },
        {
          "description" : "The handleOpen() method relies on the default IOService behavior to ensure that only one client has the stream open at a time. The shared input and output queues are created at open time.",
          "name" : "handleOpen",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iostream\/1809688-handleopen"
        }
      ],
      "title" : "Opening and closing streams"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "See the documentation for the IOService method newUserClient.",
          "name" : "newUserClient",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iostream\/1809695-newuserclient"
        }
      ],
      "title" : "Managing user clients"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Creates the shared input and output queues, without regard to whether the stream is open or not. Normally this is called by handleOpen().",
          "name" : "createQueues",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iostream\/1809702-createqueues"
        },
        {
          "description" : "Releases the shared input and output queues.",
          "name" : "destroyQueues",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iostream\/1809709-destroyqueues"
        },
        {
          "description" : "",
          "name" : "getInputQueue",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iostream\/1809718-getinputqueue"
        },
        {
          "description" : "",
          "name" : "getInputQueueMemoryDescriptor",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iostream\/1809727-getinputqueuememorydescriptor"
        },
        {
          "description" : "",
          "name" : "getOutputQueue",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iostream\/1809738-getoutputqueue"
        },
        {
          "description" : "",
          "name" : "getOutputQueueMemoryDescriptor",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iostream\/1809744-getoutputqueuememorydescriptor"
        }
      ],
      "title" : "Managing shared queues"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Input callback function to be implemented by a subclass;",
          "name" : "inputCallback",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iostream\/1809754-inputcallback"
        },
        {
          "description" : "Input callback function to be implemented by a subclass.",
          "name" : "inputSyncCallback",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iostream\/1809761-inputsynccallback"
        }
      ],
      "title" : "Managing notifications"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Get the Mach port used to receive notifications from user space that a buffer has been added to the input queue.",
          "name" : "getInputPort",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iostream\/1809770-getinputport"
        },
        {
          "description" : "Get the Mach port used to send notifications to user space that a buffer has been added to the output queue.",
          "name" : "getOutputPort",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iostream\/1809774-getoutputport"
        },
        {
          "description" : "Send a notification to the user client that data is available for reading on the output queue. This will result in the user's output handler being called, if they registered one.",
          "name" : "sendOutputNotification",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iostream\/1809783-sendoutputnotification"
        },
        {
          "description" : "Set the Mach port used to receive notifications from user space that a buffer has been added to the input queue.",
          "name" : "setInputPort",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iostream\/1809793-setinputport"
        },
        {
          "description" : "Set the Mach port used to send notifications to user space that a buffer has been added to the output queue.",
          "name" : "setOutputPort",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iostream\/1809801-setoutputport"
        }
      ],
      "title" : "Managing notification ports"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Add a buffer to an IOStream.",
          "name" : "addBuffer",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iostream\/1809807-addbuffer"
        },
        {
          "description" : "",
          "name" : "addBuffers",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iostream\/1809814-addbuffers"
        },
        {
          "description" : "",
          "name" : "getBufferCount",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iostream\/1809821-getbuffercount"
        },
        {
          "description" : "Get an array containing all the buffers in the stream.",
          "name" : "getBuffers",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iostream\/1809828-getbuffers"
        },
        {
          "description" : "",
          "name" : "getBufferWithID",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iostream\/1809834-getbufferwithid"
        },
        {
          "description" : "",
          "name" : "removeAllBuffers()",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iostream\/1809839-removeallbuffers"
        },
        {
          "description" : "",
          "name" : "removeAllBuffers()",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iostream\/1809846-removeallbuffers"
        },
        {
          "description" : "Removes a buffer from the stream. Buffers cannot be removed while the stream is open, as this will change the buffer IDs of existing buffers.",
          "name" : "removeBuffer(IOStreamBuffer *)",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iostream\/1809852-removebuffer"
        },
        {
          "description" : "Removes a buffer from the stream. Buffers cannot be removed while the stream is open, as this will change the buffer IDs of existing buffers.",
          "name" : "removeBuffer(IOStreamBufferID)",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iostream\/1809860-removebuffer"
        }
      ],
      "title" : "Managing buffers in an IOStream"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "",
          "name" : "free",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iostream\/1809867-free"
        },
        {
          "description" : "",
          "name" : "initWithBuffers",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iostream\/1809875-initwithbuffers"
        },
        {
          "description" : "",
          "name" : "withBuffers",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iostream\/1809882-withbuffers"
        }
      ],
      "title" : "Creating IOStream objects"
    },
    {
      "content" : "",
      "items" : [
        {
          "name" : "addBuffer",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iostream\/1589858-addbuffer"
        },
        {
          "name" : "addBuffers",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iostream\/1589843-addbuffers"
        },
        {
          "name" : "createQueues",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iostream\/1589877-createqueues"
        },
        {
          "name" : "dequeueInputEntry",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iostream\/1589881-dequeueinputentry"
        },
        {
          "name" : "destroyQueues",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iostream\/1589871-destroyqueues"
        },
        {
          "name" : "enqueueOutputBuffer",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iostream\/1589872-enqueueoutputbuffer"
        },
        {
          "name" : "enqueueOutputEntry",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iostream\/1589856-enqueueoutputentry"
        },
        {
          "name" : "free",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iostream\/1589852-free"
        },
        {
          "name" : "getBufferCount",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iostream\/1589838-getbuffercount"
        },
        {
          "name" : "getBufferWithID",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iostream\/1589840-getbufferwithid"
        },
        {
          "name" : "getBuffers",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iostream\/1589876-getbuffers"
        },
        {
          "name" : "getInputPort",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iostream\/1589874-getinputport"
        },
        {
          "name" : "getInputQueue",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iostream\/1589835-getinputqueue"
        },
        {
          "name" : "getInputQueueMemoryDescriptor",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iostream\/1589879-getinputqueuememorydescriptor"
        },
        {
          "name" : "getMetaClass",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iostream\/1589853-getmetaclass"
        },
        {
          "name" : "getOutputPort",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iostream\/1589854-getoutputport"
        },
        {
          "name" : "getOutputQueue",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iostream\/1589847-getoutputqueue"
        },
        {
          "name" : "getOutputQueueMemoryDescriptor",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iostream\/1589862-getoutputqueuememorydescriptor"
        },
        {
          "name" : "getStreamMode",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iostream\/1589841-getstreammode"
        },
        {
          "name" : "handleClose",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iostream\/1589873-handleclose"
        },
        {
          "name" : "handleOpen",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iostream\/1589839-handleopen"
        },
        {
          "name" : "init",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iostream\/1589846-init"
        },
        {
          "name" : "initWithBuffers",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iostream\/1589845-initwithbuffers"
        },
        {
          "name" : "inputCallback",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iostream\/1589831-inputcallback"
        },
        {
          "name" : "inputSyncCallback",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iostream\/1589880-inputsynccallback"
        },
        {
          "name" : "newUserClient",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iostream\/1589851-newuserclient"
        },
        {
          "name" : "removeAllBuffers",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iostream\/1589878-removeallbuffers"
        },
        {
          "name" : "removeBuffer",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iostream\/1589833-removebuffer"
        },
        {
          "name" : "removeBuffer",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iostream\/3516782-removebuffer"
        },
        {
          "name" : "sendOutputNotification",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iostream\/1589861-sendoutputnotification"
        },
        {
          "name" : "setInputPort",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iostream\/1589836-setinputport"
        },
        {
          "name" : "setOutputPort",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iostream\/1589866-setoutputport"
        },
        {
          "name" : "setStreamMode",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iostream\/1589870-setstreammode"
        },
        {
          "name" : "startStream",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iostream\/1589837-startstream"
        },
        {
          "name" : "stopStream",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iostream\/1589863-stopstream"
        },
        {
          "name" : "suspendStream",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iostream\/1589867-suspendstream"
        }
      ],
      "title" : "Instance Methods"
    },
    {
      "content" : "",
      "items" : [
        {
          "name" : "withBuffers",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iostream\/1589868-withbuffers"
        }
      ],
      "title" : "Type Methods"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "A generic queue designed to pass data both from the kernel to a user process and from a user process to the kernel.",
          "name" : "IOSharedDataQueue",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioshareddataqueue"
        },
        {
          "name" : "IOSharedInterruptController",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iosharedinterruptcontroller"
        },
        {
          "description" : "Provides a basis for communication between client applications and I\/O Kit objects.",
          "name" : "IOUserClient",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iouserclient"
        },
        {
          "name" : "IOStreamUserClient",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iostreamuserclient"
        },
        {
          "description" : "A class representing a data buffer that is part of an IOStream.",
          "name" : "IOStreamBuffer",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iostreambuffer"
        },
        {
          "name" : "OSAction_IOUserClient_KernelCompletion",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/osaction_iouserclient_kernelcompletion"
        },
        {
          "name" : "OSAction_IOUserClient_KernelCompletionInterface",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/osaction_iouserclient_kernelcompletioninterface"
        }
      ],
      "title" : "User-Space Interactions"
    },
    {
      "content" : "",
      "items" : [
        {
          "name" : "IOService"
        }
      ],
      "title" : "Inherits From"
    }
  ],
  "source" : "appleJSON",
  "title" : "IOStream",
  "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iostream"
}