{
  "abstract" : "Compare and swap operation, performed atomically with respect to all devices that participate in the coherency architecture of the platform.",
  "codeExamples" : [

  ],
  "contentHash" : "04f934edd32ffef9b3bdbe57ebec977721bd7466c9f5831f25a4760e4f99fb9c",
  "crawledAt" : "2025-12-09T23:48:11Z",
  "declaration" : {
    "code" : "Boolean OSCompareAndSwapPtr(void *oldValue, void *newValue, void *volatile *address);",
    "language" : "swift"
  },
  "id" : "E6AB58E8-2DCF-4718-8596-5AD2F61123B1",
  "kind" : "function",
  "language" : "occ",
  "module" : "Kernel",
  "overview" : "## Return Value\n\ntrue if newValue was written to the address.\n\n## Discussion\n\nThe OSCompareAndSwapPtr function compares the pointer-sized value at the specified address with oldVal. The value of newValue is written to the address only if oldValue and the value at the address are equal. OSCompareAndSwapPtr returns true if newValue is written to the address; otherwise, it returns false.\n\nThis function guarantees atomicity only with main system memory. It is specifically unsuitable for use on noncacheable memory such as that in devices; this function cannot guarantee atomicity, for example, on memory mapped from a PCI device. Additionally, this function incorporates a memory barrier on systems with weakly-ordered memory architectures.",
  "platforms" : [
    "macOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/kernel\/1576461-oscompareandswapptr\ncrawled: 2025-12-09T23:48:11Z\n---\n\n# OSCompareAndSwapPtr\n\n**Function**\n\nCompare and swap operation, performed atomically with respect to all devices that participate in the coherency architecture of the platform.\n\n## Declaration\n\n```swift\nBoolean OSCompareAndSwapPtr(void *oldValue, void *newValue, void *volatile *address);\n```\n\n## Parameters\n\n- **oldValue**: The pointer value to compare at address.\n- **newValue**: The pointer value to write to address if oldValue compares true.\n- **address**: The pointer-size aligned address of the data to update atomically.\n\n## Return Value\n\ntrue if newValue was written to the address.\n\n## Discussion\n\nThe OSCompareAndSwapPtr function compares the pointer-sized value at the specified address with oldVal. The value of newValue is written to the address only if oldValue and the value at the address are equal. OSCompareAndSwapPtr returns true if newValue is written to the address; otherwise, it returns false.\n\nThis function guarantees atomicity only with main system memory. It is specifically unsuitable for use on noncacheable memory such as that in devices; this function cannot guarantee atomicity, for example, on memory mapped from a PCI device. Additionally, this function incorporates a memory barrier on systems with weakly-ordered memory architectures.\n\n## Compare and Swap\n\n- **OSCompareAndSwap**: Compare and swap operation, performed atomically with respect to all devices that participate in the coherency architecture of the platform.\n- **OSCompareAndSwap64**: 64-bit compare and swap operation.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Compare and swap operation, performed atomically with respect to all devices that participate in the coherency architecture of the platform.",
          "name" : "OSCompareAndSwap",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/1576450-oscompareandswap"
        },
        {
          "description" : "64-bit compare and swap operation.",
          "name" : "OSCompareAndSwap64",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/1576485-oscompareandswap64"
        }
      ],
      "title" : "Compare and Swap"
    }
  ],
  "source" : "appleJSON",
  "title" : "OSCompareAndSwapPtr",
  "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/1576461-oscompareandswapptr"
}