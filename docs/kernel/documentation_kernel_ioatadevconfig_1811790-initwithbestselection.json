{
  "abstract" : "Handy initializer: pass the 512-byte result of the Identify Device or Identify Packet Device in endian-order for your platform (byte-swapped on PPC) and the IOATABusInfo object for the bus. The object will initialize all fields and select the best transfer modes that match on bus and device. If the return value was 0 (success or noErr), then a matching mode is supported. Examine the PIO and UDMA\/DMA fields and to generate the apropriate SET FEATURES parameters for your drive and send this initialised object to the IOATAController when requesting a speed configuration. failure means no supported transfer modes matched between bus and device info.",
  "codeExamples" : [

  ],
  "contentHash" : "5f022af25cf60a7143e235cccfc6192079cbb3ceada804a0075e88a931bc22f5",
  "crawledAt" : "2025-12-07T03:16:44Z",
  "declaration" : {
    "code" : "IOReturn initWithBestSelection(\n const UInt16 *identifyData,\n IOATABusInfo *busInfo); ",
    "language" : "swift"
  },
  "id" : "E8D05AE4-0D73-4B83-9BD6-3BFC6066B522",
  "kind" : "unknown",
  "language" : "occ",
  "module" : "Kernel",
  "overview" : "## Return Value\n\nkIOSuccess (0) when a matching transfer mode is available between the device and controller.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/kernel\/ioatadevconfig\/1811790-initwithbestselection\ncrawled: 2025-12-07T03:16:44Z\n---\n\n# initWithBestSelection\n\nHandy initializer: pass the 512-byte result of the Identify Device or Identify Packet Device in endian-order for your platform (byte-swapped on PPC) and the IOATABusInfo object for the bus. The object will initialize all fields and select the best transfer modes that match on bus and device. If the return value was 0 (success or noErr), then a matching mode is supported. Examine the PIO and UDMA\/DMA fields and to generate the apropriate SET FEATURES parameters for your drive and send this initialised object to the IOATAController when requesting a speed configuration. failure means no supported transfer modes matched between bus and device info.\n\n## Declaration\n\n```swift\nIOReturn initWithBestSelection(\n const UInt16 *identifyData,\n IOATABusInfo *busInfo); \n```\n\n## Parameters\n\n- **identifyData**: 512 bytes of data obtained from the device via IDENTIFY DEVICE or IDENTIFY PACKET DEVICE command.\n- **busInfo**: pointer to an IOATAbusInfo object obtained from a previous atanub->provideBusInfo() call.\n\n## Return Value\n\nkIOSuccess (0) when a matching transfer mode is available between the device and controller.\n\n## Miscellaneous\n\n- **atadevconfig**: static creator function.\n- **bitSigToNumeric**: converts a bit-significant field to a numerical value. Note that a bit field of 0x00 has no defined result.\n- **getDMACycleTime**\n- **getDMAMode**\n- **getPacketConfig**\n- **getPIOCycleTime**\n- **getPIOMode**\n- **getUltraMode**\n- **setDMACycleTime**\n- **setDMAMode**\n- **setPacketConfig**: For ATAPI devices, if the device asserts interrupt after the Packet Command when it is ready to accept the packet, set this value to true (mostly older devices). If the device accepts the packet only by asserting DRQ bit in status, then set this value false. Tells the bus controller whether to wait for packet acceptance or set pending interrupt.\n- **setPIOCycleTime**\n- **setPIOMode**\n- **setUltraMode**\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "static creator function.",
          "name" : "atadevconfig",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatadevconfig\/1811729-atadevconfig"
        },
        {
          "description" : "converts a bit-significant field to a numerical value. Note that a bit field of 0x00 has no defined result.",
          "name" : "bitSigToNumeric",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatadevconfig\/1811736-bitsigtonumeric"
        },
        {
          "description" : "",
          "name" : "getDMACycleTime",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatadevconfig\/1811744-getdmacycletime"
        },
        {
          "description" : "",
          "name" : "getDMAMode",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatadevconfig\/1811750-getdmamode"
        },
        {
          "description" : "",
          "name" : "getPacketConfig",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatadevconfig\/1811758-getpacketconfig"
        },
        {
          "description" : "",
          "name" : "getPIOCycleTime",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatadevconfig\/1811768-getpiocycletime"
        },
        {
          "description" : "",
          "name" : "getPIOMode",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatadevconfig\/1811774-getpiomode"
        },
        {
          "description" : "",
          "name" : "getUltraMode",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatadevconfig\/1811781-getultramode"
        },
        {
          "description" : "",
          "name" : "setDMACycleTime",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatadevconfig\/1811797-setdmacycletime"
        },
        {
          "description" : "",
          "name" : "setDMAMode",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatadevconfig\/1811803-setdmamode"
        },
        {
          "description" : "For ATAPI devices, if the device asserts interrupt after the Packet Command when it is ready to accept the packet, set this value to true (mostly older devices). If the device accepts the packet only by asserting DRQ bit in status, then set this value false. Tells the bus controller whether to wait for packet acceptance or set pending interrupt.",
          "name" : "setPacketConfig",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatadevconfig\/1811808-setpacketconfig"
        },
        {
          "description" : "",
          "name" : "setPIOCycleTime",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatadevconfig\/1811814-setpiocycletime"
        },
        {
          "description" : "",
          "name" : "setPIOMode",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatadevconfig\/1811821-setpiomode"
        },
        {
          "description" : "",
          "name" : "setUltraMode",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatadevconfig\/1811827-setultramode"
        }
      ],
      "title" : "Miscellaneous"
    }
  ],
  "source" : "appleJSON",
  "title" : "initWithBestSelection",
  "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatadevconfig\/1811790-initwithbestselection"
}