{
  "codeExamples" : [

  ],
  "contentHash" : "9f060fbac165fccea05a568cec4912eb9875c02c57e2d4d518e6b96e7231c092",
  "crawledAt" : "2025-12-05T01:41:38Z",
  "declaration" : {
    "code" : "class IOATACommand : IOCommand",
    "language" : "swift"
  },
  "id" : "0EA12CC9-5F50-40A6-9D42-C593C19AA94A",
  "kind" : "class",
  "language" : "occ",
  "module" : "Kernel",
  "overview" : "## Overview\n\nCommand structure superclass, created and freed only by IOATADevice objects populated by disk device drivers with command parameters then submitted for operation to their IOATADevice provider for execution.\n\nIOATACommand is a virtual class, a concrete subclass contains the methods and fields needed by IOATAControllers. Subclasses may be specific to particular controller hardware. Disk device drivers will only have visibility to this interface and may not subclass this object. Disk device drivers should instead make use of the void* refcon field which the controllers will not touch",
  "platforms" : [
    "macOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/kernel\/ioatacommand\ncrawled: 2025-12-05T01:41:38Z\n---\n\n# IOATACommand\n\n**Class**\n\n## Declaration\n\n```swift\nclass IOATACommand : IOCommand\n```\n\n## Overview\n\nCommand structure superclass, created and freed only by IOATADevice objects populated by disk device drivers with command parameters then submitted for operation to their IOATADevice provider for execution.\n\nIOATACommand is a virtual class, a concrete subclass contains the methods and fields needed by IOATAControllers. Subclasses may be specific to particular controller hardware. Disk device drivers will only have visibility to this interface and may not subclass this object. Disk device drivers should instead make use of the void* refcon field which the controllers will not touch\n\n## Miscellaneous\n\n- **getActualTransfer**: The byte count on the ending result, as best as can be determined by the controller. May be zero, but partial transfer may have occurred on error in some cases.\n- **getBuffer**: the IOMemoryDescriptor used in this transaction.\n- **getCommandInUse**: returns true if IOATAController is still in control of the command.\n- **getCylHi**: Taskfile access. Registers are named in accordance with ATA Standards conventions\n- **getCylLo**: Taskfile access. Registers are named in accordance with ATA Standards conventions\n- **getDevice_Head**: Taskfile access. Registers are named in accordance with ATA Standards conventions\n- **getEndErrorReg**: If the error bit was set in the status register, the value of the error register is returned at the end of a command.\n- **getEndStatusReg**: the value of the status register on the end of the command.\n- **getErrorReg**: Taskfile access. Registers are named in accordance with ATA Standards conventions\n- **getResult**: IOReturn value of the result of this command. ATA family errors are defined in IOATATypes.h\n- **getSectorCount**: Taskfile access. Registers are named in accordance with ATA Standards conventions\n- **getSectorNumber**: Taskfile access. Registers are named in accordance with ATA Standards conventions\n- **getStatus**: Taskfile access. Registers are named in accordance with ATA Standards conventions\n- **setBuffer**: set the IIOMemoryDescriptor for this transaction.\n- **setByteCount**: set the byte count for this transaction. Should agree with the device command and the memory descriptor in use.\n- **setCallbackPtr**: set the function pointer to call when this command completes.\n- **setCommand**: Taskfile access. Registers are named in accordance with ATA Standards conventions\n- **setCylHi**: Taskfile access. Registers are named in accordance with ATA Standards conventions\n- **setCylLo**: Taskfile access. Registers are named in accordance with ATA Standards conventions\n- **setDevice_Head**: Taskfile access. Registers are named in accordance with ATA Standards conventions\n- **setFeatures**: Taskfile access. Registers are named in accordance with ATA Standards conventions\n- **setFlags**: set the flags for this command, as defined in IOATATypes.\n- **setLBA28**: convenience method that sets the taskfile registers into a 28-bit LBA address, with unit selected and LBA bit set. return err if param out of range, return kIOSuccess (kATANoErr) = 0 on return if successful\n- **setOpcode**: command opcode as defined in IOATATypes.\n- **setPacketCommand**: ATAPI command packet max size is 16 bytes. Makes deep copy of data.\n- **setPosition**: used to set an offset into the memory descriptor for this transfer.\n- **setRegMask**: used when accessing registers or reading registers on an error result. Mask is defined in IOATATypes.h\n- **setSectorCount**: Taskfile access. Registers are named in accordance with ATA Standards conventions\n- **setSectorNumber**: Taskfile access. Registers are named in accordance with ATA Standards conventions\n- **setTimeoutMS**: how long to allow this command to complete, in milliseconds, once issued to the hardware. if the time period expires, this command will return with a timeout error.\n- **setTransferChunkSize**: set the size of transfer between intervening interrupts. necessary when doing PIO Read\/Write Multiple, etc. so the controller knows when to expect an interrupt during multi-sector data transfers.\n- **setUnit**: set the unit number for this command.\n- **zeroCommand**: set to blank state, MUST call prior to re-use of this object\n\n## DataTypes\n\n- **ExpansionData**\n\n## Instance Variables\n\n- **refCon2**: for use by disk drivers, clients of IOATADevice only. IOATADevice and IOATAControllers shall not use this field in any manner.\n- **refCon**: for use by disk drivers, clients of IOATADevice only. IOATADevice and IOATAControllers shall not use this field in any manner.\n- **fExpansionData**\n\n## Instance Methods\n\n- **free**\n- **getActualTransfer**\n- **getAltStatus**\n- **getBuffer**\n- **getCommandInUse**\n- **getCylHi**\n- **getCylLo**\n- **getDataReg**\n- **getDevice_Head**\n- **getEndErrorReg**\n- **getEndStatusReg**\n- **getErrorReg**\n- **getExtendedLBA**\n- **getMetaClass**\n- **getResult**\n- **getSectorCount**\n- **getSectorNumber**\n- **getStatus**\n- **init**\n- **setBuffer**\n- **setByteCount**\n- **setCallbackPtr**\n- **setCommand**\n- **setControl**\n- **setCylHi**\n- **setCylLo**\n- **setDataReg**\n- **setDevice_Head**\n- **setEndResult**\n- **setFeatures**\n- **setFlags**\n- **setLBA28**\n- **setOpcode**\n- **setPacketCommand**\n- **setPosition**\n- **setRegMask**\n- **setSectorCount**\n- **setSectorNumber**\n- **setTimeoutMS**\n- **setTransferChunkSize**\n- **setUnit**\n- **zeroCommand**\n\n## Inherits From\n\n- IOCommand\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "The byte count on the ending result, as best as can be determined by the controller. May be zero, but partial transfer may have occurred on error in some cases.",
          "name" : "getActualTransfer",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatacommand\/1813827-getactualtransfer"
        },
        {
          "description" : "the IOMemoryDescriptor used in this transaction.",
          "name" : "getBuffer",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatacommand\/1813832-getbuffer"
        },
        {
          "description" : "returns true if IOATAController is still in control of the command.",
          "name" : "getCommandInUse",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatacommand\/1813837-getcommandinuse"
        },
        {
          "description" : "Taskfile access. Registers are named in accordance with ATA Standards conventions",
          "name" : "getCylHi",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatacommand\/1813841-getcylhi"
        },
        {
          "description" : "Taskfile access. Registers are named in accordance with ATA Standards conventions",
          "name" : "getCylLo",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatacommand\/1813846-getcyllo"
        },
        {
          "description" : "Taskfile access. Registers are named in accordance with ATA Standards conventions",
          "name" : "getDevice_Head",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatacommand\/1813849-getdevice_head"
        },
        {
          "description" : "If the error bit was set in the status register, the value of the error register is returned at the end of a command.",
          "name" : "getEndErrorReg",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatacommand\/1813854-getenderrorreg"
        },
        {
          "description" : "the value of the status register on the end of the command.",
          "name" : "getEndStatusReg",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatacommand\/1813858-getendstatusreg"
        },
        {
          "description" : "Taskfile access. Registers are named in accordance with ATA Standards conventions",
          "name" : "getErrorReg",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatacommand\/1813861-geterrorreg"
        },
        {
          "description" : "IOReturn value of the result of this command. ATA family errors are defined in IOATATypes.h",
          "name" : "getResult",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatacommand\/1813865-getresult"
        },
        {
          "description" : "Taskfile access. Registers are named in accordance with ATA Standards conventions",
          "name" : "getSectorCount",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatacommand\/1813869-getsectorcount"
        },
        {
          "description" : "Taskfile access. Registers are named in accordance with ATA Standards conventions",
          "name" : "getSectorNumber",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatacommand\/1813872-getsectornumber"
        },
        {
          "description" : "Taskfile access. Registers are named in accordance with ATA Standards conventions",
          "name" : "getStatus",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatacommand\/1813875-getstatus"
        },
        {
          "description" : "set the IIOMemoryDescriptor for this transaction.",
          "name" : "setBuffer",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatacommand\/1813877-setbuffer"
        },
        {
          "description" : "set the byte count for this transaction. Should agree with the device command and the memory descriptor in use.",
          "name" : "setByteCount",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatacommand\/1813880-setbytecount"
        },
        {
          "description" : "set the function pointer to call when this command completes.",
          "name" : "setCallbackPtr",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatacommand\/1813883-setcallbackptr"
        },
        {
          "description" : "Taskfile access. Registers are named in accordance with ATA Standards conventions",
          "name" : "setCommand",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatacommand\/1813885-setcommand"
        },
        {
          "description" : "Taskfile access. Registers are named in accordance with ATA Standards conventions",
          "name" : "setCylHi",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatacommand\/1813887-setcylhi"
        },
        {
          "description" : "Taskfile access. Registers are named in accordance with ATA Standards conventions",
          "name" : "setCylLo",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatacommand\/1813888-setcyllo"
        },
        {
          "description" : "Taskfile access. Registers are named in accordance with ATA Standards conventions",
          "name" : "setDevice_Head",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatacommand\/1813890-setdevice_head"
        },
        {
          "description" : "Taskfile access. Registers are named in accordance with ATA Standards conventions",
          "name" : "setFeatures",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatacommand\/1813892-setfeatures"
        },
        {
          "description" : "set the flags for this command, as defined in IOATATypes.",
          "name" : "setFlags",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatacommand\/1813894-setflags"
        },
        {
          "description" : "convenience method that sets the taskfile registers into a 28-bit LBA address, with unit selected and LBA bit set. return err if param out of range, return kIOSuccess (kATANoErr) = 0 on return if successful",
          "name" : "setLBA28",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatacommand\/1813896-setlba28"
        },
        {
          "description" : "command opcode as defined in IOATATypes.",
          "name" : "setOpcode",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatacommand\/1813898-setopcode"
        },
        {
          "description" : "ATAPI command packet max size is 16 bytes. Makes deep copy of data.",
          "name" : "setPacketCommand",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatacommand\/1813900-setpacketcommand"
        },
        {
          "description" : "used to set an offset into the memory descriptor for this transfer.",
          "name" : "setPosition",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatacommand\/1813902-setposition"
        },
        {
          "description" : "used when accessing registers or reading registers on an error result. Mask is defined in IOATATypes.h",
          "name" : "setRegMask",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatacommand\/1813904-setregmask"
        },
        {
          "description" : "Taskfile access. Registers are named in accordance with ATA Standards conventions",
          "name" : "setSectorCount",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatacommand\/1813906-setsectorcount"
        },
        {
          "description" : "Taskfile access. Registers are named in accordance with ATA Standards conventions",
          "name" : "setSectorNumber",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatacommand\/1813908-setsectornumber"
        },
        {
          "description" : "how long to allow this command to complete, in milliseconds, once issued to the hardware. if the time period expires, this command will return with a timeout error.",
          "name" : "setTimeoutMS",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatacommand\/1813910-settimeoutms"
        },
        {
          "description" : "set the size of transfer between intervening interrupts. necessary when doing PIO Read\/Write Multiple, etc. so the controller knows when to expect an interrupt during multi-sector data transfers.",
          "name" : "setTransferChunkSize",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatacommand\/1813912-settransferchunksize"
        },
        {
          "description" : "set the unit number for this command.",
          "name" : "setUnit",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatacommand\/1813914-setunit"
        },
        {
          "description" : "set to blank state, MUST call prior to re-use of this object",
          "name" : "zeroCommand",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatacommand\/1813915-zerocommand"
        }
      ],
      "title" : "Miscellaneous"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "",
          "name" : "ExpansionData",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioservice\/expansiondata"
        }
      ],
      "title" : "DataTypes"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "for use by disk drivers, clients of IOATADevice only. IOATADevice and IOATAControllers shall not use this field in any manner.",
          "name" : "refCon2",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatacommand\/refcon2"
        },
        {
          "description" : "for use by disk drivers, clients of IOATADevice only. IOATADevice and IOATAControllers shall not use this field in any manner.",
          "name" : "refCon",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatacommand\/refcon"
        },
        {
          "description" : "",
          "name" : "fExpansionData",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatacommand\/fexpansiondata"
        }
      ],
      "title" : "Instance Variables"
    },
    {
      "content" : "",
      "items" : [
        {
          "name" : "free",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatacommand\/1392056-free"
        },
        {
          "name" : "getActualTransfer",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatacommand\/1392104-getactualtransfer"
        },
        {
          "name" : "getAltStatus",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatacommand\/1392045-getaltstatus"
        },
        {
          "name" : "getBuffer",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatacommand\/1392172-getbuffer"
        },
        {
          "name" : "getCommandInUse",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatacommand\/1392170-getcommandinuse"
        },
        {
          "name" : "getCylHi",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatacommand\/1392083-getcylhi"
        },
        {
          "name" : "getCylLo",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatacommand\/1392063-getcyllo"
        },
        {
          "name" : "getDataReg",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatacommand\/1392069-getdatareg"
        },
        {
          "name" : "getDevice_Head",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatacommand\/1392079-getdevice_head"
        },
        {
          "name" : "getEndErrorReg",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatacommand\/1392061-getenderrorreg"
        },
        {
          "name" : "getEndStatusReg",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatacommand\/1392054-getendstatusreg"
        },
        {
          "name" : "getErrorReg",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatacommand\/1392123-geterrorreg"
        },
        {
          "name" : "getExtendedLBA",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatacommand\/1392043-getextendedlba"
        },
        {
          "name" : "getMetaClass",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatacommand\/1392058-getmetaclass"
        },
        {
          "name" : "getResult",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatacommand\/1392142-getresult"
        },
        {
          "name" : "getSectorCount",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatacommand\/1392151-getsectorcount"
        },
        {
          "name" : "getSectorNumber",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatacommand\/1392091-getsectornumber"
        },
        {
          "name" : "getStatus",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatacommand\/1392158-getstatus"
        },
        {
          "name" : "init",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatacommand\/1392118-init"
        },
        {
          "name" : "setBuffer",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatacommand\/1392139-setbuffer"
        },
        {
          "name" : "setByteCount",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatacommand\/1392113-setbytecount"
        },
        {
          "name" : "setCallbackPtr",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatacommand\/1392047-setcallbackptr"
        },
        {
          "name" : "setCommand",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatacommand\/1392106-setcommand"
        },
        {
          "name" : "setControl",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatacommand\/1392134-setcontrol"
        },
        {
          "name" : "setCylHi",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatacommand\/1392065-setcylhi"
        },
        {
          "name" : "setCylLo",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatacommand\/1392087-setcyllo"
        },
        {
          "name" : "setDataReg",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatacommand\/1392111-setdatareg"
        },
        {
          "name" : "setDevice_Head",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatacommand\/1392126-setdevice_head"
        },
        {
          "name" : "setEndResult",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatacommand\/1392100-setendresult"
        },
        {
          "name" : "setFeatures",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatacommand\/1392154-setfeatures"
        },
        {
          "name" : "setFlags",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatacommand\/1392168-setflags"
        },
        {
          "name" : "setLBA28",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatacommand\/1392049-setlba28"
        },
        {
          "name" : "setOpcode",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatacommand\/1392166-setopcode"
        },
        {
          "name" : "setPacketCommand",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatacommand\/1392097-setpacketcommand"
        },
        {
          "name" : "setPosition",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatacommand\/1392077-setposition"
        },
        {
          "name" : "setRegMask",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatacommand\/1392075-setregmask"
        },
        {
          "name" : "setSectorCount",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatacommand\/1392144-setsectorcount"
        },
        {
          "name" : "setSectorNumber",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatacommand\/1392067-setsectornumber"
        },
        {
          "name" : "setTimeoutMS",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatacommand\/1392093-settimeoutms"
        },
        {
          "name" : "setTransferChunkSize",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatacommand\/1392109-settransferchunksize"
        },
        {
          "name" : "setUnit",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatacommand\/1392116-setunit"
        },
        {
          "name" : "zeroCommand",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatacommand\/1392132-zerocommand"
        }
      ],
      "title" : "Instance Methods"
    },
    {
      "content" : "",
      "items" : [
        {
          "name" : "IOCommand"
        }
      ],
      "title" : "Inherits From"
    }
  ],
  "source" : "appleJSON",
  "title" : "IOATACommand",
  "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioatacommand"
}