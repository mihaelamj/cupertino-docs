{
  "abstract" : "Compare and swap operation, performed atomically with respect to all devices that participate in the coherency architecture of the platform.",
  "codeExamples" : [

  ],
  "contentHash" : "74bd9356654dcca99482d7338559d1c0014611b6c4ac5376d59651e891161347",
  "crawledAt" : "2025-12-09T23:48:09Z",
  "declaration" : {
    "code" : "Boolean OSCompareAndSwap(UInt32 oldValue, UInt32 newValue, volatile UInt32 *address);",
    "language" : "swift"
  },
  "id" : "5AB91462-FF69-46DF-AFD9-AA87F1682CE9",
  "kind" : "function",
  "language" : "occ",
  "module" : "Kernel",
  "overview" : "## Return Value\n\ntrue if newValue was written to the address.\n\n## Discussion\n\nThe OSCompareAndSwap function compares the value at the specified address with oldVal. The value of newValue is written to the address only if oldValue and the value at the address are equal. OSCompareAndSwap returns true if newValue is written to the address; otherwise, it returns false.\n\nThis function guarantees atomicity only with main system memory. It is specifically unsuitable for use on noncacheable memory such as that in devices; this function cannot guarantee atomicity, for example, on memory mapped from a PCI device. Additionally, this function incorporates a memory barrier on systems with weakly-ordered memory architectures.",
  "platforms" : [
    "macOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/kernel\/1576450-oscompareandswap\ncrawled: 2025-12-09T23:48:09Z\n---\n\n# OSCompareAndSwap\n\n**Function**\n\nCompare and swap operation, performed atomically with respect to all devices that participate in the coherency architecture of the platform.\n\n## Declaration\n\n```swift\nBoolean OSCompareAndSwap(UInt32 oldValue, UInt32 newValue, volatile UInt32 *address);\n```\n\n## Parameters\n\n- **oldValue**: The value to compare at address.\n- **newValue**: The value to write to address if oldValue compares true.\n- **address**: The 4-byte aligned address of the data to update atomically.\n\n## Return Value\n\ntrue if newValue was written to the address.\n\n## Discussion\n\nThe OSCompareAndSwap function compares the value at the specified address with oldVal. The value of newValue is written to the address only if oldValue and the value at the address are equal. OSCompareAndSwap returns true if newValue is written to the address; otherwise, it returns false.\n\nThis function guarantees atomicity only with main system memory. It is specifically unsuitable for use on noncacheable memory such as that in devices; this function cannot guarantee atomicity, for example, on memory mapped from a PCI device. Additionally, this function incorporates a memory barrier on systems with weakly-ordered memory architectures.\n\n## Compare and Swap\n\n- **OSCompareAndSwap64**: 64-bit compare and swap operation.\n- **OSCompareAndSwapPtr**: Compare and swap operation, performed atomically with respect to all devices that participate in the coherency architecture of the platform.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "64-bit compare and swap operation.",
          "name" : "OSCompareAndSwap64",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/1576485-oscompareandswap64"
        },
        {
          "description" : "Compare and swap operation, performed atomically with respect to all devices that participate in the coherency architecture of the platform.",
          "name" : "OSCompareAndSwapPtr",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/1576461-oscompareandswapptr"
        }
      ],
      "title" : "Compare and Swap"
    }
  ],
  "source" : "appleJSON",
  "title" : "OSCompareAndSwap",
  "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/1576450-oscompareandswap"
}