{
  "abstract" : "Replace personalities in IOCatalog with those provided.",
  "codeExamples" : [

  ],
  "contentHash" : "0c0f80aa00948a9636b53abc1eae3f68e595704744e512e13e00e681d0a77fa7",
  "crawledAt" : "2025-12-07T00:07:54Z",
  "declaration" : {
    "code" : "bool resetAndAddDrivers(\n OSArray *drivers,\n bool doNubMatching = true); ",
    "language" : "swift"
  },
  "id" : "D6A13467-733E-4D68-BC37-1063848EE130",
  "kind" : "unknown",
  "language" : "occ",
  "module" : "Kernel",
  "overview" : "## Overview\n\nResets the catalogue with a new set of drivers, preserving matching originals to keep wired memory usage down.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/kernel\/iocatalogue\/1811349-resetandadddrivers\ncrawled: 2025-12-07T00:07:54Z\n---\n\n# resetAndAddDrivers\n\nReplace personalities in IOCatalog with those provided.\n\n## Declaration\n\n```swift\nbool resetAndAddDrivers(\n OSArray *drivers,\n bool doNubMatching = true); \n```\n\n## Overview\n\nResets the catalogue with a new set of drivers, preserving matching originals to keep wired memory usage down.\n\n## Miscellaneous\n\n- **addDrivers**: Adds an array of driver personalities to the database.\n- **findDrivers(IOService *, SInt32 *)**: This is the primary entry point for IOService.\n- **findDrivers(OSDictionary *, SInt32 *)**: A more general purpose interface which allows one to retreive driver personalities based the intersection of the 'matching' dictionary and the personality's own property list.\n- **free**: Cleans up the database and deallocates memory allocated at initialization. This is never called in normal operation of the system.\n- **getGenerationCount**: Get the current generation count of the database.\n- **init**: Initializes the database object.\n- **initialize**: Creates and initializes the database object and poputates it with in-kernel driver personalities.\n- **isModuleLoaded**: Reports if a kernel module has been loaded for a particular personality.\n- **isModuleLoaded(const char *)**: Reports if a kernel module has been loaded.\n- **isModuleLoaded(OSString *)**: Reports if a kernel module has been loaded.\n- **moduleHasLoaded(const char *)**: Callback function called after a IOKit dependent kernel module is loaded.\n- **moduleHasLoaded(OSString *)**: Callback function called after a IOKit dependent kernel module is loaded.\n- **removeDrivers**: Remove driver personalities from the database based on matching information provided.\n- **reset**: Return the Catalogue to its initial state.\n- **serialize**: Serializes the catalog for transport to the user.\n- **startMatching**: Starts an IOService matching thread where matching keys and values are provided by the matching dictionary.\n- **terminateDrivers**: Terminates all instances of a driver which match the contents of the matching dictionary. Does not unload module.\n- **terminateDriversForModule(const char *, bool)**: Terminates all instances of a driver which depends on a particular module and unloads the module.\n- **terminateDriversForModule(OSString *, bool)**: Terminates all instances of a driver which depends on a particular module and unloads the module.\n- **unloadModule**: Unloads the reqested module if no driver instances are currently depending on it.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Adds an array of driver personalities to the database.",
          "name" : "addDrivers",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iocatalogue\/1811204-adddrivers"
        },
        {
          "description" : "This is the primary entry point for IOService.",
          "name" : "findDrivers(IOService *, SInt32 *)",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iocatalogue\/1811225-finddrivers"
        },
        {
          "description" : "A more general purpose interface which allows one to retreive driver personalities based the intersection of the 'matching' dictionary and the personality's own property list.",
          "name" : "findDrivers(OSDictionary *, SInt32 *)",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iocatalogue\/1811242-finddrivers"
        },
        {
          "description" : "Cleans up the database and deallocates memory allocated at initialization. This is never called in normal operation of the system.",
          "name" : "free",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iocatalogue\/1811255-free"
        },
        {
          "description" : "Get the current generation count of the database.",
          "name" : "getGenerationCount",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iocatalogue\/1811265-getgenerationcount"
        },
        {
          "description" : "Initializes the database object.",
          "name" : "init",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iocatalogue\/1811279-init"
        },
        {
          "description" : "Creates and initializes the database object and poputates it with in-kernel driver personalities.",
          "name" : "initialize",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iocatalogue\/1811287-initialize"
        },
        {
          "description" : "Reports if a kernel module has been loaded for a particular personality.",
          "name" : "isModuleLoaded",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iocatalogue\/1811295-ismoduleloaded"
        },
        {
          "description" : "Reports if a kernel module has been loaded.",
          "name" : "isModuleLoaded(const char *)",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iocatalogue\/1811303-ismoduleloaded"
        },
        {
          "description" : "Reports if a kernel module has been loaded.",
          "name" : "isModuleLoaded(OSString *)",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iocatalogue\/1811312-ismoduleloaded"
        },
        {
          "description" : "Callback function called after a IOKit dependent kernel module is loaded.",
          "name" : "moduleHasLoaded(const char *)",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iocatalogue\/1811319-modulehasloaded"
        },
        {
          "description" : "Callback function called after a IOKit dependent kernel module is loaded.",
          "name" : "moduleHasLoaded(OSString *)",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iocatalogue\/1811324-modulehasloaded"
        },
        {
          "description" : "Remove driver personalities from the database based on matching information provided.",
          "name" : "removeDrivers",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iocatalogue\/1811332-removedrivers"
        },
        {
          "description" : "Return the Catalogue to its initial state.",
          "name" : "reset",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iocatalogue\/1811342-reset"
        },
        {
          "description" : "Serializes the catalog for transport to the user.",
          "name" : "serialize",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iocatalogue\/1811365-serialize"
        },
        {
          "description" : "Starts an IOService matching thread where matching keys and values are provided by the matching dictionary.",
          "name" : "startMatching",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iocatalogue\/1811371-startmatching"
        },
        {
          "description" : "Terminates all instances of a driver which match the contents of the matching dictionary. Does not unload module.",
          "name" : "terminateDrivers",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iocatalogue\/1811385-terminatedrivers"
        },
        {
          "description" : "Terminates all instances of a driver which depends on a particular module and unloads the module.",
          "name" : "terminateDriversForModule(const char *, bool)",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iocatalogue\/1811392-terminatedriversformodule"
        },
        {
          "description" : "Terminates all instances of a driver which depends on a particular module and unloads the module.",
          "name" : "terminateDriversForModule(OSString *, bool)",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iocatalogue\/1811401-terminatedriversformodule"
        },
        {
          "description" : "Unloads the reqested module if no driver instances are currently depending on it.",
          "name" : "unloadModule",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iocatalogue\/1811417-unloadmodule"
        }
      ],
      "title" : "Miscellaneous"
    }
  ],
  "source" : "appleJSON",
  "title" : "resetAndAddDrivers",
  "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iocatalogue\/1811349-resetandadddrivers"
}