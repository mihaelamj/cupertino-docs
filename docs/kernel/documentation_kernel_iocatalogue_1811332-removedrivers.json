{
  "abstract" : "Remove driver personalities from the database based on matching information provided.",
  "codeExamples" : [

  ],
  "contentHash" : "ac3e3bd63ff78ace6f26c50e180696e282a57f3021d2d6f03af315e1cc512bc8",
  "crawledAt" : "2025-12-06T22:43:54Z",
  "declaration" : {
    "code" : "bool removeDrivers(\n OSDictionary *matching,\n bool doNubMatching = true ); ",
    "language" : "swift"
  },
  "id" : "3C4AE985-D76B-482B-AA59-5316D9FD9E4E",
  "kind" : "unknown",
  "language" : "occ",
  "module" : "Kernel",
  "overview" : "## Return Value\n\nReturns true if personality was removed successfully. Failure is due to a memory allocation failure.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/kernel\/iocatalogue\/1811332-removedrivers\ncrawled: 2025-12-06T22:43:54Z\n---\n\n# removeDrivers\n\nRemove driver personalities from the database based on matching information provided.\n\n## Declaration\n\n```swift\nbool removeDrivers(\n OSDictionary *matching,\n bool doNubMatching = true ); \n```\n\n## Parameters\n\n- **matching**: A dictionary whose keys and values are used for matching personalities in the database. For example, a matching dictionary containing a 'IOProviderClass' key with the value 'IOPCIDevice' will remove all personalities which have the key 'IOProviderClass' equal to 'IOPCIDevice'.\n- **doNubMatchng**: Start matching process after personalities have been removed. Matching criteria is based on IOProviderClass of those personalities which were removed. This is to allow drivers which haven't been matched to match against NUB's which were blocked by the previous personalities.\n\n## Return Value\n\nReturns true if personality was removed successfully. Failure is due to a memory allocation failure.\n\n## Miscellaneous\n\n- **addDrivers**: Adds an array of driver personalities to the database.\n- **findDrivers(IOService *, SInt32 *)**: This is the primary entry point for IOService.\n- **findDrivers(OSDictionary *, SInt32 *)**: A more general purpose interface which allows one to retreive driver personalities based the intersection of the 'matching' dictionary and the personality's own property list.\n- **free**: Cleans up the database and deallocates memory allocated at initialization. This is never called in normal operation of the system.\n- **getGenerationCount**: Get the current generation count of the database.\n- **init**: Initializes the database object.\n- **initialize**: Creates and initializes the database object and poputates it with in-kernel driver personalities.\n- **isModuleLoaded**: Reports if a kernel module has been loaded for a particular personality.\n- **isModuleLoaded(const char *)**: Reports if a kernel module has been loaded.\n- **isModuleLoaded(OSString *)**: Reports if a kernel module has been loaded.\n- **moduleHasLoaded(const char *)**: Callback function called after a IOKit dependent kernel module is loaded.\n- **moduleHasLoaded(OSString *)**: Callback function called after a IOKit dependent kernel module is loaded.\n- **reset**: Return the Catalogue to its initial state.\n- **resetAndAddDrivers**: Replace personalities in IOCatalog with those provided.\n- **serialize**: Serializes the catalog for transport to the user.\n- **startMatching**: Starts an IOService matching thread where matching keys and values are provided by the matching dictionary.\n- **terminateDrivers**: Terminates all instances of a driver which match the contents of the matching dictionary. Does not unload module.\n- **terminateDriversForModule(const char *, bool)**: Terminates all instances of a driver which depends on a particular module and unloads the module.\n- **terminateDriversForModule(OSString *, bool)**: Terminates all instances of a driver which depends on a particular module and unloads the module.\n- **unloadModule**: Unloads the reqested module if no driver instances are currently depending on it.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Adds an array of driver personalities to the database.",
          "name" : "addDrivers",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iocatalogue\/1811204-adddrivers"
        },
        {
          "description" : "This is the primary entry point for IOService.",
          "name" : "findDrivers(IOService *, SInt32 *)",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iocatalogue\/1811225-finddrivers"
        },
        {
          "description" : "A more general purpose interface which allows one to retreive driver personalities based the intersection of the 'matching' dictionary and the personality's own property list.",
          "name" : "findDrivers(OSDictionary *, SInt32 *)",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iocatalogue\/1811242-finddrivers"
        },
        {
          "description" : "Cleans up the database and deallocates memory allocated at initialization. This is never called in normal operation of the system.",
          "name" : "free",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iocatalogue\/1811255-free"
        },
        {
          "description" : "Get the current generation count of the database.",
          "name" : "getGenerationCount",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iocatalogue\/1811265-getgenerationcount"
        },
        {
          "description" : "Initializes the database object.",
          "name" : "init",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iocatalogue\/1811279-init"
        },
        {
          "description" : "Creates and initializes the database object and poputates it with in-kernel driver personalities.",
          "name" : "initialize",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iocatalogue\/1811287-initialize"
        },
        {
          "description" : "Reports if a kernel module has been loaded for a particular personality.",
          "name" : "isModuleLoaded",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iocatalogue\/1811295-ismoduleloaded"
        },
        {
          "description" : "Reports if a kernel module has been loaded.",
          "name" : "isModuleLoaded(const char *)",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iocatalogue\/1811303-ismoduleloaded"
        },
        {
          "description" : "Reports if a kernel module has been loaded.",
          "name" : "isModuleLoaded(OSString *)",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iocatalogue\/1811312-ismoduleloaded"
        },
        {
          "description" : "Callback function called after a IOKit dependent kernel module is loaded.",
          "name" : "moduleHasLoaded(const char *)",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iocatalogue\/1811319-modulehasloaded"
        },
        {
          "description" : "Callback function called after a IOKit dependent kernel module is loaded.",
          "name" : "moduleHasLoaded(OSString *)",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iocatalogue\/1811324-modulehasloaded"
        },
        {
          "description" : "Return the Catalogue to its initial state.",
          "name" : "reset",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iocatalogue\/1811342-reset"
        },
        {
          "description" : "Replace personalities in IOCatalog with those provided.",
          "name" : "resetAndAddDrivers",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iocatalogue\/1811349-resetandadddrivers"
        },
        {
          "description" : "Serializes the catalog for transport to the user.",
          "name" : "serialize",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iocatalogue\/1811365-serialize"
        },
        {
          "description" : "Starts an IOService matching thread where matching keys and values are provided by the matching dictionary.",
          "name" : "startMatching",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iocatalogue\/1811371-startmatching"
        },
        {
          "description" : "Terminates all instances of a driver which match the contents of the matching dictionary. Does not unload module.",
          "name" : "terminateDrivers",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iocatalogue\/1811385-terminatedrivers"
        },
        {
          "description" : "Terminates all instances of a driver which depends on a particular module and unloads the module.",
          "name" : "terminateDriversForModule(const char *, bool)",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iocatalogue\/1811392-terminatedriversformodule"
        },
        {
          "description" : "Terminates all instances of a driver which depends on a particular module and unloads the module.",
          "name" : "terminateDriversForModule(OSString *, bool)",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iocatalogue\/1811401-terminatedriversformodule"
        },
        {
          "description" : "Unloads the reqested module if no driver instances are currently depending on it.",
          "name" : "unloadModule",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iocatalogue\/1811417-unloadmodule"
        }
      ],
      "title" : "Miscellaneous"
    }
  ],
  "source" : "appleJSON",
  "title" : "removeDrivers",
  "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iocatalogue\/1811332-removedrivers"
}