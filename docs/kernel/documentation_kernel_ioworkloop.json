{
  "codeExamples" : [

  ],
  "contentHash" : "4556e248e3add92e6fe8f957d47e96895e48938af29078906710e7173f85793f",
  "crawledAt" : "2025-12-07T00:41:14Z",
  "declaration" : {
    "code" : "class IOWorkLoop : OSObject",
    "language" : "swift"
  },
  "id" : "2D563167-4D70-4556-B736-AF869BADEB87",
  "kind" : "class",
  "language" : "occ",
  "module" : "Kernel",
  "overview" : "## Overview\n\nAn IOWorkLoop is a thread of control that is intended to be used to provide single threaded access to hardware. This class has no knowledge of the nature and type of the events that it marshals and forwards. When a device driver successfully starts (see IOService::start), it is expected to create the event sources it will need to receive events. Then a work loop is initialized and the events are added to the work loop for monitoring. In general this set up will be automated by the family superclass of the specific device.\n\nThe thread main method walks the event source linked list and messages each one requesting a work check. At this point each event source is expected to notify its registered owner that the event has occurred. After each event has been walked and each indicates that another loop isn't required (by setting the 'more' flag to false) the thread will go to sleep on a signaling semaphore.\n\nWhen an event source is registered with a work loop it is informed of the semaphore to use to wake up the loop.",
  "platforms" : [
    "macOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/kernel\/ioworkloop\ncrawled: 2025-12-07T00:41:14Z\n---\n\n# IOWorkLoop\n\n**Class**\n\n## Declaration\n\n```swift\nclass IOWorkLoop : OSObject\n```\n\n## Overview\n\nAn IOWorkLoop is a thread of control that is intended to be used to provide single threaded access to hardware. This class has no knowledge of the nature and type of the events that it marshals and forwards. When a device driver successfully starts (see IOService::start), it is expected to create the event sources it will need to receive events. Then a work loop is initialized and the events are added to the work loop for monitoring. In general this set up will be automated by the family superclass of the specific device.\n\nThe thread main method walks the event source linked list and messages each one requesting a work check. At this point each event source is expected to notify its registered owner that the event has occurred. After each event has been walked and each indicates that another loop isn't required (by setting the 'more' flag to false) the thread will go to sleep on a signaling semaphore.\n\nWhen an event source is registered with a work loop it is informed of the semaphore to use to wake up the loop.\n\n## Miscellaneous\n\n- **_maintRequest**: Synchronous implementation of addEventSource and removeEventSource functions.\n- **addEventSource**\n- **disableAllEventSources**: Calls disable() in all event sources.\n- **disableAllInterrupts**: Calls disable() in all interrupt event sources.\n- **enableAllEventSources**: Calls enable() in all event sources.\n- **enableAllInterrupts**: Calls enable() in all interrupt event sources.\n- **eventSourcePerformsWork**: Checks if the event source passed in overrides checkForWork() to perform any work. IOWorkLoop uses this to determine if the event source should be polled in runEventSources() or not.\n- **free**\n- **getThread**: Gets the workThread.\n- **inGate**: Is the current execution context holding the work-loop's gate?\n- **init**\n- **onThread**: Is the current execution context on the work thread?\n- **removeEventSource**\n- **runAction**: Single thread a call to an action with the work-loop.\n- **runEventSources**\n- **threadMain**\n- **threadMainContinuation**: Static function that calls the threadMain function.\n- **workLoop**: Factory member function to construct and intialize a work loop.\n- **workLoopWithOptions**: Factory member function to constuct and intialize a work loop.\n- **workLoopWithOptions(IOOptionBits options)**: Factory member function to constuct and intialize a work loop.\n\n## Callbacks\n\n- **Action**\n\n## DataTypes\n\n- **maintCommandEnum**\n- **ExpansionData**\n\n## Instance Variables\n\n- **workToDoLock**\n- **workToDo**\n- **workThread**\n- **reserved**\n- **loopRestart**\n- **gateLock**\n- **eventChain**\n- **controlG**\n\n## Instance Methods\n\n- **addEventSource**\n- **closeGate**\n- **disableAllEventSources**\n- **disableAllInterrupts**\n- **enableAllEventSources**\n- **enableAllInterrupts**\n- **eventSourcePerformsWork**\n- **free**\n- **getMetaClass**\n- **getThread**\n- **inGate**\n- **init**\n- **onThread**\n- **openGate**\n- **removeEventSource**\n- **runAction**\n- **runActionBlock**\n- **runEventSources**\n- **setMaximumLockTime**\n- **signalWorkAvailable**\n- **sleepGate**\n- **sleepGate**\n- **threadMain**\n- **tryCloseGate**\n- **wakeupGate**\n\n## Type Methods\n\n- **releaseEventChain**\n- **threadMainContinuation**\n- **workLoop**\n- **workLoopWithOptions**\n\n## Inherits From\n\n- OSObject\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Synchronous implementation of addEventSource and removeEventSource functions.",
          "name" : "_maintRequest",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioworkloop\/1809377-_maintrequest"
        },
        {
          "description" : "",
          "name" : "addEventSource",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioworkloop\/1809383-addeventsource"
        },
        {
          "description" : "Calls disable() in all event sources.",
          "name" : "disableAllEventSources",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioworkloop\/1809388-disablealleventsources"
        },
        {
          "description" : "Calls disable() in all interrupt event sources.",
          "name" : "disableAllInterrupts",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioworkloop\/1809396-disableallinterrupts"
        },
        {
          "description" : "Calls enable() in all event sources.",
          "name" : "enableAllEventSources",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioworkloop\/1809401-enablealleventsources"
        },
        {
          "description" : "Calls enable() in all interrupt event sources.",
          "name" : "enableAllInterrupts",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioworkloop\/1809404-enableallinterrupts"
        },
        {
          "description" : "Checks if the event source passed in overrides checkForWork() to perform any work. IOWorkLoop uses this to determine if the event source should be polled in runEventSources() or not.",
          "name" : "eventSourcePerformsWork",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioworkloop\/1809410-eventsourceperformswork"
        },
        {
          "description" : "",
          "name" : "free",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioworkloop\/1809418-free"
        },
        {
          "description" : "Gets the workThread.",
          "name" : "getThread",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioworkloop\/1809425-getthread"
        },
        {
          "description" : "Is the current execution context holding the work-loop's gate?",
          "name" : "inGate",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioworkloop\/1809434-ingate"
        },
        {
          "description" : "",
          "name" : "init",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioworkloop\/1809441-init"
        },
        {
          "description" : "Is the current execution context on the work thread?",
          "name" : "onThread",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioworkloop\/1809446-onthread"
        },
        {
          "description" : "",
          "name" : "removeEventSource",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioworkloop\/1809449-removeeventsource"
        },
        {
          "description" : "Single thread a call to an action with the work-loop.",
          "name" : "runAction",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioworkloop\/1809454-runaction"
        },
        {
          "description" : "",
          "name" : "runEventSources",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioworkloop\/1809459-runeventsources"
        },
        {
          "description" : "",
          "name" : "threadMain",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioworkloop\/1809465-threadmain"
        },
        {
          "description" : "Static function that calls the threadMain function.",
          "name" : "threadMainContinuation",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioworkloop\/1809470-threadmaincontinuation"
        },
        {
          "description" : "Factory member function to construct and intialize a work loop.",
          "name" : "workLoop",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioworkloop\/1809476-workloop"
        },
        {
          "description" : "Factory member function to constuct and intialize a work loop.",
          "name" : "workLoopWithOptions",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioworkloop\/1809483-workloopwithoptions"
        },
        {
          "description" : "Factory member function to constuct and intialize a work loop.",
          "name" : "workLoopWithOptions(IOOptionBits options)",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioworkloop\/1809488-workloopwithoptions"
        }
      ],
      "title" : "Miscellaneous"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "",
          "name" : "Action",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioworkloop\/action"
        }
      ],
      "title" : "Callbacks"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "",
          "name" : "maintCommandEnum",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioworkloop\/maintcommandenum"
        },
        {
          "description" : "",
          "name" : "ExpansionData",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioservice\/expansiondata"
        }
      ],
      "title" : "DataTypes"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "",
          "name" : "workToDoLock",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioworkloop\/worktodolock"
        },
        {
          "description" : "",
          "name" : "workToDo",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioworkloop\/worktodo"
        },
        {
          "description" : "",
          "name" : "workThread",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioworkloop\/workthread"
        },
        {
          "description" : "",
          "name" : "reserved",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioworkloop\/reserved"
        },
        {
          "description" : "",
          "name" : "loopRestart",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioworkloop\/looprestart"
        },
        {
          "description" : "",
          "name" : "gateLock",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioworkloop\/gatelock"
        },
        {
          "description" : "",
          "name" : "eventChain",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioworkloop\/eventchain"
        },
        {
          "description" : "",
          "name" : "controlG",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioworkloop\/controlg"
        }
      ],
      "title" : "Instance Variables"
    },
    {
      "content" : "",
      "items" : [
        {
          "name" : "addEventSource",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioworkloop\/1567206-addeventsource"
        },
        {
          "name" : "closeGate",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioworkloop\/1567222-closegate"
        },
        {
          "name" : "disableAllEventSources",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioworkloop\/1567211-disablealleventsources"
        },
        {
          "name" : "disableAllInterrupts",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioworkloop\/1567214-disableallinterrupts"
        },
        {
          "name" : "enableAllEventSources",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioworkloop\/1567209-enablealleventsources"
        },
        {
          "name" : "enableAllInterrupts",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioworkloop\/1567219-enableallinterrupts"
        },
        {
          "name" : "eventSourcePerformsWork",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioworkloop\/1567208-eventsourceperformswork"
        },
        {
          "name" : "free",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioworkloop\/1567200-free"
        },
        {
          "name" : "getMetaClass",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioworkloop\/1567217-getmetaclass"
        },
        {
          "name" : "getThread",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioworkloop\/1567218-getthread"
        },
        {
          "name" : "inGate",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioworkloop\/1567212-ingate"
        },
        {
          "name" : "init",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioworkloop\/1567216-init"
        },
        {
          "name" : "onThread",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioworkloop\/1567210-onthread"
        },
        {
          "name" : "openGate",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioworkloop\/1567207-opengate"
        },
        {
          "name" : "removeEventSource",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioworkloop\/1567199-removeeventsource"
        },
        {
          "name" : "runAction",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioworkloop\/1567215-runaction"
        },
        {
          "name" : "runActionBlock",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioworkloop\/2967279-runactionblock"
        },
        {
          "name" : "runEventSources",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioworkloop\/1567201-runeventsources"
        },
        {
          "name" : "setMaximumLockTime",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioworkloop\/1690627-setmaximumlocktime"
        },
        {
          "name" : "signalWorkAvailable",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioworkloop\/1567205-signalworkavailable"
        },
        {
          "name" : "sleepGate",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioworkloop\/1567220-sleepgate"
        },
        {
          "name" : "sleepGate",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioworkloop\/3516505-sleepgate"
        },
        {
          "name" : "threadMain",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioworkloop\/1567202-threadmain"
        },
        {
          "name" : "tryCloseGate",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioworkloop\/1567204-tryclosegate"
        },
        {
          "name" : "wakeupGate",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioworkloop\/1567221-wakeupgate"
        }
      ],
      "title" : "Instance Methods"
    },
    {
      "content" : "",
      "items" : [
        {
          "name" : "releaseEventChain",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioworkloop\/3603592-releaseeventchain"
        },
        {
          "name" : "threadMainContinuation",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioworkloop\/1567213-threadmaincontinuation"
        },
        {
          "name" : "workLoop",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioworkloop\/1567223-workloop"
        },
        {
          "name" : "workLoopWithOptions",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioworkloop\/1567203-workloopwithoptions"
        }
      ],
      "title" : "Type Methods"
    },
    {
      "content" : "",
      "items" : [
        {
          "name" : "OSObject"
        }
      ],
      "title" : "Inherits From"
    }
  ],
  "source" : "appleJSON",
  "title" : "IOWorkLoop",
  "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioworkloop"
}