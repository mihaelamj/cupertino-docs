{
  "codeExamples" : [
    {
      "code" : " \n ExternalConnected\n Type: bool\n IORegistry Key: kIOPMPSExternalConnectedKey\n True if computer is drawing external power\n \n ExternalChargeCapable\n Type: bool\n IORegistry Key: kIOPMPSExternalChargeCapableKey\n True if external power is capable of charging internal battery\n \n BatteryInstalled\n Type: bool\n IORegistry Key: kIOPMPSBatteryInstalledKey\n True if a battery is present; false if removed\n \n IsCharging\n Type: bool\n IORegistry Key: kIOPMPSIsChargingKey\n True if battery is charging itself from external power\n \n AtWarnLevel\n Type: bool\n IORegistry Key: kIOPMPSAtWarnLevelKey\n True if draining battery capacity and past warn level\n \n AtCriticalLevel\n Type: bool\n IORegistry Key: kIOPMPSAtCriticalLevelKey\n True if draining battery capacity and past critical level\n \n CurrentCapacity\n MaxCapacity\n Type: unsigned int\n IORegistry Key: kIOPMPSCurrentCapacityKey, kIOPMPSMaxCapacityKey\n Capacity measured in mAh\n \n TimeRemaining\n Type: int\n IORegistry Key: kIOPMPSTimeRemainingKey\n Time remaining measured in minutes\n \n Amperage\n Type: int\n IORegistry Key: kIOPMPSAmperageKey\n Current is measured in mA\n \n Voltage\n Type: unsigned int\n IORegistry Key: kIOPMPSVoltageKey\n Voltage measured in mV\n \n CycleCount\n Type: unsigned int\n IORegistry Key: kIOPMPSCycleCountKey\n Number of charge\/discharge cycles\n \n AdapterInfo\n Type: int\n IORegistry Key: kIOPMPSAdapterInfoKey\n Power adapter information\n \n Location\n Type: int\n IORegistry Key: kIOPMPSLocationKey\n Clue about battery's location in machine - Left vs. Right\n \n ErrorCondition\n Type: OSSymbol\n IORegistry Key: kIOPMPSErrorConditionKey\n String describing error state of battery\n \n Manufacturer\n Type: OSSymbol\n IORegistry Key: kIOPMPSManufacturerKey\n String describing battery manufacturer\n \n Manufactured Date\n Type: unsigned 16-bit bitfield\n IORegistry Key: kIOPMPSManufactureDateKey\n Date is published in a bitfield per the Smart Battery Data spec rev 1.1\n in section 5.1.26\n   Bits 0...4 => day (value 1-31; 5 bits)\n   Bits 5...8 => month (value 1-12; 4 bits)\n   Bits 9...15 => years since 1980 (value 0-127; 7 bits)\n \n Model\n Type: OSSymbol\n IORegistry Key: kIOPMPSModelKey\n String describing model number\n \n Serial\n Type: OSSymbol\n IORegistry Key: kIOPMPSSerialKey\n String describing serial number or unique info\n The serial number published hear bears no correspondence to the Apple serial\n number printed on each battery. This is a manufacturer serial number with\n no correlation to the printed serial number.\n \n LegacyIOBatteryInfo\n Type: OSDictionary\n IORegistry Key: kIOPMPSLegacyBatteryInfoKey\n Dictionary conforming to the OS X 10.0-10.4\n ",
      "language" : "occ"
    }
  ],
  "contentHash" : "528245578e57914add8568a9570b2748b9c4ab02d9ae7a4cb9bd625cd80b2cee",
  "crawledAt" : "2025-12-06T13:06:37Z",
  "declaration" : {
    "code" : "class IOPMPowerSource : IOService",
    "language" : "swift"
  },
  "id" : "43D1ADF0-6947-4028-A791-42A194099F3E",
  "kind" : "class",
  "language" : "occ",
  "module" : "Kernel",
  "overview" : "## Overview\n\nSee IOKit\/pwr_mgt\/IOPM.h for power source keys relevant to this class. These report-type keys are required for calls to IOPMPowerSource::setReportables(), and they define the IORegistry interface through which data is passed back up to the rest of the system.\n\nA subclassing driver that doesn't want to do anything fancy should:\n\nThe subclass driver should also initially populate its settings and call updateStatus() on launch.\n\nSettings:",
  "platforms" : [
    "macOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/kernel\/iopmpowersource\ncrawled: 2025-12-06T13:06:37Z\n---\n\n# IOPMPowerSource\n\n**Class**\n\n## Declaration\n\n```swift\nclass IOPMPowerSource : IOService\n```\n\n## Overview\n\nSee IOKit\/pwr_mgt\/IOPM.h for power source keys relevant to this class. These report-type keys are required for calls to IOPMPowerSource::setReportables(), and they define the IORegistry interface through which data is passed back up to the rest of the system.\n\nA subclassing driver that doesn't want to do anything fancy should:\n\n1. Subclass IOPMPowerSource\n2. Install its own battery change notifications or polling routine that can converse with actual battery hardware.\n3. When battery state changes, change the relevant member variables through setCurrentCapacity() style accessors.\n4. Call updateStatus() on itself when all such settings have been updated.\n\nThe subclass driver should also initially populate its settings and call updateStatus() on launch.\n\nSettings:\n\n```occ\n \n ExternalConnected\n Type: bool\n IORegistry Key: kIOPMPSExternalConnectedKey\n True if computer is drawing external power\n \n ExternalChargeCapable\n Type: bool\n IORegistry Key: kIOPMPSExternalChargeCapableKey\n True if external power is capable of charging internal battery\n \n BatteryInstalled\n Type: bool\n IORegistry Key: kIOPMPSBatteryInstalledKey\n True if a battery is present; false if removed\n \n IsCharging\n Type: bool\n IORegistry Key: kIOPMPSIsChargingKey\n True if battery is charging itself from external power\n \n AtWarnLevel\n Type: bool\n IORegistry Key: kIOPMPSAtWarnLevelKey\n True if draining battery capacity and past warn level\n \n AtCriticalLevel\n Type: bool\n IORegistry Key: kIOPMPSAtCriticalLevelKey\n True if draining battery capacity and past critical level\n \n CurrentCapacity\n MaxCapacity\n Type: unsigned int\n IORegistry Key: kIOPMPSCurrentCapacityKey, kIOPMPSMaxCapacityKey\n Capacity measured in mAh\n \n TimeRemaining\n Type: int\n IORegistry Key: kIOPMPSTimeRemainingKey\n Time remaining measured in minutes\n \n Amperage\n Type: int\n IORegistry Key: kIOPMPSAmperageKey\n Current is measured in mA\n \n Voltage\n Type: unsigned int\n IORegistry Key: kIOPMPSVoltageKey\n Voltage measured in mV\n \n CycleCount\n Type: unsigned int\n IORegistry Key: kIOPMPSCycleCountKey\n Number of charge\/discharge cycles\n \n AdapterInfo\n Type: int\n IORegistry Key: kIOPMPSAdapterInfoKey\n Power adapter information\n \n Location\n Type: int\n IORegistry Key: kIOPMPSLocationKey\n Clue about battery's location in machine - Left vs. Right\n \n ErrorCondition\n Type: OSSymbol\n IORegistry Key: kIOPMPSErrorConditionKey\n String describing error state of battery\n \n Manufacturer\n Type: OSSymbol\n IORegistry Key: kIOPMPSManufacturerKey\n String describing battery manufacturer\n \n Manufactured Date\n Type: unsigned 16-bit bitfield\n IORegistry Key: kIOPMPSManufactureDateKey\n Date is published in a bitfield per the Smart Battery Data spec rev 1.1\n in section 5.1.26\n   Bits 0...4 => day (value 1-31; 5 bits)\n   Bits 5...8 => month (value 1-12; 4 bits)\n   Bits 9...15 => years since 1980 (value 0-127; 7 bits)\n \n Model\n Type: OSSymbol\n IORegistry Key: kIOPMPSModelKey\n String describing model number\n \n Serial\n Type: OSSymbol\n IORegistry Key: kIOPMPSSerialKey\n String describing serial number or unique info\n The serial number published hear bears no correspondence to the Apple serial\n number printed on each battery. This is a manufacturer serial number with\n no correlation to the printed serial number.\n \n LegacyIOBatteryInfo\n Type: OSDictionary\n IORegistry Key: kIOPMPSLegacyBatteryInfoKey\n Dictionary conforming to the OS X 10.0-10.4\n \n```\n\n## Miscellaneous\n\n- **powerSource**: Creates a new IOPMPowerSource nub. Must be attached to IORegistry, and registered by provider.\n- **setPSProperty**\n- **updateStatus**: Must be called by physical battery controller when battery state has changed significantly.\n\n## Instance Variables\n\n- **settingsChangedSinceUpdate**\n- **properties**\n\n## Instance Methods\n\n- **adapterInfo**\n- **amperage**\n- **atCriticalLevel**\n- **atWarnLevel**\n- **batteryInstalled**\n- **capacityPercentRemaining**\n- **currentCapacity**\n- **cycleCount**\n- **errorCondition**\n- **externalChargeCapable**\n- **externalConnected**\n- **free**\n- **getMetaClass**\n- **getPSProperty**\n- **init**\n- **isCharging**\n- **legacyIOBatteryInfo**\n- **location**\n- **manufacturer**\n- **maxCapacity**\n- **model**\n- **serial**\n- **setAdapterInfo**\n- **setAmperage**\n- **setAtCriticalLevel**\n- **setAtWarnLevel**\n- **setBatteryInstalled**\n- **setCurrentCapacity**\n- **setCycleCount**\n- **setErrorCondition**\n- **setExternalChargeCapable**\n- **setExternalConnected**\n- **setIsCharging**\n- **setLegacyIOBatteryInfo**\n- **setLocation**\n- **setManufacturer**\n- **setMaxCapacity**\n- **setModel**\n- **setPSProperty**\n- **setSerial**\n- **setTimeRemaining**\n- **setVoltage**\n- **timeRemaining**\n- **updateStatus**\n- **voltage**\n\n## Type Methods\n\n- **powerSource**\n\n## Power Management\n\n- **IOACPIPlatformDevice**\n- **IOACPIPlatformExpert**\n- **IOPMPowerSourceList**\n- **IOPMrootDomain**\n- **IOPowerConnection**\n- **IOPwrController**\n- **IOACPIAddress**\n- **IOACPIAddressSpaceDescriptor**\n- **IOACPIAddressSpaceHandler**\n- **IOACPIAddressSpaceID**\n- **IOPMPowerState**\n- **acknowledgeSleepWakeNotification**\n- **gIOACPIAddressKey**\n- **gIOACPIDeviceStatusKey**\n- **gIOACPIHardwareIDKey**\n- **gIOACPIPlane**\n- **gIOACPIUniqueIDKey**\n\n## Inherits From\n\n- IOService\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Creates a new IOPMPowerSource nub. Must be attached to IORegistry, and registered by provider.",
          "name" : "powerSource",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iopmpowersource\/1809904-powersource"
        },
        {
          "description" : "",
          "name" : "setPSProperty",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iopmpowersource\/1809917-setpsproperty"
        },
        {
          "description" : "Must be called by physical battery controller when battery state has changed significantly.",
          "name" : "updateStatus",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iopmpowersource\/1809926-updatestatus"
        }
      ],
      "title" : "Miscellaneous"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "",
          "name" : "settingsChangedSinceUpdate",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iopmpowersource\/settingschangedsinceupdate"
        },
        {
          "description" : "",
          "name" : "properties",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iopmpowersource\/properties"
        }
      ],
      "title" : "Instance Variables"
    },
    {
      "content" : "",
      "items" : [
        {
          "name" : "adapterInfo",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iopmpowersource\/1543712-adapterinfo"
        },
        {
          "name" : "amperage",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iopmpowersource\/1543726-amperage"
        },
        {
          "name" : "atCriticalLevel",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iopmpowersource\/1543768-atcriticallevel"
        },
        {
          "name" : "atWarnLevel",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iopmpowersource\/1543776-atwarnlevel"
        },
        {
          "name" : "batteryInstalled",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iopmpowersource\/1543775-batteryinstalled"
        },
        {
          "name" : "capacityPercentRemaining",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iopmpowersource\/1543736-capacitypercentremaining"
        },
        {
          "name" : "currentCapacity",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iopmpowersource\/1543777-currentcapacity"
        },
        {
          "name" : "cycleCount",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iopmpowersource\/1543711-cyclecount"
        },
        {
          "name" : "errorCondition",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iopmpowersource\/1543760-errorcondition"
        },
        {
          "name" : "externalChargeCapable",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iopmpowersource\/1543708-externalchargecapable"
        },
        {
          "name" : "externalConnected",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iopmpowersource\/1543749-externalconnected"
        },
        {
          "name" : "free",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iopmpowersource\/1543728-free"
        },
        {
          "name" : "getMetaClass",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iopmpowersource\/1543720-getmetaclass"
        },
        {
          "name" : "getPSProperty",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iopmpowersource\/1543772-getpsproperty"
        },
        {
          "name" : "init",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iopmpowersource\/1543771-init"
        },
        {
          "name" : "isCharging",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iopmpowersource\/1543769-ischarging"
        },
        {
          "name" : "legacyIOBatteryInfo",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iopmpowersource\/1543735-legacyiobatteryinfo"
        },
        {
          "name" : "location",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iopmpowersource\/1543759-location"
        },
        {
          "name" : "manufacturer",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iopmpowersource\/1543716-manufacturer"
        },
        {
          "name" : "maxCapacity",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iopmpowersource\/1543724-maxcapacity"
        },
        {
          "name" : "model",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iopmpowersource\/1543766-model"
        },
        {
          "name" : "serial",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iopmpowersource\/1543709-serial"
        },
        {
          "name" : "setAdapterInfo",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iopmpowersource\/1543733-setadapterinfo"
        },
        {
          "name" : "setAmperage",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iopmpowersource\/1543739-setamperage"
        },
        {
          "name" : "setAtCriticalLevel",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iopmpowersource\/1543731-setatcriticallevel"
        },
        {
          "name" : "setAtWarnLevel",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iopmpowersource\/1543755-setatwarnlevel"
        },
        {
          "name" : "setBatteryInstalled",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iopmpowersource\/1543762-setbatteryinstalled"
        },
        {
          "name" : "setCurrentCapacity",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iopmpowersource\/1543706-setcurrentcapacity"
        },
        {
          "name" : "setCycleCount",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iopmpowersource\/1543758-setcyclecount"
        },
        {
          "name" : "setErrorCondition",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iopmpowersource\/1543748-seterrorcondition"
        },
        {
          "name" : "setExternalChargeCapable",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iopmpowersource\/1543743-setexternalchargecapable"
        },
        {
          "name" : "setExternalConnected",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iopmpowersource\/1543764-setexternalconnected"
        },
        {
          "name" : "setIsCharging",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iopmpowersource\/1543734-setischarging"
        },
        {
          "name" : "setLegacyIOBatteryInfo",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iopmpowersource\/1543714-setlegacyiobatteryinfo"
        },
        {
          "name" : "setLocation",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iopmpowersource\/1543722-setlocation"
        },
        {
          "name" : "setManufacturer",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iopmpowersource\/1543729-setmanufacturer"
        },
        {
          "name" : "setMaxCapacity",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iopmpowersource\/1543719-setmaxcapacity"
        },
        {
          "name" : "setModel",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iopmpowersource\/1543773-setmodel"
        },
        {
          "name" : "setPSProperty",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iopmpowersource\/1543767-setpsproperty"
        },
        {
          "name" : "setSerial",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iopmpowersource\/1543747-setserial"
        },
        {
          "name" : "setTimeRemaining",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iopmpowersource\/1543753-settimeremaining"
        },
        {
          "name" : "setVoltage",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iopmpowersource\/1543751-setvoltage"
        },
        {
          "name" : "timeRemaining",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iopmpowersource\/1543738-timeremaining"
        },
        {
          "name" : "updateStatus",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iopmpowersource\/1543745-updatestatus"
        },
        {
          "name" : "voltage",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iopmpowersource\/1543763-voltage"
        }
      ],
      "title" : "Instance Methods"
    },
    {
      "content" : "",
      "items" : [
        {
          "name" : "powerSource",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iopmpowersource\/1543765-powersource"
        }
      ],
      "title" : "Type Methods"
    },
    {
      "content" : "",
      "items" : [
        {
          "name" : "IOACPIPlatformDevice",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioacpiplatformdevice"
        },
        {
          "name" : "IOACPIPlatformExpert",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioacpiplatformexpert"
        },
        {
          "name" : "IOPMPowerSourceList",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iopmpowersourcelist"
        },
        {
          "name" : "IOPMrootDomain",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iopmrootdomain"
        },
        {
          "description" : "",
          "name" : "IOPowerConnection",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iopowerconnection"
        },
        {
          "name" : "IOPwrController",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iopwrcontroller"
        },
        {
          "name" : "IOACPIAddress",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioacpiaddress"
        },
        {
          "name" : "IOACPIAddressSpaceDescriptor",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioacpiaddressspacedescriptor"
        },
        {
          "name" : "IOACPIAddressSpaceHandler",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioacpiaddressspacehandler"
        },
        {
          "name" : "IOACPIAddressSpaceID",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/ioacpiaddressspaceid"
        },
        {
          "name" : "IOPMPowerState",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iopmpowerstate"
        },
        {
          "name" : "acknowledgeSleepWakeNotification",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/1579170-acknowledgesleepwakenotification"
        },
        {
          "name" : "gIOACPIAddressKey",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/gioacpiaddresskey"
        },
        {
          "name" : "gIOACPIDeviceStatusKey",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/gioacpidevicestatuskey"
        },
        {
          "name" : "gIOACPIHardwareIDKey",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/gioacpihardwareidkey"
        },
        {
          "name" : "gIOACPIPlane",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/gioacpiplane"
        },
        {
          "name" : "gIOACPIUniqueIDKey",
          "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/gioacpiuniqueidkey"
        }
      ],
      "title" : "Power Management"
    },
    {
      "content" : "",
      "items" : [
        {
          "name" : "IOService"
        }
      ],
      "title" : "Inherits From"
    }
  ],
  "source" : "appleJSON",
  "title" : "IOPMPowerSource",
  "url" : "https:\/\/developer.apple.com\/documentation\/kernel\/iopmpowersource"
}