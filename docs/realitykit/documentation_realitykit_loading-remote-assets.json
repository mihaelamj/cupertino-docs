{
  "abstract" : "Ensure assets load on all connected peers before using them.",
  "codeExamples" : [
    {
      "code" : "enum SyncMessage: String {\n    case beganAssetLoad\n    case assetLoadFinishedSuccessfully\n    case assetLoadFailed\n}\n\nprivate func notifyPeers(message: SyncMessage) {\n    do {\n        let messageData = Data(message.rawValue.utf8)\n        let messageJSON = try JSONEncoder().encode(messageData)\n        try session.send(messageJSON, toPeers: myPeers, with: .reliable)\n    } catch {\n        \/\/ Handle error here.\n    }\n}",
      "language" : "swift"
    }
  ],
  "contentHash" : "ee4af2f51c5dfd8f9b4877b3b1f8c5b102d517f337dbe2d8a8fb4d26d73ed27a",
  "crawledAt" : "2025-12-02T19:55:46Z",
  "id" : "8F346567-EF66-41AC-B76B-A6AD6D399799",
  "kind" : "article",
  "language" : "swift",
  "module" : "RealityKit",
  "overview" : "## Overview\n\nWhen a networked RealityKit app relies on assets stored on a remote server or loaded from the device’s file system outside of the app bundle, there are special precautions you must take to ensure RealityKit is able to sync those assets between peers. Because load times on different devices can vary greatly when loading assets such as 3D models, sound files, images, or movies, especially when those assets are stored on a remote server, it’s possible for network errors or other issues to prevent assets from loading on some connected peers. The host app must ensure that all exist on all peers before it attempts to add them to the synchronized RealityKit scene. If any peers are missing a resource, or are still in the process of loading a resource when the host attempts to sync with it, the sync fails and the app errors.\n\n## Assign non-bundle assets a name when loading\n\nWhen loading networked assets from a remote server or from the local file system, it’s important to specify a name for the loaded asset. RealityKit uses this name to match up and sync objects on different devices, so the same asset must have the same on all connected peers in order for RealityKit to sync correctly.\n\nWhen loading assets from the app’s bundle, RealityKit automatically assigns the asset’s name based on its filename, but when loading assets from other locations, you must specify the name manually using [doc:\/\/com.apple.RealityKit\/documentation\/RealityKit\/Entity\/load(named:in:)] or [doc:\/\/com.apple.RealityKit\/documentation\/RealityKit\/Entity\/loadAsync(named:in:)]. If your app fails to specify a name, or uses different names on different devices, RealityKit will see those assets as different entities and won’t attempt to sync them.\n\n## Load assets before you need them\n\nOne way to ensure that non-bundle assets have been successfully loaded on all peers before attempting to sync them, is to load them well before they are needed. Loading assets during app launch, before the user has a chance to start or join a multipeer session, for example, ensures that all peers load asset before they’re synced. In the case of apps with multiple or very large scenes, this approach may not be feasible, but for many apps, this is the best way to avoid issues caused by a peer’s resource load issues.\n\n## Communicate load status\n\nIf you’re not able to load all assets ahead of time, one way to ensure that all peers have finished loading assets is to broadcast a message using [doc:\/\/com.apple.documentation\/documentation\/MultipeerConnectivity\/MCSession\/send(_:toPeers:with:)] when each peer is done loading. The host app can then keep track of which peers have sent that message and only add the resources to the [doc:\/\/com.apple.RealityKit\/documentation\/RealityKit\/ARView] once all peers have notified it that they have finished loading. You can also have your app broadcast a different message when a peer is unable to load a particular asset. If a peer is unable to load an asset, the host can choose to send that peer a copy of the resource or to disconnect that peer.\n\nHere’s a simple example of sending a sync message to connected peers:\n\nFor more information on sending data between connected peers, see [doc:\/\/com.apple.documentation\/documentation\/ARKit\/creating-a-collaborative-session].\n\n## Send missing resources to peers\n\nBecause a non-bundle resource load can fail for a number of reasons, a networked RealityKit app can implement a mechanism to allow peers to request resources they’re unable to load themselves. If one peer has successfully loaded an asset, it can use [doc:\/\/com.apple.documentation\/documentation\/MultipeerConnectivity\/MCSession\/sendResource(at:withName:toPeer:withCompletionHandler:)] to send it to any other connected peer. Once any missing asset are successfully sent to the peers that need it, the host can safely add those assets to the shared RealityKit scene.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/RealityKit\/loading-remote-assets\ncrawled: 2025-12-02T19:55:46Z\n---\n\n# Loading remote assets in multiplayer apps\n\n**Article**\n\nEnsure assets load on all connected peers before using them.\n\n## Overview\n\nWhen a networked RealityKit app relies on assets stored on a remote server or loaded from the device’s file system outside of the app bundle, there are special precautions you must take to ensure RealityKit is able to sync those assets between peers. Because load times on different devices can vary greatly when loading assets such as 3D models, sound files, images, or movies, especially when those assets are stored on a remote server, it’s possible for network errors or other issues to prevent assets from loading on some connected peers. The host app must ensure that all exist on all peers before it attempts to add them to the synchronized RealityKit scene. If any peers are missing a resource, or are still in the process of loading a resource when the host attempts to sync with it, the sync fails and the app errors.\n\n## Assign non-bundle assets a name when loading\n\nWhen loading networked assets from a remote server or from the local file system, it’s important to specify a name for the loaded asset. RealityKit uses this name to match up and sync objects on different devices, so the same asset must have the same on all connected peers in order for RealityKit to sync correctly.\n\nWhen loading assets from the app’s bundle, RealityKit automatically assigns the asset’s name based on its filename, but when loading assets from other locations, you must specify the name manually using [doc:\/\/com.apple.RealityKit\/documentation\/RealityKit\/Entity\/load(named:in:)] or [doc:\/\/com.apple.RealityKit\/documentation\/RealityKit\/Entity\/loadAsync(named:in:)]. If your app fails to specify a name, or uses different names on different devices, RealityKit will see those assets as different entities and won’t attempt to sync them.\n\n## Load assets before you need them\n\nOne way to ensure that non-bundle assets have been successfully loaded on all peers before attempting to sync them, is to load them well before they are needed. Loading assets during app launch, before the user has a chance to start or join a multipeer session, for example, ensures that all peers load asset before they’re synced. In the case of apps with multiple or very large scenes, this approach may not be feasible, but for many apps, this is the best way to avoid issues caused by a peer’s resource load issues.\n\n## Communicate load status\n\nIf you’re not able to load all assets ahead of time, one way to ensure that all peers have finished loading assets is to broadcast a message using [doc:\/\/com.apple.documentation\/documentation\/MultipeerConnectivity\/MCSession\/send(_:toPeers:with:)] when each peer is done loading. The host app can then keep track of which peers have sent that message and only add the resources to the [doc:\/\/com.apple.RealityKit\/documentation\/RealityKit\/ARView] once all peers have notified it that they have finished loading. You can also have your app broadcast a different message when a peer is unable to load a particular asset. If a peer is unable to load an asset, the host can choose to send that peer a copy of the resource or to disconnect that peer.\n\nHere’s a simple example of sending a sync message to connected peers:\n\n```swift\nenum SyncMessage: String {\n    case beganAssetLoad\n    case assetLoadFinishedSuccessfully\n    case assetLoadFailed\n}\n\nprivate func notifyPeers(message: SyncMessage) {\n    do {\n        let messageData = Data(message.rawValue.utf8)\n        let messageJSON = try JSONEncoder().encode(messageData)\n        try session.send(messageJSON, toPeers: myPeers, with: .reliable)\n    } catch {\n        \/\/ Handle error here.\n    }\n}\n```\n\nFor more information on sending data between connected peers, see [doc:\/\/com.apple.documentation\/documentation\/ARKit\/creating-a-collaborative-session].\n\n## Send missing resources to peers\n\nBecause a non-bundle resource load can fail for a number of reasons, a networked RealityKit app can implement a mechanism to allow peers to request resources they’re unable to load themselves. If one peer has successfully loaded an asset, it can use [doc:\/\/com.apple.documentation\/documentation\/MultipeerConnectivity\/MCSession\/sendResource(at:withName:toPeer:withCompletionHandler:)] to send it to any other connected peer. Once any missing asset are successfully sent to the peers that need it, the host can safely add those assets to the shared RealityKit scene.\n\n## Related Documentation\n\n- **load(named:in:)**: Returns an entity by synchronously loading it from a bundle.\n- **loadAsync(named:in:)**: Returns a load request that creates an entity by asynchronously loading it from a bundle.\n- **Loading entities from a file**: Retrieve an entity from storage on disk using a synchronous or an asynchronous load operation.\n\n## Multipeer synchronization\n\n- **MultipeerConnectivityService**: A service that provides scene synchronization among all peers in a multipeer connectivity session.\n- **NetworkCompatibilityToken**: An opaque token used to check the networking compatibility between two peers in a multipeer connection.\n- **NetworkCompatibilityToken.Compatibility**: Indicates whether two devices running RealityKit are compatible and able to connect and sync scenes.\n- **TransientComponent**: An interface for components that aren’t saved to file or cloned.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Returns an entity by synchronously loading it from a bundle.",
          "name" : "load(named:in:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/RealityKit\/Entity\/load(named:in:)"
        },
        {
          "description" : "Returns a load request that creates an entity by asynchronously loading it from a bundle.",
          "name" : "loadAsync(named:in:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/RealityKit\/Entity\/loadAsync(named:in:)"
        },
        {
          "description" : "Retrieve an entity from storage on disk using a synchronous or an asynchronous load operation.",
          "name" : "Loading entities from a file",
          "url" : "https:\/\/developer.apple.com\/documentation\/RealityKit\/loading-entities-from-a-file"
        }
      ],
      "title" : "Related Documentation"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "A service that provides scene synchronization among all peers in a multipeer connectivity session.",
          "name" : "MultipeerConnectivityService",
          "url" : "https:\/\/developer.apple.com\/documentation\/RealityKit\/MultipeerConnectivityService"
        },
        {
          "description" : "An opaque token used to check the networking compatibility between two peers in a multipeer connection.",
          "name" : "NetworkCompatibilityToken",
          "url" : "https:\/\/developer.apple.com\/documentation\/RealityKit\/NetworkCompatibilityToken"
        },
        {
          "description" : "Indicates whether two devices running RealityKit are compatible and able to connect and sync scenes.",
          "name" : "NetworkCompatibilityToken.Compatibility",
          "url" : "https:\/\/developer.apple.com\/documentation\/RealityKit\/NetworkCompatibilityToken\/Compatibility"
        },
        {
          "description" : "An interface for components that aren’t saved to file or cloned.",
          "name" : "TransientComponent",
          "url" : "https:\/\/developer.apple.com\/documentation\/RealityKit\/TransientComponent"
        }
      ],
      "title" : "Multipeer synchronization"
    }
  ],
  "source" : "appleJSON",
  "title" : "Loading remote assets in multiplayer apps",
  "url" : "https:\/\/developer.apple.com\/documentation\/RealityKit\/loading-remote-assets"
}