{
  "abstract" : "Rotate an entity around an axis using a Component and a System.",
  "codeExamples" : [
    {
      "code" : "telescopeScene.components[RotationComponent.self] = RotationComponent()",
      "language" : "swift"
    },
    {
      "code" : "@State var axis: RotationAxis = .x\n@State var rotating: Bool = false",
      "language" : "swift"
    },
    {
      "code" : "update: { context in\n  telescope?.components[RotationComponent.self]?.rotationAxis = axis\n  telescope?.components[RotationComponent.self]?.speed = rotating ? 1.0 : 0.0\n}",
      "language" : "swift"
    },
    {
      "code" : "static let rotationQuery = EntityQuery(where: .has(RotationComponent.self))",
      "language" : "swift"
    },
    {
      "code" : "for entity in context.entities(matching: Self.rotationQuery, updatingSystemWhen: .rendering) {\n  guard let component: RotationComponent = entity.components[RotationComponent.self] else { continue }\n  if component.speed == 0 { continue }\n  entity.setOrientation(simd_quatf(angle: component.speed * Float(context.deltaTime),\n                                   axis: component.axis),\n                        relativeTo: entity)\n}",
      "language" : "swift"
    }
  ],
  "contentHash" : "3f3000cc4f1b3ff833500f05da8bd5049c06931f4b15387b01aa9cd38e53411d",
  "crawledAt" : "2025-12-02T15:31:59Z",
  "id" : "417737D3-9C27-4E48-BAFB-D5D1A6F018AE",
  "kind" : "unknown",
  "language" : "swift",
  "module" : "RealityKit",
  "overview" : "## Overview\n\nYou can use the Entity Component System (ECS) from RealityKit to apply logic to any number of entities in a scene. This sample code provides a component. The system queries scene for all entities that have that component and then rotates those entities based on the speed and axis in the component.\n\nFor more information about the ECS, see [doc:\/\/com.apple.documentation\/documentation\/visionOS\/understanding-the-realitykit-modular-architecture], and for more information about systems, see [doc:\/\/com.apple.documentation\/documentation\/RealityKit\/implementing-systems-for-entities-in-a-scene].\n\n### Add the rotation component to the entity\n\nAfter creating the entity in `ContentView` the sample adds an instance of the `RotationComponent` to the entity:\n\nBy default, the rotation speed is `0.0` and the axis of rotation is the x-axis.\n\n### Enable SwiftUI to control the animation\n\nThe `ContentView` type has two `@State` variables that control the animation:\n\n### Update the RealityKit state on SwiftUI state changes\n\nThe system calls the `RealityView` `update:` block when the `rotating` or `speed` values change.\n\n### Update the rotation of the entity on every frame\n\nThe framework calls the `RotationSystem` function [doc:\/\/com.apple.documentation\/documentation\/RealityKit\/System\/update(context:)] for each frame. The sample includes a query to quickly find entities that have the component:\n\nThis function uses `rotationQuery` to find relevant entities. The function then sets the orientation of the entities based on the values in the attached component:\n\nWhile the component’s `speed` value isn’t zero, the system animates the entity’s rotation around `axis`.\n\nThe `relativeTo:` argument specifies what coordinate system the rotation acts in. Specifying `entity` here rotates the entity around its own coordinate system. In this sample there is only one entity. In a more complex scene many interesting effects are achieved by rotating in a different coordinate system.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/RealityKit\/animated-rotation-with-a-system\ncrawled: 2025-12-02T15:31:59Z\n---\n\n# Animating entity rotation with a system\n\n**Sample Code**\n\nRotate an entity around an axis using a Component and a System.\n\n## Overview\n\nYou can use the Entity Component System (ECS) from RealityKit to apply logic to any number of entities in a scene. This sample code provides a component. The system queries scene for all entities that have that component and then rotates those entities based on the speed and axis in the component.\n\nFor more information about the ECS, see [doc:\/\/com.apple.documentation\/documentation\/visionOS\/understanding-the-realitykit-modular-architecture], and for more information about systems, see [doc:\/\/com.apple.documentation\/documentation\/RealityKit\/implementing-systems-for-entities-in-a-scene].\n\n### Add the rotation component to the entity\n\nAfter creating the entity in `ContentView` the sample adds an instance of the `RotationComponent` to the entity:\n\n```swift\ntelescopeScene.components[RotationComponent.self] = RotationComponent()\n```\n\nBy default, the rotation speed is `0.0` and the axis of rotation is the x-axis.\n\n### Enable SwiftUI to control the animation\n\nThe `ContentView` type has two `@State` variables that control the animation:\n\n```swift\n@State var axis: RotationAxis = .x\n@State var rotating: Bool = false\n```\n\n- `RotationAxis` is an enumeration with one case for each ordinal direction.\n- The `rotating` value sets the `speed` to `0.0` when `rotating` is `false`, and `1.0` when `rotating` is `true`.\n\n### Update the RealityKit state on SwiftUI state changes\n\nThe system calls the `RealityView` `update:` block when the `rotating` or `speed` values change.\n\n```swift\nupdate: { context in\n  telescope?.components[RotationComponent.self]?.rotationAxis = axis\n  telescope?.components[RotationComponent.self]?.speed = rotating ? 1.0 : 0.0\n}\n```\n\n### Update the rotation of the entity on every frame\n\nThe framework calls the `RotationSystem` function [doc:\/\/com.apple.documentation\/documentation\/RealityKit\/System\/update(context:)] for each frame. The sample includes a query to quickly find entities that have the component:\n\n```swift\nstatic let rotationQuery = EntityQuery(where: .has(RotationComponent.self))\n```\n\nThis function uses `rotationQuery` to find relevant entities. The function then sets the orientation of the entities based on the values in the attached component:\n\n```swift\nfor entity in context.entities(matching: Self.rotationQuery, updatingSystemWhen: .rendering) {\n  guard let component: RotationComponent = entity.components[RotationComponent.self] else { continue }\n  if component.speed == 0 { continue }\n  entity.setOrientation(simd_quatf(angle: component.speed * Float(context.deltaTime),\n                                   axis: component.axis),\n                        relativeTo: entity)\n}\n```\n\nWhile the component’s `speed` value isn’t zero, the system animates the entity’s rotation around `axis`.\n\nThe `relativeTo:` argument specifies what coordinate system the rotation acts in. Specifying `entity` here rotates the entity around its own coordinate system. In this sample there is only one entity. In a more complex scene many interesting effects are achieved by rotating in a different coordinate system.\n\n## System configuration\n\n- **Implementing systems for entities in a scene**: Apply behaviors and physical effects to the objects and characters in a RealityKit scene with the Entity Component System (ECS).\n- **System**: An object that affects multiple entities in every update of a RealityKit scene.\n- **SystemUpdateCondition**: A condition which causes a system to update.\n- **SceneUpdateContext**: An object that contains information about the scene to update.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Apply behaviors and physical effects to the objects and characters in a RealityKit scene with the Entity Component System (ECS).",
          "name" : "Implementing systems for entities in a scene",
          "url" : "https:\/\/developer.apple.com\/documentation\/RealityKit\/implementing-systems-for-entities-in-a-scene"
        },
        {
          "description" : "An object that affects multiple entities in every update of a RealityKit scene.",
          "name" : "System",
          "url" : "https:\/\/developer.apple.com\/documentation\/RealityKit\/System"
        },
        {
          "description" : "A condition which causes a system to update.",
          "name" : "SystemUpdateCondition",
          "url" : "https:\/\/developer.apple.com\/documentation\/RealityKit\/SystemUpdateCondition"
        },
        {
          "description" : "An object that contains information about the scene to update.",
          "name" : "SceneUpdateContext",
          "url" : "https:\/\/developer.apple.com\/documentation\/RealityKit\/SceneUpdateContext"
        }
      ],
      "title" : "System configuration"
    }
  ],
  "source" : "appleJSON",
  "title" : "Animating entity rotation with a system",
  "url" : "https:\/\/developer.apple.com\/documentation\/RealityKit\/animated-rotation-with-a-system"
}