{
  "abstract" : "Apply behaviors and physical effects to the objects and characters in a RealityKit scene with the Entity Component System (ECS).",
  "codeExamples" : [
    {
      "code" : "class MySystem: System {\n    required init(scene: Scene) { \n        \/\/ Perform required initialization or setup.\n    }\n\n    func update(context: SceneUpdateContext) {\n        \/\/ RealityKit automatically calls this on\n        \/\/ every update for every scene.\n    }\n}",
      "language" : "swift"
    },
    {
      "code" : "struct MyComponent: Component {\n    \/\/ Optionally, put any needed state here.\n}\n\nclass MySystem: System {\n\n    \/\/ Define a query to return all entities with a MyComponent.\n    private static let query = EntityQuery(where: .has(MyComponent.self))\n\n    \/\/ Initializer is required. Use an empty implementation if there's no setup needed.\n    required init(scene: Scene) { }\n\n    \/\/ Iterate through all entities containing a MyComponent.\n    func update(context: SceneUpdateContext) {\n        for entity in context.entities(\n            matching: Self.query,\n            updatingSystemWhen: .rendering\n        ) {\n            \/\/ Make per-update changes to each entity here.\n        }\n    }\n}",
      "language" : "swift"
    },
    {
      "code" : "class SystemB: RealityKit.System {\n    static var dependencies: [SystemDependency] { \n        [.after(SystemA.self),        \/\/ Run SystemB after SystemA.\n         .before(SystemC.self)]       \/\/ Run SystemB before SystemC.\n     }\n    \/\/ ... \n}",
      "language" : "swift"
    },
    {
      "code" : "MySystem.registerSystem()",
      "language" : "swift"
    }
  ],
  "contentHash" : "52d3499922348c0532f311a3357e09b63c17d57763697ebd54866c595aa1bd71",
  "crawledAt" : "2025-12-02T15:54:41Z",
  "id" : "58620078-5697-46D5-A45F-E0527A73FD01",
  "kind" : "article",
  "language" : "swift",
  "module" : "RealityKit",
  "overview" : "## Overview\n\nYou can use RealityKit’s Entity Component System (ECS) to define and apply logic for entities in a scene. Systems are especially useful for implementing behavior that affects multiple entities in your scene, like the flocking behavior for a swarm of entities representing birds. In a traditional object-oriented approach, you implement an entity’s behavior by writing code on the entity class, which runs on every instance of that class on every update. That approach can be inefficient for scene with many entities, because RealityKit calls each entity’s update method on every rendering engine tick. That is especially true if the logic for one entity depends on a state contained in other entities.\n\nWith systems, RealityKit calls only one update method as often as defined by the `updatingSystemWhen` parameter of [doc:\/\/com.apple.RealityKit\/documentation\/RealityKit\/SceneUpdateContext\/entities(matching:updatingSystemWhen:)], rather than calling an update method every scene update for each entity. A system iterates through all relevant entities every scene update and makes updates to their state as needed. Here’s how to implement your own systems.\n\n### Create a system class\n\nCreate a system by a creating a class that conforms to the [doc:\/\/com.apple.RealityKit\/documentation\/RealityKit\/System] protocol and implements two methods: [doc:\/\/com.apple.RealityKit\/documentation\/RealityKit\/System\/init(scene:)] and [doc:\/\/com.apple.RealityKit\/documentation\/RealityKit\/System\/update(context:)]. Perform the setup for your system in [doc:\/\/com.apple.RealityKit\/documentation\/RealityKit\/System\/init(scene:)], or add an empty implementation if your system doesn’t need any setup. Add the logic needed to run your system in [doc:\/\/com.apple.RealityKit\/documentation\/RealityKit\/System\/update(context:)], which RealityKit calls every frame automatically.\n\n### Retrieve entities with an entity query\n\nTo efficiently retrieve entities from a scene, use an [doc:\/\/com.apple.RealityKit\/documentation\/RealityKit\/EntityQuery], which you can use to fetch all entities, or just a subset of entities relevant to your system. While some systems operate on every entity in the scene, most only operate on a defined subset, often based on the entities’ components. A physics simulation system, for example, only needs to operate on entities that participate in the scene’s physics simulation and a rendering system only needs to operate on entities that are visible. To retrieve a subset of your scene’s entities, create a [doc:\/\/com.apple.RealityKit\/documentation\/RealityKit\/QueryPredicate] with your criteria and pass the predicate into the initializer when creating your entity query.\n\nCreate your query as a static property of your system unless your query criteria changes between update calls. If the criteria changes between update calls, create the query in your update method. Use the entity query with [doc:\/\/com.apple.RealityKit\/documentation\/RealityKit\/SceneUpdateContext\/entities(matching:updatingSystemWhen:)] in your [doc:\/\/com.apple.RealityKit\/documentation\/RealityKit\/System\/update(context:)] method to iterate over all the entities that your system depends on.\n\n### Create and add components in Reality Composer Pro\n\nIf you use a Reality Composer Pro package in your project, you can create new components within the editor by selecting an entity, clicking the Add Component button, and then selecting the New Component option. This creates a Swift template for the new component, which you can then edit in Xcode.\n\nTo add a custom component onto an entity, define the custom component in a file in your Reality Composer Pro package. Select the entity you want to add the custom component to, click the Add Component button, then select the name of your custom component. This entity then responds and behaves according to the same systems that you wrote to query for the custom component.\n\n### Specify system dependencies\n\nIf a system relies on another system to function, or if you need to specify the update order for multiple systems, declare a [doc:\/\/com.apple.RealityKit\/documentation\/RealityKit\/System\/dependencies] array in your system. To tell RealityKit that a dependency must update before your system, use the [doc:\/\/com.apple.RealityKit\/documentation\/RealityKit\/SystemDependency\/before(_:)] enumeration case, passing the other system as a parameter. For dependencies that must update after your system, use [doc:\/\/com.apple.RealityKit\/documentation\/RealityKit\/SystemDependency\/after(_:)], instead.\n\n### Register the system\n\nYou don’t create [doc:\/\/com.apple.RealityKit\/documentation\/RealityKit\/System] instances manually. RealityKit creates them for you, but only if you tell RealityKit about your system by calling its [doc:\/\/com.apple.RealityKit\/documentation\/RealityKit\/System\/registerSystem()] method before displaying your app’s [doc:\/\/com.apple.RealityKit\/documentation\/RealityKit\/ARView]. Once you’ve registered your system, RealityKit automatically creates an instance on your system for every active scene, then repeatedly calls its [doc:\/\/com.apple.RealityKit\/documentation\/RealityKit\/System\/update(context:)] method every scene update.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/RealityKit\/implementing-systems-for-entities-in-a-scene\ncrawled: 2025-12-02T15:54:41Z\n---\n\n# Implementing systems for entities in a scene\n\n**Article**\n\nApply behaviors and physical effects to the objects and characters in a RealityKit scene with the Entity Component System (ECS).\n\n## Overview\n\nYou can use RealityKit’s Entity Component System (ECS) to define and apply logic for entities in a scene. Systems are especially useful for implementing behavior that affects multiple entities in your scene, like the flocking behavior for a swarm of entities representing birds. In a traditional object-oriented approach, you implement an entity’s behavior by writing code on the entity class, which runs on every instance of that class on every update. That approach can be inefficient for scene with many entities, because RealityKit calls each entity’s update method on every rendering engine tick. That is especially true if the logic for one entity depends on a state contained in other entities.\n\nWith systems, RealityKit calls only one update method as often as defined by the `updatingSystemWhen` parameter of [doc:\/\/com.apple.RealityKit\/documentation\/RealityKit\/SceneUpdateContext\/entities(matching:updatingSystemWhen:)], rather than calling an update method every scene update for each entity. A system iterates through all relevant entities every scene update and makes updates to their state as needed. Here’s how to implement your own systems.\n\n### Create a system class\n\nCreate a system by a creating a class that conforms to the [doc:\/\/com.apple.RealityKit\/documentation\/RealityKit\/System] protocol and implements two methods: [doc:\/\/com.apple.RealityKit\/documentation\/RealityKit\/System\/init(scene:)] and [doc:\/\/com.apple.RealityKit\/documentation\/RealityKit\/System\/update(context:)]. Perform the setup for your system in [doc:\/\/com.apple.RealityKit\/documentation\/RealityKit\/System\/init(scene:)], or add an empty implementation if your system doesn’t need any setup. Add the logic needed to run your system in [doc:\/\/com.apple.RealityKit\/documentation\/RealityKit\/System\/update(context:)], which RealityKit calls every frame automatically.\n\n```swift\nclass MySystem: System {\n    required init(scene: Scene) { \n        \/\/ Perform required initialization or setup.\n    }\n\n    func update(context: SceneUpdateContext) {\n        \/\/ RealityKit automatically calls this on\n        \/\/ every update for every scene.\n    }\n}\n```\n\n\n\n### Retrieve entities with an entity query\n\nTo efficiently retrieve entities from a scene, use an [doc:\/\/com.apple.RealityKit\/documentation\/RealityKit\/EntityQuery], which you can use to fetch all entities, or just a subset of entities relevant to your system. While some systems operate on every entity in the scene, most only operate on a defined subset, often based on the entities’ components. A physics simulation system, for example, only needs to operate on entities that participate in the scene’s physics simulation and a rendering system only needs to operate on entities that are visible. To retrieve a subset of your scene’s entities, create a [doc:\/\/com.apple.RealityKit\/documentation\/RealityKit\/QueryPredicate] with your criteria and pass the predicate into the initializer when creating your entity query.\n\nCreate your query as a static property of your system unless your query criteria changes between update calls. If the criteria changes between update calls, create the query in your update method. Use the entity query with [doc:\/\/com.apple.RealityKit\/documentation\/RealityKit\/SceneUpdateContext\/entities(matching:updatingSystemWhen:)] in your [doc:\/\/com.apple.RealityKit\/documentation\/RealityKit\/System\/update(context:)] method to iterate over all the entities that your system depends on.\n\n```swift\nstruct MyComponent: Component {\n    \/\/ Optionally, put any needed state here.\n}\n\nclass MySystem: System {\n\n    \/\/ Define a query to return all entities with a MyComponent.\n    private static let query = EntityQuery(where: .has(MyComponent.self))\n\n    \/\/ Initializer is required. Use an empty implementation if there's no setup needed.\n    required init(scene: Scene) { }\n\n    \/\/ Iterate through all entities containing a MyComponent.\n    func update(context: SceneUpdateContext) {\n        for entity in context.entities(\n            matching: Self.query,\n            updatingSystemWhen: .rendering\n        ) {\n            \/\/ Make per-update changes to each entity here.\n        }\n    }\n}\n```\n\n### Create and add components in Reality Composer Pro\n\nIf you use a Reality Composer Pro package in your project, you can create new components within the editor by selecting an entity, clicking the Add Component button, and then selecting the New Component option. This creates a Swift template for the new component, which you can then edit in Xcode.\n\nTo add a custom component onto an entity, define the custom component in a file in your Reality Composer Pro package. Select the entity you want to add the custom component to, click the Add Component button, then select the name of your custom component. This entity then responds and behaves according to the same systems that you wrote to query for the custom component.\n\n### Specify system dependencies\n\nIf a system relies on another system to function, or if you need to specify the update order for multiple systems, declare a [doc:\/\/com.apple.RealityKit\/documentation\/RealityKit\/System\/dependencies] array in your system. To tell RealityKit that a dependency must update before your system, use the [doc:\/\/com.apple.RealityKit\/documentation\/RealityKit\/SystemDependency\/before(_:)] enumeration case, passing the other system as a parameter. For dependencies that must update after your system, use [doc:\/\/com.apple.RealityKit\/documentation\/RealityKit\/SystemDependency\/after(_:)], instead.\n\n```swift\nclass SystemB: RealityKit.System {\n    static var dependencies: [SystemDependency] { \n        [.after(SystemA.self),        \/\/ Run SystemB after SystemA.\n         .before(SystemC.self)]       \/\/ Run SystemB before SystemC.\n     }\n    \/\/ ... \n}\n```\n\n### Register the system\n\nYou don’t create [doc:\/\/com.apple.RealityKit\/documentation\/RealityKit\/System] instances manually. RealityKit creates them for you, but only if you tell RealityKit about your system by calling its [doc:\/\/com.apple.RealityKit\/documentation\/RealityKit\/System\/registerSystem()] method before displaying your app’s [doc:\/\/com.apple.RealityKit\/documentation\/RealityKit\/ARView]. Once you’ve registered your system, RealityKit automatically creates an instance on your system for every active scene, then repeatedly calls its [doc:\/\/com.apple.RealityKit\/documentation\/RealityKit\/System\/update(context:)] method every scene update.\n\n```swift\nMySystem.registerSystem()\n```\n\n## System configuration\n\n- **Animating entity rotation with a system**: Rotate an entity around an axis using a Component and a System.\n- **System**: An object that affects multiple entities in every update of a RealityKit scene.\n- **SystemUpdateCondition**: A condition which causes a system to update.\n- **SceneUpdateContext**: An object that contains information about the scene to update.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Rotate an entity around an axis using a Component and a System.",
          "name" : "Animating entity rotation with a system",
          "url" : "https:\/\/developer.apple.com\/documentation\/RealityKit\/animated-rotation-with-a-system"
        },
        {
          "description" : "An object that affects multiple entities in every update of a RealityKit scene.",
          "name" : "System",
          "url" : "https:\/\/developer.apple.com\/documentation\/RealityKit\/System"
        },
        {
          "description" : "A condition which causes a system to update.",
          "name" : "SystemUpdateCondition",
          "url" : "https:\/\/developer.apple.com\/documentation\/RealityKit\/SystemUpdateCondition"
        },
        {
          "description" : "An object that contains information about the scene to update.",
          "name" : "SceneUpdateContext",
          "url" : "https:\/\/developer.apple.com\/documentation\/RealityKit\/SceneUpdateContext"
        }
      ],
      "title" : "System configuration"
    }
  ],
  "source" : "appleJSON",
  "title" : "Implementing systems for entities in a scene",
  "url" : "https:\/\/developer.apple.com\/documentation\/RealityKit\/implementing-systems-for-entities-in-a-scene"
}