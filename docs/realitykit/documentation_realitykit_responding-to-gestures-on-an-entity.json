{
  "abstract" : "Respond to gestures performed on RealityKit entities using input target and collision components.",
  "codeExamples" : [
    {
      "code" : "public class ActiveComponent: Component {\n    public var active: Bool = false\n}",
      "language" : "swift"
    },
    {
      "code" : "var cube = ModelEntity(mesh: .generateBox(size: 0.1),\n                       materials: [SimpleMaterial(color: .orange, isMetallic: false)])\n\ncube.components.set(InputTargetComponent())\ncube.components.set(CollisionComponent(shapes: [ShapeResource.generateBox(size: SIMD3<Float>(0.1, 0.1, 0.1))]))\ncube.components.set(HoverEffectComponent())\ncube.components.set(ActiveComponent())",
      "language" : "swift"
    },
    {
      "code" : ".gesture(SpatialEventGesture()\n    .targetedToAnyEntity()\n    .onEnded { value in\n        value.entity.components[ActiveComponent.self]?.active.toggle()\n    })",
      "language" : "swift"
    },
    {
      "code" : "attachments: {\n    Attachment(id: cube.id) {\n        Text(\"\\(cube.name)\")\n            .padding()\n            .glassBackgroundEffect(in: RoundedRectangle(cornerRadius: 5.0))\n            .tag(cube.id)\n    }\n}",
      "language" : "swift"
    },
    {
      "code" : "update: { content, attachments in\n    guard let component = cube.components[ActiveComponent.self] else { return }\n    guard let attachmentEntity = attachments.entity(for: cube.id) else { return }\n    if component.active {\n        attachmentEntity.components.set(BillboardComponent())\n        cube.addChild(attachmentEntity)\n        attachmentEntity.setPosition(SIMD3<Float>(0.0, 0.1, 0.0),\n                                     relativeTo: cube)\n    } else {\n        cube.removeChild(attachmentEntity)\n    }\n}",
      "language" : "swift"
    }
  ],
  "contentHash" : "16c478372f95513edd7a1ce14b24fc1a742b34a83258ba72654a3dd9a825bcef",
  "crawledAt" : "2025-12-02T20:15:03Z",
  "id" : "43E17362-92E3-46B1-B5DB-FF8F33F9C12A",
  "kind" : "unknown",
  "language" : "swift",
  "module" : "RealityKit",
  "overview" : "## Overview\n\nYour app responds to [doc:\/\/com.apple.documentation\/documentation\/RealityKit\/RealityView] gesture events received from SwiftUI by adding an [doc:\/\/com.apple.documentation\/documentation\/RealityKit\/InputTargetComponent] and a [doc:\/\/com.apple.documentation\/documentation\/RealityKit\/CollisionComponent] to your entities. Add a [doc:\/\/com.apple.documentation\/documentation\/RealityKit\/HoverEffectComponent] to the entity so it highlights as the gaze intersects the collision shape. The input target component marks the entity as participating in the event system. The system uses the collision component to test if the gaze vector intersects the entity. With both components attached, entities receive events. With the hover effect attached the entity visually appears ready to receive events.\n\n### Attach components to an entity to process events\n\nThe sample defines the `ActiveComponent`, which keeps track of the `active` state of the entity.\n\nThis sample has one entity, a cube that’s `0.1` units in each direction. The sample creates the entity then adds the components.\n\nThe sample has a [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/SpatialEventGesture] attached to the `RealityView`. As the person interacting with the app looks around and pinches, the system uses the input target component and the collision component to determine intent. The system considers all entities in the scene because the sample calls [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/Gesture\/targetedToAnyEntity()]. When the person pinches on the cube the system invokes the gesture’s `onEnded` block, which toggles the `active` flag.\n\nThe `attachments:` block creates an attachment with the name of the `cube` entity.\n\nThe attachment’s `id` is set to the ID of the `cube` so that it’s easy to find in the `update:` block of `RealityView`. In the `update:` block, the sample finds the `ActiveComponent` from the cube and then finds the attachment using the ID of the cube. If the active value is `true` the code adds a [doc:\/\/com.apple.documentation\/documentation\/RealityKit\/BillboardComponent] to the attachment. The system ensures entities with a `BillboardComponent` always face the person. The `RealityView` `update` block adds the attachment entity as a subentity of the cube and sets the position to `[0.0, 0.1, 0.0]`.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/realitykit\/responding-to-gestures-on-an-entity\ncrawled: 2025-12-02T20:15:03Z\n---\n\n# Responding to gestures on an entity\n\n**Sample Code**\n\nRespond to gestures performed on RealityKit entities using input target and collision components.\n\n## Overview\n\nYour app responds to [doc:\/\/com.apple.documentation\/documentation\/RealityKit\/RealityView] gesture events received from SwiftUI by adding an [doc:\/\/com.apple.documentation\/documentation\/RealityKit\/InputTargetComponent] and a [doc:\/\/com.apple.documentation\/documentation\/RealityKit\/CollisionComponent] to your entities. Add a [doc:\/\/com.apple.documentation\/documentation\/RealityKit\/HoverEffectComponent] to the entity so it highlights as the gaze intersects the collision shape. The input target component marks the entity as participating in the event system. The system uses the collision component to test if the gaze vector intersects the entity. With both components attached, entities receive events. With the hover effect attached the entity visually appears ready to receive events.\n\n### Attach components to an entity to process events\n\nThe sample defines the `ActiveComponent`, which keeps track of the `active` state of the entity.\n\n```swift\npublic class ActiveComponent: Component {\n    public var active: Bool = false\n}\n```\n\nThis sample has one entity, a cube that’s `0.1` units in each direction. The sample creates the entity then adds the components.\n\n```swift\nvar cube = ModelEntity(mesh: .generateBox(size: 0.1),\n                       materials: [SimpleMaterial(color: .orange, isMetallic: false)])\n\ncube.components.set(InputTargetComponent())\ncube.components.set(CollisionComponent(shapes: [ShapeResource.generateBox(size: SIMD3<Float>(0.1, 0.1, 0.1))]))\ncube.components.set(HoverEffectComponent())\ncube.components.set(ActiveComponent())\n```\n\nThe sample has a [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/SpatialEventGesture] attached to the `RealityView`. As the person interacting with the app looks around and pinches, the system uses the input target component and the collision component to determine intent. The system considers all entities in the scene because the sample calls [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/Gesture\/targetedToAnyEntity()]. When the person pinches on the cube the system invokes the gesture’s `onEnded` block, which toggles the `active` flag.\n\n```swift\n.gesture(SpatialEventGesture()\n    .targetedToAnyEntity()\n    .onEnded { value in\n        value.entity.components[ActiveComponent.self]?.active.toggle()\n    })\n```\n\nThe `attachments:` block creates an attachment with the name of the `cube` entity.\n\n```swift\nattachments: {\n    Attachment(id: cube.id) {\n        Text(\"\\(cube.name)\")\n            .padding()\n            .glassBackgroundEffect(in: RoundedRectangle(cornerRadius: 5.0))\n            .tag(cube.id)\n    }\n}\n```\n\nThe attachment’s `id` is set to the ID of the `cube` so that it’s easy to find in the `update:` block of `RealityView`. In the `update:` block, the sample finds the `ActiveComponent` from the cube and then finds the attachment using the ID of the cube. If the active value is `true` the code adds a [doc:\/\/com.apple.documentation\/documentation\/RealityKit\/BillboardComponent] to the attachment. The system ensures entities with a `BillboardComponent` always face the person. The `RealityView` `update` block adds the attachment entity as a subentity of the cube and sets the position to `[0.0, 0.1, 0.0]`.\n\n```swift\nupdate: { content, attachments in\n    guard let component = cube.components[ActiveComponent.self] else { return }\n    guard let attachmentEntity = attachments.entity(for: cube.id) else { return }\n    if component.active {\n        attachmentEntity.components.set(BillboardComponent())\n        cube.addChild(attachmentEntity)\n        attachmentEntity.setPosition(SIMD3<Float>(0.0, 0.1, 0.0),\n                                     relativeTo: cube)\n    } else {\n        cube.removeChild(attachmentEntity)\n    }\n}\n```\n\n## Scene content\n\n- **Hello World**: Use windows, volumes, and immersive spaces to teach people about the Earth.\n- **Enabling video reflections in an immersive environment**: Create a more immersive experience by adding video reflections in a custom environment.\n- **Creating a spatial drawing app with RealityKit**: Use low-level mesh and texture APIs to achieve fast updates to a person’s brush strokes by integrating RealityKit with ARKit and SwiftUI.\n- **Generating interactive geometry with RealityKit**: Create an interactive mesh with low-level mesh and low-level texture.\n- **Combining 2D and 3D views in an immersive app**: Use attachments to place 2D content relative to 3D content in your visionOS app.\n- **Transforming RealityKit entities using gestures**: Build a RealityKit component to support standard visionOS gestures on any entity.\n- **Models and meshes**: Display virtual objects in your scene with mesh-based models.\n- **Materials, textures, and shaders**: Apply textures to the surface of your scene’s 3D objects to give each object a unique appearance.\n- **Anchors**: Lock virtual content to the real world.\n- **Lights and cameras**: Control the lighting and point of view for a scene.\n- **Content synchronization**: Synchronize the contents of entities locally or across the network.\n- **Audio**: Create personalized and realistic spatial audio experiences.\n- **Videos**: Present videos in your RealityKit experiences.\n- **Images**: Present images and spatial scenes in your RealityKit experiences.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Use windows, volumes, and immersive spaces to teach people about the Earth.",
          "name" : "Hello World",
          "url" : "https:\/\/developer.apple.com\/documentation\/visionOS\/World"
        },
        {
          "description" : "Create a more immersive experience by adding video reflections in a custom environment.",
          "name" : "Enabling video reflections in an immersive environment",
          "url" : "https:\/\/developer.apple.com\/documentation\/visionOS\/enabling-video-reflections-in-an-immersive-environment"
        },
        {
          "description" : "Use low-level mesh and texture APIs to achieve fast updates to a person’s brush strokes by integrating RealityKit with ARKit and SwiftUI.",
          "name" : "Creating a spatial drawing app with RealityKit",
          "url" : "https:\/\/developer.apple.com\/documentation\/RealityKit\/creating-a-spatial-drawing-app-with-realitykit"
        },
        {
          "description" : "Create an interactive mesh with low-level mesh and low-level texture.",
          "name" : "Generating interactive geometry with RealityKit",
          "url" : "https:\/\/developer.apple.com\/documentation\/RealityKit\/generating-interactive-geometry-with-realitykit"
        },
        {
          "description" : "Use attachments to place 2D content relative to 3D content in your visionOS app.",
          "name" : "Combining 2D and 3D views in an immersive app",
          "url" : "https:\/\/developer.apple.com\/documentation\/RealityKit\/combining-2d-and-3d-views-in-an-immersive-app"
        },
        {
          "description" : "Build a RealityKit component to support standard visionOS gestures on any entity.",
          "name" : "Transforming RealityKit entities using gestures",
          "url" : "https:\/\/developer.apple.com\/documentation\/RealityKit\/transforming-realitykit-entities-with-gestures"
        },
        {
          "description" : "Display virtual objects in your scene with mesh-based models.",
          "name" : "Models and meshes",
          "url" : "https:\/\/developer.apple.com\/documentation\/RealityKit\/scene-content-models-and-meshes"
        },
        {
          "description" : "Apply textures to the surface of your scene’s 3D objects to give each object a unique appearance.",
          "name" : "Materials, textures, and shaders",
          "url" : "https:\/\/developer.apple.com\/documentation\/RealityKit\/scene-content-materials-and-shaders"
        },
        {
          "description" : "Lock virtual content to the real world.",
          "name" : "Anchors",
          "url" : "https:\/\/developer.apple.com\/documentation\/RealityKit\/scene-content-anchors"
        },
        {
          "description" : "Control the lighting and point of view for a scene.",
          "name" : "Lights and cameras",
          "url" : "https:\/\/developer.apple.com\/documentation\/RealityKit\/scene-content-lights-and-cameras"
        },
        {
          "description" : "Synchronize the contents of entities locally or across the network.",
          "name" : "Content synchronization",
          "url" : "https:\/\/developer.apple.com\/documentation\/RealityKit\/scene-content-content-synchronization"
        },
        {
          "description" : "Create personalized and realistic spatial audio experiences.",
          "name" : "Audio",
          "url" : "https:\/\/developer.apple.com\/documentation\/RealityKit\/scene-content-audio"
        },
        {
          "description" : "Present videos in your RealityKit experiences.",
          "name" : "Videos",
          "url" : "https:\/\/developer.apple.com\/documentation\/RealityKit\/scene-content-videos"
        },
        {
          "description" : "Present images and spatial scenes in your RealityKit experiences.",
          "name" : "Images",
          "url" : "https:\/\/developer.apple.com\/documentation\/RealityKit\/scene-content-images"
        }
      ],
      "title" : "Scene content"
    }
  ],
  "source" : "appleJSON",
  "title" : "Responding to gestures on an entity",
  "url" : "https:\/\/developer.apple.com\/documentation\/realitykit\/responding-to-gestures-on-an-entity"
}