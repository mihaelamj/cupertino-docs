{
  "abstract" : "Make sure your postprocess effect works on all devices.",
  "codeExamples" : [
    {
      "code" : "extension RealityKit.ARView.PostProcessContext {\n    \/\/ Returns the output texture, ensuring that the pixel format is \n    \/\/ appropriate for the current device's GPU.\n    var compatibleTargetTexture: MTLTexture! {\n        if self.device.supportsFamily(.apple2) {\n            return targetColorTexture\n        } else {\n            return targetColorTexture.makeTextureView(pixelFormat: .bgra8Unorm)!\n        }\n    }\n}",
      "language" : "swift"
    }
  ],
  "contentHash" : "eb46f8738cadc1f1c4794e585deff91d614c4a8ceae1b8ab2d38b8f8632101ca",
  "crawledAt" : "2025-12-02T15:55:39Z",
  "id" : "10822F9F-808D-4FBD-944C-DB808F2CF753",
  "kind" : "article",
  "language" : "swift",
  "module" : "RealityKit",
  "overview" : "## Overview\n\nSome device GPUs require that the output texture for postprocess effects be in a specific format. If the current device doesn’t support [doc:\/\/com.apple.documentation\/documentation\/Metal\/MTLGPUFamily\/apple2], convert the output texture to [doc:\/\/com.apple.documentation\/documentation\/Metal\/MTLPixelFormat\/bgra8Unorm] before encoding the processed framebuffer to it. An easy way to do that, is to add a derived property to [doc:\/\/com.apple.RealityKit\/documentation\/RealityKit\/ARView\/PostProcessContext] using an extension:\n\nIf you use this derived property instead of [doc:\/\/com.apple.RealityKit\/documentation\/RealityKit\/ARView\/PostProcessContext\/targetColorTexture] when encoding the results of a postprocess effect, it ensures the effect works on all devices.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/RealityKit\/checking-the-pixel-format-of-a-postprocess-effect-s-output-texture\ncrawled: 2025-12-02T15:55:39Z\n---\n\n# Checking the pixel format of a postprocess effect’s output texture\n\n**Article**\n\nMake sure your postprocess effect works on all devices.\n\n## Overview\n\nSome device GPUs require that the output texture for postprocess effects be in a specific format. If the current device doesn’t support [doc:\/\/com.apple.documentation\/documentation\/Metal\/MTLGPUFamily\/apple2], convert the output texture to [doc:\/\/com.apple.documentation\/documentation\/Metal\/MTLPixelFormat\/bgra8Unorm] before encoding the processed framebuffer to it. An easy way to do that, is to add a derived property to [doc:\/\/com.apple.RealityKit\/documentation\/RealityKit\/ARView\/PostProcessContext] using an extension:\n\n```swift\nextension RealityKit.ARView.PostProcessContext {\n    \/\/ Returns the output texture, ensuring that the pixel format is \n    \/\/ appropriate for the current device's GPU.\n    var compatibleTargetTexture: MTLTexture! {\n        if self.device.supportsFamily(.apple2) {\n            return targetColorTexture\n        } else {\n            return targetColorTexture.makeTextureView(pixelFormat: .bgra8Unorm)!\n        }\n    }\n}\n```\n\nIf you use this derived property instead of [doc:\/\/com.apple.RealityKit\/documentation\/RealityKit\/ARView\/PostProcessContext\/targetColorTexture] when encoding the results of a postprocess effect, it ensures the effect works on all devices.\n\n## Metal effects\n\n- **Using Metal performance shaders to create custom postprocess effects**: Leverage the Metal Performance Shaders framework to create special rendering effects for your RealityKit scenes.\n- **Implementing special rendering effects with RealityKit postprocessing**: Implement a variety of postprocessing techniques to alter RealityKit rendering.\n- **Passing Structured Data to a Metal Compute Function**: Send nontexture data from Swift to your Metal shaders using a shared header file.\n- **Implementing postprocess effects using Metal compute functions**: Create custom shaders to implement postprocess effects.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Leverage the Metal Performance Shaders framework to create special rendering effects for your RealityKit scenes.",
          "name" : "Using Metal performance shaders to create custom postprocess effects",
          "url" : "https:\/\/developer.apple.com\/documentation\/RealityKit\/using-metal-performance-shaders-to-create-custom-postprocess-effects"
        },
        {
          "description" : "Implement a variety of postprocessing techniques to alter RealityKit rendering.",
          "name" : "Implementing special rendering effects with RealityKit postprocessing",
          "url" : "https:\/\/developer.apple.com\/documentation\/RealityKit\/implementing-special-rendering-effects-with-realitykit-postprocessing"
        },
        {
          "description" : "Send nontexture data from Swift to your Metal shaders using a shared header file.",
          "name" : "Passing Structured Data to a Metal Compute Function",
          "url" : "https:\/\/developer.apple.com\/documentation\/RealityKit\/passing-structured-data-to-a-metal-compute-function"
        },
        {
          "description" : "Create custom shaders to implement postprocess effects.",
          "name" : "Implementing postprocess effects using Metal compute functions",
          "url" : "https:\/\/developer.apple.com\/documentation\/RealityKit\/implementing-postprocess-effects-using-metal-compute-functions"
        }
      ],
      "title" : "Metal effects"
    }
  ],
  "source" : "appleJSON",
  "title" : "Checking the pixel format of a postprocess effect’s output texture",
  "url" : "https:\/\/developer.apple.com\/documentation\/RealityKit\/checking-the-pixel-format-of-a-postprocess-effect-s-output-texture"
}