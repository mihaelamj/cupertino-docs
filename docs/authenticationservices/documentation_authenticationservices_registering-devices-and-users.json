{
  "abstract" : "Implement device and user registration.",
  "codeExamples" : [

  ],
  "contentHash" : "b282ee85c6b9d83de432525231a1c17d9532c469b8dd69480edde7d386d1b7f2",
  "crawledAt" : "2025-12-06T08:38:05Z",
  "id" : "92FF0900-EC54-41BD-8B6D-40DCEE0E4101",
  "kind" : "article",
  "language" : "swift",
  "module" : "Authentication Services",
  "overview" : "## Overview\n\nOnce you develop a single sign-on (SSO) extension, there’s a sequence of steps that it follows to register devices and users with an identity provider (IdP). Platform SSO calls the extension to perform these steps. First, the extension registers a device, and then it registers users on that device.\n\nYour SSO extension needs to implement the [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASAuthorizationProviderExtensionRegistrationHandler] protocol to support registration. Platform SSO calls these methods when a device or user needs to register with the IdP, or when the system needs to repair an existing registration. The extension repeats the registration calls for each user on a device.\n\nFor more information, see [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/creating-extensions-that-support-platform-sso].\n\n### Register a device\n\nAn SSO extension registers a device using [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASAuthorizationProviderExtensionRegistrationHandler\/beginDeviceRegistration(loginManager:options:completion:)]. The extension needs to:\n\nIf there’s a registration token in the Device Management configuration profile, then platform SSO attempts a silent device registration. The extension can use the registration token to authenticate the device with the IdP to avoid prompting the user. If necessary, the system presents a user interface that prompts the user to register and then again calls [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASAuthorizationProviderExtensionRegistrationHandler\/beginDeviceRegistration(loginManager:options:completion:)].\n\nIf the SSO extension needs to present a user interface during registration, it can call [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASAuthorizationProviderExtensionLoginManager\/presentRegistrationViewController(completion:)] on the login manager.\n\nYou can use the [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASAuthorizationProviderExtensionKeyType\/currentDeviceSigning] and [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASAuthorizationProviderExtensionKeyType\/currentDeviceEncryption] key types to access the signing and encryption keys, regardless of the use of shared keys.\n\nWhen complete, the SSO extension needs to call the completion handler with an [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASAuthorizationProviderExtensionRegistrationResult]. If the result is [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASAuthorizationProviderExtensionRegistrationResult\/failed], then platform SSO automatically prompts the user for registration again in about 10 minutes. The user can also use the register button under Settings → Users & Groups → Network Account Server to restart registration. If the result is [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASAuthorizationProviderExtensionRegistrationResult\/failedNoRetry], then platform SSO doesn’t attempt registration again until the configuration or extension changes.\n\nFor more information on registering devices and users, see [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASAuthorizationProviderExtensionRegistrationHandler].\n\n### Register a user\n\nAfter the device registration completes successfully with a [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASAuthorizationProviderExtensionRegistrationResult\/success] result, the SSO extension initiates user registration through [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASAuthorizationProviderExtensionRegistrationHandler\/beginUserRegistration(loginManager:userName:method:options:completion:)]. All users on a device use the login configuration, including when the system creates new users during login. You can set user-specific login configuration values that the system supports during user registration by creating an instance of [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASAuthorizationProviderExtensionUserLoginConfiguration] and save these values using [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASAuthorizationProviderExtensionLoginManager\/saveUserLoginConfiguration(_:)].\n\nWhen using shared device keys, the system only starts user registration for each subsequent user on the device. If the system creates new users during login, it prompts the user to start registration when they reach the desktop if necessary. The login manager’s [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASAuthorizationProviderExtensionLoginManager\/saveUserLoginConfiguration(_:)] method specifies per-user login configuration changes. If the user already entered a user name, it’s sent through the `userName` parameter.\n\nThe SSO extension needs to call the completion handler when registration completes. The system then prompts the user to authenticate using the new configuration which can use platform SSO immediately.\n\nIf the extension supports the new platform SSO 2.0 protocol methods and the system uses password authentication, it calls the key service to provision a new key and bind it to the user account.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/authenticationservices\/registering-devices-and-users\ncrawled: 2025-12-06T08:38:05Z\n---\n\n# Registering devices and users\n\n**Article**\n\nImplement device and user registration.\n\n## Overview\n\nOnce you develop a single sign-on (SSO) extension, there’s a sequence of steps that it follows to register devices and users with an identity provider (IdP). Platform SSO calls the extension to perform these steps. First, the extension registers a device, and then it registers users on that device.\n\nYour SSO extension needs to implement the [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASAuthorizationProviderExtensionRegistrationHandler] protocol to support registration. Platform SSO calls these methods when a device or user needs to register with the IdP, or when the system needs to repair an existing registration. The extension repeats the registration calls for each user on a device.\n\nFor more information, see [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/creating-extensions-that-support-platform-sso].\n\n### Register a device\n\nAn SSO extension registers a device using [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASAuthorizationProviderExtensionRegistrationHandler\/beginDeviceRegistration(loginManager:options:completion:)]. The extension needs to:\n\n- Register the device with its associated IdP.\n- Provide the login configuration to Platform SSO.\n- Execute the completion handler.\n\nIf there’s a registration token in the Device Management configuration profile, then platform SSO attempts a silent device registration. The extension can use the registration token to authenticate the device with the IdP to avoid prompting the user. If necessary, the system presents a user interface that prompts the user to register and then again calls [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASAuthorizationProviderExtensionRegistrationHandler\/beginDeviceRegistration(loginManager:options:completion:)].\n\nIf the SSO extension needs to present a user interface during registration, it can call [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASAuthorizationProviderExtensionLoginManager\/presentRegistrationViewController(completion:)] on the login manager.\n\nYou can use the [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASAuthorizationProviderExtensionKeyType\/currentDeviceSigning] and [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASAuthorizationProviderExtensionKeyType\/currentDeviceEncryption] key types to access the signing and encryption keys, regardless of the use of shared keys.\n\nWhen complete, the SSO extension needs to call the completion handler with an [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASAuthorizationProviderExtensionRegistrationResult]. If the result is [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASAuthorizationProviderExtensionRegistrationResult\/failed], then platform SSO automatically prompts the user for registration again in about 10 minutes. The user can also use the register button under Settings → Users & Groups → Network Account Server to restart registration. If the result is [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASAuthorizationProviderExtensionRegistrationResult\/failedNoRetry], then platform SSO doesn’t attempt registration again until the configuration or extension changes.\n\n\n\nFor more information on registering devices and users, see [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASAuthorizationProviderExtensionRegistrationHandler].\n\n### Register a user\n\nAfter the device registration completes successfully with a [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASAuthorizationProviderExtensionRegistrationResult\/success] result, the SSO extension initiates user registration through [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASAuthorizationProviderExtensionRegistrationHandler\/beginUserRegistration(loginManager:userName:method:options:completion:)]. All users on a device use the login configuration, including when the system creates new users during login. You can set user-specific login configuration values that the system supports during user registration by creating an instance of [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASAuthorizationProviderExtensionUserLoginConfiguration] and save these values using [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASAuthorizationProviderExtensionLoginManager\/saveUserLoginConfiguration(_:)].\n\nWhen using shared device keys, the system only starts user registration for each subsequent user on the device. If the system creates new users during login, it prompts the user to start registration when they reach the desktop if necessary. The login manager’s [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASAuthorizationProviderExtensionLoginManager\/saveUserLoginConfiguration(_:)] method specifies per-user login configuration changes. If the user already entered a user name, it’s sent through the `userName` parameter.\n\nThe SSO extension needs to call the completion handler when registration completes. The system then prompts the user to authenticate using the new configuration which can use platform SSO immediately.\n\nIf the extension supports the new platform SSO 2.0 protocol methods and the system uses password authentication, it calls the key service to provision a new key and bind it to the user account.\n\n## Essentials\n\n- **Creating extensions that support platform SSO**: Configure capabilities and authentication options for extensions.\n- **ASAuthorizationProviderExtensionRegistrationHandler**: An interface through which a single sign-on (SSO) authentication provider extension registers users and devices for platform SSO.\n- **ASAuthorizationProviderExtensionAuthenticationMethod**: The platform single sign-on method for the user.\n- **ASAuthorizationProviderExtensionRequestOptions**: The options for the extension to obtain the status of the registration.\n- **ASAuthorizationProviderExtensionRegistrationResult**: The registration result.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Configure capabilities and authentication options for extensions.",
          "name" : "Creating extensions that support platform SSO",
          "url" : "https:\/\/developer.apple.com\/documentation\/AuthenticationServices\/creating-extensions-that-support-platform-sso"
        },
        {
          "description" : "An interface through which a single sign-on (SSO) authentication provider extension registers users and devices for platform SSO.",
          "name" : "ASAuthorizationProviderExtensionRegistrationHandler",
          "url" : "https:\/\/developer.apple.com\/documentation\/AuthenticationServices\/ASAuthorizationProviderExtensionRegistrationHandler"
        },
        {
          "description" : "The platform single sign-on method for the user.",
          "name" : "ASAuthorizationProviderExtensionAuthenticationMethod",
          "url" : "https:\/\/developer.apple.com\/documentation\/AuthenticationServices\/ASAuthorizationProviderExtensionAuthenticationMethod"
        },
        {
          "description" : "The options for the extension to obtain the status of the registration.",
          "name" : "ASAuthorizationProviderExtensionRequestOptions",
          "url" : "https:\/\/developer.apple.com\/documentation\/AuthenticationServices\/ASAuthorizationProviderExtensionRequestOptions"
        },
        {
          "description" : "The registration result.",
          "name" : "ASAuthorizationProviderExtensionRegistrationResult",
          "url" : "https:\/\/developer.apple.com\/documentation\/AuthenticationServices\/ASAuthorizationProviderExtensionRegistrationResult"
        }
      ],
      "title" : "Essentials"
    }
  ],
  "source" : "appleJSON",
  "title" : "Registering devices and users",
  "url" : "https:\/\/developer.apple.com\/documentation\/authenticationservices\/registering-devices-and-users"
}