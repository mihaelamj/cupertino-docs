{
  "abstract" : "Create a signed JOSE login request.",
  "codeExamples" : [
    {
      "code" : "POST \/oauth2\/token HTTP\/1.1\nHost: auth.example.com\nAccept: application\/platformsso-login-response+jwt\nContent-Type: application\/x-www-form-urlencoded\nclient-request-id: DCAB01D3-B1FE-4E1C-802F-B3EBDCDF9E67\nplatform_sso_version=1.0&grant_type=urn:ietf:params:oauth:grant-type:jwt-bearer&assertion=ewogI...A063Eg",
      "language" : "javascript"
    },
    {
      "code" : "{\n    \"kid\" : \"WMPGy7o9k+Wh7DB3V7oXBPh3QCP4xuTXtMANwfzn6+k=\",\n    \"x5c\" : \"MIIBh...8r1E=\",\n    \"typ\" : \"platformsso-login-request+jwt\",\n    \"alg\" : \"ES256\"\n}.{\n    \"jwe_crypto\" : {\n        \"alg\" : \"ECDH-ES\",\n        \"enc\" : \"A256GCM\",\n        \"apv\" : \"AAAAB...zVGRQ\"\n    },\n    \"exp\" : 1685737193,\n    \"nonce\" : \"A79070DA-4058-4060-B09D-91CECFA635FE\",\n    \"request_nonce\" : \"AwABA...YQgAA\",\n    \"scope\" : \"openid offline_access urn:apple:platformsso\",\n    \"grant_type\" : \"password\",\n    \"iss\" : \"aaff1524-fa35-40c5-94e3-2b233c5f2965\",\n    \"password\" : \"password redacted\",\n    \"sub\" : \"foo\",\n    \"claims\" : {\n        \"id_token\" : {\n            \"groups\" : {\n                \"values\" : [\n                    \"com.example.foogroup\",\n                    \"com.example.bargroup\"\n                ]\n            }\n        }\n    },\n    \"aud\" : \"https:\/\/localhost.apple.com:8888\/auth\/token\",\n    \"iat\" : 1685736893,\n    \"username\" : \"foo\",\n    \"client_id\" : \"aaff1524-fa35-40c5-94e3-2b233c5f2965\"\n}.[Signature]",
      "language" : "javascript"
    },
    {
      "code" : "{\n    \"kid\" : \"o0sPO3BU5DwCIibsHvfVN4D9tOwVcy1Yv0kKKmRG8qk=\",\n    \"x5c\" : \"MIIBg...xhg==\",\n  \"typ\" : \"platformsso-login-request+jwt\",\n  \"alg\" : \"ES256\"\n}.{\n    \"jwe_crypto\" : {\n        \"alg\" : \"ECDH-ES\",\n        \"enc\" : \"A256GCM\",\n        \"apv\" : \"AAAAB...zBCRA\"\n    },\n    \"exp\" : 1685737279,\n    \"nonce\" : \"0D7578A1-DE84-4237-A77D-62DDEB2670BD\",\n    \"request_nonce\" : \"AwABA...YQgAA\",\n    \"scope\" : \"openid offline_access urn:apple:platformsso\",\n    \"grant_type\" : \"urn:ietf:params:oauth:grant-type:jwt-bearer\",\n    \"iss\" : \"aaff1524-fa35-40c5-94e3-2b233c5f2965\",\n    \"sub\" : \"foo\",\n    \"claims\" : {\n        \"id_token\" : {\n            \"groups\" : {\n                \"values\" : [\n                    \"com.example.foogroup\",\n                    \"com.example.bargroup\"\n                ]\n            }\n        }\n    }, \n    \"aud\" : \"https:\/\/localhost.apple.com:8888\/auth\/token\",\n    \"username\" : \"foo\",\n    \"assertion\" : \"ewogICJlbmMiIDogIkEyNTZHQ00iLAogICJhcHYiIDogIkFBQUFEVUZRVUV4RlJVMUNSVVJFUlVRQUFBQkJCQ1g4N2Vxb25XeU5VTnoySmVIMndHNjhfV2lQZlFsSnc2QWlEdkhTRDA4bjVIZG4xb0RVQnhoTF9UUmFydmhVVUdEWXNuQlJrMkhSSF9ab1hHdHBVbmNBQUFCdVFYZEJRa0ZCUVVGQlFVRkVRVTk2WDBKQlJIWmZlSFJuZFY5VFRURk5kbTl4TURKUVdYcGZXV1pZZUhnMVJrRm5ZMHhJVEU1cGEwZzJaMnB5UWxkM1kzRnVVbGRmYUdGNGNVODVTa05wVUdGME5VdG1hMVJwYkhrd05GTTRSVWd6UVZGM1ZuTlhRM2hJV1ZGblFVRSIsCiAgImFsZyIgOiAiRUNESC1FUyIsCiAgImVwayIgOiB7CiAgICAieSIgOiAiOUVfN0ZyeTlUbDhZdlBncHgzdGc0QTlaQ1FOZkZlZ1BuUWQ0MzNLN0xOTSIsCiAgICAieCIgOiAiU2owYlpzZkhmM3kyMUJRajZ0ejBkUkFwUnhmRGdxdTFwbi1nUGpBcmFCTSIsCiAgICAia3R5IiA6ICJFQyIsCiAgICAiY3J2IiA6ICJQLTI1NiIKICB9LAogICJraWQiIDogIjd5MXhYYzRJNmlBeWxkbVZrSWVHdFF4bzhOUnEyRmdLRmIrK09yMTNqeFU9IiwKICAiYXB1IiA6ICJBQUFBQlVGUVVFeEZBQUFBUVFSS1BSdG14OGRfZkxiVUZDUHEzUFIxRUNsSEY4T0NxN1dtZjZBLU1DdG9FX1JQLXhhOHZVNWZHTHo0S2NkN1lPQVBXUWtEWHhYb0Q1MEhlTjl5dXl6VCIsCiAgInR5cCIgOiAicGxhdGZvcm1zc28tZW5jcnlwdGVkLWxvZ2luLWFzc2VydGlvbitqd3QiCn0..PCPBwllPzLJzaTiw.4InQHbgPs51ExvjLCutmLHzSVLJkxfD5B9lNC1w6H9-7D_FzuinchO6O5Qf0if6IWG0G_bnROLgOvdBEle9Q_0LtF8odeXThBkDszEMqTNpkYhCHmtU6cZgT-lUeHwrA-9mONF5WO4KMIavZOJ_n-6DZWvdMOCgzokx4-OiiPqh5fo0B6MAEQu4AITtXZe7oD6HZAI33zdUD-dQxKNAO2I0aP9RIUP8eLyXkrPY8nIWBRx88aPEtGMs_3uT29BBqGMcMV83zuYFA6TNXTVJy8bCAbeCNZceQbT7lyaFPxZ0s6hg7TSpvIRz7fJX3EXo6a2u4CkkUVgcQrHnfF1aX7v3WOLnYnV1nSO8YPDQYi_m2-bkFSbScmC-ERgmod3m0eV10jA4ag6-TSyB_zlhsVclJQ4suOVyw2YO2Z7AgjRK-BO6GiEMBgbR-P5ad3Zk7v1DVl2MWFMalLfbdcHQNP5drpi4BiY1j0SkFxmdcjTWHea6YAYhmQVjyj29Rd2SOYjRXSXelMftxXO5cZQ.bp-jwZlbdDoL7qjeBbGClw\",\n    \"client_id\" : \"aaff1524-fa35-40c5-94e3-2b233c5f2965\",\n    \"iat\" : 1685736979\n}.[Signature]",
      "language" : "javascript"
    },
    {
      "code" : "{\n    \"kid\" : \"R7hXA3CADcaDzreUMbIJWkTw5IjreuwANl9Rj2tAHbk=\",\n    \"x5c\" : \"MIIBg...XuQ==\",\n    \"typ\" : \"platformsso-login-assertion+jwt\",\n    \"alg\" : \"ES256\"\n}.{\n    \"jwe_crypto\" : {\n        \"alg\" : \"ECDH-ES\",\n        \"enc\" : \"A256GCM\",\n        \"apv\" : \"AAAAB...jM5RQ\"\n    },\n    \"exp\" : 1685737367,\n    \"nonce\" : \"E0DA0950-3EC4-486E-9C70-A9B4D28CB39E\",\n    \"request_nonce\" : \"AwABAAAAAAADAOz_BADv_xtgu_SM1Mvoq02PYz_YfXxx5FAgcLHLNikH6gjrBWwcqnRW_haxqO9JCiPat5KfkTily04S8EH3AQwVsWCxHYQgAA\",\n    \"scope\" : \"openid offline_access urn:apple:platformsso\",\n    \"grant_type\" : \"urn:ietf:params:oauth:grant-type:jwt-bearer\",\n    \"iss\" : \"aaff1524-fa35-40c5-94e3-2b233c5f2965\",\n    \"sub\" : \"foo\",\n    \"claims\" : {\n        \"id_token\" : {\n            \"groups\" : {\n                \"values\" : [\n                    \"com.example.foogroup\",\n                    \"com.example.bargroup\"\n                ]\n            } \n        }\n    }, \n    \"aud\" : \"https:\/\/localhost.apple.com:8888\/auth\/token\",\n    \"username\" : \"foo\",\n    \"assertion\" : \"ewogICJ0eXAiIDogInBsYXRmb3Jtc3NvLWxvZ2luLWFzc2VydGlvbitqd3QiLAogICJhbGciIDogIkVTMjU2IiwKICAia2lkIiA6ICJ3dzJyVFhrSWNOeG5ma3BBZi8zRFN3ZldBL2pKOUpuNVh0dlhKMVh5NzhNPSIKfQ.ewogICJub25jZSIgOiAiRTBEQTA5NTAtM0VDNC00ODZFLTlDNzAtQTlCNEQyOENCMzlFIiwKICAiaWF0IiA6IDE2ODU3MzcwNjcsCiAgInJlcXVlc3Rfbm9uY2UiIDogIkF3QUJBQUFBQUFBREFPel9CQUR2X3h0Z3VfU00xTXZvcTAyUFl6X1lmWHh4NUZBZ2NMSExOaWtINmdqckJXd2NxblJXX2hheHFPOUpDaVBhdDVLZmtUaWx5MDRTOEVIM0FRd1ZzV0N4SFlRZ0FBIiwKICAic3ViIiA6ICJmb28iLAogICJzY29wZSIgOiAib3BlbmlkIG9mZmxpbmVfYWNjZXNzIHVybjphcHBsZTpwbGF0Zm9ybXNzbyIsCiAgImV4cCIgOiAxNjg1NzM3MzY3LAogICJhdWQiIDogIjA2MDc5OEZGLTgxNEUtNEMzOC05N0Y4LTI4Qzk1NEI3RTA1OCIsCiAgImlzcyIgOiAiZm9vIgp9.jmAh1SQJVaqhQhYc5QFGq7R_CsSeMxGF9KFn7PERV9TP37qe5q1MIhdspbFLShK-_7YcjqpX-thzBVINaXNbnQ\",\n    \"client_id\" : \"aaff1524-fa35-40c5-94e3-2b233c5f2965\",\n    \"iat\" : 1685737067\n}.[Signature]",
      "language" : "javascript"
    },
    {
      "code" : "{\n    \"kid\" : \"MvmFTLE0N7t+SPx8QRYjPB2JzeCYPyL7rZTjsFAlOzs=\",\n    \"x5c\" : \"MIIBg...RtQ==\",\n    \"typ\" : \"platformsso-login-request+jwt\",\n    \"alg\" : \"ES256\"\n}.{\n    \"jwe_crypto\" : {\n        \"alg\" : \"ECDH-ES\",\n        \"enc\" : \"A256GCM\",\n        \"apv\" : \"AAAAB...Tg1MQ\"\n    },\n    \"exp\" : 1685737424,\n    \"nonce\" : \"CBA6437A-ED3F-438C-B859-078E058F1851\",\n    \"request_nonce\" :\"AwABA...YQgAA\",\n    \"scope\" : \"openid offline_access urn:apple:platformsso\",\n    \"grant_type\" : \"urn:ietf:params:oauth:grant-type:jwt-bearer\",\n    \"iss\" : \"aaff1524-fa35-40c5-94e3-2b233c5f2965\",\n    \"sub\" : \"foo\",\n    \"claims\" : {\n        \"id_token\" : {\n            \"groups\" : {\n                \"values\" : [\n                    \"com.example.foogroup\",\n                    \"com.example.bargroup\"\n                ]\n            }\n        }\n    }, \n    \"aud\" : \"https:\/\/localhost.apple.com:8888\/auth\/token\",\n    \"username\" : \"foo\",\n    \"assertion\" : \"ewogICJraWQiIDogIlV3M3ZzRGI4dW1IVVgwNWE2TUNibEVieXBiSE5HVU0xTUNFK1gxaE5hOFk9IiwKICAieDVjIiA6ICJNSUlCakRDQ0FUR2dBd0lCQWdJQkFUQUtCZ2dxaGtqT1BRUURBakE3TVJnd0ZnWURWUVFEREE5bWIyOUFaWGhoYlhCc1pTNWpiMjB4Q3pBSkJnTlZCQVlUQWxWVE1SSXdFQVlEVlFRS0V3bEJjSEJzWlNCSmJtTXdIaGNOTWpNd05qQXlNakF4T0RRMFdoY05NalF3TmpBeE1qQXhPRFEwV2pBN01SZ3dGZ1lEVlFRRERBOW1iMjlBWlhoaGJYQnNaUzVqYjIweEN6QUpCZ05WQkFZVEFsVlRNUkl3RUFZRFZRUUtFd2xCY0hCc1pTQkpibU13V1RBVEJnY3Foa2pPUFFJQkJnZ3Foa2pPUFFNQkJ3TkNBQVFqWWovNzFPMmhrYWJwOTA5RTlmcmxmc2hSTysxNExzd0NZanlaY3dRSC9aeEpnM1BidjZkL3NIelNTd0ZXS2kydFJaS1VTS3BxQXhrdXpZaXZiRnVCb3lZd0pEQVNCZ05WSFJNQkFmOEVDREFHQVFIL0FnRUFNQTRHQTFVZER3RUIvd1FFQXdJQUFEQUtCZ2dxaGtqT1BRUURBZ05KQURCR0FpRUF3SWU4L2FXOXd1MjFUMWh1cEFNZkt4OUhvQkxsRkpvaE5QQlRrcFh4NGNJQ0lRQ0hVRGdySGZ1RTNRZjRmZi8wV1BueU9mc1g4aCsvVXZvUDgxUU1XcGtPanc9PSIsCiAgInR5cCIgOiAicGxhdGZvcm1zc28tbG9naW4tYXNzZXJ0aW9uK2p3dCIsCiAgImFsZyIgOiAiRVMyNTYiCn0.ewogICJub25jZSIgOiAiQ0JBNjQzN0EtRUQzRi00MzhDLUI4NTktMDc4RTA1OEYxODUxIiwKICAiaWF0IiA6IDE2ODU3MzcxMjQsCiAgInJlcXVlc3Rfbm9uY2UiIDogIkF3QUJBQUFBQUFBREFPel9CQUR2X3h0Z3VfU00xTXZvcTAyUFl6X1lmWHh4NUZBZ2NMSExOaWtINmdqckJXd2NxblJXX2hheHFPOUpDaVBhdDVLZmtUaWx5MDRTOEVIM0FRd1ZzV0N4SFlRZ0FBIiwKICAic3ViIiA6ICJmb28iLAogICJzY29wZSIgOiAib3BlbmlkIG9mZmxpbmVfYWNjZXNzIHVybjphcHBsZTpwbGF0Zm9ybXNzbyIsCiAgImV4cCIgOiAxNjg1NzM3NDI0LAogICJhdWQiIDogIjA2MDc5OEZGLTgxNEUtNEMzOC05N0Y4LTI4Qzk1NEI3RTA1OCIsCiAgImlzcyIgOiAiZm9vIgp9.Ybc1XQeKUO5y5eMvKMVnHj5j-bqh8UnhUfDc76RJFG1viuc3M9OI0D7lKylLcw0V9Y5H-ZAmbxLKg47yh8qxaw\",\n    \"client_id\" : \"aaff1524-fa35-40c5-94e3-2b233c5f2965\",\n    \"iat\" : 1685737124\n}.[Signature]",
      "language" : "javascript"
    }
  ],
  "contentHash" : "e0693ae0831a6d4c1cff46109c6ab3e1d5481322089b805fb8c2af56000ba923",
  "crawledAt" : "2025-12-09T17:22:07Z",
  "id" : "521254F5-3B69-48FC-ADE1-C59C8F5A0C0F",
  "kind" : "article",
  "language" : "swift",
  "module" : "Authentication Services",
  "overview" : "## Overview\n\nYour login configuration instructs platform SSO how to create and validate a login request based on the authentication method. This article provides a description of the parameters that the system uses to create and send a login request, followed by code snippet examples of login requests for each authentication method.\n\nThe login request is a JSON Object Signing and Encryption object (JOSE) that’s formatted per RFC 7519 and signed with the `DeviceSigningKey` and `ES256` per RFC 7515.\n\nFor more information, see [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/configuring-authentication-with-the-identity-provider-idp].\n\n### Create the login request\n\nThe following table specifies the header parameters that the system uses to create a login request:\n\nThe following table specifies the body parameters that the system uses to create a login request:\n\nThe login network request is an HTTP POST to the [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASAuthorizationProviderExtensionLoginConfiguration\/tokenEndpointURL] that’s formatted per RFC 7523 and includes the following parameters:\n\nThe following code provides an example of a login network request:\n\n### Validate the login request\n\nThe identity provider (IdP) needs to validate the login request by performing several checks to verify that the:\n\nIf the `grant_type` is password, the IdP needs to verify that the `password` is correct for the supplied [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASAuthorizationProviderExtensionUserLoginConfiguration\/loginUserName].\n\nIf the `grant_type` is `urn:ietf:params:oauth:grant-type:jwt-bearer,` the IdP needs to perform several checks on the embedded assertion to verify that the:\n\n### Create a login request with a password\n\nThe following code provides an example of a login request with a password:\n\n### Create a login request with an encrypted password\n\nThe following code provides an example of a login request with an encrypted password:\n\n### Create a login request with a secure enclave key\n\nThe following code provides an example of a login request with a secure enclave key:\n\n### Create a login request with a SmartCard\n\nThe following code provides an example of a login request with a SmartCard:",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/authenticationservices\/creating-and-validating-a-login-request\ncrawled: 2025-12-09T17:22:07Z\n---\n\n# Creating and validating a login request\n\n**Article**\n\nCreate a signed JOSE login request.\n\n## Overview\n\nYour login configuration instructs platform SSO how to create and validate a login request based on the authentication method. This article provides a description of the parameters that the system uses to create and send a login request, followed by code snippet examples of login requests for each authentication method.\n\nThe login request is a JSON Object Signing and Encryption object (JOSE) that’s formatted per RFC 7519 and signed with the `DeviceSigningKey` and `ES256` per RFC 7515.\n\nFor more information, see [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/configuring-authentication-with-the-identity-provider-idp].\n\n### Create the login request\n\nThe following table specifies the header parameters that the system uses to create a login request:\n\n\n\nThe following table specifies the body parameters that the system uses to create a login request:\n\n\n\nThe login network request is an HTTP POST to the [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASAuthorizationProviderExtensionLoginConfiguration\/tokenEndpointURL] that’s formatted per RFC 7523 and includes the following parameters:\n\n\n\nThe following code provides an example of a login network request:\n\n```javascript\nPOST \/oauth2\/token HTTP\/1.1\nHost: auth.example.com\nAccept: application\/platformsso-login-response+jwt\nContent-Type: application\/x-www-form-urlencoded\nclient-request-id: DCAB01D3-B1FE-4E1C-802F-B3EBDCDF9E67\nplatform_sso_version=1.0&grant_type=urn:ietf:params:oauth:grant-type:jwt-bearer&assertion=ewogI...A063Eg\n```\n\n### Validate the login request\n\nThe identity provider (IdP) needs to validate the login request by performing several checks to verify that the:\n\n- JWT signature is valid.\n- Signing identity is a known device.\n- `client_id` is correct.\n- `server_nonce` is valid and not replayed.\n- `aud` is the IdP.\n\nIf the `grant_type` is password, the IdP needs to verify that the `password` is correct for the supplied [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASAuthorizationProviderExtensionUserLoginConfiguration\/loginUserName].\n\nIf the `grant_type` is `urn:ietf:params:oauth:grant-type:jwt-bearer,` the IdP needs to perform several checks on the embedded assertion to verify that the:\n\n- JWT signature or decrypts is valid.\n- Signing identity is known for the user.\n- Embedded assertion is for the same user as the login request.\n- `iat` claim isn’t in the future.\n- `exp` claim isn’t in the past.\n- `scope` matches the login request.\n- `audience` is the IdP.\n- `nonce` matches the login request, if included.\n\n### Create a login request with a password\n\nThe following code provides an example of a login request with a password:\n\n```javascript\n{\n    \"kid\" : \"WMPGy7o9k+Wh7DB3V7oXBPh3QCP4xuTXtMANwfzn6+k=\",\n    \"x5c\" : \"MIIBh...8r1E=\",\n    \"typ\" : \"platformsso-login-request+jwt\",\n    \"alg\" : \"ES256\"\n}.{\n    \"jwe_crypto\" : {\n        \"alg\" : \"ECDH-ES\",\n        \"enc\" : \"A256GCM\",\n        \"apv\" : \"AAAAB...zVGRQ\"\n    },\n    \"exp\" : 1685737193,\n    \"nonce\" : \"A79070DA-4058-4060-B09D-91CECFA635FE\",\n    \"request_nonce\" : \"AwABA...YQgAA\",\n    \"scope\" : \"openid offline_access urn:apple:platformsso\",\n    \"grant_type\" : \"password\",\n    \"iss\" : \"aaff1524-fa35-40c5-94e3-2b233c5f2965\",\n    \"password\" : \"password redacted\",\n    \"sub\" : \"foo\",\n    \"claims\" : {\n        \"id_token\" : {\n            \"groups\" : {\n                \"values\" : [\n                    \"com.example.foogroup\",\n                    \"com.example.bargroup\"\n                ]\n            }\n        }\n    },\n    \"aud\" : \"https:\/\/localhost.apple.com:8888\/auth\/token\",\n    \"iat\" : 1685736893,\n    \"username\" : \"foo\",\n    \"client_id\" : \"aaff1524-fa35-40c5-94e3-2b233c5f2965\"\n}.[Signature]\n```\n\n### Create a login request with an encrypted password\n\nThe following code provides an example of a login request with an encrypted password:\n\n```javascript\n{\n    \"kid\" : \"o0sPO3BU5DwCIibsHvfVN4D9tOwVcy1Yv0kKKmRG8qk=\",\n    \"x5c\" : \"MIIBg...xhg==\",\n  \"typ\" : \"platformsso-login-request+jwt\",\n  \"alg\" : \"ES256\"\n}.{\n    \"jwe_crypto\" : {\n        \"alg\" : \"ECDH-ES\",\n        \"enc\" : \"A256GCM\",\n        \"apv\" : \"AAAAB...zBCRA\"\n    },\n    \"exp\" : 1685737279,\n    \"nonce\" : \"0D7578A1-DE84-4237-A77D-62DDEB2670BD\",\n    \"request_nonce\" : \"AwABA...YQgAA\",\n    \"scope\" : \"openid offline_access urn:apple:platformsso\",\n    \"grant_type\" : \"urn:ietf:params:oauth:grant-type:jwt-bearer\",\n    \"iss\" : \"aaff1524-fa35-40c5-94e3-2b233c5f2965\",\n    \"sub\" : \"foo\",\n    \"claims\" : {\n        \"id_token\" : {\n            \"groups\" : {\n                \"values\" : [\n                    \"com.example.foogroup\",\n                    \"com.example.bargroup\"\n                ]\n            }\n        }\n    }, \n    \"aud\" : \"https:\/\/localhost.apple.com:8888\/auth\/token\",\n    \"username\" : \"foo\",\n    \"assertion\" : \"ewogICJlbmMiIDogIkEyNTZHQ00iLAogICJhcHYiIDogIkFBQUFEVUZRVUV4RlJVMUNSVVJFUlVRQUFBQkJCQ1g4N2Vxb25XeU5VTnoySmVIMndHNjhfV2lQZlFsSnc2QWlEdkhTRDA4bjVIZG4xb0RVQnhoTF9UUmFydmhVVUdEWXNuQlJrMkhSSF9ab1hHdHBVbmNBQUFCdVFYZEJRa0ZCUVVGQlFVRkVRVTk2WDBKQlJIWmZlSFJuZFY5VFRURk5kbTl4TURKUVdYcGZXV1pZZUhnMVJrRm5ZMHhJVEU1cGEwZzJaMnB5UWxkM1kzRnVVbGRmYUdGNGNVODVTa05wVUdGME5VdG1hMVJwYkhrd05GTTRSVWd6UVZGM1ZuTlhRM2hJV1ZGblFVRSIsCiAgImFsZyIgOiAiRUNESC1FUyIsCiAgImVwayIgOiB7CiAgICAieSIgOiAiOUVfN0ZyeTlUbDhZdlBncHgzdGc0QTlaQ1FOZkZlZ1BuUWQ0MzNLN0xOTSIsCiAgICAieCIgOiAiU2owYlpzZkhmM3kyMUJRajZ0ejBkUkFwUnhmRGdxdTFwbi1nUGpBcmFCTSIsCiAgICAia3R5IiA6ICJFQyIsCiAgICAiY3J2IiA6ICJQLTI1NiIKICB9LAogICJraWQiIDogIjd5MXhYYzRJNmlBeWxkbVZrSWVHdFF4bzhOUnEyRmdLRmIrK09yMTNqeFU9IiwKICAiYXB1IiA6ICJBQUFBQlVGUVVFeEZBQUFBUVFSS1BSdG14OGRfZkxiVUZDUHEzUFIxRUNsSEY4T0NxN1dtZjZBLU1DdG9FX1JQLXhhOHZVNWZHTHo0S2NkN1lPQVBXUWtEWHhYb0Q1MEhlTjl5dXl6VCIsCiAgInR5cCIgOiAicGxhdGZvcm1zc28tZW5jcnlwdGVkLWxvZ2luLWFzc2VydGlvbitqd3QiCn0..PCPBwllPzLJzaTiw.4InQHbgPs51ExvjLCutmLHzSVLJkxfD5B9lNC1w6H9-7D_FzuinchO6O5Qf0if6IWG0G_bnROLgOvdBEle9Q_0LtF8odeXThBkDszEMqTNpkYhCHmtU6cZgT-lUeHwrA-9mONF5WO4KMIavZOJ_n-6DZWvdMOCgzokx4-OiiPqh5fo0B6MAEQu4AITtXZe7oD6HZAI33zdUD-dQxKNAO2I0aP9RIUP8eLyXkrPY8nIWBRx88aPEtGMs_3uT29BBqGMcMV83zuYFA6TNXTVJy8bCAbeCNZceQbT7lyaFPxZ0s6hg7TSpvIRz7fJX3EXo6a2u4CkkUVgcQrHnfF1aX7v3WOLnYnV1nSO8YPDQYi_m2-bkFSbScmC-ERgmod3m0eV10jA4ag6-TSyB_zlhsVclJQ4suOVyw2YO2Z7AgjRK-BO6GiEMBgbR-P5ad3Zk7v1DVl2MWFMalLfbdcHQNP5drpi4BiY1j0SkFxmdcjTWHea6YAYhmQVjyj29Rd2SOYjRXSXelMftxXO5cZQ.bp-jwZlbdDoL7qjeBbGClw\",\n    \"client_id\" : \"aaff1524-fa35-40c5-94e3-2b233c5f2965\",\n    \"iat\" : 1685736979\n}.[Signature]\n```\n\n### Create a login request with a secure enclave key\n\nThe following code provides an example of a login request with a secure enclave key:\n\n```javascript\n{\n    \"kid\" : \"R7hXA3CADcaDzreUMbIJWkTw5IjreuwANl9Rj2tAHbk=\",\n    \"x5c\" : \"MIIBg...XuQ==\",\n    \"typ\" : \"platformsso-login-assertion+jwt\",\n    \"alg\" : \"ES256\"\n}.{\n    \"jwe_crypto\" : {\n        \"alg\" : \"ECDH-ES\",\n        \"enc\" : \"A256GCM\",\n        \"apv\" : \"AAAAB...jM5RQ\"\n    },\n    \"exp\" : 1685737367,\n    \"nonce\" : \"E0DA0950-3EC4-486E-9C70-A9B4D28CB39E\",\n    \"request_nonce\" : \"AwABAAAAAAADAOz_BADv_xtgu_SM1Mvoq02PYz_YfXxx5FAgcLHLNikH6gjrBWwcqnRW_haxqO9JCiPat5KfkTily04S8EH3AQwVsWCxHYQgAA\",\n    \"scope\" : \"openid offline_access urn:apple:platformsso\",\n    \"grant_type\" : \"urn:ietf:params:oauth:grant-type:jwt-bearer\",\n    \"iss\" : \"aaff1524-fa35-40c5-94e3-2b233c5f2965\",\n    \"sub\" : \"foo\",\n    \"claims\" : {\n        \"id_token\" : {\n            \"groups\" : {\n                \"values\" : [\n                    \"com.example.foogroup\",\n                    \"com.example.bargroup\"\n                ]\n            } \n        }\n    }, \n    \"aud\" : \"https:\/\/localhost.apple.com:8888\/auth\/token\",\n    \"username\" : \"foo\",\n    \"assertion\" : \"ewogICJ0eXAiIDogInBsYXRmb3Jtc3NvLWxvZ2luLWFzc2VydGlvbitqd3QiLAogICJhbGciIDogIkVTMjU2IiwKICAia2lkIiA6ICJ3dzJyVFhrSWNOeG5ma3BBZi8zRFN3ZldBL2pKOUpuNVh0dlhKMVh5NzhNPSIKfQ.ewogICJub25jZSIgOiAiRTBEQTA5NTAtM0VDNC00ODZFLTlDNzAtQTlCNEQyOENCMzlFIiwKICAiaWF0IiA6IDE2ODU3MzcwNjcsCiAgInJlcXVlc3Rfbm9uY2UiIDogIkF3QUJBQUFBQUFBREFPel9CQUR2X3h0Z3VfU00xTXZvcTAyUFl6X1lmWHh4NUZBZ2NMSExOaWtINmdqckJXd2NxblJXX2hheHFPOUpDaVBhdDVLZmtUaWx5MDRTOEVIM0FRd1ZzV0N4SFlRZ0FBIiwKICAic3ViIiA6ICJmb28iLAogICJzY29wZSIgOiAib3BlbmlkIG9mZmxpbmVfYWNjZXNzIHVybjphcHBsZTpwbGF0Zm9ybXNzbyIsCiAgImV4cCIgOiAxNjg1NzM3MzY3LAogICJhdWQiIDogIjA2MDc5OEZGLTgxNEUtNEMzOC05N0Y4LTI4Qzk1NEI3RTA1OCIsCiAgImlzcyIgOiAiZm9vIgp9.jmAh1SQJVaqhQhYc5QFGq7R_CsSeMxGF9KFn7PERV9TP37qe5q1MIhdspbFLShK-_7YcjqpX-thzBVINaXNbnQ\",\n    \"client_id\" : \"aaff1524-fa35-40c5-94e3-2b233c5f2965\",\n    \"iat\" : 1685737067\n}.[Signature]\n```\n\n### Create a login request with a SmartCard\n\nThe following code provides an example of a login request with a SmartCard:\n\n```javascript\n{\n    \"kid\" : \"MvmFTLE0N7t+SPx8QRYjPB2JzeCYPyL7rZTjsFAlOzs=\",\n    \"x5c\" : \"MIIBg...RtQ==\",\n    \"typ\" : \"platformsso-login-request+jwt\",\n    \"alg\" : \"ES256\"\n}.{\n    \"jwe_crypto\" : {\n        \"alg\" : \"ECDH-ES\",\n        \"enc\" : \"A256GCM\",\n        \"apv\" : \"AAAAB...Tg1MQ\"\n    },\n    \"exp\" : 1685737424,\n    \"nonce\" : \"CBA6437A-ED3F-438C-B859-078E058F1851\",\n    \"request_nonce\" :\"AwABA...YQgAA\",\n    \"scope\" : \"openid offline_access urn:apple:platformsso\",\n    \"grant_type\" : \"urn:ietf:params:oauth:grant-type:jwt-bearer\",\n    \"iss\" : \"aaff1524-fa35-40c5-94e3-2b233c5f2965\",\n    \"sub\" : \"foo\",\n    \"claims\" : {\n        \"id_token\" : {\n            \"groups\" : {\n                \"values\" : [\n                    \"com.example.foogroup\",\n                    \"com.example.bargroup\"\n                ]\n            }\n        }\n    }, \n    \"aud\" : \"https:\/\/localhost.apple.com:8888\/auth\/token\",\n    \"username\" : \"foo\",\n    \"assertion\" : \"ewogICJraWQiIDogIlV3M3ZzRGI4dW1IVVgwNWE2TUNibEVieXBiSE5HVU0xTUNFK1gxaE5hOFk9IiwKICAieDVjIiA6ICJNSUlCakRDQ0FUR2dBd0lCQWdJQkFUQUtCZ2dxaGtqT1BRUURBakE3TVJnd0ZnWURWUVFEREE5bWIyOUFaWGhoYlhCc1pTNWpiMjB4Q3pBSkJnTlZCQVlUQWxWVE1SSXdFQVlEVlFRS0V3bEJjSEJzWlNCSmJtTXdIaGNOTWpNd05qQXlNakF4T0RRMFdoY05NalF3TmpBeE1qQXhPRFEwV2pBN01SZ3dGZ1lEVlFRRERBOW1iMjlBWlhoaGJYQnNaUzVqYjIweEN6QUpCZ05WQkFZVEFsVlRNUkl3RUFZRFZRUUtFd2xCY0hCc1pTQkpibU13V1RBVEJnY3Foa2pPUFFJQkJnZ3Foa2pPUFFNQkJ3TkNBQVFqWWovNzFPMmhrYWJwOTA5RTlmcmxmc2hSTysxNExzd0NZanlaY3dRSC9aeEpnM1BidjZkL3NIelNTd0ZXS2kydFJaS1VTS3BxQXhrdXpZaXZiRnVCb3lZd0pEQVNCZ05WSFJNQkFmOEVDREFHQVFIL0FnRUFNQTRHQTFVZER3RUIvd1FFQXdJQUFEQUtCZ2dxaGtqT1BRUURBZ05KQURCR0FpRUF3SWU4L2FXOXd1MjFUMWh1cEFNZkt4OUhvQkxsRkpvaE5QQlRrcFh4NGNJQ0lRQ0hVRGdySGZ1RTNRZjRmZi8wV1BueU9mc1g4aCsvVXZvUDgxUU1XcGtPanc9PSIsCiAgInR5cCIgOiAicGxhdGZvcm1zc28tbG9naW4tYXNzZXJ0aW9uK2p3dCIsCiAgImFsZyIgOiAiRVMyNTYiCn0.ewogICJub25jZSIgOiAiQ0JBNjQzN0EtRUQzRi00MzhDLUI4NTktMDc4RTA1OEYxODUxIiwKICAiaWF0IiA6IDE2ODU3MzcxMjQsCiAgInJlcXVlc3Rfbm9uY2UiIDogIkF3QUJBQUFBQUFBREFPel9CQUR2X3h0Z3VfU00xTXZvcTAyUFl6X1lmWHh4NUZBZ2NMSExOaWtINmdqckJXd2NxblJXX2hheHFPOUpDaVBhdDVLZmtUaWx5MDRTOEVIM0FRd1ZzV0N4SFlRZ0FBIiwKICAic3ViIiA6ICJmb28iLAogICJzY29wZSIgOiAib3BlbmlkIG9mZmxpbmVfYWNjZXNzIHVybjphcHBsZTpwbGF0Zm9ybXNzbyIsCiAgImV4cCIgOiAxNjg1NzM3NDI0LAogICJhdWQiIDogIjA2MDc5OEZGLTgxNEUtNEMzOC05N0Y4LTI4Qzk1NEI3RTA1OCIsCiAgImlzcyIgOiAiZm9vIgp9.Ybc1XQeKUO5y5eMvKMVnHj5j-bqh8UnhUfDc76RJFG1viuc3M9OI0D7lKylLcw0V9Y5H-ZAmbxLKg47yh8qxaw\",\n    \"client_id\" : \"aaff1524-fa35-40c5-94e3-2b233c5f2965\",\n    \"iat\" : 1685737124\n}.[Signature]\n```\n\n## Login request\n\n- **Performing a WS-Trust login request**: Create a WS-Trust login request using the metadata exchange data (MEX) response.\n- **Creating an embedded assertion**: Request an embedded assertion for login types that require a digital signature for authentication.\n- **Creating an encrypted embedded assertion**: Request an encrypted embedded assertion for login types that require password encryption.\n- **Creating a refresh request**: Refresh a non-expired token instead of sending a new login request.\n- **Supporting key requests and key exchange requests**: Support the platform SSO 2.0 protocol for encryption and decryption operations.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Create a WS-Trust login request using the metadata exchange data (MEX) response.",
          "name" : "Performing a WS-Trust login request",
          "url" : "https:\/\/developer.apple.com\/documentation\/AuthenticationServices\/performing-a-ws-trust-login-request"
        },
        {
          "description" : "Request an embedded assertion for login types that require a digital signature for authentication.",
          "name" : "Creating an embedded assertion",
          "url" : "https:\/\/developer.apple.com\/documentation\/AuthenticationServices\/creating-an-embedded-assertion"
        },
        {
          "description" : "Request an encrypted embedded assertion for login types that require password encryption.",
          "name" : "Creating an encrypted embedded assertion",
          "url" : "https:\/\/developer.apple.com\/documentation\/AuthenticationServices\/creating-an-encrypted-embedded-assertion"
        },
        {
          "description" : "Refresh a non-expired token instead of sending a new login request.",
          "name" : "Creating a refresh request",
          "url" : "https:\/\/developer.apple.com\/documentation\/AuthenticationServices\/creating-a-refresh-request"
        },
        {
          "description" : "Support the platform SSO 2.0 protocol for encryption and decryption operations.",
          "name" : "Supporting key requests and key exchange requests",
          "url" : "https:\/\/developer.apple.com\/documentation\/AuthenticationServices\/supporting-key-requests-and-key-exchange-requests"
        }
      ],
      "title" : "Login request"
    }
  ],
  "source" : "appleJSON",
  "title" : "Creating and validating a login request",
  "url" : "https:\/\/developer.apple.com\/documentation\/authenticationservices\/creating-and-validating-a-login-request"
}