{
  "abstract" : "Specify how platform SSO authenticates with the identity provider.",
  "codeExamples" : [

  ],
  "contentHash" : "317d71e438a469163c66139e8cf7470fd486ac8a14c7efd5a9ec732d381274ab",
  "crawledAt" : "2025-12-06T07:15:04Z",
  "id" : "1543456B-400B-4531-A5CE-63681CC5780B",
  "kind" : "article",
  "language" : "swift",
  "module" : "Authentication Services",
  "overview" : "## Overview\n\nUse a login configuration to instruct platform SSO how to authenticate with the identity provider.\n\nUse [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASAuthorizationProviderExtensionLoginConfiguration\/additionalAuthorizationScopes] to differentiate authentication requests for network account authorization from other login requests. For example, these requests can return temporary admin group membership.\n\nThe [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASAuthorizationProviderExtensionLoginConfiguration\/accountDisplayName] is the user-friendly name for the IdP, and replaces “identity provider” in notifications and the authentication dialog.\n\n### Configure for federation\n\nFederation enables authentication between security domains, such as from a local IdP to a cloud IdP.  You have two options to configure platform SSO for federation:\n\nTo use WS-Trust, set [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASAuthorizationProviderExtensionLoginConfiguration\/federationType-swift.property] to [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASAuthorizationProviderExtensionLoginConfiguration\/FederationType-swift.enum\/wsTrust]. This federation type sends the WS-Trust request to the URLs in the metadata exchange data (MEX) response. The required configuration values are:\n\nTo use Dynamic WS-Trust, set [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASAuthorizationProviderExtensionLoginConfiguration\/federationType-swift.property] to [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASAuthorizationProviderExtensionLoginConfiguration\/FederationType-swift.enum\/dynamicWSTrust]. Dynamic WS-Trust sends a preauthentication to the IdP to determine whether to use federation and where to authenticate. The required configuration values are:\n\n### Use the login manager to interface with Platform SSO\n\nThe SSO extension uses [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASAuthorizationProviderExtensionLoginManager] to interface with platform SSO. The system provides and instance of the login manager for each authentication request. The login manager can:\n\nIf the extension detects that the keys or the device become compromised due to a security exploit, it can reset the keys and request device registration again. In this case, the extension needs to return `failedNoRetry` during registration until macOS is patched.\n\n### Migrate from per-user device keys to shared device keys\n\nDevices keys represent the device to the IdP. They keys can either be *per-user*, which means each user on the device has separate keys, or *shared*, which means all users on the device use the same keys. Shared device keys enable a device to authenticate with the IdP before a user logs in. Shared keys are available in macOS 14 and later.\n\nThe following table summarizes feature availability for per-user device keys and shared device keys:\n\nTo migrate from user keys to shared keys you need to create new secure enclave backed keys and register these with the server. To facilitate this, the system initiates device registration on the SSO extension for migration with the [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASAuthorizationProviderExtensionRequestOptions\/registrationDeviceKeyMigration] option set. Both the user keys and the new shared keys are available only during this call. Use [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASAuthorizationProviderExtensionLoginManager\/key(for:)] to access them. The SSO extension needs to register the new shared keys with the server and can use the existing user keys to provide a chain of trust.\n\nWhen Device registration completes successfully, the system initiates user registration with the [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASAuthorizationProviderExtensionRequestOptions\/registrationDeviceKeyMigration] option set. You also need to migrate any user-specific login configuration to the [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASAuthorizationProviderExtensionUserLoginConfiguration] at this time. When user registration completes successfully, the system destroys the user keys and previous login configuration. For subsequent users, the same user registration flow repeats and the system destroys the user keys after a successful response.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/authenticationservices\/configuring-authentication-with-the-identity-provider-idp\ncrawled: 2025-12-06T07:15:04Z\n---\n\n# Configuring authentication with the identity provider (IdP)\n\n**Article**\n\nSpecify how platform SSO authenticates with the identity provider.\n\n## Overview\n\nUse a login configuration to instruct platform SSO how to authenticate with the identity provider.\n\nUse [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASAuthorizationProviderExtensionLoginConfiguration\/additionalAuthorizationScopes] to differentiate authentication requests for network account authorization from other login requests. For example, these requests can return temporary admin group membership.\n\nThe [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASAuthorizationProviderExtensionLoginConfiguration\/accountDisplayName] is the user-friendly name for the IdP, and replaces “identity provider” in notifications and the authentication dialog.\n\n### Configure for federation\n\nFederation enables authentication between security domains, such as from a local IdP to a cloud IdP.  You have two options to configure platform SSO for federation:\n\n\n\nTo use WS-Trust, set [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASAuthorizationProviderExtensionLoginConfiguration\/federationType-swift.property] to [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASAuthorizationProviderExtensionLoginConfiguration\/FederationType-swift.enum\/wsTrust]. This federation type sends the WS-Trust request to the URLs in the metadata exchange data (MEX) response. The required configuration values are:\n\n\n\nTo use Dynamic WS-Trust, set [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASAuthorizationProviderExtensionLoginConfiguration\/federationType-swift.property] to [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASAuthorizationProviderExtensionLoginConfiguration\/FederationType-swift.enum\/dynamicWSTrust]. Dynamic WS-Trust sends a preauthentication to the IdP to determine whether to use federation and where to authenticate. The required configuration values are:\n\n\n\n### Use the login manager to interface with Platform SSO\n\nThe SSO extension uses [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASAuthorizationProviderExtensionLoginManager] to interface with platform SSO. The system provides and instance of the login manager for each authentication request. The login manager can:\n\n- Update the login configuration.\n- Update SSO tokens.\n- Request that the user authenticate again in the case of expired credentials.\n- Access the device keys to sign, encrypt, and decrypt additional requests.\n- Restart registration if an unrecoverable error occurs.\n\nIf the extension detects that the keys or the device become compromised due to a security exploit, it can reset the keys and request device registration again. In this case, the extension needs to return `failedNoRetry` during registration until macOS is patched.\n\n### Migrate from per-user device keys to shared device keys\n\nDevices keys represent the device to the IdP. They keys can either be *per-user*, which means each user on the device has separate keys, or *shared*, which means all users on the device use the same keys. Shared device keys enable a device to authenticate with the IdP before a user logs in. Shared keys are available in macOS 14 and later.\n\nThe following table summarizes feature availability for per-user device keys and shared device keys:\n\n\n\nTo migrate from user keys to shared keys you need to create new secure enclave backed keys and register these with the server. To facilitate this, the system initiates device registration on the SSO extension for migration with the [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASAuthorizationProviderExtensionRequestOptions\/registrationDeviceKeyMigration] option set. Both the user keys and the new shared keys are available only during this call. Use [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASAuthorizationProviderExtensionLoginManager\/key(for:)] to access them. The SSO extension needs to register the new shared keys with the server and can use the existing user keys to provide a chain of trust.\n\nWhen Device registration completes successfully, the system initiates user registration with the [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASAuthorizationProviderExtensionRequestOptions\/registrationDeviceKeyMigration] option set. You also need to migrate any user-specific login configuration to the [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASAuthorizationProviderExtensionUserLoginConfiguration] at this time. When user registration completes successfully, the system destroys the user keys and previous login configuration. For subsequent users, the same user registration flow repeats and the system destroys the user keys after a successful response.\n\n## Configuration\n\n- **Configuring Device Management**: Configure Device Management to support device and user registration for platform SSO.\n- **ASAuthorizationProviderExtensionLoginConfiguration**: An interface for configuring platform single sign-on.\n- **ASAuthorizationProviderExtensionLoginManager**: An interface to maintain platform single sign-on (SSO) during authentication and registration.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Configure Device Management to support device and user registration for platform SSO.",
          "name" : "Configuring Device Management",
          "url" : "https:\/\/developer.apple.com\/documentation\/AuthenticationServices\/configuring-device-management"
        },
        {
          "description" : "An interface for configuring platform single sign-on.",
          "name" : "ASAuthorizationProviderExtensionLoginConfiguration",
          "url" : "https:\/\/developer.apple.com\/documentation\/AuthenticationServices\/ASAuthorizationProviderExtensionLoginConfiguration"
        },
        {
          "description" : "An interface to maintain platform single sign-on (SSO) during authentication and registration.",
          "name" : "ASAuthorizationProviderExtensionLoginManager",
          "url" : "https:\/\/developer.apple.com\/documentation\/AuthenticationServices\/ASAuthorizationProviderExtensionLoginManager"
        }
      ],
      "title" : "Configuration"
    }
  ],
  "source" : "appleJSON",
  "title" : "Configuring authentication with the identity provider (IdP)",
  "url" : "https:\/\/developer.apple.com\/documentation\/authenticationservices\/configuring-authentication-with-the-identity-provider-idp"
}