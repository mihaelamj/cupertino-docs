{
  "abstract" : "Prepares the interface to display a list of one-time passcodes (OTPs) that people can select from.",
  "codeExamples" : [
    {
      "code" : "let credential = ASOneTimeCodeCredential(code: otpCode)\nawait extensionContext.completeOneTimeCodeRequest(using: credential)",
      "language" : "swift"
    },
    {
      "code" : "let error = NSError(domain: ASExtensionErrorDomain,\n                    code: ASExtensionError.userCanceled.rawValue)\nextensionContext.cancelRequest(withError: error)",
      "language" : "swift"
    }
  ],
  "contentHash" : "0d60d75f70e16aa99c87eb1b953354ec1b82fa74a2211c37d13d0e7569b0c6ad",
  "crawledAt" : "2025-12-03T04:23:36Z",
  "declaration" : {
    "code" : "@MainActor func prepareOneTimeCodeCredentialList(for serviceIdentifiers: [ASCredentialServiceIdentifier])",
    "language" : "swift"
  },
  "id" : "8AEB2F91-ACC2-4547-BDB3-49D02739214F",
  "kind" : "method",
  "language" : "swift",
  "module" : "Authentication Services",
  "overview" : "## Overview\n\n## Discussion\n\nThe system calls this method to tell your extension’s view controller to prepare a list of OTPs to present. After calling this method, the system presents the view controller to the person.\n\nUse the given `serviceIdentifiers` array to filter or prioritize the credentials to display. The service identifier array might be empty, but your extension still shows credentials that the person can select from.\n\nItems in the array with lower indices represent more specific identifiers for which an OTP’s requested. For example, if the array contains identifiers `[m.example.com, example.com]`, the item `m.example.com` represents the more specific service that requires an OTP.\n\nWhen someone selects an OTP displayed by your view controller, represent the passcode as an [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASOneTimeCodeCredential] and pass it to the system by calling [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASCredentialProviderExtensionContext\/completeOneTimeCodeRequest(using:completionHandler:)]:\n\nAlways provide a way for someone to cancel the operation from your view controller, for example, by including a Cancel button in the navigation bar. When someone cancels the operation, call [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASCredentialProviderExtensionContext\/cancelRequest(withError:)], using the error domain [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASExtensionErrorDomain] and code [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASExtensionError\/userCanceled]:\n\nThe system dismisses your view controller after you call either the completion or cancellation method.",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "visionOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/AuthenticationServices\/ASCredentialProviderViewController\/prepareOneTimeCodeCredentialList(for:)\ncrawled: 2025-12-03T04:23:36Z\n---\n\n# prepareOneTimeCodeCredentialList(for:)\n\n**Instance Method**\n\nPrepares the interface to display a list of one-time passcodes (OTPs) that people can select from.\n\n## Declaration\n\n```swift\n@MainActor func prepareOneTimeCodeCredentialList(for serviceIdentifiers: [ASCredentialServiceIdentifier])\n```\n\n## Parameters\n\n- **serviceIdentifiers**: An array of service identifiers that provide a hint about the service that people need an OTP for.\n\n## Overview\n\n## Discussion\n\nThe system calls this method to tell your extension’s view controller to prepare a list of OTPs to present. After calling this method, the system presents the view controller to the person.\n\nUse the given `serviceIdentifiers` array to filter or prioritize the credentials to display. The service identifier array might be empty, but your extension still shows credentials that the person can select from.\n\nItems in the array with lower indices represent more specific identifiers for which an OTP’s requested. For example, if the array contains identifiers `[m.example.com, example.com]`, the item `m.example.com` represents the more specific service that requires an OTP.\n\nWhen someone selects an OTP displayed by your view controller, represent the passcode as an [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASOneTimeCodeCredential] and pass it to the system by calling [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASCredentialProviderExtensionContext\/completeOneTimeCodeRequest(using:completionHandler:)]:\n\n```swift\nlet credential = ASOneTimeCodeCredential(code: otpCode)\nawait extensionContext.completeOneTimeCodeRequest(using: credential)\n```\n\nAlways provide a way for someone to cancel the operation from your view controller, for example, by including a Cancel button in the navigation bar. When someone cancels the operation, call [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASCredentialProviderExtensionContext\/cancelRequest(withError:)], using the error domain [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASExtensionErrorDomain] and code [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASExtensionError\/userCanceled]:\n\n```swift\nlet error = NSError(domain: ASExtensionErrorDomain,\n                    code: ASExtensionError.userCanceled.rawValue)\nextensionContext.cancelRequest(withError: error)\n```\n\nThe system dismisses your view controller after you call either the completion or cancellation method.\n\n## Selecting a credential\n\n- **prepareCredentialList(for:)**: Prepares the interface to display a list of credentials from which the user can select.\n- **prepareCredentialList(for:requestParameters:)**: Prepares the interface to display a list of passkey and password credentials from which the user can select.\n- **prepareInterface(forPasskeyRegistration:)**: Prepare the view controller to show user interface for registering a new passkey.\n- **prepareInterfaceToProvideCredential(for:)**: Prepare the view controller to show user interface for providing the requested credential.\n- **provideCredentialWithoutUserInteraction(for:)**: Attempts to provide the user-requested credential with no further user interaction.\n- **performWithoutUserInteractionIfPossible(passkeyRegistration:)**: Perform a conditional passkey registration, if possible.\n- **ASCredentialServiceIdentifier**: An identifier representing a particular service for which the user needs a credential, like a web site.\n- **ASCredentialRequest**: A protocol that describes a request from the user for your extension to provide a credential.\n- **ASPasswordCredentialRequest**: A class that represents a request to supply a password credential.\n- **ASOneTimeCodeCredentialRequest**\n- **ASAuthorizationPublicKeyCredentialRegistrationRequest**: An interface that defines properties for a credential registration request.\n- **ASPasskeyCredentialRequest**: A class that represents a request to supply a passkey credential.\n- **ASPasskeyCredentialRequestParameters**: A class that represents information about a passkey credential request.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Prepares the interface to display a list of credentials from which the user can select.",
          "name" : "prepareCredentialList(for:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AuthenticationServices\/ASCredentialProviderViewController\/prepareCredentialList(for:)"
        },
        {
          "description" : "Prepares the interface to display a list of passkey and password credentials from which the user can select.",
          "name" : "prepareCredentialList(for:requestParameters:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AuthenticationServices\/ASCredentialProviderViewController\/prepareCredentialList(for:requestParameters:)"
        },
        {
          "description" : "Prepare the view controller to show user interface for registering a new passkey.",
          "name" : "prepareInterface(forPasskeyRegistration:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AuthenticationServices\/ASCredentialProviderViewController\/prepareInterface(forPasskeyRegistration:)"
        },
        {
          "description" : "Prepare the view controller to show user interface for providing the requested credential.",
          "name" : "prepareInterfaceToProvideCredential(for:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AuthenticationServices\/ASCredentialProviderViewController\/prepareInterfaceToProvideCredential(for:)-68qpo"
        },
        {
          "description" : "Attempts to provide the user-requested credential with no further user interaction.",
          "name" : "provideCredentialWithoutUserInteraction(for:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AuthenticationServices\/ASCredentialProviderViewController\/provideCredentialWithoutUserInteraction(for:)-3mo23"
        },
        {
          "description" : "Perform a conditional passkey registration, if possible.",
          "name" : "performWithoutUserInteractionIfPossible(passkeyRegistration:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AuthenticationServices\/ASCredentialProviderViewController\/performWithoutUserInteractionIfPossible(passkeyRegistration:)"
        },
        {
          "description" : "An identifier representing a particular service for which the user needs a credential, like a web site.",
          "name" : "ASCredentialServiceIdentifier",
          "url" : "https:\/\/developer.apple.com\/documentation\/AuthenticationServices\/ASCredentialServiceIdentifier"
        },
        {
          "description" : "A protocol that describes a request from the user for your extension to provide a credential.",
          "name" : "ASCredentialRequest",
          "url" : "https:\/\/developer.apple.com\/documentation\/AuthenticationServices\/ASCredentialRequest"
        },
        {
          "description" : "A class that represents a request to supply a password credential.",
          "name" : "ASPasswordCredentialRequest",
          "url" : "https:\/\/developer.apple.com\/documentation\/AuthenticationServices\/ASPasswordCredentialRequest"
        },
        {
          "description" : "",
          "name" : "ASOneTimeCodeCredentialRequest",
          "url" : "https:\/\/developer.apple.com\/documentation\/AuthenticationServices\/ASOneTimeCodeCredentialRequest"
        },
        {
          "description" : "An interface that defines properties for a credential registration request.",
          "name" : "ASAuthorizationPublicKeyCredentialRegistrationRequest",
          "url" : "https:\/\/developer.apple.com\/documentation\/AuthenticationServices\/ASAuthorizationPublicKeyCredentialRegistrationRequest"
        },
        {
          "description" : "A class that represents a request to supply a passkey credential.",
          "name" : "ASPasskeyCredentialRequest",
          "url" : "https:\/\/developer.apple.com\/documentation\/AuthenticationServices\/ASPasskeyCredentialRequest"
        },
        {
          "description" : "A class that represents information about a passkey credential request.",
          "name" : "ASPasskeyCredentialRequestParameters",
          "url" : "https:\/\/developer.apple.com\/documentation\/AuthenticationServices\/ASPasskeyCredentialRequestParameters"
        }
      ],
      "title" : "Selecting a credential"
    }
  ],
  "source" : "appleJSON",
  "title" : "prepareOneTimeCodeCredentialList(for:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/AuthenticationServices\/ASCredentialProviderViewController\/prepareOneTimeCodeCredentialList(for:)"
}