{
  "abstract" : "Extend your web browser app to handle web authentication requests from other apps.",
  "codeExamples" : [
    {
      "code" : "class MyAuthenticationHandler: ASWebAuthenticationSessionWebBrowserSessionHandling {\n    var request: ASWebAuthenticationSessionRequest?\n}",
      "language" : "swift"
    },
    {
      "code" : "func begin(_ request: ASWebAuthenticationSessionRequest!) {\n    self.request = request   \/\/ Store for later.\n\n    if request.shouldUseEphemeralSession == true {\n        \/\/ Load request.url in an isolated session and wait for the callback.\n    } else {\n        \/\/ Load request.url and wait for the callback.\n    }\n}",
      "language" : "swift"
    },
    {
      "code" : "func cancel(_ request: ASWebAuthenticationSessionRequest!) {\n    \/\/ Abandon the request and clean up.\n    self.request = nil\n}",
      "language" : "swift"
    },
    {
      "code" : "func applicationDidFinishLaunching(_ aNotification: Notification) {\n    let manager = ASWebAuthenticationSessionWebBrowserSessionManager.shared\n    manager.sessionHandler = MyAuthenticationHandler()\n    \/\/ The manager keeps a strong reference to your handler.\n}",
      "language" : "swift"
    },
    {
      "code" : "func webView(_ webView: WKWebView,\n             decidePolicyFor navigationAction: WKNavigationAction,\n             decisionHandler: @escaping (WKNavigationActionPolicy) -> Void) {\n\n    guard let url = navigationAction.request.url else { return }\n\n    if url.scheme == request?.callbackURLScheme {\n        request?.complete(withCallbackURL: url)\n    } else {\n        \/\/ Handle normally.\n    }\n}",
      "language" : "swift"
    },
    {
      "code" : "func applicationDidFinishLaunching(_ aNotification: Notification) {\n    let manager = ASWebAuthenticationSessionWebBrowserSessionManager.shared\n    manager.sessionHandler = MyAuthenticationHandler()\n\n    if manager.wasLaunchedByAuthenticationServices == true {\n        \/\/ Adjust startup behavior accordingly.\n    }\n}",
      "language" : "swift"
    }
  ],
  "contentHash" : "4ebcfb5bfe65f7cfbae5d268d343013dfdaa08c74ccea875ec99bc964630ef76",
  "crawledAt" : "2025-12-04T21:48:20Z",
  "id" : "8927E6BF-FC6E-41D2-92A0-C2193857BCC4",
  "kind" : "article",
  "language" : "swift",
  "module" : "Authentication Services",
  "overview" : "## Overview\n\nApps can authenticate users through a web service using an instance of [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASWebAuthenticationSession]. When an app calls the authentication session’s [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASWebAuthenticationSession\/start()] method, the system asks the user’s default web browser to initiate the authentication attempt at a given URL. If the default browser doesn’t handle authentication requests, the system falls back on Safari. Either way, the designated browser loads the URL, waits for the user to authenticate, and returns a callback URL that indicates the outcome of the attempt.\n\nIf you distribute a web browser app on macOS, you can make it eligible to participate in this flow. You register the browser as a session handler, and then listen for and handle authentication requests.\n\n### Declare the Session Handling Capability\n\nUsing the Xcode property list editor, add the [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Information-Property-List\/ASWebAuthenticationSessionWebBrowserSupportCapabilities] key to your web browser’s [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Information-Property-List]. For the key’s value, create a dictionary that contains the [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Information-Property-List\/ASWebAuthenticationSessionWebBrowserSupportCapabilities\/IsSupported] key, with a corresponding value of `YES`.\n\n\n\nBy declaring this capability, you tell the system that your web browser app handles single sign-on requests. If the user has set your browser as the default, the system routes authentication requests to it.\n\nOptionally, add the [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Information-Property-List\/ASWebAuthenticationSessionWebBrowserSupportCapabilities\/EphemeralBrowserSessionIsSupported] key with a value that indicates whether your browser supports ephemeral browsing.\n\n\n\nIf you don’t provide the key, or if you set its value to `NO` and an app tries to conduct an ephemeral authentication session, the system warns the user. If do you declare support by setting the value to `YES`, be sure to respect the [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASWebAuthenticationSessionRequest\/shouldUseEphemeralSession] property on any incoming authentication requests, as described below in [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/supporting-single-sign-on-in-a-web-browser-app#Perform-Authentication].\n\n### Listen for Authentication Requests\n\nAdopt the [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASWebAuthenticationSessionWebBrowserSessionHandling] protocol in your web browser app to receive authentication requests. Choose a class that can act as the handler, and declare conformance to the protocol:\n\nFrom within the conforming class, implement the protocol’s [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASWebAuthenticationSessionWebBrowserSessionHandling\/begin(_:)] method to receive new [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASWebAuthenticationSessionRequest] instances. Handle the request using the data it encapsulates as described in [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/supporting-single-sign-on-in-a-web-browser-app#Perform-Authentication] below.\n\nImplement the [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASWebAuthenticationSessionWebBrowserSessionHandling\/cancel(_:)] method to listen for cancellations, which might happen if the calling app terminates or cancels the operation. If you have multiple requests in progress, you can use the cancellation request’s [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASWebAuthenticationSessionRequest\/uuid] property to identify the in-progress request to cancel:\n\nAfter implementing the interface, tell the system how to find your session handler by setting the [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASWebAuthenticationSessionWebBrowserSessionManager\/sessionHandler] property of the shared session manager. You typically do this once at startup. For example, you might set the property in your app delegate’s [doc:\/\/com.apple.documentation\/documentation\/AppKit\/NSApplicationDelegate\/applicationDidFinishLaunching(_:)] method:\n\n### Perform Authentication\n\nWhen your handler receives a new authentication request, load the URL given in the request’s [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASWebAuthenticationSessionRequest\/url] property and display the content to the user. The user interacts with the content to authenticate—for example, by entering credentials and clicking a button. The service performing the authentication indicates the outcome by redirecting the browser to a URL that uses a known callback scheme.\n\nThe request’s [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASWebAuthenticationSessionRequest\/callbackURLScheme] property tells your browser what callback scheme the service uses. When your browser detects a redirect involving this scheme, pass the entire URL back to the session manager by calling the request’s [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASWebAuthenticationSessionRequest\/complete(withCallbackURL:)] method. For example, when using the WebKit API, you can do this from the navigation delegate’s [doc:\/\/com.apple.documentation\/documentation\/WebKit\/WKNavigationDelegate\/webView(_:decidePolicyFor:decisionHandler:)-2ni62] method:\n\nAlternatively, if the browser can’t complete the operation for any reason—for example, because the user has closed the authentication window—call the request’s [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASWebAuthenticationSessionRequest\/cancelWithError(_:)] method instead.\n\nIf you declare that your browser supports ephemeral browsing, as described above in [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/supporting-single-sign-on-in-a-web-browser-app#Declare-the-Session-Handling-Capability], be sure to respect the request’s [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASWebAuthenticationSessionRequest\/shouldUseEphemeralSession] property. When this value is `true`, avoid using any existing browsing data, like cookies, during the authentication process. Also, avoid retaining any data collected during the authentication attempt beyond the lifetime of the attempt, or sharing it with any other session.\n\n### Handle Launch for Authentication\n\nWhen your browser supports the authentication flow, the system might launch the browser specifically for the purpose of authentication. You can detect this condition by checking the [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASWebAuthenticationSessionWebBrowserSessionManager\/wasLaunchedByAuthenticationServices] property of the shared session manager.\n\nUse this indicator to adjust the behavior of your browser at startup. For example, you might avoid restoring previously open windows or tabs.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/AuthenticationServices\/supporting-single-sign-on-in-a-web-browser-app\ncrawled: 2025-12-04T21:48:20Z\n---\n\n# Supporting Single Sign-On in a Web Browser App\n\n**Article**\n\nExtend your web browser app to handle web authentication requests from other apps.\n\n## Overview\n\nApps can authenticate users through a web service using an instance of [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASWebAuthenticationSession]. When an app calls the authentication session’s [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASWebAuthenticationSession\/start()] method, the system asks the user’s default web browser to initiate the authentication attempt at a given URL. If the default browser doesn’t handle authentication requests, the system falls back on Safari. Either way, the designated browser loads the URL, waits for the user to authenticate, and returns a callback URL that indicates the outcome of the attempt.\n\nIf you distribute a web browser app on macOS, you can make it eligible to participate in this flow. You register the browser as a session handler, and then listen for and handle authentication requests.\n\n### Declare the Session Handling Capability\n\nUsing the Xcode property list editor, add the [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Information-Property-List\/ASWebAuthenticationSessionWebBrowserSupportCapabilities] key to your web browser’s [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Information-Property-List]. For the key’s value, create a dictionary that contains the [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Information-Property-List\/ASWebAuthenticationSessionWebBrowserSupportCapabilities\/IsSupported] key, with a corresponding value of `YES`.\n\n\n\nBy declaring this capability, you tell the system that your web browser app handles single sign-on requests. If the user has set your browser as the default, the system routes authentication requests to it.\n\nOptionally, add the [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Information-Property-List\/ASWebAuthenticationSessionWebBrowserSupportCapabilities\/EphemeralBrowserSessionIsSupported] key with a value that indicates whether your browser supports ephemeral browsing.\n\n\n\nIf you don’t provide the key, or if you set its value to `NO` and an app tries to conduct an ephemeral authentication session, the system warns the user. If do you declare support by setting the value to `YES`, be sure to respect the [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASWebAuthenticationSessionRequest\/shouldUseEphemeralSession] property on any incoming authentication requests, as described below in [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/supporting-single-sign-on-in-a-web-browser-app#Perform-Authentication].\n\n\n\n### Listen for Authentication Requests\n\nAdopt the [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASWebAuthenticationSessionWebBrowserSessionHandling] protocol in your web browser app to receive authentication requests. Choose a class that can act as the handler, and declare conformance to the protocol:\n\n```swift\nclass MyAuthenticationHandler: ASWebAuthenticationSessionWebBrowserSessionHandling {\n    var request: ASWebAuthenticationSessionRequest?\n}\n```\n\nFrom within the conforming class, implement the protocol’s [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASWebAuthenticationSessionWebBrowserSessionHandling\/begin(_:)] method to receive new [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASWebAuthenticationSessionRequest] instances. Handle the request using the data it encapsulates as described in [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/supporting-single-sign-on-in-a-web-browser-app#Perform-Authentication] below.\n\n```swift\nfunc begin(_ request: ASWebAuthenticationSessionRequest!) {\n    self.request = request   \/\/ Store for later.\n\n    if request.shouldUseEphemeralSession == true {\n        \/\/ Load request.url in an isolated session and wait for the callback.\n    } else {\n        \/\/ Load request.url and wait for the callback.\n    }\n}\n```\n\nImplement the [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASWebAuthenticationSessionWebBrowserSessionHandling\/cancel(_:)] method to listen for cancellations, which might happen if the calling app terminates or cancels the operation. If you have multiple requests in progress, you can use the cancellation request’s [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASWebAuthenticationSessionRequest\/uuid] property to identify the in-progress request to cancel:\n\n```swift\nfunc cancel(_ request: ASWebAuthenticationSessionRequest!) {\n    \/\/ Abandon the request and clean up.\n    self.request = nil\n}\n```\n\nAfter implementing the interface, tell the system how to find your session handler by setting the [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASWebAuthenticationSessionWebBrowserSessionManager\/sessionHandler] property of the shared session manager. You typically do this once at startup. For example, you might set the property in your app delegate’s [doc:\/\/com.apple.documentation\/documentation\/AppKit\/NSApplicationDelegate\/applicationDidFinishLaunching(_:)] method:\n\n```swift\nfunc applicationDidFinishLaunching(_ aNotification: Notification) {\n    let manager = ASWebAuthenticationSessionWebBrowserSessionManager.shared\n    manager.sessionHandler = MyAuthenticationHandler()\n    \/\/ The manager keeps a strong reference to your handler.\n}\n```\n\n### Perform Authentication\n\nWhen your handler receives a new authentication request, load the URL given in the request’s [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASWebAuthenticationSessionRequest\/url] property and display the content to the user. The user interacts with the content to authenticate—for example, by entering credentials and clicking a button. The service performing the authentication indicates the outcome by redirecting the browser to a URL that uses a known callback scheme.\n\nThe request’s [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASWebAuthenticationSessionRequest\/callbackURLScheme] property tells your browser what callback scheme the service uses. When your browser detects a redirect involving this scheme, pass the entire URL back to the session manager by calling the request’s [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASWebAuthenticationSessionRequest\/complete(withCallbackURL:)] method. For example, when using the WebKit API, you can do this from the navigation delegate’s [doc:\/\/com.apple.documentation\/documentation\/WebKit\/WKNavigationDelegate\/webView(_:decidePolicyFor:decisionHandler:)-2ni62] method:\n\n```swift\nfunc webView(_ webView: WKWebView,\n             decidePolicyFor navigationAction: WKNavigationAction,\n             decisionHandler: @escaping (WKNavigationActionPolicy) -> Void) {\n\n    guard let url = navigationAction.request.url else { return }\n\n    if url.scheme == request?.callbackURLScheme {\n        request?.complete(withCallbackURL: url)\n    } else {\n        \/\/ Handle normally.\n    }\n}\n```\n\nAlternatively, if the browser can’t complete the operation for any reason—for example, because the user has closed the authentication window—call the request’s [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASWebAuthenticationSessionRequest\/cancelWithError(_:)] method instead.\n\nIf you declare that your browser supports ephemeral browsing, as described above in [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/supporting-single-sign-on-in-a-web-browser-app#Declare-the-Session-Handling-Capability], be sure to respect the request’s [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASWebAuthenticationSessionRequest\/shouldUseEphemeralSession] property. When this value is `true`, avoid using any existing browsing data, like cookies, during the authentication process. Also, avoid retaining any data collected during the authentication attempt beyond the lifetime of the attempt, or sharing it with any other session.\n\n### Handle Launch for Authentication\n\nWhen your browser supports the authentication flow, the system might launch the browser specifically for the purpose of authentication. You can detect this condition by checking the [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASWebAuthenticationSessionWebBrowserSessionManager\/wasLaunchedByAuthenticationServices] property of the shared session manager.\n\n```swift\nfunc applicationDidFinishLaunching(_ aNotification: Notification) {\n    let manager = ASWebAuthenticationSessionWebBrowserSessionManager.shared\n    manager.sessionHandler = MyAuthenticationHandler()\n\n    if manager.wasLaunchedByAuthenticationServices == true {\n        \/\/ Adjust startup behavior accordingly.\n    }\n}\n```\n\nUse this indicator to adjust the behavior of your browser at startup. For example, you might avoid restoring previously open windows or tabs.\n\n## Web authentication sessions\n\n- **Authenticating a User Through a Web Service**: Use a web authentication session to authenticate a user in your app.\n- **Securing Logins with iCloud Keychain Verification Codes**: Use time-based codes generated on-device for a secure authentication experience.\n- **ASWebAuthenticationSession**: A session that an app uses to authenticate a user through a web service.\n- **WebAuthenticationSession**: A SwiftUI environment value that views use to authenticate someone using a web service.\n- **ASWebAuthenticationSessionWebBrowserSessionManager**: A session manager that mediates sharing data between an app and a web browser.\n- **ASWebAuthenticationSessionWebBrowserSupportCapabilities**: A collection of keys that a browser app uses to declare its ability to handle authentication requests from other apps.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Use a web authentication session to authenticate a user in your app.",
          "name" : "Authenticating a User Through a Web Service",
          "url" : "https:\/\/developer.apple.com\/documentation\/AuthenticationServices\/authenticating-a-user-through-a-web-service"
        },
        {
          "description" : "Use time-based codes generated on-device for a secure authentication experience.",
          "name" : "Securing Logins with iCloud Keychain Verification Codes",
          "url" : "https:\/\/developer.apple.com\/documentation\/AuthenticationServices\/securing-logins-with-icloud-keychain-verification-codes"
        },
        {
          "description" : "A session that an app uses to authenticate a user through a web service.",
          "name" : "ASWebAuthenticationSession",
          "url" : "https:\/\/developer.apple.com\/documentation\/AuthenticationServices\/ASWebAuthenticationSession"
        },
        {
          "description" : "A SwiftUI environment value that views use to authenticate someone using a web service.",
          "name" : "WebAuthenticationSession",
          "url" : "https:\/\/developer.apple.com\/documentation\/AuthenticationServices\/WebAuthenticationSession"
        },
        {
          "description" : "A session manager that mediates sharing data between an app and a web browser.",
          "name" : "ASWebAuthenticationSessionWebBrowserSessionManager",
          "url" : "https:\/\/developer.apple.com\/documentation\/AuthenticationServices\/ASWebAuthenticationSessionWebBrowserSessionManager"
        },
        {
          "description" : "A collection of keys that a browser app uses to declare its ability to handle authentication requests from other apps.",
          "name" : "ASWebAuthenticationSessionWebBrowserSupportCapabilities",
          "url" : "https:\/\/developer.apple.com\/documentation\/BundleResources\/Information-Property-List\/ASWebAuthenticationSessionWebBrowserSupportCapabilities"
        }
      ],
      "title" : "Web authentication sessions"
    }
  ],
  "source" : "appleJSON",
  "title" : "Supporting Single Sign-On in a Web Browser App",
  "url" : "https:\/\/developer.apple.com\/documentation\/AuthenticationServices\/supporting-single-sign-on-in-a-web-browser-app"
}