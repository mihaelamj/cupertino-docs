{
  "abstract" : "Refresh a non-expired token instead of sending a new login request.",
  "codeExamples" : [
    {
      "code" : "{\n    \"kid\" : \"10gy5SeDGL4KRZb0gKyFmPuV9LBAcm\/Istdk4lgn24M=\",\n    \"x5c\" : \"MIIBg...nFg==\",\n    \"typ\" : \"platformsso-refresh-request+jwt\",\n    \"alg\" : \"ES256\"\n}.{\n    \"iat\" : 1685750697,\n    \"jwe_crypto\" : {\n        \"alg\" : \"ECDH-ES\",\n        \"enc\" : \"A256GCM\",\n        \"apv\" : \"AAAAB...zZEMA\"\n    },\n    \"nonce\" : \"A978348D-DEDF-4AF2-94D4-FCC60B6736D0\",\n    \"request_nonce\" : \"AwABA...YQgAA\",\n    \"scope\" : \"openid offline_access urn:apple:platformsso\",\n    \"refresh_token\" : \"abcd1234\",\n    \"grant_type\" : \"refresh_token\",\n    \"exp\" : 1685750997,\n    \"aud\" : \"https:\/\/localhost.apple.com:8888\/auth\/token\",\n    \"client_id\" : \"aaff1524-fa35-40c5-94e3-2b233c5f2965\",\n    \"iss\" : \"aaff1524-fa35-40c5-94e3-2b233c5f2965\"\n}.[Signature]",
      "language" : "javascript"
    }
  ],
  "contentHash" : "eb62dcbd5160ce03410dd45473d661ed3347ea87640dad19f292dd44b3bd88fc",
  "crawledAt" : "2025-12-09T17:21:41Z",
  "id" : "E885013C-5FD2-4260-8C31-FAA73F1AD43E",
  "kind" : "article",
  "language" : "swift",
  "module" : "Authentication Services",
  "overview" : "## Overview\n\nThe system sends a refresh request instead of a login request when a token hasn’t expired yet and the [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASAuthorizationProviderExtensionLoginConfiguration\/refreshEndpointURL] is set. The refresh request also sends a server nonce request before it begins.\n\nA refresh request uses the previous refresh token to request a new token without prompting the user for credentials. The system attempts it when the existing token hasn’t expired and the time since the last full login hasn’t exceeded the `LoginFrequency` in the Device Management profile. It doesn’t apply to User Secure Enclave key authentication, because the user isn’t prompted for credentials.\n\nThe refresh request is a JSON Object Signing and Encryption object (JOSE) object that’s formatted per RFC 7519 and signed with the `DeviceSigningKey` and `ES256` per RFC 7515. Processing the refresh network request and response is the same as for a JSON Web Encryption (JWE) login response. For more information, see [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/creating-a-json-web-encryption-jwe-login-response].\n\nThe following table specifies the header parameters that the system uses to create a refresh request:\n\nThe following table specifies the body parameters that the system uses to create a refresh request:\n\nThe following code provides an example of a refresh request:",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/AuthenticationServices\/creating-a-refresh-request\ncrawled: 2025-12-09T17:21:41Z\n---\n\n# Creating a refresh request\n\n**Article**\n\nRefresh a non-expired token instead of sending a new login request.\n\n## Overview\n\nThe system sends a refresh request instead of a login request when a token hasn’t expired yet and the [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASAuthorizationProviderExtensionLoginConfiguration\/refreshEndpointURL] is set. The refresh request also sends a server nonce request before it begins.\n\nA refresh request uses the previous refresh token to request a new token without prompting the user for credentials. The system attempts it when the existing token hasn’t expired and the time since the last full login hasn’t exceeded the `LoginFrequency` in the Device Management profile. It doesn’t apply to User Secure Enclave key authentication, because the user isn’t prompted for credentials.\n\nThe refresh request is a JSON Object Signing and Encryption object (JOSE) object that’s formatted per RFC 7519 and signed with the `DeviceSigningKey` and `ES256` per RFC 7515. Processing the refresh network request and response is the same as for a JSON Web Encryption (JWE) login response. For more information, see [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/creating-a-json-web-encryption-jwe-login-response].\n\nThe following table specifies the header parameters that the system uses to create a refresh request:\n\n\n\nThe following table specifies the body parameters that the system uses to create a refresh request:\n\n\n\nThe following code provides an example of a refresh request:\n\n```javascript\n{\n    \"kid\" : \"10gy5SeDGL4KRZb0gKyFmPuV9LBAcm\/Istdk4lgn24M=\",\n    \"x5c\" : \"MIIBg...nFg==\",\n    \"typ\" : \"platformsso-refresh-request+jwt\",\n    \"alg\" : \"ES256\"\n}.{\n    \"iat\" : 1685750697,\n    \"jwe_crypto\" : {\n        \"alg\" : \"ECDH-ES\",\n        \"enc\" : \"A256GCM\",\n        \"apv\" : \"AAAAB...zZEMA\"\n    },\n    \"nonce\" : \"A978348D-DEDF-4AF2-94D4-FCC60B6736D0\",\n    \"request_nonce\" : \"AwABA...YQgAA\",\n    \"scope\" : \"openid offline_access urn:apple:platformsso\",\n    \"refresh_token\" : \"abcd1234\",\n    \"grant_type\" : \"refresh_token\",\n    \"exp\" : 1685750997,\n    \"aud\" : \"https:\/\/localhost.apple.com:8888\/auth\/token\",\n    \"client_id\" : \"aaff1524-fa35-40c5-94e3-2b233c5f2965\",\n    \"iss\" : \"aaff1524-fa35-40c5-94e3-2b233c5f2965\"\n}.[Signature]\n```\n\n## Login request\n\n- **Performing a WS-Trust login request**: Create a WS-Trust login request using the metadata exchange data (MEX) response.\n- **Creating an embedded assertion**: Request an embedded assertion for login types that require a digital signature for authentication.\n- **Creating an encrypted embedded assertion**: Request an encrypted embedded assertion for login types that require password encryption.\n- **Creating and validating a login request**: Create a signed JOSE login request.\n- **Supporting key requests and key exchange requests**: Support the platform SSO 2.0 protocol for encryption and decryption operations.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Create a WS-Trust login request using the metadata exchange data (MEX) response.",
          "name" : "Performing a WS-Trust login request",
          "url" : "https:\/\/developer.apple.com\/documentation\/AuthenticationServices\/performing-a-ws-trust-login-request"
        },
        {
          "description" : "Request an embedded assertion for login types that require a digital signature for authentication.",
          "name" : "Creating an embedded assertion",
          "url" : "https:\/\/developer.apple.com\/documentation\/AuthenticationServices\/creating-an-embedded-assertion"
        },
        {
          "description" : "Request an encrypted embedded assertion for login types that require password encryption.",
          "name" : "Creating an encrypted embedded assertion",
          "url" : "https:\/\/developer.apple.com\/documentation\/AuthenticationServices\/creating-an-encrypted-embedded-assertion"
        },
        {
          "description" : "Create a signed JOSE login request.",
          "name" : "Creating and validating a login request",
          "url" : "https:\/\/developer.apple.com\/documentation\/AuthenticationServices\/creating-and-validating-a-login-request"
        },
        {
          "description" : "Support the platform SSO 2.0 protocol for encryption and decryption operations.",
          "name" : "Supporting key requests and key exchange requests",
          "url" : "https:\/\/developer.apple.com\/documentation\/AuthenticationServices\/supporting-key-requests-and-key-exchange-requests"
        }
      ],
      "title" : "Login request"
    }
  ],
  "source" : "appleJSON",
  "title" : "Creating a refresh request",
  "url" : "https:\/\/developer.apple.com\/documentation\/AuthenticationServices\/creating-a-refresh-request"
}