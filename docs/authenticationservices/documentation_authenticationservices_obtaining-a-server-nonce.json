{
  "abstract" : "Request and process a server nonce to verify communication and detect replays.",
  "codeExamples" : [
    {
      "code" : "POST \/oauth2\/token HTTP\/1.1\nHost: auth.example.com\nAccept: application\/json\nContent-Type: application\/x-www-form-urlencoded\nclient-request-id: DCAB01D3-B1FE-4E1C-802F-B3EBDCDF9E67\ngrant_type=srv_challenge",
      "language" : "http"
    }
  ],
  "contentHash" : "02a11544c80ef2b6afb4c26417163936b124590b7f6b176bcf74fb0a61b56859",
  "crawledAt" : "2025-12-09T17:21:35Z",
  "id" : "5126727F-8C38-4B87-B938-ED3FBADA531F",
  "kind" : "article",
  "language" : "swift",
  "module" : "Authentication Services",
  "overview" : "## Overview\n\nThe login request, refresh request, and key requests use the server nonce so the identity provider (IdP) can verify it’s communicating to a live client. The IdP can also use the server nonce for replay detection.\n\n### Create the server nonce network request\n\nThe following table specifies the header parameters that the system uses to create a server nonce request:\n\nThe server nonce request is an HTTP POST to the login configuration [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASAuthorizationProviderExtensionLoginConfiguration\/nonceEndpointURL], as shown in the following example:\n\n### Receive the server nonce network response\n\nIf the http status is `200`, the response body loads as JSON. If the body is valid JSON, the system pulls the server nonce from the response using the login configuration [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASAuthorizationProviderExtensionLoginConfiguration\/nonceResponseKeypath] or the default value `Nonce`.\n\nPlatform SSO doesn’t validate the token and treats it as an opaque value.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/AuthenticationServices\/obtaining-a-server-nonce\ncrawled: 2025-12-09T17:21:35Z\n---\n\n# Obtaining a server nonce\n\n**Article**\n\nRequest and process a server nonce to verify communication and detect replays.\n\n## Overview\n\nThe login request, refresh request, and key requests use the server nonce so the identity provider (IdP) can verify it’s communicating to a live client. The IdP can also use the server nonce for replay detection.\n\n### Create the server nonce network request\n\nThe following table specifies the header parameters that the system uses to create a server nonce request:\n\n\n\nThe server nonce request is an HTTP POST to the login configuration [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASAuthorizationProviderExtensionLoginConfiguration\/nonceEndpointURL], as shown in the following example:\n\n```http\nPOST \/oauth2\/token HTTP\/1.1\nHost: auth.example.com\nAccept: application\/json\nContent-Type: application\/x-www-form-urlencoded\nclient-request-id: DCAB01D3-B1FE-4E1C-802F-B3EBDCDF9E67\ngrant_type=srv_challenge\n```\n\n### Receive the server nonce network response\n\nIf the http status is `200`, the response body loads as JSON. If the body is valid JSON, the system pulls the server nonce from the response using the login configuration [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASAuthorizationProviderExtensionLoginConfiguration\/nonceResponseKeypath] or the default value `Nonce`.\n\nPlatform SSO doesn’t validate the token and treats it as an opaque value.\n\n## Pre-login\n\n- **Performing a preauthentication request**: Request and process a preauthentication for dynamic WS-Trust authentication.\n- **Performing a WS-Trust metadata exchange data (MEX) request**: Send and process a WS-Trust MEX request to determine the version and URLs for authentication.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Request and process a preauthentication for dynamic WS-Trust authentication.",
          "name" : "Performing a preauthentication request",
          "url" : "https:\/\/developer.apple.com\/documentation\/AuthenticationServices\/performing-a-preauthentication-request"
        },
        {
          "description" : "Send and process a WS-Trust MEX request to determine the version and URLs for authentication.",
          "name" : "Performing a WS-Trust metadata exchange data (MEX) request",
          "url" : "https:\/\/developer.apple.com\/documentation\/AuthenticationServices\/performing-a-ws-trust-metadata-exchange-data-mex-request"
        }
      ],
      "title" : "Pre-login"
    }
  ],
  "source" : "appleJSON",
  "title" : "Obtaining a server nonce",
  "url" : "https:\/\/developer.apple.com\/documentation\/AuthenticationServices\/obtaining-a-server-nonce"
}