{
  "abstract" : "Configure Device Management to support device and user registration for platform SSO.",
  "codeExamples" : [
    {
      "code" : "<key>AttributeMapping<\/key>\n    <dict>\n        <key>dsAttributeString<\/key>\n        <string>dsAttrTypeStandard:AltSecurityIdentities<\/string>\n        <key>fields<\/key>\n        <array>\n            <string>RFC 822 Name<\/string>\n        <\/array>\n        <key>formatString<\/key>\n        <string>PlatformSSO:$1<\/string>\n    <\/dict>",
      "language" : "xml"
    }
  ],
  "contentHash" : "d5d6f14db356f0db1bb3d628cbf81dfda39edbc012a9ffe840de8ec2a507c701",
  "crawledAt" : "2025-12-06T07:14:24Z",
  "id" : "B5CADEF5-9213-48FB-A335-CA68C5B1725E",
  "kind" : "article",
  "language" : "swift",
  "module" : "Authentication Services",
  "overview" : "## Overview\n\nEnable platform SSO through the `com.apple.extensiblesso` payload in [doc:\/\/com.apple.documentation\/documentation\/DeviceManagement], for redirect extensions only, because these extensions are designed for modern authentication. The [doc:\/\/com.apple.documentation\/documentation\/devicemanagement\/extensiblesinglesignon\/platformsso] dictionary in the payload contains the options to configure platform SSO. These options include choosing which key or keys to use, assigning group membership, creating users during login, and including support for registering devices and users.\n\n### Choose which keys to use\n\nAlthough the only required key is `AuthenticationMethod`, it’s recommended that you use shared device keys through `UseSharedDeviceKeys`. Use `AuthenticationMethod` for all users on the device to authenticate, which has the possible values `Password`, `UserSecureEnclaveKey`, or `SmartCard`. The SSO extension needs to support the requested method to start registration, or to switch methods. For example, a new user account that the system created during login with a username and password can switch to secure enclave backed key or SmartCard after the user reaches the desktop. The SSO extension can use the `RegistrationToken` for silent device registration.\n\nTo use the recommended shared device keys, the Device Management profile needs to be a system profile because the configuration applies to all users. But, you can configure user-specific extenstion data and registration tokens for individual users.\n\nFor more information about creating and configuring the extension for platform SSO, see [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/creating-extensions-that-support-platform-sso] and [doc:\/\/com.apple.documentation\/documentation\/DeviceManagement\/ExtensibleSingleSignOn].\n\n### Assign group membership\n\nPlatform SSO uses the Device Management configuration to request group membership from the identity provider (IdP). During device registration, if the Device Management profile specifies `AdministratorGroups`, it creates the local groups with the same name and adds them as sub groups of the admin group. If the profile specifies `AdditionalGroups`, then it creates a local group for them. Handle the use of additional groups separately for other services such as `sudo`. If the profile specifies `AuthorizationGroups`, then it creates a local group and updates the associated authorization right to use that group.\n\nDuring authentication, the system requests the super set of the groups from the IdP and the login response contains the group membership for the user. Platform SSO adds the user to the groups the IdP returns and removes the user from the rest of the groups. You can trust these group memberships for security decisions because the IdP signed them during the login and the system didn’t make a separate request for it. The system only updates group membership after user authentication.\n\nThe groups are normal local groups on the Mac and the membership other processes can modify these groups. Administrators need to ensure there are sufficient controls and auditing processes in place to handle unauthorized changes.\n\n### Create user during login\n\nPlatform SSO can create a new user at the login window with the password the user enters, if the MDM `EnableCreateUserAtLogin` and `UseSharedDeviceKeys` profile settings are both `true`. The system checks that there isn’t an existing local account with the same login user name and unique identifier for the user before it creates a new account. The system uses the `TokenToUserMapping` in the Device Management profile when it creates the local account name and short name.\n\nIdPs need to ensure that [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASAuthorizationProviderExtensionLoginConfiguration\/uniqueIdentifierClaimName] is correctly set, to ensure the unique identifier is accurate and avoid duplicates.\n\nThe system can create new SmartCard users in macOS when the SmartCard contains a valid attribute mapping. The mapping needs to use the `PlatformSSO` prefix followed by the user’s login username for the `AltSecurityIdentifier`. In the following mapping example, the RFC 822 Name is mapped to it:\n\nFor more information, see [https:\/\/support.apple.com\/guide\/deployment\/advanced-smart-card-options-dep7b2ede1e3\/web].\n\n### Register devices and users\n\nIdentity providers (IdPs) who want to support platform SSO need to implement support for device and user registration. Registration enables the IdP to configure the device and decide if it’s eligible to receive SSO tokens to sign in to any app.\n\nA Mac needs to receive an Device Management configuration profile with the [doc:\/\/com.apple.documentation\/documentation\/DeviceManagement\/ExtensibleSingleSignOn] payload (`com.apple.extensiblesso`) that contains the authentication method. The authentication method defined in the SSO extension payload needs to be compatible with the authentication method supported and configured by the IdP. For example, if the configuration profile uses authentication with a secure enclave backed key, but the IdP supports only password authentication, then device registration won’t start.\n\nIn addition to the authentication method, the SSO extension payload may optionally include a registration token. If it’s present, device registration occurs in the background by default. However, if the IdP requires a user action for registration, the SSO extension prompts the user to confirm registration.\n\nAfter registration with the IdP is complete, the SSO extension can work with Platform SSO when processing SSO requests. For example, the SSO extension can:\n\nFor more information, see [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/registering-devices-and-users].",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/AuthenticationServices\/configuring-device-management\ncrawled: 2025-12-06T07:14:24Z\n---\n\n# Configuring Device Management\n\n**Article**\n\nConfigure Device Management to support device and user registration for platform SSO.\n\n## Overview\n\nEnable platform SSO through the `com.apple.extensiblesso` payload in [doc:\/\/com.apple.documentation\/documentation\/DeviceManagement], for redirect extensions only, because these extensions are designed for modern authentication. The [doc:\/\/com.apple.documentation\/documentation\/devicemanagement\/extensiblesinglesignon\/platformsso] dictionary in the payload contains the options to configure platform SSO. These options include choosing which key or keys to use, assigning group membership, creating users during login, and including support for registering devices and users.\n\n\n\n### Choose which keys to use\n\nAlthough the only required key is `AuthenticationMethod`, it’s recommended that you use shared device keys through `UseSharedDeviceKeys`. Use `AuthenticationMethod` for all users on the device to authenticate, which has the possible values `Password`, `UserSecureEnclaveKey`, or `SmartCard`. The SSO extension needs to support the requested method to start registration, or to switch methods. For example, a new user account that the system created during login with a username and password can switch to secure enclave backed key or SmartCard after the user reaches the desktop. The SSO extension can use the `RegistrationToken` for silent device registration.\n\nTo use the recommended shared device keys, the Device Management profile needs to be a system profile because the configuration applies to all users. But, you can configure user-specific extenstion data and registration tokens for individual users.\n\nFor more information about creating and configuring the extension for platform SSO, see [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/creating-extensions-that-support-platform-sso] and [doc:\/\/com.apple.documentation\/documentation\/DeviceManagement\/ExtensibleSingleSignOn].\n\n### Assign group membership\n\nPlatform SSO uses the Device Management configuration to request group membership from the identity provider (IdP). During device registration, if the Device Management profile specifies `AdministratorGroups`, it creates the local groups with the same name and adds them as sub groups of the admin group. If the profile specifies `AdditionalGroups`, then it creates a local group for them. Handle the use of additional groups separately for other services such as `sudo`. If the profile specifies `AuthorizationGroups`, then it creates a local group and updates the associated authorization right to use that group.\n\nDuring authentication, the system requests the super set of the groups from the IdP and the login response contains the group membership for the user. Platform SSO adds the user to the groups the IdP returns and removes the user from the rest of the groups. You can trust these group memberships for security decisions because the IdP signed them during the login and the system didn’t make a separate request for it. The system only updates group membership after user authentication.\n\nThe groups are normal local groups on the Mac and the membership other processes can modify these groups. Administrators need to ensure there are sufficient controls and auditing processes in place to handle unauthorized changes.\n\n\n\n### Create user during login\n\nPlatform SSO can create a new user at the login window with the password the user enters, if the MDM `EnableCreateUserAtLogin` and `UseSharedDeviceKeys` profile settings are both `true`. The system checks that there isn’t an existing local account with the same login user name and unique identifier for the user before it creates a new account. The system uses the `TokenToUserMapping` in the Device Management profile when it creates the local account name and short name.\n\nIdPs need to ensure that [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/ASAuthorizationProviderExtensionLoginConfiguration\/uniqueIdentifierClaimName] is correctly set, to ensure the unique identifier is accurate and avoid duplicates.\n\nThe system can create new SmartCard users in macOS when the SmartCard contains a valid attribute mapping. The mapping needs to use the `PlatformSSO` prefix followed by the user’s login username for the `AltSecurityIdentifier`. In the following mapping example, the RFC 822 Name is mapped to it:\n\n```xml\n<key>AttributeMapping<\/key>\n    <dict>\n        <key>dsAttributeString<\/key>\n        <string>dsAttrTypeStandard:AltSecurityIdentities<\/string>\n        <key>fields<\/key>\n        <array>\n            <string>RFC 822 Name<\/string>\n        <\/array>\n        <key>formatString<\/key>\n        <string>PlatformSSO:$1<\/string>\n    <\/dict>\n```\n\nFor more information, see [https:\/\/support.apple.com\/guide\/deployment\/advanced-smart-card-options-dep7b2ede1e3\/web].\n\n### Register devices and users\n\nIdentity providers (IdPs) who want to support platform SSO need to implement support for device and user registration. Registration enables the IdP to configure the device and decide if it’s eligible to receive SSO tokens to sign in to any app.\n\nA Mac needs to receive an Device Management configuration profile with the [doc:\/\/com.apple.documentation\/documentation\/DeviceManagement\/ExtensibleSingleSignOn] payload (`com.apple.extensiblesso`) that contains the authentication method. The authentication method defined in the SSO extension payload needs to be compatible with the authentication method supported and configured by the IdP. For example, if the configuration profile uses authentication with a secure enclave backed key, but the IdP supports only password authentication, then device registration won’t start.\n\nIn addition to the authentication method, the SSO extension payload may optionally include a registration token. If it’s present, device registration occurs in the background by default. However, if the IdP requires a user action for registration, the SSO extension prompts the user to confirm registration.\n\nAfter registration with the IdP is complete, the SSO extension can work with Platform SSO when processing SSO requests. For example, the SSO extension can:\n\n- Update the login configuration.\n- Update SSO tokens.\n- Request that the user authenticates again, such as if their credentials expire.\n- Access the device keys to sign, encrypt, and decrypt their own additional requests.\n- Restart registration if there’s an unrecoverable error.\n\nFor more information, see [doc:\/\/com.apple.authenticationservices\/documentation\/AuthenticationServices\/registering-devices-and-users].\n\n## Configuration\n\n- **Configuring authentication with the identity provider (IdP)**: Specify how platform SSO authenticates with the identity provider.\n- **ASAuthorizationProviderExtensionLoginConfiguration**: An interface for configuring platform single sign-on.\n- **ASAuthorizationProviderExtensionLoginManager**: An interface to maintain platform single sign-on (SSO) during authentication and registration.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Specify how platform SSO authenticates with the identity provider.",
          "name" : "Configuring authentication with the identity provider (IdP)",
          "url" : "https:\/\/developer.apple.com\/documentation\/AuthenticationServices\/configuring-authentication-with-the-identity-provider-idp"
        },
        {
          "description" : "An interface for configuring platform single sign-on.",
          "name" : "ASAuthorizationProviderExtensionLoginConfiguration",
          "url" : "https:\/\/developer.apple.com\/documentation\/AuthenticationServices\/ASAuthorizationProviderExtensionLoginConfiguration"
        },
        {
          "description" : "An interface to maintain platform single sign-on (SSO) during authentication and registration.",
          "name" : "ASAuthorizationProviderExtensionLoginManager",
          "url" : "https:\/\/developer.apple.com\/documentation\/AuthenticationServices\/ASAuthorizationProviderExtensionLoginManager"
        }
      ],
      "title" : "Configuration"
    }
  ],
  "source" : "appleJSON",
  "title" : "Configuring Device Management",
  "url" : "https:\/\/developer.apple.com\/documentation\/AuthenticationServices\/configuring-device-management"
}