{
  "abstract" : "Update your apps to use new features, and test your apps against API changes.",
  "codeExamples" : [

  ],
  "contentHash" : "8e25b9ac1bfb9cb04f300b1bd643946ba8a221e3b7744957602168adffd258eb",
  "crawledAt" : "2025-12-03T04:56:10Z",
  "id" : "679E380B-6A8E-411E-BBCB-02239A80F3C4",
  "kind" : "article",
  "language" : "swift",
  "overview" : "## Overview\n\nFoundation in macOS 10.14, iOS 12, watchOS 5, and tvOS 12 includes new features, API changes, and deprecations. For information about earlier releases, see [https:\/\/developer.apple.com\/library\/archive\/releasenotes\/Foundation\/RN-Foundation\/index.html].\n\n### Secure Data Archival and Unarchival\n\nThe [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSKeyedArchiver] and [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSKeyedUnarchiver] classes have new initializers and helper methods that make it easier for you to enable secure coding for archival and unarchival. Each initializer or helper method replaces a corresponding member that’s now deprecated.\n\nFor more information, see the WWDC 2018 session [https:\/\/developer.apple.com\/videos\/play\/wwdc2018\/222\/].\n\n### Secure Value Transformer\n\n[doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSSecureUnarchiveFromDataTransformer] is a new subclass of [doc:\/\/com.apple.documentation\/documentation\/Foundation\/ValueTransformer]. It uses [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSKeyedArchiver] and [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSKeyedUnarchiver] to archive and unarchive data by enabling `requiresSecureCoding`.\n\nWhen unarchiving from [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSData], [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSSecureUnarchiveFromDataTransformer] uses its [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSSecureUnarchiveFromDataTransformer\/allowedTopLevelClasses] list to decode objects by calling the new [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSKeyedUnarchiver\/unarchivedObject(ofClasses:from:)-b9t5] method. By default, this list includes all property list types—[doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSArray], [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSDictionary], [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSString], [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSNumber], [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSDate], [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSData], and [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSNull]—along with [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSURL] and [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSUUID].\n\nWhen archiving to [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSData], this transformer calls the new [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSKeyedArchiver\/archivedData(withRootObject:requiringSecureCoding:)] method and enables requiresSecureCoding.\n\nTo transform top-level values of types other than the defaults listed above, subclass [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSSecureUnarchiveFromDataTransformer].\n\nThe older [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSValueTransformerName\/unarchiveFromDataTransformerName] and [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSValueTransformerName\/keyedUnarchiveFromDataTransformerName] values are now deprecated.\n\n### NSSecureCoding Conformance\n\nThe [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSPointerFunctions], [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSMapTable], and [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSHashTable] classes now support limited conformance to the [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSSecureCoding] protocol. You can securely encode pointer-function consuming collections as long as you configure them with the following personalities and kinds of memory:\n\n### Macro for Closed Enumerations\n\n`NS_CLOSED_ENUM` is a new macro for declaring enumerations. You use it only for enumerations that are guaranteed to never gain an additional case. Usually you determine that there won’t be new cases because the enumeration you’re modeling represents a mathematically complete set. [doc:\/\/com.apple.documentation\/documentation\/Foundation\/ComparisonResult] now adopts the `NS_CLOSED_ENUM` macro. It won’t ever gain additional cases.\n\nFor information about `NS_CLOSED_ENUM` and choosing between it and other macros for grouping constants, see [doc:\/\/com.apple.documentation\/documentation\/Swift\/grouping-related-objective-c-constants].\n\n### UserDefaults\n\n[doc:\/\/com.apple.documentation\/documentation\/Foundation\/UserDefaults] has several bug fixes and improvements:\n\n### On-Demand Resources\n\n[doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSBundleResourceRequest] no longer throws exceptions when encountering certain kinds of internal errors. Instead, it returns an error in the error argument of the completion handler of the [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSBundleResourceRequest\/beginAccessingResources(completionHandler:)] method. The error might include the [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSFileReadUnknownError-swift.var] and `NSXPCConnectionInterrupted` errors in addition to [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSUserCancelledError-swift.var] and network-related errors.\n\nIf your app encounters an error when using [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSBundleResourceRequest], request the resource again or display a prompt to your user to try again.\n\n### Thread Safety of Bundles\n\nThe [doc:\/\/com.apple.documentation\/documentation\/Foundation\/Bundle\/principalClass] property on [doc:\/\/com.apple.documentation\/documentation\/Foundation\/Bundle] includes new thread-safety improvements. Accessing the property blocks if other threads are in the process of loading the bundle. This action allows the property to return the correct value in all cases.\n\n### CFMessagePort\n\nThe [doc:\/\/com.apple.documentation\/documentation\/CoreFoundation\/CFMessagePortSetName(_:_:)] function doesn’t do anything in apps linked on or after macOS 10.14, iOS 12, watchOS 5, and tvOS 12. This API will be deprecated in a future release.\n\nIn apps linked on earlier versions of macOS, iOS, watchOS, and tvOS, the [doc:\/\/com.apple.documentation\/documentation\/CoreFoundation\/CFMessagePortSetName(_:_:)] function doesn’t do anything if the message port already has a dispatch queue associated with itself via the [doc:\/\/com.apple.documentation\/documentation\/CoreFoundation\/CFMessagePortSetDispatchQueue(_:_:)] function. Previously, this pattern would result in undefined behavior.\n\nIn all cases, if you need to change the name of a [doc:\/\/com.apple.documentation\/documentation\/CoreFoundation\/CFMessagePort], use [doc:\/\/com.apple.documentation\/documentation\/CoreFoundation\/CFMessagePortCreateLocal(_:_:_:_:_:)] or [doc:\/\/com.apple.documentation\/documentation\/CoreFoundation\/CFMessagePortCreateRemote(_:_:)].",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/iOS-iPadOS-Release-Notes\/foundation-release-notes\ncrawled: 2025-12-03T04:56:10Z\n---\n\n# Foundation Release Notes\n\n**Article**\n\nUpdate your apps to use new features, and test your apps against API changes.\n\n## Overview\n\nFoundation in macOS 10.14, iOS 12, watchOS 5, and tvOS 12 includes new features, API changes, and deprecations. For information about earlier releases, see [https:\/\/developer.apple.com\/library\/archive\/releasenotes\/Foundation\/RN-Foundation\/index.html].\n\n### Secure Data Archival and Unarchival\n\nThe [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSKeyedArchiver] and [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSKeyedUnarchiver] classes have new initializers and helper methods that make it easier for you to enable secure coding for archival and unarchival. Each initializer or helper method replaces a corresponding member that’s now deprecated.\n\n- [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSKeyedArchiver\/init(requiringSecureCoding:)] replaces [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSKeyedUnarchiver\/init()] and [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSKeyedArchiver\/init(forWritingWith:)].\n- [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSKeyedArchiver\/archivedData(withRootObject:requiringSecureCoding:)] replaces [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSKeyedArchiver\/archivedData(withRootObject:)] and [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSKeyedArchiver\/archiveRootObject(_:toFile:)].\n- [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSKeyedUnarchiver\/init(forReadingFrom:)] replaces [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSKeyedUnarchiver\/init()] and [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSKeyedUnarchiver\/init(forReadingWith:)].\n- [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSKeyedUnarchiver\/unarchivedObject(ofClass:from:)] and [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSKeyedUnarchiver\/unarchivedObject(ofClasses:from:)-b9t5] replace [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSKeyedUnarchiver\/unarchiveObject(with:)], [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSKeyedUnarchiver\/unarchiveTopLevelObjectWithData(_:)-40hyk], and [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSKeyedUnarchiver\/unarchiveObject(withFile:)].\n\nYou use the new [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSKeyedUnarchiver\/unarchivedObject(ofClasses:from:)-b9t5] method when unarchiving instances that are subclasses of one of the list of classes you supply. You can use these initializers and helper methods in apps that are compatible with macOS 10.13, iOS 11, watchOS 4, tvOS 11, and subsequent releases of each operating system.\n\nFor more information, see the WWDC 2018 session [https:\/\/developer.apple.com\/videos\/play\/wwdc2018\/222\/].\n\n### Secure Value Transformer\n\n[doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSSecureUnarchiveFromDataTransformer] is a new subclass of [doc:\/\/com.apple.documentation\/documentation\/Foundation\/ValueTransformer]. It uses [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSKeyedArchiver] and [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSKeyedUnarchiver] to archive and unarchive data by enabling `requiresSecureCoding`.\n\nWhen unarchiving from [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSData], [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSSecureUnarchiveFromDataTransformer] uses its [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSSecureUnarchiveFromDataTransformer\/allowedTopLevelClasses] list to decode objects by calling the new [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSKeyedUnarchiver\/unarchivedObject(ofClasses:from:)-b9t5] method. By default, this list includes all property list types—[doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSArray], [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSDictionary], [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSString], [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSNumber], [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSDate], [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSData], and [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSNull]—along with [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSURL] and [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSUUID].\n\nWhen archiving to [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSData], this transformer calls the new [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSKeyedArchiver\/archivedData(withRootObject:requiringSecureCoding:)] method and enables requiresSecureCoding.\n\nTo transform top-level values of types other than the defaults listed above, subclass [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSSecureUnarchiveFromDataTransformer].\n\n- If you expect to decode a top-level value of only one allowed type, override [doc:\/\/com.apple.documentation\/documentation\/Foundation\/ValueTransformer\/transformedValueClass()] to return that type. Doing so populates [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSSecureUnarchiveFromDataTransformer\/allowedTopLevelClasses] automatically.\n- If you expect to decode a top-level value of one of several allowed types, override [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSSecureUnarchiveFromDataTransformer\/allowedTopLevelClasses] to return those types.\n\nThe older [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSValueTransformerName\/unarchiveFromDataTransformerName] and [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSValueTransformerName\/keyedUnarchiveFromDataTransformerName] values are now deprecated.\n\n### NSSecureCoding Conformance\n\nThe [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSPointerFunctions], [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSMapTable], and [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSHashTable] classes now support limited conformance to the [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSSecureCoding] protocol. You can securely encode pointer-function consuming collections as long as you configure them with the following personalities and kinds of memory:\n\n- [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSPointerFunctions\/Options\/objectPersonality]\n- [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSPointerFunctions\/Options\/objectPointerPersonality]\n- [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSPointerFunctions\/Options\/strongMemory]\n- [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSPointerFunctions\/Options\/weakMemory]\n- [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSPointerFunctions\/Options\/copyIn] (optional)\n\n\n\n### Macro for Closed Enumerations\n\n`NS_CLOSED_ENUM` is a new macro for declaring enumerations. You use it only for enumerations that are guaranteed to never gain an additional case. Usually you determine that there won’t be new cases because the enumeration you’re modeling represents a mathematically complete set. [doc:\/\/com.apple.documentation\/documentation\/Foundation\/ComparisonResult] now adopts the `NS_CLOSED_ENUM` macro. It won’t ever gain additional cases.\n\n\n\nFor information about `NS_CLOSED_ENUM` and choosing between it and other macros for grouping constants, see [doc:\/\/com.apple.documentation\/documentation\/Swift\/grouping-related-objective-c-constants].\n\n### UserDefaults\n\n[doc:\/\/com.apple.documentation\/documentation\/Foundation\/UserDefaults] has several bug fixes and improvements:\n\n- Removed synchronization requirements. It’s no longer necessary to use [doc:\/\/com.apple.documentation\/documentation\/Foundation\/UserDefaults\/synchronize()], [doc:\/\/com.apple.documentation\/documentation\/CoreFoundation\/CFPreferencesAppSynchronize(_:)], or [doc:\/\/com.apple.documentation\/documentation\/CoreFoundation\/CFPreferencesSynchronize(_:_:_:)]. These methods will be deprecated in a future version of the OS.Now that you don’t need to call these synchronization methods, the performance characteristics of [doc:\/\/com.apple.documentation\/documentation\/Foundation\/UserDefaults] and Preferences Utilities are slightly different: The time taken for enqueueing write operations is now paid by the writing thread, rather than by the next thread to call [doc:\/\/com.apple.documentation\/documentation\/Foundation\/UserDefaults\/synchronize()] or do a read operation.\n- Removed retains when adding an observer. Adding observers to an instance of [doc:\/\/com.apple.documentation\/documentation\/Foundation\/UserDefaults] using the [doc:\/\/com.apple.documentation\/documentation\/ObjectiveC\/NSObject-swift.class\/addObserver(_:forKeyPath:options:context:)] method unintentionally retained it, unlike all other uses of key-value observing. This has been corrected, and normal Cocoa memory management rules are now followed.\n- Fixed key-value observing bug in [doc:\/\/com.apple.documentation\/documentation\/Foundation\/UserDefaults]. Reading defaults on one thread while another thread set defaults could nondeterministically send key-value observing notifications on both threads, rather than just the thread doing the set operation. This is now fixed.\n\n### On-Demand Resources\n\n[doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSBundleResourceRequest] no longer throws exceptions when encountering certain kinds of internal errors. Instead, it returns an error in the error argument of the completion handler of the [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSBundleResourceRequest\/beginAccessingResources(completionHandler:)] method. The error might include the [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSFileReadUnknownError-swift.var] and `NSXPCConnectionInterrupted` errors in addition to [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSUserCancelledError-swift.var] and network-related errors.\n\nIf your app encounters an error when using [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSBundleResourceRequest], request the resource again or display a prompt to your user to try again.\n\n### Thread Safety of Bundles\n\nThe [doc:\/\/com.apple.documentation\/documentation\/Foundation\/Bundle\/principalClass] property on [doc:\/\/com.apple.documentation\/documentation\/Foundation\/Bundle] includes new thread-safety improvements. Accessing the property blocks if other threads are in the process of loading the bundle. This action allows the property to return the correct value in all cases.\n\n### CFMessagePort\n\nThe [doc:\/\/com.apple.documentation\/documentation\/CoreFoundation\/CFMessagePortSetName(_:_:)] function doesn’t do anything in apps linked on or after macOS 10.14, iOS 12, watchOS 5, and tvOS 12. This API will be deprecated in a future release.\n\nIn apps linked on earlier versions of macOS, iOS, watchOS, and tvOS, the [doc:\/\/com.apple.documentation\/documentation\/CoreFoundation\/CFMessagePortSetName(_:_:)] function doesn’t do anything if the message port already has a dispatch queue associated with itself via the [doc:\/\/com.apple.documentation\/documentation\/CoreFoundation\/CFMessagePortSetDispatchQueue(_:_:)] function. Previously, this pattern would result in undefined behavior.\n\nIn all cases, if you need to change the name of a [doc:\/\/com.apple.documentation\/documentation\/CoreFoundation\/CFMessagePort], use [doc:\/\/com.apple.documentation\/documentation\/CoreFoundation\/CFMessagePortCreateLocal(_:_:_:_:_:)] or [doc:\/\/com.apple.documentation\/documentation\/CoreFoundation\/CFMessagePortCreateRemote(_:_:)].\n\n",
  "sections" : [

  ],
  "source" : "appleJSON",
  "title" : "Foundation Release Notes",
  "url" : "https:\/\/developer.apple.com\/documentation\/iOS-iPadOS-Release-Notes\/foundation-release-notes"
}