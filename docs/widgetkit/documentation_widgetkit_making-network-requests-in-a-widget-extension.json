{
  "abstract" : "Update your widget with new information you fetch with a network request.",
  "codeExamples" : [

  ],
  "contentHash" : "fce76d0ed229f7128afbc2ed06ab5b36099d09cf1ad088f5f4f3d012126c5ef3",
  "crawledAt" : "2025-12-02T16:43:59Z",
  "id" : "FED0EBCC-82E6-47F5-A743-A99C98629319",
  "kind" : "article",
  "language" : "swift",
  "module" : "WidgetKit",
  "overview" : "## Overview\n\nWidgets use a timeline mechanism to update their content. In addition to providing a timeline with new local data, you can initiate a network request that provides updated information for your widget from your server. Network requests are possible while the widget extension is active, such as when it provides a snapshot, or a new timeline. For example, the Emoji Rangers widget of the [doc:\/\/com.apple.WidgetKit\/documentation\/WidgetKit\/emoji-rangers-supporting-live-activities-interactivity-and-animations] sample code project loads updated leaderboard data in its [doc:\/\/com.apple.WidgetKit\/documentation\/WidgetKit\/TimelineProvider\/getTimeline(in:completion:)] implementation.\n\nIn general, making a network request from a widget extension is similar to making a network request in your app: you can initiate inline or background requests. However, widgets can only access limited resources and a request may not have enough time to complete before the system halts the widget extension. To update a widget with data from your server, use background requests similar to the process described in [doc:\/\/com.apple.documentation\/documentation\/Foundation\/downloading-files-in-the-background].\n\n### Load data with a background network request\n\nWhen a widget initiates a background network request, the system delivers events related to the request directly to the widget extension instead of the containing app. To process them, do the following:\n\nIf the system terminates your widget extension before all events complete, use the stored `matching` identifier to check if a corresponding [doc:\/\/com.apple.documentation\/documentation\/Foundation\/URLSession] object exists. If no session object exists, create a new session using the identifier.\n\n### Update your widget after background network requests complete\n\nAfter invoking [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/WidgetConfiguration\/onBackgroundURLSessionEvents(matching:_:)-fw6x], the system calls the [doc:\/\/com.apple.documentation\/documentation\/Foundation\/URLSessionDownloadDelegate\/urlSession(_:downloadTask:didFinishDownloadingTo:)] method of the [doc:\/\/com.apple.documentation\/documentation\/Foundation\/URLSessionDelegate] you supplied to the [doc:\/\/com.apple.documentation\/documentation\/Foundation\/URLSession]. When the system has delivered all events, it calls the delegate’s [doc:\/\/com.apple.documentation\/documentation\/Foundation\/URLSessionDelegate\/urlSessionDidFinishEvents(forBackgroundURLSession:)] method.\n\nTo refresh your widget’s timeline after the network request completes, call the needed [doc:\/\/com.apple.WidgetKit\/documentation\/WidgetKit\/WidgetCenter] methods from your implementation of `SessionDidFinishEvents(forBackgroundURLSession:)`. Once you finish handling the events, call the completion handler of `onBackgroundURLSessionEvents(matching:_:)` that you previously stored.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/WidgetKit\/Making-network-requests-in-a-widget-extension\ncrawled: 2025-12-02T16:43:59Z\n---\n\n# Making network requests in a widget extension\n\n**Article**\n\nUpdate your widget with new information you fetch with a network request.\n\n## Overview\n\nWidgets use a timeline mechanism to update their content. In addition to providing a timeline with new local data, you can initiate a network request that provides updated information for your widget from your server. Network requests are possible while the widget extension is active, such as when it provides a snapshot, or a new timeline. For example, the Emoji Rangers widget of the [doc:\/\/com.apple.WidgetKit\/documentation\/WidgetKit\/emoji-rangers-supporting-live-activities-interactivity-and-animations] sample code project loads updated leaderboard data in its [doc:\/\/com.apple.WidgetKit\/documentation\/WidgetKit\/TimelineProvider\/getTimeline(in:completion:)] implementation.\n\nIn general, making a network request from a widget extension is similar to making a network request in your app: you can initiate inline or background requests. However, widgets can only access limited resources and a request may not have enough time to complete before the system halts the widget extension. To update a widget with data from your server, use background requests similar to the process described in [doc:\/\/com.apple.documentation\/documentation\/Foundation\/downloading-files-in-the-background].\n\n### Load data with a background network request\n\nWhen a widget initiates a background network request, the system delivers events related to the request directly to the widget extension instead of the containing app. To process them, do the following:\n\n1. Add the [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/WidgetConfiguration\/onBackgroundURLSessionEvents(matching:_:)-fw6x] modifier to your [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/WidgetConfiguration] implementation.\n2. Maintain a reference to the [doc:\/\/com.apple.documentation\/documentation\/Foundation\/URLSession] object of your background network request.\n3. Keep a reference to the `matching` parameter to identify the session.\n4. Store a reference to the `onBackgroundURLSessionEvents(matching:_:)` modifier’s completion handler. You’ll invoke it after the system delivers all events for the network request.\n\nIf the system terminates your widget extension before all events complete, use the stored `matching` identifier to check if a corresponding [doc:\/\/com.apple.documentation\/documentation\/Foundation\/URLSession] object exists. If no session object exists, create a new session using the identifier.\n\n\n\n### Update your widget after background network requests complete\n\nAfter invoking [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/WidgetConfiguration\/onBackgroundURLSessionEvents(matching:_:)-fw6x], the system calls the [doc:\/\/com.apple.documentation\/documentation\/Foundation\/URLSessionDownloadDelegate\/urlSession(_:downloadTask:didFinishDownloadingTo:)] method of the [doc:\/\/com.apple.documentation\/documentation\/Foundation\/URLSessionDelegate] you supplied to the [doc:\/\/com.apple.documentation\/documentation\/Foundation\/URLSession]. When the system has delivered all events, it calls the delegate’s [doc:\/\/com.apple.documentation\/documentation\/Foundation\/URLSessionDelegate\/urlSessionDidFinishEvents(forBackgroundURLSession:)] method.\n\nTo refresh your widget’s timeline after the network request completes, call the needed [doc:\/\/com.apple.WidgetKit\/documentation\/WidgetKit\/WidgetCenter] methods from your implementation of `SessionDidFinishEvents(forBackgroundURLSession:)`. Once you finish handling the events, call the completion handler of `onBackgroundURLSessionEvents(matching:_:)` that you previously stored.\n\n## Capabilities\n\n- **Accessing location information in widgets**: Incorporate location information into your widget presentation to make it more relevant and contextual.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Incorporate location information into your widget presentation to make it more relevant and contextual.",
          "name" : "Accessing location information in widgets",
          "url" : "https:\/\/developer.apple.com\/documentation\/WidgetKit\/Accessing-Location-Information-in-Widgets"
        }
      ],
      "title" : "Capabilities"
    }
  ],
  "source" : "appleJSON",
  "title" : "Making network requests in a widget extension",
  "url" : "https:\/\/developer.apple.com\/documentation\/WidgetKit\/Making-network-requests-in-a-widget-extension"
}