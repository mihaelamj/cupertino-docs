{
  "abstract" : "Customize the way controls display across the system and offer people the ability to configure them.",
  "codeExamples" : [
    {
      "code" : "struct TimerToggle: ControlWidget {\n\tstatic let kind: String = \"com.example.MyApp.TimerToggle\"\n\n\tvar body: some ControlWidgetConfiguration {\n\t\tStaticControlConfiguration(\n\t\t\t...\n\t\t) {\n\t\t\tControlWidgetToggle(\n\t\t\t\t...\n\t\t\t)\n\t\t}\n\t\t.displayName(\"Productivity Timer\")\n\t\t.description(\"Start and stop a productivity timer.\")\n\t}\n}",
      "language" : "swift"
    },
    {
      "code" : "struct UnlockDoor: AppIntent {\n\tstatic let title: LocalizedStringResource = \"Unlock the door\"\n\tstatic let authenticationPolicy = .requiresAuthentication\n\t...\n}",
      "language" : "swift"
    },
    {
      "code" : "struct DoorOpener: ControlWidget {\n\tvar body: some ControlWidgetConfiguration {\n\t\tStaticControlConfiguration(...) {\n\t\t\tControlWidgetToggle(...) {\n\t\t\t\tLabel(\n\t\t\t\t\tisOpen ? \"Open\" : \"Closed\",\n\t\t\t\t\tsystemImage: isOpen ? \"door.open\" : \"door.closed\"\n\t\t\t\t)\n\t\t\t}\n\t\t\t.privacySensitive()\n\t\t}\n\t}\n}",
      "language" : "swift"
    },
    {
      "code" : "\/\/ Hint Text: \"Hold for 'Perform Action'\"\nstruct PerformActionButton: ControlWidget {\n\tvar body: some ControlWidgetConfiguration {\n\t\tStaticControlConfiguration(...) {\n\t\t\t...\n\t\t}\n\t\t.displayName(\"Perform Action\")\n\t}\n}",
      "language" : "swift"
    },
    {
      "code" : "\/\/ Hint Text: \"Hold to Open MyApp\"\nstruct MyAppLauncher: ControlWidget {\n\tvar body: some ControlWidgetConfiguration {\n\t\tStaticControlConfiguration(...) {\n\t\t\tControlWidgetButton(\n\t\t\t\taction: OpenMyAppIntent(),\n\t\t\t\t...\n\t\t\t)\n\t\t}\n\t\t.displayName(\"MyApp\")    \n\t}\n}",
      "language" : "swift"
    },
    {
      "code" : "\/\/ Hint Text: \"Hold to Turn On 'Lightswitch'\" \/ \"Hold to Turn Off 'Lightswitch'\"\nstruct LightswitchToggle: ControlWidget {\n\tvar body: some ControlWidgetConfiguration {\n\t\tStaticControlConfiguration(...) {\n\t\t\t...\n\t\t}\n\t\t.displayName(\"Lightswitch\")\n\t}\n}",
      "language" : "swift"
    },
    {
      "code" : "\/\/ Hint Text: \"Hold to Perform the Action\"\nControlWidgetButton(...) {\n\tLabel(\"Perform Action\", systemName: \"checkmark.circle\")\n\t\t.controlWidgetActionHint(\"Perform the Action\")\n}",
      "language" : "swift"
    },
    {
      "code" : "\/\/ Hint Text: \"Hold to Perform the Action\"\nControlWidgetButton(...) {\n\tImage(systemName: \"checkmark.circle\")\n\t\t.controlWidgetActionHint(\"Perform the Action\")\n}",
      "language" : "swift"
    },
    {
      "code" : "\/\/ Hint Text: \"Hold for Lights On\" \/ \"Hold for Lights Off\"\nControlWidgetToggle(...) { isOn in\n\tLabel(\n\t\tisOn ? \"Lights On\" : \"Lights Off\",\n\t\tsystemImage: isOn ? \"lightbulb.max\" : \"lightbulb\"\n\t)\n}",
      "language" : "swift"
    },
    {
      "code" : "\/\/ Hint Text: \"Hold to Turn on Lights\" \/ \"Hold to Turn off Lights\"\nControlWidgetToggle(...) { isOn in\n\tLabel(\n\t\tisOn ? \"On\" : \"Off\",\n\t\tsystemImage: isOn ? \"lightbulb.max\" : \"lightbulb\"\n\t)\n\t.controlWidgetActionHint(isOn ? \"Turn on Lights\" : \"Turn off Lights\")\n}",
      "language" : "swift"
    },
    {
      "code" : "struct TimerToggle: ControlWidget {\n\tstatic let kind: String = \"com.example.MyApp.TimerToggle\"\n\n\tvar body: some ControlWidgetConfiguration {\n\t\tAppIntentControlConfiguration(\n\t\t\tkind: Self.kind,\n\t\t\tprovider: ConfigurableProvider()\n\t\t) { timerState in\n\t\t\tControlWidgetToggle(\n\t\t\t\ttimerState.timer.name,\n\t\t\t\tisOn: timerState.isRunning,\n\t\t\t\taction: ToggleTimerIntent(timer: timerState.timer),\n\t\t\t\tvalueLabel: { isOn in\n\t\t\t\t\tLabel(isOn ? \"Running\" : \"Stopped\", systemImage: \"timer\")\n\t\t\t\t}\n\t\t\t)\n\t\t}\n\t\t.displayName(\"Productivity Timer\")\n\t\t.description(\"Start and stop a productivity timer.\")\n\t}\n}\n\nextension TimerToggle {\n\tstruct ConfigurableProvider: AppIntentControlValueProvider {\n\t\tfunc previewValue(configuration: SelectTimerIntent) -> TimerState {\n\t\t\treturn TimerState(timer: configuration.timer, isRunning: false)\n\t\t}\n\n\t\tfunc currentValue(configuration: SelectTimerIntent) async throws -> TimerState {b\n\t\t\tlet timer = configuration.timer\n\t\t\tlet isRunning = try await TimerManager.shared.fetchTimerRunning(timer: timer)\n\t\t\t\n\t\t\treturn TimerState(timer: timer, isRunning: isRunning)\n\t\t}\n\t}\n}\n\nstruct ToggleTimerIntent: SetValueIntent {\n    \n    static var title: LocalizedStringResource = \"Start and stop timer\"\n    \n    init() {}\n    \n    init(timer: Timer) {\n        self.timer = timer\n    }\n    \n    @Parameter(title: “Timer”)\n    var timer: Timer\n    \n    @Parameter(title: “Timer is running”)\n    var value: Bool\n    \n    func perform() async throws -> some IntentResult {\n        \/\/ ...\n        \/\/ Code to toggle between starting and stopping the timer.\n        return .result()\n    }\n}",
      "language" : "swift"
    },
    {
      "code" : "struct TimerToggle: ControlWidget {\n\tstatic let kind: String = \"com.example.MyApp.TimerToggle\"\n\n\tvar body: some ControlWidgetConfiguration {\n\t\tAppIntentControlConfiguration(\n\t\t\t...\n\t\t) { timerState in\n\t\t\tControlWidgetToggle(\n\t\t\t\t...\n\t\t\t)\n\t\t}\n\t\t.promptsForUserConfiguration()\n\t}\n}",
      "language" : "swift"
    }
  ],
  "contentHash" : "28ad315aa656ae5b065c859500bc31d5d1bfd1e61a0386ad79d74006c4a1f6d0",
  "crawledAt" : "2025-12-03T04:06:25Z",
  "id" : "2809913F-5AAB-4AE4-9D77-1775AB4FDF7A",
  "kind" : "article",
  "language" : "swift",
  "module" : "WidgetKit",
  "overview" : "## Overview\n\nYou can use controls to allow people to enhance Control Center, the Lock Screen, and the Action button with actions from your app. Each system space displays controls differently, adding or removing information where needed: for example, people can resize controls in Control Center. Depending on the size, the title and value text aren’t always visible. Refine controls to display in different system spaces and provide people with the information they need.\n\nControls perform an action, and can provide configuration options to allow someone to customize what the action does, such as choosing which light to turn on and off. Consider if configuration is a good choice for your control.\n\n### Customize your control’s name and description\n\nBy default, the name of your app displays as the name for your control when the control appears in the controls gallery, and control toggles display in their inactive state. Customize your control’s name if your app offers multiple controls or to provide more context about what your control does. Customize the name of your control using the [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/ControlWidgetConfiguration\/displayName(_:)] modifier. Localize your control’s name, if applicable.\n\nThe control’s configuration view displays a localizable description for a control. Add a description, using the [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/ControlWidgetConfiguration\/description(_:)] modifier, to give additional information about what the control does.\n\nThe following code adds a name and description to the control that gives people more insight about what it does:\n\n### Enforce security and privacy for controls\n\nControls can require a device to be authenticated to allow the control to perform its action or to display its current state and information. Set the `authenticationPolicy` in the control’s app intent to refine what level of authentication is necessary to perform the action.\n\nThe following code sets the [doc:\/\/com.apple.documentation\/documentation\/AppIntents\/AppIntent\/authenticationPolicy-1r9kh] to [doc:\/\/com.apple.documentation\/documentation\/AppIntents\/IntentAuthenticationPolicy\/requiresAuthentication] to require device authentication to unlock a door:\n\nUse the [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/ControlWidgetTemplate\/privacySensitive(_:)] modifier on a [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/ControlWidgetTemplate] type to redact the active or inactive state of a control while the device isn’t authenticated.\n\nThe following code adds the `privacySensitive()` modifier to a control toggle. The modifier redacts the state and information in the control that displays whether a door is open or closed:\n\nYou may use the `privacySensitive()` modifier on a control’s value or label individually to redact that information when a device isn’t authenticated, but the control’s active or inactive state will still be visible.\n\nRequire authentication if a control performing its action would be problematic if done unintentionally or not by the device owner. Redact information if a control displays personally identifiable or security-related information or state.\n\n### Refine Action button hint text\n\nThe Action button gives quick and easy access to controls and system functionality. Provide hint text to people to help give context to the action the control performs. The text set with the `displayName` modifier on the [doc:\/\/com.apple.WidgetKit\/documentation\/WidgetKit\/StaticControlConfiguration] or [doc:\/\/com.apple.WidgetKit\/documentation\/WidgetKit\/AppIntentControlConfiguration] provides text to the system to display a hint. The default hint text is different for buttons, toggles, and buttons that have an [doc:\/\/com.apple.documentation\/documentation\/AppIntents\/OpenIntent] action to launch an app.\n\nThe following code shows the default hint text for a button:\n\nThe following code shows the default hint text for a button with an `OpenIntent` action:\n\nHint text for a toggle prepends with “Hold to Turn On…” and “Hold to Turn Off…” The following code shows the default hint text for a toggle:\n\nUse [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/Label] and the [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/View\/controlWidgetActionHint(_:)] modifier in your control content to create fully custom hint text. Begin the  `controlWidgetActionHint` with a verb, similar to [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/View\/accessibilityHint(_:isEnabled:)].\n\nWhen you customize hint text for button controls, the hint text prepends with “Hold to…” The following code shows custom hint text for a button:\n\nThe following code shows custom hint text for a button with an `OpenIntent` action. The hint text is the same as a button, but when executed, this action launches the app:\n\nCustomize toggles using custom value text or a custom action hint. Custom hint text using custom value text prepends with “Hold for…” Custom hint text using a custom action hint prepends with “Hold to…”\n\nThe following code shows custom hint text for a toggle using custom value text:\n\nThe following code uses the `controlWidgetActionHint` modifier to display custom hint text:\n\n### Add Control Center status text\n\nUse the [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/View\/controlWidgetStatus(_:)] modifier to display momentary status text in Control Center when a control’s action is performed. Status text conveys additional information about the control’s state or the duration of effectiveness of the state. For example, status text might display the time a car idles before turning off after being remotely started.\n\nUse status text sparingly and only in situations where important information isn’t conveyed by the control.\n\n### Add configuration to a control\n\nMake a control configurable to enable people to use multiple controls and to set them up to perform different actions, such as selecting a productivity timer instead of a reading timer.\n\nTo make a control configurable, use an [doc:\/\/com.apple.WidgetKit\/documentation\/WidgetKit\/AppIntentControlConfiguration] and conform your value provider to [doc:\/\/com.apple.WidgetKit\/documentation\/WidgetKit\/AppIntentControlValueProvider]. This step tells the system you provide the ability for someone to configure the control when they long press the control, in edit mode, in Control Center, on the Lock Screen, and when they configure the control for the Action button.\n\nThe following code creates a control toggle that starts and stops a timer. Someone can configure the control and select their desired type of timer. The control uses `AppIntentControlConfiguration` and sets the name of the control to the name of the configured timer. `ToggleTimerIntent` acts on the selected timer. The control has a provider that uses `AppIntentControlValueProvider` and has a custom app intent, `SelectTimerIntent`, that provides the type of timer choices:\n\nA control that requires configuration to be functional can use the `promptsForUserConfiguration` modifier to have the system automatically prompt someone for configuration when they add it to Control Center or the Lock Screen, or configure it for the Action button.\n\nThe following code uses the [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/ControlWidgetConfiguration\/promptsForUserConfiguration()] modifier on the `AppIntentControlConfiguration` to prompt someone to configure the control when they choose it:",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/WidgetKit\/Adding-refinements-and-configuration-to-controls\ncrawled: 2025-12-03T04:06:25Z\n---\n\n# Adding refinements and configuration to controls\n\n**Article**\n\nCustomize the way controls display across the system and offer people the ability to configure them.\n\n## Overview\n\nYou can use controls to allow people to enhance Control Center, the Lock Screen, and the Action button with actions from your app. Each system space displays controls differently, adding or removing information where needed: for example, people can resize controls in Control Center. Depending on the size, the title and value text aren’t always visible. Refine controls to display in different system spaces and provide people with the information they need.\n\nControls perform an action, and can provide configuration options to allow someone to customize what the action does, such as choosing which light to turn on and off. Consider if configuration is a good choice for your control.\n\n### Customize your control’s name and description\n\nBy default, the name of your app displays as the name for your control when the control appears in the controls gallery, and control toggles display in their inactive state. Customize your control’s name if your app offers multiple controls or to provide more context about what your control does. Customize the name of your control using the [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/ControlWidgetConfiguration\/displayName(_:)] modifier. Localize your control’s name, if applicable.\n\nThe control’s configuration view displays a localizable description for a control. Add a description, using the [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/ControlWidgetConfiguration\/description(_:)] modifier, to give additional information about what the control does.\n\nThe following code adds a name and description to the control that gives people more insight about what it does:\n\n```swift\nstruct TimerToggle: ControlWidget {\n\tstatic let kind: String = \"com.example.MyApp.TimerToggle\"\n\n\tvar body: some ControlWidgetConfiguration {\n\t\tStaticControlConfiguration(\n\t\t\t...\n\t\t) {\n\t\t\tControlWidgetToggle(\n\t\t\t\t...\n\t\t\t)\n\t\t}\n\t\t.displayName(\"Productivity Timer\")\n\t\t.description(\"Start and stop a productivity timer.\")\n\t}\n}\n```\n\n### Enforce security and privacy for controls\n\nControls can require a device to be authenticated to allow the control to perform its action or to display its current state and information. Set the `authenticationPolicy` in the control’s app intent to refine what level of authentication is necessary to perform the action.\n\nThe following code sets the [doc:\/\/com.apple.documentation\/documentation\/AppIntents\/AppIntent\/authenticationPolicy-1r9kh] to [doc:\/\/com.apple.documentation\/documentation\/AppIntents\/IntentAuthenticationPolicy\/requiresAuthentication] to require device authentication to unlock a door:\n\n```swift\nstruct UnlockDoor: AppIntent {\n\tstatic let title: LocalizedStringResource = \"Unlock the door\"\n\tstatic let authenticationPolicy = .requiresAuthentication\n\t...\n}\n```\n\nUse the [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/ControlWidgetTemplate\/privacySensitive(_:)] modifier on a [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/ControlWidgetTemplate] type to redact the active or inactive state of a control while the device isn’t authenticated.\n\nThe following code adds the `privacySensitive()` modifier to a control toggle. The modifier redacts the state and information in the control that displays whether a door is open or closed:\n\n```swift\nstruct DoorOpener: ControlWidget {\n\tvar body: some ControlWidgetConfiguration {\n\t\tStaticControlConfiguration(...) {\n\t\t\tControlWidgetToggle(...) {\n\t\t\t\tLabel(\n\t\t\t\t\tisOpen ? \"Open\" : \"Closed\",\n\t\t\t\t\tsystemImage: isOpen ? \"door.open\" : \"door.closed\"\n\t\t\t\t)\n\t\t\t}\n\t\t\t.privacySensitive()\n\t\t}\n\t}\n}\n```\n\nYou may use the `privacySensitive()` modifier on a control’s value or label individually to redact that information when a device isn’t authenticated, but the control’s active or inactive state will still be visible.\n\nRequire authentication if a control performing its action would be problematic if done unintentionally or not by the device owner. Redact information if a control displays personally identifiable or security-related information or state.\n\n### Refine Action button hint text\n\nThe Action button gives quick and easy access to controls and system functionality. Provide hint text to people to help give context to the action the control performs. The text set with the `displayName` modifier on the [doc:\/\/com.apple.WidgetKit\/documentation\/WidgetKit\/StaticControlConfiguration] or [doc:\/\/com.apple.WidgetKit\/documentation\/WidgetKit\/AppIntentControlConfiguration] provides text to the system to display a hint. The default hint text is different for buttons, toggles, and buttons that have an [doc:\/\/com.apple.documentation\/documentation\/AppIntents\/OpenIntent] action to launch an app.\n\nThe following code shows the default hint text for a button:\n\n```swift\n\/\/ Hint Text: \"Hold for 'Perform Action'\"\nstruct PerformActionButton: ControlWidget {\n\tvar body: some ControlWidgetConfiguration {\n\t\tStaticControlConfiguration(...) {\n\t\t\t...\n\t\t}\n\t\t.displayName(\"Perform Action\")\n\t}\n}\n```\n\nThe following code shows the default hint text for a button with an `OpenIntent` action:\n\n```swift\n\/\/ Hint Text: \"Hold to Open MyApp\"\nstruct MyAppLauncher: ControlWidget {\n\tvar body: some ControlWidgetConfiguration {\n\t\tStaticControlConfiguration(...) {\n\t\t\tControlWidgetButton(\n\t\t\t\taction: OpenMyAppIntent(),\n\t\t\t\t...\n\t\t\t)\n\t\t}\n\t\t.displayName(\"MyApp\")    \n\t}\n}\n```\n\nHint text for a toggle prepends with “Hold to Turn On…” and “Hold to Turn Off…” The following code shows the default hint text for a toggle:\n\n```swift\n\/\/ Hint Text: \"Hold to Turn On 'Lightswitch'\" \/ \"Hold to Turn Off 'Lightswitch'\"\nstruct LightswitchToggle: ControlWidget {\n\tvar body: some ControlWidgetConfiguration {\n\t\tStaticControlConfiguration(...) {\n\t\t\t...\n\t\t}\n\t\t.displayName(\"Lightswitch\")\n\t}\n}\n```\n\nUse [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/Label] and the [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/View\/controlWidgetActionHint(_:)] modifier in your control content to create fully custom hint text. Begin the  `controlWidgetActionHint` with a verb, similar to [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/View\/accessibilityHint(_:isEnabled:)].\n\nWhen you customize hint text for button controls, the hint text prepends with “Hold to…” The following code shows custom hint text for a button:\n\n```swift\n\/\/ Hint Text: \"Hold to Perform the Action\"\nControlWidgetButton(...) {\n\tLabel(\"Perform Action\", systemName: \"checkmark.circle\")\n\t\t.controlWidgetActionHint(\"Perform the Action\")\n}\n```\n\nThe following code shows custom hint text for a button with an `OpenIntent` action. The hint text is the same as a button, but when executed, this action launches the app:\n\n```swift\n\/\/ Hint Text: \"Hold to Perform the Action\"\nControlWidgetButton(...) {\n\tImage(systemName: \"checkmark.circle\")\n\t\t.controlWidgetActionHint(\"Perform the Action\")\n}\n```\n\nCustomize toggles using custom value text or a custom action hint. Custom hint text using custom value text prepends with “Hold for…” Custom hint text using a custom action hint prepends with “Hold to…”\n\nThe following code shows custom hint text for a toggle using custom value text:\n\n```swift\n\/\/ Hint Text: \"Hold for Lights On\" \/ \"Hold for Lights Off\"\nControlWidgetToggle(...) { isOn in\n\tLabel(\n\t\tisOn ? \"Lights On\" : \"Lights Off\",\n\t\tsystemImage: isOn ? \"lightbulb.max\" : \"lightbulb\"\n\t)\n}\n```\n\nThe following code uses the `controlWidgetActionHint` modifier to display custom hint text:\n\n```swift\n\/\/ Hint Text: \"Hold to Turn on Lights\" \/ \"Hold to Turn off Lights\"\nControlWidgetToggle(...) { isOn in\n\tLabel(\n\t\tisOn ? \"On\" : \"Off\",\n\t\tsystemImage: isOn ? \"lightbulb.max\" : \"lightbulb\"\n\t)\n\t.controlWidgetActionHint(isOn ? \"Turn on Lights\" : \"Turn off Lights\")\n}\n```\n\n\n\n### Add Control Center status text\n\nUse the [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/View\/controlWidgetStatus(_:)] modifier to display momentary status text in Control Center when a control’s action is performed. Status text conveys additional information about the control’s state or the duration of effectiveness of the state. For example, status text might display the time a car idles before turning off after being remotely started.\n\nUse status text sparingly and only in situations where important information isn’t conveyed by the control.\n\n### Add configuration to a control\n\nMake a control configurable to enable people to use multiple controls and to set them up to perform different actions, such as selecting a productivity timer instead of a reading timer.\n\nTo make a control configurable, use an [doc:\/\/com.apple.WidgetKit\/documentation\/WidgetKit\/AppIntentControlConfiguration] and conform your value provider to [doc:\/\/com.apple.WidgetKit\/documentation\/WidgetKit\/AppIntentControlValueProvider]. This step tells the system you provide the ability for someone to configure the control when they long press the control, in edit mode, in Control Center, on the Lock Screen, and when they configure the control for the Action button.\n\nThe following code creates a control toggle that starts and stops a timer. Someone can configure the control and select their desired type of timer. The control uses `AppIntentControlConfiguration` and sets the name of the control to the name of the configured timer. `ToggleTimerIntent` acts on the selected timer. The control has a provider that uses `AppIntentControlValueProvider` and has a custom app intent, `SelectTimerIntent`, that provides the type of timer choices:\n\n```swift\nstruct TimerToggle: ControlWidget {\n\tstatic let kind: String = \"com.example.MyApp.TimerToggle\"\n\n\tvar body: some ControlWidgetConfiguration {\n\t\tAppIntentControlConfiguration(\n\t\t\tkind: Self.kind,\n\t\t\tprovider: ConfigurableProvider()\n\t\t) { timerState in\n\t\t\tControlWidgetToggle(\n\t\t\t\ttimerState.timer.name,\n\t\t\t\tisOn: timerState.isRunning,\n\t\t\t\taction: ToggleTimerIntent(timer: timerState.timer),\n\t\t\t\tvalueLabel: { isOn in\n\t\t\t\t\tLabel(isOn ? \"Running\" : \"Stopped\", systemImage: \"timer\")\n\t\t\t\t}\n\t\t\t)\n\t\t}\n\t\t.displayName(\"Productivity Timer\")\n\t\t.description(\"Start and stop a productivity timer.\")\n\t}\n}\n\nextension TimerToggle {\n\tstruct ConfigurableProvider: AppIntentControlValueProvider {\n\t\tfunc previewValue(configuration: SelectTimerIntent) -> TimerState {\n\t\t\treturn TimerState(timer: configuration.timer, isRunning: false)\n\t\t}\n\n\t\tfunc currentValue(configuration: SelectTimerIntent) async throws -> TimerState {b\n\t\t\tlet timer = configuration.timer\n\t\t\tlet isRunning = try await TimerManager.shared.fetchTimerRunning(timer: timer)\n\t\t\t\n\t\t\treturn TimerState(timer: timer, isRunning: isRunning)\n\t\t}\n\t}\n}\n\nstruct ToggleTimerIntent: SetValueIntent {\n    \n    static var title: LocalizedStringResource = \"Start and stop timer\"\n    \n    init() {}\n    \n    init(timer: Timer) {\n        self.timer = timer\n    }\n    \n    @Parameter(title: “Timer”)\n    var timer: Timer\n    \n    @Parameter(title: “Timer is running”)\n    var value: Bool\n    \n    func perform() async throws -> some IntentResult {\n        \/\/ ...\n        \/\/ Code to toggle between starting and stopping the timer.\n        return .result()\n    }\n}\n```\n\nA control that requires configuration to be functional can use the `promptsForUserConfiguration` modifier to have the system automatically prompt someone for configuration when they add it to Control Center or the Lock Screen, or configure it for the Action button.\n\nThe following code uses the [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/ControlWidgetConfiguration\/promptsForUserConfiguration()] modifier on the `AppIntentControlConfiguration` to prompt someone to configure the control when they choose it:\n\n```swift\nstruct TimerToggle: ControlWidget {\n\tstatic let kind: String = \"com.example.MyApp.TimerToggle\"\n\n\tvar body: some ControlWidgetConfiguration {\n\t\tAppIntentControlConfiguration(\n\t\t\t...\n\t\t) { timerState in\n\t\t\tControlWidgetToggle(\n\t\t\t\t...\n\t\t\t)\n\t\t}\n\t\t.promptsForUserConfiguration()\n\t}\n}\n```\n\n## Setup and configuration\n\n- **Creating controls to perform actions across the system**: Perform your app’s actions from Control Center, the Lock Screen, and the Action button.\n- **StaticControlConfiguration**: The description of a control that has no user-configurable options.\n- **AppIntentControlConfiguration**: The description of a control that uses a custom app intent to provide user-configurable options.\n- **ControlCenter**: An object you use to access configuration information for controls and reload them.\n- **ControlInfo**: A structure that contains information about user-configured controls.\n- **ControlWidgetButton**: A control template representing a button.\n- **ControlWidgetToggle**: A control template representing a toggle.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Perform your app’s actions from Control Center, the Lock Screen, and the Action button.",
          "name" : "Creating controls to perform actions across the system",
          "url" : "https:\/\/developer.apple.com\/documentation\/WidgetKit\/Creating-controls-to-perform-actions-across-the-system"
        },
        {
          "description" : "The description of a control that has no user-configurable options.",
          "name" : "StaticControlConfiguration",
          "url" : "https:\/\/developer.apple.com\/documentation\/WidgetKit\/StaticControlConfiguration"
        },
        {
          "description" : "The description of a control that uses a custom app intent to provide user-configurable options.",
          "name" : "AppIntentControlConfiguration",
          "url" : "https:\/\/developer.apple.com\/documentation\/WidgetKit\/AppIntentControlConfiguration"
        },
        {
          "description" : "An object you use to access configuration information for controls and reload them.",
          "name" : "ControlCenter",
          "url" : "https:\/\/developer.apple.com\/documentation\/WidgetKit\/ControlCenter"
        },
        {
          "description" : "A structure that contains information about user-configured controls.",
          "name" : "ControlInfo",
          "url" : "https:\/\/developer.apple.com\/documentation\/WidgetKit\/ControlInfo"
        },
        {
          "description" : "A control template representing a button.",
          "name" : "ControlWidgetButton",
          "url" : "https:\/\/developer.apple.com\/documentation\/WidgetKit\/ControlWidgetButton"
        },
        {
          "description" : "A control template representing a toggle.",
          "name" : "ControlWidgetToggle",
          "url" : "https:\/\/developer.apple.com\/documentation\/WidgetKit\/ControlWidgetToggle"
        }
      ],
      "title" : "Setup and configuration"
    }
  ],
  "source" : "appleJSON",
  "title" : "Adding refinements and configuration to controls",
  "url" : "https:\/\/developer.apple.com\/documentation\/WidgetKit\/Adding-refinements-and-configuration-to-controls"
}