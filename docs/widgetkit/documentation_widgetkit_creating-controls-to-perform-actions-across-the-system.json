{
  "abstract" : "Perform your app’s actions from Control Center, the Lock Screen, and the Action button.",
  "codeExamples" : [
    {
      "code" : "struct TimerToggle: ControlWidget {\n\tstatic let kind: String = \"com.example.MyApp.TimerToggle\"\n\n\tvar body: some ControlWidgetConfiguration {\n\t\tStaticControlConfiguration(\n\t\t\tkind: Self.kind,\n\t\t\tprovider: Provider()\n\t\t) { value in\n\t\t\tControlWidgetToggle(\n\t\t\t\t\"Productivity Timer\",\n\t\t\t\tisOn: value,\n\t\t\t\taction: ToggleTimerIntent(),\n\t\t\t\tvalueLabel: { isOn in\n\t\t\t\t\tLabel(isOn ? \"Running\" : \"Stopped\", systemImage: \"timer\")\n\t\t\t\t}\n\t\t\t)\n\t\t}\n\t\t.displayName(\"Productivity Timer\")\n\t\t.description(\"Start and stop a productivity timer.\")\n\t}\n}\n\nextension TimerToggle {\n\tstruct Provider: ControlValueProvider {\n\t\tvar previewValue: Bool {\n\t\t\tfalse\n\t\t}\n\n\t\tfunc currentValue() async throws -> Bool {\n\t\t\tlet isRunning = true \/\/ Check if the timer is running\n\t\t\treturn isRunning\n\t\t}\n\t}\n}\n\nstruct ToggleTimerIntent: SetValueIntent {\n\tstatic var title: LocalizedStringResource = \"Productivity Timer\"\n\n\t@Parameter(title: \"Timer is running\")\n\tvar value: Bool\n\n\tfunc perform() async throws -> some IntentResult {\n\t\t\/\/ Start \/ stop the timer based on `value`.\n\t\treturn .result()\n\t}\n}",
      "language" : "swift"
    },
    {
      "code" : "struct PerformActionButton: ControlWidget {\n\tvar body: some ControlWidgetConfiguration {\n\t\tStaticControlConfiguration(\n\t\t\tkind: \"com.example.myApp.performActionButton\"\n\t\t) {\n\t\t\tControlWidgetButton(action: PerformAction()) {\n                Label(\"Perform Action\", systemImage: \"checkmark.circle\")\n\t\t\t}\n\t\t}\n\t\t.displayName(\"Perform Action\")\n\t\t.description(\"An example control that performs an action.\")\n\t}\n}\n\nstruct PerformAction: AppIntent {\n\tstatic let title: LocalizedStringResource = \"Perform action\"\n\n\tfunc perform() async throws -> some IntentResult {\n\t\t\/\/ Code that performs the action...\n\t\treturn .result()\n\t}\n}",
      "language" : "swift"
    },
    {
      "code" : "import AppIntents\n\nstruct LaunchAppIntent: OpenIntent {\n    static var title: LocalizedStringResource = \"Launch App\"\n    @Parameter(title: \"Target\")\n    var target: LaunchAppEnum\n}\n\nenum LaunchAppEnum: String, AppEnum {\n    case timer\n    case history\n\n    static var typeDisplayRepresentation = TypeDisplayRepresentation(\"Productivity Timer's app screens\")\n    static var caseDisplayRepresentations = [\n        LaunchAppEnum.timer : DisplayRepresentation(\"Timer\"),\n        LaunchAppEnum.history : DisplayRepresentation(\"History\")\n    ]\n}",
      "language" : "swift"
    },
    {
      "code" : "@main\nstruct MyControlsAndWidgetsBundle: WidgetBundle {\n\tvar body: some Widget {\n\t\tPerformActionButton()\n\t\tMyAppWidget()\n\t\tMyAppControlToggle()\n\t}\n}",
      "language" : "swift"
    }
  ],
  "contentHash" : "05349c4197e1af268fa998efd31e13fc368619c45706be38488149e728186e59",
  "crawledAt" : "2025-12-03T03:47:57Z",
  "id" : "EDF29405-3046-4D52-9DBC-2685BEA17EF8",
  "kind" : "article",
  "language" : "swift",
  "module" : "WidgetKit",
  "overview" : "## Overview\n\nA control allows your app to execute an action, launch your app to a specific view, or launch a locked camera capture extension from Control Center, the Lock Screen, or by using the Action button. Customers configure these system spaces with your app’s controls.\n\nControls can be buttons or toggles: buttons perform an action, and toggles perform an action and switch between two states. Configure a control using SwiftUI views and modifiers that define strings and icons that the system uses to display the control. Anticipate people using controls from different places throughout the system, and provide appropriate configuration details for the best experience. For added privacy, require device authentication before a control performs its action, as well as redact the text in a control when the device is locked.\n\nCreate your control’s icon using a symbol image, such as one from [doc:\/\/com.apple.documentation\/design\/Human-Interface-Guidelines\/sf-symbols]. Using symbols allows the system to dynamically apply tint color, weight, scale, and other stylistic traits. While Apple platforms include thousands of symbols, you can also build custom symbols. To learn more, read [doc:\/\/com.apple.documentation\/documentation\/UIKit\/creating-custom-symbol-images-for-your-app].\n\nMake controls configurable to allow someone to choose what it does. This ability is helpful in cases where a control can be configured with a list of options, such as which light to turn on or off.\n\n### Understand the control lifecycle\n\nThe system loads a control when someone adds it to a system space from the controls gallery. A control updates when someone interacts with it, when the app asks to reload it using the shared [doc:\/\/com.apple.WidgetKit\/documentation\/WidgetKit\/ControlCenter], or when the system receives a remote push notification from the Apple Push Notification service (APNs). When the system loads or reloads a control, it runs the body of the control from the widget extension and asks for the control’s current value and content for the current state. The system updates the displayed control with these values.\n\nControls provide their values to the system using a [doc:\/\/com.apple.WidgetKit\/documentation\/WidgetKit\/ControlValueProvider] or an [doc:\/\/com.apple.WidgetKit\/documentation\/WidgetKit\/AppIntentControlValueProvider]. Providers require two functions: [doc:\/\/com.apple.WidgetKit\/documentation\/WidgetKit\/ControlValueProvider\/previewValue] and [doc:\/\/com.apple.WidgetKit\/documentation\/WidgetKit\/ControlValueProvider\/currentValue()]. `previewValue` prepares a canned synchronous value to show people when the control displays in the controls gallery. The controls gallery displays controls using their preview value and in their inactive state. The system fetches the `currentValue()` when the control renders. The system fetches this value asynchronously, and gives you the opportunity to fetch the value from a shared data source or a server. Use a custom intent with `AppIntentControlValueProvider` to provide options for a configurable control.\n\nWhen someone interacts with a control, it performs its action using an app intent you specify. Use [doc:\/\/com.apple.documentation\/documentation\/AppIntents\/AppIntent] or [doc:\/\/com.apple.documentation\/documentation\/AppIntents\/OpenIntent] for control buttons and [doc:\/\/com.apple.documentation\/documentation\/AppIntents\/SetValueIntent] for control toggles. The app intent requires a [doc:\/\/com.apple.documentation\/documentation\/AppIntents\/AppIntent\/perform()] function  in which you carry out actions. The system queries for the state of a control when `perform()` returns; finish all actions and save all state data before it returns.\n\nYou may pass additional data into the app intent to ensure it successfully performs its action. The system preserves the data and makes it available in the `perform()` function inside the app intent. Annotate additional data you pass in with `@Parameter`. For more information on `AppIntent`, refer to [doc:\/\/com.apple.documentation\/documentation\/AppIntents\/AppIntent].\n\nThe system populates the value parameter of a `SetValueIntent` with the value that reflects the new state of the control toggle. Don’t set or manage the value parameter. Update the internal state or model data to this value to remain consistent with the appearance of the control.\n\n### Add a control toggle to your app\n\nThe Widget Extension template provides all you need to start building your control. The template creates a widget extension target that contains a [doc:\/\/com.apple.WidgetKit\/documentation\/WidgetKit\/ControlWidgetToggle].\n\nThe widget extension template provides an initial implementation of a `ControlWidgetToggle`, a [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/ControlWidgetTemplate] type that starts and stops a timer. The body property determines if a control is static or configurable. Controls use a [doc:\/\/com.apple.WidgetKit\/documentation\/WidgetKit\/StaticControlConfiguration] for the body property by default. Provide people with the ability to configure a control by using [doc:\/\/com.apple.WidgetKit\/documentation\/WidgetKit\/AppIntentControlConfiguration].\n\nThe following code creates a nonconfigurable control toggle that starts and stops a timer. The `kind` is the control’s unique identifier and the action of the `ControlWidgetToggle` executes the app intent specified:\n\n### Create a button control\n\nA control button performs an action from your app. For example, the button can launch a locked camera capture extension, start a live activity, or take someone to a specific area of your app.\n\nThe following code creates a nonconfigurable [doc:\/\/com.apple.WidgetKit\/documentation\/WidgetKit\/ControlWidgetButton] that uses an app intent to perform an action:\n\n### Open your app with a control\n\nSet your control’s action to an app intent that conforms to [doc:\/\/com.apple.documentation\/documentation\/AppIntents\/OpenIntent] to open your app when someone uses a control. Using `OpenIntent` allows you to take someone to a specific area of your app when a control performs its action.\n\nThe system requires the Target Membership of the app intent to be set to both the app and the widget extension to open the app.\n\nThe following code uses an app intent to launch the app to a specific screen when a `ControlWidgetButton` performs its action:\n\n### Add controls to your widget bundle\n\nThe [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/WidgetBundle] in the Widget extension provides controls and widgets to the system from your app. List all controls and widgets inside the `WidgetBundle`. The order of controls and widgets in the `WidgetBundle` defines their order in the controls gallery and the widgets gallery.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/WidgetKit\/Creating-controls-to-perform-actions-across-the-system\ncrawled: 2025-12-03T03:47:57Z\n---\n\n# Creating controls to perform actions across the system\n\n**Article**\n\nPerform your app’s actions from Control Center, the Lock Screen, and the Action button.\n\n## Overview\n\nA control allows your app to execute an action, launch your app to a specific view, or launch a locked camera capture extension from Control Center, the Lock Screen, or by using the Action button. Customers configure these system spaces with your app’s controls.\n\nControls can be buttons or toggles: buttons perform an action, and toggles perform an action and switch between two states. Configure a control using SwiftUI views and modifiers that define strings and icons that the system uses to display the control. Anticipate people using controls from different places throughout the system, and provide appropriate configuration details for the best experience. For added privacy, require device authentication before a control performs its action, as well as redact the text in a control when the device is locked.\n\nCreate your control’s icon using a symbol image, such as one from [doc:\/\/com.apple.documentation\/design\/Human-Interface-Guidelines\/sf-symbols]. Using symbols allows the system to dynamically apply tint color, weight, scale, and other stylistic traits. While Apple platforms include thousands of symbols, you can also build custom symbols. To learn more, read [doc:\/\/com.apple.documentation\/documentation\/UIKit\/creating-custom-symbol-images-for-your-app].\n\nMake controls configurable to allow someone to choose what it does. This ability is helpful in cases where a control can be configured with a list of options, such as which light to turn on or off.\n\n### Understand the control lifecycle\n\nThe system loads a control when someone adds it to a system space from the controls gallery. A control updates when someone interacts with it, when the app asks to reload it using the shared [doc:\/\/com.apple.WidgetKit\/documentation\/WidgetKit\/ControlCenter], or when the system receives a remote push notification from the Apple Push Notification service (APNs). When the system loads or reloads a control, it runs the body of the control from the widget extension and asks for the control’s current value and content for the current state. The system updates the displayed control with these values.\n\nControls provide their values to the system using a [doc:\/\/com.apple.WidgetKit\/documentation\/WidgetKit\/ControlValueProvider] or an [doc:\/\/com.apple.WidgetKit\/documentation\/WidgetKit\/AppIntentControlValueProvider]. Providers require two functions: [doc:\/\/com.apple.WidgetKit\/documentation\/WidgetKit\/ControlValueProvider\/previewValue] and [doc:\/\/com.apple.WidgetKit\/documentation\/WidgetKit\/ControlValueProvider\/currentValue()]. `previewValue` prepares a canned synchronous value to show people when the control displays in the controls gallery. The controls gallery displays controls using their preview value and in their inactive state. The system fetches the `currentValue()` when the control renders. The system fetches this value asynchronously, and gives you the opportunity to fetch the value from a shared data source or a server. Use a custom intent with `AppIntentControlValueProvider` to provide options for a configurable control.\n\nWhen someone interacts with a control, it performs its action using an app intent you specify. Use [doc:\/\/com.apple.documentation\/documentation\/AppIntents\/AppIntent] or [doc:\/\/com.apple.documentation\/documentation\/AppIntents\/OpenIntent] for control buttons and [doc:\/\/com.apple.documentation\/documentation\/AppIntents\/SetValueIntent] for control toggles. The app intent requires a [doc:\/\/com.apple.documentation\/documentation\/AppIntents\/AppIntent\/perform()] function  in which you carry out actions. The system queries for the state of a control when `perform()` returns; finish all actions and save all state data before it returns.\n\nYou may pass additional data into the app intent to ensure it successfully performs its action. The system preserves the data and makes it available in the `perform()` function inside the app intent. Annotate additional data you pass in with `@Parameter`. For more information on `AppIntent`, refer to [doc:\/\/com.apple.documentation\/documentation\/AppIntents\/AppIntent].\n\nThe system populates the value parameter of a `SetValueIntent` with the value that reflects the new state of the control toggle. Don’t set or manage the value parameter. Update the internal state or model data to this value to remain consistent with the appearance of the control.\n\n### Add a control toggle to your app\n\nThe Widget Extension template provides all you need to start building your control. The template creates a widget extension target that contains a [doc:\/\/com.apple.WidgetKit\/documentation\/WidgetKit\/ControlWidgetToggle].\n\n1. Open your app project in Xcode and choose File > New > Target.\n2. From the Application Extension group, select Widget Extension, and click Next.\n3. Enter the name of your extension.\n4. Select the Include Control checkbox.\n5. Click Finish.\n\n\n\nThe widget extension template provides an initial implementation of a `ControlWidgetToggle`, a [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/ControlWidgetTemplate] type that starts and stops a timer. The body property determines if a control is static or configurable. Controls use a [doc:\/\/com.apple.WidgetKit\/documentation\/WidgetKit\/StaticControlConfiguration] for the body property by default. Provide people with the ability to configure a control by using [doc:\/\/com.apple.WidgetKit\/documentation\/WidgetKit\/AppIntentControlConfiguration].\n\nThe following code creates a nonconfigurable control toggle that starts and stops a timer. The `kind` is the control’s unique identifier and the action of the `ControlWidgetToggle` executes the app intent specified:\n\n```swift\nstruct TimerToggle: ControlWidget {\n\tstatic let kind: String = \"com.example.MyApp.TimerToggle\"\n\n\tvar body: some ControlWidgetConfiguration {\n\t\tStaticControlConfiguration(\n\t\t\tkind: Self.kind,\n\t\t\tprovider: Provider()\n\t\t) { value in\n\t\t\tControlWidgetToggle(\n\t\t\t\t\"Productivity Timer\",\n\t\t\t\tisOn: value,\n\t\t\t\taction: ToggleTimerIntent(),\n\t\t\t\tvalueLabel: { isOn in\n\t\t\t\t\tLabel(isOn ? \"Running\" : \"Stopped\", systemImage: \"timer\")\n\t\t\t\t}\n\t\t\t)\n\t\t}\n\t\t.displayName(\"Productivity Timer\")\n\t\t.description(\"Start and stop a productivity timer.\")\n\t}\n}\n\nextension TimerToggle {\n\tstruct Provider: ControlValueProvider {\n\t\tvar previewValue: Bool {\n\t\t\tfalse\n\t\t}\n\n\t\tfunc currentValue() async throws -> Bool {\n\t\t\tlet isRunning = true \/\/ Check if the timer is running\n\t\t\treturn isRunning\n\t\t}\n\t}\n}\n\nstruct ToggleTimerIntent: SetValueIntent {\n\tstatic var title: LocalizedStringResource = \"Productivity Timer\"\n\n\t@Parameter(title: \"Timer is running\")\n\tvar value: Bool\n\n\tfunc perform() async throws -> some IntentResult {\n\t\t\/\/ Start \/ stop the timer based on `value`.\n\t\treturn .result()\n\t}\n}\n```\n\n### Create a button control\n\nA control button performs an action from your app. For example, the button can launch a locked camera capture extension, start a live activity, or take someone to a specific area of your app.\n\nThe following code creates a nonconfigurable [doc:\/\/com.apple.WidgetKit\/documentation\/WidgetKit\/ControlWidgetButton] that uses an app intent to perform an action:\n\n```swift\nstruct PerformActionButton: ControlWidget {\n\tvar body: some ControlWidgetConfiguration {\n\t\tStaticControlConfiguration(\n\t\t\tkind: \"com.example.myApp.performActionButton\"\n\t\t) {\n\t\t\tControlWidgetButton(action: PerformAction()) {\n                Label(\"Perform Action\", systemImage: \"checkmark.circle\")\n\t\t\t}\n\t\t}\n\t\t.displayName(\"Perform Action\")\n\t\t.description(\"An example control that performs an action.\")\n\t}\n}\n\nstruct PerformAction: AppIntent {\n\tstatic let title: LocalizedStringResource = \"Perform action\"\n\n\tfunc perform() async throws -> some IntentResult {\n\t\t\/\/ Code that performs the action...\n\t\treturn .result()\n\t}\n}\n```\n\n### Open your app with a control\n\nSet your control’s action to an app intent that conforms to [doc:\/\/com.apple.documentation\/documentation\/AppIntents\/OpenIntent] to open your app when someone uses a control. Using `OpenIntent` allows you to take someone to a specific area of your app when a control performs its action.\n\nThe system requires the Target Membership of the app intent to be set to both the app and the widget extension to open the app.\n\nThe following code uses an app intent to launch the app to a specific screen when a `ControlWidgetButton` performs its action:\n\n```swift\nimport AppIntents\n\nstruct LaunchAppIntent: OpenIntent {\n    static var title: LocalizedStringResource = \"Launch App\"\n    @Parameter(title: \"Target\")\n    var target: LaunchAppEnum\n}\n\nenum LaunchAppEnum: String, AppEnum {\n    case timer\n    case history\n\n    static var typeDisplayRepresentation = TypeDisplayRepresentation(\"Productivity Timer's app screens\")\n    static var caseDisplayRepresentations = [\n        LaunchAppEnum.timer : DisplayRepresentation(\"Timer\"),\n        LaunchAppEnum.history : DisplayRepresentation(\"History\")\n    ]\n}\n```\n\n\n\n### Add controls to your widget bundle\n\nThe [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/WidgetBundle] in the Widget extension provides controls and widgets to the system from your app. List all controls and widgets inside the `WidgetBundle`. The order of controls and widgets in the `WidgetBundle` defines their order in the controls gallery and the widgets gallery.\n\n```swift\n@main\nstruct MyControlsAndWidgetsBundle: WidgetBundle {\n\tvar body: some Widget {\n\t\tPerformActionButton()\n\t\tMyAppWidget()\n\t\tMyAppControlToggle()\n\t}\n}\n```\n\n## Setup and configuration\n\n- **Adding refinements and configuration to controls**: Customize the way controls display across the system and offer people the ability to configure them.\n- **StaticControlConfiguration**: The description of a control that has no user-configurable options.\n- **AppIntentControlConfiguration**: The description of a control that uses a custom app intent to provide user-configurable options.\n- **ControlCenter**: An object you use to access configuration information for controls and reload them.\n- **ControlInfo**: A structure that contains information about user-configured controls.\n- **ControlWidgetButton**: A control template representing a button.\n- **ControlWidgetToggle**: A control template representing a toggle.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Customize the way controls display across the system and offer people the ability to configure them.",
          "name" : "Adding refinements and configuration to controls",
          "url" : "https:\/\/developer.apple.com\/documentation\/WidgetKit\/Adding-refinements-and-configuration-to-controls"
        },
        {
          "description" : "The description of a control that has no user-configurable options.",
          "name" : "StaticControlConfiguration",
          "url" : "https:\/\/developer.apple.com\/documentation\/WidgetKit\/StaticControlConfiguration"
        },
        {
          "description" : "The description of a control that uses a custom app intent to provide user-configurable options.",
          "name" : "AppIntentControlConfiguration",
          "url" : "https:\/\/developer.apple.com\/documentation\/WidgetKit\/AppIntentControlConfiguration"
        },
        {
          "description" : "An object you use to access configuration information for controls and reload them.",
          "name" : "ControlCenter",
          "url" : "https:\/\/developer.apple.com\/documentation\/WidgetKit\/ControlCenter"
        },
        {
          "description" : "A structure that contains information about user-configured controls.",
          "name" : "ControlInfo",
          "url" : "https:\/\/developer.apple.com\/documentation\/WidgetKit\/ControlInfo"
        },
        {
          "description" : "A control template representing a button.",
          "name" : "ControlWidgetButton",
          "url" : "https:\/\/developer.apple.com\/documentation\/WidgetKit\/ControlWidgetButton"
        },
        {
          "description" : "A control template representing a toggle.",
          "name" : "ControlWidgetToggle",
          "url" : "https:\/\/developer.apple.com\/documentation\/WidgetKit\/ControlWidgetToggle"
        }
      ],
      "title" : "Setup and configuration"
    }
  ],
  "source" : "appleJSON",
  "title" : "Creating controls to perform actions across the system",
  "url" : "https:\/\/developer.apple.com\/documentation\/WidgetKit\/Creating-controls-to-perform-actions-across-the-system"
}