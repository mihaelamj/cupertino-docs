{
  "abstract" : "Incorporate location information into your widget presentation to make it more relevant and contextual.",
  "codeExamples" : [

  ],
  "contentHash" : "8d89c3bea7c1f046140d3cb4674badddba2f2cbef5a1baaf75ddbfdc3d1c6316",
  "crawledAt" : "2025-12-03T04:06:08Z",
  "id" : "22378314-561E-43E3-8E11-A457E9567A09",
  "kind" : "article",
  "language" : "swift",
  "module" : "WidgetKit",
  "overview" : "## Overview\n\nWidgets can present relevant and useful information by taking a user’s location into account. Because your widget’s extension doesn’t run continually, using Location Services in your widget requires you to take a few additional steps.\n\n### Enable Location Services in your widget\n\nTo use Location Services in your widget:\n\n### Access location information from your widget\n\nWhen the user adds a widget that uses location, the system asks whether they want to extend the app’s location authorization to the widget. Use [doc:\/\/com.apple.documentation\/documentation\/CoreLocation\/CLLocationManager\/isAuthorizedForWidgetUpdates] to determine whether the widget is eligible to receive location updates. Users can change their approval choice at any time in Settings > Privacy > Location Services.\n\nAfter the user approves the widget’s use of location information, the system considers it “in use” for a short period of time after the widget is visible. If the system refreshes the widget’s view during this in-use period, the widget has access to location information. For example, immediately after a user adds a widget to their Home Screen and approves extending the app’s location authorization, the user’s location is available to the widget.\n\nWhen the widget hasn’t been visible for a period of time, the system no longer considers it in use and stops delivering location updates. When WidgetKit reloads the widget’s view, if `authorizedForWidgetUpdates` is `true` but the widget doesn’t get location updates, it’s a good practice to indicate that the user’s location is not currently available. Note, this is different from when `authorizedForWidgetUpdates` is `false`, which indicates that the user has not approved the widget to receive location updates.\n\n### Test your widget in real-world scenarios\n\nDue to the timeline-based updates of widgets, and the variability of a widget’s in-use status, it’s important to test widgets that use location in real-world scenarios. For example, create test scenarios that:\n\nBecause widgets receive a limited number of refreshes every day, test your widget over multiple days.\n\n### Isolate location usage with multiple widget extensions\n\nIf your app provides multiple widgets and only some of the widgets use location, separate your widgets into multiple extensions. Add the `NSWidgetWantsLocation` key to the extension that contains widgets that use location. This allows the system to only prompt the user for the widgets that use location information, and makes it more contextually relevant for users.\n\nFor more information, see the Declare Multiple Widgets in Your App Extension section in [doc:\/\/com.apple.WidgetKit\/documentation\/WidgetKit\/Creating-a-Widget-Extension].",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/WidgetKit\/Accessing-Location-Information-in-Widgets\ncrawled: 2025-12-03T04:06:08Z\n---\n\n# Accessing location information in widgets\n\n**Article**\n\nIncorporate location information into your widget presentation to make it more relevant and contextual.\n\n## Overview\n\nWidgets can present relevant and useful information by taking a user’s location into account. Because your widget’s extension doesn’t run continually, using Location Services in your widget requires you to take a few additional steps.\n\n### Enable Location Services in your widget\n\nTo use Location Services in your widget:\n\n- Add the [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Information-Property-List\/NSWidgetWantsLocation] key to your widget extension’s `Info.plist` file.\n- Add the relevant purpose strings to the `Info.plist` file of the app that contains the widget.\n\n\n\n### Access location information from your widget\n\nWhen the user adds a widget that uses location, the system asks whether they want to extend the app’s location authorization to the widget. Use [doc:\/\/com.apple.documentation\/documentation\/CoreLocation\/CLLocationManager\/isAuthorizedForWidgetUpdates] to determine whether the widget is eligible to receive location updates. Users can change their approval choice at any time in Settings > Privacy > Location Services.\n\nAfter the user approves the widget’s use of location information, the system considers it “in use” for a short period of time after the widget is visible. If the system refreshes the widget’s view during this in-use period, the widget has access to location information. For example, immediately after a user adds a widget to their Home Screen and approves extending the app’s location authorization, the user’s location is available to the widget.\n\nWhen the widget hasn’t been visible for a period of time, the system no longer considers it in use and stops delivering location updates. When WidgetKit reloads the widget’s view, if `authorizedForWidgetUpdates` is `true` but the widget doesn’t get location updates, it’s a good practice to indicate that the user’s location is not currently available. Note, this is different from when `authorizedForWidgetUpdates` is `false`, which indicates that the user has not approved the widget to receive location updates.\n\n### Test your widget in real-world scenarios\n\nDue to the timeline-based updates of widgets, and the variability of a widget’s in-use status, it’s important to test widgets that use location in real-world scenarios. For example, create test scenarios that:\n\n- Extend the app’s location authorization when adding the widget.\n- Don’t extend the app’s location authorization when adding the widget.\n- Change the app’s authorization in Settings > Privacy > Location Services after the widget is added.\n- Change the widget’s approval of location authorization in Settings > Privacy > Location Services after the widget is added.\n- Add the widget to Home Screen pages that are both frequently and infrequently viewed.\n\nBecause widgets receive a limited number of refreshes every day, test your widget over multiple days.\n\n### Isolate location usage with multiple widget extensions\n\nIf your app provides multiple widgets and only some of the widgets use location, separate your widgets into multiple extensions. Add the `NSWidgetWantsLocation` key to the extension that contains widgets that use location. This allows the system to only prompt the user for the widgets that use location information, and makes it more contextually relevant for users.\n\nFor more information, see the Declare Multiple Widgets in Your App Extension section in [doc:\/\/com.apple.WidgetKit\/documentation\/WidgetKit\/Creating-a-Widget-Extension].\n\n## Capabilities\n\n- **Making network requests in a widget extension**: Update your widget with new information you fetch with a network request.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Update your widget with new information you fetch with a network request.",
          "name" : "Making network requests in a widget extension",
          "url" : "https:\/\/developer.apple.com\/documentation\/WidgetKit\/Making-network-requests-in-a-widget-extension"
        }
      ],
      "title" : "Capabilities"
    }
  ],
  "source" : "appleJSON",
  "title" : "Accessing location information in widgets",
  "url" : "https:\/\/developer.apple.com\/documentation\/WidgetKit\/Accessing-Location-Information-in-Widgets"
}