{
  "abstract" : "A type that advises WidgetKit when to update a widget’s display.",
  "codeExamples" : [
    {
      "code" : "struct CharacterDetailEntry: TimelineEntry {\n    var date: Date\n    var healthLevel: Double\n}",
      "language" : "swift"
    },
    {
      "code" : "struct CharacterDetailProvider: TimelineProvider {\n    func getSnapshot(in context: Context, completion: @escaping (Entry) -> Void) {\n        let date = Date()\n        let entry: CharacterDetailEntry\n\n        if context.isPreview && !hasHealthLevel {\n            entry = CharacterDetailEntry(date: date, healthLevel: 0.75)\n        } else {\n            entry = CharacterDetailEntry(date: date, healthLevel: currentHealthLevel)\n        }\n        completion(entry)\n    }\n}",
      "language" : "swift"
    },
    {
      "code" : "func getTimeline(in context: Context, completion: @escaping (Timeline<LeaderboardEntry>) -> Void) {\n    EmojiRanger.loadLeaderboardData { (heros, error) in\n        guard let heros else {\n            let timeline = Timeline(entries: [LeaderboardEntry(date: Date(), heros: EmojiRanger.availableHeros)], policy: .atEnd)\n\n            completion(timeline)\n\n            return\n        }\n        let timeline = Timeline(entries: [LeaderboardEntry(date: Date(), heros: heros)], policy: .atEnd)\n        completion(timeline)\n    }\n}",
      "language" : "swift"
    },
    {
      "code" : "\/\/ Request a timeline refresh after 2.5 hours.\nlet date = Calendar.current.date(byAdding: .minute, value: 150, to: Date())!\nlet timeline = Timeline(entries: entries, policy: .after(date))\ncompletion(timeline)",
      "language" : "swift"
    }
  ],
  "contentHash" : "e6bf29ce6703f8d46af351bc716e2b54a44c9f3a4c6b1a106bba63c4bc88f152",
  "crawledAt" : "2025-12-01T08:55:28Z",
  "declaration" : {
    "code" : "protocol TimelineProvider",
    "language" : "swift"
  },
  "id" : "AD59605C-B8C3-4FFE-AD76-67856DAFBC8C",
  "kind" : "protocol",
  "module" : "WidgetKit",
  "overview" : "## Overview\n\nAt various times, WidgetKit requests a *timeline* from the provider. A timeline is an array of objects conforming to [doc:\/\/com.apple.WidgetKit\/documentation\/WidgetKit\/TimelineEntry]. Each timeline entry has a date, and you can specify additional properties for displaying the widget.\n\nFor example, consider a widget that displays the health level of a game character. In the game, when the character’s health level is below 100 percent, it recovers at a rate of 25 percent per hour. If the character’s health level is 25 percent, the provider creates a timeline consisting of the following entries:\n\n\n\nThe following code shows the structure encapsulating this information.\n\nWidgetKit asks for timeline entries in one of two ways:\n\nWidgetKit makes the snapshot request when displaying the widget in transient situations, such as when the user is adding a widget. WidgetKit provides a `context` parameter that includes details about how to use the entry, including whether it’s a preview for the widget gallery, and the family, or size, of the widget to display. If `context.isPreview` is `true`, the widget appears in the widget gallery and requires a quick response from your provider. If the information you need to generate the snapshot is not readily available, or requires additional time to load, use sample data instead. For example, if determining the character’s health level requires fetching data from a server, the widget could show the health level at 75 percent. The following code shows how the game widget might implement its snapshot method.\n\nWidgetKit makes the timeline request after the user adds your widget from the widget gallery. Because your widget extension is not always running, WidgetKit needs to know when to activate it to update the widget. The timeline your provider generates informs WidgetKit when you would like to update the widget. The following example shows how the [doc:\/\/com.apple.documentation\/documentation\/WidgetKit\/emoji-rangers-supporting-live-activities-interactivity-and-animations] sample code project creates a timeline for its leaderboard widget.\n\nIf your provider needs to do asynchronous work to generate the timeline, such as fetching data from a server, store a reference to the `completion` handler and call it when you are done with your asynchronous work.\n\n### Determine a refresh policy\n\nWhen creating the timeline, the provider specifies a refresh policy that controls when WidgetKit requests a new timeline. The default behavior is to use [doc:\/\/com.apple.WidgetKit\/documentation\/WidgetKit\/TimelineReloadPolicy\/atEnd] to request a new timeline after the last date specified by the entries in a timeline. However, if there is a different date when WidgetKit should request a new timeline, you can specify a refresh policy of [doc:\/\/com.apple.WidgetKit\/documentation\/WidgetKit\/TimelineReloadPolicy\/after(_:)]. For example, a dragon will appear in 2.5 hours and might engage in battle with the game character. Because the outcome of this battle may change the character’s health level, the provider can tell WidgetKit to request a new timeline after the battle.\n\nOther examples of when it makes sense to use a different date include:\n\nAlternatively, if future events are unpredictable, you can tell WidgetKit to not request a new timeline at all by specifying [doc:\/\/com.apple.WidgetKit\/documentation\/WidgetKit\/TimelineReloadPolicy\/never] for the policy. In that case, your app calls the [doc:\/\/com.apple.WidgetKit\/documentation\/WidgetKit\/WidgetCenter] function [doc:\/\/com.apple.WidgetKit\/documentation\/WidgetKit\/WidgetCenter\/reloadTimelines(ofKind:)] when a new timeline is available. Some examples of when using [doc:\/\/com.apple.WidgetKit\/documentation\/WidgetKit\/TimelineReloadPolicy\/never] makes sense include:\n\nIn both examples, when your app determines that the status has changed, it calls the [doc:\/\/com.apple.WidgetKit\/documentation\/WidgetKit\/WidgetCenter] function [doc:\/\/com.apple.WidgetKit\/documentation\/WidgetKit\/WidgetCenter\/reloadTimelines(ofKind:)] and WidgetKit requests a new timeline.\n\n### Refresh widgets efficiently\n\nEach configured widget receives a limited number of refreshes every day. Several factors affect how many refreshes a widget receives, such as whether the containing app is running in the foreground or background, how frequently the widget is shown onscreen, and what types of activities the containing app engages in.\n\nUse the following approaches to optimize your widget refreshes:\n\nWhen your app is in the foreground, has an active media session, or is using the standard location service, refreshes don’t count against the widget’s daily limit. For more information about media sessions and location services, see [doc:\/\/com.apple.documentation\/documentation\/AVFAudio\/AVAudioSession] and [doc:\/\/com.apple.documentation\/documentation\/CoreLocation\/configuring-your-app-to-use-location-services].",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "visionOS",
    "watchOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/WidgetKit\/TimelineProvider\ncrawled: 2025-12-01T08:55:28Z\n---\n\n# TimelineProvider\n\n**Protocol**\n\nA type that advises WidgetKit when to update a widget’s display.\n\n## Declaration\n\n```swift\nprotocol TimelineProvider\n```\n\n## Overview\n\nAt various times, WidgetKit requests a *timeline* from the provider. A timeline is an array of objects conforming to [doc:\/\/com.apple.WidgetKit\/documentation\/WidgetKit\/TimelineEntry]. Each timeline entry has a date, and you can specify additional properties for displaying the widget.\n\nFor example, consider a widget that displays the health level of a game character. In the game, when the character’s health level is below 100 percent, it recovers at a rate of 25 percent per hour. If the character’s health level is 25 percent, the provider creates a timeline consisting of the following entries:\n\n\n\nThe following code shows the structure encapsulating this information.\n\n```swift\nstruct CharacterDetailEntry: TimelineEntry {\n    var date: Date\n    var healthLevel: Double\n}\n```\n\nWidgetKit asks for timeline entries in one of two ways:\n\n- A single immediate snapshot, representing the widget’s current state.\n- An array of entries, including the current moment and, if known, any future dates when the widget’s state will change.\n\nWidgetKit makes the snapshot request when displaying the widget in transient situations, such as when the user is adding a widget. WidgetKit provides a `context` parameter that includes details about how to use the entry, including whether it’s a preview for the widget gallery, and the family, or size, of the widget to display. If `context.isPreview` is `true`, the widget appears in the widget gallery and requires a quick response from your provider. If the information you need to generate the snapshot is not readily available, or requires additional time to load, use sample data instead. For example, if determining the character’s health level requires fetching data from a server, the widget could show the health level at 75 percent. The following code shows how the game widget might implement its snapshot method.\n\n```swift\nstruct CharacterDetailProvider: TimelineProvider {\n    func getSnapshot(in context: Context, completion: @escaping (Entry) -> Void) {\n        let date = Date()\n        let entry: CharacterDetailEntry\n\n        if context.isPreview && !hasHealthLevel {\n            entry = CharacterDetailEntry(date: date, healthLevel: 0.75)\n        } else {\n            entry = CharacterDetailEntry(date: date, healthLevel: currentHealthLevel)\n        }\n        completion(entry)\n    }\n}\n```\n\nWidgetKit makes the timeline request after the user adds your widget from the widget gallery. Because your widget extension is not always running, WidgetKit needs to know when to activate it to update the widget. The timeline your provider generates informs WidgetKit when you would like to update the widget. The following example shows how the [doc:\/\/com.apple.documentation\/documentation\/WidgetKit\/emoji-rangers-supporting-live-activities-interactivity-and-animations] sample code project creates a timeline for its leaderboard widget.\n\n```swift\nfunc getTimeline(in context: Context, completion: @escaping (Timeline<LeaderboardEntry>) -> Void) {\n    EmojiRanger.loadLeaderboardData { (heros, error) in\n        guard let heros else {\n            let timeline = Timeline(entries: [LeaderboardEntry(date: Date(), heros: EmojiRanger.availableHeros)], policy: .atEnd)\n\n            completion(timeline)\n\n            return\n        }\n        let timeline = Timeline(entries: [LeaderboardEntry(date: Date(), heros: heros)], policy: .atEnd)\n        completion(timeline)\n    }\n}\n```\n\nIf your provider needs to do asynchronous work to generate the timeline, such as fetching data from a server, store a reference to the `completion` handler and call it when you are done with your asynchronous work.\n\n### Determine a refresh policy\n\nWhen creating the timeline, the provider specifies a refresh policy that controls when WidgetKit requests a new timeline. The default behavior is to use [doc:\/\/com.apple.WidgetKit\/documentation\/WidgetKit\/TimelineReloadPolicy\/atEnd] to request a new timeline after the last date specified by the entries in a timeline. However, if there is a different date when WidgetKit should request a new timeline, you can specify a refresh policy of [doc:\/\/com.apple.WidgetKit\/documentation\/WidgetKit\/TimelineReloadPolicy\/after(_:)]. For example, a dragon will appear in 2.5 hours and might engage in battle with the game character. Because the outcome of this battle may change the character’s health level, the provider can tell WidgetKit to request a new timeline after the battle.\n\n```swift\n\/\/ Request a timeline refresh after 2.5 hours.\nlet date = Calendar.current.date(byAdding: .minute, value: 150, to: Date())!\nlet timeline = Timeline(entries: entries, policy: .after(date))\ncompletion(timeline)\n```\n\nOther examples of when it makes sense to use a different date include:\n\n- In a widget displaying stock market details, you might specify the next market opening or closing date because information typically doesn’t change overnight or during weekends.\n- A flight tracking widget might continue showing a “flight landed” indication after the flight lands. In this case, you could specify a date later than when the flight lands so that its status remains visible for a while before being cleared.\n\nAlternatively, if future events are unpredictable, you can tell WidgetKit to not request a new timeline at all by specifying [doc:\/\/com.apple.WidgetKit\/documentation\/WidgetKit\/TimelineReloadPolicy\/never] for the policy. In that case, your app calls the [doc:\/\/com.apple.WidgetKit\/documentation\/WidgetKit\/WidgetCenter] function [doc:\/\/com.apple.WidgetKit\/documentation\/WidgetKit\/WidgetCenter\/reloadTimelines(ofKind:)] when a new timeline is available. Some examples of when using [doc:\/\/com.apple.WidgetKit\/documentation\/WidgetKit\/TimelineReloadPolicy\/never] makes sense include:\n\n- When the user has a widget configured to display the health of a character, but that character is no longer actively engaging in battle and its health level won’t change.\n- When a widget’s content is dependent on the user being logged into an account and they aren’t currently logged in.\n\nIn both examples, when your app determines that the status has changed, it calls the [doc:\/\/com.apple.WidgetKit\/documentation\/WidgetKit\/WidgetCenter] function [doc:\/\/com.apple.WidgetKit\/documentation\/WidgetKit\/WidgetCenter\/reloadTimelines(ofKind:)] and WidgetKit requests a new timeline.\n\n### Refresh widgets efficiently\n\nEach configured widget receives a limited number of refreshes every day. Several factors affect how many refreshes a widget receives, such as whether the containing app is running in the foreground or background, how frequently the widget is shown onscreen, and what types of activities the containing app engages in.\n\n\n\nUse the following approaches to optimize your widget refreshes:\n\n- Have the containing app prepare data for the widget in advance of when the widget needs it. Use a shared group container to store the data.\n- Use background processing time in your app to keep shared data up to date. For more information, see [doc:\/\/com.apple.documentation\/documentation\/UIKit\/using-background-tasks-to-update-your-app].\n- Choose the most appropriate refresh policy for the information being shown, as described in the preceding section.\n- Call [doc:\/\/com.apple.WidgetKit\/documentation\/WidgetKit\/WidgetCenter\/reloadTimelines(ofKind:)] only when information the widget is currently displaying changes.\n\nWhen your app is in the foreground, has an active media session, or is using the standard location service, refreshes don’t count against the widget’s daily limit. For more information about media sessions and location services, see [doc:\/\/com.apple.documentation\/documentation\/AVFAudio\/AVAudioSession] and [doc:\/\/com.apple.documentation\/documentation\/CoreLocation\/configuring-your-app-to-use-location-services].\n\n## Generating Timelines\n\n- **getSnapshot(in:completion:)**: Provides a timeline entry that represents the current time and state of a widget.\n- **getTimeline(in:completion:)**: Provides an array of timeline entries for the current time and, optionally, any future times to update a widget.\n- **placeholder(in:)**: Provides a timeline entry representing a placeholder version of the widget.\n- **Entry**: A type that specifies the date to display a widget, and, optionally, indicates the current relevance of the widget’s content.\n- **TimelineProvider.Context**: An object that contains details about how a widget is rendered, including its size and whether it appears in the widget gallery.\n\n## Providing relevance clues\n\n- **relevance()**: Provides an object containing attributes that describe when a specific widget is relevant.\n\n## Timeline updates\n\n- **Keeping a widget up to date**: Plan your widget’s timeline to show timely, relevant information using dynamic views, and update the timeline when things change.\n- **AppIntentTimelineProvider**: A type that advises WidgetKit when to update a user-configurable widget’s display.\n- **IntentTimelineProvider**: A type that advises WidgetKit when to update a user-configurable widget’s display.\n- **TimelineProviderContext**: An object that contains details about how a widget is rendered, including its size and whether it appears in the widget gallery.\n- **TimelineEntry**: A type that specifies the date to display a widget, and, optionally, indicates the current relevance of the widget’s content.\n- **Timeline**: An object that specifies a date for WidgetKit to update a widget’s view.\n- **WidgetCenter**: An object that contains a list of user-configured widgets and is used for reloading widget timelines.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Provides a timeline entry that represents the current time and state of a widget.",
          "name" : "getSnapshot(in:completion:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/WidgetKit\/TimelineProvider\/getSnapshot(in:completion:)"
        },
        {
          "description" : "Provides an array of timeline entries for the current time and, optionally, any future times to update a widget.",
          "name" : "getTimeline(in:completion:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/WidgetKit\/TimelineProvider\/getTimeline(in:completion:)"
        },
        {
          "description" : "Provides a timeline entry representing a placeholder version of the widget.",
          "name" : "placeholder(in:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/WidgetKit\/TimelineProvider\/placeholder(in:)"
        },
        {
          "description" : "A type that specifies the date to display a widget, and, optionally, indicates the current relevance of the widget’s content.",
          "name" : "Entry",
          "url" : "https:\/\/developer.apple.com\/documentation\/WidgetKit\/TimelineProvider\/Entry"
        },
        {
          "description" : "An object that contains details about how a widget is rendered, including its size and whether it appears in the widget gallery.",
          "name" : "TimelineProvider.Context",
          "url" : "https:\/\/developer.apple.com\/documentation\/WidgetKit\/TimelineProvider\/Context"
        }
      ],
      "title" : "Generating Timelines"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Provides an object containing attributes that describe when a specific widget is relevant.",
          "name" : "relevance()",
          "url" : "https:\/\/developer.apple.com\/documentation\/WidgetKit\/TimelineProvider\/relevance()"
        }
      ],
      "title" : "Providing relevance clues"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Plan your widget’s timeline to show timely, relevant information using dynamic views, and update the timeline when things change.",
          "name" : "Keeping a widget up to date",
          "url" : "https:\/\/developer.apple.com\/documentation\/WidgetKit\/Keeping-a-Widget-Up-To-Date"
        },
        {
          "description" : "A type that advises WidgetKit when to update a user-configurable widget’s display.",
          "name" : "AppIntentTimelineProvider",
          "url" : "https:\/\/developer.apple.com\/documentation\/WidgetKit\/AppIntentTimelineProvider"
        },
        {
          "description" : "A type that advises WidgetKit when to update a user-configurable widget’s display.",
          "name" : "IntentTimelineProvider",
          "url" : "https:\/\/developer.apple.com\/documentation\/WidgetKit\/IntentTimelineProvider"
        },
        {
          "description" : "An object that contains details about how a widget is rendered, including its size and whether it appears in the widget gallery.",
          "name" : "TimelineProviderContext",
          "url" : "https:\/\/developer.apple.com\/documentation\/WidgetKit\/TimelineProviderContext"
        },
        {
          "description" : "A type that specifies the date to display a widget, and, optionally, indicates the current relevance of the widget’s content.",
          "name" : "TimelineEntry",
          "url" : "https:\/\/developer.apple.com\/documentation\/WidgetKit\/TimelineEntry"
        },
        {
          "description" : "An object that specifies a date for WidgetKit to update a widget’s view.",
          "name" : "Timeline",
          "url" : "https:\/\/developer.apple.com\/documentation\/WidgetKit\/Timeline"
        },
        {
          "description" : "An object that contains a list of user-configured widgets and is used for reloading widget timelines.",
          "name" : "WidgetCenter",
          "url" : "https:\/\/developer.apple.com\/documentation\/WidgetKit\/WidgetCenter"
        }
      ],
      "title" : "Timeline updates"
    }
  ],
  "source" : "appleJSON",
  "title" : "TimelineProvider",
  "url" : "https:\/\/developer.apple.com\/documentation\/WidgetKit\/TimelineProvider"
}