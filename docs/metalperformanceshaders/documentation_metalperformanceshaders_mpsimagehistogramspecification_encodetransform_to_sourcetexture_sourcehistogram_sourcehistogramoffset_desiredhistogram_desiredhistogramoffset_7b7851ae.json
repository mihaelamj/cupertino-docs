{
  "abstract" : "Encodes the transform function to a command buffer using a compute command encoder. The transform function computes the equalization lookup table.",
  "codeExamples" : [

  ],
  "contentHash" : "8568755a865eadd0ae700132975e604f218aaa2c99630ecba858c6652da3f755",
  "crawledAt" : "2025-12-06T12:07:44Z",
  "declaration" : {
    "code" : "func encodeTransform(to commandBuffer: any MTLCommandBuffer, sourceTexture source: any MTLTexture, sourceHistogram: any MTLBuffer, sourceHistogramOffset: Int, desiredHistogram: any MTLBuffer, desiredHistogramOffset: Int)",
    "language" : "swift"
  },
  "id" : "D1F0FD88-6AD2-4D85-900B-A37FDC79D88C",
  "kind" : "method",
  "language" : "swift",
  "module" : "Metal Performance Shaders",
  "overview" : "## Discussion\n\nThe transform function will not begin to execute until after the command buffer has been enqueued and committed. This step will need to be repeated with the new [doc:\/\/com.apple.metalperformanceshaders\/documentation\/MetalPerformanceShaders\/MPSKernel] object if the [doc:\/\/com.apple.metalperformanceshaders\/documentation\/MetalPerformanceShaders\/MPSKernel\/copy(with:device:)] or [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSCopying\/copy(with:)] method is called.",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "tvOS",
    "visionOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/MetalPerformanceShaders\/MPSImageHistogramSpecification\/encodeTransform(to:sourceTexture:sourceHistogram:sourceHistogramOffset:desiredHistogram:desiredHistogramOffset:)\ncrawled: 2025-12-06T12:07:44Z\n---\n\n# encodeTransform(to:sourceTexture:sourceHistogram:sourceHistogramOffset:desiredHistogram:desiredHistogramOffset:)\n\n**Instance Method**\n\nEncodes the transform function to a command buffer using a compute command encoder. The transform function computes the equalization lookup table.\n\n## Declaration\n\n```swift\nfunc encodeTransform(to commandBuffer: any MTLCommandBuffer, sourceTexture source: any MTLTexture, sourceHistogram: any MTLBuffer, sourceHistogramOffset: Int, desiredHistogram: any MTLBuffer, desiredHistogramOffset: Int)\n```\n\n## Parameters\n\n- **commandBuffer**: A valid command buffer.\n- **source**: A valid texture containing the source image for the filter.\n- **sourceHistogram**: A valid buffer containing the histogram results for the source image. This filter will use these histogram results to generate the cumulative histogram for equalizing the image.  The histogram results per channel are stored together. The number of channels for which histogram results are stored is determined by the number of channels in the image. If the `histogramForAlpha` value of the [doc:\/\/com.apple.metalperformanceshaders\/documentation\/MetalPerformanceShaders\/MPSImageHistogramSpecification\/histogramInfo] property is [doc:\/\/com.apple.documentation\/documentation\/Swift\/false] and the source image is RGBA, then only histogram results for RGB channels are stored.\n- **sourceHistogramOffset**: The byte offset into the source histogram buffer where the histogram starts. Must conform to alignment requirements for the `offset` parameter of the [doc:\/\/com.apple.documentation\/documentation\/Metal\/MTLComputeCommandEncoder\/setBuffer(_:offset:index:)] method.\n- **desiredHistogram**: A valid buffer containing the desired histogram results for the source image. The histogram results per channel are stored together. The number of channels for which histogram results are stored is determined by the number of channels in the image. If the `histogramForAlpha` value of the [doc:\/\/com.apple.metalperformanceshaders\/documentation\/MetalPerformanceShaders\/MPSImageHistogramSpecification\/histogramInfo] property is [doc:\/\/com.apple.documentation\/documentation\/Swift\/false] and the source image is RGBA, then only histogram results for RGB channels are stored.\n- **desiredHistogramOffset**: The byte offset into the desired histogram buffer where the histogram starts. Must conform to alignment requirements for the `offset` parameter of the [doc:\/\/com.apple.documentation\/documentation\/Metal\/MTLComputeCommandEncoder\/setBuffer(_:offset:index:)] method.\n\n## Discussion\n\nThe transform function will not begin to execute until after the command buffer has been enqueued and committed. This step will need to be repeated with the new [doc:\/\/com.apple.metalperformanceshaders\/documentation\/MetalPerformanceShaders\/MPSKernel] object if the [doc:\/\/com.apple.metalperformanceshaders\/documentation\/MetalPerformanceShaders\/MPSKernel\/copy(with:device:)] or [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSCopying\/copy(with:)] method is called.\n\n## Related Documentation\n\n- **setBufferOffset(_:index:)**: Changes where the data begins in a buffer already bound to the buffer argument table.\n- **setBuffer(_:offset:index:)**: Binds a buffer to the buffer argument table, allowing compute kernels to access its data on the GPU.\n\n## Methods\n\n- **init(device:histogramInfo:)**: Initializes a histogram with specific information.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Changes where the data begins in a buffer already bound to the buffer argument table.",
          "name" : "setBufferOffset(_:index:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLComputeCommandEncoder\/setBufferOffset(_:index:)"
        },
        {
          "description" : "Binds a buffer to the buffer argument table, allowing compute kernels to access its data on the GPU.",
          "name" : "setBuffer(_:offset:index:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLComputeCommandEncoder\/setBuffer(_:offset:index:)"
        }
      ],
      "title" : "Related Documentation"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Initializes a histogram with specific information.",
          "name" : "init(device:histogramInfo:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/MetalPerformanceShaders\/MPSImageHistogramSpecification\/init(device:histogramInfo:)"
        }
      ],
      "title" : "Methods"
    }
  ],
  "source" : "appleJSON",
  "title" : "encodeTransform(to:sourceTexture:sourceHistogram:sourceHistogramOffset:desiredHistogram:desiredHistogramOffset:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/MetalPerformanceShaders\/MPSImageHistogramSpecification\/encodeTransform(to:sourceTexture:sourceHistogram:sourceHistogramOffset:desiredHistogram:desiredHistogramOffset:)"
}