{
  "abstract" : "Display simple system translations and create custom translation experiences.",
  "codeExamples" : [
    {
      "code" : "struct ViewTranslationView: View {\n    \/\/ Define the condition to display the translation UI.\n    @State private var showTranslation = false\n\n    \/\/ Define the text you want to translate.\n    var originalText = \"Hallo, Welt!\"\n\n    var body: some View {\n        VStack {\n            Text(verbatim: originalText)\n            Button(\"Translate\") {\n                showTranslation.toggle()\n            }\n        }\n        \/\/ Offer a system UI translation.\n        .translationPresentation(isPresented: $showTranslation,\n                                 text: originalText)\n        .navigationTitle(\"Translate\")\n    }\n}",
      "language" : "swift"
    },
    {
      "code" : ".translationPresentation(isPresented: $showTranslation, text: originalText) { translatedText in\n    originalText = translatedText\n}",
      "language" : "swift"
    },
    {
      "code" : "struct SingleStringView: View {\n    @State private var sourceText = \"Hallo, Welt!\"\n    @State private var targetText = \"\"\n\n    \/\/ Define a configuration.\n    @State private var configuration: TranslationSession.Configuration?\n\n    var body: some View {\n        VStack {\n            TextField(\"Enter text to translate\", text: $sourceText)\n                .textFieldStyle(.roundedBorder)\n            Button(\"Translate\") {\n                triggerTranslation()\n            }\n            Text(verbatim: targetText)\n        }\n        \/\/ Pass the configuration to the task.\n        .translationTask(configuration) { session in\n            do {\n                \/\/ Use the session the task provides to translate the text.\n                let response = try await session.translate(sourceText)\n\n                \/\/ Update the view with the translated result.\n                targetText = response.targetText\n            } catch {\n                \/\/ Handle any errors.\n            }\n        }\n        .padding()\n        .navigationTitle(\"Single string\")\n    }\n\n    private func triggerTranslation() {\n        guard configuration == nil else {\n            configuration?.invalidate()\n            return\n        }\n\n        \/\/ Let the framework automatically determine the language pairing.\n        configuration = .init()\n    }\n}",
      "language" : "swift"
    },
    {
      "code" : "extension ViewModel {\n    func translateSequence(using session: TranslationSession) async {\n        Task { @MainActor in\n            let requests: [TranslationSession.Request] = foodItems.enumerated().map { (index, string) in\n                \/\/ Assign each request a client identifier.\n                    .init(sourceText: string, clientIdentifier: \"\\(index)\")\n            }\n\n            do {\n                for try await response in session.translate(batch: requests) {\n                    \/\/ Use the returned client identifier (the index) to map the request to the response.\n                    guard let index = Int(response.clientIdentifier ?? \"\") else { continue }\n                    foodItems[index] = response.targetText\n                }\n            } catch {\n                \/\/ Handle any errors.\n            }\n        }\n    }\n}",
      "language" : "swift"
    },
    {
      "code" : "extension ViewModel {\n    func checkLanguageSupport(from source: Locale.Language, to target: Locale.Language) async {\n        let availability = LanguageAvailability()\n        let status = await availability.status(from: source, to: target)\n\n        switch status {\n        case .installed, .supported:\n            isTranslationSupported = true\n        case .unsupported:\n            isTranslationSupported = false\n        @unknown default:\n            print(\"Not supported\")\n        }\n    }\n}",
      "language" : "swift"
    },
    {
      "code" : "struct PrepareTranslationView: View {\n\n    \/\/ Define the pairing of languages you want to download.\n    @State private var configuration = TranslationSession.Configuration(\n        source: Locale.Language(identifier: \"pt_BR\"),\n        target: Locale.Language(identifier: \"ko_KR\")\n    )\n\n    @State private var buttonTapped = false\n\n    var body: some View {\n        VStack(spacing: 20) {\n            Text(\"Tap the button to start downloading languages before offering a translation.\")\n            Button(\"Prepare\") {\n                configuration.invalidate()\n                buttonTapped = true\n            }\n        }\n        .translationTask(configuration) { session in\n            if buttonTapped {\n                do {\n                    \/\/ Display a sheet asking the user's permission\n                    \/\/ to start downloading the language pairing.\n                    try await session.prepareTranslation()\n                } catch {\n                    \/\/ Handle any errors.\n                }\n            }\n        }\n        .padding()\n        .navigationTitle(\"Prepare translation\")\n    }\n}",
      "language" : "swift"
    }
  ],
  "contentHash" : "d6de19003986b0df8e7c1f211ebda2e0d49b8b998e021edf364ae94b62afe77c",
  "crawledAt" : "2025-12-02T15:46:19Z",
  "id" : "623EC6F5-5A91-46EC-AA72-FE61055713AC",
  "kind" : "unknown",
  "language" : "swift",
  "module" : "Translation",
  "overview" : "## Overview\n\nWith the Translation framework, you can offer in-app translations from one language to another. To display simple system translations in your app, use the [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/View\/translationPresentation(isPresented:text:attachmentAnchor:arrowEdge:replacementAction:)] translation overlay.\n\nFor a more customizable translation experience, use the [doc:\/\/com.apple.Translation\/documentation\/Translation\/TranslationSession] object and its associated translation methods. With the customizable translation APIs, the framework asks a person for permission to download the language translation models, if necessary. You can translate strings efficiently, while checking for language availability before offering a translation.\n\nThis sample code project provides the `TranslatingText` sample app to demonstrate various methods of translating text. It consists of the following translation demos:\n\n### Configure the sample code project\n\nBefore you run the sample code project, download and install Xcode 16 or later.\n\nTo run the sample code project in macOS, select My Mac from the Xcode toolbar scheme menu, and then choose Project > Run.\n\nTo run the sample code on a physical iOS device:\n\n### Translate text with the simple translation overlay\n\nThe Translate Text demo shows how to offer a translation using the system UI. The code example below indicates what happens when a person clicks the Translate button in that demo. First, the sample defines a variable to control when the system UI appears using a [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/State] property wrapper. Then it defines a variable representing the text to translate. Finally, it passes the `State` property wrapper that controls when the system UI displays along with the text to translate to the [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/View\/translationPresentation(isPresented:text:attachmentAnchor:arrowEdge:replacementAction:)] function that attaches to the view containing the text to translate.\n\nThe Replace Text demo also uses the system UI, and replaces the original text with the translated text by adding the `replacementAction` trailing closure to the function. This closure runs after the translation occurs when a person clicks the Translate button. The sample then replaces the input text with the translated text.\n\n### Offer a custom translation\n\nFor more control over the translation experience, you can create your own in-app translation experiences using the [doc:\/\/com.apple.Translation\/documentation\/Translation\/TranslationSession] object, along with its associated translation functions.\n\nThe Single String demo shows how to translate a single string of text and update a view. Its code example below defines a `State` property wrapper for the [doc:\/\/com.apple.Translation\/documentation\/Translation\/TranslationSession\/Configuration] object in the view offering the translation, and passes it to a [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/View\/translationTask(_:action:)] function. Then it uses the `session` instance the task returns to call [doc:\/\/com.apple.Translation\/documentation\/Translation\/TranslationSession\/translate(_:)] and passes in the string of text to translate. Finally, it updates the view using the [doc:\/\/com.apple.Translation\/documentation\/Translation\/TranslationSession\/Response\/targetText] property from the response.\n\nThis pattern of defining a configuration as a `State` property wrapper and invalidating its state is recommended for triggering new translations. Storing [doc:\/\/com.apple.Translation\/documentation\/Translation\/TranslationSession\/Configuration] in a model object also works.\n\n### Translate batches of strings\n\nTo translate multiple strings between the same languages, it’s most efficient to use one of the batch translation functions of [doc:\/\/com.apple.Translation\/documentation\/Translation\/TranslationSession]. You can translate a batch of strings and get the results all at once, or you can receive them incrementally as they arrive.\n\nTo keep your UI clean and uncluttered, you can also do this work in a view model, as the Batch All at Once demo shows. Its code example defines a `State` property wrapper for a [doc:\/\/com.apple.Translation\/documentation\/Translation\/TranslationSession\/Configuration] object in the view offering the translation, and attaches the [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/View\/translationTask(_:action:)] function to the view containing the text to translate. Using the `session` instance from the task, it calls the [doc:\/\/com.apple.Translation\/documentation\/Translation\/TranslationSession\/translations(from:)] function in the view model. The view model maps all the strings to translate in an array of type [doc:\/\/com.apple.Translation\/documentation\/Translation\/TranslationSession\/Request] and sets the [doc:\/\/com.apple.Translation\/documentation\/Translation\/TranslationSession\/Request\/sourceText] property of the request to the string to translate. Then the sample calls [doc:\/\/com.apple.Translation\/documentation\/Translation\/TranslationSession\/translations(from:)] on the session object and passes in the array of requests to translate. Finally, it maps each response object that returns to the corresponding index in the original array of text.\n\nWhen translating a group of strings using the [doc:\/\/com.apple.Translation\/documentation\/Translation\/TranslationSession\/translations(from:)] function, the responses return in the same order you send them.\n\n### Display the results as they arrive\n\nIf you want to translate multiple strings of text and display the results as they arrive, use the [doc:\/\/com.apple.Translation\/documentation\/Translation\/TranslationSession\/translate(batch:)] function.\n\nThe Batch as a Sequence demo is the same as the Batch All at Once demo except for the way it matches translation requests to responses.\n\nIn this process, the responses can return in a different order than you send them. So the Batch as a Sequence demo tracks which request corresponds with which response by assigning a [doc:\/\/com.apple.Translation\/documentation\/Translation\/TranslationSession\/Request\/clientIdentifier] to each sent request — in this case, the index of the item to translate in the array. The client identifier returns with the same value in the response. When the response returns, the sample uses the client identifier to associate the request with the response.\n\n### Check for language availability\n\nThe Language Availability demo shows how to check whether the framework supports a specific language pairing before offering it to people. A person selects a source and a target language from a picker, and the sample passes that language pairing to a function in the view model that checks whether the framework supports that pairing. The view then updates the display when the model sets the `isTranslationSupported` variable.\n\n### Prepare for translation\n\nIf you know which languages a translation needs, you can download the language models before offering the translation.\n\nThe Prepare for Translation demo shows how to initiate the download of a language pairing by creating a `TranslationSession.Configuration` instance with the source and target language to download. The sample then calls [doc:\/\/com.apple.Translation\/documentation\/Translation\/TranslationSession\/prepareTranslation()] on the session the translation task returns. If the languages aren’t already downloaded, a view appears that requests permission to download them.\n\nFor testing, you can delete locally downloaded models in macOS by choosing System Settings > General > Language & Region > Translation Languages. In iOS, you can manage your downloaded languages by choosing Settings > Apps > Translate > Downloaded Languages if you have the system Translate app installed locally on your device.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/Translation\/translating-text-within-your-app\ncrawled: 2025-12-02T15:46:19Z\n---\n\n# Translating text within your app\n\n**Sample Code**\n\nDisplay simple system translations and create custom translation experiences.\n\n## Overview\n\nWith the Translation framework, you can offer in-app translations from one language to another. To display simple system translations in your app, use the [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/View\/translationPresentation(isPresented:text:attachmentAnchor:arrowEdge:replacementAction:)] translation overlay.\n\nFor a more customizable translation experience, use the [doc:\/\/com.apple.Translation\/documentation\/Translation\/TranslationSession] object and its associated translation methods. With the customizable translation APIs, the framework asks a person for permission to download the language translation models, if necessary. You can translate strings efficiently, while checking for language availability before offering a translation.\n\nThis sample code project provides the `TranslatingText` sample app to demonstrate various methods of translating text. It consists of the following translation demos:\n\n- Translate Text\n- Replace Text\n- Single String\n- Batch All at Once\n- Batch as a Sequence\n- Language Availability\n- Prepare for Translation\n\n\n\n### Configure the sample code project\n\nBefore you run the sample code project, download and install Xcode 16 or later.\n\n\n\nTo run the sample code project in macOS, select My Mac from the Xcode toolbar scheme menu, and then choose Project > Run.\n\nTo run the sample code on a physical iOS device:\n\n1. Upgrade your device to iOS 18 or later.\n2. Select your device from the Xcode toolbar scheme menu.\n3. Select the `TranslatingText` project.\n4. Click the `TranslatingText` target and select your team from the Team menu in the Signing & Capabilities pane to let Xcode automatically manage your provisioning profile. For more information, see [https:\/\/help.apple.com\/xcode\/mac\/current\/#\/dev23aab79b4].\n5. Choose Project > Run.\n\n### Translate text with the simple translation overlay\n\nThe Translate Text demo shows how to offer a translation using the system UI. The code example below indicates what happens when a person clicks the Translate button in that demo. First, the sample defines a variable to control when the system UI appears using a [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/State] property wrapper. Then it defines a variable representing the text to translate. Finally, it passes the `State` property wrapper that controls when the system UI displays along with the text to translate to the [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/View\/translationPresentation(isPresented:text:attachmentAnchor:arrowEdge:replacementAction:)] function that attaches to the view containing the text to translate.\n\n```swift\nstruct ViewTranslationView: View {\n    \/\/ Define the condition to display the translation UI.\n    @State private var showTranslation = false\n\n    \/\/ Define the text you want to translate.\n    var originalText = \"Hallo, Welt!\"\n\n    var body: some View {\n        VStack {\n            Text(verbatim: originalText)\n            Button(\"Translate\") {\n                showTranslation.toggle()\n            }\n        }\n        \/\/ Offer a system UI translation.\n        .translationPresentation(isPresented: $showTranslation,\n                                 text: originalText)\n        .navigationTitle(\"Translate\")\n    }\n}\n```\n\nThe Replace Text demo also uses the system UI, and replaces the original text with the translated text by adding the `replacementAction` trailing closure to the function. This closure runs after the translation occurs when a person clicks the Translate button. The sample then replaces the input text with the translated text.\n\n```swift\n.translationPresentation(isPresented: $showTranslation, text: originalText) { translatedText in\n    originalText = translatedText\n}\n```\n\n### Offer a custom translation\n\nFor more control over the translation experience, you can create your own in-app translation experiences using the [doc:\/\/com.apple.Translation\/documentation\/Translation\/TranslationSession] object, along with its associated translation functions.\n\nThe Single String demo shows how to translate a single string of text and update a view. Its code example below defines a `State` property wrapper for the [doc:\/\/com.apple.Translation\/documentation\/Translation\/TranslationSession\/Configuration] object in the view offering the translation, and passes it to a [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/View\/translationTask(_:action:)] function. Then it uses the `session` instance the task returns to call [doc:\/\/com.apple.Translation\/documentation\/Translation\/TranslationSession\/translate(_:)] and passes in the string of text to translate. Finally, it updates the view using the [doc:\/\/com.apple.Translation\/documentation\/Translation\/TranslationSession\/Response\/targetText] property from the response.\n\n```swift\nstruct SingleStringView: View {\n    @State private var sourceText = \"Hallo, Welt!\"\n    @State private var targetText = \"\"\n\n    \/\/ Define a configuration.\n    @State private var configuration: TranslationSession.Configuration?\n\n    var body: some View {\n        VStack {\n            TextField(\"Enter text to translate\", text: $sourceText)\n                .textFieldStyle(.roundedBorder)\n            Button(\"Translate\") {\n                triggerTranslation()\n            }\n            Text(verbatim: targetText)\n        }\n        \/\/ Pass the configuration to the task.\n        .translationTask(configuration) { session in\n            do {\n                \/\/ Use the session the task provides to translate the text.\n                let response = try await session.translate(sourceText)\n\n                \/\/ Update the view with the translated result.\n                targetText = response.targetText\n            } catch {\n                \/\/ Handle any errors.\n            }\n        }\n        .padding()\n        .navigationTitle(\"Single string\")\n    }\n\n    private func triggerTranslation() {\n        guard configuration == nil else {\n            configuration?.invalidate()\n            return\n        }\n\n        \/\/ Let the framework automatically determine the language pairing.\n        configuration = .init()\n    }\n}\n```\n\nThis pattern of defining a configuration as a `State` property wrapper and invalidating its state is recommended for triggering new translations. Storing [doc:\/\/com.apple.Translation\/documentation\/Translation\/TranslationSession\/Configuration] in a model object also works.\n\n### Translate batches of strings\n\nTo translate multiple strings between the same languages, it’s most efficient to use one of the batch translation functions of [doc:\/\/com.apple.Translation\/documentation\/Translation\/TranslationSession]. You can translate a batch of strings and get the results all at once, or you can receive them incrementally as they arrive.\n\nTo keep your UI clean and uncluttered, you can also do this work in a view model, as the Batch All at Once demo shows. Its code example defines a `State` property wrapper for a [doc:\/\/com.apple.Translation\/documentation\/Translation\/TranslationSession\/Configuration] object in the view offering the translation, and attaches the [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/View\/translationTask(_:action:)] function to the view containing the text to translate. Using the `session` instance from the task, it calls the [doc:\/\/com.apple.Translation\/documentation\/Translation\/TranslationSession\/translations(from:)] function in the view model. The view model maps all the strings to translate in an array of type [doc:\/\/com.apple.Translation\/documentation\/Translation\/TranslationSession\/Request] and sets the [doc:\/\/com.apple.Translation\/documentation\/Translation\/TranslationSession\/Request\/sourceText] property of the request to the string to translate. Then the sample calls [doc:\/\/com.apple.Translation\/documentation\/Translation\/TranslationSession\/translations(from:)] on the session object and passes in the array of requests to translate. Finally, it maps each response object that returns to the corresponding index in the original array of text.\n\n\n\nWhen translating a group of strings using the [doc:\/\/com.apple.Translation\/documentation\/Translation\/TranslationSession\/translations(from:)] function, the responses return in the same order you send them.\n\n### Display the results as they arrive\n\nIf you want to translate multiple strings of text and display the results as they arrive, use the [doc:\/\/com.apple.Translation\/documentation\/Translation\/TranslationSession\/translate(batch:)] function.\n\nThe Batch as a Sequence demo is the same as the Batch All at Once demo except for the way it matches translation requests to responses.\n\nIn this process, the responses can return in a different order than you send them. So the Batch as a Sequence demo tracks which request corresponds with which response by assigning a [doc:\/\/com.apple.Translation\/documentation\/Translation\/TranslationSession\/Request\/clientIdentifier] to each sent request — in this case, the index of the item to translate in the array. The client identifier returns with the same value in the response. When the response returns, the sample uses the client identifier to associate the request with the response.\n\n```swift\nextension ViewModel {\n    func translateSequence(using session: TranslationSession) async {\n        Task { @MainActor in\n            let requests: [TranslationSession.Request] = foodItems.enumerated().map { (index, string) in\n                \/\/ Assign each request a client identifier.\n                    .init(sourceText: string, clientIdentifier: \"\\(index)\")\n            }\n\n            do {\n                for try await response in session.translate(batch: requests) {\n                    \/\/ Use the returned client identifier (the index) to map the request to the response.\n                    guard let index = Int(response.clientIdentifier ?? \"\") else { continue }\n                    foodItems[index] = response.targetText\n                }\n            } catch {\n                \/\/ Handle any errors.\n            }\n        }\n    }\n}\n```\n\n### Check for language availability\n\nThe Language Availability demo shows how to check whether the framework supports a specific language pairing before offering it to people. A person selects a source and a target language from a picker, and the sample passes that language pairing to a function in the view model that checks whether the framework supports that pairing. The view then updates the display when the model sets the `isTranslationSupported` variable.\n\n```swift\nextension ViewModel {\n    func checkLanguageSupport(from source: Locale.Language, to target: Locale.Language) async {\n        let availability = LanguageAvailability()\n        let status = await availability.status(from: source, to: target)\n\n        switch status {\n        case .installed, .supported:\n            isTranslationSupported = true\n        case .unsupported:\n            isTranslationSupported = false\n        @unknown default:\n            print(\"Not supported\")\n        }\n    }\n}\n```\n\n\n\n### Prepare for translation\n\nIf you know which languages a translation needs, you can download the language models before offering the translation.\n\nThe Prepare for Translation demo shows how to initiate the download of a language pairing by creating a `TranslationSession.Configuration` instance with the source and target language to download. The sample then calls [doc:\/\/com.apple.Translation\/documentation\/Translation\/TranslationSession\/prepareTranslation()] on the session the translation task returns. If the languages aren’t already downloaded, a view appears that requests permission to download them.\n\n```swift\nstruct PrepareTranslationView: View {\n\n    \/\/ Define the pairing of languages you want to download.\n    @State private var configuration = TranslationSession.Configuration(\n        source: Locale.Language(identifier: \"pt_BR\"),\n        target: Locale.Language(identifier: \"ko_KR\")\n    )\n\n    @State private var buttonTapped = false\n\n    var body: some View {\n        VStack(spacing: 20) {\n            Text(\"Tap the button to start downloading languages before offering a translation.\")\n            Button(\"Prepare\") {\n                configuration.invalidate()\n                buttonTapped = true\n            }\n        }\n        .translationTask(configuration) { session in\n            if buttonTapped {\n                do {\n                    \/\/ Display a sheet asking the user's permission\n                    \/\/ to start downloading the language pairing.\n                    try await session.prepareTranslation()\n                } catch {\n                    \/\/ Handle any errors.\n                }\n            }\n        }\n        .padding()\n        .navigationTitle(\"Prepare translation\")\n    }\n}\n```\n\nFor testing, you can delete locally downloaded models in macOS by choosing System Settings > General > Language & Region > Translation Languages. In iOS, you can manage your downloaded languages by choosing Settings > Apps > Translate > Downloaded Languages if you have the system Translate app installed locally on your device.\n\n## Essentials\n\n- **translationPresentation(isPresented:text:attachmentAnchor:arrowEdge:replacementAction:)**: Presents a translation popover when a given condition is true.\n- **translationTask(_:action:)**: Adds a task to perform before this view appears or when the translation configuration changes.\n- **translationTask(source:target:action:)**: Adds a task to perform before this view appears or when the specified source or target languages change.\n- **TranslationSession**: A class that performs translations between a pair of languages.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Presents a translation popover when a given condition is true.",
          "name" : "translationPresentation(isPresented:text:attachmentAnchor:arrowEdge:replacementAction:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/SwiftUI\/View\/translationPresentation(isPresented:text:attachmentAnchor:arrowEdge:replacementAction:)"
        },
        {
          "description" : "Adds a task to perform before this view appears or when the translation configuration changes.",
          "name" : "translationTask(_:action:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/SwiftUI\/View\/translationTask(_:action:)"
        },
        {
          "description" : "Adds a task to perform before this view appears or when the specified source or target languages change.",
          "name" : "translationTask(source:target:action:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/SwiftUI\/View\/translationTask(source:target:action:)"
        },
        {
          "description" : "A class that performs translations between a pair of languages.",
          "name" : "TranslationSession",
          "url" : "https:\/\/developer.apple.com\/documentation\/Translation\/TranslationSession"
        }
      ],
      "title" : "Essentials"
    }
  ],
  "source" : "appleJSON",
  "title" : "Translating text within your app",
  "url" : "https:\/\/developer.apple.com\/documentation\/Translation\/translating-text-within-your-app"
}