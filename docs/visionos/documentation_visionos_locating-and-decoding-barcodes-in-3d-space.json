{
  "abstract" : "Create engaging, hands-free experiences based on barcodes in a person’s surroundings.",
  "codeExamples" : [
    {
      "code" : "import SwiftUI\nimport RealityKit\nimport ARKit\nimport Combine\n\nstruct ImmersiveView: View {\n    @State private var arkitSession = ARKitSession()\n    @State private var root = Entity()\n    @State private var fadeCompleteSubscriptions: Set<AnyCancellable> = []\n    \n    var body: some View {\n        RealityView { content in\n            content.add(root)\n        }\n        .task {\n            \/\/ Check whether there's support for barcode detection; otherwise, handle this case.\n            guard BarcodeDetectionProvider.isSupported else { return }\n\n            \/\/ Specify the symbologies you want to detect.\n            let barcodeDetection = BarcodeDetectionProvider(symbologies: [.code128, .qr])\n\n            do {\n                try await arkitSession.run([barcodeDetection])\n\n                for await update in barcodeDetection.anchorUpdates where update.event == .added {\n                    let anchor = update.anchor\n                    \n                    \/\/ Play an animation to indicate when the system detects a barcode.  \n                    playAnimation(for: anchor)\n                    \n                    \/\/ Use the anchor's decoded contents and symbology to take action.\n                    print(\n                         \"\"\"\n\n                         Payload: \\(anchor.payloadString ?? \"\")\n                         Symbology: \\(anchor.symbology)\n                         \"\"\")\n                }\n            } catch {\n                \/\/ Handle the error.\n                print(error)\n            }\n        }\n    }\n}",
      "language" : "swift"
    },
    {
      "code" : "\/\/ Define this function in `ImmersiveView`.\nfunc playAnimation(for anchor: BarcodeAnchor) {\n    guard let scene = root.scene else { return }\n    \n    \/\/ Create a plane and size it to match the barcode.\n    let extent = anchor.extent\n    let entity = ModelEntity(mesh: .generatePlane(width: extent.x, depth: extent.z), materials: [UnlitMaterial(color: .green)])\n    entity.components.set(OpacityComponent(opacity: 0))\n    \n    \/\/ Position the plane over the barcode.\n    entity.transform = Transform(matrix: anchor.originFromAnchorTransform)\n    root.addChild(entity)\n    \n    \/\/ Fade the plane in and out.\n    do {\n        let duration = 0.5\n        let fadeIn = try AnimationResource.generate(with: FromToByAnimation<Float>(\n            from: 0,\n            to: 1.0,\n            duration: duration,\n            isAdditive: true,\n            bindTarget: .opacity)\n        )\n        let fadeOut = try AnimationResource.generate(with: FromToByAnimation<Float>(\n            from: 1.0,\n            to: 0,\n            duration: duration,\n            isAdditive: true,\n            bindTarget: .opacity))\n        \n        let fadeAnimation = try AnimationResource.sequence(with: [fadeIn, fadeOut])\n        \n        _ = scene.subscribe(to: AnimationEvents.PlaybackCompleted.self, on: entity, { _ in\n            \/\/ Remove the plane after the animation completes.\n            entity.removeFromParent()\n        }).store(in: &fadeCompleteSubscriptions)\n        \n        entity.playAnimation(fadeAnimation)\n    } catch {\n        \/\/ Handle the error.\n    }\n}",
      "language" : "swift"
    }
  ],
  "contentHash" : "55051d881e6bda6c52ff2d1e0ed19e04a13a91c3aa65d454a048541c632e8ac3",
  "crawledAt" : "2025-12-02T17:52:19Z",
  "id" : "14CD296A-E3B9-472E-B3FF-9E4F6A49F7A8",
  "kind" : "unknown",
  "language" : "swift",
  "overview" : "## Overview\n\nThis sample code project demonstrates how to use barcode detection in ARKit to detect, decode, and place content near barcodes in your visionOS app. ARKit enables your visionOS app to detect barcodes (including QR codes), locate their positions in a person’s surroundings, and decode their contents. For example, a warehouse worker can use your app to retrieve an item by looking at a package’s barcode to confirm its contents.\n\n### Configure your sample code project\n\nReplace `Enterprise.license` with your license file. The sample app requires a valid license file to detect barcodes.\n\n### Request the entitlement\n\nBarcode detection is a part of enterprise APIs for visionOS, a collection of APIs that unlock capabilities for enterprise customers. To use barcode detection, you need to apply for the [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Entitlements\/com.apple.developer.arkit.barcode-detection.allow] entitlement. For more information, including how to apply for this entitlement, see [doc:\/\/com.apple.documentation\/documentation\/visionOS\/building-spatial-experiences-for-business-apps-with-enterprise-apis].\n\n### Add usage descriptions for ARKit data access\n\nTo help protect people’s privacy, visionOS limits app access to cameras and other sensors in Apple Vision Pro. You need to add an [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Information-Property-List\/NSWorldSensingUsageDescription] to your app’s information property list to provide a usage description that explains how your app uses the data those sensors provide. People see this description when your app prompts for access to world-sensing data.\n\n### Detect, decode, and highlight barcodes\n\nYour visionOS app can detect barcodes in a person’s surroundings and highlight the barcode the person is looking for. The following code example detects and highlights every Code 128 or QR Code symbology in a person’s surroundings. The code example includes three steps: detecting the barcode, printing its decoded content, and creating the highlight animation.\n\nTo start detecting barcodes, create a [doc:\/\/com.apple.documentation\/documentation\/ARKit\/BarcodeDetectionProvider] to get the positions of barcodes. Next, specify the [doc:\/\/com.apple.documentation\/documentation\/ARKit\/BarcodeAnchor\/Symbology-swift.enum] to indicate the types of barcodes you want ARKit to detect in the person’s surroundings. Then, start an [doc:\/\/com.apple.documentation\/documentation\/ARKit\/ARKitSession] with the `BarcodeDetectionProvider`.\n\nARKit delivers an asynchronous stream of updates as it detects changes in the scene. Each update includes a [doc:\/\/com.apple.documentation\/documentation\/ARKit\/BarcodeAnchor] containing the barcode’s payload, extent, and transform. To implement the highlight animation, create a plane that you size and position to match that of the barcode, then fade it in and out.\n\n### Determine the ideal barcode width\n\nThe sample code project can’t read barcodes that are too small to appear clearly in a person’s field of view. Larger barcodes generally improve readability, providing that they remain within the field of view. The minimum barcode size depends on its [doc:\/\/com.apple.documentation\/documentation\/ARKit\/BarcodeAnchor\/Symbology-swift.enum]. Refer to the table below to determine the minimum width required for a barcode to be readable under nominal lighting conditions (100 lux) at an arm’s length distance (~40 cm).",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/visionos\/locating-and-decoding-barcodes-in-3d-space\ncrawled: 2025-12-02T17:52:19Z\n---\n\n# Locating and decoding barcodes in 3D space\n\n**Sample Code**\n\nCreate engaging, hands-free experiences based on barcodes in a person’s surroundings.\n\n## Overview\n\nThis sample code project demonstrates how to use barcode detection in ARKit to detect, decode, and place content near barcodes in your visionOS app. ARKit enables your visionOS app to detect barcodes (including QR codes), locate their positions in a person’s surroundings, and decode their contents. For example, a warehouse worker can use your app to retrieve an item by looking at a package’s barcode to confirm its contents.\n\n### Configure your sample code project\n\nReplace `Enterprise.license` with your license file. The sample app requires a valid license file to detect barcodes.\n\n### Request the entitlement\n\nBarcode detection is a part of enterprise APIs for visionOS, a collection of APIs that unlock capabilities for enterprise customers. To use barcode detection, you need to apply for the [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Entitlements\/com.apple.developer.arkit.barcode-detection.allow] entitlement. For more information, including how to apply for this entitlement, see [doc:\/\/com.apple.documentation\/documentation\/visionOS\/building-spatial-experiences-for-business-apps-with-enterprise-apis].\n\n### Add usage descriptions for ARKit data access\n\nTo help protect people’s privacy, visionOS limits app access to cameras and other sensors in Apple Vision Pro. You need to add an [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Information-Property-List\/NSWorldSensingUsageDescription] to your app’s information property list to provide a usage description that explains how your app uses the data those sensors provide. People see this description when your app prompts for access to world-sensing data.\n\n\n\n### Detect, decode, and highlight barcodes\n\nYour visionOS app can detect barcodes in a person’s surroundings and highlight the barcode the person is looking for. The following code example detects and highlights every Code 128 or QR Code symbology in a person’s surroundings. The code example includes three steps: detecting the barcode, printing its decoded content, and creating the highlight animation.\n\nTo start detecting barcodes, create a [doc:\/\/com.apple.documentation\/documentation\/ARKit\/BarcodeDetectionProvider] to get the positions of barcodes. Next, specify the [doc:\/\/com.apple.documentation\/documentation\/ARKit\/BarcodeAnchor\/Symbology-swift.enum] to indicate the types of barcodes you want ARKit to detect in the person’s surroundings. Then, start an [doc:\/\/com.apple.documentation\/documentation\/ARKit\/ARKitSession] with the `BarcodeDetectionProvider`.\n\n```swift\nimport SwiftUI\nimport RealityKit\nimport ARKit\nimport Combine\n\nstruct ImmersiveView: View {\n    @State private var arkitSession = ARKitSession()\n    @State private var root = Entity()\n    @State private var fadeCompleteSubscriptions: Set<AnyCancellable> = []\n    \n    var body: some View {\n        RealityView { content in\n            content.add(root)\n        }\n        .task {\n            \/\/ Check whether there's support for barcode detection; otherwise, handle this case.\n            guard BarcodeDetectionProvider.isSupported else { return }\n\n            \/\/ Specify the symbologies you want to detect.\n            let barcodeDetection = BarcodeDetectionProvider(symbologies: [.code128, .qr])\n\n            do {\n                try await arkitSession.run([barcodeDetection])\n\n                for await update in barcodeDetection.anchorUpdates where update.event == .added {\n                    let anchor = update.anchor\n                    \n                    \/\/ Play an animation to indicate when the system detects a barcode.  \n                    playAnimation(for: anchor)\n                    \n                    \/\/ Use the anchor's decoded contents and symbology to take action.\n                    print(\n                         \"\"\"\n\n                         Payload: \\(anchor.payloadString ?? \"\")\n                         Symbology: \\(anchor.symbology)\n                         \"\"\")\n                }\n            } catch {\n                \/\/ Handle the error.\n                print(error)\n            }\n        }\n    }\n}\n```\n\nARKit delivers an asynchronous stream of updates as it detects changes in the scene. Each update includes a [doc:\/\/com.apple.documentation\/documentation\/ARKit\/BarcodeAnchor] containing the barcode’s payload, extent, and transform. To implement the highlight animation, create a plane that you size and position to match that of the barcode, then fade it in and out.\n\n\n\n```swift\n\/\/ Define this function in `ImmersiveView`.\nfunc playAnimation(for anchor: BarcodeAnchor) {\n    guard let scene = root.scene else { return }\n    \n    \/\/ Create a plane and size it to match the barcode.\n    let extent = anchor.extent\n    let entity = ModelEntity(mesh: .generatePlane(width: extent.x, depth: extent.z), materials: [UnlitMaterial(color: .green)])\n    entity.components.set(OpacityComponent(opacity: 0))\n    \n    \/\/ Position the plane over the barcode.\n    entity.transform = Transform(matrix: anchor.originFromAnchorTransform)\n    root.addChild(entity)\n    \n    \/\/ Fade the plane in and out.\n    do {\n        let duration = 0.5\n        let fadeIn = try AnimationResource.generate(with: FromToByAnimation<Float>(\n            from: 0,\n            to: 1.0,\n            duration: duration,\n            isAdditive: true,\n            bindTarget: .opacity)\n        )\n        let fadeOut = try AnimationResource.generate(with: FromToByAnimation<Float>(\n            from: 1.0,\n            to: 0,\n            duration: duration,\n            isAdditive: true,\n            bindTarget: .opacity))\n        \n        let fadeAnimation = try AnimationResource.sequence(with: [fadeIn, fadeOut])\n        \n        _ = scene.subscribe(to: AnimationEvents.PlaybackCompleted.self, on: entity, { _ in\n            \/\/ Remove the plane after the animation completes.\n            entity.removeFromParent()\n        }).store(in: &fadeCompleteSubscriptions)\n        \n        entity.playAnimation(fadeAnimation)\n    } catch {\n        \/\/ Handle the error.\n    }\n}\n```\n\n\n\n### Determine the ideal barcode width\n\nThe sample code project can’t read barcodes that are too small to appear clearly in a person’s field of view. Larger barcodes generally improve readability, providing that they remain within the field of view. The minimum barcode size depends on its [doc:\/\/com.apple.documentation\/documentation\/ARKit\/BarcodeAnchor\/Symbology-swift.enum]. Refer to the table below to determine the minimum width required for a barcode to be readable under nominal lighting conditions (100 lux) at an arm’s length distance (~40 cm).\n\n\n\n## Enterprise APIs for visionOS\n\n- **Accessing the main camera**: Add camera-based features to enterprise apps.\n- **Building spatial experiences for business apps with enterprise APIs for visionOS**: Grant enhanced sensor access and increased platform control to your visionOS app by using entitlements.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Add camera-based features to enterprise apps.",
          "name" : "Accessing the main camera",
          "url" : "https:\/\/developer.apple.com\/documentation\/visionOS\/accessing-the-main-camera"
        },
        {
          "description" : "Grant enhanced sensor access and increased platform control to your visionOS app by using entitlements.",
          "name" : "Building spatial experiences for business apps with enterprise APIs for visionOS",
          "url" : "https:\/\/developer.apple.com\/documentation\/visionOS\/building-spatial-experiences-for-business-apps-with-enterprise-apis"
        }
      ],
      "title" : "Enterprise APIs for visionOS"
    }
  ],
  "source" : "appleJSON",
  "title" : "Locating and decoding barcodes in 3D space",
  "url" : "https:\/\/developer.apple.com\/documentation\/visionos\/locating-and-decoding-barcodes-in-3d-space"
}