{
  "abstract" : "Display an interactive car model using gestures in a reality view.",
  "codeExamples" : [

  ],
  "contentHash" : "f557db7c0a17fa65abac500a305d0e3e75dfc134288cd4c84f480a946daf78c0",
  "crawledAt" : "2025-12-02T16:23:07Z",
  "declaration" : {
    "code" : "var translationGesture: some Gesture {\n    DragGesture()\n        .targetedToAnyEntity()\n        .onChanged({ value in\n            \/\/\/ The entity that the drag gesture targets.\n            let rootEntity = value.entity\n\n\n            \/\/ Set `initialPosition` to the initial position of the entity if it is `nil`.\n            if initialPosition == nil {\n                initialPosition = rootEntity.position\n            }\n\n\n            \/\/\/ The movement that converts a global world space to the scene world space of the entity.\n            let movement = value.convert(value.translation3D, from: .global, to: .scene)\n\n\n            \/\/ Apply the entity position to match the drag gesture,\n            \/\/ and set the movement to stay at the ground level.\n            rootEntity.position = (initialPosition ?? .zero) + movement.grounded\n        })\n        .onEnded({ _ in\n            \/\/ Reset the `initialPosition` to `nil` when the gesture ends.\n            initialPosition = nil\n        })\n}",
    "language" : "swift"
  },
  "id" : "C3A4B85A-EB0D-49EA-B283-E5F09C20CB84",
  "kind" : "protocol",
  "overview" : "visionOS  Introductory visionOS samples  Creating an interactive 3D model in visionOS  Introductory visionOS samples  Creating an interactive 3D model in visionOS Sample CodeCreating an interactive 3D model in visionOSDisplay an interactive car model using gestures in a reality view. Download visionOS 2.0+Xcode 16.0+OverviewThis sample demonstrates how to create and display a 3D car model that responds to gestures within visionOS. It uses the ModelEntity initializer to asynchronously load a model by its filename, and it implements the DragGesture protocol on the ModelEntity, to interact with the model.\n\nAt launch, the app’s main view generates the following:\n\nA window that contains text",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/visionos\/creating-an-interactable-3d-model-in-visionos\ncrawled: 2025-12-02T16:23:07Z\n---\n\n# Creating an interactive 3D model in visionOS | Apple Developer Documentation\n\n- [ visionOS ](\/documentation\/visionos)\n\n- [ Introductory visionOS samples ](\/documentation\/visionos\/introductory-visionos-samples)\n\n- [ Creating an interactive 3D model in visionOS ](\/documentation\/visionos\/creating-an-interactable-3d-model-in-visionos)\n\n- [ Introductory visionOS samples ](\/documentation\/visionos\/introductory-visionos-samples)\n\n-  Creating an interactive 3D model in visionOS \n\nSample Code# Creating an interactive 3D model in visionOS\n\nDisplay an interactive car model using gestures in a reality view.[ Download ](https:\/\/docs-assets.developer.apple.com\/published\/7b5bc90de8c3\/CreatingA3DModelWithGesturesInVisionOS.zip)visionOS 2.0+Xcode 16.0+## [Overview](\/documentation\/visionos\/creating-an-interactable-3d-model-in-visionos#Overview)\n\nThis sample demonstrates how to create and display a 3D car model that responds to gestures within visionOS. It uses the [`ModelEntity`](\/documentation\/RealityKit\/ModelEntity) initializer to asynchronously load a model by its filename, and it implements the [`DragGesture`](\/documentation\/SwiftUI\/DragGesture) protocol on the `ModelEntity`, to interact with the model.\n\nAt launch, the app’s main view generates the following:\n\n- A window that contains text\n\n- A 3D model of a car that reacts to drag and magnify gestures\n\n Video with custom controls.  Content description: A screenshot of a visionOS app in Simulator, displaying a 3D car entity and a translucent window labeled 'Use gestures to move the car'. [ Play ](#)### [Set up the gestures for the entity](\/documentation\/visionos\/creating-an-interactable-3d-model-in-visionos#Set-up-the-gestures-for-the-entity)\n\nTo make sure the car locks on the ground, the sample creates an `SIMD3` extension with the `grounded` variable to lock the y-axis to 0 during a drag gesture movement:\n\n\n\n```\nimport SwiftUI\n\n\nextension SIMD3 where Scalar == Float {\n    \/\/\/ The variable to lock the y-axis value to 0.\n    var grounded: SIMD3<Scalar> {\n        return .init(x: x, y: 0, z: z)\n    }\n}\n\n```\n\nThe main view creates two state variables to track the initial position and scale of the entity:\n\n\n\n```\n\/\/\/ The initial position of the entity.\n@State var initialPosition: SIMD3<Float>? = nil\n\n\n\/\/\/ The initial scale of the entity.\n@State var initialScale: SIMD3<Float>? = nil\n\n```\n\nThe app creates a `translationGesture` to update the entity’s positions with a person’s gesture movements, allowing the person to select and move an entity around the immersive space:\n\n\n\n```\nvar translationGesture: some Gesture {\n    DragGesture()\n        .targetedToAnyEntity()\n        .onChanged({ value in\n            \/\/\/ The entity that the drag gesture targets.\n            let rootEntity = value.entity\n\n\n            \/\/ Set `initialPosition` to the initial position of the entity if it is `nil`.\n            if initialPosition == nil {\n                initialPosition = rootEntity.position\n            }\n\n\n            \/\/\/ The movement that converts a global world space to the scene world space of the entity.\n            let movement = value.convert(value.translation3D, from: .global, to: .scene)\n\n\n            \/\/ Apply the entity position to match the drag gesture,\n            \/\/ and set the movement to stay at the ground level.\n            rootEntity.position = (initialPosition ?? .zero) + movement.grounded\n        })\n        .onEnded({ _ in\n            \/\/ Reset the `initialPosition` to `nil` when the gesture ends.\n            initialPosition = nil\n        })\n}\n\n```\n\nThe `initialPosition` variable resets back to `nil` when the gesture ends.\n\nNote\n\nYou must use [`targetedToAnyEntity()`](\/documentation\/SwiftUI\/Gesture\/targetedToAnyEntity()) or related methods to enable a gesture to target an entity.\n\nThe `scaleGesture` applies the scale rate by the magnification on the gesture, to smoothly scale the entity during a gesture movement:\n\n\n\n```\nvar scaleGesture: some Gesture {\n    MagnifyGesture()\n        .targetedToAnyEntity()\n        .onChanged { gesture in\n            \/\/\/ The entity that the magnify gesture targets.\n            let rootEntity = value.entity\n\n\n            \/\/ Set the `initialScale` to the initial scale of the entity if it is `nil`.\n            if initialScale == nil {\n                initialScale = rootEntity.scale\n            }\n\n\n            \/\/\/ The rate that the model will scale by.\n            let scaleRate: Float = 1.0\n\n\n            \/\/ Scale the entity up smoothly by the relative magnification on the gesture.\n            rootEntity.scale = (initialScale ?? .init(repeating: scaleRate)) * Float(gesture.gestureValue.magnification)\n        }\n        .onEnded { _ in\n            \/\/ Reset the `initialScale` back to `nil` when the gesture ends.\n            initialScale = nil\n        }\n}\n\n```\n\nThe `initialScale` variable resets back to `nil` once the gesture ends.\n\n### [Load the 3D car model](\/documentation\/visionos\/creating-an-interactable-3d-model-in-visionos#Load-the-3D-car-model)\n\nThe `CarView` loads in a USDZ file as a [`ModelEntity`](\/documentation\/RealityKit\/ModelEntity) instance and creates a `bounds` containing a bounding box of the outer dimensional size of the `car` entity:\n\n\n\n```\nimport SwiftUI\nimport RealityKit\n\n\nstruct CarView: View {\n    \/\/ ...\n\n\n    var body: some View {\n        RealityView { content in\n            \/\/\/ The name of the model.\n            let fileName: String = \"Huracan-EVO-RWD-Spyder-opt-22\"\n\n\n            \/\/\/ The model that loads from the filename asynchronously.\n            guard let car = try? await ModelEntity(named: fileName) else {\n                assertionFailure(\"Failed to load model: (fileName)\")\n                return\n            }\n\n\n            \/\/\/ The visual bounds of the car.\n            let bounds = car.visualBounds(relativeTo: nil)\n\n\n            \/\/ ...\n        }\n    }\n}\n\n```\n\n### [Set the collision component](\/documentation\/visionos\/creating-an-interactable-3d-model-in-visionos#Set-the-collision-component)\n\nThe app uses the `bounds` property to generate a bounding box with [`ShapeResource`](\/documentation\/RealityKit\/ShapeResource), which serves as a collision bound for the [`CollisionComponent`](\/documentation\/RealityKit\/CollisionComponent). This enables the collision component to interact with the environment:\n\n\n\n```\nimport SwiftUI\nimport RealityKit\n\n\nstruct CarView: View {\n    \/\/ ...\n\n\n    var body: some View {\n        RealityView { content in\n            \/\/ ...\n            \n            \/\/\/ The visual bounds of the car to show at all times.\n            let bounds = car.visualBounds(relativeTo: nil)\n\n\n            \/\/\/ The width of the collision box by the size of the model.\n            let carWidth: Float = (car.model?.mesh.bounds.max.x)!\n\n\n            \/\/\/ The height of the collision box by the size of the model.\n            let carHeight: Float = (car.model?.mesh.bounds.max.y)!\n\n\n            \/\/\/ The depth of the collision box by the size of the model.\n            let carDepth: Float = (car.model?.mesh.bounds.max.z)!\n\n\n            \/\/\/ The box around the model of the car for collisions.\n            let boxShape = ShapeResource.generateBox(\n                width: carWidth,\n                height: carHeight,\n                depth: carDepth)\n\n\n            \/\/ Add the box shape as a collision component.\n            car.components.set(CollisionComponent(shapes: [boxShape]))\n\n\n            \/\/ ...\n        }\n    }\n}\n\n```\n\nThe app also uses the `bounds` property to set the `car` entity’s spawn position. It sets this position on the ground, along the z-axis, by the radius of `bounds`:\n\n\n\n```\nimport SwiftUI\nimport RealityKit\n\n\nstruct CarView: View {\n    \/\/ ...\n\n\n    var body: some View {\n        RealityView { content in\n            \/\/ ...\n            \n            \/\/ Set the spawn position of the entity on the ground.\n            car.position.y -= bounds.min.y\n\n\n            \/\/ Set the spawn position along the z-axis, by the radius of the visual bounds.\n            car.position.z -= bounds.boundingRadius\n\n\n            \/\/ Add the car model to the `RealityView`.\n            content.add(car)\n        }\n        .gesture(translationGesture)\n        .gesture(scaleGesture)\n    }\n}\n\n\n\n```\n\nFinally, the app adds the `car` entity to the `RealityView`.\n\n### [Run the immersive scene](\/documentation\/visionos\/creating-an-interactable-3d-model-in-visionos#Run-the-immersive-scene)\n\nThe sample structure includes an `ImmersiveSpace` entry to the scene to include in the app’s environment:\n\n\n\n```\nimport SwiftUI\n\n\n@main\nstruct EntryPoint: App {\n    var body: some Scene {\n        WindowGroup {\n            MainView()\n        }\n        ImmersiveSpace(id: \"CarView\") {\n            CarView()\n        }\n    }\n}\n\n```\n\nThe sample’s main view uses the [`openImmersiveSpace`](\/documentation\/SwiftUI\/EnvironmentValues\/openImmersiveSpace) instance property to call the `ImmersiveSpace` that the app’s `EntryPoint` defines:\n\n\n\n```\nimport SwiftUI\n\n\nstruct MainView: View {\n    \/\/\/ The environment value to get the instance of the `OpenImmersiveSpaceAction` instance.\n    @Environment(.openImmersiveSpace) var openImmersiveSpace\n\n\n    var body: some View {\n        \/\/ Display a line of text and\n        \/\/ open a new immersive space environment.\n        Text(\"Use gestures to move the car\")\n        .onAppear {\n            Task {\n                await openImmersiveSpace(id: \"CarView\")\n            }\n        }\n    }\n}\n\n```\n\n#### [Related samples](\/documentation\/visionos\/creating-an-interactable-3d-model-in-visionos#Related-samples)\n\n[Creating an immersive space in visionOS](\/documentation\/visionos\/creating-immersive-spaces-in-visionos-with-swiftui)Enhance your visionOS app by adding an immersive space using RealityKit.[Transforming RealityKit entities using gestures](\/documentation\/RealityKit\/transforming-realitykit-entities-with-gestures)Build a RealityKit component to support standard visionOS gestures on any entity.",
  "sections" : [
    {
      "content" : "",
      "title" : "Overview"
    }
  ],
  "source" : "appleWebKit",
  "title" : "Creating an interactive 3D model in visionOS | Apple Developer Documentation",
  "url" : "https:\/\/developer.apple.com\/documentation\/visionos\/creating-an-interactable-3d-model-in-visionos"
}