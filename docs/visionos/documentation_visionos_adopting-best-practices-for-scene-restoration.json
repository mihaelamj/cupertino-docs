{
  "abstract" : "Create persistent and contextually relevant spatial experiences by managing scene restoration, customizing window behaviors, and surface snapping data.",
  "codeExamples" : [
    {
      "code" : "WindowGroup(id: \"to-do\") {\n    \/\/ The main body of a to-do list app.\n    ToDoList()\n}\n\nWindow(\"Onboarding\", id: \"onboarding\") {\n    \/\/ The flow that takes the person through how the app works.\n    OnboardingView()\n}\n.restorationBehavior(.disabled)",
      "language" : "swift"
    },
    {
      "code" : "@AppStorage(\"needsOnboarding\") private var needsOnboarding = true\n\nvar body: some Scene {\n\n    Window(\"Onboarding\", id: \"onboarding\") {\n        \/\/ The flow that takes the person through how the app works.\n        OnboardingView()\n    }\n    \/\/ Prevent state restoration for this window.\n    .restorationBehavior(.disabled)\n\n    WindowGroup(id: \"to-do\") {\n        \/\/ The main body of a to-do list app.\n        ToDoList()\n    }\n    \/\/ Presents the main body if the person doesn't need the onboarding experience.\n    .defaultLaunchBehavior(needsOnboarding ? .automatic : .presented)\n}",
      "language" : "swift"
    },
    {
      "code" : "@AppStorage(\"hasOnboarded\") private var needsOnboarding = true\n\nvar body: some Scene {\n    Window(\"Onboarding\", id: \"onboarding\") {\n        \/\/ The flow that takes the person through how the app works.\n        OnboardingView()\n    }\n    \/\/ Prevent state restoration for this window.\n    .restorationBehavior(.disabled)\n\n    WindowGroup(id: \"to-do\") {\n        \/\/ The main body of a to-do list app.\n        ToDoList()\n    }\n    \/\/ Presents the main body if the person doesn't need the onboarding experience.\n    .defaultLaunchBehavior(needsOnboarding ? .automatic : .presented)\n\n    WindowGroup(id: \"settings\") {\n        SettingsView()\n    }\n    \/\/ Suppresses launch of this window when the app is re-opened.\n    .defaultLaunchBehavior(.suppressed)\n}",
      "language" : "swift"
    },
    {
      "code" : "import SwiftUI\nimport ARKit\n\nstruct ContentView: View {\n    @Environment(\\.surfaceSnappingInfo) private var snappedStatus\n    @State private var showWhiteboard = false\n    \n    \n    var body: some View {\n        Group {\n            \/\/ If it's snapped to the wall, show a whiteboard to-do list.\n            if showWhiteboard {\n                 WhiteboardView()\n            } else {\n                \/\/ Otherwise, show a paper to-do list.\n                PaperView()\n            }\n        }\n        .onChange(of: snappedStatus) {\n            if snappedStatus.isSnapped {\n                switch SurfaceSnappingInfo.authorizationStatus {\n                case .authorized:\n                    switch snappedStatus.classification {\n                    case .some(.table):\n                        showWhiteboard = true\n                    default:\n                        showWhiteboard = false\n                    }\n                case .denied:\n                    \/\/ The authorization prompt was denied.\n                    print(\"Authorization denied.\")\n                case .notDetermined:\n                    \/\/ The authorization prompt has not been answered.\n                    print(\"Please accept the authorization prompt.\")\n                case .restricted:\n                    print(\"Access to surface snapping is restricted.\")\n                @unknown default:\n                    print(\"Please accept the authorization prompt.\")\n                }\n            } else {\n                showWhiteboard = false\n            }\n        }\n    }\n}",
      "language" : "swift"
    }
  ],
  "contentHash" : "32c5e7caf52c68f347697766d586d7b9a156571f7ea0fd1ad4c98440ec36c58b",
  "crawledAt" : "2025-12-02T17:02:01Z",
  "id" : "82168144-4202-46D7-A789-B2D442E2CAB7",
  "kind" : "article",
  "language" : "swift",
  "overview" : "## Overview\n\nIn shared and mixed immersive spaces on visionOS, people can snap and lock app content directly to their physical environment. This persistence allows apps to remain in place even when the person leaves and returns, or restarts their device. You can use this capability to create deeply integrated spatial experiences that people will naturally return to.\n\nPeople can anchor apps to their space in a few different ways:\n\nLocking and persisting content in visionOS makes the user experience more natural and integrated by letting people attach apps to specific places in their real world. This means people can easily return to what they were doing, creating a smoother and more immersive experience. Knowing the kind of surface the app snaps to allows for more useful and personalized apps, giving developers the ability to show content that’s relevant to a given situation.\n\n## Handle scene restoration\n\nScene restoration is an important part of a seamless experience on visionOS. People expect content to persist where they’ve placed it, and they expect to be able to pick up where they left off. To ensure the system correctly restores windows and maintains a person’s desired layout, you’ll need to handle your app’s scene restoration.\n\nHowever, there are some cases in which you might not want to restore scenes, especially for those that serve a temporary or context-specific purpose, including:\n\nYou can opt out of scene restoration on a per-scene basis by applying `.restorationBehavior(.disabled)` to any `Window` or `WindowGroup`. The default behavior is `automatic`, which restores your content.\n\n## Customize window launch behavior\n\nIt’s important to launch only essential windows to prevent redundancy and confusion. You can use `.defaultLaunchBehavior` to fine-tune which windows appear when a person relaunches your app. By default, your app presents the first window declared in your `Scene` matching the “Preferred Default Scene Session Role” key in your `Info.plist`.\n\nTo prioritize presenting a specific window on launch, use `.presented`:\n\nFor secondary windows, use `.suppressed` to ensure it doesn’t open when the app relaunches. This is ideal for transient windows like onboarding screens, toolbars, or other UI elements that shouldn’t reappear every time a person opens the app.\n\n## Present content dynamically using surface snapping\n\nYou can use a scene’s physical placement to show content dynamically in an immersive app. Knowing where a person has placed content in their physical space allows you to integrate your app more deeply with their real world and make your app more contextually relevant.\n\nTo ensure your app has access to the physical placement:\n\nTo check and use the snapped status:",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/visionOS\/adopting-best-practices-for-scene-restoration\ncrawled: 2025-12-02T17:02:01Z\n---\n\n# Adopting best practices for persistent UI\n\n**Article**\n\nCreate persistent and contextually relevant spatial experiences by managing scene restoration, customizing window behaviors, and surface snapping data.\n\n## Overview\n\nIn shared and mixed immersive spaces on visionOS, people can snap and lock app content directly to their physical environment. This persistence allows apps to remain in place even when the person leaves and returns, or restarts their device. You can use this capability to create deeply integrated spatial experiences that people will naturally return to.\n\n\n\nPeople can anchor apps to their space in a few different ways:\n\n- **Snapping** — When a person moves a window near a vertical surface, like a wall, or a volume near a horizontal surface, like a table or floor, your app can automatically align with or snap to that surface.\n- **Locking** — When an app snaps to a surface, the system places a lock icon in the window bar to indicate it’s locked in place if the application supports restoration of that window.\n- **Persistence** — After locking the app in place, your content remains fixed to its physical location. It persists even if the person moves to a different room, takes the device off or on, or recenters their view. When moving between rooms, locked content from the previous room fades out, and locked content in the new room appears. Content that isn’t locked in place always launches relative to the person’s position.\n\nLocking and persisting content in visionOS makes the user experience more natural and integrated by letting people attach apps to specific places in their real world. This means people can easily return to what they were doing, creating a smoother and more immersive experience. Knowing the kind of surface the app snaps to allows for more useful and personalized apps, giving developers the ability to show content that’s relevant to a given situation.\n\n\n\n## Handle scene restoration\n\nScene restoration is an important part of a seamless experience on visionOS. People expect content to persist where they’ve placed it, and they expect to be able to pick up where they left off. To ensure the system correctly restores windows and maintains a person’s desired layout, you’ll need to handle your app’s scene restoration.\n\n\n\nHowever, there are some cases in which you might not want to restore scenes, especially for those that serve a temporary or context-specific purpose, including:\n\n- **Transient elements** — Welcome screens, onboarding flows, or temporary alerts.\n- **Context-dependent UI** — Tool palettes or inspectors whose relevance is tied to a specific state or document that might not exist upon relaunch.\n- **Completed one-time actions** — Login prompts or import and export dialogs.\n\nYou can opt out of scene restoration on a per-scene basis by applying `.restorationBehavior(.disabled)` to any `Window` or `WindowGroup`. The default behavior is `automatic`, which restores your content.\n\n```swift\nWindowGroup(id: \"to-do\") {\n    \/\/ The main body of a to-do list app.\n    ToDoList()\n}\n\nWindow(\"Onboarding\", id: \"onboarding\") {\n    \/\/ The flow that takes the person through how the app works.\n    OnboardingView()\n}\n.restorationBehavior(.disabled)\n```\n\n## Customize window launch behavior\n\nIt’s important to launch only essential windows to prevent redundancy and confusion. You can use `.defaultLaunchBehavior` to fine-tune which windows appear when a person relaunches your app. By default, your app presents the first window declared in your `Scene` matching the “Preferred Default Scene Session Role” key in your `Info.plist`.\n\nTo prioritize presenting a specific window on launch, use `.presented`:\n\n```swift\n@AppStorage(\"needsOnboarding\") private var needsOnboarding = true\n\nvar body: some Scene {\n\n    Window(\"Onboarding\", id: \"onboarding\") {\n        \/\/ The flow that takes the person through how the app works.\n        OnboardingView()\n    }\n    \/\/ Prevent state restoration for this window.\n    .restorationBehavior(.disabled)\n\n    WindowGroup(id: \"to-do\") {\n        \/\/ The main body of a to-do list app.\n        ToDoList()\n    }\n    \/\/ Presents the main body if the person doesn't need the onboarding experience.\n    .defaultLaunchBehavior(needsOnboarding ? .automatic : .presented)\n}\n```\n\nFor secondary windows, use `.suppressed` to ensure it doesn’t open when the app relaunches. This is ideal for transient windows like onboarding screens, toolbars, or other UI elements that shouldn’t reappear every time a person opens the app.\n\n```swift\n@AppStorage(\"hasOnboarded\") private var needsOnboarding = true\n\nvar body: some Scene {\n    Window(\"Onboarding\", id: \"onboarding\") {\n        \/\/ The flow that takes the person through how the app works.\n        OnboardingView()\n    }\n    \/\/ Prevent state restoration for this window.\n    .restorationBehavior(.disabled)\n\n    WindowGroup(id: \"to-do\") {\n        \/\/ The main body of a to-do list app.\n        ToDoList()\n    }\n    \/\/ Presents the main body if the person doesn't need the onboarding experience.\n    .defaultLaunchBehavior(needsOnboarding ? .automatic : .presented)\n\n    WindowGroup(id: \"settings\") {\n        SettingsView()\n    }\n    \/\/ Suppresses launch of this window when the app is re-opened.\n    .defaultLaunchBehavior(.suppressed)\n}\n```\n\n## Present content dynamically using surface snapping\n\nYou can use a scene’s physical placement to show content dynamically in an immersive app. Knowing where a person has placed content in their physical space allows you to integrate your app more deeply with their real world and make your app more contextually relevant.\n\nTo ensure your app has access to the physical placement:\n\n- **Request ARKit data access** — Follow the steps outlined in [doc:\/\/com.apple.documentation\/documentation\/visionOS\/setting-up-access-to-arkit-data].\n- **Enable detailed surface info** — Add the `UIWantsDetailedSurfaceInfo` key to your app’s `Info.plist` file and set its value to `YES`.\n\nTo check and use the snapped status:\n\n- **Access snapping information** — Use the `@Environment(\\.surfaceSnappingInfo)` property wrapper within your SwiftUI view to observe the scene’s snapping state.\n- **Check snapped state** — Read the `isSnapped` Boolean property from the environment value (`snappingInfo.isSnapped`) to determine if the system has currently snapped the scene to a physical surface.\n- **Verify authorization** — Confirm the person has granted permission by checking that the `authorizationStatus` property (`snappingInfo.authorizationStatus`) equals `.authorized`.\n- **Retrieve the surface type** — If the scene is snapped and authorization is granted, access the `classification` property (`snappingInfo.classification`). This returns an `ARKitSurfaceClassification` value, such as `.wall`, `.floor`, or `.table`.\n- **Conditionally show content** — Use the retrieved surface classification to dynamically show content based on the detected surface type.\n\n```swift\nimport SwiftUI\nimport ARKit\n\nstruct ContentView: View {\n    @Environment(\\.surfaceSnappingInfo) private var snappedStatus\n    @State private var showWhiteboard = false\n    \n    \n    var body: some View {\n        Group {\n            \/\/ If it's snapped to the wall, show a whiteboard to-do list.\n            if showWhiteboard {\n                 WhiteboardView()\n            } else {\n                \/\/ Otherwise, show a paper to-do list.\n                PaperView()\n            }\n        }\n        .onChange(of: snappedStatus) {\n            if snappedStatus.isSnapped {\n                switch SurfaceSnappingInfo.authorizationStatus {\n                case .authorized:\n                    switch snappedStatus.classification {\n                    case .some(.table):\n                        showWhiteboard = true\n                    default:\n                        showWhiteboard = false\n                    }\n                case .denied:\n                    \/\/ The authorization prompt was denied.\n                    print(\"Authorization denied.\")\n                case .notDetermined:\n                    \/\/ The authorization prompt has not been answered.\n                    print(\"Please accept the authorization prompt.\")\n                case .restricted:\n                    print(\"Access to surface snapping is restricted.\")\n                @unknown default:\n                    print(\"Please accept the authorization prompt.\")\n                }\n            } else {\n                showWhiteboard = false\n            }\n        }\n    }\n}\n```\n\n## SwiftUI\n\n- **Canyon Crosser: Building a volumetric hike-planning app**: Create a hike planning app using SwiftUI and RealityKit.\n- **Hello World**: Use windows, volumes, and immersive spaces to teach people about the Earth.\n- **Presenting windows and spaces**: Open and close the scenes that make up your app’s interface.\n- **Positioning and sizing windows**: Influence the initial geometry of windows that your app presents.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Create a hike planning app using SwiftUI and RealityKit.",
          "name" : "Canyon Crosser: Building a volumetric hike-planning app",
          "url" : "https:\/\/developer.apple.com\/documentation\/visionOS\/canyon-crosser-building-a-volumetric-hike-planning-app"
        },
        {
          "description" : "Use windows, volumes, and immersive spaces to teach people about the Earth.",
          "name" : "Hello World",
          "url" : "https:\/\/developer.apple.com\/documentation\/visionOS\/World"
        },
        {
          "description" : "Open and close the scenes that make up your app’s interface.",
          "name" : "Presenting windows and spaces",
          "url" : "https:\/\/developer.apple.com\/documentation\/visionOS\/presenting-windows-and-spaces"
        },
        {
          "description" : "Influence the initial geometry of windows that your app presents.",
          "name" : "Positioning and sizing windows",
          "url" : "https:\/\/developer.apple.com\/documentation\/visionOS\/positioning-and-sizing-windows"
        }
      ],
      "title" : "SwiftUI"
    }
  ],
  "source" : "appleJSON",
  "title" : "Adopting best practices for persistent UI",
  "url" : "https:\/\/developer.apple.com\/documentation\/visionOS\/adopting-best-practices-for-scene-restoration"
}