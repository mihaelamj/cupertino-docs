{
  "abstract" : "Import a reference object file and track a real-world object in your visionOS app.",
  "codeExamples" : [
    {
      "code" : "func configureAndRunObjectTracking() async -> ObjectTrackingProvider? {\n    let referenceObjects = referenceObjectLoader.enabledReferenceObjects\n\n    guard !referenceObjects.isEmpty else {\n        fatalError(\"No reference objects to start tracking\")\n    }\n\n    \/\/ Run a new provider each time when entering the immersive space.\n    let objectTracking = ObjectTrackingProvider(referenceObjects: referenceObjects)\n    do {\n        \/\/ Begin an `ARKitSession` with the provider.\n        try await arkitSession.run([objectTracking])\n    } catch {\n        print(\"Error: \\(error)\")\n        return nil\n    }\n    self.objectTracking = objectTracking\n    return objectTracking\n}",
      "language" : "swift"
    },
    {
      "code" : "Task {\n    let objectTracking = await appState.configureAndRunObjectTracking()\n    guard let objectTracking else {\n        return\n    }\n    \n    \/\/ Wait for object anchor updates.\n    for await anchorUpdate in objectTracking.anchorUpdates {\n        let anchor = anchorUpdate.anchor\n        let referenceObject = anchor.referenceObject\n        \n        switch anchorUpdate.event {\n        case .added: \n            \/\/ The system detects a new object anchor.\n            print(\"Added: \\(anchor)\")\n        case .updated:\n            if anchor.isTracked {\n                \/\/ The update for the detected anchor.\n                print(\"Updated tracked anchor: \\(anchor)\")\n            } else {\n                \/\/ The system is no longer tracking the object anchor.\n                print(\"Anchor is untracked: \\(anchor)\")\n            }\n        case .removed: \n            \/\/ The system removed the object anchor.\n            print(\"Removed: \\(anchor)\")\n        }\n    }\n}",
      "language" : "swift"
    },
    {
      "code" : "var trackingConfiguration = ObjectTrackingProvider.TrackingConfiguration()",
      "language" : "swift"
    },
    {
      "code" : "trackingConfiguration.maximumInstancesPerReferenceObject = 2",
      "language" : "swift"
    },
    {
      "code" : "dataProvider = ObjectTrackingProvider(referenceObjects: referenceObjects,\n                                      trackingConfiguration: trackingConfiguration)",
      "language" : "swift"
    },
    {
      "code" : "do {\n    \/\/ Begin an `ARKitSession` with the provider.\n    try await arkitSession.run([dataProvider])\n} catch {\n    print(\"Error: \\(error)\")\n    return nil\n}",
      "language" : "swift"
    }
  ],
  "contentHash" : "d62be0e4045be3afe50b7dbaa66d937882d4e71fed0d6a4e2a3a49fddaa855cf",
  "crawledAt" : "2025-12-02T17:53:58Z",
  "id" : "EC7F1757-08F4-411C-B920-019DF6D7115D",
  "kind" : "article",
  "language" : "swift",
  "overview" : "## Overview\n\nYou can use reference objects in your visionOS app to track real-world objects in a person’s surroundings. With this capability, you can attach virtual content to those real-world objects to create engaging experiences. For example, with a reference object, you can track a household item and add virtual content to it, like highlighting a part and showing how to fix it.\n\nTo create a reference object, first, you obtain a 3D model asset, train a machine learning model with that 3D model asset in Create ML, and then import the resulting reference object file into your app. You can use ARKit to import the reference object file, track objects and handle changes to the scene, and adjust the object-tracking properties.\n\nFor more information about creating a reference object file, see [doc:\/\/com.apple.visionOS\/documentation\/visionOS\/implementing-object-tracking-in-your-visionOS-app].\n\n### Import the reference object file\n\nARKit offers two methods for importing a reference object file. In the first method, you include the reference object file in your Xcode project, and your app loads it directly from the bundle. In the second, the URL-based loader allows your app to load reference object files from other sources, like a website download. For more information, see [https:\/\/developer.apple.com\/documentation\/visionos\/exploring_object_tracking_with_arkit].\n\nYou use an [https:\/\/developer.apple.com\/documentation\/arkit\/objecttrackingprovider] to track your reference object in a spatial location and receive [https:\/\/developer.apple.com\/documentation\/arkit\/objectanchor] updates. `ObjectTrackingProvider` gets the live position and orientation of the real-world object. To receive this data and begin tracking, configure an [https:\/\/developer.apple.com\/documentation\/arkit\/arkitsession].\n\n### Handle changes in the scene\n\nAs your app tracks the reference object file, ARKit sends asynchronous updates when it detects changes in a person’s surroundings. Your app needs to account for those changes and update the scene accordingly. An `anchor` represents the position of your real-world object within Apple Vision Pro. The [https:\/\/developer.apple.com\/documentation\/arkit\/anchorupdate] structure provides events about the anchors, including adding a new anchor, removing an anchor, and updates on an anchor’s pose and tracking state. You can place visualizations at those anchors to render content on your real-world objects.\n\n### Adjust the object-tracking properties for your app\n\nARKit offers [https:\/\/developer.apple.com\/documentation\/bundleresources\/entitlements] for enhanced platform control to create powerful spatial experiences. Specifically for object tracking, you can use the [https:\/\/developer.apple.com\/documentation\/bundleresources\/entitlements\/com_apple_developer_arkit_object-tracking-parameter-adjustment_allow] key to track more objects with a higher frequency.\n\nTo configure the entitlement within your app, select your Xcode project and click the Signing & Capabilities tab. Click the Add Capability button (+), scroll to the Object Tracking Parameter Adjustment option, and double-click it to add it to your app. This creates an entitlement file with the `com.apple.developer.arkit.object-tracking-parameter-adjustment.allow` key.\n\n\n\nFor more information on how to add capabilities in your app, see [https:\/\/developer.apple.com\/documentation\/xcode\/adding-capabilities-to-your-app].\n\n\n\nNext, you need to configure the parameters. Start by initializing a [https:\/\/developer.apple.com\/documentation\/arkit\/objecttrackingprovider\/4380078-init] to configure the object tracking.\n\nWith a tracking configuration in place, you can optimize the detection parameters for your app by adjusting the following properties:\n\nUse `TrackingConfiguration` to adjust the values of these properties in your app.\n\nCreate an `ObjectTrackingProvider`, configuring both your reference objects and the properties for adjustment.\n\nTo begin tracking, create an `ARKitSession` with your `ObjectTrackingProvider`.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/visionOS\/using-a-reference-object-with-arkit\ncrawled: 2025-12-02T17:53:58Z\n---\n\n# Using a reference object with ARKit\n\n**Article**\n\nImport a reference object file and track a real-world object in your visionOS app.\n\n## Overview\n\nYou can use reference objects in your visionOS app to track real-world objects in a person’s surroundings. With this capability, you can attach virtual content to those real-world objects to create engaging experiences. For example, with a reference object, you can track a household item and add virtual content to it, like highlighting a part and showing how to fix it.\n\nTo create a reference object, first, you obtain a 3D model asset, train a machine learning model with that 3D model asset in Create ML, and then import the resulting reference object file into your app. You can use ARKit to import the reference object file, track objects and handle changes to the scene, and adjust the object-tracking properties.\n\nFor more information about creating a reference object file, see [doc:\/\/com.apple.visionOS\/documentation\/visionOS\/implementing-object-tracking-in-your-visionOS-app].\n\n### Import the reference object file\n\nARKit offers two methods for importing a reference object file. In the first method, you include the reference object file in your Xcode project, and your app loads it directly from the bundle. In the second, the URL-based loader allows your app to load reference object files from other sources, like a website download. For more information, see [https:\/\/developer.apple.com\/documentation\/visionos\/exploring_object_tracking_with_arkit].\n\nYou use an [https:\/\/developer.apple.com\/documentation\/arkit\/objecttrackingprovider] to track your reference object in a spatial location and receive [https:\/\/developer.apple.com\/documentation\/arkit\/objectanchor] updates. `ObjectTrackingProvider` gets the live position and orientation of the real-world object. To receive this data and begin tracking, configure an [https:\/\/developer.apple.com\/documentation\/arkit\/arkitsession].\n\n```swift\nfunc configureAndRunObjectTracking() async -> ObjectTrackingProvider? {\n    let referenceObjects = referenceObjectLoader.enabledReferenceObjects\n\n    guard !referenceObjects.isEmpty else {\n        fatalError(\"No reference objects to start tracking\")\n    }\n\n    \/\/ Run a new provider each time when entering the immersive space.\n    let objectTracking = ObjectTrackingProvider(referenceObjects: referenceObjects)\n    do {\n        \/\/ Begin an `ARKitSession` with the provider.\n        try await arkitSession.run([objectTracking])\n    } catch {\n        print(\"Error: \\(error)\")\n        return nil\n    }\n    self.objectTracking = objectTracking\n    return objectTracking\n}\n```\n\n### Handle changes in the scene\n\nAs your app tracks the reference object file, ARKit sends asynchronous updates when it detects changes in a person’s surroundings. Your app needs to account for those changes and update the scene accordingly. An `anchor` represents the position of your real-world object within Apple Vision Pro. The [https:\/\/developer.apple.com\/documentation\/arkit\/anchorupdate] structure provides events about the anchors, including adding a new anchor, removing an anchor, and updates on an anchor’s pose and tracking state. You can place visualizations at those anchors to render content on your real-world objects.\n\n```swift\nTask {\n    let objectTracking = await appState.configureAndRunObjectTracking()\n    guard let objectTracking else {\n        return\n    }\n    \n    \/\/ Wait for object anchor updates.\n    for await anchorUpdate in objectTracking.anchorUpdates {\n        let anchor = anchorUpdate.anchor\n        let referenceObject = anchor.referenceObject\n        \n        switch anchorUpdate.event {\n        case .added: \n            \/\/ The system detects a new object anchor.\n            print(\"Added: \\(anchor)\")\n        case .updated:\n            if anchor.isTracked {\n                \/\/ The update for the detected anchor.\n                print(\"Updated tracked anchor: \\(anchor)\")\n            } else {\n                \/\/ The system is no longer tracking the object anchor.\n                print(\"Anchor is untracked: \\(anchor)\")\n            }\n        case .removed: \n            \/\/ The system removed the object anchor.\n            print(\"Removed: \\(anchor)\")\n        }\n    }\n}\n```\n\n### Adjust the object-tracking properties for your app\n\nARKit offers [https:\/\/developer.apple.com\/documentation\/bundleresources\/entitlements] for enhanced platform control to create powerful spatial experiences. Specifically for object tracking, you can use the [https:\/\/developer.apple.com\/documentation\/bundleresources\/entitlements\/com_apple_developer_arkit_object-tracking-parameter-adjustment_allow] key to track more objects with a higher frequency.\n\n\n\nTo configure the entitlement within your app, select your Xcode project and click the Signing & Capabilities tab. Click the Add Capability button (+), scroll to the Object Tracking Parameter Adjustment option, and double-click it to add it to your app. This creates an entitlement file with the `com.apple.developer.arkit.object-tracking-parameter-adjustment.allow` key.\n\n\n\nFor more information on how to add capabilities in your app, see [https:\/\/developer.apple.com\/documentation\/xcode\/adding-capabilities-to-your-app].\n\n\n\nNext, you need to configure the parameters. Start by initializing a [https:\/\/developer.apple.com\/documentation\/arkit\/objecttrackingprovider\/4380078-init] to configure the object tracking.\n\n```swift\nvar trackingConfiguration = ObjectTrackingProvider.TrackingConfiguration()\n```\n\nWith a tracking configuration in place, you can optimize the detection parameters for your app by adjusting the following properties:\n\n\n\nUse `TrackingConfiguration` to adjust the values of these properties in your app.\n\n```swift\ntrackingConfiguration.maximumInstancesPerReferenceObject = 2\n```\n\nCreate an `ObjectTrackingProvider`, configuring both your reference objects and the properties for adjustment.\n\n```swift\ndataProvider = ObjectTrackingProvider(referenceObjects: referenceObjects,\n                                      trackingConfiguration: trackingConfiguration)\n```\n\nTo begin tracking, create an `ARKitSession` with your `ObjectTrackingProvider`.\n\n```swift\ndo {\n    \/\/ Begin an `ARKitSession` with the provider.\n    try await arkitSession.run([dataProvider])\n} catch {\n    print(\"Error: \\(error)\")\n    return nil\n}\n```\n\n\n\n## Object tracking within an app\n\n- **Using a reference object with Reality Composer Pro**: Import a reference object file to track a real-world object in your visionOS app.\n- **Using a reference object with RealityKit**: Import a reference object file to track a real-world object in your visionOS app.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Import a reference object file to track a real-world object in your visionOS app.",
          "name" : "Using a reference object with Reality Composer Pro",
          "url" : "https:\/\/developer.apple.com\/documentation\/visionOS\/using-a-reference-object-with-reality-composer-pro"
        },
        {
          "description" : "Import a reference object file to track a real-world object in your visionOS app.",
          "name" : "Using a reference object with RealityKit",
          "url" : "https:\/\/developer.apple.com\/documentation\/visionOS\/using-a-reference-object-with-realitykit"
        }
      ],
      "title" : "Object tracking within an app"
    }
  ],
  "source" : "appleJSON",
  "title" : "Using a reference object with ARKit",
  "url" : "https:\/\/developer.apple.com\/documentation\/visionOS\/using-a-reference-object-with-arkit"
}