{
  "abstract" : "Enhance your visionOS app by adding an immersive space using RealityKit.",
  "codeExamples" : [

  ],
  "contentHash" : "38effd33d9bb7211c0a3890114b63475cfef445028a1deed6021920033d653ba",
  "crawledAt" : "2025-12-02T16:23:15Z",
  "id" : "F6854092-64D5-43F4-9ED5-605AAF3CD7F7",
  "kind" : "class",
  "overview" : "visionOS  Introductory visionOS samples  Creating an immersive space in visionOS  Introductory visionOS samples  Creating an immersive space in visionOS Sample CodeCreating an immersive space in visionOSEnhance your visionOS app by adding an immersive space using RealityKit. Download visionOS 2.0+Xcode 16.0+OverviewThis sample code project demonstrates how to create an ImmersiveSpace in visionOS, showcasing a collection of rocks orbiting around a person, like the scene in the following video:\n\nThe TurnTableSystem runs the core functionality to manage the rotational dynamics of entities through the TurnTableComponent, which defines the speed and rotation axis. The Entity class extends with a method to populate the immersive space with 3D rock entities and then apply a random transformation to create a halo effect. The ImmersiveView integrates these features and showcases the potential of SwiftUI and RealityKit to build an exciting augmented reality experience.\n\nThe sample creates a custom system and corresponding component to apply a series of random rotations to the content in the immersive environment, resulting in a collection of objects that orbit around a person.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/visionos\/creating-immersive-spaces-in-visionos-with-swiftui\ncrawled: 2025-12-02T16:23:15Z\n---\n\n# Creating an immersive space in visionOS | Apple Developer Documentation\n\n- [ visionOS ](\/documentation\/visionos)\n\n- [ Introductory visionOS samples ](\/documentation\/visionos\/introductory-visionos-samples)\n\n- [ Creating an immersive space in visionOS ](\/documentation\/visionos\/creating-immersive-spaces-in-visionos-with-swiftui)\n\n- [ Introductory visionOS samples ](\/documentation\/visionos\/introductory-visionos-samples)\n\n-  Creating an immersive space in visionOS \n\nSample Code# Creating an immersive space in visionOS\n\nEnhance your visionOS app by adding an immersive space using RealityKit.[ Download ](https:\/\/docs-assets.developer.apple.com\/published\/66347c531199\/CreatingImmersiveSpacesInVisionOSWithSwiftUI.zip)visionOS 2.0+Xcode 16.0+## [Overview](\/documentation\/visionos\/creating-immersive-spaces-in-visionos-with-swiftui#Overview)\n\nThis sample code project demonstrates how to create an [`ImmersiveSpace`](\/documentation\/SwiftUI\/ImmersiveSpace) in visionOS, showcasing a collection of rocks orbiting around a person, like the scene in the following video:\n\n Video with custom controls.  Content description: A screen recording of a visionOS app in Simulator that has one translucent window and a series of 3D rock entities rotating around the user. [ Play ](#)The `TurnTableSystem` runs the core functionality to manage the rotational dynamics of entities through the `TurnTableComponent`, which defines the speed and rotation axis. The `Entity` class extends with a method to populate the immersive space with 3D rock entities and then apply a random transformation to create a halo effect. The `ImmersiveView` integrates these features and showcases the potential of SwiftUI and RealityKit to build an exciting augmented reality experience.\n\n### [Create the turntable system](\/documentation\/visionos\/creating-immersive-spaces-in-visionos-with-swiftui#Create-the-turntable-system)\n\nThe sample creates a custom system and corresponding component to apply a series of random rotations to the content in the immersive environment, resulting in a collection of objects that orbit around a person.\n\n\n\n```\nimport SwiftUI\nimport RealityKit\n\n\nstruct TurnTableComponent: Component {\n    \/\/\/ The duration of the orbit effect.\n    var time: TimeInterval = 0\n           \n    \/\/\/ The speed at which the entity moves over time.\n    var speed: TimeInterval\n           \n    \/\/\/ The axis that the object orbits around.\n    var axis: SIMD3<Float>\n           \n    \/\/\/ Initialize the turntable component by setting the speed and axis variables.\n    init(speed: TimeInterval = 1.0, axis: SIMD3<Float> = [0, 1, 0]) {\n        self.speed = speed\n        self.axis = axis\n    }\n}\n\n```\n\nThe `TurnTableComponent` stores the time, speed, and axis information that decides how each of the entities rotates over time.\n\nThe `TurnTableSystem` checks the current scene for any rendered content that contains a `TurnTableComponent`. If it detects the component, the system applies the value of `deltaTime` to the component’s `time` value and sets the orientation value to the component’s `axis` variable.\n\n\n\n```\nimport SwiftUI\nimport RealityKit\n\n\nstruct TurnTableSystem: System {\n    \/\/\/ A value to check whether the entity has the required component.\n    static let query = EntityQuery(where: .has(TurnTableComponent.self))\n\n\n    \/\/\/ Initialize the system with the RealityKit scene.\n    init(scene: RealityKit.Scene) { }\n\n\n    \/\/ Update the entities to apply the time value and orientation.\n    func update(context: SceneUpdateContext) {\n        \/\/ Iterate over entities that match the query and are currently rendering.\n        for entity in context.entities(matching: Self.query, updatingSystemWhen: .rendering) {\n            \/\/\/ The variable to get the `TurnTableComponent` from the entity.\n            var comp = entity.components[TurnTableComponent.self]!\n\n\n            \/\/ Set the time variable to increase as time passes.\n            comp.time += context.deltaTime\n\n\n            \/\/ Update the component in the entity.\n            entity.components[TurnTableComponent.self] = comp\n\n\n            \/\/ Adjust the orientation to update the angle, speed, and axis of rotation.\n            entity.setOrientation(simd_quatf(angle: Float(0.1 * comp.speed), axis: comp.axis), relativeTo: entity)\n        }\n    }\n}\n\n```\n\n### [Extend the entity class](\/documentation\/visionos\/creating-immersive-spaces-in-visionos-with-swiftui#Extend-the-entity-class)\n\nThe sample extends the [`Entity`](\/documentation\/RealityKit\/Entity) class to load a file as a model component and apply the model for the halo effect.\n\n\n\n```\nimport RealityKit\n\n\nextension Entity {\n    \/\/\/ The name of the 3D model resource file.\n    static var fileName: String = \"rock\"\n           \n    \/\/\/ The model component loads a given filename.\n    static var rockModel: ModelComponent = {\n        let rock = try! Entity.loadModel(named: fileName)\n        return rock.model!\n    }()\n\n\n    \/\/...\n}\n\n```\n\nTo create a halo effect, the sample extends the `Entity` class with a custom method called `addHalo()`. The method loops through the total number of rocks that the app creates, and makes an array of entities with random size, speed, and rotation.\n\n\n\n```\nimport RealityKit\n\n\nextension Entity {\n    \/\/ ...\n    \n    \/\/\/ Assign a series of random rotations, translations, and scales for each rock model.\n    func addHalo() {\n        \/\/\/ The number of models to generate.\n        let modelCount: Int = 50\n\n\n        \/\/ Create each model and apply a random transform, scale, and time interval.\n        for _ in 0..<modelCount {\n            \/\/\/ The dedicated entity for the model.\n            let entity = Entity()\n\n\n            \/\/ Assign the model as a component.\n            entity.components.set(Self.rockModel)\n\n\n            \/\/\/ A transform that contains a random rotation along the y-axis.\n            let rotate0 = Transform(rotation: simd_quatf(angle: .random(in: 0...(2 * .pi)), axis: [0, 1, 0])).matrix\n\n\n            \/\/\/ A transform that adjusts along the z-axis.\n            let translate = Transform(translation: [0, 0, 1]).matrix\n\n\n            \/\/\/ A transform that contains a random rotation along the y-axis.\n            let rotate1 = Transform(rotation: simd_quatf(angle: .random(in: 0...(2 * .pi)), axis: [0, 1, 0])).matrix\n\n\n            \/\/\/ A transform that contains a random rotation along the x-axis.\n            let rotate2 = Transform(rotation: simd_quatf(angle: .random(in: (-.pi \/ 9)...(.pi \/ 9)), axis: [1, 0, 0])).matrix\n\n\n            \/\/ Assign the entity a transform based on the matrix product of each rotation and translation variable.\n            entity.transform = Transform(matrix: rotate1 * rotate2 * translate * rotate0)\n\n\n            \/\/ Assign the entity a random scale along all axes.\n            entity.setScale(SIMD3(repeating: 0.001 * .random(in: 0.5...2)), relativeTo: entity)\n\n\n            \/\/ Assign the entity's `TurnTableComponent` a random speed at which to rotate along the axis.\n            entity.components.set(TurnTableComponent(\n                speed: .random(in: 0.001...0.1),\n                axis: [\n                    .random(in: -1...1),\n                    .random(in: -1...1),\n                    .random(in: -1...1)]\n            ))\n\n\n            \/\/ Add the entity as a subentity.\n            self.addChild(entity)\n        }\n    }\n}\n\n```\n\nThe method constructs and returns a single entity that contains multiple subentities, each with a model that applies unique rotations and speed through the `TurnTableComponent`.\n\n### [Create the immersive view](\/documentation\/visionos\/creating-immersive-spaces-in-visionos-with-swiftui#Create-the-immersive-view)\n\nThe sample defines a custom view for an immersive space that creates a single entity and applies the `addHalo()` method.\n\n\n\n```\nimport SwiftUI\nimport RealityKit\n\n\nstruct ImmersiveView: View {\n    \/\/\/ The average human height in meters.\n    let avgHeight: Float = 1.70\n\n\n    \/\/\/ The rate of movement at which the rocks orbit.\n    let speed: TimeInterval = 0.03\n\n\n    var body: some View {\n        \/\/ Initiate a `RealityView` to create a ring\n        \/\/ of rocks to orbit around a person.\n        RealityView { content in\n            \/\/\/ The entity to contain the models.\n            let rootEntity = Entity()\n\n\n            \/\/ Set the y-axis position to the average human height.\n            rootEntity.position.y += avgHeight\n\n\n            \/\/ Create the halo effect with the `addHalo` method.\n            rootEntity.addHalo()\n\n\n            \/\/ Set the rotation speed for the rocks.\n            rootEntity.components.set(TurnTableComponent(speed: speed))\n\n\n            \/\/ Register the `TurnTableSystem` to handle the rotation logic.\n            TurnTableSystem.registerSystem()\n\n\n            \/\/ Add the entity to the view.\n            content.add(rootEntity)\n        }\n    }\n}\n\n```\n\nThe `rootEntity` includes a `TurnTableComponent` to enable an orbit effect similar to the collective rotation of all the rock entities.\n\n### [Run the immersive scene](\/documentation\/visionos\/creating-immersive-spaces-in-visionos-with-swiftui#Run-the-immersive-scene)\n\nThe `Immersion` app structure includes an `ImmersiveSpace` entry to the scene to include in the app’s environment.\n\n\n\n```\nimport SwiftUI\n\n\n@main\nstruct Immersion: App {\n    var body: some Scene {\n        WindowGroup {\n            MainView()\n        }\n        \n        \/\/ Defines an immersive space as a part of the scene.\n        ImmersiveSpace(id: \"ImmersiveScene\") {\n            ImmersiveView()\n        }\n    }\n}\n\n```\n\nThe sample’s main view uses the [`openImmersiveSpace`](\/documentation\/SwiftUI\/EnvironmentValues\/openImmersiveSpace) instance property to call the immersive space that the `Immersion` app structure defines.\n\n\n\n```\nimport SwiftUI\n\n\nstruct MainView: View {\n    \/\/\/ The environment value to get the `OpenImmersiveSpaceAction` instance.\n    @Environment(.openImmersiveSpace) var openImmersiveSpace\n\n\n    var body: some View {\n        \/\/ Displays a line of text and\n        \/\/ opens a new `ImmersiveSpace` environment.\n        Text(\"Immersive Content Example\")\n            .onAppear {\n                Task {\n                    await openImmersiveSpace(id: \"ImmersiveScene\")\n                }\n            }\n    }\n}\n\n\n\n```\n\n## [See Also](\/documentation\/visionos\/creating-immersive-spaces-in-visionos-with-swiftui#See-Also)\n\n#### [Related samples](\/documentation\/visionos\/creating-immersive-spaces-in-visionos-with-swiftui#Related-samples)\n\n[Combining 2D and 3D views in an immersive app](\/documentation\/RealityKit\/combining-2d-and-3d-views-in-an-immersive-app)Use attachments to place 2D content relative to 3D content in your visionOS app.[Building an immersive experience with RealityKit](\/documentation\/RealityKit\/building-an-immersive-experience-with-realitykit)Use systems and postprocessing effects to create a realistic underwater scene.[Construct an immersive environment for visionOS](\/documentation\/RealityKit\/construct-an-immersive-environment-for-visionOS)Build efficient custom worlds for your app.[Creating an interactive 3D model in visionOS](\/documentation\/visionos\/creating-an-interactable-3d-model-in-visionos)Display an interactive car model using gestures in a reality view.#### [Related articles](\/documentation\/visionos\/creating-immersive-spaces-in-visionos-with-swiftui#Related-articles)\n\n[Understanding the modular architecture of RealityKit](\/documentation\/visionOS\/understanding-the-realitykit-modular-architecture)Learn how everything fits together in RealityKit.[Creating fully immersive experiences in your app](\/documentation\/visionOS\/creating-fully-immersive-experiences)Build fully immersive experiences by combining spaces with content you create using RealityKit or Metal.[Implementing systems for entities in a scene](\/documentation\/RealityKit\/implementing-systems-for-entities-in-a-scene)Apply behaviors and physical effects to the objects and characters in a RealityKit scene with the Entity Component System (ECS).",
  "sections" : [
    {
      "content" : "",
      "title" : "Overview"
    },
    {
      "content" : "",
      "title" : "See Also"
    }
  ],
  "source" : "appleWebKit",
  "title" : "Creating an immersive space in visionOS | Apple Developer Documentation",
  "url" : "https:\/\/developer.apple.com\/documentation\/visionos\/creating-immersive-spaces-in-visionos-with-swiftui"
}