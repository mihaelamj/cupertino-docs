{
  "abstract" : "Update the adjustable parameters of a 3D model in visionOS.",
  "codeExamples" : [
    {
      "code" : "import RealityKit\n\nextension Entity {\n    public func updateMaterials(_ update: (inout Material) -> Void) {\n        \/\/ Call recursive method to all child entities.\n        for child in children {\n            child.updateMaterials(update)\n        }\n\n        \/\/ Apply the new values to the component material.\n        if var comp = components[ModelComponent.self] {\n            comp.materials = comp.materials.map { material in\n            var copy = material\n            update(&copy)\n            return copy\n        }\n            components.set(comp)\n        }\n    }\n}",
      "language" : "swift"
    },
    {
      "code" : "import SwiftUI\nimport RealityKit\n\nstruct GlassView: View {\n    \/\/\/ The default roughness value of the material.\n    @State var roughness: Float = 0.2\n\n    \/\/\/ The default eta parameter for refraction.\n    @State var eta: Float = 0.5\n\n    \/\/\/ The entity to store the dragon model.\n    @State var entity: Entity?\n\n    \/\/ ...\n}",
      "language" : "swift"
    },
    {
      "code" : "var body: some View {\n    HStack {\n        RealityView { content in\n            do {\n                \/\/ Load the model from the filename.\n                let fileName = \"DragonGlass.usda\"\n                let entity = try await Entity(named: fileName)\n                \n                \/\/ Adjust the scale and position of the model.\n                let scale: Float = 2\n                let position: SIMD3<Float> = [0.1, -0.15, 0.0]\n                entity.scale *= scale\n                entity.position += position\n\n                \/\/ Add the entity to the `RealityView`.\n                content.add(entity)\n\n                \/\/ Set `entity` to the dragon model.\n                self.entity = entity\n            } catch {\n                print(\"Error loading model: \\(error)\")\n            }\n        } update: { _ in\n\n            \/\/ ...\n\n        }\n    }\n}",
      "language" : "swift"
    },
    {
      "code" : "var body: some View {\n    HStack {      \n        RealityView { content in\n\n            \/\/ ...\n\n        } update: { _ in\n            entity?.updateMaterials({ material in\n                \/\/ Obtain the current material of the dragon model.\n                guard var mat = material as? ShaderGraphMaterial else { return }\n\n                do {\n                    try mat.setParameter(name: \"roughness\", value: .float(roughness))\n                    try mat.setParameter(name: \"eta\", value: .float(eta))\n                } catch {\n                    print(\"Error setting parameters: \\(error)\")\n                }\n\n                \/\/ Update the dragon model's material.\n                material = mat\n            })\n        }\n    \n        \/\/ ...\n    }\n}",
      "language" : "swift"
    },
    {
      "code" : "var body: some View {\n    HStack {\n        \/\/ ...\n\n        Divider()\n\n        \/\/ Set up a slider in the window to update the `roughness`\n        \/\/ and `eta` parameter to a value between 0 and 1.\n        VStack {\n            HStack {\n                Text(\"Roughness\"); Spacer(); Text(\"\\(roughness)\")\n            }\n            Slider(value: $roughness, in: 0...1)\n\n            Divider()\n\n            HStack {\n                Text(\"ETA:\"); Spacer(); Text(\"\\(eta)\")\n            }\n            Slider(value: $eta, in: 0...1)\n        }.frame(maxWidth: 200)\n    }.padding()\n}",
      "language" : "swift"
    }
  ],
  "contentHash" : "8a4f705316bfd8ba42730f3c44460c4f24f055193f546e46cd8c6c1686ff7611",
  "crawledAt" : "2025-12-02T17:48:54Z",
  "id" : "F2ED2C75-6ED0-4831-A53E-8B66857AED4F",
  "kind" : "unknown",
  "language" : "swift",
  "overview" : "## Overview\n\nThis sample app creates and displays a 3D dragon model within visionOS, using Reality Composer Pro. While the sample focuses on modifying the dragon’s adjustable glass material (such as its roughness and refraction), you can also modify the adjustables for other material instances to allow dynamic customization for your visionOS app.\n\nThe app splits into two parts in its main view:\n\n\n\n### Set up the shader graph\n\nThe shader graph for the dragon model includes two modifiable parameters: `roughness` and `eta`. These control the model’s surface roughness and refraction, respectively, as the following image shows:\n\n\n\nThese parameters connect through various nodes, ultimately feeding into a `RealitykitEnvironmentRadiance` node. This setup allows dynamic adjustment of the dragon’s appearance.\n\n### Update the component material\n\nTo handle updates to the dragon model, the app creates the `updateMaterials(_:)` method, which employs a recursive approach to update all child entities that the parent entity manages. Then the app applies the `update` closure to each material within the component, to update those materials:\n\n### Set up the main view\n\nTo control the material properties of the 3D glass model, the app initializes variables for the default roughness value, eta parameter for refraction, and entity instance of the dragon model in the `GlassView` structure:\n\nWithin the main body of `GlassView`, the app creates a reality view within an `HStack`. The app loads the model by its filename and adjusts its scale and position, then adds the model to the RealityKit content:\n\nThe view enables real-time material updates using the optional `update()` closure of the reality view. The app calls `updateMaterials(_:)` on the entity to modify the shader graph material parameters:\n\nWithin the closure that the app passes into the method, the app tries to set the `roughness` and `eta` parameter into the [doc:\/\/com.apple.documentation\/documentation\/RealityKit\/ShaderGraphMaterial] to update the dragon model.\n\nThe view incorporates a [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/Divider] structure to separate the reality view, which houses the dragon model, from the `VStack`, which houses sliders that enable interactive adjustment of the `roughness` and `eta` values, to modify the model’s visual appearance:",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/visionos\/implementing-adjustable-material-in-visionos\ncrawled: 2025-12-02T17:48:54Z\n---\n\n# Implementing adjustable material\n\n**Sample Code**\n\nUpdate the adjustable parameters of a 3D model in visionOS.\n\n## Overview\n\nThis sample app creates and displays a 3D dragon model within visionOS, using Reality Composer Pro. While the sample focuses on modifying the dragon’s adjustable glass material (such as its roughness and refraction), you can also modify the adjustables for other material instances to allow dynamic customization for your visionOS app.\n\nThe app splits into two parts in its main view:\n\n- A 3D shape with a glass material\n- Two sliders to adjust modifiables\n\n\n\n### Set up the shader graph\n\nThe shader graph for the dragon model includes two modifiable parameters: `roughness` and `eta`. These control the model’s surface roughness and refraction, respectively, as the following image shows:\n\n\n\nThese parameters connect through various nodes, ultimately feeding into a `RealitykitEnvironmentRadiance` node. This setup allows dynamic adjustment of the dragon’s appearance.\n\n\n\n### Update the component material\n\nTo handle updates to the dragon model, the app creates the `updateMaterials(_:)` method, which employs a recursive approach to update all child entities that the parent entity manages. Then the app applies the `update` closure to each material within the component, to update those materials:\n\n```swift\nimport RealityKit\n\nextension Entity {\n    public func updateMaterials(_ update: (inout Material) -> Void) {\n        \/\/ Call recursive method to all child entities.\n        for child in children {\n            child.updateMaterials(update)\n        }\n\n        \/\/ Apply the new values to the component material.\n        if var comp = components[ModelComponent.self] {\n            comp.materials = comp.materials.map { material in\n            var copy = material\n            update(&copy)\n            return copy\n        }\n            components.set(comp)\n        }\n    }\n}\n```\n\n### Set up the main view\n\nTo control the material properties of the 3D glass model, the app initializes variables for the default roughness value, eta parameter for refraction, and entity instance of the dragon model in the `GlassView` structure:\n\n```swift\nimport SwiftUI\nimport RealityKit\n\nstruct GlassView: View {\n    \/\/\/ The default roughness value of the material.\n    @State var roughness: Float = 0.2\n\n    \/\/\/ The default eta parameter for refraction.\n    @State var eta: Float = 0.5\n\n    \/\/\/ The entity to store the dragon model.\n    @State var entity: Entity?\n\n    \/\/ ...\n}\n```\n\nWithin the main body of `GlassView`, the app creates a reality view within an `HStack`. The app loads the model by its filename and adjusts its scale and position, then adds the model to the RealityKit content:\n\n```swift\nvar body: some View {\n    HStack {\n        RealityView { content in\n            do {\n                \/\/ Load the model from the filename.\n                let fileName = \"DragonGlass.usda\"\n                let entity = try await Entity(named: fileName)\n                \n                \/\/ Adjust the scale and position of the model.\n                let scale: Float = 2\n                let position: SIMD3<Float> = [0.1, -0.15, 0.0]\n                entity.scale *= scale\n                entity.position += position\n\n                \/\/ Add the entity to the `RealityView`.\n                content.add(entity)\n\n                \/\/ Set `entity` to the dragon model.\n                self.entity = entity\n            } catch {\n                print(\"Error loading model: \\(error)\")\n            }\n        } update: { _ in\n\n            \/\/ ...\n\n        }\n    }\n}\n```\n\nThe view enables real-time material updates using the optional `update()` closure of the reality view. The app calls `updateMaterials(_:)` on the entity to modify the shader graph material parameters:\n\n```swift\nvar body: some View {\n    HStack {      \n        RealityView { content in\n\n            \/\/ ...\n\n        } update: { _ in\n            entity?.updateMaterials({ material in\n                \/\/ Obtain the current material of the dragon model.\n                guard var mat = material as? ShaderGraphMaterial else { return }\n\n                do {\n                    try mat.setParameter(name: \"roughness\", value: .float(roughness))\n                    try mat.setParameter(name: \"eta\", value: .float(eta))\n                } catch {\n                    print(\"Error setting parameters: \\(error)\")\n                }\n\n                \/\/ Update the dragon model's material.\n                material = mat\n            })\n        }\n    \n        \/\/ ...\n    }\n}\n```\n\nWithin the closure that the app passes into the method, the app tries to set the `roughness` and `eta` parameter into the [doc:\/\/com.apple.documentation\/documentation\/RealityKit\/ShaderGraphMaterial] to update the dragon model.\n\nThe view incorporates a [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/Divider] structure to separate the reality view, which houses the dragon model, from the `VStack`, which houses sliders that enable interactive adjustment of the `roughness` and `eta` values, to modify the model’s visual appearance:\n\n```swift\nvar body: some View {\n    HStack {\n        \/\/ ...\n\n        Divider()\n\n        \/\/ Set up a slider in the window to update the `roughness`\n        \/\/ and `eta` parameter to a value between 0 and 1.\n        VStack {\n            HStack {\n                Text(\"Roughness\"); Spacer(); Text(\"\\(roughness)\")\n            }\n            Slider(value: $roughness, in: 0...1)\n\n            Divider()\n\n            HStack {\n                Text(\"ETA:\"); Spacer(); Text(\"\\(eta)\")\n            }\n            Slider(value: $eta, in: 0...1)\n        }.frame(maxWidth: 200)\n    }.padding()\n}\n```\n\n## Building materials\n\n- **Generating procedural textures**: Display a 3D model that generates procedural textures in a reality view.\n- **Displaying a stereoscopic image**: Build a stereoscopic image by applying textures to the left and right eye in a shader graph material.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Display a 3D model that generates procedural textures in a reality view.",
          "name" : "Generating procedural textures",
          "url" : "https:\/\/developer.apple.com\/documentation\/visionOS\/generating-procedural-textures-in-visionos"
        },
        {
          "description" : "Build a stereoscopic image by applying textures to the left and right eye in a shader graph material.",
          "name" : "Displaying a stereoscopic image",
          "url" : "https:\/\/developer.apple.com\/documentation\/visionOS\/displaying-a-stereoscopic-image-in-visionos"
        }
      ],
      "title" : "Building materials"
    }
  ],
  "source" : "appleJSON",
  "title" : "Implementing adjustable material",
  "url" : "https:\/\/developer.apple.com\/documentation\/visionos\/implementing-adjustable-material-in-visionos"
}