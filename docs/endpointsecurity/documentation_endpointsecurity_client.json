{
  "abstract" : "An opaque type that maintains Endpoint Security client state, and functions related to this type.",
  "codeExamples" : [
    {
      "code" : "\/\/ Create the client.\nes_client_t *client = NULL;\nes_new_client_result_t newClientResult =\nes_new_client(&client,\n              ^(es_client_t * client, const es_message_t * message) {\n    switch (message->event_type) {\n        case ES_EVENT_TYPE_AUTH_EXEC:\n            es_respond_auth_result(client, message, ES_AUTH_RESULT_ALLOW, true);\n            break;\n        default:\n            panic(\"Found unexpected event type: %i\", message->event_type);\n            break;\n    }\n});\n\n\/\/ Handle any errors encountered while creating the client.\nswitch (newClientResult) {\n    case ES_NEW_CLIENT_RESULT_SUCCESS:\n        \/\/ Client created successfully; continue.\n        break;\n    case ES_NEW_CLIENT_RESULT_ERR_NOT_ENTITLED:\n        panic(\"Extension is missing entitlement.\");\n        break;\n    case ES_NEW_CLIENT_RESULT_ERR_NOT_PRIVILEGED:\n        panic (\"Extension is not running as root.\");\n        break;\n    case ES_NEW_CLIENT_RESULT_ERR_NOT_PERMITTED:\n        \/\/ Prompt user to perform Transparency, Consent,\n        \/\/ and Control (TCC) approval.\n        \/\/ This error is recoverable; the user can try again after\n        \/\/ approving the TCC prompt.\n        return YOUR_NEW_CLIENT_ERROR_CODE_PROMPT_TCC;\n        break;\n    case ES_NEW_CLIENT_RESULT_ERR_INVALID_ARGUMENT:\n        panic (\"Invalid argument to es_new_client(); client or handler was null.\");\n        break;\n    case ES_NEW_CLIENT_RESULT_ERR_TOO_MANY_CLIENTS:\n        panic (\"Exceeded maximum number of simultaneously-connected ES clients.\");\n        break;\n    case ES_NEW_CLIENT_RESULT_ERR_INTERNAL:\n        panic (\"Failed to connect to the Endpoint Security subsystem.\");\n        break;\n}\n\n\/\/ Subscribe the client to the ES_EVENT_TYPE_AUTH_EXEC event.\n\/\/ When the client receives a message with this event type, it must authorize\n\/\/ (allow or deny) the event.\nes_event_type_t eventTypes[1] = { ES_EVENT_TYPE_AUTH_EXEC };\nes_return_t subscribeResult = es_subscribe(client, eventTypes, sizeof(eventTypes));\nif (subscribeResult != ES_RETURN_SUCCESS) {\n    panic (\"Client failed to subscribe to event.\"); \n}\n",
      "language" : "c"
    }
  ],
  "contentHash" : "eb0585bf2fdc55a37ca4c3b47f425292ae78077f0ae4e73254b9974e260fb7ee",
  "crawledAt" : "2025-12-05T03:44:56Z",
  "id" : "4EAA8FA5-55F6-4604-B407-6D74A35EE1B1",
  "kind" : "collection",
  "language" : "swift",
  "module" : "Endpoint Security",
  "overview" : "## Overview\n\nCreate an Endpoint Security client with [doc:\/\/com.apple.endpointsecurity\/documentation\/EndpointSecurity\/es_new_client(_:_:)], then use this client to subscribe to event types of interest to your app or system extension. When Endpoint Security monitors an event your client subscribes to, it sends a message that describes the event to your client. When you no longer need the client, remove it with [doc:\/\/com.apple.endpointsecurity\/documentation\/EndpointSecurity\/es_delete_client(_:)].\n\nThe following code creates a client and handles any errors returned by [doc:\/\/com.apple.endpointsecurity\/documentation\/EndpointSecurity\/es_new_client(_:_:)]. If client creation succeeds, the code subscribes the client to the [doc:\/\/com.apple.endpointsecurity\/documentation\/EndpointSecurity\/ES_EVENT_TYPE_AUTH_EXEC] event. The handler passed to [doc:\/\/com.apple.endpointsecurity\/documentation\/EndpointSecurity\/es_new_client(_:_:)] allows any such event to proceed.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/endpointsecurity\/client\ncrawled: 2025-12-05T03:44:56Z\n---\n\n# Client\n\n**API Collection**\n\nAn opaque type that maintains Endpoint Security client state, and functions related to this type.\n\n## Overview\n\nCreate an Endpoint Security client with [doc:\/\/com.apple.endpointsecurity\/documentation\/EndpointSecurity\/es_new_client(_:_:)], then use this client to subscribe to event types of interest to your app or system extension. When Endpoint Security monitors an event your client subscribes to, it sends a message that describes the event to your client. When you no longer need the client, remove it with [doc:\/\/com.apple.endpointsecurity\/documentation\/EndpointSecurity\/es_delete_client(_:)].\n\nThe following code creates a client and handles any errors returned by [doc:\/\/com.apple.endpointsecurity\/documentation\/EndpointSecurity\/es_new_client(_:_:)]. If client creation succeeds, the code subscribes the client to the [doc:\/\/com.apple.endpointsecurity\/documentation\/EndpointSecurity\/ES_EVENT_TYPE_AUTH_EXEC] event. The handler passed to [doc:\/\/com.apple.endpointsecurity\/documentation\/EndpointSecurity\/es_new_client(_:_:)] allows any such event to proceed.\n\n```c\n\/\/ Create the client.\nes_client_t *client = NULL;\nes_new_client_result_t newClientResult =\nes_new_client(&client,\n              ^(es_client_t * client, const es_message_t * message) {\n    switch (message->event_type) {\n        case ES_EVENT_TYPE_AUTH_EXEC:\n            es_respond_auth_result(client, message, ES_AUTH_RESULT_ALLOW, true);\n            break;\n        default:\n            panic(\"Found unexpected event type: %i\", message->event_type);\n            break;\n    }\n});\n\n\/\/ Handle any errors encountered while creating the client.\nswitch (newClientResult) {\n    case ES_NEW_CLIENT_RESULT_SUCCESS:\n        \/\/ Client created successfully; continue.\n        break;\n    case ES_NEW_CLIENT_RESULT_ERR_NOT_ENTITLED:\n        panic(\"Extension is missing entitlement.\");\n        break;\n    case ES_NEW_CLIENT_RESULT_ERR_NOT_PRIVILEGED:\n        panic (\"Extension is not running as root.\");\n        break;\n    case ES_NEW_CLIENT_RESULT_ERR_NOT_PERMITTED:\n        \/\/ Prompt user to perform Transparency, Consent,\n        \/\/ and Control (TCC) approval.\n        \/\/ This error is recoverable; the user can try again after\n        \/\/ approving the TCC prompt.\n        return YOUR_NEW_CLIENT_ERROR_CODE_PROMPT_TCC;\n        break;\n    case ES_NEW_CLIENT_RESULT_ERR_INVALID_ARGUMENT:\n        panic (\"Invalid argument to es_new_client(); client or handler was null.\");\n        break;\n    case ES_NEW_CLIENT_RESULT_ERR_TOO_MANY_CLIENTS:\n        panic (\"Exceeded maximum number of simultaneously-connected ES clients.\");\n        break;\n    case ES_NEW_CLIENT_RESULT_ERR_INTERNAL:\n        panic (\"Failed to connect to the Endpoint Security subsystem.\");\n        break;\n}\n\n\/\/ Subscribe the client to the ES_EVENT_TYPE_AUTH_EXEC event.\n\/\/ When the client receives a message with this event type, it must authorize\n\/\/ (allow or deny) the event.\nes_event_type_t eventTypes[1] = { ES_EVENT_TYPE_AUTH_EXEC };\nes_return_t subscribeResult = es_subscribe(client, eventTypes, sizeof(eventTypes));\nif (subscribeResult != ES_RETURN_SUCCESS) {\n    panic (\"Client failed to subscribe to event.\"); \n}\n\n```\n\n## Creating a Client\n\n- **es_new_client(_:_:)**: Creates a new client instance and connects it to the Endpoint Security system.\n- **es_handler_block_t**: A block that handles a message received from Endpoint Security.\n- **es_new_client_result_t**: The result of an attempt to create a new client.\n\n## Destroying a Client\n\n- **es_delete_client(_:)**: Destroys and disconnects a client instance from the Endpoint Security system.\n\n## Subscribing to Events\n\n- **es_subscribe(_:_:_:)**: Subscribes a client to a set of events.\n- **es_subscriptions(_:_:_:)**: Returns a list of the client’s subscriptions.\n- **es_unsubscribe(_:_:_:)**: Unsubscribes the provided client from a set of events.\n- **es_event_type_t**: A type used to identify a message’s event type and subscribe to events of that type.\n- **es_unsubscribe_all(_:)**: Unsubscribes a client from all events.\n\n## Responding to Events\n\n- **es_respond_auth_result(_:_:_:_:)**: Responds to an event that requires an authorization response.\n- **es_auth_result_t**: Values used when responding to an authorization event.\n- **es_respond_flags_result(_:_:_:_:)**: Responds to an event that requires authorization flags as a response.\n- **es_respond_result_t**: Values that indicate the result of responding to a message.\n\n## Managing Cached Results\n\n- **es_clear_cache(_:)**: Clears all cached results for all clients.\n- **es_clear_cache_result_t**: Values that indicate the result of clearing a cache.\n\n## Muting Events\n\n- **es_mute_process(_:_:)**: Suppresses events from a given process.\n- **es_mute_process_events(_:_:_:_:)**: Suppresses a subset of events from a given process.\n- **es_muted_processes_t**: A structure for a set of muted processes.\n- **es_release_muted_processes(_:)**: Frees resources associated with a set of previously-retrieved muted processes.\n- **es_muted_processes_events(_:_:)**: Retrieve a list of all muted processes.\n- **es_mute_path(_:_:_:)**: Suppresses events from executables that match a given path.\n- **es_mute_path_events(_:_:_:_:_:)**: Suppresses a subset of events from executables that match a given path.\n- **es_mute_path_type_t**: The type of a path argument, such as a prefix or a path literal.\n- **es_muted_paths_events(_:_:)**: Retrieve a list of all muted paths.\n- **es_muted_paths_t**: A structure for a set of muted paths.\n- **es_release_muted_paths(_:)**: Frees resources associated with a set of previously-retrieved muted paths.\n\n## Unmuting Events\n\n- **es_unmute_process(_:_:)**: Restores event delivery from a previously-muted process.\n- **es_unmute_process_events(_:_:_:_:)**: Restores event delivery of a subset of events from a previously-muted process.\n- **es_unmute_path(_:_:_:)**: Restores event delivery from a previously-muted path.\n- **es_unmute_path_events(_:_:_:_:_:)**: Restores event delivery of a subset of events from a previously-muted path.\n- **es_mute_path_type_t**: The type of a path argument, such as a prefix or a path literal.\n- **es_unmute_all_paths(_:)**: Restores event delivery from previously-muted paths.\n\n## Deprecated Functions\n\n- **es_muted_processes(_:_:_:)**: Generates a list of muted processes.\n- **es_mute_path_literal(_:_:)**: Suppresses events from executables matching a path literal.\n- **es_mute_path_prefix(_:_:)**: Suppresses events from executables matching a path prefix.\n\n## Supporting Types\n\n- **es_return_t**: Values that indicate the result of an Endpoint Security action that can only succeed or fail.\n\n## Event Monitoring\n\n- **Message**: A type used by Endpoint Security to notify your client when a monitored action occurs.\n- **Event Types**: Types used by messages to deliver details specific to different kinds of Endpoint Security events.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Creates a new client instance and connects it to the Endpoint Security system.",
          "name" : "es_new_client(_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/EndpointSecurity\/es_new_client(_:_:)"
        },
        {
          "description" : "A block that handles a message received from Endpoint Security.",
          "name" : "es_handler_block_t",
          "url" : "https:\/\/developer.apple.com\/documentation\/EndpointSecurity\/es_handler_block_t"
        },
        {
          "description" : "The result of an attempt to create a new client.",
          "name" : "es_new_client_result_t",
          "url" : "https:\/\/developer.apple.com\/documentation\/EndpointSecurity\/es_new_client_result_t"
        }
      ],
      "title" : "Creating a Client"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Destroys and disconnects a client instance from the Endpoint Security system.",
          "name" : "es_delete_client(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/EndpointSecurity\/es_delete_client(_:)"
        }
      ],
      "title" : "Destroying a Client"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Subscribes a client to a set of events.",
          "name" : "es_subscribe(_:_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/EndpointSecurity\/es_subscribe(_:_:_:)"
        },
        {
          "description" : "Returns a list of the client’s subscriptions.",
          "name" : "es_subscriptions(_:_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/EndpointSecurity\/es_subscriptions(_:_:_:)"
        },
        {
          "description" : "Unsubscribes the provided client from a set of events.",
          "name" : "es_unsubscribe(_:_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/EndpointSecurity\/es_unsubscribe(_:_:_:)"
        },
        {
          "description" : "A type used to identify a message’s event type and subscribe to events of that type.",
          "name" : "es_event_type_t",
          "url" : "https:\/\/developer.apple.com\/documentation\/EndpointSecurity\/es_event_type_t"
        },
        {
          "description" : "Unsubscribes a client from all events.",
          "name" : "es_unsubscribe_all(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/EndpointSecurity\/es_unsubscribe_all(_:)"
        }
      ],
      "title" : "Subscribing to Events"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Responds to an event that requires an authorization response.",
          "name" : "es_respond_auth_result(_:_:_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/EndpointSecurity\/es_respond_auth_result(_:_:_:_:)"
        },
        {
          "description" : "Values used when responding to an authorization event.",
          "name" : "es_auth_result_t",
          "url" : "https:\/\/developer.apple.com\/documentation\/EndpointSecurity\/es_auth_result_t"
        },
        {
          "description" : "Responds to an event that requires authorization flags as a response.",
          "name" : "es_respond_flags_result(_:_:_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/EndpointSecurity\/es_respond_flags_result(_:_:_:_:)"
        },
        {
          "description" : "Values that indicate the result of responding to a message.",
          "name" : "es_respond_result_t",
          "url" : "https:\/\/developer.apple.com\/documentation\/EndpointSecurity\/es_respond_result_t"
        }
      ],
      "title" : "Responding to Events"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Clears all cached results for all clients.",
          "name" : "es_clear_cache(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/EndpointSecurity\/es_clear_cache(_:)"
        },
        {
          "description" : "Values that indicate the result of clearing a cache.",
          "name" : "es_clear_cache_result_t",
          "url" : "https:\/\/developer.apple.com\/documentation\/EndpointSecurity\/es_clear_cache_result_t"
        }
      ],
      "title" : "Managing Cached Results"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Suppresses events from a given process.",
          "name" : "es_mute_process(_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/EndpointSecurity\/es_mute_process(_:_:)"
        },
        {
          "description" : "Suppresses a subset of events from a given process.",
          "name" : "es_mute_process_events(_:_:_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/EndpointSecurity\/es_mute_process_events(_:_:_:_:)"
        },
        {
          "description" : "A structure for a set of muted processes.",
          "name" : "es_muted_processes_t",
          "url" : "https:\/\/developer.apple.com\/documentation\/EndpointSecurity\/es_muted_processes_t"
        },
        {
          "description" : "Frees resources associated with a set of previously-retrieved muted processes.",
          "name" : "es_release_muted_processes(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/EndpointSecurity\/es_release_muted_processes(_:)"
        },
        {
          "description" : "Retrieve a list of all muted processes.",
          "name" : "es_muted_processes_events(_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/EndpointSecurity\/es_muted_processes_events(_:_:)"
        },
        {
          "description" : "Suppresses events from executables that match a given path.",
          "name" : "es_mute_path(_:_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/EndpointSecurity\/es_mute_path(_:_:_:)"
        },
        {
          "description" : "Suppresses a subset of events from executables that match a given path.",
          "name" : "es_mute_path_events(_:_:_:_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/EndpointSecurity\/es_mute_path_events(_:_:_:_:_:)"
        },
        {
          "description" : "The type of a path argument, such as a prefix or a path literal.",
          "name" : "es_mute_path_type_t",
          "url" : "https:\/\/developer.apple.com\/documentation\/EndpointSecurity\/es_mute_path_type_t"
        },
        {
          "description" : "Retrieve a list of all muted paths.",
          "name" : "es_muted_paths_events(_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/EndpointSecurity\/es_muted_paths_events(_:_:)"
        },
        {
          "description" : "A structure for a set of muted paths.",
          "name" : "es_muted_paths_t",
          "url" : "https:\/\/developer.apple.com\/documentation\/EndpointSecurity\/es_muted_paths_t"
        },
        {
          "description" : "Frees resources associated with a set of previously-retrieved muted paths.",
          "name" : "es_release_muted_paths(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/EndpointSecurity\/es_release_muted_paths(_:)"
        }
      ],
      "title" : "Muting Events"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Restores event delivery from a previously-muted process.",
          "name" : "es_unmute_process(_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/EndpointSecurity\/es_unmute_process(_:_:)"
        },
        {
          "description" : "Restores event delivery of a subset of events from a previously-muted process.",
          "name" : "es_unmute_process_events(_:_:_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/EndpointSecurity\/es_unmute_process_events(_:_:_:_:)"
        },
        {
          "description" : "Restores event delivery from a previously-muted path.",
          "name" : "es_unmute_path(_:_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/EndpointSecurity\/es_unmute_path(_:_:_:)"
        },
        {
          "description" : "Restores event delivery of a subset of events from a previously-muted path.",
          "name" : "es_unmute_path_events(_:_:_:_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/EndpointSecurity\/es_unmute_path_events(_:_:_:_:_:)"
        },
        {
          "description" : "The type of a path argument, such as a prefix or a path literal.",
          "name" : "es_mute_path_type_t",
          "url" : "https:\/\/developer.apple.com\/documentation\/EndpointSecurity\/es_mute_path_type_t"
        },
        {
          "description" : "Restores event delivery from previously-muted paths.",
          "name" : "es_unmute_all_paths(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/EndpointSecurity\/es_unmute_all_paths(_:)"
        }
      ],
      "title" : "Unmuting Events"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Generates a list of muted processes.",
          "name" : "es_muted_processes(_:_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/EndpointSecurity\/es_muted_processes(_:_:_:)"
        },
        {
          "description" : "Suppresses events from executables matching a path literal.",
          "name" : "es_mute_path_literal(_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/EndpointSecurity\/es_mute_path_literal(_:_:)"
        },
        {
          "description" : "Suppresses events from executables matching a path prefix.",
          "name" : "es_mute_path_prefix(_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/EndpointSecurity\/es_mute_path_prefix(_:_:)"
        }
      ],
      "title" : "Deprecated Functions"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Values that indicate the result of an Endpoint Security action that can only succeed or fail.",
          "name" : "es_return_t",
          "url" : "https:\/\/developer.apple.com\/documentation\/EndpointSecurity\/es_return_t"
        }
      ],
      "title" : "Supporting Types"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "A type used by Endpoint Security to notify your client when a monitored action occurs.",
          "name" : "Message",
          "url" : "https:\/\/developer.apple.com\/documentation\/EndpointSecurity\/message"
        },
        {
          "description" : "Types used by messages to deliver details specific to different kinds of Endpoint Security events.",
          "name" : "Event Types",
          "url" : "https:\/\/developer.apple.com\/documentation\/EndpointSecurity\/event-types"
        }
      ],
      "title" : "Event Monitoring"
    }
  ],
  "source" : "appleJSON",
  "title" : "Client",
  "url" : "https:\/\/developer.apple.com\/documentation\/endpointsecurity\/client"
}