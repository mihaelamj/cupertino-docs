{
  "abstract" : "Creates a new client instance and connects it to the Endpoint Security system.",
  "codeExamples" : [

  ],
  "contentHash" : "7b88af0774c0d18a13ceec56215670d786cc3885281dca32c0715d24557858c3",
  "crawledAt" : "2025-12-01T00:52:26Z",
  "declaration" : {
    "code" : "func es_new_client(_ client: UnsafeMutablePointer<OpaquePointer?>, _ handler: @escaping es_handler_block_t) -> es_new_client_result_t",
    "language" : "swift"
  },
  "id" : "6DE775BC-1DEC-4636-8104-80E27198567B",
  "kind" : "function",
  "module" : "Endpoint Security",
  "overview" : "## Return Value\n\nA result value indicating that indicates either success or the reason why client initialization failed.\n\n## Discussion\n\nThe handler block receives messages serially, and in the order the system delivers them. Returning control from the handler causes Endpoint Security to dequeue the next available message.\n\nYou can respond to a message out of order by returning control before calling one of the `es_respond`-prefixed functions. For out-of-order responding, your handler must copy the message with [doc:\/\/com.apple.endpointsecurity\/documentation\/EndpointSecurity\/es_copy_message(_:)].\n\nTo create a client, your app must have the `com.apple.developer.endpoint-security.client` entitlement. The user also needs to approve your app with Transparency, Consent, and Control (TCC) mechanisms. The user does this in the Security and Privacy pane of System Preferences, by adding the app to Full Disk Access.\n\nWhen you no longer need to receive Endpoint Security messages, destroy the client with [doc:\/\/com.apple.endpointsecurity\/documentation\/EndpointSecurity\/es_delete_client(_:)] to free resources.",
  "platforms" : [
    "macOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/EndpointSecurity\/es_new_client(_:_:)\ncrawled: 2025-12-01T00:52:26Z\n---\n\n# es_new_client(_:_:)\n\n**Function**\n\nCreates a new client instance and connects it to the Endpoint Security system.\n\n## Declaration\n\n```swift\nfunc es_new_client(_ client: UnsafeMutablePointer<OpaquePointer?>, _ handler: @escaping es_handler_block_t) -> es_new_client_result_t\n```\n\n## Parameters\n\n- **client**: A pointer to receive the new client instance.\n- **handler**: The handler to run on all messages sent to this client.\n\n## Return Value\n\nA result value indicating that indicates either success or the reason why client initialization failed.\n\n## Discussion\n\nThe handler block receives messages serially, and in the order the system delivers them. Returning control from the handler causes Endpoint Security to dequeue the next available message.\n\nYou can respond to a message out of order by returning control before calling one of the `es_respond`-prefixed functions. For out-of-order responding, your handler must copy the message with [doc:\/\/com.apple.endpointsecurity\/documentation\/EndpointSecurity\/es_copy_message(_:)].\n\nTo create a client, your app must have the `com.apple.developer.endpoint-security.client` entitlement. The user also needs to approve your app with Transparency, Consent, and Control (TCC) mechanisms. The user does this in the Security and Privacy pane of System Preferences, by adding the app to Full Disk Access.\n\nWhen you no longer need to receive Endpoint Security messages, destroy the client with [doc:\/\/com.apple.endpointsecurity\/documentation\/EndpointSecurity\/es_delete_client(_:)] to free resources.\n\n## Related Documentation\n\n- **com.apple.developer.endpoint-security.client**: The entitlement required to monitor system events for potentially malicious activity.\n\n## Creating a Client\n\n- **es_handler_block_t**: A block that handles a message received from Endpoint Security.\n- **es_new_client_result_t**: The result of an attempt to create a new client.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "The entitlement required to monitor system events for potentially malicious activity.",
          "name" : "com.apple.developer.endpoint-security.client",
          "url" : "https:\/\/developer.apple.com\/documentation\/BundleResources\/Entitlements\/com.apple.developer.endpoint-security.client"
        }
      ],
      "title" : "Related Documentation"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "A block that handles a message received from Endpoint Security.",
          "name" : "es_handler_block_t",
          "url" : "https:\/\/developer.apple.com\/documentation\/EndpointSecurity\/es_handler_block_t"
        },
        {
          "description" : "The result of an attempt to create a new client.",
          "name" : "es_new_client_result_t",
          "url" : "https:\/\/developer.apple.com\/documentation\/EndpointSecurity\/es_new_client_result_t"
        }
      ],
      "title" : "Creating a Client"
    }
  ],
  "source" : "appleJSON",
  "title" : "es_new_client(_:_:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/EndpointSecurity\/es_new_client(_:_:)"
}