{
  "abstract" : "Implement a VPN client for a packet-oriented, custom VPN protocol.",
  "codeExamples" : [

  ],
  "contentHash" : "5958ce05b02498e925ecdcc7da64e51e113366a347ef0db7baeb8b3694b93b0c",
  "crawledAt" : "2025-12-04T09:17:33Z",
  "id" : "DE6C8255-02B8-44B6-B9FD-68FE2B9BCF49",
  "kind" : "collection",
  "language" : "swift",
  "module" : "Network Extension",
  "overview" : "## Overview\n\nA virtual private network (VPN) is a form of network tunnel where a VPN client uses the public Internet to create a connection to a VPN server and then passes private network traffic over that connection. If you want to build a VPN client that implements a packet-oriented, custom VPN protocol, create a packet tunnel provider app extension.\n\nWhen the system starts a VPN configuration that uses your packet tunnel provider, it performs the following steps:\n\nYour provider should open a tunnel to a VPN server and send those packets over that tunnel. Similarly, if your provider receives packets from the tunnel, it should pass them back to the system.\n\nPacket tunnel providers can run in destination IP mode or source-application mode. The latter is one form of per-app VPN (the other form is an [doc:\/\/com.apple.networkextension\/documentation\/NetworkExtension\/app-proxy-provider]).\n\nFor detailed information about packet tunnel provider deployment options, see [doc:\/\/com.apple.documentation\/documentation\/Technotes\/tn3134-network-extension-provider-deployment].",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/networkextension\/packet-tunnel-provider\ncrawled: 2025-12-04T09:17:33Z\n---\n\n# Packet tunnel provider\n\n**API Collection**\n\nImplement a VPN client for a packet-oriented, custom VPN protocol.\n\n## Overview\n\nA virtual private network (VPN) is a form of network tunnel where a VPN client uses the public Internet to create a connection to a VPN server and then passes private network traffic over that connection. If you want to build a VPN client that implements a packet-oriented, custom VPN protocol, create a packet tunnel provider app extension.\n\nWhen the system starts a VPN configuration that uses your packet tunnel provider, it performs the following steps:\n\n- Launches your app extension.\n- Instantiates your packet tunnel provider subclass within that app extension.\n- Starts forwarding packets to your provider.\n\nYour provider should open a tunnel to a VPN server and send those packets over that tunnel. Similarly, if your provider receives packets from the tunnel, it should pass them back to the system.\n\nPacket tunnel providers can run in destination IP mode or source-application mode. The latter is one form of per-app VPN (the other form is an [doc:\/\/com.apple.networkextension\/documentation\/NetworkExtension\/app-proxy-provider]).\n\nFor detailed information about packet tunnel provider deployment options, see [doc:\/\/com.apple.documentation\/documentation\/Technotes\/tn3134-network-extension-provider-deployment].\n\n\n\n## Essentials\n\n- **Network Extensions Entitlement**: The APIs an app can use to customize networking features.\n\n## Packet tunnel provider\n\n- **NEPacketTunnelProvider**: The principal class for a packet tunnel provider app extension.\n- **NETunnelProvider**: An abstract base class shared by NEPacketTunnelProvider and NEAppProxyProvider.\n- **NEProvider**: An abstract base class for all NetworkExtension providers.\n- **NEPacketTunnelNetworkSettings**: The configuration for a packet tunnel provider’s virtual interface.\n- **NETunnelNetworkSettings**: The configuration for a tunnel provider’s virtual interface.\n- **NEEthernetTunnelProvider**: A type that implements the client side of a custom link-layer packet tunneling protocol.\n- **NEEthernetTunnelNetworkSettings**: The network settings for an ethernet-based VPN tunnel.\n\n## Packet handling\n\n- **NEPacketTunnelFlow**: An object you use to read and write packets to and from the tunnel’s virtual interface.\n- **NEPacket**: A network packet and its associated properties.\n- **In-Provider Networking**: Network APIs for use by all types of NetworkExtension providers and by hotspot helpers.\n\n## VPN configuration\n\n- **NETunnelProviderManager**: An object to create and manage the tunnel provider’s VPN configuration.\n- **NEVPNManager**: An object to create and manage a Personal VPN configuration.\n- **NETunnelProviderProtocol**: Configuration parameters for a VPN tunnel.\n- **NEAppRule**: The identity of an app whose traffic is to be routed through the tunnel.\n- **VPN On Demand Rules**: Set up VPN On Demand.\n\n## VPN control\n\n- **NETunnelProviderSession**: An object to start and stop a tunnel connection and get its status.\n- **NEVPNConnection**: An object to start and stop a Personal VPN connection and get its status.\n\n## Virtual private networks\n\n- **Routing your VPN network traffic**: Configure your VPN to include and exclude some network traffic.\n- **Personal VPN**: Create and manage a VPN configuration that uses one of the built-in VPN protocols (IPsec or IKEv2).\n- **App proxy provider**: Implement a VPN client for a flow-oriented, custom VPN protocol.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "The APIs an app can use to customize networking features.",
          "name" : "Network Extensions Entitlement",
          "url" : "https:\/\/developer.apple.com\/documentation\/BundleResources\/Entitlements\/com.apple.developer.networking.networkextension"
        }
      ],
      "title" : "Essentials"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "The principal class for a packet tunnel provider app extension.",
          "name" : "NEPacketTunnelProvider",
          "url" : "https:\/\/developer.apple.com\/documentation\/NetworkExtension\/NEPacketTunnelProvider"
        },
        {
          "description" : "An abstract base class shared by NEPacketTunnelProvider and NEAppProxyProvider.",
          "name" : "NETunnelProvider",
          "url" : "https:\/\/developer.apple.com\/documentation\/NetworkExtension\/NETunnelProvider"
        },
        {
          "description" : "An abstract base class for all NetworkExtension providers.",
          "name" : "NEProvider",
          "url" : "https:\/\/developer.apple.com\/documentation\/NetworkExtension\/NEProvider"
        },
        {
          "description" : "The configuration for a packet tunnel provider’s virtual interface.",
          "name" : "NEPacketTunnelNetworkSettings",
          "url" : "https:\/\/developer.apple.com\/documentation\/NetworkExtension\/NEPacketTunnelNetworkSettings"
        },
        {
          "description" : "The configuration for a tunnel provider’s virtual interface.",
          "name" : "NETunnelNetworkSettings",
          "url" : "https:\/\/developer.apple.com\/documentation\/NetworkExtension\/NETunnelNetworkSettings"
        },
        {
          "description" : "A type that implements the client side of a custom link-layer packet tunneling protocol.",
          "name" : "NEEthernetTunnelProvider",
          "url" : "https:\/\/developer.apple.com\/documentation\/NetworkExtension\/NEEthernetTunnelProvider"
        },
        {
          "description" : "The network settings for an ethernet-based VPN tunnel.",
          "name" : "NEEthernetTunnelNetworkSettings",
          "url" : "https:\/\/developer.apple.com\/documentation\/NetworkExtension\/NEEthernetTunnelNetworkSettings"
        }
      ],
      "title" : "Packet tunnel provider"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "An object you use to read and write packets to and from the tunnel’s virtual interface.",
          "name" : "NEPacketTunnelFlow",
          "url" : "https:\/\/developer.apple.com\/documentation\/NetworkExtension\/NEPacketTunnelFlow"
        },
        {
          "description" : "A network packet and its associated properties.",
          "name" : "NEPacket",
          "url" : "https:\/\/developer.apple.com\/documentation\/NetworkExtension\/NEPacket"
        },
        {
          "description" : "Network APIs for use by all types of NetworkExtension providers and by hotspot helpers.",
          "name" : "In-Provider Networking",
          "url" : "https:\/\/developer.apple.com\/documentation\/NetworkExtension\/in-provider-networking"
        }
      ],
      "title" : "Packet handling"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "An object to create and manage the tunnel provider’s VPN configuration.",
          "name" : "NETunnelProviderManager",
          "url" : "https:\/\/developer.apple.com\/documentation\/NetworkExtension\/NETunnelProviderManager"
        },
        {
          "description" : "An object to create and manage a Personal VPN configuration.",
          "name" : "NEVPNManager",
          "url" : "https:\/\/developer.apple.com\/documentation\/NetworkExtension\/NEVPNManager"
        },
        {
          "description" : "Configuration parameters for a VPN tunnel.",
          "name" : "NETunnelProviderProtocol",
          "url" : "https:\/\/developer.apple.com\/documentation\/NetworkExtension\/NETunnelProviderProtocol"
        },
        {
          "description" : "The identity of an app whose traffic is to be routed through the tunnel.",
          "name" : "NEAppRule",
          "url" : "https:\/\/developer.apple.com\/documentation\/NetworkExtension\/NEAppRule"
        },
        {
          "description" : "Set up VPN On Demand.",
          "name" : "VPN On Demand Rules",
          "url" : "https:\/\/developer.apple.com\/documentation\/NetworkExtension\/vpn-on-demand-rules"
        }
      ],
      "title" : "VPN configuration"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "An object to start and stop a tunnel connection and get its status.",
          "name" : "NETunnelProviderSession",
          "url" : "https:\/\/developer.apple.com\/documentation\/NetworkExtension\/NETunnelProviderSession"
        },
        {
          "description" : "An object to start and stop a Personal VPN connection and get its status.",
          "name" : "NEVPNConnection",
          "url" : "https:\/\/developer.apple.com\/documentation\/NetworkExtension\/NEVPNConnection"
        }
      ],
      "title" : "VPN control"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Configure your VPN to include and exclude some network traffic.",
          "name" : "Routing your VPN network traffic",
          "url" : "https:\/\/developer.apple.com\/documentation\/NetworkExtension\/routing-your-vpn-network-traffic"
        },
        {
          "description" : "Create and manage a VPN configuration that uses one of the built-in VPN protocols (IPsec or IKEv2).",
          "name" : "Personal VPN",
          "url" : "https:\/\/developer.apple.com\/documentation\/NetworkExtension\/personal-vpn"
        },
        {
          "description" : "Implement a VPN client for a flow-oriented, custom VPN protocol.",
          "name" : "App proxy provider",
          "url" : "https:\/\/developer.apple.com\/documentation\/NetworkExtension\/app-proxy-provider"
        }
      ],
      "title" : "Virtual private networks"
    }
  ],
  "source" : "appleJSON",
  "title" : "Packet tunnel provider",
  "url" : "https:\/\/developer.apple.com\/documentation\/networkextension\/packet-tunnel-provider"
}