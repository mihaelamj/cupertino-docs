{
  "abstract" : "Create and manage a VPN configuration that uses one of the built-in VPN protocols (IPsec or IKEv2).",
  "codeExamples" : [

  ],
  "contentHash" : "5349ae4a9648c9547dbc23ae026e245482897a4d6a420325a94b8aed218b6eab",
  "crawledAt" : "2025-12-03T04:57:13Z",
  "id" : "8B27C922-DF9A-4265-AC94-D8DBACC63FCB",
  "kind" : "collection",
  "language" : "swift",
  "module" : "Network Extension",
  "overview" : "## Overview\n\nWith the Personal VPN feature in macOS and iOS, your app can create and manage a VPN configuration that uses one of the built-in VPN protocols (IPsec or IKEv2). The user must explicitly authorize your app the first time it saves a VPN configuration.\n\nBefore starting with Personal VPN, verify that the client is compatible with your VPN server. Use Apple Configurator to create a configuration profile with a VPN payload for your server. If you can connect using the VPN configuration from your configuration profile, you should be able to connect using Personal VPN.\n\nTo get started, call the [doc:\/\/com.apple.networkextension\/documentation\/NetworkExtension\/NEVPNManager\/shared()] class method to access the [doc:\/\/com.apple.networkextension\/documentation\/NetworkExtension\/NEVPNManager] singleton. Then load the VPN configuration by calling [doc:\/\/com.apple.networkextension\/documentation\/NetworkExtension\/NEVPNManager\/loadFromPreferences(completionHandler:)]; if you haven’t previously saved a configuration, this call returns an empty configuration. Modify this configuration as you see fit, and save it using [doc:\/\/com.apple.networkextension\/documentation\/NetworkExtension\/NEVPNManager\/saveToPreferences(completionHandler:)].\n\nOnce you’ve set up a Personal VPN configuration, you can connect and disconnect the VPN using the [doc:\/\/com.apple.networkextension\/documentation\/NetworkExtension\/NEVPNConnection] class. Use the [doc:\/\/com.apple.networkextension\/documentation\/NetworkExtension\/NEVPNManager\/connection] property of [doc:\/\/com.apple.networkextension\/documentation\/NetworkExtension\/NEVPNManager] to get the correct instance of that class.\n\nBoth iOS and macOS also support managed VPN, meaning VPN configurations installed by a configuration profile. Managed VPN configurations take precedence over Personal VPN configurations. If there’s simultaneously a managed VPN configuration and Personal VPN configuration, both configured to act as the default route, the managed tunnel serves as the default route.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/NetworkExtension\/personal-vpn\ncrawled: 2025-12-03T04:57:13Z\n---\n\n# Personal VPN\n\n**API Collection**\n\nCreate and manage a VPN configuration that uses one of the built-in VPN protocols (IPsec or IKEv2).\n\n## Overview\n\nWith the Personal VPN feature in macOS and iOS, your app can create and manage a VPN configuration that uses one of the built-in VPN protocols (IPsec or IKEv2). The user must explicitly authorize your app the first time it saves a VPN configuration.\n\n\n\nBefore starting with Personal VPN, verify that the client is compatible with your VPN server. Use Apple Configurator to create a configuration profile with a VPN payload for your server. If you can connect using the VPN configuration from your configuration profile, you should be able to connect using Personal VPN.\n\nTo get started, call the [doc:\/\/com.apple.networkextension\/documentation\/NetworkExtension\/NEVPNManager\/shared()] class method to access the [doc:\/\/com.apple.networkextension\/documentation\/NetworkExtension\/NEVPNManager] singleton. Then load the VPN configuration by calling [doc:\/\/com.apple.networkextension\/documentation\/NetworkExtension\/NEVPNManager\/loadFromPreferences(completionHandler:)]; if you haven’t previously saved a configuration, this call returns an empty configuration. Modify this configuration as you see fit, and save it using [doc:\/\/com.apple.networkextension\/documentation\/NetworkExtension\/NEVPNManager\/saveToPreferences(completionHandler:)].\n\nOnce you’ve set up a Personal VPN configuration, you can connect and disconnect the VPN using the [doc:\/\/com.apple.networkextension\/documentation\/NetworkExtension\/NEVPNConnection] class. Use the [doc:\/\/com.apple.networkextension\/documentation\/NetworkExtension\/NEVPNManager\/connection] property of [doc:\/\/com.apple.networkextension\/documentation\/NetworkExtension\/NEVPNManager] to get the correct instance of that class.\n\nBoth iOS and macOS also support managed VPN, meaning VPN configurations installed by a configuration profile. Managed VPN configurations take precedence over Personal VPN configurations. If there’s simultaneously a managed VPN configuration and Personal VPN configuration, both configured to act as the default route, the managed tunnel serves as the default route.\n\n\n\n## Essentials\n\n- **Personal VPN Entitlement**: The API an app can use to create and control a custom system VPN configuration.\n\n## VPN configuration\n\n- **NEVPNManager**: An object to create and manage a Personal VPN configuration.\n- **NEVPNProtocolIKEv2**: Settings for an IKEv2 VPN configuration.\n- **NEVPNProtocolIPSec**: Settings for an IPsec VPN configuration.\n- **NEVPNProtocol**: Settings common to both IKEv2 and IPsec VPN configurations.\n- **VPN On Demand Rules**: Set up VPN On Demand.\n\n## VPN control\n\n- **NEVPNConnection**: An object to start and stop a Personal VPN connection and get its status.\n\n## Virtual private networks\n\n- **Routing your VPN network traffic**: Configure your VPN to include and exclude some network traffic.\n- **Packet tunnel provider**: Implement a VPN client for a packet-oriented, custom VPN protocol.\n- **App proxy provider**: Implement a VPN client for a flow-oriented, custom VPN protocol.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "The API an app can use to create and control a custom system VPN configuration.",
          "name" : "Personal VPN Entitlement",
          "url" : "https:\/\/developer.apple.com\/documentation\/BundleResources\/Entitlements\/com.apple.developer.networking.vpn.api"
        }
      ],
      "title" : "Essentials"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "An object to create and manage a Personal VPN configuration.",
          "name" : "NEVPNManager",
          "url" : "https:\/\/developer.apple.com\/documentation\/NetworkExtension\/NEVPNManager"
        },
        {
          "description" : "Settings for an IKEv2 VPN configuration.",
          "name" : "NEVPNProtocolIKEv2",
          "url" : "https:\/\/developer.apple.com\/documentation\/NetworkExtension\/NEVPNProtocolIKEv2"
        },
        {
          "description" : "Settings for an IPsec VPN configuration.",
          "name" : "NEVPNProtocolIPSec",
          "url" : "https:\/\/developer.apple.com\/documentation\/NetworkExtension\/NEVPNProtocolIPSec"
        },
        {
          "description" : "Settings common to both IKEv2 and IPsec VPN configurations.",
          "name" : "NEVPNProtocol",
          "url" : "https:\/\/developer.apple.com\/documentation\/NetworkExtension\/NEVPNProtocol"
        },
        {
          "description" : "Set up VPN On Demand.",
          "name" : "VPN On Demand Rules",
          "url" : "https:\/\/developer.apple.com\/documentation\/NetworkExtension\/vpn-on-demand-rules"
        }
      ],
      "title" : "VPN configuration"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "An object to start and stop a Personal VPN connection and get its status.",
          "name" : "NEVPNConnection",
          "url" : "https:\/\/developer.apple.com\/documentation\/NetworkExtension\/NEVPNConnection"
        }
      ],
      "title" : "VPN control"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Configure your VPN to include and exclude some network traffic.",
          "name" : "Routing your VPN network traffic",
          "url" : "https:\/\/developer.apple.com\/documentation\/NetworkExtension\/routing-your-vpn-network-traffic"
        },
        {
          "description" : "Implement a VPN client for a packet-oriented, custom VPN protocol.",
          "name" : "Packet tunnel provider",
          "url" : "https:\/\/developer.apple.com\/documentation\/NetworkExtension\/packet-tunnel-provider"
        },
        {
          "description" : "Implement a VPN client for a flow-oriented, custom VPN protocol.",
          "name" : "App proxy provider",
          "url" : "https:\/\/developer.apple.com\/documentation\/NetworkExtension\/app-proxy-provider"
        }
      ],
      "title" : "Virtual private networks"
    }
  ],
  "source" : "appleJSON",
  "title" : "Personal VPN",
  "url" : "https:\/\/developer.apple.com\/documentation\/NetworkExtension\/personal-vpn"
}