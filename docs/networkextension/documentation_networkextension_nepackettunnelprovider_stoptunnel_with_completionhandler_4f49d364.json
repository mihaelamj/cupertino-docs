{
  "abstract" : "Stop the network tunnel.",
  "codeExamples" : [

  ],
  "contentHash" : "1f2e5b9ed3548c27604cf4c51c3dfcb52b5d4eb7587d25205579ac02fb44bef6",
  "crawledAt" : "2025-12-05T16:14:28Z",
  "declaration" : {
    "code" : "func stopTunnel(with reason: NEProviderStopReason, completionHandler: @escaping () -> Void)",
    "language" : "swift"
  },
  "id" : "32546DEB-A2CC-4A12-9B3D-7CD2A8F69F80",
  "kind" : "method",
  "language" : "swift",
  "module" : "Network Extension",
  "overview" : "## Discussion\n\nThis method is called by the system to stop the network tunnel.\n\nNEPacketTunnelProvider subclasses must override this method.\n\nDo not use this method to stop the tunnel from the Packet Tunnel Provider. Use `cancelTunnelWithError`: instead.",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "tvOS",
    "visionOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/NetworkExtension\/NEPacketTunnelProvider\/stopTunnel(with:completionHandler:)\ncrawled: 2025-12-05T16:14:28Z\n---\n\n# stopTunnel(with:completionHandler:)\n\n**Instance Method**\n\nStop the network tunnel.\n\n## Declaration\n\n```swift\nfunc stopTunnel(with reason: NEProviderStopReason, completionHandler: @escaping () -> Void)\n```\n\n```swift\nfunc stopTunnel(with reason: NEProviderStopReason) async\n```\n\n## Parameters\n\n- **reason**: An `NEProviderStopReason` code indicating why the tunnel is being stopped. Possible codes are listed in [doc:\/\/com.apple.networkextension\/documentation\/NetworkExtension\/NEProvider].\n- **completionHandler**: A block that must be executed when the tunnel is fully stopped.\n\n## Discussion\n\nThis method is called by the system to stop the network tunnel.\n\nNEPacketTunnelProvider subclasses must override this method.\n\nDo not use this method to stop the tunnel from the Packet Tunnel Provider. Use `cancelTunnelWithError`: instead.\n\n## Managing the tunnel life cycle\n\n- **startTunnel(options:completionHandler:)**: Start the network tunnel.\n- **cancelTunnelWithError(_:)**: Stop the network tunnel from the Packet Tunnel Provider.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Start the network tunnel.",
          "name" : "startTunnel(options:completionHandler:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/NetworkExtension\/NEPacketTunnelProvider\/startTunnel(options:completionHandler:)"
        },
        {
          "description" : "Stop the network tunnel from the Packet Tunnel Provider.",
          "name" : "cancelTunnelWithError(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/NetworkExtension\/NEPacketTunnelProvider\/cancelTunnelWithError(_:)"
        }
      ],
      "title" : "Managing the tunnel life cycle"
    }
  ],
  "source" : "appleJSON",
  "title" : "stopTunnel(with:completionHandler:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/NetworkExtension\/NEPacketTunnelProvider\/stopTunnel(with:completionHandler:)"
}