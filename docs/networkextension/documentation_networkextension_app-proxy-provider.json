{
  "abstract" : "Implement a VPN client for a flow-oriented, custom VPN protocol.",
  "codeExamples" : [

  ],
  "contentHash" : "280c27177c096d002bf9aa483f7266c2d28554758c40f66e3b5d465b1cefdbba",
  "crawledAt" : "2025-12-03T04:57:14Z",
  "id" : "4342BBB0-95B6-4BD8-9374-3920DEDA3980",
  "kind" : "collection",
  "language" : "swift",
  "module" : "Network Extension",
  "overview" : "## Overview\n\nA virtual private network (VPN) is a form of network tunnel where a VPN client uses the public internet to create a connection to a VPN server and then passes private network traffic over that connection.  If you want to build a VPN client that implements a flow-oriented, custom VPN protocol—one that works with the data passing through a transmission control protocol (TCP) connection rather than the packets used to transport that data—create an app proxy provider app extension.\n\nWhen the system starts a VPN configuration that uses your app proxy provider, it performs the following steps:\n\nEach flow represents either a TCP connection or a conversation over user datagram protocol (UDP). Your provider should to open a tunnel to a VPN server and forward each flow over that tunnel. Similarly, if your provider receives flow data from the tunnel, it should pass that back to the system through the appropriate flow.\n\nApp proxy providers are one form of per-app VPN, the other being a [doc:\/\/com.apple.networkextension\/documentation\/NetworkExtension\/packet-tunnel-provider] in source application mode.\n\nFor detailed information about app proxy provider deployment options, see [doc:\/\/com.apple.documentation\/documentation\/Technotes\/tn3134-network-extension-provider-deployment].",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/NetworkExtension\/app-proxy-provider\ncrawled: 2025-12-03T04:57:14Z\n---\n\n# App proxy provider\n\n**API Collection**\n\nImplement a VPN client for a flow-oriented, custom VPN protocol.\n\n## Overview\n\nA virtual private network (VPN) is a form of network tunnel where a VPN client uses the public internet to create a connection to a VPN server and then passes private network traffic over that connection.  If you want to build a VPN client that implements a flow-oriented, custom VPN protocol—one that works with the data passing through a transmission control protocol (TCP) connection rather than the packets used to transport that data—create an app proxy provider app extension.\n\nWhen the system starts a VPN configuration that uses your app proxy provider, it performs the following steps:\n\n- Launches your app extension.\n- Instantiates your proxy provider subclass within that app extension.\n- Starts forwarding flows to your provider.\n\nEach flow represents either a TCP connection or a conversation over user datagram protocol (UDP). Your provider should to open a tunnel to a VPN server and forward each flow over that tunnel. Similarly, if your provider receives flow data from the tunnel, it should pass that back to the system through the appropriate flow.\n\nApp proxy providers are one form of per-app VPN, the other being a [doc:\/\/com.apple.networkextension\/documentation\/NetworkExtension\/packet-tunnel-provider] in source application mode.\n\nFor detailed information about app proxy provider deployment options, see [doc:\/\/com.apple.documentation\/documentation\/Technotes\/tn3134-network-extension-provider-deployment].\n\n\n\n## Essentials\n\n- **Network Extensions Entitlement**: The APIs an app can use to customize networking features.\n\n## App proxy provider\n\n- **NEAppProxyProvider**: The principal class for an app proxy provider app extension.\n- **NETunnelProvider**: An abstract base class shared by NEPacketTunnelProvider and NEAppProxyProvider.\n- **NEProvider**: An abstract base class for all NetworkExtension providers.\n- **NETunnelNetworkSettings**: The configuration for a tunnel provider’s virtual interface.\n\n## Flow handling\n\n- **NEAppProxyTCPFlow**: An object for reading and writing data to and from a TCP connection being proxied by the provider.\n- **NEAppProxyUDPFlow**: An object for reading and writing data to and from a UDP conversation being proxied by the provider.\n- **NEAppProxyFlow**: An abstract base class shared by NEAppProxyTCPFlow and NEAppProxyUDPFlow.\n- **NEFlowMetaData**: Additional information about data flowing through a per-app VPN provider.\n- **In-Provider Networking**: Network APIs for use by all types of NetworkExtension providers and by hotspot helpers.\n- **Handling Flow Copying**: Exchange data streams by using proxy-provider classes.\n\n## VPN configuration\n\n- **NEAppProxyProviderManager**: An object to create and manage the app proxy provider’s VPN configuration.\n- **NETunnelProviderManager**: An object to create and manage the tunnel provider’s VPN configuration.\n- **NEVPNManager**: An object to create and manage a Personal VPN configuration.\n- **NETunnelProviderProtocol**: Configuration parameters for a VPN tunnel.\n- **NEAppRule**: The identity of an app whose traffic is to be routed through the tunnel.\n- **VPN On Demand Rules**: Set up VPN On Demand.\n\n## VPN control\n\n- **NETunnelProviderSession**: An object to start and stop a tunnel connection and get its status.\n- **NEVPNConnection**: An object to start and stop a Personal VPN connection and get its status.\n\n## Transparent proxy configuration\n\n- **NETransparentProxyManager**: An object that configures and controls transparent proxies.\n- **NETransparentProxyProvider**: An object that implements the client side of a custom transparent network proxy solution.\n- **NETransparentProxyNetworkSettings**: A specification of what traffic to route through a transparent proxy.\n- **NENetworkRule**: A rule to match attributes of network traffic.\n\n## Virtual private networks\n\n- **Routing your VPN network traffic**: Configure your VPN to include and exclude some network traffic.\n- **Personal VPN**: Create and manage a VPN configuration that uses one of the built-in VPN protocols (IPsec or IKEv2).\n- **Packet tunnel provider**: Implement a VPN client for a packet-oriented, custom VPN protocol.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "The APIs an app can use to customize networking features.",
          "name" : "Network Extensions Entitlement",
          "url" : "https:\/\/developer.apple.com\/documentation\/BundleResources\/Entitlements\/com.apple.developer.networking.networkextension"
        }
      ],
      "title" : "Essentials"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "The principal class for an app proxy provider app extension.",
          "name" : "NEAppProxyProvider",
          "url" : "https:\/\/developer.apple.com\/documentation\/NetworkExtension\/NEAppProxyProvider"
        },
        {
          "description" : "An abstract base class shared by NEPacketTunnelProvider and NEAppProxyProvider.",
          "name" : "NETunnelProvider",
          "url" : "https:\/\/developer.apple.com\/documentation\/NetworkExtension\/NETunnelProvider"
        },
        {
          "description" : "An abstract base class for all NetworkExtension providers.",
          "name" : "NEProvider",
          "url" : "https:\/\/developer.apple.com\/documentation\/NetworkExtension\/NEProvider"
        },
        {
          "description" : "The configuration for a tunnel provider’s virtual interface.",
          "name" : "NETunnelNetworkSettings",
          "url" : "https:\/\/developer.apple.com\/documentation\/NetworkExtension\/NETunnelNetworkSettings"
        }
      ],
      "title" : "App proxy provider"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "An object for reading and writing data to and from a TCP connection being proxied by the provider.",
          "name" : "NEAppProxyTCPFlow",
          "url" : "https:\/\/developer.apple.com\/documentation\/NetworkExtension\/NEAppProxyTCPFlow"
        },
        {
          "description" : "An object for reading and writing data to and from a UDP conversation being proxied by the provider.",
          "name" : "NEAppProxyUDPFlow",
          "url" : "https:\/\/developer.apple.com\/documentation\/NetworkExtension\/NEAppProxyUDPFlow"
        },
        {
          "description" : "An abstract base class shared by NEAppProxyTCPFlow and NEAppProxyUDPFlow.",
          "name" : "NEAppProxyFlow",
          "url" : "https:\/\/developer.apple.com\/documentation\/NetworkExtension\/NEAppProxyFlow"
        },
        {
          "description" : "Additional information about data flowing through a per-app VPN provider.",
          "name" : "NEFlowMetaData",
          "url" : "https:\/\/developer.apple.com\/documentation\/NetworkExtension\/NEFlowMetaData"
        },
        {
          "description" : "Network APIs for use by all types of NetworkExtension providers and by hotspot helpers.",
          "name" : "In-Provider Networking",
          "url" : "https:\/\/developer.apple.com\/documentation\/NetworkExtension\/in-provider-networking"
        },
        {
          "description" : "Exchange data streams by using proxy-provider classes.",
          "name" : "Handling Flow Copying",
          "url" : "https:\/\/developer.apple.com\/documentation\/NetworkExtension\/handling-flow-copying"
        }
      ],
      "title" : "Flow handling"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "An object to create and manage the app proxy provider’s VPN configuration.",
          "name" : "NEAppProxyProviderManager",
          "url" : "https:\/\/developer.apple.com\/documentation\/NetworkExtension\/NEAppProxyProviderManager"
        },
        {
          "description" : "An object to create and manage the tunnel provider’s VPN configuration.",
          "name" : "NETunnelProviderManager",
          "url" : "https:\/\/developer.apple.com\/documentation\/NetworkExtension\/NETunnelProviderManager"
        },
        {
          "description" : "An object to create and manage a Personal VPN configuration.",
          "name" : "NEVPNManager",
          "url" : "https:\/\/developer.apple.com\/documentation\/NetworkExtension\/NEVPNManager"
        },
        {
          "description" : "Configuration parameters for a VPN tunnel.",
          "name" : "NETunnelProviderProtocol",
          "url" : "https:\/\/developer.apple.com\/documentation\/NetworkExtension\/NETunnelProviderProtocol"
        },
        {
          "description" : "The identity of an app whose traffic is to be routed through the tunnel.",
          "name" : "NEAppRule",
          "url" : "https:\/\/developer.apple.com\/documentation\/NetworkExtension\/NEAppRule"
        },
        {
          "description" : "Set up VPN On Demand.",
          "name" : "VPN On Demand Rules",
          "url" : "https:\/\/developer.apple.com\/documentation\/NetworkExtension\/vpn-on-demand-rules"
        }
      ],
      "title" : "VPN configuration"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "An object to start and stop a tunnel connection and get its status.",
          "name" : "NETunnelProviderSession",
          "url" : "https:\/\/developer.apple.com\/documentation\/NetworkExtension\/NETunnelProviderSession"
        },
        {
          "description" : "An object to start and stop a Personal VPN connection and get its status.",
          "name" : "NEVPNConnection",
          "url" : "https:\/\/developer.apple.com\/documentation\/NetworkExtension\/NEVPNConnection"
        }
      ],
      "title" : "VPN control"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "An object that configures and controls transparent proxies.",
          "name" : "NETransparentProxyManager",
          "url" : "https:\/\/developer.apple.com\/documentation\/NetworkExtension\/NETransparentProxyManager"
        },
        {
          "description" : "An object that implements the client side of a custom transparent network proxy solution.",
          "name" : "NETransparentProxyProvider",
          "url" : "https:\/\/developer.apple.com\/documentation\/NetworkExtension\/NETransparentProxyProvider"
        },
        {
          "description" : "A specification of what traffic to route through a transparent proxy.",
          "name" : "NETransparentProxyNetworkSettings",
          "url" : "https:\/\/developer.apple.com\/documentation\/NetworkExtension\/NETransparentProxyNetworkSettings"
        },
        {
          "description" : "A rule to match attributes of network traffic.",
          "name" : "NENetworkRule",
          "url" : "https:\/\/developer.apple.com\/documentation\/NetworkExtension\/NENetworkRule"
        }
      ],
      "title" : "Transparent proxy configuration"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Configure your VPN to include and exclude some network traffic.",
          "name" : "Routing your VPN network traffic",
          "url" : "https:\/\/developer.apple.com\/documentation\/NetworkExtension\/routing-your-vpn-network-traffic"
        },
        {
          "description" : "Create and manage a VPN configuration that uses one of the built-in VPN protocols (IPsec or IKEv2).",
          "name" : "Personal VPN",
          "url" : "https:\/\/developer.apple.com\/documentation\/NetworkExtension\/personal-vpn"
        },
        {
          "description" : "Implement a VPN client for a packet-oriented, custom VPN protocol.",
          "name" : "Packet tunnel provider",
          "url" : "https:\/\/developer.apple.com\/documentation\/NetworkExtension\/packet-tunnel-provider"
        }
      ],
      "title" : "Virtual private networks"
    }
  ],
  "source" : "appleJSON",
  "title" : "App proxy provider",
  "url" : "https:\/\/developer.apple.com\/documentation\/NetworkExtension\/app-proxy-provider"
}