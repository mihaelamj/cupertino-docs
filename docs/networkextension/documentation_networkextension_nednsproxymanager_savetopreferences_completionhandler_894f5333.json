{
  "abstract" : "Saves the DNS proxy configuration in the caller’s DNS proxy preferences.",
  "codeExamples" : [

  ],
  "contentHash" : "9040502cf0695fe6442d50ac6bb62b5110fbd2c2253566981ee03d5e13123571",
  "crawledAt" : "2025-12-05T17:48:48Z",
  "declaration" : {
    "code" : "func saveToPreferences(completionHandler: @escaping ((any Error)?) -> Void)",
    "language" : "swift"
  },
  "id" : "E38CED36-4BDA-4FCA-826C-48E7AE2526F7",
  "kind" : "method",
  "language" : "swift",
  "module" : "Network Extension",
  "overview" : "## Discussion\n\nIf you alter the DNS proxy configuration that you load into the proxy manager’s properties using a call to the [doc:\/\/com.apple.networkextension\/documentation\/NetworkExtension\/NEDNSProxyManager\/loadFromPreferences(completionHandler:)] method, you must then call the [doc:\/\/com.apple.networkextension\/documentation\/NetworkExtension\/NEDNSProxyManager\/saveToPreferences(completionHandler:)] method to make the changes take effect. Saving also stores the modified configuration for the next time the proxy is started or the configuration loaded.\n\nTrying to save preferences before loading them produces an error.\n\nIf the DNS proxy is enabled, it becomes active as a result of this call.",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "visionOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/NetworkExtension\/NEDNSProxyManager\/saveToPreferences(completionHandler:)\ncrawled: 2025-12-05T17:48:48Z\n---\n\n# saveToPreferences(completionHandler:)\n\n**Instance Method**\n\nSaves the DNS proxy configuration in the caller’s DNS proxy preferences.\n\n## Declaration\n\n```swift\nfunc saveToPreferences(completionHandler: @escaping ((any Error)?) -> Void)\n```\n\n```swift\nfunc saveToPreferences() async throws\n```\n\n## Parameters\n\n- **completionHandler**: A block called when the save operation completes. If the operation fails, an error instance passed to this block describes the problem. Otherwise, the error is `nil`. See [doc:\/\/com.apple.networkextension\/documentation\/NetworkExtension\/NEDNSProxyManagerError] for the list of possible errors.\n\n## Discussion\n\nIf you alter the DNS proxy configuration that you load into the proxy manager’s properties using a call to the [doc:\/\/com.apple.networkextension\/documentation\/NetworkExtension\/NEDNSProxyManager\/loadFromPreferences(completionHandler:)] method, you must then call the [doc:\/\/com.apple.networkextension\/documentation\/NetworkExtension\/NEDNSProxyManager\/saveToPreferences(completionHandler:)] method to make the changes take effect. Saving also stores the modified configuration for the next time the proxy is started or the configuration loaded.\n\nTrying to save preferences before loading them produces an error.\n\nIf the DNS proxy is enabled, it becomes active as a result of this call.\n\n## Managing the DNS proxy configuration\n\n- **shared()**: Returns a singleton DNS proxy manager instance.\n- **loadFromPreferences(completionHandler:)**: Loads the current DNS proxy configuration from the caller’s DNS proxy preferences.\n- **removeFromPreferences(completionHandler:)**: Removes the DNS proxy configuration from the caller’s DNS proxy preferences.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Returns a singleton DNS proxy manager instance.",
          "name" : "shared()",
          "url" : "https:\/\/developer.apple.com\/documentation\/NetworkExtension\/NEDNSProxyManager\/shared()"
        },
        {
          "description" : "Loads the current DNS proxy configuration from the caller’s DNS proxy preferences.",
          "name" : "loadFromPreferences(completionHandler:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/NetworkExtension\/NEDNSProxyManager\/loadFromPreferences(completionHandler:)"
        },
        {
          "description" : "Removes the DNS proxy configuration from the caller’s DNS proxy preferences.",
          "name" : "removeFromPreferences(completionHandler:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/NetworkExtension\/NEDNSProxyManager\/removeFromPreferences(completionHandler:)"
        }
      ],
      "title" : "Managing the DNS proxy configuration"
    }
  ],
  "source" : "appleJSON",
  "title" : "saveToPreferences(completionHandler:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/NetworkExtension\/NEDNSProxyManager\/saveToPreferences(completionHandler:)"
}