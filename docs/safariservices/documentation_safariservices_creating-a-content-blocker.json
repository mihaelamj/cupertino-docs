{
  "abstract" : "Create a content blocker for Safari in Xcode.",
  "codeExamples" : [
    {
      "code" : "[\n    {\n        \"trigger\": {\n            ...\n        },\n        \"action\": {\n            ...\n        }\n    },\n    {\n        \"trigger\": {\n            ...\n        },\n        \"action\": {\n            ...\n        }\n    }\n]",
      "language" : "javascript"
    },
    {
      "code" : "\"trigger\": {\n        \"url-filter\": \".*\",\n        \"resource-type\": [\"image\", \"style-sheet\"],\n        \"unless-domain\": [\"your-content-server.com\", \"trusted-content-server.com\"]\n}",
      "language" : "swift"
    },
    {
      "code" : "\"action\": {\n        \"type\": \"css-display-none\",\n        \"selector\": \"#newsletter, :matches(.main-page, .article) .news-overlay\"\n}",
      "language" : "swift"
    }
  ],
  "contentHash" : "40e1c8f679071b681ce575a63dcf693827e507f17fd50ed46ca39e2e461631eb",
  "crawledAt" : "2025-12-07T13:38:05Z",
  "id" : "6BC30466-0350-4D26-8AD8-688352B7D12C",
  "kind" : "article",
  "language" : "swift",
  "module" : "Safari Services",
  "overview" : "## Overview\n\nContent blockers are app extensions that you build using Xcode. They indicate to Safari a set of rules to use to block content in the browser window. Blocking behaviors include hiding elements, blocking loads, and stripping cookies from Safari requests.\n\nYou use a containing app to contain and deliver a content blocker in the App Store. The containing app defines the context to provide to the extension and initiates the extension life cycle  by sending a request in response to a user action.\n\nWhen the content blocker launches, it communicates with its containing app through a set of shared resources, and it communicates directly with Safari.\n\n\n\nApps tell Safari in advance what kinds of content to block. Because Safari doesn’t have to consult with the app during loading, and because Xcode compiles content blockers into bytecode, this model runs efficiently. Additionally, content blockers have no knowledge of users’ history or the websites they visit.\n\n### Add the extension target to your containing app\n\nChoose File > New > Target and select Content Blocker Extension. Click Next and give your content blocker a name.\n\n\n\n### Add behaviors to your content blocker\n\nIn your Xcode project, open the folder with the same title as your content blocker. This folder contains the action request handler and a JSON file, along with a property list file and an entitlements file. Open the `blockerList.json` file.\n\nIn the JSON file, write rules to define content-blocking behaviors. Each rule is a JSON object containing action and trigger dictionaries. The action tells Safari what to do when it encounters a match for the trigger. The trigger tells Safari when to perform the corresponding action. Content blockers are JSON arrays of these rules.\n\n### Add triggers to your content blocker\n\nA trigger dictionary must include a `url-filter` key, which specifies a pattern to match the URL against. The remaining keys are optional and modify the behavior of the trigger. For example, you can limit the trigger to specific domains or have it not apply when Safari finds a match for a specific domain.\n\nFor example, to write a trigger for image and style sheet resources that Safari finds on any domain except those specified, add the following to the JSON file:\n\n#### Capture URLs by pattern\n\nIn `url-filter`, match more than just a specific URL, using regular expressions.\n\n#### Use trigger fields to define patterns\n\nThere are many valid trigger fields you can use to define patterns.\n\n### Add actions to your content blocker\n\nWhen a trigger matches a resource, the browser queues the associated action for execution. Safari evaluates all the triggers, and executes the actions in order. When a domain matches a trigger, Safari skips all rules after the triggered rule that specify the same action.\n\nGroup the rules with similar actions together to improve performance. For example, first specify rules that block content loading, followed by rules that block cookies. The trigger evaluation continues at the first rule that specifies a different action.\n\nThere are only two valid fields for actions: `type` and `selector`. An action type is required. If the type is `css-display-none`, a `selector` is required as well; otherwise, the `selector` is optional.\n\nFor example, you can specify the following type and selector:\n\n#### Select values for the type field\n\nFor the `selector` field, specify a string that defines a selector list. This value is required when the action type is `css-display-none`. If it’s not, Safari ignores the `selector` field. Use CSS identifiers as the individual selector values, separated by commas. Safari and WebKit support all of the CSS selectors for Safari content-blocking rules.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/SafariServices\/creating-a-content-blocker\ncrawled: 2025-12-07T13:38:05Z\n---\n\n# Creating a content blocker\n\n**Article**\n\nCreate a content blocker for Safari in Xcode.\n\n## Overview\n\nContent blockers are app extensions that you build using Xcode. They indicate to Safari a set of rules to use to block content in the browser window. Blocking behaviors include hiding elements, blocking loads, and stripping cookies from Safari requests.\n\nYou use a containing app to contain and deliver a content blocker in the App Store. The containing app defines the context to provide to the extension and initiates the extension life cycle  by sending a request in response to a user action.\n\nWhen the content blocker launches, it communicates with its containing app through a set of shared resources, and it communicates directly with Safari.\n\n\n\nApps tell Safari in advance what kinds of content to block. Because Safari doesn’t have to consult with the app during loading, and because Xcode compiles content blockers into bytecode, this model runs efficiently. Additionally, content blockers have no knowledge of users’ history or the websites they visit.\n\n### Add the extension target to your containing app\n\nChoose File > New > Target and select Content Blocker Extension. Click Next and give your content blocker a name.\n\n\n\n### Add behaviors to your content blocker\n\nIn your Xcode project, open the folder with the same title as your content blocker. This folder contains the action request handler and a JSON file, along with a property list file and an entitlements file. Open the `blockerList.json` file.\n\nIn the JSON file, write rules to define content-blocking behaviors. Each rule is a JSON object containing action and trigger dictionaries. The action tells Safari what to do when it encounters a match for the trigger. The trigger tells Safari when to perform the corresponding action. Content blockers are JSON arrays of these rules.\n\n```javascript\n[\n    {\n        \"trigger\": {\n            ...\n        },\n        \"action\": {\n            ...\n        }\n    },\n    {\n        \"trigger\": {\n            ...\n        },\n        \"action\": {\n            ...\n        }\n    }\n]\n```\n\n### Add triggers to your content blocker\n\nA trigger dictionary must include a `url-filter` key, which specifies a pattern to match the URL against. The remaining keys are optional and modify the behavior of the trigger. For example, you can limit the trigger to specific domains or have it not apply when Safari finds a match for a specific domain.\n\nFor example, to write a trigger for image and style sheet resources that Safari finds on any domain except those specified, add the following to the JSON file:\n\n```swift\n\"trigger\": {\n        \"url-filter\": \".*\",\n        \"resource-type\": [\"image\", \"style-sheet\"],\n        \"unless-domain\": [\"your-content-server.com\", \"trusted-content-server.com\"]\n}\n```\n\n#### Capture URLs by pattern\n\nIn `url-filter`, match more than just a specific URL, using regular expressions.\n\n\n\n#### Use trigger fields to define patterns\n\nThere are many valid trigger fields you can use to define patterns.\n\n\n\n### Add actions to your content blocker\n\nWhen a trigger matches a resource, the browser queues the associated action for execution. Safari evaluates all the triggers, and executes the actions in order. When a domain matches a trigger, Safari skips all rules after the triggered rule that specify the same action.\n\nGroup the rules with similar actions together to improve performance. For example, first specify rules that block content loading, followed by rules that block cookies. The trigger evaluation continues at the first rule that specifies a different action.\n\nThere are only two valid fields for actions: `type` and `selector`. An action type is required. If the type is `css-display-none`, a `selector` is required as well; otherwise, the `selector` is optional.\n\nFor example, you can specify the following type and selector:\n\n```swift\n\"action\": {\n        \"type\": \"css-display-none\",\n        \"selector\": \"#newsletter, :matches(.main-page, .article) .news-overlay\"\n}\n```\n\n#### Select values for the type field\n\n\n\nFor the `selector` field, specify a string that defines a selector list. This value is required when the action type is `css-display-none`. If it’s not, Safari ignores the `selector` field. Use CSS identifiers as the individual selector values, separated by commas. Safari and WebKit support all of the CSS selectors for Safari content-blocking rules.\n\n## Content blockers\n\n- **SFContentBlockerManager**: A class that your app uses to interact with a content blocker extension.\n- **SFContentBlockerState**: The state of a content blocker extension.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "A class that your app uses to interact with a content blocker extension.",
          "name" : "SFContentBlockerManager",
          "url" : "https:\/\/developer.apple.com\/documentation\/SafariServices\/SFContentBlockerManager"
        },
        {
          "description" : "The state of a content blocker extension.",
          "name" : "SFContentBlockerState",
          "url" : "https:\/\/developer.apple.com\/documentation\/SafariServices\/SFContentBlockerState"
        }
      ],
      "title" : "Content blockers"
    }
  ],
  "source" : "appleJSON",
  "title" : "Creating a content blocker",
  "url" : "https:\/\/developer.apple.com\/documentation\/SafariServices\/creating-a-content-blocker"
}