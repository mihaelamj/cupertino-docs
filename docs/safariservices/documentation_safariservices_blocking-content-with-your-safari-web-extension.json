{
  "abstract" : "Build content blocking with declarative net request into your Safari web extension.",
  "codeExamples" : [
    {
      "code" : "{\n ...\n   \"permissions\": [\n    \"declarativeNetRequest\",\n    \"activeTab\"\n  ],\n  ...\n}",
      "language" : "javascript"
    },
    {
      "code" : "{\n   ...\n   \"declarative_net_request\" : {\n    \"rule_resources\" : [{\n      \"id\": \"ruleset_for_images\",\n      \"enabled\": true,\n      \"path\": \"image_rules.json\"\n    }, {\n      \"id\": \"ruleset_for_scripts\",\n      \"enabled\": false,\n      \"path\": \"script_rules.json\"\n    }]\n  },\n  ...\n}",
      "language" : "javascript"
    },
    {
      "code" : "{\n    \"id\": 1,\n    \"priority\": 1,\n    \"action\": { \"type\": \"block\" },\n    \"condition\": {\n        \"regexFilter\": \".*\",\n        \"resourceTypes\": [ \"script\" ]\n    }\n}\n",
      "language" : "javascript"
    },
    {
      "code" : "var rule = {\n    id: 1,\n    priority: 1,\n    action: { type: \"block\" },\n    condition: {\n        urlFilter: \"||example.com\",\n        resourceTypes: [ \"main_frame\", \"script\" ]\n    }\n};\n\nawait browser.declarativeNetRequest.updateDynamicRules({ addRules: [ rule ] });\n",
      "language" : "swift"
    }
  ],
  "contentHash" : "dab3ea947bd9239786118507d0b0084ef5d0051f0f09c51cfebab73fa2c705e9",
  "crawledAt" : "2025-12-02T16:24:35Z",
  "id" : "B9FFC0C2-4A7D-461F-8D25-17CE73D5C2BF",
  "kind" : "article",
  "language" : "swift",
  "module" : "Safari Services",
  "overview" : "## Overview\n\nAdd declarative content blocking that works in Safari, Mac web apps, and other browsers to your Safari web extension. This approach blocks content quickly and ensures privacy for users, because the web extension doesn’t need access to the entire web request to make blocking decisions.\n\nSafari web extensions implement declarative content blocking with the Declarative Net Request API common to web extensions on other browsers.\n\n### Request permission to block content\n\nTo use the Declarative Net Request API in your Safari web extension, first request permission. In your Xcode project, add the declarative net request permission to the permissions list in your `manifest.js` file.\n\nFor more information about permissions, see [doc:\/\/com.apple.safariservices\/documentation\/SafariServices\/managing-safari-web-extension-permissions].\n\n### Add rulesets to your extension and manifest\n\nYou specify rules for content blocking in rulesets, which are files with `json` describing the content blocking rules. Add references to ruleset files that you create in your `manifest.js` file to tell Safari to use them. For example:\n\nBuild your rules describing how you want to block content, and add them to your ruleset files. For example:\n\nReview Safari’s support for specifying rules:\n\n### Adjust rules dynamically for the extension or session\n\nAfter a user installs and uses your extension, adjust content blocking using dynamic rules. Add, change, or remove rules that persist between browser sessions using `updateDynamicRules`. Add, change, or remove rules that apply only to the current session using `updateSessionRules`.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/SafariServices\/blocking-content-with-your-safari-web-extension\ncrawled: 2025-12-02T16:24:35Z\n---\n\n# Blocking content with your Safari web extension\n\n**Article**\n\nBuild content blocking with declarative net request into your Safari web extension.\n\n## Overview\n\nAdd declarative content blocking that works in Safari, Mac web apps, and other browsers to your Safari web extension. This approach blocks content quickly and ensures privacy for users, because the web extension doesn’t need access to the entire web request to make blocking decisions.\n\nSafari web extensions implement declarative content blocking with the Declarative Net Request API common to web extensions on other browsers.\n\n### Request permission to block content\n\nTo use the Declarative Net Request API in your Safari web extension, first request permission. In your Xcode project, add the declarative net request permission to the permissions list in your `manifest.js` file.\n\n```javascript\n{\n ...\n   \"permissions\": [\n    \"declarativeNetRequest\",\n    \"activeTab\"\n  ],\n  ...\n}\n```\n\nFor more information about permissions, see [doc:\/\/com.apple.safariservices\/documentation\/SafariServices\/managing-safari-web-extension-permissions].\n\n### Add rulesets to your extension and manifest\n\nYou specify rules for content blocking in rulesets, which are files with `json` describing the content blocking rules. Add references to ruleset files that you create in your `manifest.js` file to tell Safari to use them. For example:\n\n```javascript\n{\n   ...\n   \"declarative_net_request\" : {\n    \"rule_resources\" : [{\n      \"id\": \"ruleset_for_images\",\n      \"enabled\": true,\n      \"path\": \"image_rules.json\"\n    }, {\n      \"id\": \"ruleset_for_scripts\",\n      \"enabled\": false,\n      \"path\": \"script_rules.json\"\n    }]\n  },\n  ...\n}\n```\n\nBuild your rules describing how you want to block content, and add them to your ruleset files. For example:\n\n```javascript\n{\n    \"id\": 1,\n    \"priority\": 1,\n    \"action\": { \"type\": \"block\" },\n    \"condition\": {\n        \"regexFilter\": \".*\",\n        \"resourceTypes\": [ \"script\" ]\n    }\n}\n\n```\n\nReview Safari’s support for specifying rules:\n\n\n\n### Adjust rules dynamically for the extension or session\n\nAfter a user installs and uses your extension, adjust content blocking using dynamic rules. Add, change, or remove rules that persist between browser sessions using `updateDynamicRules`. Add, change, or remove rules that apply only to the current session using `updateSessionRules`.\n\n```swift\nvar rule = {\n    id: 1,\n    priority: 1,\n    action: { type: \"block\" },\n    condition: {\n        urlFilter: \"||example.com\",\n        resourceTypes: [ \"main_frame\", \"script\" ]\n    }\n};\n\nawait browser.declarativeNetRequest.updateDynamicRules({ addRules: [ rule ] });\n\n```\n\n## Blocking content\n\n- **Adopting Declarative Content Blocking in Safari Web Extensions**: Block web content with your web extension using the declarative net request API.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Block web content with your web extension using the declarative net request API.",
          "name" : "Adopting Declarative Content Blocking in Safari Web Extensions",
          "url" : "https:\/\/developer.apple.com\/documentation\/SafariServices\/adopting-declarative-content-blocking-in-safari-web-extensions"
        }
      ],
      "title" : "Blocking content"
    }
  ],
  "source" : "appleJSON",
  "title" : "Blocking content with your Safari web extension",
  "url" : "https:\/\/developer.apple.com\/documentation\/SafariServices\/blocking-content-with-your-safari-web-extension"
}