{
  "abstract" : "Creates a read stream for a CFHTTP request message object whose body is too long to keep in memory.",
  "codeExamples" : [

  ],
  "contentHash" : "a4e6efb888d68e257a5efb8b81ab14901f23fbfd53420b6d1625f2b4f0c8f2db",
  "crawledAt" : "2025-12-07T13:02:52Z",
  "declaration" : {
    "code" : "func CFReadStreamCreateForStreamedHTTPRequest(_ alloc: CFAllocator?, _ requestHeaders: CFHTTPMessage, _ requestBody: CFReadStream) -> Unmanaged<CFReadStream>",
    "language" : "swift"
  },
  "id" : "94DB9C4B-0651-4863-AF25-9011C1D7A327",
  "kind" : "function",
  "language" : "swift",
  "module" : "CFNetwork",
  "overview" : "## Return Value\n\nA new read stream, or `NULL` if there was a problem creating the object. Ownership follows the [https:\/\/developer.apple.com\/library\/archive\/documentation\/CoreFoundation\/Conceptual\/CFMemoryMgmt\/Concepts\/Ownership.html#\/\/apple_ref\/doc\/uid\/20001148-103029].\n\n## Discussion\n\nThis function creates a read stream for the response to the `requestHeaders` plus `requestBody`. Call this function instead of [doc:\/\/com.apple.cfnetwork\/documentation\/CFNetwork\/CFReadStreamCreateForHTTPRequest(_:_:)] when the body of the request is so long that you do not want it to be resident in memory.\n\nBecause streams cannot be reset, read streams created this way cannot be enabled for autoredirection.\n\nIf the Content-Length header is set in `requestHeaders`, it is assumed that the length is correct and that `requestBody` will report end-of-stream after precisely Content-Length bytes have been read from it. If the Content-Length header is not set, the chunked transfer-encoding will be added to `requestHeaders`, and bytes read from `requestBody` will be transmitted chunked. The body of `requestHeaders` is ignored.\n\nAfter creating the read stream, you can call [doc:\/\/com.apple.documentation\/documentation\/CoreFoundation\/CFReadStreamGetError(_:)] at any time to check the status of the stream. You may want to call `CFHTTPReadStreamSetProxy` to set the name and port number for a proxy. To serialize the request and send it, call [doc:\/\/com.apple.documentation\/documentation\/CoreFoundation\/CFReadStreamOpen(_:)].",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "tvOS",
    "visionOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/CFNetwork\/CFReadStreamCreateForStreamedHTTPRequest(_:_:_:)\ncrawled: 2025-12-07T13:02:52Z\n---\n\n# CFReadStreamCreateForStreamedHTTPRequest(_:_:_:)\n\n**Function**\n\nCreates a read stream for a CFHTTP request message object whose body is too long to keep in memory.\n\n## Declaration\n\n```swift\nfunc CFReadStreamCreateForStreamedHTTPRequest(_ alloc: CFAllocator?, _ requestHeaders: CFHTTPMessage, _ requestBody: CFReadStream) -> Unmanaged<CFReadStream>\n```\n\n## Parameters\n\n- **alloc**: The allocator to use to allocate memory for the new object. Pass `NULL` or kCFAllocatorDefault to use the current default allocator.\n- **requestHeaders**: A CFHTTP request header.\n- **requestBody**: Read stream reference for the request body.\n\n## Return Value\n\nA new read stream, or `NULL` if there was a problem creating the object. Ownership follows the [https:\/\/developer.apple.com\/library\/archive\/documentation\/CoreFoundation\/Conceptual\/CFMemoryMgmt\/Concepts\/Ownership.html#\/\/apple_ref\/doc\/uid\/20001148-103029].\n\n## Discussion\n\nThis function creates a read stream for the response to the `requestHeaders` plus `requestBody`. Call this function instead of [doc:\/\/com.apple.cfnetwork\/documentation\/CFNetwork\/CFReadStreamCreateForHTTPRequest(_:_:)] when the body of the request is so long that you do not want it to be resident in memory.\n\nBecause streams cannot be reset, read streams created this way cannot be enabled for autoredirection.\n\nIf the Content-Length header is set in `requestHeaders`, it is assumed that the length is correct and that `requestBody` will report end-of-stream after precisely Content-Length bytes have been read from it. If the Content-Length header is not set, the chunked transfer-encoding will be added to `requestHeaders`, and bytes read from `requestBody` will be transmitted chunked. The body of `requestHeaders` is ignored.\n\nAfter creating the read stream, you can call [doc:\/\/com.apple.documentation\/documentation\/CoreFoundation\/CFReadStreamGetError(_:)] at any time to check the status of the stream. You may want to call `CFHTTPReadStreamSetProxy` to set the name and port number for a proxy. To serialize the request and send it, call [doc:\/\/com.apple.documentation\/documentation\/CoreFoundation\/CFReadStreamOpen(_:)].\n\n## Streams\n\n- **CFReadStreamCreateForHTTPRequest(_:_:)**: Creates a read stream for a CFHTTP request message.\n- **kCFStreamPropertyHTTPAttemptPersistentConnection**\n- **kCFStreamPropertyHTTPFinalRequest**: HTTP Final Request property. A value of type CFHTTPMessage containing the final message transmitted by the stream after all modifications (including authentication, connection policy, redirects, and so on) have been made. This property cannot be set.\n- **kCFStreamPropertyHTTPFinalURL**: HTTP Final URL property. A value of type CFURL containing the final HTTP URL. This value differs from the URL in the original HTTP request if an autoredirection occurred. This property cannot be set.\n- **kCFStreamPropertyHTTPProxy**\n- **kCFStreamPropertyHTTPProxyHost**\n- **kCFStreamPropertyHTTPProxyPort**\n- **kCFStreamPropertyHTTPRequestBytesWrittenCount**\n- **kCFStreamPropertyHTTPResponseHeader**: HTTP Response Header property. When copied by [doc:\/\/com.apple.documentation\/documentation\/CoreFoundation\/CFReadStreamCopyProperty(_:_:)], the header of an HTTP response message is returned.\n- **kCFStreamPropertyHTTPSProxyHost**\n- **kCFStreamPropertyHTTPSProxyPort**\n- **kCFStreamPropertyHTTPShouldAutoredirect**: HTTP Should Auto Redirect property. Set this property to `kCFBooleanTrue` to enable autoredirection; set this property to `kCFBooleanFalse` to disable autoredirection.\n- **CFWriteStreamCreateWithFTPURL(_:_:)**: Creates an FTP write stream.\n- **CFReadStreamCreateWithFTPURL(_:_:)**: Creates an FTP read stream.\n- **kCFStreamPropertyFTPAttemptPersistentConnection**\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Creates a read stream for a CFHTTP request message.",
          "name" : "CFReadStreamCreateForHTTPRequest(_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CFNetwork\/CFReadStreamCreateForHTTPRequest(_:_:)"
        },
        {
          "description" : "",
          "name" : "kCFStreamPropertyHTTPAttemptPersistentConnection",
          "url" : "https:\/\/developer.apple.com\/documentation\/CFNetwork\/kCFStreamPropertyHTTPAttemptPersistentConnection"
        },
        {
          "description" : "HTTP Final Request property. A value of type CFHTTPMessage containing the final message transmitted by the stream after all modifications (including authentication, connection policy, redirects, and so on) have been made. This property cannot be set.",
          "name" : "kCFStreamPropertyHTTPFinalRequest",
          "url" : "https:\/\/developer.apple.com\/documentation\/CFNetwork\/kCFStreamPropertyHTTPFinalRequest"
        },
        {
          "description" : "HTTP Final URL property. A value of type CFURL containing the final HTTP URL. This value differs from the URL in the original HTTP request if an autoredirection occurred. This property cannot be set.",
          "name" : "kCFStreamPropertyHTTPFinalURL",
          "url" : "https:\/\/developer.apple.com\/documentation\/CFNetwork\/kCFStreamPropertyHTTPFinalURL"
        },
        {
          "description" : "",
          "name" : "kCFStreamPropertyHTTPProxy",
          "url" : "https:\/\/developer.apple.com\/documentation\/CFNetwork\/kCFStreamPropertyHTTPProxy"
        },
        {
          "description" : "",
          "name" : "kCFStreamPropertyHTTPProxyHost",
          "url" : "https:\/\/developer.apple.com\/documentation\/CFNetwork\/kCFStreamPropertyHTTPProxyHost"
        },
        {
          "description" : "",
          "name" : "kCFStreamPropertyHTTPProxyPort",
          "url" : "https:\/\/developer.apple.com\/documentation\/CFNetwork\/kCFStreamPropertyHTTPProxyPort"
        },
        {
          "description" : "",
          "name" : "kCFStreamPropertyHTTPRequestBytesWrittenCount",
          "url" : "https:\/\/developer.apple.com\/documentation\/CFNetwork\/kCFStreamPropertyHTTPRequestBytesWrittenCount"
        },
        {
          "description" : "HTTP Response Header property. When copied by [doc:\/\/com.apple.documentation\/documentation\/CoreFoundation\/CFReadStreamCopyProperty(_:_:)], the header of an HTTP response message is returned.",
          "name" : "kCFStreamPropertyHTTPResponseHeader",
          "url" : "https:\/\/developer.apple.com\/documentation\/CFNetwork\/kCFStreamPropertyHTTPResponseHeader"
        },
        {
          "description" : "",
          "name" : "kCFStreamPropertyHTTPSProxyHost",
          "url" : "https:\/\/developer.apple.com\/documentation\/CFNetwork\/kCFStreamPropertyHTTPSProxyHost"
        },
        {
          "description" : "",
          "name" : "kCFStreamPropertyHTTPSProxyPort",
          "url" : "https:\/\/developer.apple.com\/documentation\/CFNetwork\/kCFStreamPropertyHTTPSProxyPort"
        },
        {
          "description" : "HTTP Should Auto Redirect property. Set this property to `kCFBooleanTrue` to enable autoredirection; set this property to `kCFBooleanFalse` to disable autoredirection.",
          "name" : "kCFStreamPropertyHTTPShouldAutoredirect",
          "url" : "https:\/\/developer.apple.com\/documentation\/CFNetwork\/kCFStreamPropertyHTTPShouldAutoredirect"
        },
        {
          "description" : "Creates an FTP write stream.",
          "name" : "CFWriteStreamCreateWithFTPURL(_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CFNetwork\/CFWriteStreamCreateWithFTPURL(_:_:)"
        },
        {
          "description" : "Creates an FTP read stream.",
          "name" : "CFReadStreamCreateWithFTPURL(_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CFNetwork\/CFReadStreamCreateWithFTPURL(_:_:)"
        },
        {
          "description" : "",
          "name" : "kCFStreamPropertyFTPAttemptPersistentConnection",
          "url" : "https:\/\/developer.apple.com\/documentation\/CFNetwork\/kCFStreamPropertyFTPAttemptPersistentConnection"
        }
      ],
      "title" : "Streams"
    }
  ],
  "source" : "appleJSON",
  "title" : "CFReadStreamCreateForStreamedHTTPRequest(_:_:_:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/CFNetwork\/CFReadStreamCreateForStreamedHTTPRequest(_:_:_:)"
}