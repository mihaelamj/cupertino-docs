{
  "abstract" : "Investigate issues with Game Center by evaluating your matchmaking rules using metrics endpoints.",
  "codeExamples" : [
    {
      "code" : "GET \/v1\/gameCenterMatchmakingQueues\/8fb73d41-1ca1-1cbf-2538-9df424beb10b\/metrics\/matchmakingRequests?granularity=PT15M",
      "language" : "other"
    },
    {
      "code" : "{    \n      “data”: [    \n        {  \n          \"type\": \"gameCenterMatchmakingQueueRequests\",  \n          “dataPoints”: [   \n            {  \n              “start”: “2023-10-05T04:00:00Z”, \n              “end”: “2023-10-05T04:15:00Z”, \n              “values”: {    \n                “averageSecondsInQueue”: 2.9630714285714284, \n                “p95SecondsInQueue”: 3.838, \n                “count”: 14,   \n                “p50SecondsInQueue”: 3.36   \n              }    \n            },\n...",
      "language" : "json"
    },
    {
      "code" : "GET \/v1\/gameCenterMatchmakingQueues\/8fb73d41-1ca1-1cbf-2538-9df424beb10b\/metrics\/matchmakingRequests?granularity=PT15M&groupBy=result",
      "language" : "other"
    },
    {
      "code" : "GET \/v1\/gameCenterMatchmakingRules\/2b4835c6-d06b-479d-8b0f-dab9d7eb3d11\/metrics\/matchmakingRuleErrors?granularity=PT15M",
      "language" : "other"
    },
    {
      "code" : "GET \/v1\/gameCenterMatchmakingRules\/0f0fcbf9-43b6-429d-8c08-fcaf66a52872\/metrics\/matchmakingBooleanRuleResults?granularity=PT15M&groupBy=result",
      "language" : "other"
    },
    {
      "code" : "GET \/v1\/gameCenterMatchmakingQueues\/532ad9c0-1a28-4536-ad57-33213bcc0a29\/metrics\/matchmakingQueueSizes?granularity=PT15M",
      "language" : "other"
    }
  ],
  "contentHash" : "66ba804fbcb2239667a3357b597e6aab57fd3a7e725551b25a2bc7bbdd259339",
  "crawledAt" : "2025-12-02T19:34:00Z",
  "id" : "85D7872A-3949-485A-A80E-E2198D088136",
  "kind" : "article",
  "language" : "swift",
  "module" : "GameKit",
  "overview" : "## Overview\n\nYou can diagnose problems with your matchmaking rules using the metrics endpoints. You can get matchmaking data at different granularities, such as every 15 minutes for 8 hours, hourly over 24 hours, or daily for 30 days. If Game Center takes too long to find matches or fails to find matches, use the metrics APIs to help troubleshoot your rules.\n\n### View match requests on the queue\n\nFirst, confirm that your game submits requests to the correct queue using the [doc:\/\/com.apple.documentation\/documentation\/AppStoreConnectAPI\/GET-v1-gameCenterMatchmakingQueues-_id_-metrics-matchmakingRequests] endpoint. In the query parameters, pass the Game Center details `id` and pass a value for the `granularity` parameter that returns the level of information you want. To get the Game Center detail `id`, use the [doc:\/\/com.apple.documentation\/documentation\/AppStoreConnectAPI\/POST-v1-gameCenterDetails] or [doc:\/\/com.apple.documentation\/documentation\/AppStoreConnectAPI\/GET-v1-apps] endpoint.\n\nParse the match request data in the response. If the `count` field in the [doc:\/\/com.apple.documentation\/documentation\/AppStoreConnectAPI\/GameCenterMatchmakingAppRequestsV1MetricResponse\/Data-data.dictionary\/DataPoints-data.dictionary\/Values-data.dictionary] object isn’t the value you expect, verify that the game submits a [doc:\/\/com.apple.gamekit\/documentation\/GameKit\/GKMatchRequest] object with the correct value for the [doc:\/\/com.apple.gamekit\/documentation\/GameKit\/GKMatchRequest\/queueName] property. Also, check device logs for any errors that may occur when submitting match requests.\n\nTo organize the match requests by type (`MATCHED`, `CANCELED`, and `EXPIRED`), set the `groupBy` query parameter to `result`.\n\n### View match request errors\n\nRuntime errors can occur when your game submits a match request. If an error occurs while Game Center evaluates a match request, it may reject it and log an error. To view these types of errors, pass the matchmaking rule `id` and pass a `granularity` query parameter to the [doc:\/\/com.apple.documentation\/documentation\/AppStoreConnectAPI\/GET-v1-gameCenterMatchmakingRules-_id_-metrics-matchmakingRuleErrors] endpoint.\n\nIf errors occur, use the testing` `APIs to reproduce the error. For more information, see [doc:\/\/com.apple.gamekit\/documentation\/GameKit\/testing-matchmaking-rules].\n\nFor example, you can verify that the game passes the correct key for game-specific data that your matchmaking rules use in the `GKMatchRequest` [doc:\/\/com.apple.gamekit\/documentation\/GameKit\/GKMatchRequest\/properties] and [doc:\/\/com.apple.gamekit\/documentation\/GameKit\/GKMatchRequest\/recipientProperties] properties.\n\nTo get the matchmaking rule `id`, use the [doc:\/\/com.apple.documentation\/documentation\/AppStoreConnectAPI\/POST-v1-gameCenterMatchmakingRules] endpoint.\n\n### Check if your rules are too restrictive\n\nYour matchmaking rules should strike a balance between finding the best players and reducing wait times. Check whether your rules are too restrictive by getting the frequency that your rules reject candidate matches using the [doc:\/\/com.apple.documentation\/documentation\/AppStoreConnectAPI\/GET-v1-gameCenterMatchmakingRules-_id_-metrics-matchmakingBooleanRuleResults] and [doc:\/\/com.apple.documentation\/documentation\/AppStoreConnectAPI\/GET-v1-gameCenterMatchmakingRules-_id_-metrics-matchmakingNumberRuleResults] endpoints. Pass the matchmaking rule `id,` pass a `granularity` query parameter, and to organize the results by type, set the `groupBy` query parameter to `result`.\n\nIf your rules are too restrictive, consider relaxing the criteria over time using a match rule with an age function. For more information, see [doc:\/\/com.apple.gamekit\/documentation\/GameKit\/finding-players-with-similar-skill-levels] and [doc:\/\/com.apple.documentation\/documentation\/AppStoreConnectAPI\/expressions] in App Store Connect API.\n\n### Keep the queues short and responsive\n\nIf you submit too many match requests to one queue, the matchmaking algorithm may struggle to keep up with the requests and fail to find candidate matches, even when they exist in the queue. To avoid this problem, monitor the size of your queue using the [doc:\/\/com.apple.documentation\/documentation\/AppStoreConnectAPI\/GET-v1-gameCenterMatchmakingQueues-_id_-metrics-matchmakingQueueSizes] endpoint. Pass the queue `id` and pass a `granularity` query parameter.\n\nIf the algorithm fails to find players as the queue size increases, try adding one or more queues and splitting match requests between them. For best results, keep the number of requests in each queue under 100. For more information, see [doc:\/\/com.apple.gamekit\/documentation\/GameKit\/matchmaking-rules#The-matchmaking-rules-algorithm].\n\nTo get the queue `id`, use the [doc:\/\/com.apple.documentation\/documentation\/AppStoreConnectAPI\/POST-v1-gameCenterMatchmakingQueues] endpoint.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/GameKit\/troubleshooting-matchmaking-rules-using-metrics\ncrawled: 2025-12-02T19:34:00Z\n---\n\n# Troubleshooting matchmaking rules using metrics\n\n**Article**\n\nInvestigate issues with Game Center by evaluating your matchmaking rules using metrics endpoints.\n\n## Overview\n\nYou can diagnose problems with your matchmaking rules using the metrics endpoints. You can get matchmaking data at different granularities, such as every 15 minutes for 8 hours, hourly over 24 hours, or daily for 30 days. If Game Center takes too long to find matches or fails to find matches, use the metrics APIs to help troubleshoot your rules.\n\n### View match requests on the queue\n\nFirst, confirm that your game submits requests to the correct queue using the [doc:\/\/com.apple.documentation\/documentation\/AppStoreConnectAPI\/GET-v1-gameCenterMatchmakingQueues-_id_-metrics-matchmakingRequests] endpoint. In the query parameters, pass the Game Center details `id` and pass a value for the `granularity` parameter that returns the level of information you want. To get the Game Center detail `id`, use the [doc:\/\/com.apple.documentation\/documentation\/AppStoreConnectAPI\/POST-v1-gameCenterDetails] or [doc:\/\/com.apple.documentation\/documentation\/AppStoreConnectAPI\/GET-v1-apps] endpoint.\n\n```other\nGET \/v1\/gameCenterMatchmakingQueues\/8fb73d41-1ca1-1cbf-2538-9df424beb10b\/metrics\/matchmakingRequests?granularity=PT15M\n```\n\nParse the match request data in the response. If the `count` field in the [doc:\/\/com.apple.documentation\/documentation\/AppStoreConnectAPI\/GameCenterMatchmakingAppRequestsV1MetricResponse\/Data-data.dictionary\/DataPoints-data.dictionary\/Values-data.dictionary] object isn’t the value you expect, verify that the game submits a [doc:\/\/com.apple.gamekit\/documentation\/GameKit\/GKMatchRequest] object with the correct value for the [doc:\/\/com.apple.gamekit\/documentation\/GameKit\/GKMatchRequest\/queueName] property. Also, check device logs for any errors that may occur when submitting match requests.\n\n```json\n{    \n      “data”: [    \n        {  \n          \"type\": \"gameCenterMatchmakingQueueRequests\",  \n          “dataPoints”: [   \n            {  \n              “start”: “2023-10-05T04:00:00Z”, \n              “end”: “2023-10-05T04:15:00Z”, \n              “values”: {    \n                “averageSecondsInQueue”: 2.9630714285714284, \n                “p95SecondsInQueue”: 3.838, \n                “count”: 14,   \n                “p50SecondsInQueue”: 3.36   \n              }    \n            },\n...\n```\n\nTo organize the match requests by type (`MATCHED`, `CANCELED`, and `EXPIRED`), set the `groupBy` query parameter to `result`.\n\n```other\nGET \/v1\/gameCenterMatchmakingQueues\/8fb73d41-1ca1-1cbf-2538-9df424beb10b\/metrics\/matchmakingRequests?granularity=PT15M&groupBy=result\n```\n\n\n\n### View match request errors\n\nRuntime errors can occur when your game submits a match request. If an error occurs while Game Center evaluates a match request, it may reject it and log an error. To view these types of errors, pass the matchmaking rule `id` and pass a `granularity` query parameter to the [doc:\/\/com.apple.documentation\/documentation\/AppStoreConnectAPI\/GET-v1-gameCenterMatchmakingRules-_id_-metrics-matchmakingRuleErrors] endpoint.\n\n```other\nGET \/v1\/gameCenterMatchmakingRules\/2b4835c6-d06b-479d-8b0f-dab9d7eb3d11\/metrics\/matchmakingRuleErrors?granularity=PT15M\n```\n\nIf errors occur, use the testing` `APIs to reproduce the error. For more information, see [doc:\/\/com.apple.gamekit\/documentation\/GameKit\/testing-matchmaking-rules].\n\nFor example, you can verify that the game passes the correct key for game-specific data that your matchmaking rules use in the `GKMatchRequest` [doc:\/\/com.apple.gamekit\/documentation\/GameKit\/GKMatchRequest\/properties] and [doc:\/\/com.apple.gamekit\/documentation\/GameKit\/GKMatchRequest\/recipientProperties] properties.\n\nTo get the matchmaking rule `id`, use the [doc:\/\/com.apple.documentation\/documentation\/AppStoreConnectAPI\/POST-v1-gameCenterMatchmakingRules] endpoint.\n\n### Check if your rules are too restrictive\n\nYour matchmaking rules should strike a balance between finding the best players and reducing wait times. Check whether your rules are too restrictive by getting the frequency that your rules reject candidate matches using the [doc:\/\/com.apple.documentation\/documentation\/AppStoreConnectAPI\/GET-v1-gameCenterMatchmakingRules-_id_-metrics-matchmakingBooleanRuleResults] and [doc:\/\/com.apple.documentation\/documentation\/AppStoreConnectAPI\/GET-v1-gameCenterMatchmakingRules-_id_-metrics-matchmakingNumberRuleResults] endpoints. Pass the matchmaking rule `id,` pass a `granularity` query parameter, and to organize the results by type, set the `groupBy` query parameter to `result`.\n\n```other\nGET \/v1\/gameCenterMatchmakingRules\/0f0fcbf9-43b6-429d-8c08-fcaf66a52872\/metrics\/matchmakingBooleanRuleResults?granularity=PT15M&groupBy=result\n```\n\nIf your rules are too restrictive, consider relaxing the criteria over time using a match rule with an age function. For more information, see [doc:\/\/com.apple.gamekit\/documentation\/GameKit\/finding-players-with-similar-skill-levels] and [doc:\/\/com.apple.documentation\/documentation\/AppStoreConnectAPI\/expressions] in App Store Connect API.\n\n### Keep the queues short and responsive\n\nIf you submit too many match requests to one queue, the matchmaking algorithm may struggle to keep up with the requests and fail to find candidate matches, even when they exist in the queue. To avoid this problem, monitor the size of your queue using the [doc:\/\/com.apple.documentation\/documentation\/AppStoreConnectAPI\/GET-v1-gameCenterMatchmakingQueues-_id_-metrics-matchmakingQueueSizes] endpoint. Pass the queue `id` and pass a `granularity` query parameter.\n\n```other\nGET \/v1\/gameCenterMatchmakingQueues\/532ad9c0-1a28-4536-ad57-33213bcc0a29\/metrics\/matchmakingQueueSizes?granularity=PT15M\n```\n\nIf the algorithm fails to find players as the queue size increases, try adding one or more queues and splitting match requests between them. For best results, keep the number of requests in each queue under 100. For more information, see [doc:\/\/com.apple.gamekit\/documentation\/GameKit\/matchmaking-rules#The-matchmaking-rules-algorithm].\n\nTo get the queue `id`, use the [doc:\/\/com.apple.documentation\/documentation\/AppStoreConnectAPI\/POST-v1-gameCenterMatchmakingQueues] endpoint.\n\n## Testing\n\n- **Testing matchmaking rules**: Test your matchmaking rules before you use them in your game.\n- **Testing rule sets with player traffic using metrics**: Get metrics on a new rule set with real match requests before releasing it.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Test your matchmaking rules before you use them in your game.",
          "name" : "Testing matchmaking rules",
          "url" : "https:\/\/developer.apple.com\/documentation\/GameKit\/testing-matchmaking-rules"
        },
        {
          "description" : "Get metrics on a new rule set with real match requests before releasing it.",
          "name" : "Testing rule sets with player traffic using metrics",
          "url" : "https:\/\/developer.apple.com\/documentation\/GameKit\/testing-rule-sets-with-player-traffic-using-metrics"
        }
      ],
      "title" : "Testing"
    }
  ],
  "source" : "appleJSON",
  "title" : "Troubleshooting matchmaking rules using metrics",
  "url" : "https:\/\/developer.apple.com\/documentation\/GameKit\/troubleshooting-matchmaking-rules-using-metrics"
}