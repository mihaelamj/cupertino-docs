{
  "abstract" : "A type that you use with an immersive space to display fully immersive content using Metal.",
  "codeExamples" : [
    {
      "code" : "ImmersiveSpace(id: \"MyContent\") {\n    CompositorLayer { layerRenderer in\n        \/\/ Set up and run the Metal render loop.\n            let renderThread = Thread {\n                let engine = my_engine_create(layerRenderer)\n                my_engine_render_loop(engine)\n            }\n            renderThread.name = \"Render Thread\"\n            renderThread.start()\n        }\n    }\n}",
      "language" : "swift"
    }
  ],
  "conformsTo" : [
    "CompositorContent",
    "Copyable",
    "ImmersiveSpaceContent",
    "Sendable",
    "SendableMetatype"
  ],
  "contentHash" : "b190ed0b633ae7d50ecc9a99c1e721d29afefd0ee5c469504728c8f8fc27b7f6",
  "crawledAt" : "2025-12-02T16:05:27Z",
  "declaration" : {
    "code" : "struct CompositorLayer",
    "language" : "swift"
  },
  "id" : "3437D6F3-E239-4877-9ADB-F9E7C1B5A72D",
  "kind" : "struct",
  "language" : "swift",
  "module" : "CompositorServices",
  "overview" : "## Overview\n\nUse a [doc:\/\/com.apple.compositorservices\/documentation\/CompositorServices\/CompositorLayer] to specify the content of an [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/ImmersiveSpace] when you want to render that content yourself using Metal. When you present a space with this content, Compositor Services creates a [doc:\/\/com.apple.compositorservices\/documentation\/CompositorServices\/LayerRenderer] type for you to use with your rendering code. The layer renderer provides configuration details, timing information, and the Metal types and information you need to configure your rendering loop and manage the rendering process.\n\nThe following example shows a [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/ImmersiveSpace] that uses a [doc:\/\/com.apple.compositorservices\/documentation\/CompositorServices\/CompositorLayer] to specify its content. Use the closure for the [doc:\/\/com.apple.compositorservices\/documentation\/CompositorServices\/CompositorLayer] to set up and start your Metal rendering code. In this example, Compositor Services creates the layer using a default set of Metal configuration options. To customize the configuration of your Metal rendering environment, pass a custom [doc:\/\/com.apple.compositorservices\/documentation\/CompositorServices\/CompositorLayerConfiguration] type to your [doc:\/\/com.apple.compositorservices\/documentation\/CompositorServices\/CompositorLayer] at initialization time.\n\nFor more information about how to set up and start your Metal rendering engine, see [doc:\/\/com.apple.compositorservices\/documentation\/CompositorServices\/drawing-fully-immersive-content-using-metal].",
  "platforms" : [
    "macOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/CompositorServices\/CompositorLayer\ncrawled: 2025-12-02T16:05:27Z\n---\n\n# CompositorLayer\n\n**Structure**\n\nA type that you use with an immersive space to display fully immersive content using Metal.\n\n## Declaration\n\n```swift\nstruct CompositorLayer\n```\n\n```swift\n@MainActor @preconcurrency struct CompositorLayer\n```\n\n## Overview\n\nUse a [doc:\/\/com.apple.compositorservices\/documentation\/CompositorServices\/CompositorLayer] to specify the content of an [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/ImmersiveSpace] when you want to render that content yourself using Metal. When you present a space with this content, Compositor Services creates a [doc:\/\/com.apple.compositorservices\/documentation\/CompositorServices\/LayerRenderer] type for you to use with your rendering code. The layer renderer provides configuration details, timing information, and the Metal types and information you need to configure your rendering loop and manage the rendering process.\n\nThe following example shows a [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/ImmersiveSpace] that uses a [doc:\/\/com.apple.compositorservices\/documentation\/CompositorServices\/CompositorLayer] to specify its content. Use the closure for the [doc:\/\/com.apple.compositorservices\/documentation\/CompositorServices\/CompositorLayer] to set up and start your Metal rendering code. In this example, Compositor Services creates the layer using a default set of Metal configuration options. To customize the configuration of your Metal rendering environment, pass a custom [doc:\/\/com.apple.compositorservices\/documentation\/CompositorServices\/CompositorLayerConfiguration] type to your [doc:\/\/com.apple.compositorservices\/documentation\/CompositorServices\/CompositorLayer] at initialization time.\n\n```swift\nImmersiveSpace(id: \"MyContent\") {\n    CompositorLayer { layerRenderer in\n        \/\/ Set up and run the Metal render loop.\n            let renderThread = Thread {\n                let engine = my_engine_create(layerRenderer)\n                my_engine_render_loop(engine)\n            }\n            renderThread.name = \"Render Thread\"\n            renderThread.start()\n        }\n    }\n}\n```\n\nFor more information about how to set up and start your Metal rendering engine, see [doc:\/\/com.apple.compositorservices\/documentation\/CompositorServices\/drawing-fully-immersive-content-using-metal].\n\n## Initializers\n\n- **init(configuration:renderer:)**: Creates a [doc:\/\/com.apple.compositorservices\/documentation\/CompositorServices\/CompositorLayer] instance.\n- **init(configuration:renderer:)**\n- **init(configuration:renderer:_:)**\n\n## App integration\n\n- **Drawing fully immersive content using Metal**: Create a fully immersive experience in visionOS using a custom Metal-based rendering engine.\n- **Interacting with virtual content blended with passthrough**: Present a mixed immersion style space to draw content in a person’s surroundings, and choose how upper limbs appear with respect to rendered content.\n- **Rendering hover effects in Metal immersive apps**: Change the appearance of a rendered onscreen element when a player gazes at it.\n- **CompositorLayerConfiguration**: An interface for specifying the texture configurations and rendering behaviors to use with your Metal rendering engine.\n- **DefaultCompositorLayerConfiguration**: A type that configures the layer with the default texture configurations and rendering behaviors for the current device.\n\n## Conforms To\n\n- CompositorContent\n- Copyable\n- ImmersiveSpaceContent\n- Sendable\n- SendableMetatype\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Creates a [doc:\/\/com.apple.compositorservices\/documentation\/CompositorServices\/CompositorLayer] instance.",
          "name" : "init(configuration:renderer:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CompositorServices\/CompositorLayer\/init(configuration:renderer:)-2uxn7"
        },
        {
          "description" : "",
          "name" : "init(configuration:renderer:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CompositorServices\/CompositorLayer\/init(configuration:renderer:)-81vbz"
        },
        {
          "description" : "",
          "name" : "init(configuration:renderer:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CompositorServices\/CompositorLayer\/init(configuration:renderer:_:)"
        }
      ],
      "title" : "Initializers"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Create a fully immersive experience in visionOS using a custom Metal-based rendering engine.",
          "name" : "Drawing fully immersive content using Metal",
          "url" : "https:\/\/developer.apple.com\/documentation\/CompositorServices\/drawing-fully-immersive-content-using-metal"
        },
        {
          "description" : "Present a mixed immersion style space to draw content in a person’s surroundings, and choose how upper limbs appear with respect to rendered content.",
          "name" : "Interacting with virtual content blended with passthrough",
          "url" : "https:\/\/developer.apple.com\/documentation\/CompositorServices\/interacting-with-virtual-content-blended-with-passthrough"
        },
        {
          "description" : "Change the appearance of a rendered onscreen element when a player gazes at it.",
          "name" : "Rendering hover effects in Metal immersive apps",
          "url" : "https:\/\/developer.apple.com\/documentation\/CompositorServices\/rendering_hover_effects_in_metal_immersive_apps"
        },
        {
          "description" : "An interface for specifying the texture configurations and rendering behaviors to use with your Metal rendering engine.",
          "name" : "CompositorLayerConfiguration",
          "url" : "https:\/\/developer.apple.com\/documentation\/CompositorServices\/CompositorLayerConfiguration"
        },
        {
          "description" : "A type that configures the layer with the default texture configurations and rendering behaviors for the current device.",
          "name" : "DefaultCompositorLayerConfiguration",
          "url" : "https:\/\/developer.apple.com\/documentation\/CompositorServices\/DefaultCompositorLayerConfiguration"
        }
      ],
      "title" : "App integration"
    }
  ],
  "source" : "appleJSON",
  "title" : "CompositorLayer",
  "url" : "https:\/\/developer.apple.com\/documentation\/CompositorServices\/CompositorLayer"
}