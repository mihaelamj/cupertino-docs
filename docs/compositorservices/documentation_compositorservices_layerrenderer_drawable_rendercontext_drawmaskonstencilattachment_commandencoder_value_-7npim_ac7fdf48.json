{
  "abstract" : "Store the value parameter in the stencil texture in the pixels that the Compositor displays onscreen.",
  "codeExamples" : [

  ],
  "contentHash" : "a1274099b85f6f82094422cc234262c3bc9ddef0ba3b2bfebf4d119fed3e8f2f",
  "crawledAt" : "2025-12-08T02:13:53Z",
  "declaration" : {
    "code" : "func drawMaskOnStencilAttachment(commandEncoder command_encoder: any MTL4RenderCommandEncoder, value: UInt8)",
    "language" : "swift"
  },
  "id" : "744B0AF8-56E9-47D1-B840-4B452DBC03D2",
  "kind" : "method",
  "language" : "swift",
  "module" : "Compositor Services",
  "overview" : "## Discussion\n\nIn full and mixed immersion styles, [doc:\/\/com.apple.compositorservices\/documentation\/CompositorServices\/LayerRenderer\/Drawable\/RenderContext\/drawMaskOnStencilAttachment(commandEncoder:value:)-65i67] stores the full texture. The command encoder used in the render context has the following constraints:\n\nIf the render encoder has multiple color attachments, set [doc:\/\/com.apple.documentation\/documentation\/Metal\/MTL4RenderPassDescriptor\/supportColorAttachmentMapping] to `true` to avoid Metal API validation errors.\n\nFor testing performance of this method, always test your app on-device rather than in Simulator. However, if you need to iterate on your code in development, you can disable API validation in Xcode, or separate the rendering into multiple render encoders for other color attachments.\n\nThis function modifies the depth stencil state, viewports, vertex amplification count, and some of the texture bindings in the render command encoder passed to the function. Make sure to set those values again to those expected in your app.",
  "platforms" : [
    "macOS",
    "visionOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/CompositorServices\/LayerRenderer\/Drawable\/RenderContext\/drawMaskOnStencilAttachment(commandEncoder:value:)-7npim\ncrawled: 2025-12-08T02:13:53Z\n---\n\n# drawMaskOnStencilAttachment(commandEncoder:value:)\n\n**Instance Method**\n\nStore the value parameter in the stencil texture in the pixels that the Compositor displays onscreen.\n\n## Declaration\n\n```swift\nfunc drawMaskOnStencilAttachment(commandEncoder command_encoder: any MTL4RenderCommandEncoder, value: UInt8)\n```\n\n## Parameters\n\n- **value**: The value to use when updating the stencil texture in the [doc:\/\/com.apple.documentation\/documentation\/Metal\/MTLRenderCommandEncoder].\n\n## Discussion\n\nIn full and mixed immersion styles, [doc:\/\/com.apple.compositorservices\/documentation\/CompositorServices\/LayerRenderer\/Drawable\/RenderContext\/drawMaskOnStencilAttachment(commandEncoder:value:)-65i67] stores the full texture. The command encoder used in the render context has the following constraints:\n\n- The stencil texture has the same pixel format as [doc:\/\/com.apple.compositorservices\/documentation\/CompositorServices\/cp_layer_renderer_configuration_get_drawable_render_context_stencil_format].\n- The [doc:\/\/com.apple.documentation\/documentation\/Metal\/MTLRenderPassDescriptor\/renderTargetArrayLength] is the same as the number of views in the layer renderer drawable.\n- The [doc:\/\/com.apple.documentation\/documentation\/Metal\/MTLRenderPassDescriptor\/rasterizationRateMap] matches the one provided by the layer renderer drawable.\n- The API doesnâ€™t support dedicated or shared layouts.\n\nIf the render encoder has multiple color attachments, set [doc:\/\/com.apple.documentation\/documentation\/Metal\/MTL4RenderPassDescriptor\/supportColorAttachmentMapping] to `true` to avoid Metal API validation errors.\n\nFor testing performance of this method, always test your app on-device rather than in Simulator. However, if you need to iterate on your code in development, you can disable API validation in Xcode, or separate the rendering into multiple render encoders for other color attachments.\n\nThis function modifies the depth stencil state, viewports, vertex amplification count, and some of the texture bindings in the render command encoder passed to the function. Make sure to set those values again to those expected in your app.\n\n## Rendering with Metal 4\n\n- **endEncoding(commandEncoder:)**: Finish encoding the render context.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Finish encoding the render context.",
          "name" : "endEncoding(commandEncoder:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CompositorServices\/LayerRenderer\/Drawable\/RenderContext\/endEncoding(commandEncoder:)-2l6lk"
        }
      ],
      "title" : "Rendering with Metal 4"
    }
  ],
  "source" : "appleJSON",
  "title" : "drawMaskOnStencilAttachment(commandEncoder:value:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/CompositorServices\/LayerRenderer\/Drawable\/RenderContext\/drawMaskOnStencilAttachment(commandEncoder:value:)-7npim"
}