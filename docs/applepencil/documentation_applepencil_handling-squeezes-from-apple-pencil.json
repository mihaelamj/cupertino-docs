{
  "abstract" : "Detect and respond to squeezes a person makes on Apple Pencil Pro.",
  "codeExamples" : [

  ],
  "contentHash" : "511807219d54ec071a0c16ed316a2b8be65484bcef827b8b82447710a28c9580",
  "crawledAt" : "2025-12-03T18:35:12Z",
  "declaration" : {
    "code" : "class ViewController: UIViewController, UIPencilInteractionDelegate {\n   \n   override func viewDidLoad() {\n       super.viewDidLoad()\n       \n       \/\/ Register for a squeeze.\n       let pencilInteraction = UIPencilInteraction(delegate: self)\n       view.addInteraction(pencilInteraction)\n   }\n   \/\/ ...\n}",
    "language" : "swift"
  },
  "id" : "1BBAC7B5-EBAA-40F6-A360-214B3103A9F1",
  "kind" : "protocol",
  "overview" : "Apple Pencil  Handling squeezes from Apple Pencil  Handling squeezes from Apple Pencil ArticleHandling squeezes from Apple PencilDetect and respond to squeezes a person makes on Apple Pencil Pro.OverviewYou can use Apple Pencil interactions to allow people to access functionality in your app quickly. Squeezing Apple Pencil Pro lets a person perform actions such as showing a contextual palette without moving the pencil to another location on the screen.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/applepencil\/handling-squeezes-from-apple-pencil\ncrawled: 2025-12-03T18:35:12Z\n---\n\n# Handling squeezes from Apple Pencil | Apple Developer Documentation\n\n- [ Apple Pencil ](\/documentation\/applepencil)\n\n- [ Handling squeezes from Apple Pencil ](\/documentation\/applepencil\/handling-squeezes-from-apple-pencil)\n\n-  Handling squeezes from Apple Pencil \n\nArticle# Handling squeezes from Apple Pencil\n\nDetect and respond to squeezes a person makes on Apple Pencil Pro.## [Overview](\/documentation\/applepencil\/handling-squeezes-from-apple-pencil#Overview)\n\nYou can use Apple Pencil interactions to allow people to access functionality in your app quickly. Squeezing Apple Pencil Pro lets a person perform actions such as showing a contextual palette without moving the pencil to another location on the screen.\n\nNote\n\nOnly Apple Pencil Pro supports squeeze interactions.\n\n### [Register for a squeeze](\/documentation\/applepencil\/handling-squeezes-from-apple-pencil#Register-for-a-squeeze)\n\nTo respond to squeezes from Apple Pencil Pro in your app, you need to register your view to receive squeeze interactions.\n\nAdd an [`onPencilSqueeze(perform:)`](\/documentation\/SwiftUI\/View\/onPencilSqueeze(perform:)) view modifier to your view.\n\n\n\n```\nMyView()\n    .onPencilSqueeze { phase in\n        \/\/ ...\n    }\n\n```\n\nCreate a [`UIPencilInteraction`](\/documentation\/UIKit\/UIPencilInteraction) object, passing an object that implements the [`UIPencilInteractionDelegate`](\/documentation\/UIKit\/UIPencilInteractionDelegate) protocol to the `delegate` parameter. Then, add the interaction to your view.\n\n\n\n```\nclass ViewController: UIViewController, UIPencilInteractionDelegate {\n   \n   override func viewDidLoad() {\n       super.viewDidLoad()\n       \n       \/\/ Register for a squeeze.\n       let pencilInteraction = UIPencilInteraction(delegate: self)\n       view.addInteraction(pencilInteraction)\n   }\n   \/\/ ...\n}\n\n```\n\n### [Check the preferred squeeze action](\/documentation\/applepencil\/handling-squeezes-from-apple-pencil#Check-the-preferred-squeeze-action)\n\nA person can choose which action they prefer to perform when they squeeze Apple Pencil Pro. They choose this preference in Settings > Apple Pencil > Actions > Squeeze. In addition to drawing-specific actions like switching drawing tools, people can configure the preferred action for squeeze to perform any App Shortcut, including pre-configured shortcuts you provide for your app.\n\nIn your app, you can check the value of this preferred action for squeeze.\n\nTo check the preferred action, use the [`preferredPencilSqueezeAction`](\/documentation\/SwiftUI\/EnvironmentValues\/preferredPencilSqueezeAction) environment value. For possible values, see [`PencilPreferredAction`](\/documentation\/SwiftUI\/PencilPreferredAction).\n\n\n\n```\n@Environment(.preferredPencilSqueezeAction) private var preferredAction\n\n```\n\nTo check the preferred action, use the [`preferredSqueezeAction`](\/documentation\/UIKit\/UIPencilInteraction\/preferredSqueezeAction) class property on [`UIPencilInteraction`](\/documentation\/UIKit\/UIPencilInteraction). For possible values, see [`UIPencilPreferredAction`](\/documentation\/UIKit\/UIPencilPreferredAction).\n\n\n\n```\nUIPencilInteraction.preferredSqueezeAction\n\n```\n\n### [Choose the action to perform](\/documentation\/applepencil\/handling-squeezes-from-apple-pencil#Choose-the-action-to-perform)\n\nWhen possible, perform the preferred action to provide a consistent user experience across apps that support squeezes. If the preferred action doesn’t make sense in your app, consider giving people a way to specify a custom action that’s suitable for your app. For design guidance, read Human Interface Guidelines > Apple Pencil and Scribble > [Squeeze](https:\/\/developer.apple.com\/design\/human-interface-guidelines\/apple-pencil-and-scribble#Squeeze).\n\nThe following code shows a snippet from a drawing app that provides custom drawing tools. This app allows a person to configure a custom action to quickly swap to their favorite custom drawing tool instead of using the systemwide preferred action for squeezes. This app also supports the preferred actions to ignore squeezes, switch to the previous tool, and show a custom contextual palette near the Apple Pencil Pro tip.\n\n\n\n```\nenum Tool {\n    case brush\n    case lasso\n    case eraser\n    case magnifier\n}\n\n\nenum CustomAction: String {\n    case switchLasso\n    case switchMagnifier\n}\n\n\n@State private var currentTool: Tool? = .brush\n@State private var previousTool: Tool?\n@State private var contextualPalettePresented = false\n@State private var contextualPaletteAnchor: PopoverAttachmentAnchor?\n\n\n@Environment(.preferredPencilSqueezeAction) private var preferredAction\n@AppStorage(\"customPencilSqueezeAction\") private var customAction: CustomAction?\n\n\nvar body: some View {\n    MyView()\n        .onPencilSqueeze { phase in\n            \/\/ Respect the systemwide preferred action to ignore squeezes.\n            guard preferredAction != .ignore else { return }\n            \n            \/\/ If the person chooses to override the systemwide\n            \/\/ squeeze action to perform a custom action in this app,\n            \/\/ check which custom action they prefer and perform that action.\n            if let customAction, case let .ended(value) = phase {\n                if customAction == .switchLasso, currentTool != .lasso {\n                    (currentTool, previousTool) = (.lasso, currentTool)\n                }\n                else if customAction == .switchMagnifier, currentTool != .magnifier {\n                    (currentTool, previousTool) = (.magnifier, currentTool)\n                }\n            }\n            \n            \/\/ If the person prefers to use the systemwide squeeze action,\n            \/\/ perform the actions that are appropriate in the context of this app:\n            \/\/ show a custom palette near the Apple Pencil Pro tip, or switch to the previous tool.\n            if preferredAction == .showContextualPalette, case let .ended(value) = phase {\n                if let anchorPoint = value.hoverPose?.anchor {\n                    contextualPaletteAnchor = .point(anchorPoint)\n                }\n                contextualPalettePresented = true\n            }\n            else if preferredAction == .switchPrevious, case let .ended(value) = phase {\n                (currentTool, previousTool) = (previousTool, currentTool)\n            }\n        }\n        .popover(\n            isPresented: $contextualPalettePresented,\n            attachmentAnchor: contextualPaletteAnchor ?? .point(.center)\n        ) {\n            MyContextualPalette()\n        }\n}\n\n```\n\n\n\n```\nenum Tool {\n    case brush\n    case lasso\n    case eraser\n    case magnifier\n}\n\n\nenum CustomAction {\n    case switchLasso\n    case switchMagnifier\n}\n\n\nprivate var currentTool: Tool? = .brush\nprivate var previousTool: Tool?\nprivate var customAction: CustomAction?\n\n\noverride func viewDidLoad() {\n    super.viewDidLoad()\n    \n    \/\/ Register for a squeeze.\n    let pencilInteraction = UIPencilInteraction(delegate: self)\n    view.addInteraction(pencilInteraction)\n}\n\n\nfunc pencilInteraction(_ interaction: UIPencilInteraction,\n                   didReceiveSqueeze squeeze: UIPencilInteraction.Squeeze) {\n    let preferredAction = UIPencilInteraction.preferredSqueezeAction\n    \n    \/\/ Respect the systemwide preferred action to ignore squeezes.\n    guard preferredAction != .ignore else { return }\n    \n    \/\/ If the person chooses to override the systemwide\n    \/\/ squeeze action to perform a custom action in this app,\n    \/\/ check which custom action they prefer and perform that action.\n    if let customAction, squeeze.phase == .ended {\n        if customAction == .switchLasso, currentTool != .lasso {\n            (currentTool, previousTool) = (.lasso, currentTool)\n        }\n        else if customAction == .switchMagnifier, currentTool != .magnifier {\n            (currentTool, previousTool) = (.magnifier, currentTool)\n        }\n    }\n    \n    \/\/ If the person prefers to use the systemwide squeeze action,\n    \/\/ perform the actions that are appropriate in the context of this app:\n    \/\/ show a custom palette near the Apple Pencil Pro tip, or switch to the previous tool.\n    if preferredAction == .showContextualPalette, squeeze.phase == .ended {\n        if let anchorPoint = squeeze.hoverPose?.location {\n            presentContextualPalette(atLocation: anchorPoint)\n        }\n    }\n    else if preferredAction == .switchPrevious, squeeze.phase == .ended {\n        (currentTool, previousTool) = (previousTool, currentTool)\n    }\n}\n\n```\n\n## [See Also](\/documentation\/applepencil\/handling-squeezes-from-apple-pencil#See-Also)\n\n#### [Related articles](\/documentation\/applepencil\/handling-squeezes-from-apple-pencil#Related-articles)\n\n[Handling double taps from Apple Pencil](\/documentation\/applepencil\/handling-double-taps-from-apple-pencil)Detect and respond to double taps a person makes on Apple Pencil.#### [Related reference in SwiftUI](\/documentation\/applepencil\/handling-squeezes-from-apple-pencil#Related-reference-in-SwiftUI)\n\n`nonisolated func onPencilSqueeze(perform action: @escaping (PencilSqueezeGesturePhase) -> Void) -> some View\n`Adds an action to perform when the user squeezes their Apple Pencil.[`@frozen enum PencilSqueezeGesturePhase`](\/documentation\/SwiftUI\/PencilSqueezeGesturePhase)Describes the phase and value of an Apple Pencil squeeze gesture.[`struct PencilSqueezeGestureValue`](\/documentation\/SwiftUI\/PencilSqueezeGestureValue)Describes the value of an Apple Pencil squeeze gesture.[`struct PencilPreferredAction`](\/documentation\/SwiftUI\/PencilPreferredAction)An action that the user prefers to perform after double-tapping their Apple Pencil.[`struct PencilHoverPose`](\/documentation\/SwiftUI\/PencilHoverPose)A value describing the location and distance of an Apple Pencil hovering in the area above a view’s bounds.#### [Related reference in UIKit](\/documentation\/applepencil\/handling-squeezes-from-apple-pencil#Related-reference-in-UIKit)\n\n[`@MainActor class UIPencilInteraction`](\/documentation\/UIKit\/UIPencilInteraction)An interaction that tells your app when a person double-taps or squeezes Apple Pencil.[`@MainActor protocol UIPencilInteractionDelegate : NSObjectProtocol`](\/documentation\/UIKit\/UIPencilInteractionDelegate)The interface an object implements to handle double taps or squeezes a person makes on Apple Pencil.[`@MainActor class Squeeze`](\/documentation\/UIKit\/UIPencilInteraction\/Squeeze)An interaction that represents a squeeze on Apple Pencil.[`enum Phase`](\/documentation\/UIKit\/UIPencilInteraction\/Phase)Constants that describe the phases of an interaction on Apple Pencil.[`@MainActor class UIPencilHoverPose`](\/documentation\/UIKit\/UIPencilHoverPose)An object that describes the hover pose of Apple Pencil during an interaction like double tap or squeeze.",
  "sections" : [
    {
      "content" : "",
      "title" : "Overview"
    },
    {
      "content" : "",
      "title" : "See Also"
    }
  ],
  "source" : "appleWebKit",
  "title" : "Handling squeezes from Apple Pencil | Apple Developer Documentation",
  "url" : "https:\/\/developer.apple.com\/documentation\/applepencil\/handling-squeezes-from-apple-pencil"
}