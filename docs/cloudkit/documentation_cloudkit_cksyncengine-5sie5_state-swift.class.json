{
  "abstract" : "An object that manages the sync engine’s state.",
  "codeExamples" : [

  ],
  "conformsTo" : [
    "Sendable",
    "SendableMetatype"
  ],
  "contentHash" : "f63bb49d9b7f8b3cb996b634e0a98b743518bc2329415899867a03daf938140f",
  "crawledAt" : "2025-12-02T13:36:02Z",
  "declaration" : {
    "code" : "final class State",
    "language" : "swift"
  },
  "id" : "54ECE476-B51A-403E-82C3-70999036CCE3",
  "kind" : "class",
  "module" : "CloudKit",
  "overview" : "## Overview\n\nTo reliably and consistently sync your app’s data, a sync engine keeps a record of several important pieces of data, such as server changes tokens (for databases and record zones), subscription identifiers, the most recent [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKUserIdentity\/userRecordID], and so on. This class automatically manages that state on behalf of your app, but there are certain elements you can modify. For example, you control the list of pending changes to send to the iCloud servers and manipulate that list using the [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKSyncEngine-5sie5\/State-swift.class\/add(pendingDatabaseChanges:)] and [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKSyncEngine-5sie5\/State-swift.class\/add(pendingRecordZoneChanges:)] methods. If there aren’t any scheduled sync operations when you invoke these methods, the engine automatically schedules one.\n\nAn engine’s state changes periodically and, when it does, the sync engine dispatches a [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKSyncEngine-5sie5\/Event\/stateUpdate(_:)] event to your delegate. The event contains an instance of [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKSyncEngine-5sie5\/State-swift.class\/Serialization] and, on receipt of such an event, it’s your responsibility to persist the serialized state to disk so that it’s available across app launches. On the next initialization of the sync engine, you provide the most recently persisted state as part of the engine’s configuration. For more information, see [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKSyncEngine-5sie5\/Configuration\/init(database:stateSerialization:delegate:)].",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "tvOS",
    "visionOS",
    "watchOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/CloudKit\/CKSyncEngine-5sie5\/State-swift.class\ncrawled: 2025-12-02T13:36:02Z\n---\n\n# CKSyncEngine.State\n\n**Class**\n\nAn object that manages the sync engine’s state.\n\n## Declaration\n\n```swift\nfinal class State\n```\n\n## Overview\n\nTo reliably and consistently sync your app’s data, a sync engine keeps a record of several important pieces of data, such as server changes tokens (for databases and record zones), subscription identifiers, the most recent [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKUserIdentity\/userRecordID], and so on. This class automatically manages that state on behalf of your app, but there are certain elements you can modify. For example, you control the list of pending changes to send to the iCloud servers and manipulate that list using the [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKSyncEngine-5sie5\/State-swift.class\/add(pendingDatabaseChanges:)] and [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKSyncEngine-5sie5\/State-swift.class\/add(pendingRecordZoneChanges:)] methods. If there aren’t any scheduled sync operations when you invoke these methods, the engine automatically schedules one.\n\nAn engine’s state changes periodically and, when it does, the sync engine dispatches a [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKSyncEngine-5sie5\/Event\/stateUpdate(_:)] event to your delegate. The event contains an instance of [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKSyncEngine-5sie5\/State-swift.class\/Serialization] and, on receipt of such an event, it’s your responsibility to persist the serialized state to disk so that it’s available across app launches. On the next initialization of the sync engine, you provide the most recently persisted state as part of the engine’s configuration. For more information, see [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKSyncEngine-5sie5\/Configuration\/init(database:stateSerialization:delegate:)].\n\n## Accessing pending changes\n\n- **hasPendingUntrackedChanges**: A Boolean value that indicates whether there are pending changes that the sync engine is unaware of.\n- **pendingDatabaseChanges**: The database changes that the sync engine has yet to send to the iCloud servers.\n- **pendingRecordZoneChanges**: The record zone changes that the sync engine has yet to send to the iCloud servers.\n\n## Manipulating pending changes\n\n- **add(pendingDatabaseChanges:)**: Adds the specified database changes to the state.\n- **remove(pendingDatabaseChanges:)**: Removes the specified database changes from the state.\n- **CKSyncEngine.PendingDatabaseChange**: Describes an unsent database modification.\n- **add(pendingRecordZoneChanges:)**: Adds the specified record zone changes to the state.\n- **remove(pendingRecordZoneChanges:)**: Removes the specified record zone changes from the state.\n- **CKSyncEngine.PendingRecordZoneChange**: Describes an unsent record modification.\n\n## Serializing state\n\n- **CKSyncEngine.State.Serialization**: A type that contains the serialized representation of a sync engine’s state.\n\n## Instance Properties\n\n- **zoneIDsWithUnfetchedServerChanges**\n\n## Accessing the engine’s attributes\n\n- **database**: The associated database.\n- **state**: The sync engine’s state.\n\n## Conforms To\n\n- Sendable\n- SendableMetatype\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "A Boolean value that indicates whether there are pending changes that the sync engine is unaware of.",
          "name" : "hasPendingUntrackedChanges",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKSyncEngine-5sie5\/State-swift.class\/hasPendingUntrackedChanges"
        },
        {
          "description" : "The database changes that the sync engine has yet to send to the iCloud servers.",
          "name" : "pendingDatabaseChanges",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKSyncEngine-5sie5\/State-swift.class\/pendingDatabaseChanges"
        },
        {
          "description" : "The record zone changes that the sync engine has yet to send to the iCloud servers.",
          "name" : "pendingRecordZoneChanges",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKSyncEngine-5sie5\/State-swift.class\/pendingRecordZoneChanges"
        }
      ],
      "title" : "Accessing pending changes"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Adds the specified database changes to the state.",
          "name" : "add(pendingDatabaseChanges:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKSyncEngine-5sie5\/State-swift.class\/add(pendingDatabaseChanges:)"
        },
        {
          "description" : "Removes the specified database changes from the state.",
          "name" : "remove(pendingDatabaseChanges:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKSyncEngine-5sie5\/State-swift.class\/remove(pendingDatabaseChanges:)"
        },
        {
          "description" : "Describes an unsent database modification.",
          "name" : "CKSyncEngine.PendingDatabaseChange",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKSyncEngine-5sie5\/PendingDatabaseChange"
        },
        {
          "description" : "Adds the specified record zone changes to the state.",
          "name" : "add(pendingRecordZoneChanges:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKSyncEngine-5sie5\/State-swift.class\/add(pendingRecordZoneChanges:)"
        },
        {
          "description" : "Removes the specified record zone changes from the state.",
          "name" : "remove(pendingRecordZoneChanges:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKSyncEngine-5sie5\/State-swift.class\/remove(pendingRecordZoneChanges:)"
        },
        {
          "description" : "Describes an unsent record modification.",
          "name" : "CKSyncEngine.PendingRecordZoneChange",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKSyncEngine-5sie5\/PendingRecordZoneChange"
        }
      ],
      "title" : "Manipulating pending changes"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "A type that contains the serialized representation of a sync engine’s state.",
          "name" : "CKSyncEngine.State.Serialization",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKSyncEngine-5sie5\/State-swift.class\/Serialization"
        }
      ],
      "title" : "Serializing state"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "",
          "name" : "zoneIDsWithUnfetchedServerChanges",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKSyncEngine-5sie5\/State-swift.class\/zoneIDsWithUnfetchedServerChanges"
        }
      ],
      "title" : "Instance Properties"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "The associated database.",
          "name" : "database",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKSyncEngine-5sie5\/database"
        },
        {
          "description" : "The sync engine’s state.",
          "name" : "state",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKSyncEngine-5sie5\/state-swift.property"
        }
      ],
      "title" : "Accessing the engine’s attributes"
    }
  ],
  "source" : "appleJSON",
  "title" : "CKSyncEngine.State",
  "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKSyncEngine-5sie5\/State-swift.class"
}