{
  "abstract" : "Manipulate records on-device and save changes to the server.",
  "codeExamples" : [
    {
      "code" : "\/\/ Create a predicate that performs a case-insensitive search \n\/\/ of the record's address field for the value 'Cupertino'.\nlet predicate = NSPredicate(format: \"address CONTAINS[c] 'Cupertino'\")\n\n\/\/ Use the predicate to create a query. Limit the query to \n\/\/ only retrieve records of the 'Property' record type.\nlet query = CKQuery(recordType: \"Property\", predicate: predicate)\n\n\/\/ Set the query's sort descriptors so that iCloud returns \n\/\/ the records in chronological order.\nquery.sortDescriptors = [\n    NSSortDescriptor(key: \"creationDate\", ascending: true)\n]\n\n\/\/ Use the query to create a query operation. Scope the \n\/\/ operation to the record zone that contains property\n\/\/ records.\nlet operation = CKQueryOperation(query: query)\noperation.zoneID = propertiesRecordZone.zoneID\n\n\/\/ Each property has an address, a brochure, an owner, and\n\/\/ a sale price. Don't include the 'brochure' field in the \n\/\/ query results. It contains a PDF asset, which can be \n\/\/ several megabytes in size.\noperation.desiredKeys = [\n    \"address\",\n    \"ownerName\",\n    \"salePrice\"\n]",
      "language" : "swift"
    }
  ],
  "contentHash" : "5b423ede66a6072b651a542af0701313bcea55d280a71b3e8df7152ae70211e6",
  "crawledAt" : "2025-12-01T09:54:38Z",
  "id" : "CE2076E2-AAD9-4FCF-97F3-ABA1DB364560",
  "kind" : "collection",
  "module" : "CloudKit",
  "overview" : "## Overview\n\nCloudKit uses records and record zones to manage your app’s schema and the data it contains. You create these objects on the user’s device and save them to iCloud. After saving the objects, other devices can access and use them.\n\nUse [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKRecord] to create a record, which must have a record ID. The record ID consists of the record’s name and the ID of the record zone to store it in. If you don’t provide a record zone ID, CloudKit stores the record in the default zone. Record IDs must be unique within the database that contains the record. Derive a record’s name from an object that guarantees uniqueness, such as a UUID. CloudKit assigns a unique record name if you don’t provide one. After you create a record, assign its keys and their values, and then save it to iCloud with [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKModifyRecordsOperation]. Use the same operation to delete records.\n\nCloudKit stores records in record zones, which allow you to group specific types of records. For example, you might store a `Product` record type in one zone, and a `Customer` record type in another. Storing records in zones can make fetching them more efficient because you can scope queries, and other fetch operations, to a specific record zone to prevent searching the entire database. Only the private database supports custom record zones. Use [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKRecordZone] to create a zone, and then save it to the user’s private database with [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKModifyRecordZonesOperation]. The same operation supports deleting record zones. When you delete a zone, CloudKit deletes all the records it contains. To retrieve one or more record zones from iCloud, use [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKFetchRecordZonesOperation]. After you save a zone, create a record zone subscription. CloudKit uses subscriptions to notify your app of record changes. For more information, see [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/remote-records].\n\nTo allow users to share records, you must store those records in a custom record zone. For more information, see [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/shared-records].\n\nCloudKit provides two ways to fetch records from iCloud. If you know the IDs of the records to fetch, use [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKFetchRecordsOperation]. Otherwise, use [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKQuery] and [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKQueryOperation]. A query consists of a record type, a predicate that defines criteria, and sort descriptors. You can further scope a query to retrieve records from a specific record zone. Queries limit the number of records they return. If the record count exceeds the limit, iCloud returns a subset of records and a cursor. You then use the cursor to fetch the next batch of records in another operation.\n\nIt’s important to consider the cost of a record when fetching it, especially when the record contains one or more assets. Both [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKFetchRecordsOperation] and [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKQueryOperation] provide a `desiredKeys` property, which allows you to specify the fields the operation retrieves from iCloud. If you don’t immediately need any associated assets, use `desiredKeys` to exclude the corresponding fields. You can then download individual assets as you need them.\n\nThe following example shows how to construct a query operation. It searches a specific record zone for properties in Cupertino, and uses a sort descriptor to request that iCloud returns the results in chronological order. The operation excludes a field that contains an asset using [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKQueryOperation\/desiredKeys-4a6vy]. For brevity, the example omits configuring the operation’s callbacks and executing it.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/CloudKit\/local-records\ncrawled: 2025-12-01T09:54:38Z\n---\n\n# Local Records\n\n**API Collection**\n\nManipulate records on-device and save changes to the server.\n\n## Overview\n\nCloudKit uses records and record zones to manage your app’s schema and the data it contains. You create these objects on the user’s device and save them to iCloud. After saving the objects, other devices can access and use them.\n\nUse [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKRecord] to create a record, which must have a record ID. The record ID consists of the record’s name and the ID of the record zone to store it in. If you don’t provide a record zone ID, CloudKit stores the record in the default zone. Record IDs must be unique within the database that contains the record. Derive a record’s name from an object that guarantees uniqueness, such as a UUID. CloudKit assigns a unique record name if you don’t provide one. After you create a record, assign its keys and their values, and then save it to iCloud with [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKModifyRecordsOperation]. Use the same operation to delete records.\n\nCloudKit stores records in record zones, which allow you to group specific types of records. For example, you might store a `Product` record type in one zone, and a `Customer` record type in another. Storing records in zones can make fetching them more efficient because you can scope queries, and other fetch operations, to a specific record zone to prevent searching the entire database. Only the private database supports custom record zones. Use [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKRecordZone] to create a zone, and then save it to the user’s private database with [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKModifyRecordZonesOperation]. The same operation supports deleting record zones. When you delete a zone, CloudKit deletes all the records it contains. To retrieve one or more record zones from iCloud, use [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKFetchRecordZonesOperation]. After you save a zone, create a record zone subscription. CloudKit uses subscriptions to notify your app of record changes. For more information, see [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/remote-records].\n\nTo allow users to share records, you must store those records in a custom record zone. For more information, see [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/shared-records].\n\nCloudKit provides two ways to fetch records from iCloud. If you know the IDs of the records to fetch, use [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKFetchRecordsOperation]. Otherwise, use [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKQuery] and [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKQueryOperation]. A query consists of a record type, a predicate that defines criteria, and sort descriptors. You can further scope a query to retrieve records from a specific record zone. Queries limit the number of records they return. If the record count exceeds the limit, iCloud returns a subset of records and a cursor. You then use the cursor to fetch the next batch of records in another operation.\n\nIt’s important to consider the cost of a record when fetching it, especially when the record contains one or more assets. Both [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKFetchRecordsOperation] and [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKQueryOperation] provide a `desiredKeys` property, which allows you to specify the fields the operation retrieves from iCloud. If you don’t immediately need any associated assets, use `desiredKeys` to exclude the corresponding fields. You can then download individual assets as you need them.\n\nThe following example shows how to construct a query operation. It searches a specific record zone for properties in Cupertino, and uses a sort descriptor to request that iCloud returns the results in chronological order. The operation excludes a field that contains an asset using [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKQueryOperation\/desiredKeys-4a6vy]. For brevity, the example omits configuring the operation’s callbacks and executing it.\n\n```swift\n\/\/ Create a predicate that performs a case-insensitive search \n\/\/ of the record's address field for the value 'Cupertino'.\nlet predicate = NSPredicate(format: \"address CONTAINS[c] 'Cupertino'\")\n\n\/\/ Use the predicate to create a query. Limit the query to \n\/\/ only retrieve records of the 'Property' record type.\nlet query = CKQuery(recordType: \"Property\", predicate: predicate)\n\n\/\/ Set the query's sort descriptors so that iCloud returns \n\/\/ the records in chronological order.\nquery.sortDescriptors = [\n    NSSortDescriptor(key: \"creationDate\", ascending: true)\n]\n\n\/\/ Use the query to create a query operation. Scope the \n\/\/ operation to the record zone that contains property\n\/\/ records.\nlet operation = CKQueryOperation(query: query)\noperation.zoneID = propertiesRecordZone.zoneID\n\n\/\/ Each property has an address, a brochure, an owner, and\n\/\/ a sale price. Don't include the 'brochure' field in the \n\/\/ query results. It contains a PDF asset, which can be \n\/\/ several megabytes in size.\noperation.desiredKeys = [\n    \"address\",\n    \"ownerName\",\n    \"salePrice\"\n]\n```\n\n## Transactions\n\n- **CKModifyRecordZonesOperation**: An operation that modifies one or more record zones.\n- **CKModifyRecordsOperation**: An operation that modifies one or more records.\n\n## Fetch Requests\n\n- **CKFetchRecordZonesOperation**: An operation for retrieving record zones from a database.\n- **CKFetchRecordsOperation**: An operation for retrieving records from a database.\n\n## Queries\n\n- **CKQuery**: A query that describes the criteria to apply when searching for records in a database.\n- **CKQueryOperation**: An operation for executing queries in a database.\n- **CKLocationSortDescriptor**: An object for sorting records that contain location data.\n\n## Base Objects\n\n- **CKDatabaseOperation**: The abstract base class for operations that act upon databases in CloudKit.\n\n## Records\n\n- **Remote Records**: Use subscriptions and change tokens to efficiently manage modifications to remote records.\n- **CKSyncEngine**: An object that manages the synchronization of local and remote record data.\n- **Shared Records**: Share one or more records with other iCloud users.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "An operation that modifies one or more record zones.",
          "name" : "CKModifyRecordZonesOperation",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKModifyRecordZonesOperation"
        },
        {
          "description" : "An operation that modifies one or more records.",
          "name" : "CKModifyRecordsOperation",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKModifyRecordsOperation"
        }
      ],
      "title" : "Transactions"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "An operation for retrieving record zones from a database.",
          "name" : "CKFetchRecordZonesOperation",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKFetchRecordZonesOperation"
        },
        {
          "description" : "An operation for retrieving records from a database.",
          "name" : "CKFetchRecordsOperation",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKFetchRecordsOperation"
        }
      ],
      "title" : "Fetch Requests"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "A query that describes the criteria to apply when searching for records in a database.",
          "name" : "CKQuery",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKQuery"
        },
        {
          "description" : "An operation for executing queries in a database.",
          "name" : "CKQueryOperation",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKQueryOperation"
        },
        {
          "description" : "An object for sorting records that contain location data.",
          "name" : "CKLocationSortDescriptor",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKLocationSortDescriptor"
        }
      ],
      "title" : "Queries"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "The abstract base class for operations that act upon databases in CloudKit.",
          "name" : "CKDatabaseOperation",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKDatabaseOperation"
        }
      ],
      "title" : "Base Objects"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Use subscriptions and change tokens to efficiently manage modifications to remote records.",
          "name" : "Remote Records",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/remote-records"
        },
        {
          "description" : "An object that manages the synchronization of local and remote record data.",
          "name" : "CKSyncEngine",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKSyncEngine-5sie5"
        },
        {
          "description" : "Share one or more records with other iCloud users.",
          "name" : "Shared Records",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/shared-records"
        }
      ],
      "title" : "Records"
    }
  ],
  "source" : "appleJSON",
  "title" : "Local Records",
  "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/local-records"
}