{
  "abstract" : "A notification that triggers when a record that matches the subscription’s predicate changes.",
  "codeExamples" : [

  ],
  "conformsTo" : [
    "CVarArg",
    "CustomDebugStringConvertible",
    "CustomStringConvertible",
    "Equatable",
    "Hashable",
    "NSObjectProtocol",
    "Sendable",
    "SendableMetatype"
  ],
  "contentHash" : "db8729b23606bb23d5acf8adf0e57d55ff51470dac31a0512a94e39f6b5953c5",
  "crawledAt" : "2025-12-04T08:32:57Z",
  "declaration" : {
    "code" : "class CKQueryNotification",
    "language" : "swift"
  },
  "id" : "6F4694B2-82EE-4DFC-987D-710483FFFA32",
  "kind" : "class",
  "language" : "swift",
  "module" : "CloudKit",
  "overview" : "## Overview\n\nQuery subscriptions execute when a record that matches the subscription’s predicate changes, for example, when the user modifies a field’s value in the record. When CloudKit registers the change, it sends push notifications to the user’s devices to inform your app about the change. You can then fetch the changes and cache them on-device. When appropriate, CloudKit excludes the device where the change originates.\n\nYou configure a subscription’s notifications by setting it’s [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKSubscription\/notificationInfo-swift.property] property. Do this before you save it to the server. A subscription generates either high-priority or medium-priority push notifications. CloudKit delivers medium-priority notifications to your app in the background. High-priority notifications are visual and the system displays them to the user. Visual notifications need the user’s permission. For more information, see [doc:\/\/com.apple.documentation\/documentation\/UserNotifications\/asking-permission-to-use-notifications].\n\nA subscription uses [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKSubscription\/NotificationInfo-swift.class] to configure its notifications. For background delivery, set only its [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKSubscription\/NotificationInfo-swift.class\/shouldSendContentAvailable] property to [doc:\/\/com.apple.documentation\/documentation\/Swift\/true]. If you set any other property, CloudKit treats the notification as high-priority.\n\nDon’t rely on push notifications for changes because the system can coalesce them. CloudKit can omit data to keep the notification’s payload size under the APNs size limit. If you use [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKSubscription\/NotificationInfo-swift.class\/desiredKeys] to include extra data in the payload, the server removes that first. A notification’s [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKNotification\/isPruned] property is [doc:\/\/com.apple.documentation\/documentation\/Swift\/true] if CloudKit omits data.\n\nConsider notifications an indication of remote changes. Use [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKDatabaseNotification\/databaseScope] to determine which database contains the changed record. To fetch the changes, configure an instance of [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKQueryOperation] to match the subscription and then execute it in the database. CloudKit returns all records that match the predicate, including the changed record. Dispose of any records you cache on-device and use the operation’s results instead.\n\nYou don’t instantiate this class. Instead, implement [doc:\/\/com.apple.documentation\/documentation\/UIKit\/UIApplicationDelegate\/application(_:didReceiveRemoteNotification:fetchCompletionHandler:)] in your app delegate. Initialize [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKNotification] with the `userInfo` dictionary that CloudKit passes to the method. This returns an instance of the appropriate subclass. Use the [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKNotification\/notificationType-swift.property] property to determine the type. Then cast to that type to access type-specific properties and methods.",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "tvOS",
    "visionOS",
    "watchOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/CloudKit\/CKQueryNotification\ncrawled: 2025-12-04T08:32:57Z\n---\n\n# CKQueryNotification\n\n**Class**\n\nA notification that triggers when a record that matches the subscription’s predicate changes.\n\n## Declaration\n\n```swift\nclass CKQueryNotification\n```\n\n## Overview\n\nQuery subscriptions execute when a record that matches the subscription’s predicate changes, for example, when the user modifies a field’s value in the record. When CloudKit registers the change, it sends push notifications to the user’s devices to inform your app about the change. You can then fetch the changes and cache them on-device. When appropriate, CloudKit excludes the device where the change originates.\n\nYou configure a subscription’s notifications by setting it’s [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKSubscription\/notificationInfo-swift.property] property. Do this before you save it to the server. A subscription generates either high-priority or medium-priority push notifications. CloudKit delivers medium-priority notifications to your app in the background. High-priority notifications are visual and the system displays them to the user. Visual notifications need the user’s permission. For more information, see [doc:\/\/com.apple.documentation\/documentation\/UserNotifications\/asking-permission-to-use-notifications].\n\nA subscription uses [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKSubscription\/NotificationInfo-swift.class] to configure its notifications. For background delivery, set only its [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKSubscription\/NotificationInfo-swift.class\/shouldSendContentAvailable] property to [doc:\/\/com.apple.documentation\/documentation\/Swift\/true]. If you set any other property, CloudKit treats the notification as high-priority.\n\n\n\nDon’t rely on push notifications for changes because the system can coalesce them. CloudKit can omit data to keep the notification’s payload size under the APNs size limit. If you use [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKSubscription\/NotificationInfo-swift.class\/desiredKeys] to include extra data in the payload, the server removes that first. A notification’s [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKNotification\/isPruned] property is [doc:\/\/com.apple.documentation\/documentation\/Swift\/true] if CloudKit omits data.\n\nConsider notifications an indication of remote changes. Use [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKDatabaseNotification\/databaseScope] to determine which database contains the changed record. To fetch the changes, configure an instance of [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKQueryOperation] to match the subscription and then execute it in the database. CloudKit returns all records that match the predicate, including the changed record. Dispose of any records you cache on-device and use the operation’s results instead.\n\nYou don’t instantiate this class. Instead, implement [doc:\/\/com.apple.documentation\/documentation\/UIKit\/UIApplicationDelegate\/application(_:didReceiveRemoteNotification:fetchCompletionHandler:)] in your app delegate. Initialize [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKNotification] with the `userInfo` dictionary that CloudKit passes to the method. This returns an instance of the appropriate subclass. Use the [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKNotification\/notificationType-swift.property] property to determine the type. Then cast to that type to access type-specific properties and methods.\n\n## Getting the Database Scope\n\n- **databaseScope**: The type of database for the record zone.\n\n## Getting the Notification Attributes\n\n- **queryNotificationReason**: The event that triggers the push notification.\n- **CKQueryNotification.Reason**: Constants that indicate the event that triggers the notification.\n\n## Getting the Record Information\n\n- **recordID**: The ID of the record that CloudKit creates, updates, or deletes.\n- **recordFields**: A dictionary of fields that have changes.\n\n## Predicate-Driven Changes\n\n- **CKQuerySubscription**: A subscription that generates push notifications when CloudKit modifies records that match a predicate.\n\n## Inherits From\n\n- CKNotification\n\n## Conforms To\n\n- CVarArg\n- CustomDebugStringConvertible\n- CustomStringConvertible\n- Equatable\n- Hashable\n- NSObjectProtocol\n- Sendable\n- SendableMetatype\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "The type of database for the record zone.",
          "name" : "databaseScope",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKQueryNotification\/databaseScope"
        }
      ],
      "title" : "Getting the Database Scope"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "The event that triggers the push notification.",
          "name" : "queryNotificationReason",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKQueryNotification\/queryNotificationReason"
        },
        {
          "description" : "Constants that indicate the event that triggers the notification.",
          "name" : "CKQueryNotification.Reason",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKQueryNotification\/Reason"
        }
      ],
      "title" : "Getting the Notification Attributes"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "The ID of the record that CloudKit creates, updates, or deletes.",
          "name" : "recordID",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKQueryNotification\/recordID"
        },
        {
          "description" : "A dictionary of fields that have changes.",
          "name" : "recordFields",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKQueryNotification\/recordFields"
        }
      ],
      "title" : "Getting the Record Information"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "A subscription that generates push notifications when CloudKit modifies records that match a predicate.",
          "name" : "CKQuerySubscription",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKQuerySubscription"
        }
      ],
      "title" : "Predicate-Driven Changes"
    },
    {
      "content" : "",
      "items" : [
        {
          "name" : "CKNotification"
        }
      ],
      "title" : "Inherits From"
    }
  ],
  "source" : "appleJSON",
  "title" : "CKQueryNotification",
  "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKQueryNotification"
}