{
  "abstract" : "An object that manages the synchronization of local and remote record data.",
  "codeExamples" : [

  ],
  "conformsTo" : [
    "Copyable",
    "CustomStringConvertible",
    "Sendable",
    "SendableMetatype"
  ],
  "contentHash" : "0a7cd6ff792223efe7d117cfdb7959969ab9e8a0ea73bb2a6b6ada337695f160",
  "crawledAt" : "2025-12-01T09:54:40Z",
  "declaration" : {
    "code" : "final class CKSyncEngine",
    "language" : "swift"
  },
  "id" : "BD8D4966-F004-4DF0-94A8-FC88E96165A2",
  "kind" : "class",
  "module" : "CloudKit",
  "overview" : "## Overview\n\nUse [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKSyncEngine-5sie5] to handle your app’s CloudKit sync operations and benefit from the performance and reliability it provides. To use the class, create an instance early in your app’s launch process and specify a database to sync. Thereafter, and depending on good system conditions, the sync engine will periodically push and pull database and record zone changes on the app’s behalf. To participate in those sync operations and to provide the engine with the changes to send, create a type that conforms to [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKSyncEngineDelegate-1q7g8] and assign an instance of it to the engine’s configuration. You can have multiple instances of [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKSyncEngine-5sie5] in a single process, each targeting a different database. For example, you may have one syncing a person’s private database and another syncing their shared database.\n\nBecause periodic sync relies on good system conditions — adequate battery charge, an active network connection, a signed-in iCloud account, and so on — the engine’s sync schedule is indeterminate; if you need to sync immediately, like when you need to ensure your app has the most recent changes before continuing, use the [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKSyncEngine-5sie5\/fetchChanges(_:)] and [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKSyncEngine-5sie5\/sendChanges(_:)] methods.\n\nThe sync engine uses an opaque type to track its internal state, and it’s your responsibility to persist that state to disk and make it available across app launches so the engine can function properly. For more information, see [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKSyncEngineDelegate-1q7g8\/handleEvent(_:syncEngine:)] and [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKSyncEngine-5sie5\/Event\/StateUpdate].\n\n[doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKSyncEngine-5sie5] requires the CloudKit and Remote notifications entitlements. For more information, see [doc:\/\/com.apple.documentation\/documentation\/Xcode\/configuring-icloud-services] and [doc:\/\/com.apple.documentation\/documentation\/Xcode\/configuring-background-execution-modes].\n\n### Send changes to iCloud\n\nA sync engine requires you to tell it about any changes to send, which you do by invoking the [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKSyncEngine-5sie5\/State-swift.class\/add(pendingDatabaseChanges:)] and [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKSyncEngine-5sie5\/State-swift.class\/add(pendingRecordZoneChanges:)] methods on the engine’s [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKSyncEngine-5sie5\/state-swift.property] property. If there are no scheduled sync operations when you invoke these methods, the engine automatically schedules one. Database changes don’t require any additional input, but the sync engine does expect you to provide the individual record zone changes — in batches — and return them from your delegate’s implementation of [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKSyncEngineDelegate-1q7g8\/nextRecordZoneChangeBatch(_:syncEngine:)]. After the engine sends the changes, it notifies your delegate about their success (or failure) by dispatching [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKSyncEngine-5sie5\/Event\/sentDatabaseChanges(_:)] and [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKSyncEngine-5sie5\/Event\/sentRecordZoneChanges(_:)] events.\n\n### Fetch changes from iCloud\n\nBy default, a sync engine attempts to discover an existing [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKDatabaseSubscription] for the associated database and uses that to receive silent notifications about remote record changes. If the engine doesn’t find a subscription, it automatically creates one to use. On receipt of a notification, the engine schedules a sync operation to fetch the related changes. When that operation runs, the engine dispatches a [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKSyncEngine-5sie5\/Event\/willFetchChanges(_:)] event to your delegate. As it receives fetched changes, the engine dispatches [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKSyncEngine-5sie5\/Event\/fetchedDatabaseChanges(_:)] and [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKSyncEngine-5sie5\/Event\/fetchedRecordZoneChanges(_:)], accordingly. After the operation finishes, the sync engine notifies your delegate by dispatching a [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKSyncEngine-5sie5\/Event\/didFetchChanges(_:)] event. You handle all dispatched events in your delegate’s implementation of [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKSyncEngineDelegate-1q7g8\/handleEvent(_:syncEngine:)].",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "tvOS",
    "visionOS",
    "watchOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/CloudKit\/CKSyncEngine-5sie5\ncrawled: 2025-12-01T09:54:40Z\n---\n\n# CKSyncEngine\n\n**Class**\n\nAn object that manages the synchronization of local and remote record data.\n\n## Declaration\n\n```swift\nfinal class CKSyncEngine\n```\n\n## Overview\n\nUse [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKSyncEngine-5sie5] to handle your app’s CloudKit sync operations and benefit from the performance and reliability it provides. To use the class, create an instance early in your app’s launch process and specify a database to sync. Thereafter, and depending on good system conditions, the sync engine will periodically push and pull database and record zone changes on the app’s behalf. To participate in those sync operations and to provide the engine with the changes to send, create a type that conforms to [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKSyncEngineDelegate-1q7g8] and assign an instance of it to the engine’s configuration. You can have multiple instances of [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKSyncEngine-5sie5] in a single process, each targeting a different database. For example, you may have one syncing a person’s private database and another syncing their shared database.\n\nBecause periodic sync relies on good system conditions — adequate battery charge, an active network connection, a signed-in iCloud account, and so on — the engine’s sync schedule is indeterminate; if you need to sync immediately, like when you need to ensure your app has the most recent changes before continuing, use the [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKSyncEngine-5sie5\/fetchChanges(_:)] and [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKSyncEngine-5sie5\/sendChanges(_:)] methods.\n\nThe sync engine uses an opaque type to track its internal state, and it’s your responsibility to persist that state to disk and make it available across app launches so the engine can function properly. For more information, see [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKSyncEngineDelegate-1q7g8\/handleEvent(_:syncEngine:)] and [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKSyncEngine-5sie5\/Event\/StateUpdate].\n\n[doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKSyncEngine-5sie5] requires the CloudKit and Remote notifications entitlements. For more information, see [doc:\/\/com.apple.documentation\/documentation\/Xcode\/configuring-icloud-services] and [doc:\/\/com.apple.documentation\/documentation\/Xcode\/configuring-background-execution-modes].\n\n\n\n### Send changes to iCloud\n\nA sync engine requires you to tell it about any changes to send, which you do by invoking the [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKSyncEngine-5sie5\/State-swift.class\/add(pendingDatabaseChanges:)] and [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKSyncEngine-5sie5\/State-swift.class\/add(pendingRecordZoneChanges:)] methods on the engine’s [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKSyncEngine-5sie5\/state-swift.property] property. If there are no scheduled sync operations when you invoke these methods, the engine automatically schedules one. Database changes don’t require any additional input, but the sync engine does expect you to provide the individual record zone changes — in batches — and return them from your delegate’s implementation of [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKSyncEngineDelegate-1q7g8\/nextRecordZoneChangeBatch(_:syncEngine:)]. After the engine sends the changes, it notifies your delegate about their success (or failure) by dispatching [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKSyncEngine-5sie5\/Event\/sentDatabaseChanges(_:)] and [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKSyncEngine-5sie5\/Event\/sentRecordZoneChanges(_:)] events.\n\n### Fetch changes from iCloud\n\nBy default, a sync engine attempts to discover an existing [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKDatabaseSubscription] for the associated database and uses that to receive silent notifications about remote record changes. If the engine doesn’t find a subscription, it automatically creates one to use. On receipt of a notification, the engine schedules a sync operation to fetch the related changes. When that operation runs, the engine dispatches a [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKSyncEngine-5sie5\/Event\/willFetchChanges(_:)] event to your delegate. As it receives fetched changes, the engine dispatches [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKSyncEngine-5sie5\/Event\/fetchedDatabaseChanges(_:)] and [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKSyncEngine-5sie5\/Event\/fetchedRecordZoneChanges(_:)], accordingly. After the operation finishes, the sync engine notifies your delegate by dispatching a [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKSyncEngine-5sie5\/Event\/didFetchChanges(_:)] event. You handle all dispatched events in your delegate’s implementation of [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKSyncEngineDelegate-1q7g8\/handleEvent(_:syncEngine:)].\n\n\n\n## Creating a sync engine\n\n- **init(_:)**: Creates a sync engine with the specified configuration.\n- **CKSyncEngine.Configuration**: A type that configures the attributes and behavior of a sync engine.\n\n## Accessing the engine’s attributes\n\n- **database**: The associated database.\n- **state**: The sync engine’s state.\n- **CKSyncEngine.State**: An object that manages the sync engine’s state.\n\n## Participating in scheduled sync operations\n\n- **CKSyncEngineDelegate**: An interface for providing record data to a sync engine and customizing that engine’s behavior.\n\n## Invoking manual sync operations\n\n- **fetchChanges(_:)**: Fetches pending remote changes from the server.\n- **CKSyncEngine.FetchChangesOptions**: A set of options to use with a fetch operation.\n- **sendChanges(_:)**: Sends pending local changes to the server.\n- **CKSyncEngine.SendChangesOptions**: A set of options to use with a send operation.\n\n## Canceling operations\n\n- **cancelOperations()**: Cancels any in-progress or pending sync operations.\n\n## Structures\n\n- **CKSyncEngine.FetchChangesContext**\n- **CKSyncEngine.RecordZoneChangeBatch**: A type that contains the record changes for a single send operation.\n- **CKSyncEngine.SendChangesContext**: A type that describes a single attempt to send changes to the iCloud servers.\n\n## Enumerations\n\n- **CKSyncEngine.Event**: Describes an event that occurs during a sync operation.\n- **CKSyncEngine.PendingDatabaseChange**: Describes an unsent database modification.\n- **CKSyncEngine.PendingRecordZoneChange**: Describes an unsent record modification.\n- **CKSyncEngine.SyncReason**: Describes the reason for a sync operation.\n\n## Records\n\n- **Local Records**: Manipulate records on-device and save changes to the server.\n- **Remote Records**: Use subscriptions and change tokens to efficiently manage modifications to remote records.\n- **Shared Records**: Share one or more records with other iCloud users.\n\n## Conforms To\n\n- Copyable\n- CustomStringConvertible\n- Sendable\n- SendableMetatype\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Creates a sync engine with the specified configuration.",
          "name" : "init(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKSyncEngine-5sie5\/init(_:)"
        },
        {
          "description" : "A type that configures the attributes and behavior of a sync engine.",
          "name" : "CKSyncEngine.Configuration",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKSyncEngine-5sie5\/Configuration"
        }
      ],
      "title" : "Creating a sync engine"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "The associated database.",
          "name" : "database",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKSyncEngine-5sie5\/database"
        },
        {
          "description" : "The sync engine’s state.",
          "name" : "state",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKSyncEngine-5sie5\/state-swift.property"
        },
        {
          "description" : "An object that manages the sync engine’s state.",
          "name" : "CKSyncEngine.State",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKSyncEngine-5sie5\/State-swift.class"
        }
      ],
      "title" : "Accessing the engine’s attributes"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "An interface for providing record data to a sync engine and customizing that engine’s behavior.",
          "name" : "CKSyncEngineDelegate",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKSyncEngineDelegate-1q7g8"
        }
      ],
      "title" : "Participating in scheduled sync operations"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Fetches pending remote changes from the server.",
          "name" : "fetchChanges(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKSyncEngine-5sie5\/fetchChanges(_:)"
        },
        {
          "description" : "A set of options to use with a fetch operation.",
          "name" : "CKSyncEngine.FetchChangesOptions",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKSyncEngine-5sie5\/FetchChangesOptions"
        },
        {
          "description" : "Sends pending local changes to the server.",
          "name" : "sendChanges(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKSyncEngine-5sie5\/sendChanges(_:)"
        },
        {
          "description" : "A set of options to use with a send operation.",
          "name" : "CKSyncEngine.SendChangesOptions",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKSyncEngine-5sie5\/SendChangesOptions"
        }
      ],
      "title" : "Invoking manual sync operations"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Cancels any in-progress or pending sync operations.",
          "name" : "cancelOperations()",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKSyncEngine-5sie5\/cancelOperations()"
        }
      ],
      "title" : "Canceling operations"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "",
          "name" : "CKSyncEngine.FetchChangesContext",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKSyncEngine-5sie5\/FetchChangesContext"
        },
        {
          "description" : "A type that contains the record changes for a single send operation.",
          "name" : "CKSyncEngine.RecordZoneChangeBatch",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKSyncEngine-5sie5\/RecordZoneChangeBatch"
        },
        {
          "description" : "A type that describes a single attempt to send changes to the iCloud servers.",
          "name" : "CKSyncEngine.SendChangesContext",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKSyncEngine-5sie5\/SendChangesContext"
        }
      ],
      "title" : "Structures"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Describes an event that occurs during a sync operation.",
          "name" : "CKSyncEngine.Event",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKSyncEngine-5sie5\/Event"
        },
        {
          "description" : "Describes an unsent database modification.",
          "name" : "CKSyncEngine.PendingDatabaseChange",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKSyncEngine-5sie5\/PendingDatabaseChange"
        },
        {
          "description" : "Describes an unsent record modification.",
          "name" : "CKSyncEngine.PendingRecordZoneChange",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKSyncEngine-5sie5\/PendingRecordZoneChange"
        },
        {
          "description" : "Describes the reason for a sync operation.",
          "name" : "CKSyncEngine.SyncReason",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKSyncEngine-5sie5\/SyncReason"
        }
      ],
      "title" : "Enumerations"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Manipulate records on-device and save changes to the server.",
          "name" : "Local Records",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/local-records"
        },
        {
          "description" : "Use subscriptions and change tokens to efficiently manage modifications to remote records.",
          "name" : "Remote Records",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/remote-records"
        },
        {
          "description" : "Share one or more records with other iCloud users.",
          "name" : "Shared Records",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/shared-records"
        }
      ],
      "title" : "Records"
    }
  ],
  "source" : "appleJSON",
  "title" : "CKSyncEngine",
  "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKSyncEngine-5sie5"
}