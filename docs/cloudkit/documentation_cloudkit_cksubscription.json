{
  "abstract" : "An abstract base class for subscriptions.",
  "codeExamples" : [

  ],
  "conformsTo" : [
    "CVarArg",
    "CustomDebugStringConvertible",
    "CustomStringConvertible",
    "Equatable",
    "Hashable",
    "NSCoding",
    "NSCopying",
    "NSObjectProtocol",
    "NSSecureCoding",
    "Sendable",
    "SendableMetatype"
  ],
  "contentHash" : "e83a8db29925b1e1ab0971384e70c1f867e584e969ea0aa374145c310273a830",
  "crawledAt" : "2025-12-07T19:46:32Z",
  "declaration" : {
    "code" : "class CKSubscription",
    "language" : "swift"
  },
  "id" : "1BAAE48A-3D84-42C9-B98D-7C7B5E9C4506",
  "inheritedBy" : [
    "CKDatabaseSubscription",
    "CKQuerySubscription",
    "CKRecordZoneSubscription"
  ],
  "kind" : "class",
  "language" : "swift",
  "module" : "CloudKit",
  "overview" : "## Overview\n\nA subscription acts like a persistent query on the server that can track the creation, deletion, and modification of records. When changes occur, they trigger the delivery of push notifications so that your app can respond appropriately.\n\nSubscriptions don’t become active until you save them to the server and the server has time to index them. To save a subscription, use an instance of [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKModifySubscriptionsOperation] or the [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKDatabase\/save(_:completionHandler:)-9pona] method of [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKDatabase]. To cancel a subscription, delete the corresponding subscription from the server.\n\nMost of a subscription’s configuration happens at initialization time. You must, however, specify how to deliver push notifications to the user’s device. Use the [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKSubscription\/notificationInfo-swift.property] property to configure the delivery options. You must save the subscription before the changes take effect.\n\n### Handling the Resulting Push Notifications\n\nWhen CloudKit modifies a record and triggers a subscription, the server sends push notifications to all devices with that subscription except for the one that makes the original changes. For subscription-based push notifications, the server can add data to the notification payload that indicates the condition that triggers the notification. In the [doc:\/\/com.apple.documentation\/documentation\/UIKit\/UIApplicationDelegate\/application(_:didReceiveRemoteNotification:fetchCompletionHandler:)] method of your app delegate, create a [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKNotification] object from the provided `userInfo` dictionary. You can then query it for the information that’s relevant to the notification.\n\nIn addition to sending a record ID with a push notification, you can ask the server to send a limited amount of data from the record that triggers the notification. Use the [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKSubscription\/NotificationInfo-swift.class\/desiredKeys] property of the object you assign to [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKSubscription\/notificationInfo-swift.property] to specify the keys to include.\n\nAPNs limits the size of a push notification’s payload and CloudKit may omit keys and other pieces of data to keep the payload’s size under that limit. If this happens, you can fetch the entire payload from the server using an instance of `CKFetchNotificationChangesOperation`. This operation provides instances of [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKQueryNotification] or [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKRecordZoneNotification], which contain information about the push notifications that CloudKit delivers to your app.",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "tvOS",
    "visionOS",
    "watchOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/cloudkit\/cksubscription\ncrawled: 2025-12-07T19:46:32Z\n---\n\n# CKSubscription\n\n**Class**\n\nAn abstract base class for subscriptions.\n\n## Declaration\n\n```swift\nclass CKSubscription\n```\n\n## Overview\n\nA subscription acts like a persistent query on the server that can track the creation, deletion, and modification of records. When changes occur, they trigger the delivery of push notifications so that your app can respond appropriately.\n\nSubscriptions don’t become active until you save them to the server and the server has time to index them. To save a subscription, use an instance of [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKModifySubscriptionsOperation] or the [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKDatabase\/save(_:completionHandler:)-9pona] method of [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKDatabase]. To cancel a subscription, delete the corresponding subscription from the server.\n\n\n\nMost of a subscription’s configuration happens at initialization time. You must, however, specify how to deliver push notifications to the user’s device. Use the [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKSubscription\/notificationInfo-swift.property] property to configure the delivery options. You must save the subscription before the changes take effect.\n\n\n\n### Handling the Resulting Push Notifications\n\nWhen CloudKit modifies a record and triggers a subscription, the server sends push notifications to all devices with that subscription except for the one that makes the original changes. For subscription-based push notifications, the server can add data to the notification payload that indicates the condition that triggers the notification. In the [doc:\/\/com.apple.documentation\/documentation\/UIKit\/UIApplicationDelegate\/application(_:didReceiveRemoteNotification:fetchCompletionHandler:)] method of your app delegate, create a [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKNotification] object from the provided `userInfo` dictionary. You can then query it for the information that’s relevant to the notification.\n\nIn addition to sending a record ID with a push notification, you can ask the server to send a limited amount of data from the record that triggers the notification. Use the [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKSubscription\/NotificationInfo-swift.class\/desiredKeys] property of the object you assign to [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKSubscription\/notificationInfo-swift.property] to specify the keys to include.\n\nAPNs limits the size of a push notification’s payload and CloudKit may omit keys and other pieces of data to keep the payload’s size under that limit. If this happens, you can fetch the entire payload from the server using an instance of `CKFetchNotificationChangesOperation`. This operation provides instances of [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKQueryNotification] or [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKRecordZoneNotification], which contain information about the push notifications that CloudKit delivers to your app.\n\n## Specifying the Push Notification Data\n\n- **notificationInfo**: The configuration for a subscription’s push notifications.\n- **CKSubscription.NotificationInfo**: An object that describes the configuration of a subscription’s push notifications.\n\n## Accessing the Subscription Metadata\n\n- **subscriptionID**: The subscription’s unique identifier.\n- **CKSubscription.ID**: A type that represents a subscription’s identifier.\n- **subscriptionType**: The behavior that a subscription provides.\n- **CKSubscription.SubscriptionType**: Constants that identify a subscription’s behavior.\n\n## Base Objects\n\n- **CKNotification**: The abstract base class for CloudKit notifications.\n- **CKDatabaseOperation**: The abstract base class for operations that act upon databases in CloudKit.\n\n## Inherits From\n\n- NSObject\n\n## Inherited By\n\n- CKDatabaseSubscription\n- CKQuerySubscription\n- CKRecordZoneSubscription\n\n## Conforms To\n\n- CVarArg\n- CustomDebugStringConvertible\n- CustomStringConvertible\n- Equatable\n- Hashable\n- NSCoding\n- NSCopying\n- NSObjectProtocol\n- NSSecureCoding\n- Sendable\n- SendableMetatype\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "The configuration for a subscription’s push notifications.",
          "name" : "notificationInfo",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKSubscription\/notificationInfo-swift.property"
        },
        {
          "description" : "An object that describes the configuration of a subscription’s push notifications.",
          "name" : "CKSubscription.NotificationInfo",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKSubscription\/NotificationInfo-swift.class"
        }
      ],
      "title" : "Specifying the Push Notification Data"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "The subscription’s unique identifier.",
          "name" : "subscriptionID",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKSubscription\/subscriptionID-6fp3j"
        },
        {
          "description" : "A type that represents a subscription’s identifier.",
          "name" : "CKSubscription.ID",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKSubscription\/ID"
        },
        {
          "description" : "The behavior that a subscription provides.",
          "name" : "subscriptionType",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKSubscription\/subscriptionType-swift.property"
        },
        {
          "description" : "Constants that identify a subscription’s behavior.",
          "name" : "CKSubscription.SubscriptionType",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKSubscription\/SubscriptionType-swift.enum"
        }
      ],
      "title" : "Accessing the Subscription Metadata"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "The abstract base class for CloudKit notifications.",
          "name" : "CKNotification",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKNotification"
        },
        {
          "description" : "The abstract base class for operations that act upon databases in CloudKit.",
          "name" : "CKDatabaseOperation",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKDatabaseOperation"
        }
      ],
      "title" : "Base Objects"
    },
    {
      "content" : "",
      "items" : [
        {
          "name" : "NSObject"
        }
      ],
      "title" : "Inherits From"
    }
  ],
  "source" : "appleJSON",
  "title" : "CKSubscription",
  "url" : "https:\/\/developer.apple.com\/documentation\/cloudkit\/cksubscription"
}