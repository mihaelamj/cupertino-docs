{
  "abstract" : "An operation for executing queries in a database.",
  "codeExamples" : [

  ],
  "conformsTo" : [
    "CVarArg",
    "CustomDebugStringConvertible",
    "CustomStringConvertible",
    "Equatable",
    "Hashable",
    "NSObjectProtocol",
    "Sendable",
    "SendableMetatype"
  ],
  "contentHash" : "22683e8332b51e9449712e7ed760c488bc58b8d46a2675acfc32a331ea523181",
  "crawledAt" : "2025-12-07T19:46:20Z",
  "declaration" : {
    "code" : "class CKQueryOperation",
    "language" : "swift"
  },
  "id" : "ED39975A-30D9-47DD-942F-5BF85CDA789B",
  "kind" : "class",
  "language" : "swift",
  "module" : "CloudKit",
  "overview" : "## Overview\n\nA `CKQueryOperation` object is a concrete operation that you can use to execute queries. A query operation applies query parameters to the specified database and record zone, delivering any matching records asynchronously to the handlers that you provide.\n\nTo perform a new search:\n\nIf the search yields many records, the operation object may deliver a portion of the total results to your blocks immediately, along with a cursor for obtaining the remaining records. Use the cursor to initialize and execute a separate `CKQueryOperation` instance when you’re ready to process the next batch of results. 3. Optionally, configure the results by specifying values for the [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKQueryOperation\/resultsLimit] and [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKQueryOperation\/desiredKeys-4a6vy] properties. 4. Pass the query operation object to the [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKDatabase\/add(_:)] method of the target database to execute the operation.\n\nCloudKit restricts queries to the records in a single record zone. For new queries, you specify the zone when you initialize the query operation object. For cursor-based queries, the cursor contains the zone information. To search for records in multiple zones, you must create a separate `CKQueryOperation` object for each zone you want to search, although you can initialize each of them with the same [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKQuery] object.\n\nIf you assign a handler to the operation’s [doc:\/\/com.apple.documentation\/documentation\/Foundation\/Operation\/completionBlock] property, the operation calls it after it executes and returns any results. Use a handler to perform housekeeping tasks for the operation, but don’t use it to process the results of the operation. The handler you provide should manage any failures, whether due to an error or an explicit cancellation.",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "tvOS",
    "visionOS",
    "watchOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/cloudkit\/ckqueryoperation\ncrawled: 2025-12-07T19:46:20Z\n---\n\n# CKQueryOperation\n\n**Class**\n\nAn operation for executing queries in a database.\n\n## Declaration\n\n```swift\nclass CKQueryOperation\n```\n\n## Overview\n\nA `CKQueryOperation` object is a concrete operation that you can use to execute queries. A query operation applies query parameters to the specified database and record zone, delivering any matching records asynchronously to the handlers that you provide.\n\nTo perform a new search:\n\n1. Initialize a `CKQueryOperation` object with a [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKQuery] object that contains the search criteria and sorting information for the records you want.\n2. Assign a handler to the [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKQueryOperation\/queryCompletionBlock] property so that you can process the results and execute the operation.\n\nIf the search yields many records, the operation object may deliver a portion of the total results to your blocks immediately, along with a cursor for obtaining the remaining records. Use the cursor to initialize and execute a separate `CKQueryOperation` instance when you’re ready to process the next batch of results. 3. Optionally, configure the results by specifying values for the [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKQueryOperation\/resultsLimit] and [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKQueryOperation\/desiredKeys-4a6vy] properties. 4. Pass the query operation object to the [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKDatabase\/add(_:)] method of the target database to execute the operation.\n\nCloudKit restricts queries to the records in a single record zone. For new queries, you specify the zone when you initialize the query operation object. For cursor-based queries, the cursor contains the zone information. To search for records in multiple zones, you must create a separate `CKQueryOperation` object for each zone you want to search, although you can initialize each of them with the same [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKQuery] object.\n\nIf you assign a handler to the operation’s [doc:\/\/com.apple.documentation\/documentation\/Foundation\/Operation\/completionBlock] property, the operation calls it after it executes and returns any results. Use a handler to perform housekeeping tasks for the operation, but don’t use it to process the results of the operation. The handler you provide should manage any failures, whether due to an error or an explicit cancellation.\n\n## Creating a Query Operation\n\n- **init(query:)**: Creates an operation that searches for records in the specified record zone.\n- **init(cursor:)**: Creates an operation with additional results from a previous search.\n- **init()**: Creates an empty query operation.\n\n## Configuring the Query Operation\n\n- **query**: The query for the search.\n- **cursor**: The  cursor for continuing the search.\n- **CKQueryOperation.Cursor**: An object that marks the stopping point for a query and the starting point for retrieving the remaining results.\n- **zoneID**: The ID of the record zone that contains the records to search.\n- **resultsLimit**: The maximum number of records to return at one time.\n- **maximumResults**: A constant value that represents the maximum number of results CloudKit retrieves.\n- **desiredKeys**: The fields of the records to fetch.\n\n## Processing the Query Results\n\n- **recordFetchedBlock**: The closure to execute when a record becomes available.\n- **queryCompletionBlock**: The closure to execute after CloudKit retrieves all of the records.\n\n## Instance Properties\n\n- **queryResultBlock**\n- **recordMatchedBlock**\n\n## Queries\n\n- **CKQuery**: A query that describes the criteria to apply when searching for records in a database.\n- **CKLocationSortDescriptor**: An object for sorting records that contain location data.\n\n## Inherits From\n\n- CKDatabaseOperation\n\n## Conforms To\n\n- CVarArg\n- CustomDebugStringConvertible\n- CustomStringConvertible\n- Equatable\n- Hashable\n- NSObjectProtocol\n- Sendable\n- SendableMetatype\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Creates an operation that searches for records in the specified record zone.",
          "name" : "init(query:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKQueryOperation\/init(query:)"
        },
        {
          "description" : "Creates an operation with additional results from a previous search.",
          "name" : "init(cursor:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKQueryOperation\/init(cursor:)"
        },
        {
          "description" : "Creates an empty query operation.",
          "name" : "init()",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKQueryOperation\/init()"
        }
      ],
      "title" : "Creating a Query Operation"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "The query for the search.",
          "name" : "query",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKQueryOperation\/query"
        },
        {
          "description" : "The  cursor for continuing the search.",
          "name" : "cursor",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKQueryOperation\/cursor-swift.property"
        },
        {
          "description" : "An object that marks the stopping point for a query and the starting point for retrieving the remaining results.",
          "name" : "CKQueryOperation.Cursor",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKQueryOperation\/Cursor-swift.class"
        },
        {
          "description" : "The ID of the record zone that contains the records to search.",
          "name" : "zoneID",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKQueryOperation\/zoneID"
        },
        {
          "description" : "The maximum number of records to return at one time.",
          "name" : "resultsLimit",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKQueryOperation\/resultsLimit"
        },
        {
          "description" : "A constant value that represents the maximum number of results CloudKit retrieves.",
          "name" : "maximumResults",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKQueryOperation\/maximumResults"
        },
        {
          "description" : "The fields of the records to fetch.",
          "name" : "desiredKeys",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKQueryOperation\/desiredKeys-7qrse"
        }
      ],
      "title" : "Configuring the Query Operation"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "The closure to execute when a record becomes available.",
          "name" : "recordFetchedBlock",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKQueryOperation\/recordFetchedBlock"
        },
        {
          "description" : "The closure to execute after CloudKit retrieves all of the records.",
          "name" : "queryCompletionBlock",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKQueryOperation\/queryCompletionBlock"
        }
      ],
      "title" : "Processing the Query Results"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "",
          "name" : "queryResultBlock",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKQueryOperation\/queryResultBlock"
        },
        {
          "description" : "",
          "name" : "recordMatchedBlock",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKQueryOperation\/recordMatchedBlock-2qze7"
        }
      ],
      "title" : "Instance Properties"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "A query that describes the criteria to apply when searching for records in a database.",
          "name" : "CKQuery",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKQuery"
        },
        {
          "description" : "An object for sorting records that contain location data.",
          "name" : "CKLocationSortDescriptor",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKLocationSortDescriptor"
        }
      ],
      "title" : "Queries"
    },
    {
      "content" : "",
      "items" : [
        {
          "name" : "CKDatabaseOperation"
        }
      ],
      "title" : "Inherits From"
    }
  ],
  "source" : "appleJSON",
  "title" : "CKQueryOperation",
  "url" : "https:\/\/developer.apple.com\/documentation\/cloudkit\/ckqueryoperation"
}