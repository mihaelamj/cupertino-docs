{
  "abstract" : "An operation that converts user identities into share participants.",
  "codeExamples" : [
    {
      "code" : "func fetchParticipants(for lookupInfos: [CKUserIdentity.LookupInfo], \n    completion: @escaping (Result<[CKShare.Participant], Error>) -> Void) {\n\n    var participants = [CKShare.Participant]()\n        \n    \/\/ Create the operation using the lookup objects\n    \/\/ that the caller provides to the method.\n    let operation = CKFetchShareParticipantsOperation(\n        userIdentityLookupInfos: lookupInfos)\n        \n    \/\/ Collect the participants as CloudKit generates them.\n    operation.shareParticipantFetchedBlock = { participant in\n        participants.append(participant)\n    }\n        \n    \/\/ If the operation fails, return the error to the caller.\n    \/\/ Otherwise, return the array of participants.\n    operation.fetchShareParticipantsCompletionBlock = { error in\n        if let error = error {\n            completion(.failure(error))\n        } else {\n            completion(.success(participants))\n        }\n    }\n        \n    \/\/ Set an appropriate QoS and add the operation to the\n    \/\/ container's queue to execute it.\n    operation.qualityOfService = .userInitiated\n    CKContainer.default().add(operation)\n}",
      "language" : "swift"
    }
  ],
  "conformsTo" : [
    "CVarArg",
    "CustomDebugStringConvertible",
    "CustomStringConvertible",
    "Equatable",
    "Hashable",
    "NSObjectProtocol",
    "Sendable",
    "SendableMetatype"
  ],
  "contentHash" : "88b39cca949cd2786ce2bef70cbadf03b1ce3fff76f4d607f1d6f0f70009518f",
  "crawledAt" : "2025-12-03T05:05:27Z",
  "declaration" : {
    "code" : "class CKFetchShareParticipantsOperation",
    "language" : "swift"
  },
  "id" : "07D438ED-610B-4491-92FB-9F0BBF7F6983",
  "kind" : "class",
  "language" : "swift",
  "module" : "CloudKit",
  "overview" : "## Overview\n\nParticipants are a fundamental part of sharing in CloudKit. A participant provides information about a user and their participation in a share, which includes their identity, acceptance status, role, and permissions. The acceptance status manages the user’s visibilty of the shared records. The role and permissions control what actions the user can perform on those records.\n\nYou don’t create participants. Instead, create an instance of [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKUserIdentity\/LookupInfo-swift.class] for each user. Provide the user’s email address or phone number, and then use this operation to convert them into participants that you can add to a share. CloudKit limits the number of participants in a share to 100, and each participant must have an active iCloud account.\n\nCloudKit queries iCloud for corresponding accounts as part of the operation. If it doesn’t find an account, the server updates the participant’s [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKShare\/Participant\/userIdentity] to reflect that by setting the [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKUserIdentity\/hasiCloudAccount] property to [doc:\/\/com.apple.documentation\/documentation\/Swift\/false]. CloudKit associates a participant with their iCloud account when they accept the share.\n\nAnyone with the URL of a public share can become a participant in that share. For a private share, the owner manages its participants. A participant can’t accept a private share unless the owner adds them first.\n\nTo run the operation, add it to the container’s operation queue. The operation executes its callbacks on a private serial queue.\n\nThe following example demonstrates how to create the operation, configure it, and then execute it using the default container’s operation queue:\n\nThe operation calls [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKFetchShareParticipantsOperation\/shareParticipantFetchedBlock] once for each item you provide, and CloudKit returns the participant, or an error if it can’t generate a particpant. CloudKit also batches per-participant errors. If the operation completes with errors, it returns a [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKError\/partialFailure] error. The error stores the individual errors in its [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSError\/userInfo] dictionary. Use the [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKPartialErrorsByItemIDKey] key to extract them.",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "tvOS",
    "visionOS",
    "watchOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/CloudKit\/CKFetchShareParticipantsOperation\ncrawled: 2025-12-03T05:05:27Z\n---\n\n# CKFetchShareParticipantsOperation\n\n**Class**\n\nAn operation that converts user identities into share participants.\n\n## Declaration\n\n```swift\nclass CKFetchShareParticipantsOperation\n```\n\n## Overview\n\nParticipants are a fundamental part of sharing in CloudKit. A participant provides information about a user and their participation in a share, which includes their identity, acceptance status, role, and permissions. The acceptance status manages the user’s visibilty of the shared records. The role and permissions control what actions the user can perform on those records.\n\nYou don’t create participants. Instead, create an instance of [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKUserIdentity\/LookupInfo-swift.class] for each user. Provide the user’s email address or phone number, and then use this operation to convert them into participants that you can add to a share. CloudKit limits the number of participants in a share to 100, and each participant must have an active iCloud account.\n\n\n\nCloudKit queries iCloud for corresponding accounts as part of the operation. If it doesn’t find an account, the server updates the participant’s [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKShare\/Participant\/userIdentity] to reflect that by setting the [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKUserIdentity\/hasiCloudAccount] property to [doc:\/\/com.apple.documentation\/documentation\/Swift\/false]. CloudKit associates a participant with their iCloud account when they accept the share.\n\nAnyone with the URL of a public share can become a participant in that share. For a private share, the owner manages its participants. A participant can’t accept a private share unless the owner adds them first.\n\nTo run the operation, add it to the container’s operation queue. The operation executes its callbacks on a private serial queue.\n\nThe following example demonstrates how to create the operation, configure it, and then execute it using the default container’s operation queue:\n\n```swift\nfunc fetchParticipants(for lookupInfos: [CKUserIdentity.LookupInfo], \n    completion: @escaping (Result<[CKShare.Participant], Error>) -> Void) {\n\n    var participants = [CKShare.Participant]()\n        \n    \/\/ Create the operation using the lookup objects\n    \/\/ that the caller provides to the method.\n    let operation = CKFetchShareParticipantsOperation(\n        userIdentityLookupInfos: lookupInfos)\n        \n    \/\/ Collect the participants as CloudKit generates them.\n    operation.shareParticipantFetchedBlock = { participant in\n        participants.append(participant)\n    }\n        \n    \/\/ If the operation fails, return the error to the caller.\n    \/\/ Otherwise, return the array of participants.\n    operation.fetchShareParticipantsCompletionBlock = { error in\n        if let error = error {\n            completion(.failure(error))\n        } else {\n            completion(.success(participants))\n        }\n    }\n        \n    \/\/ Set an appropriate QoS and add the operation to the\n    \/\/ container's queue to execute it.\n    operation.qualityOfService = .userInitiated\n    CKContainer.default().add(operation)\n}\n```\n\nThe operation calls [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKFetchShareParticipantsOperation\/shareParticipantFetchedBlock] once for each item you provide, and CloudKit returns the participant, or an error if it can’t generate a particpant. CloudKit also batches per-participant errors. If the operation completes with errors, it returns a [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKError\/partialFailure] error. The error stores the individual errors in its [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSError\/userInfo] dictionary. Use the [doc:\/\/com.apple.cloudkit\/documentation\/CloudKit\/CKPartialErrorsByItemIDKey] key to extract them.\n\n## Creating an Operation\n\n- **init()**: Creates an empty operation.\n- **init(userIdentityLookupInfos:)**: Creates an operation for generating share participants from the specified user data.\n\n## Configuring the Operation\n\n- **userIdentityLookupInfos**: The user data for the participants.\n\n## Processing the Operation’s Results\n\n- **shareParticipantFetchedBlock**: The closure to execute as the operation generates individual participants.\n- **fetchShareParticipantsCompletionBlock**: The closure to execute when the operation finishes.\n\n## Instance Properties\n\n- **fetchShareParticipantsResultBlock**\n- **perShareParticipantResultBlock**\n\n## Participants\n\n- **CKShare.Participant**: An object that describes a user’s participation in a share.\n\n## Inherits From\n\n- CKOperation\n\n## Conforms To\n\n- CVarArg\n- CustomDebugStringConvertible\n- CustomStringConvertible\n- Equatable\n- Hashable\n- NSObjectProtocol\n- Sendable\n- SendableMetatype\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Creates an empty operation.",
          "name" : "init()",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKFetchShareParticipantsOperation\/init()"
        },
        {
          "description" : "Creates an operation for generating share participants from the specified user data.",
          "name" : "init(userIdentityLookupInfos:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKFetchShareParticipantsOperation\/init(userIdentityLookupInfos:)"
        }
      ],
      "title" : "Creating an Operation"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "The user data for the participants.",
          "name" : "userIdentityLookupInfos",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKFetchShareParticipantsOperation\/userIdentityLookupInfos"
        }
      ],
      "title" : "Configuring the Operation"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "The closure to execute as the operation generates individual participants.",
          "name" : "shareParticipantFetchedBlock",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKFetchShareParticipantsOperation\/shareParticipantFetchedBlock"
        },
        {
          "description" : "The closure to execute when the operation finishes.",
          "name" : "fetchShareParticipantsCompletionBlock",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKFetchShareParticipantsOperation\/fetchShareParticipantsCompletionBlock"
        }
      ],
      "title" : "Processing the Operation’s Results"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "",
          "name" : "fetchShareParticipantsResultBlock",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKFetchShareParticipantsOperation\/fetchShareParticipantsResultBlock"
        },
        {
          "description" : "",
          "name" : "perShareParticipantResultBlock",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKFetchShareParticipantsOperation\/perShareParticipantResultBlock"
        }
      ],
      "title" : "Instance Properties"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "An object that describes a user’s participation in a share.",
          "name" : "CKShare.Participant",
          "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKShare\/Participant"
        }
      ],
      "title" : "Participants"
    },
    {
      "content" : "",
      "items" : [
        {
          "name" : "CKOperation"
        }
      ],
      "title" : "Inherits From"
    }
  ],
  "source" : "appleJSON",
  "title" : "CKFetchShareParticipantsOperation",
  "url" : "https:\/\/developer.apple.com\/documentation\/CloudKit\/CKFetchShareParticipantsOperation"
}