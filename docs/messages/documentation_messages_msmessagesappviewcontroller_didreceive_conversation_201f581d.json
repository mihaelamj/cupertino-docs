{
  "abstract" : "Invoked when the iMessage app receives a new message object.",
  "codeExamples" : [
    {
      "code" : "override func didReceive(_ message: MSMessage, conversation: MSConversation) {\n    \/\/ Check to see if the incoming message is part of a session\n    if let incomingSession = message.session {\n        \/\/ Check to see if the incoming session matches the current message’s session\n        if incomingSession == conversation.selectedMessage?.session {\n            \/\/ Update your user interface here...\n        }\n    }\n}",
      "language" : "swift"
    }
  ],
  "contentHash" : "9e4d8caa872cb8775cff85d4069b67a1aad83c275e8af0266cacbe095b2db59b",
  "crawledAt" : "2025-12-02T18:40:40Z",
  "declaration" : {
    "code" : "@MainActor func didReceive(_ message: MSMessage, conversation: MSConversation)",
    "language" : "swift"
  },
  "id" : "DC45F021-8CC0-4E49-ABEF-67A5257E1E28",
  "kind" : "method",
  "language" : "swift",
  "module" : "Messages",
  "overview" : "## Discussion\n\nOverride this method to respond to messages that arrive while your extension is active.\n\nIf your app displays information about the currently selected message, check the incoming message’s session against the selected message’s session. If they match, update the information displayed in your user interface to represent the most recent message data (see Listing 1).\n\nListing 1. Updating the current session\n\nThis method is called when a new message arrives while your extension is active. You receive notifications about messages sent using your extension only. You cannot interact with messages from other extensions.\n\nThe system does not call this method if the controller’s [doc:\/\/com.apple.messages\/documentation\/Messages\/MSMessagesAppViewController\/presentationStyle] property is [doc:\/\/com.apple.messages\/documentation\/Messages\/MSMessagesAppPresentationStyle\/transcript], or if its [doc:\/\/com.apple.messages\/documentation\/Messages\/MSMessagesAppViewController\/presentationContext] property is [doc:\/\/com.apple.messages\/documentation\/Messages\/MSMessagesAppPresentationContext\/media].",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/Messages\/MSMessagesAppViewController\/didReceive(_:conversation:)\ncrawled: 2025-12-02T18:40:40Z\n---\n\n# didReceive(_:conversation:)\n\n**Instance Method**\n\nInvoked when the iMessage app receives a new message object.\n\n## Declaration\n\n```swift\n@MainActor func didReceive(_ message: MSMessage, conversation: MSConversation)\n```\n\n## Parameters\n\n- **message**: The received message object.\n- **conversation**: The conversation that the user is currently viewing in the Messages app.\n\n## Discussion\n\nOverride this method to respond to messages that arrive while your extension is active.\n\nIf your app displays information about the currently selected message, check the incoming message’s session against the selected message’s session. If they match, update the information displayed in your user interface to represent the most recent message data (see Listing 1).\n\nListing 1. Updating the current session\n\n```swift\noverride func didReceive(_ message: MSMessage, conversation: MSConversation) {\n    \/\/ Check to see if the incoming message is part of a session\n    if let incomingSession = message.session {\n        \/\/ Check to see if the incoming session matches the current message’s session\n        if incomingSession == conversation.selectedMessage?.session {\n            \/\/ Update your user interface here...\n        }\n    }\n}\n```\n\n\n\nThis method is called when a new message arrives while your extension is active. You receive notifications about messages sent using your extension only. You cannot interact with messages from other extensions.\n\nThe system does not call this method if the controller’s [doc:\/\/com.apple.messages\/documentation\/Messages\/MSMessagesAppViewController\/presentationStyle] property is [doc:\/\/com.apple.messages\/documentation\/Messages\/MSMessagesAppPresentationStyle\/transcript], or if its [doc:\/\/com.apple.messages\/documentation\/Messages\/MSMessagesAppViewController\/presentationContext] property is [doc:\/\/com.apple.messages\/documentation\/Messages\/MSMessagesAppPresentationContext\/media].\n\n## Tracking Messages\n\n- **willSelect(_:conversation:)**: Invoked in response to the user selecting a message object in the transcript, before the system updates the conversation’s [doc:\/\/com.apple.messages\/documentation\/Messages\/MSConversation\/selectedMessage] property.\n- **didSelect(_:conversation:)**: Invoked in response to the user selecting a message object in the transcript, after the system updates the conversation’s [doc:\/\/com.apple.messages\/documentation\/Messages\/MSConversation\/selectedMessage] property.\n- **didStartSending(_:conversation:)**: Invoked when the user sends a message object.\n- **didCancelSending(_:conversation:)**: Invoked when the user deletes a message object from the Messages app’s input field.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Invoked in response to the user selecting a message object in the transcript, before the system updates the conversation’s [doc:\/\/com.apple.messages\/documentation\/Messages\/MSConversation\/selectedMessage] property.",
          "name" : "willSelect(_:conversation:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Messages\/MSMessagesAppViewController\/willSelect(_:conversation:)"
        },
        {
          "description" : "Invoked in response to the user selecting a message object in the transcript, after the system updates the conversation’s [doc:\/\/com.apple.messages\/documentation\/Messages\/MSConversation\/selectedMessage] property.",
          "name" : "didSelect(_:conversation:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Messages\/MSMessagesAppViewController\/didSelect(_:conversation:)"
        },
        {
          "description" : "Invoked when the user sends a message object.",
          "name" : "didStartSending(_:conversation:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Messages\/MSMessagesAppViewController\/didStartSending(_:conversation:)"
        },
        {
          "description" : "Invoked when the user deletes a message object from the Messages app’s input field.",
          "name" : "didCancelSending(_:conversation:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Messages\/MSMessagesAppViewController\/didCancelSending(_:conversation:)"
        }
      ],
      "title" : "Tracking Messages"
    }
  ],
  "source" : "appleJSON",
  "title" : "didReceive(_:conversation:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/Messages\/MSMessagesAppViewController\/didReceive(_:conversation:)"
}