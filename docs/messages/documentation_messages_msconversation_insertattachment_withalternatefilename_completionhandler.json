{
  "abstract" : "Inserts an attachment into the current context.",
  "codeExamples" : [

  ],
  "contentHash" : "f7ba02b9a6b6e189480dcec950f603519e9eb169b45e2609d0251889428a14ac",
  "crawledAt" : "2025-12-02T06:16:08Z",
  "declaration" : {
    "code" : "func insertAttachment(_ URL: URL, withAlternateFilename filename: String?, completionHandler: (((any Error)?) -> Void)? = nil)",
    "language" : "swift"
  },
  "id" : "56100412-5716-4DC3-9A08-ABCB2404859E",
  "kind" : "method",
  "module" : "Messages",
  "overview" : "## Discussion\n\nUse this method to insert a media attachment into the current context. For the [doc:\/\/com.apple.messages\/documentation\/Messages\/MSMessagesAppPresentationContext\/messages] context, this method inserts the attachment into the Message app’s input field. Users can then send the media file by tapping Send.\n\nFor the [doc:\/\/com.apple.messages\/documentation\/Messages\/MSMessagesAppPresentationContext\/media] context, the method only supports images. It places the image in the Messages camera or FaceTime. If the attachment is not an image type supported by [doc:\/\/com.apple.messages\/documentation\/Messages\/MSSticker], the method fails with an [doc:\/\/com.apple.messages\/documentation\/Messages\/MSMessageErrorCode\/apiUnavailableInPresentationContext] error.\n\nThis method operates asynchronously. Although the method returns immediately, the actual work is deferred and performed in the background. As soon as the attachment is inserted, the system calls the completion block on a background queue.",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/Messages\/MSConversation\/insertAttachment(_:withAlternateFilename:completionHandler:)\ncrawled: 2025-12-02T06:16:08Z\n---\n\n# insertAttachment(_:withAlternateFilename:completionHandler:)\n\n**Instance Method**\n\nInserts an attachment into the current context.\n\n## Declaration\n\n```swift\nfunc insertAttachment(_ URL: URL, withAlternateFilename filename: String?, completionHandler: (((any Error)?) -> Void)? = nil)\n```\n\n```swift\nfunc insertAttachment(_ URL: URL, withAlternateFilename filename: String?) async throws\n```\n\n## Parameters\n\n- **URL**: A URL for the media file to be inserted. This URL must refer to a file saved on the device.\n- **filename**: An alternate name for the file. Use an alternate filename to better describe the attachment or to make the name more readable. If you pass a string, the Messages app uses the string as the attachment’s filename. If you pass `nil`, it parses the filename from the URL.\n- **completionHandler**: A block that is called as soon as the insertion is complete. This block is passed the following parameter:\n\n\n\n## Discussion\n\n\n\nUse this method to insert a media attachment into the current context. For the [doc:\/\/com.apple.messages\/documentation\/Messages\/MSMessagesAppPresentationContext\/messages] context, this method inserts the attachment into the Message app’s input field. Users can then send the media file by tapping Send.\n\nFor the [doc:\/\/com.apple.messages\/documentation\/Messages\/MSMessagesAppPresentationContext\/media] context, the method only supports images. It places the image in the Messages camera or FaceTime. If the attachment is not an image type supported by [doc:\/\/com.apple.messages\/documentation\/Messages\/MSSticker], the method fails with an [doc:\/\/com.apple.messages\/documentation\/Messages\/MSMessageErrorCode\/apiUnavailableInPresentationContext] error.\n\nThis method operates asynchronously. Although the method returns immediately, the actual work is deferred and performed in the background. As soon as the attachment is inserted, the system calls the completion block on a background queue.\n\n\n\n## Inserting Content into the Input Field\n\n- **insert(_:completionHandler:)**: Inserts a message object into the Messages app’s input field.\n- **insert(_:completionHandler:)**: Inserts a sticker into the current context.\n- **insertText(_:completionHandler:)**: Inserts text into the Messages app’s input field.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Inserts a message object into the Messages app’s input field.",
          "name" : "insert(_:completionHandler:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Messages\/MSConversation\/insert(_:completionHandler:)-3g248"
        },
        {
          "description" : "Inserts a sticker into the current context.",
          "name" : "insert(_:completionHandler:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Messages\/MSConversation\/insert(_:completionHandler:)-7fpdd"
        },
        {
          "description" : "Inserts text into the Messages app’s input field.",
          "name" : "insertText(_:completionHandler:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Messages\/MSConversation\/insertText(_:completionHandler:)"
        }
      ],
      "title" : "Inserting Content into the Input Field"
    }
  ],
  "source" : "appleJSON",
  "title" : "insertAttachment(_:withAlternateFilename:completionHandler:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/Messages\/MSConversation\/insertAttachment(_:withAlternateFilename:completionHandler:)"
}