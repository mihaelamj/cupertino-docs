{
  "abstract" : "Associate someone’s Managed Apple Account with their identity in Apple School Manager.",
  "codeExamples" : [
    {
      "code" : "{\n    \"iss\": \"https:\/\/appleid.apple.com\",\n    \"aud\": \"com.example.testapp\",\n    \"exp\": 1676417226,\n    \"iat\": 1676330826,\n    \"sub\": \"000264.UDRoeTAxVUppaHdNQU5HYWN6MEU5VDRUWFVQU1BV.RUtP\",\n    \"c_hash\": \"ZIglL3bJ-8LuXX9xiAWnXQ\",\n    \"email\": \"teacher@example.com\",\n    \"email_verified\": \"false\",\n    \"org_id\": \"8e257987-f221-4171-887d-efead972993b\",\n    \"auth_time\": 1676330826,\n    \"nonce_supported\": true\n}",
      "language" : "javascript"
    }
  ],
  "contentHash" : "152e52a9a23f4849191d7781bb6ab921d6bb6930cc2f7a2f187e176fb98ac34d",
  "crawledAt" : "2025-12-01T09:42:41Z",
  "id" : "A7AF8870-9C1C-472B-A3E5-7B2F9ADC755C",
  "kind" : "article",
  "module" : "Roster API",
  "overview" : "## Overview\n\nWhen your app uses [doc:\/\/com.apple.documentation\/documentation\/SigninwithApple] to authenticate someone, Apple checks whether that person’s Managed Apple Account is associated with an Apple School Manager (ASM) organization that’s authorized Roster API for your app. The identity token contains identifiers that you use with Roster API to fetch information about the organization and person.\n\nFor more information about decoding an identity token that you receive from Sign in with Apple, see [doc:\/\/com.apple.documentation\/documentation\/SigninwithAppleJS\/AuthorizationI\/id_token]. The decoded identity token is a JSON object with the fields shown in the example below.\n\n### Compare the organization identifiers\n\nIf somebody authenticates with Sign in with Apple using a Managed Apple Account, the decoded identity token includes an `org_id` claim that identifies their organization. Compare the value in token’s `org_id` with the `id` you receive from a [doc:\/\/com.apple.rosterapi\/documentation\/RosterAPI\/returns-organization-infrmation] request. If the two identifiers are equal, then the person who authenticated is a user in an organization that’s authorized Roster API for your app.\n\n### Fetch the user’s record\n\nWhen the Managed Apple Account is associated with an organization that authorized Roster API for your app, the Sign in with Apple user identifier is the same as their user identifier in Roster API. Get the user identifier from the `sub` value in the decoded identity token, and pass it as the `userId` to a [doc:\/\/com.apple.rosterapi\/documentation\/RosterAPI\/returns-a-specific-user-in-an-Apple-School-Manager-organization] request.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/RosterAPI\/integrating-with-roster-api-and-sign-in-with-apple\ncrawled: 2025-12-01T09:42:41Z\n---\n\n# Integrating with Roster API and Sign in with Apple\n\n**Article**\n\nAssociate someone’s Managed Apple Account with their identity in Apple School Manager.\n\n## Overview\n\nWhen your app uses [doc:\/\/com.apple.documentation\/documentation\/SigninwithApple] to authenticate someone, Apple checks whether that person’s Managed Apple Account is associated with an Apple School Manager (ASM) organization that’s authorized Roster API for your app. The identity token contains identifiers that you use with Roster API to fetch information about the organization and person.\n\nFor more information about decoding an identity token that you receive from Sign in with Apple, see [doc:\/\/com.apple.documentation\/documentation\/SigninwithAppleJS\/AuthorizationI\/id_token]. The decoded identity token is a JSON object with the fields shown in the example below.\n\n```javascript\n{\n    \"iss\": \"https:\/\/appleid.apple.com\",\n    \"aud\": \"com.example.testapp\",\n    \"exp\": 1676417226,\n    \"iat\": 1676330826,\n    \"sub\": \"000264.UDRoeTAxVUppaHdNQU5HYWN6MEU5VDRUWFVQU1BV.RUtP\",\n    \"c_hash\": \"ZIglL3bJ-8LuXX9xiAWnXQ\",\n    \"email\": \"teacher@example.com\",\n    \"email_verified\": \"false\",\n    \"org_id\": \"8e257987-f221-4171-887d-efead972993b\",\n    \"auth_time\": 1676330826,\n    \"nonce_supported\": true\n}\n```\n\n### Compare the organization identifiers\n\nIf somebody authenticates with Sign in with Apple using a Managed Apple Account, the decoded identity token includes an `org_id` claim that identifies their organization. Compare the value in token’s `org_id` with the `id` you receive from a [doc:\/\/com.apple.rosterapi\/documentation\/RosterAPI\/returns-organization-infrmation] request. If the two identifiers are equal, then the person who authenticated is a user in an organization that’s authorized Roster API for your app.\n\n### Fetch the user’s record\n\nWhen the Managed Apple Account is associated with an organization that authorized Roster API for your app, the Sign in with Apple user identifier is the same as their user identifier in Roster API. Get the user identifier from the `sub` value in the decoded identity token, and pass it as the `userId` to a [doc:\/\/com.apple.rosterapi\/documentation\/RosterAPI\/returns-a-specific-user-in-an-Apple-School-Manager-organization] request.\n\n## Related Documentation\n\n- **Authenticating users with Sign in with Apple**: Securely authenticate users and create accounts for them in your app.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Securely authenticate users and create accounts for them in your app.",
          "name" : "Authenticating users with Sign in with Apple",
          "url" : "https:\/\/developer.apple.com\/documentation\/signinwithapple\/authenticating-users-with-sign-in-with-apple"
        }
      ],
      "title" : "Related Documentation"
    }
  ],
  "source" : "appleJSON",
  "title" : "Integrating with Roster API and Sign in with Apple",
  "url" : "https:\/\/developer.apple.com\/documentation\/RosterAPI\/integrating-with-roster-api-and-sign-in-with-apple"
}