{
  "abstract" : "An object that compresses video data.",
  "codeExamples" : [

  ],
  "contentHash" : "26ee59f9cb5161ca50ea5e7230e3b67e4f6273b36a8fb2127279cac9a36b4a8a",
  "crawledAt" : "2025-12-02T16:13:32Z",
  "id" : "56761A65-7A86-4286-B8AC-6D29B9DAFBDF",
  "kind" : "collection",
  "language" : "swift",
  "module" : "Video Toolbox",
  "overview" : "## Overview\n\nA compression session supports the compression of a sequence of video frames. Here’s the workflow:",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/VideoToolbox\/VTCompressionSession-api-collection\ncrawled: 2025-12-02T16:13:32Z\n---\n\n# VTCompressionSession\n\n**API Collection**\n\nAn object that compresses video data.\n\n## Overview\n\nA compression session supports the compression of a sequence of video frames. Here’s the workflow:\n\n1. Create a compression session using [doc:\/\/com.apple.videotoolbox\/documentation\/VideoToolbox\/VTCompressionSessionCreate(allocator:width:height:codecType:encoderSpecification:imageBufferAttributes:compressedDataAllocator:outputCallback:refcon:compressionSessionOut:)].\n2. Optionally, configure the session with your desired [doc:\/\/com.apple.videotoolbox\/documentation\/VideoToolbox\/compression-properties] by calling [doc:\/\/com.apple.videotoolbox\/documentation\/VideoToolbox\/VTSessionSetProperty(_:key:value:)] or [doc:\/\/com.apple.videotoolbox\/documentation\/VideoToolbox\/VTSessionSetProperties(_:propertyDictionary:)].\n3. Encode video frames using [doc:\/\/com.apple.videotoolbox\/documentation\/VideoToolbox\/VTCompressionSessionEncodeFrame(_:imageBuffer:presentationTimeStamp:duration:frameProperties:sourceFrameRefcon:infoFlagsOut:)] and receive the compressed video frames in the session’s [doc:\/\/com.apple.videotoolbox\/documentation\/VideoToolbox\/VTCompressionOutputCallback].\n4. To force the completion of some or all pending frames, call [doc:\/\/com.apple.videotoolbox\/documentation\/VideoToolbox\/VTCompressionSessionCompleteFrames(_:untilPresentationTimeStamp:)].\n5. When you finish with the compression session, call [doc:\/\/com.apple.videotoolbox\/documentation\/VideoToolbox\/VTCompressionSessionInvalidate(_:)] to invalidate it and [doc:\/\/com.apple.documentation\/documentation\/corefoundation\/1521153-cfrelease] to free its memory.\n\n## Creating a Session\n\n- **VTCompressionSessionCreate(allocator:width:height:codecType:encoderSpecification:imageBufferAttributes:compressedDataAllocator:outputCallback:refcon:compressionSessionOut:)**: Creates an object that compresses video frames.\n\n## Configuring a Session\n\n- **Compression Properties**: Properties that you use to configure a compression session.\n\n## Encoding Frames\n\n- **VTCompressionSessionGetPixelBufferPool(_:)**: Returns a pool that provides ideal source pixel buffers for a compression session.\n- **VTCompressionSessionPrepareToEncodeFrames(_:)**: Enables the encoder to perform any necessary resource allocation before the encoder begins encoding frames (optional).\n- **VTCompressionSessionEncodeFrame(_:imageBuffer:presentationTimeStamp:duration:frameProperties:sourceFrameRefcon:infoFlagsOut:)**: Presents frames to the compression session.\n- **VTCompressionSessionEncodeFrame(_:imageBuffer:presentationTimeStamp:duration:frameProperties:infoFlagsOut:outputHandler:)**: Presents frames to the compression session and invokes the output callback when compression is complete.\n- **VTCompressionSessionCompleteFrames(_:untilPresentationTimeStamp:)**: Forces the compression session to complete the encoding of frames.\n\n## Encoding Multi-Image Frames\n\n- **VTIsStereoMVHEVCEncodeSupported()**: Returns a Boolean value that indicates whether the system supports MV-HEVC encoding.\n- **VTCompressionSessionEncodeMultiImageFrame(_:taggedBuffers:presentationTimeStamp:duration:frameProperties:infoFlagsOut:outputHandler:)**: Passes a multi-image frame to a compression session for encoding and provides a callback to handle the output.\n\n## Performing Multiple Passes\n\n- **VTCompressionSessionBeginPass(_:flags:_:)**: Marks the start of a specific compression pass.\n- **VTCompressionSessionEndPass(_:furtherPassesRequestedOut:_:)**: Marks the end of a compression pass.\n- **VTCompressionSessionGetTimeRangesForNextPass(_:timeRangeCountOut:timeRangeArrayOut:)**: Retrieves the time ranges for the next pass.\n\n## Invalidating a Session\n\n- **VTCompressionSessionInvalidate(_:)**: Tears down a compression session.\n\n## Accessing the Type Identifier\n\n- **VTCompressionSessionGetTypeID()**: Retrieves the Core Foundation type identifier for the compression session.\n\n## Data Types\n\n- **VTCompressionSession**: A reference to a VideoToolbox compression session.\n- **VTEncodeInfoFlags**: Flags that indicate encoder state.\n\n## Compression\n\n- **Encoding video for low-latency conferencing**: Configure a compression session to optimize encoding for video-conferencing apps.\n- **Encoding video for live streaming**: Configure a compression session to encode video for live streaming.\n- **Encoding video for offline transcoding**: Configure a compression session to transcode video in offline workflows.\n- **VTDecompressionSession**: An object that decompresses video data.\n- **VTFrameSilo**: An object that stores sample buffers from a multipass encoding session.\n- **VTMultiPassStorage**: An object that stores video encoding metadata from a multipass encoding session.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Creates an object that compresses video frames.",
          "name" : "VTCompressionSessionCreate(allocator:width:height:codecType:encoderSpecification:imageBufferAttributes:compressedDataAllocator:outputCallback:refcon:compressionSessionOut:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/VideoToolbox\/VTCompressionSessionCreate(allocator:width:height:codecType:encoderSpecification:imageBufferAttributes:compressedDataAllocator:outputCallback:refcon:compressionSessionOut:)"
        }
      ],
      "title" : "Creating a Session"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Properties that you use to configure a compression session.",
          "name" : "Compression Properties",
          "url" : "https:\/\/developer.apple.com\/documentation\/VideoToolbox\/compression-properties"
        }
      ],
      "title" : "Configuring a Session"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Returns a pool that provides ideal source pixel buffers for a compression session.",
          "name" : "VTCompressionSessionGetPixelBufferPool(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/VideoToolbox\/VTCompressionSessionGetPixelBufferPool(_:)"
        },
        {
          "description" : "Enables the encoder to perform any necessary resource allocation before the encoder begins encoding frames (optional).",
          "name" : "VTCompressionSessionPrepareToEncodeFrames(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/VideoToolbox\/VTCompressionSessionPrepareToEncodeFrames(_:)"
        },
        {
          "description" : "Presents frames to the compression session.",
          "name" : "VTCompressionSessionEncodeFrame(_:imageBuffer:presentationTimeStamp:duration:frameProperties:sourceFrameRefcon:infoFlagsOut:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/VideoToolbox\/VTCompressionSessionEncodeFrame(_:imageBuffer:presentationTimeStamp:duration:frameProperties:sourceFrameRefcon:infoFlagsOut:)"
        },
        {
          "description" : "Presents frames to the compression session and invokes the output callback when compression is complete.",
          "name" : "VTCompressionSessionEncodeFrame(_:imageBuffer:presentationTimeStamp:duration:frameProperties:infoFlagsOut:outputHandler:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/VideoToolbox\/VTCompressionSessionEncodeFrame(_:imageBuffer:presentationTimeStamp:duration:frameProperties:infoFlagsOut:outputHandler:)"
        },
        {
          "description" : "Forces the compression session to complete the encoding of frames.",
          "name" : "VTCompressionSessionCompleteFrames(_:untilPresentationTimeStamp:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/VideoToolbox\/VTCompressionSessionCompleteFrames(_:untilPresentationTimeStamp:)"
        }
      ],
      "title" : "Encoding Frames"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Returns a Boolean value that indicates whether the system supports MV-HEVC encoding.",
          "name" : "VTIsStereoMVHEVCEncodeSupported()",
          "url" : "https:\/\/developer.apple.com\/documentation\/VideoToolbox\/VTIsStereoMVHEVCEncodeSupported()"
        },
        {
          "description" : "Passes a multi-image frame to a compression session for encoding and provides a callback to handle the output.",
          "name" : "VTCompressionSessionEncodeMultiImageFrame(_:taggedBuffers:presentationTimeStamp:duration:frameProperties:infoFlagsOut:outputHandler:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/VideoToolbox\/VTCompressionSessionEncodeMultiImageFrame(_:taggedBuffers:presentationTimeStamp:duration:frameProperties:infoFlagsOut:outputHandler:)"
        }
      ],
      "title" : "Encoding Multi-Image Frames"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Marks the start of a specific compression pass.",
          "name" : "VTCompressionSessionBeginPass(_:flags:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/VideoToolbox\/VTCompressionSessionBeginPass(_:flags:_:)"
        },
        {
          "description" : "Marks the end of a compression pass.",
          "name" : "VTCompressionSessionEndPass(_:furtherPassesRequestedOut:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/VideoToolbox\/VTCompressionSessionEndPass(_:furtherPassesRequestedOut:_:)"
        },
        {
          "description" : "Retrieves the time ranges for the next pass.",
          "name" : "VTCompressionSessionGetTimeRangesForNextPass(_:timeRangeCountOut:timeRangeArrayOut:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/VideoToolbox\/VTCompressionSessionGetTimeRangesForNextPass(_:timeRangeCountOut:timeRangeArrayOut:)"
        }
      ],
      "title" : "Performing Multiple Passes"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Tears down a compression session.",
          "name" : "VTCompressionSessionInvalidate(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/VideoToolbox\/VTCompressionSessionInvalidate(_:)"
        }
      ],
      "title" : "Invalidating a Session"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Retrieves the Core Foundation type identifier for the compression session.",
          "name" : "VTCompressionSessionGetTypeID()",
          "url" : "https:\/\/developer.apple.com\/documentation\/VideoToolbox\/VTCompressionSessionGetTypeID()"
        }
      ],
      "title" : "Accessing the Type Identifier"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "A reference to a VideoToolbox compression session.",
          "name" : "VTCompressionSession",
          "url" : "https:\/\/developer.apple.com\/documentation\/VideoToolbox\/VTCompressionSession"
        },
        {
          "description" : "Flags that indicate encoder state.",
          "name" : "VTEncodeInfoFlags",
          "url" : "https:\/\/developer.apple.com\/documentation\/VideoToolbox\/VTEncodeInfoFlags"
        }
      ],
      "title" : "Data Types"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Configure a compression session to optimize encoding for video-conferencing apps.",
          "name" : "Encoding video for low-latency conferencing",
          "url" : "https:\/\/developer.apple.com\/documentation\/VideoToolbox\/encoding-video-for-low-latency-conferencing"
        },
        {
          "description" : "Configure a compression session to encode video for live streaming.",
          "name" : "Encoding video for live streaming",
          "url" : "https:\/\/developer.apple.com\/documentation\/VideoToolbox\/encoding-video-for-live-streaming"
        },
        {
          "description" : "Configure a compression session to transcode video in offline workflows.",
          "name" : "Encoding video for offline transcoding",
          "url" : "https:\/\/developer.apple.com\/documentation\/VideoToolbox\/encoding-video-for-offline-transcoding"
        },
        {
          "description" : "An object that decompresses video data.",
          "name" : "VTDecompressionSession",
          "url" : "https:\/\/developer.apple.com\/documentation\/VideoToolbox\/VTDecompressionSession-api-collection"
        },
        {
          "description" : "An object that stores sample buffers from a multipass encoding session.",
          "name" : "VTFrameSilo",
          "url" : "https:\/\/developer.apple.com\/documentation\/VideoToolbox\/VTFrameSilo-api-collection"
        },
        {
          "description" : "An object that stores video encoding metadata from a multipass encoding session.",
          "name" : "VTMultiPassStorage",
          "url" : "https:\/\/developer.apple.com\/documentation\/VideoToolbox\/VTMultiPassStorage-api-collection"
        }
      ],
      "title" : "Compression"
    }
  ],
  "source" : "appleJSON",
  "title" : "VTCompressionSession",
  "url" : "https:\/\/developer.apple.com\/documentation\/VideoToolbox\/VTCompressionSession-api-collection"
}