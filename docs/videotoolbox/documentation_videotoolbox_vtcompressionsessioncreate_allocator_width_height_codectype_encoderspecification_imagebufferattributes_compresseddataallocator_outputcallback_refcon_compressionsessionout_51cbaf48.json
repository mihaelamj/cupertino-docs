{
  "abstract" : "Creates an object that compresses video frames.",
  "codeExamples" : [

  ],
  "contentHash" : "80a7f497c9002b72d3d9598a0fc51584e82bb215d002ea769b3d3c46ed6242d8",
  "crawledAt" : "2025-12-02T19:47:37Z",
  "declaration" : {
    "code" : "func VTCompressionSessionCreate(allocator: CFAllocator?, width: Int32, height: Int32, codecType: CMVideoCodecType, encoderSpecification: CFDictionary?, imageBufferAttributes sourceImageBufferAttributes: CFDictionary?, compressedDataAllocator: CFAllocator?, outputCallback: VTCompressionOutputCallback?, refcon outputCallbackRefCon: UnsafeMutableRawPointer?, compressionSessionOut: UnsafeMutablePointer<VTCompressionSession?>) -> OSStatus",
    "language" : "swift"
  },
  "id" : "FBFBD5CD-8EF7-42EF-9DE9-70BAE020D8D4",
  "kind" : "function",
  "language" : "swift",
  "module" : "Video Toolbox",
  "overview" : "## Discussion\n\nThe session outputs compressed frames through the output callback.",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "tvOS",
    "visionOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/VideoToolbox\/VTCompressionSessionCreate(allocator:width:height:codecType:encoderSpecification:imageBufferAttributes:compressedDataAllocator:outputCallback:refcon:compressionSessionOut:)\ncrawled: 2025-12-02T19:47:37Z\n---\n\n# VTCompressionSessionCreate(allocator:width:height:codecType:encoderSpecification:imageBufferAttributes:compressedDataAllocator:outputCallback:refcon:compressionSessionOut:)\n\n**Function**\n\nCreates an object that compresses video frames.\n\n## Declaration\n\n```swift\nfunc VTCompressionSessionCreate(allocator: CFAllocator?, width: Int32, height: Int32, codecType: CMVideoCodecType, encoderSpecification: CFDictionary?, imageBufferAttributes sourceImageBufferAttributes: CFDictionary?, compressedDataAllocator: CFAllocator?, outputCallback: VTCompressionOutputCallback?, refcon outputCallbackRefCon: UnsafeMutableRawPointer?, compressionSessionOut: UnsafeMutablePointer<VTCompressionSession?>) -> OSStatus\n```\n\n## Parameters\n\n- **allocator**: An allocator for the session. Pass `NULL` to use the default allocator.\n- **width**: The pixel width of video frames.\n- **height**: The pixel height of video frames.\n- **codecType**: The codec type.\n- **encoderSpecification**: A video encoder to use. Pass `NULL` to let VideoToolbox choose an encoder.\n- **sourceImageBufferAttributes**: Required attributes for source pixel buffers, used when creating a pixel buffer pool for source frames. If you don’t want VideoToolbox to create one for you, pass `NULL`.\n\nUsing pixel buffers not allocated by VideoToolbox increases the chance that you’ll have to copy image data.\n- **compressedDataAllocator**: An allocator for the compressed data. Pass `NULL` to use the default allocator.\n\nIn MacOS 10.12 and later, using a `compressedDataAllocator` may trigger an extra buffer copy.\n- **outputCallback**: The callback to invoke with compressed frames. The system may call this function asynchronously, on a different thread from the one that calls [doc:\/\/com.apple.videotoolbox\/documentation\/VideoToolbox\/VTCompressionSessionEncodeFrame(_:imageBuffer:presentationTimeStamp:duration:frameProperties:sourceFrameRefcon:infoFlagsOut:)].\n\nPass `NULL` only if you’ll be calling [doc:\/\/com.apple.videotoolbox\/documentation\/VideoToolbox\/VTCompressionSessionEncodeFrame(_:imageBuffer:presentationTimeStamp:duration:frameProperties:infoFlagsOut:outputHandler:)] for encoding frames.\n- **outputCallbackRefCon**: Client-defined reference value for the output callback.\n- **compressionSessionOut**: A pointer to a variable to receive the new compression session.\n\n## Discussion\n\nThe session outputs compressed frames through the output callback.\n\n## Callbacks\n\n- **VTCompressionOutputCallback**: A callback for the system to invoke when it’s finished compressing a frame.\n- **VTCompressionOutputHandler**: A callback for the system to invoke when it’s finished compressing a frame.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "A callback for the system to invoke when it’s finished compressing a frame.",
          "name" : "VTCompressionOutputCallback",
          "url" : "https:\/\/developer.apple.com\/documentation\/VideoToolbox\/VTCompressionOutputCallback"
        },
        {
          "description" : "A callback for the system to invoke when it’s finished compressing a frame.",
          "name" : "VTCompressionOutputHandler",
          "url" : "https:\/\/developer.apple.com\/documentation\/VideoToolbox\/VTCompressionOutputHandler"
        }
      ],
      "title" : "Callbacks"
    }
  ],
  "source" : "appleJSON",
  "title" : "VTCompressionSessionCreate(allocator:width:height:codecType:encoderSpecification:imageBufferAttributes:compressedDataAllocator:outputCallback:refcon:compressionSessionOut:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/VideoToolbox\/VTCompressionSessionCreate(allocator:width:height:codecType:encoderSpecification:imageBufferAttributes:compressedDataAllocator:outputCallback:refcon:compressionSessionOut:)"
}