{
  "abstract" : "Display up-to-date data and offer quick interactions in the Dynamic Island, on the Lock Screen, in CarPlay, and on a paired Mac or Apple Watch.",
  "codeExamples" : [
    {
      "code" : "import ActivityKit\n\nstruct AdventureAttributes: ActivityAttributes {\n    struct ContentState: Codable & Hashable {\n        let currentHealthLevel: Double\n        let eventDescription: String\n    }\n    \n    let hero: EmojiRanger\n}",
      "language" : "swift"
    },
    {
      "code" : "import WidgetKit\nimport SwiftUI\n\nstruct AdventureActivityConfiguration: Widget {\n    var body: some WidgetConfiguration {\n        ActivityConfiguration(for: AdventureAttributes.self) { context in\n            \/\/ Create the presentation that appears on the Lock Screen and as a\n            \/\/ banner on the Home Screen of devices that don't support the\n            \/\/ Dynamic Island.\n            \/\/ ...\n        } dynamicIsland: { context in\n            \/\/ Create the presentations that appear in the Dynamic Island.\n            \/\/ ...\n        }\n    }\n}",
      "language" : "swift"
    },
    {
      "code" : "struct AdventureActivityConfiguration: Widget {\n    var body: some WidgetConfiguration {\n        ActivityConfiguration(for: AdventureAttributes.self) { context in\n            \/\/ Create the presentation that appears on the Lock Screen and as a\n            \/\/ banner on the Home Screen of devices that don't support the\n            \/\/ Dynamic Island.\n            AdventureLiveActivityView(\n                hero: context.attributes.hero,\n                isStale: context.isStale,\n                contentState: context.state\n            )\n            .activityBackgroundTint(Color.liveActivityBackground.opacity(0.25))\n        } dynamicIsland: { context in\n            \/\/ Create the presentations that appear in the Dynamic Island.\n            \/\/ ...\n        }\n    }\n}",
      "language" : "swift"
    },
    {
      "code" : "import SwiftUI\nimport WidgetKit\n\nstruct AdventureActivityConfiguration: Widget {\n    var body: some WidgetConfiguration {\n        ActivityConfiguration(for: AdventureAttributes.self) { context in\n            \/\/ Create the presentation that appears on the Lock Screen and as a\n            \/\/ banner on the Home Screen of devices that don't support the\n            \/\/ Dynamic Island.\n            \/\/ ...\n        } dynamicIsland: { context in\n            \/\/ Create the presentations that appear in the Dynamic Island.\n            DynamicIsland {\n                \/\/ Create the expanded presentation.\n                \/\/ ...\n            } compactLeading: {\n                \/\/ Create the compact leading presentation.\n                Avatar(hero: context.attributes.hero, includeBackground: true)\n                    .accessibilityLabel(\"The avatar of \\(context.attributes.hero.name).\")\n            } compactTrailing: {\n                \/\/ Create the compact trailing presentation.\n                ProgressView(value: context.state.currentHealthLevel, total: 1) {\n                    let healthLevel = Int(context.state.currentHealthLevel * 100)\n                    Text(\"\\(healthLevel)\")\n                        .accessibilityLabel(\"Health level at \\(healthLevel) percent.\")\n                }\n                .progressViewStyle(.circular)\n                .tint(context.state.currentHealthLevel <= 0.2 ? Color.red : Color.green)\n            } minimal: {\n                \/\/ Create the minimal presentation.\n                \/\/ ...\n            }           \n        }\n    }\n}",
      "language" : "swift"
    },
    {
      "code" : "struct AdventureActivityConfiguration: Widget {\n    var body: some WidgetConfiguration {\n        ActivityConfiguration(for: AdventureAttributes.self) { context in\n            \/\/ Create the presentation that appears on the Lock Screen and as a\n            \/\/ banner on the Home Screen of devices that don't support the\n            \/\/ Dynamic Island.\n            \/\/ ...\n        } dynamicIsland: { context in\n            \/\/ Create the presentations that appear in the Dynamic Island.\n            DynamicIsland {\n                \/\/ Create the expanded presentation.\n                expandedContent(\n                    hero: context.attributes.hero,\n                    contentState: context.state,\n                    isStale: context.isStale\n                )\n            } compactLeading: {\n                \/\/ Create the compact leading presentation.\n                \/\/ ...\n            } compactTrailing: {\n                \/\/ Create the compact trailing presentation.\n                \/\/ ...\n            } minimal: {\n                \/\/ Create the minimal presentation.\n                \/\/ ...\n            }\n        }\n    }\n    \n    @DynamicIslandExpandedContentBuilder\n    private func expandedContent(hero: EmojiRanger,\n                                 contentState: AdventureAttributes.ContentState,\n                                 isStale: Bool) -> DynamicIslandExpandedContent<some View> {\n        DynamicIslandExpandedRegion(.leading) {\n            LiveActivityAvatarView(hero: hero)\n        }\n        \n        DynamicIslandExpandedRegion(.trailing) {\n            StatsView(\n                hero: hero,\n                isStale: isStale\n            )\n        }\n        \n        DynamicIslandExpandedRegion(.bottom) {\n            HealthBar(currentHealthLevel: contentState.currentHealthLevel)\n            \n            EventDescriptionView(\n                hero: hero,\n                contentState: contentState\n            )\n        }\n    }\n}",
      "language" : "swift"
    },
    {
      "code" : "if ActivityAuthorizationInfo().areActivitiesEnabled {\n    do {\n        let adventure = AdventureAttributes(hero: hero)\n        let initialState = AdventureAttributes.ContentState(\n            currentHealthLevel: hero.healthLevel,\n            eventDescription: \"Adventure has begun!\"\n        )\n        \n        let activity = try Activity.request(\n            attributes: adventure,\n            content: .init(state: initialState, staleDate: nil),\n            pushType: .token\n        )\n        \n        self.setup(withActivity: activity)\n    } catch {\n        errorMessage = \"\"\"\n\t\t\t\t    Couldn't start activity\n\t\t\t\t    ------------------------\n\t\t\t\t    \\(String(describing: error))\n\t\t\t\t    \"\"\"\n        \n        self.errorMessage = errorMessage\n    }\n}",
      "language" : "swift"
    },
    {
      "code" : "guard let activity = currentActivity else {\n    return\n}\n\nvar alertConfig: AlertConfiguration? = nil\nlet contentState: AdventureAttributes.ContentState\nif alert {\n    let heroName = activity.attributes.hero.name\n    \n    alertConfig = AlertConfiguration(\n        title: \"\\(heroName) has been knocked down!\",\n        body: \"Open the app and use a potion to heal \\(heroName).\",\n        sound: .default\n    )\n    \n    contentState = AdventureAttributes.ContentState(\n        currentHealthLevel: 0,\n        eventDescription: \"\\(heroName) has been knocked down!\"\n    )\n} else {\n    contentState = AdventureAttributes.ContentState(\n        currentHealthLevel: Double.random(in: 0...1),\n        eventDescription: self.getEventDescription(hero: activity.attributes.hero)\n    )\n}\n\nawait activity.update(\n    ActivityContent<AdventureAttributes.ContentState>(\n        state: contentState,\n        staleDate: Date.now + 15,\n        relevanceScore: alert ? 100 : 50\n    ),\n    alertConfiguration: alertConfig\n)",
      "language" : "swift"
    },
    {
      "code" : "func endActivity(dismissTimeInterval: Double?) async {\n    guard let activity = currentActivity else {\n        return\n    }\n    \n    let hero = activity.attributes.hero\n    \n    let finalContent = AdventureAttributes.ContentState(\n        currentHealthLevel: 1.0,\n        eventDescription: \"Adventure over! \\(hero.name) is taking a nap.\"\n    )\n    \n    let dismissalPolicy: ActivityUIDismissalPolicy\n    if let dismissTimeInterval = dismissTimeInterval {\n        if dismissTimeInterval <= 0 {\n            dismissalPolicy = .immediate\n        } else {\n            dismissalPolicy = .after(.now + dismissTimeInterval)\n        }\n    } else {\n        dismissalPolicy = .default\n    }\n    \n    await activity.end(ActivityContent(state: finalContent, staleDate: nil), dismissalPolicy: dismissalPolicy)\n}",
      "language" : "swift"
    },
    {
      "code" : "\/\/ Observe updates for ongoing Live Activities.\nTask {\n    for await content in activity.contentUpdates {\n        self.updateAdventureView(content: content)\n    }\n}",
      "language" : "swift"
    }
  ],
  "contentHash" : "1b64136fcf6fcfbc6ee40a0fb3512e3f67c25d12b7fd097189295d9b250638ba",
  "crawledAt" : "2025-12-03T03:45:59Z",
  "id" : "F61D587D-6DDB-4A44-8E6A-9134E592243D",
  "kind" : "article",
  "language" : "swift",
  "module" : "ActivityKit",
  "overview" : "## Overview\n\nLive Activities display your app’s current data on the Lock Screen, in the Dynamic Island, in CarPlay, and on a paired Mac or Apple Watch, giving people access to information at a glance and allowing them to perform quick actions that are related to the displayed information.\n\nTo offer Live Activities, add code to your existing widget extension or create a new widget extension if your app doesn’t already include one. Live Activities use [doc:\/\/com.apple.documentation\/documentation\/WidgetKit] functionality and [doc:\/\/com.apple.documentation\/documentation\/SwiftUI] for their user interface. ActivityKit’s role is to handle the life cycle of each Live Activity: You use its API to request, schedule, update, and end a Live Activity and to receive ActivityKit push notifications.\n\nFor design guidance, refer to [https:\/\/developer.apple.com\/design\/human-interface-guidelines\/components\/system-experiences\/live-activities].\n\n### Review Live Activity presentations on iPhone and iPad\n\nLive Activities come in different presentations that appear in various highly visible places. To add support for Live Activities to your iOS or iPadOS app, you must support all presentations. The system automatically chooses the best presentation for each location across a person’s devices.\n\nThe Lock Screen presentation appears on the Lock Screen of iPhone and iPad. On an unlocked device that doesn’t support the Dynamic Island, the Lock Screen presentation appears as a banner for Live Activity updates that include an alert configuration. For example, if a person uses Mail on a device that doesn’t support the Dynamic Island while your app’s Live Activity receives an update with an alert configuration, the system displays the Lock Screen presentation as a banner at the top of the screen to let them know about the updated Live Activity.\n\n\n\nDevices that support the Dynamic Island display Live Activities in the Dynamic Island using several presentations. When there’s only one ongoing Live Activity, the system uses the compact presentation. It’s composed of two elements: one that displays on the leading side of the TrueDepth camera, and one that displays on the trailing side. Although the leading and trailing elements are separate views, they form a cohesive view in the Dynamic Island, representing a single piece of information from your app. People can tap a compact Live Activity to open the app and get more details about the event or task.\n\n\n\nWhen multiple Live Activities from several apps are active, the system uses the minimal presentation to display two of them in the Dynamic Island. The system chooses a Live Activity from one app to appear attached to the Dynamic Island while it presents a Live Activity from another app detached from the Dynamic Island. As with a compact Live Activity, people can tap a minimal Live Activity to open the app and get more details about the event or task.\n\n\n\nAdditionally, the minimal presentation also appears at the top of the iPhone Lock Screen when the device is in StandBy — in landscape orientation, charging, and with the display positioned at an angle to face the room. If a person taps the minimal presentation in StandBy, the Live Activity expands to fill the whole display using the Lock Screen presentation.\n\nWhen people touch and hold a Live Activity in a compact or minimal presentation, the system displays the content in an expanded presentation.\n\n\n\nFor additional information on making sure your Live Activities look great on paired devices, refer to [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/creating-custom-views-for-live-activities].\n\n### Understand constraints\n\nA Live Activity can be active for up to eight hours unless its app or a person ends it before this limit. After the eight-hour limit, the system automatically ends the Live Activity, and immediately removes it from the Dynamic Island. However, the Live Activity remains on the Lock Screen until a person removes it or for up to four additional hours before the system removes it — whichever comes first. As a result, a Live Activity remains on the Lock Screen for a maximum of 12 hours.\n\nFor more information about ending a Live Activity, refer to the “End the Live Activity” section below.\n\nThe system requires image assets for a Live Activity to use a resolution that’s smaller or equal to the size of the presentation for a device. If you use an image asset that’s larger than the size of the Live Activity presentation, the system might fail to start the Live Activity. For example, an image you use for the minimal presentation of your Live Activity shouldn’t exceed 45x36.67 points. For size guidance of Live Activity presentations, refer to [https:\/\/developer.apple.com\/design\/human-interface-guidelines\/live-activities#Specifications].\n\nEach Live Activity runs in its own sandbox, and — unlike a widget — it can’t access the network or receive location updates. To update the dynamic data of an active Live Activity, use ActivityKit in your app or allow your Live Activities to receive ActivityKit push notifications as described in [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/starting-and-updating-live-activities-with-activitykit-push-notifications].\n\n### Add support for Live Activities to your app\n\nThe code that describes the user interface of your Live Activity is part of your app’s widget extension. If you already offer widgets in your app, add code for the Live Activity to your existing widget extension and reuse code between your widgets and Live Activities. However, although Live Activities leverage WidgetKit’s functionality, they aren’t widgets. In contrast to the timeline mechanism you use to update your widgets’ user interface, you start and update a Live Activity from your app with ActivityKit or with ActivityKit push notifications.\n\nTo support Live Activities:\n\n### Define a set of static and dynamic data\n\nAfter you add a widget extension target that includes Live Activities to your Xcode project, describe the data that your Live Activity displays by implementing [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/ActivityAttributes]. The [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/ActivityAttributes] inform the system about static data that appears in the Live Activity. You also use [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/ActivityAttributes] to declare the required custom [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/Activity\/ContentState-swift.typealias] type that describes the dynamic data of your Live Activity. In the example below from the [doc:\/\/com.apple.documentation\/documentation\/WidgetKit\/emoji-rangers-supporting-live-activities-interactivity-and-animations] sample code project, `AdventureAttributes ` describes the hero information as static data using `let hero: EmojiRanger`. Note how the code defines the [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/Activity\/ContentState-swift.typealias] to encapsulate dynamic data: the current health level of the hero and a string that describes what happens to the hero.\n\n### Add Live Activities to the widget extension\n\nLive Activities leverage WidgetKit. After you add code to describe the data that appears in the Live Activity with the [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/ActivityAttributes] structure, add code to return an [doc:\/\/com.apple.documentation\/documentation\/WidgetKit\/ActivityConfiguration] in your widget implementation.\n\nThe following example uses the `AdventureAttributes` structure from the previous example:\n\nIf your app already offers widgets, add the Live Activity to your [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/WidgetBundle]. If you don’t have a [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/WidgetBundle] — for example, if you only offer one widget — create a widget bundle as described in [doc:\/\/com.apple.documentation\/documentation\/WidgetKit\/Creating-a-Widget-Extension] and then add the Live Activity to it.\n\n### Create the Lock Screen presentation\n\nTo create the user interface of the Live Activity, you use [doc:\/\/com.apple.documentation\/documentation\/SwiftUI] in the widget extension you created earlier. Similar to widgets, you don’t provide the size of the user interface for your Live Activity but let the system determine the appropriate dimensions.\n\nStart with the presentation that appears on the Lock Screen. The following code displays the information that the `AdventureAttributes` struct describes using the custom `AdventureLiveActivityView`:\n\nOn a device that doesn’t support the Dynamic Island, the system displays the Lock Screen presentation as a banner for a Live Activity update  if:\n\nOn iPhone in StandBy, the Lock Screen presentation appears scaled to fill the screen of the device. Make sure your assets offer a high-enough resolution for StandBy. Additionally, consider updating the Lock Screen presentation to make use of the additional space. To detect Standby, use the [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/EnvironmentValues\/isActivityFullscreen] environment variable.\n\n### Create the compact and minimal presentations\n\nLive Activities appear in the Dynamic Island of devices that support it. When you start one or more Live Activities and no other app starts a Live Activity, the compact leading and trailing presentations appear together to form a cohesive presentation in the Dynamic Island for one Live Activity.\n\n\n\nWhen more than one app starts a Live Activity, the system chooses which Live Activities are visible and displays two Live Activities using the minimal presentation for each: One minimal presentation appears attached to the Dynamic Island, while the other appears detached. Additionally, the detached minimal presentation appears on the Lock Screen on iPhone in StandBy. If your app starts more than one Live Activity at the same time, you can tell the system which one it should display by setting a relevance score. For more information, refer to the [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/displaying-live-data-with-live-activities#Configure-the-Live-Activity] section below.\n\n\n\nThe following example shows how the [doc:\/\/com.apple.documentation\/documentation\/WidgetKit\/emoji-rangers-supporting-live-activities-interactivity-and-animations] app provides the required compact and minimal presentations. For the leading presentation, it reuses the custom SwiftUI view `Avatar`. For the trailing presentation, it uses a [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/ProgressView].\n\n### Create the expanded presentation\n\nIn addition to the compact and minimal presentations, you must support the expanded presentation. It appears when a person touches and holds a compact or minimal presentation, and it also appears briefly for Live Activity updates.\n\n\n\nUse the [doc:\/\/com.apple.documentation\/documentation\/WidgetKit\/DynamicIslandExpandedRegionPosition] to specify detailed instructions where you want SwiftUI to position your content. The following example shows how the [doc:\/\/com.apple.documentation\/documentation\/WidgetKit\/emoji-rangers-supporting-live-activities-interactivity-and-animations] app creates its expanded presentation using a [doc:\/\/com.apple.documentation\/documentation\/WidgetKit\/DynamicIslandExpandedContentBuilder]:\n\nTo render views that appear in the expanded Live Activity, the system divides the expanded presentation into different areas. Note how the example returns a [doc:\/\/com.apple.documentation\/documentation\/WidgetKit\/DynamicIsland] that specifies several [doc:\/\/com.apple.documentation\/documentation\/WidgetKit\/DynamicIslandExpandedRegion] objects. Pass the following [doc:\/\/com.apple.documentation\/documentation\/WidgetKit\/DynamicIslandExpandedRegionPosition] values to lay out your content at a specified position in the expanded presentation:\n\n\n\nTo render content that appears in the expanded Live Activity, the system first determines the width of the center content while taking into account the minimal width of the leading and trailing content. The system then places and sizes the leading and trailing content based on its vertical position. By default, leading and trailing positions receive an equal amount of horizontal space.\n\nYou can tell the system to prioritize one of the `DynamicIslandExpandedRegion` views by passing a `priority` to the [doc:\/\/com.apple.documentation\/documentation\/WidgetKit\/DynamicIslandExpandedRegion\/init(_:priority:content:)] initializer. The system renders the view with the highest priority with the full width of the Dynamic Island. The following illustration shows leading and trailing positions in an expanded presentation with higher priority to render them below the TrueDepth camera.\n\n\n\n### Configure how your Live Activity launches your app\n\nPeople tap your Live Activity to launch your app. Use deep links to take them to the scene in your app that matches the activity’s information. On Apple Watch, choose if people can open your app on iPhone or its watchOS companion by tapping your Live Activity on Apple Watch. For more information, refer to [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/launching-your-app-from-a-live-activity].\n\n### Add Buttons or Toggles\n\nLike widgets, Live Activities can contain SwiftUI buttons and toggles to provide quick actions. For example, a food-ordering app might show a button in its Live Activity that people tap to check in at a restaurant when they pick up a takeout order.\n\nTo add a toggle or button to a Live Activity, adopt the [doc:\/\/com.apple.documentation\/documentation\/AppIntents] framework and use the initializers for [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/Button] and [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/Toggle] that take an app intent. For more information about using toggles and buttons in widget extensions, including for Live Activities, refer to [doc:\/\/com.apple.documentation\/documentation\/WidgetKit].\n\n### Provide accessibility labels\n\nDesigning with accessibility in mind is a foundational principle when creating an app. It also applies to Live Activities. To allow people to customize how they interact with your Live Activity and to make sure VoiceOver for your Live Activity works correctly, add accessibility labels for the SwiftUI views you create for each Live Activity presentation. For more information, refer to [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/adding-accessible-descriptions-to-widgets-and-live-activities].\n\n### Make sure Live Activities are available\n\nLive Activities are available on iPhone and iPad. If your app is available on additional platforms and offers a widget extension, make sure Live Activities are available at runtime. Additionally, people can choose to deactivate Live Activities for an app in the Settings app.\n\nTo refer to if Live Activities are available and if a person allowed your app to use Live Activities:\n\n### Configure the Live Activity\n\nBefore you can start a Live Activity in your app, configure it with an [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/ActivityContent] structure. The activity content encapsulates the [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/ActivityAttributes] and additional configuration information:\n\nWhile setting the [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/ActivityContent\/staleDate] is optional, it’s helpful when you want to ensure your Live Activity doesn’t display outdated content. At the specified date, the [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/Activity\/activityState] changes to [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/ActivityState\/stale] and [doc:\/\/com.apple.documentation\/documentation\/WidgetKit\/ActivityViewContext\/isStale] changes to `true`. Access [doc:\/\/com.apple.documentation\/documentation\/WidgetKit\/ActivityViewContext\/isStale] to monitor the activity state and respond to outdated Live Activities that haven’t received updates. For example, while a person has network connectivity, a sports app could update the Live Activity with the latest game information and advance the stale date. If a person enters an area without network connectivity, the app can’t update the Live Activity with new information and an advanced stale date. Eventually, the Live Activity becomes stale and displays text to indicate that the displayed information is outdated. On the next app launch or when it performs background tasks, the app can also respond to the [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/ActivityState\/stale] state.\n\nIf your app starts more than one Live Activity, provide a relevance score to determine the order of your Live Activities on the Lock Screen and which of your Live Activities appears in the Dynamic Island:\n\nThe system expects relative values for the relevance score. Assign a higher value for an important Live Activity content update — for example, a score of `100` — and use lower values for less important Live Activity content updates — for example, `50`.\n\n### Start the Live Activity\n\nYou start a Live Activity in your app’s code while the app is in the foreground with the [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/Activity\/request(attributes:content:pushType:)] function. Pass the [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/ActivityAttributes] and [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/ActivityContent] objects you created to it and, if you implement ActivityKit push notifications, the `pushType` parameter.\n\nThe following example from the [doc:\/\/com.apple.documentation\/documentation\/WidgetKit\/emoji-rangers-supporting-live-activities-interactivity-and-animations] app creates the initial attributes and content state for the Emoji Rangers Live Activity.\n\nIn general, your app needs to be in the foreground to start a Live Activity. You can update or end a Live Activity from your app while it runs in the background — for example, by using [doc:\/\/com.apple.documentation\/documentation\/BackgroundTasks]. However, you can start a Live Activity while your app is in the background by using an app intent that conforms to [doc:\/\/com.apple.documentation\/documentation\/AppIntents\/LiveActivityIntent]. For example, you might create a control that people place in Control Center. The control could use a `LiveActivityIntent` and starts the Live Activity in the intent’s `perform()` method. For more information about app intents, refer to [doc:\/\/com.apple.documentation\/documentation\/AppIntents] and [doc:\/\/com.apple.documentation\/documentation\/AppIntents\/Making-actions-and-content-discoverable-and-widely-available].\n\n### Schedule a Live Activity at a specific date\n\nYou can schedule a Live Activity for a specific date using the [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/Activity\/request(attributes:content:pushType:style:alertConfiguration:startDate:)] function. For example, an app that allows people to watch or follow sports matches might want to schedule a Live Activity for an upcoming game. If you allow people to schedule a Live Activity, you must pass an [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/AlertConfiguration] to make sure they know when your app starts a Live Activity.\n\n### Start a transient Live Activity\n\nLive Activities can appear temporarily in the extended presentation in the Dynamic Island to allow interactions and status updates while a person is actively performing a task. Locking the device, collapsing the extended presentation in the Dynamic Island, or tapping outside the Dynamic Island ends the Live Activity. For example, the Music app displays an extended presentation in the Dynamic Island when a person starts playing audio in the app, allowing people to choose to move the audio to a HomePod that’s on the same Wi-Fi network with AirPlay. The Live Activity ends automatically when the person leaves the app.\n\nTo start a transient Live Activity, use [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/Activity\/request(attributes:content:pushType:style:)] and pass [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/ActivityStyle\/transient]  as the `style` parameter.\n\n### Start, update, and end your Live Activity with a push notification\n\nIn addition to updating and ending a Live Activity from your app with ActivityKit, start, update, or end a Live Activity with an ActivityKit push notification that you send from your server to the Apple Push Notification service (APNs).\n\nTo learn more about using ActivityKit push notifications, refer to [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/starting-and-updating-live-activities-with-activitykit-push-notifications].\n\n### Update the Live Activity\n\nWhen you start a Live Activity from your app, update the data that appears in the Live Activity using the [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/Activity\/update(_:)] function of the [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/Activity] object you received when you started the Live Activity. To retrieve your app’s active Live Activities, use [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/Activity\/activities].\n\nFor important updates, use the [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/Activity\/update(_:alertConfiguration:)] function to display an alert on iPhone, iPad, and a paired Apple Watch that tells a person about new Live Activity content. For example, the [doc:\/\/com.apple.documentation\/documentation\/WidgetKit\/emoji-rangers-supporting-live-activities-interactivity-and-animations] app updates its Live Activity using an alert configuration to display an alert that lets people know that the hero has been knocked down:\n\nOn Apple Watch, the system uses the `title` and `body` attributes for the alert. On iPhone and iPad, the system doesn’t show a regular alert but instead shows the expanded Live Activity in the Dynamic Island or the Lock Screen presentation as a banner on devices without the Dynamic Island.\n\n### Animate content updates\n\nWhen you define the user interface of your Live Activity, the system ignores any animation modifiers — for example, [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/withAnimation(_:_:)] and [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/View\/animation(_:value:)] — and uses the system’s animation timing instead. However, the system performs some animation when the dynamic content of the Live Activity changes. Text views animate content changes with blurred content transitions, and the system animates content transitions for images and SF Symbols. If you add or remove views from the user interface based on content or state changes, views fade in and out. Use the following view transitions to configure these built-in transitions: [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/AnyTransition\/opacity], [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/AnyTransition\/move(edge:)], [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/AnyTransition\/slide], [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/AnyTransition\/push(from:)], or combinations of them. Additionally, request animations for timer text with [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/ContentTransition\/numericText(countsDown:)].\n\nYou can animate data changes in your Live Activity with functions that give you more control over animation timing. For example, you can use [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/Animation\/timingCurve(_:duration:)] to create an animation with a custom timing curve. For more information on SwiftUI animations, refer to [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/Animation].\n\n### End the Live Activity\n\nAlways end a Live Activity after the associated task or live event ends. A Live Activity that ended remains on the Lock Screen until the person removes it or the system removes it automatically. The automatic removal depends on the dismissal policy you provide to the [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/Activity\/end(_:dismissalPolicy:)] function. Always include an updated [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/Activity\/ContentState-swift.typealias] to ensure the Live Activity shows the latest and final content update after it ends. This is important because the Live Activity can remain visible on the Lock Screen for some time after it ends.\n\nThe following example shows how the [doc:\/\/com.apple.documentation\/documentation\/WidgetKit\/emoji-rangers-supporting-live-activities-interactivity-and-animations] app ends its Live Activity and sets a custom dismissal policy based on a setting in the app:\n\nWith the [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/ActivityUIDismissalPolicy\/default] dismissal policy, the Live Activity appears on the Lock Screen for some time after it ends to allow a person to glance at their phone to refer to the latest information. A person can choose to remove the Live Activity at any time, or the system removes it automatically four hours after it ended.\n\nTo immediately remove the Live Activity that ended from the Lock Screen, use [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/ActivityUIDismissalPolicy\/immediate]. Alternatively, use [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/ActivityUIDismissalPolicy\/after(_:)] to specify a date within a four-hour window. While you can provide any date, the system removes the ended Live Activity after the given date or after four hours from the moment the Live Activity ended — whichever comes first.\n\nA person can remove your Live Activity from their Lock Screen at any time. This ends the Live Activity, but it doesn’t end or cancel the person’s action that started it. For example, a person may remove the Live Activity for their pizza delivery from the Lock Screen, but this doesn’t cancel the pizza order.\n\n### Keep track of updates\n\nWhen you start a Live Activity, ActivityKit returns an [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/Activity] object. In addition to the [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/Activity\/id] that uniquely identifies each activity, the [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/Activity] offers sequences to observe content, activity state, and push token updates. Use the corresponding sequence to receive updates in your app, keep your app and Live Activities in sync, and respond to changed data:\n\nThe following example shows how the [doc:\/\/com.apple.documentation\/documentation\/WidgetKit\/emoji-rangers-supporting-live-activities-interactivity-and-animations] app tracks updates its content for ongoing Live Activities and updates its adventure view accordingly:\n\n### Observe active Live Activities\n\nYour app can start more than one Live Activity. For example, a sports app may allow a person to start a Live Activity for each live sports game they’re interested in. If your app starts multiple Live Activities, keep track of ongoing Live Activities for your app using the [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/Activity\/activities] property to make sure your app is aware of all ongoing Live Activities that ActivityKit tracks. Another use case for fetching all activities is to maintain Live Activities that are in progress and make sure you don’t keep any activities running for longer than needed. For example, the system may stop your app, or your app may crash while a Live Activity is active. When the app launches the next time, check if any activities are still active, update your app’s stored Live Activity data, and end any Live Activity that’s no longer relevant.\n\n### Start and stop Live Activities from App Intents\n\nThe [doc:\/\/com.apple.documentation\/documentation\/AppIntents] framework enables you to extend your app’s custom functionality to support system-level services like Siri and the Shortcuts app, as well as the functionality to start a Live Activity. For example, a sports app could expose functionality to start a Live Activity for a person’s favorite sports team with the Shortcuts app or Siri.\n\nStarting a Live Activity from an app intent is almost the same as adopting [doc:\/\/com.apple.documentation\/documentation\/AppIntents] to expose other functionality in your app:",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/activitykit\/displaying-live-data-with-live-activities\ncrawled: 2025-12-03T03:45:59Z\n---\n\n# Displaying live data with Live Activities\n\n**Article**\n\nDisplay up-to-date data and offer quick interactions in the Dynamic Island, on the Lock Screen, in CarPlay, and on a paired Mac or Apple Watch.\n\n## Overview\n\nLive Activities display your app’s current data on the Lock Screen, in the Dynamic Island, in CarPlay, and on a paired Mac or Apple Watch, giving people access to information at a glance and allowing them to perform quick actions that are related to the displayed information.\n\nTo offer Live Activities, add code to your existing widget extension or create a new widget extension if your app doesn’t already include one. Live Activities use [doc:\/\/com.apple.documentation\/documentation\/WidgetKit] functionality and [doc:\/\/com.apple.documentation\/documentation\/SwiftUI] for their user interface. ActivityKit’s role is to handle the life cycle of each Live Activity: You use its API to request, schedule, update, and end a Live Activity and to receive ActivityKit push notifications.\n\nFor design guidance, refer to [https:\/\/developer.apple.com\/design\/human-interface-guidelines\/components\/system-experiences\/live-activities].\n\n### Review Live Activity presentations on iPhone and iPad\n\nLive Activities come in different presentations that appear in various highly visible places. To add support for Live Activities to your iOS or iPadOS app, you must support all presentations. The system automatically chooses the best presentation for each location across a person’s devices.\n\nThe Lock Screen presentation appears on the Lock Screen of iPhone and iPad. On an unlocked device that doesn’t support the Dynamic Island, the Lock Screen presentation appears as a banner for Live Activity updates that include an alert configuration. For example, if a person uses Mail on a device that doesn’t support the Dynamic Island while your app’s Live Activity receives an update with an alert configuration, the system displays the Lock Screen presentation as a banner at the top of the screen to let them know about the updated Live Activity.\n\n\n\nDevices that support the Dynamic Island display Live Activities in the Dynamic Island using several presentations. When there’s only one ongoing Live Activity, the system uses the compact presentation. It’s composed of two elements: one that displays on the leading side of the TrueDepth camera, and one that displays on the trailing side. Although the leading and trailing elements are separate views, they form a cohesive view in the Dynamic Island, representing a single piece of information from your app. People can tap a compact Live Activity to open the app and get more details about the event or task.\n\n\n\nWhen multiple Live Activities from several apps are active, the system uses the minimal presentation to display two of them in the Dynamic Island. The system chooses a Live Activity from one app to appear attached to the Dynamic Island while it presents a Live Activity from another app detached from the Dynamic Island. As with a compact Live Activity, people can tap a minimal Live Activity to open the app and get more details about the event or task.\n\n\n\nAdditionally, the minimal presentation also appears at the top of the iPhone Lock Screen when the device is in StandBy — in landscape orientation, charging, and with the display positioned at an angle to face the room. If a person taps the minimal presentation in StandBy, the Live Activity expands to fill the whole display using the Lock Screen presentation.\n\nWhen people touch and hold a Live Activity in a compact or minimal presentation, the system displays the content in an expanded presentation.\n\n\n\nFor additional information on making sure your Live Activities look great on paired devices, refer to [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/creating-custom-views-for-live-activities].\n\n### Understand constraints\n\nA Live Activity can be active for up to eight hours unless its app or a person ends it before this limit. After the eight-hour limit, the system automatically ends the Live Activity, and immediately removes it from the Dynamic Island. However, the Live Activity remains on the Lock Screen until a person removes it or for up to four additional hours before the system removes it — whichever comes first. As a result, a Live Activity remains on the Lock Screen for a maximum of 12 hours.\n\nFor more information about ending a Live Activity, refer to the “End the Live Activity” section below.\n\nThe system requires image assets for a Live Activity to use a resolution that’s smaller or equal to the size of the presentation for a device. If you use an image asset that’s larger than the size of the Live Activity presentation, the system might fail to start the Live Activity. For example, an image you use for the minimal presentation of your Live Activity shouldn’t exceed 45x36.67 points. For size guidance of Live Activity presentations, refer to [https:\/\/developer.apple.com\/design\/human-interface-guidelines\/live-activities#Specifications].\n\nEach Live Activity runs in its own sandbox, and — unlike a widget — it can’t access the network or receive location updates. To update the dynamic data of an active Live Activity, use ActivityKit in your app or allow your Live Activities to receive ActivityKit push notifications as described in [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/starting-and-updating-live-activities-with-activitykit-push-notifications].\n\n\n\n### Add support for Live Activities to your app\n\nThe code that describes the user interface of your Live Activity is part of your app’s widget extension. If you already offer widgets in your app, add code for the Live Activity to your existing widget extension and reuse code between your widgets and Live Activities. However, although Live Activities leverage WidgetKit’s functionality, they aren’t widgets. In contrast to the timeline mechanism you use to update your widgets’ user interface, you start and update a Live Activity from your app with ActivityKit or with ActivityKit push notifications.\n\n\n\nTo support Live Activities:\n\n1. Create a widget extension if you haven’t already added one to your project and make sure to select “Include Live Activity” when you add a widget extension target to your Xcode project. For more information on creating a widget extension, refer to [doc:\/\/com.apple.documentation\/documentation\/WidgetKit] and [doc:\/\/com.apple.documentation\/documentation\/WidgetKit\/Creating-a-Widget-Extension].\n2. If your project includes an `Info.plist` file, add the Supports Live Activities entry to it, and set its Boolean value to `YES`. Alternatively, open the `Info.plist` file as source code, add the [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Information-Property-List\/NSSupportsLiveActivities] key, then set the type to `Boolean` and its value to `YES`. If your project doesn’t have an `Info.plist` file, add the Supports Live Activities entry to the list of custom iOS target properties for your iOS app target and set its value to `YES`.\n3. Add code that defines an [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/ActivityAttributes]  structure to describe the static and dynamic data of your Live Activity.\n4. Use the `ActivityAttributes` you defined to create the [doc:\/\/com.apple.documentation\/documentation\/WidgetKit\/ActivityConfiguration].\n5. Add code to configure, start, update, and end your Live Activities.\n6. Make your Live Activity interactive with [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/Button] or [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/Toggle] as described in [doc:\/\/com.apple.documentation\/documentation\/WidgetKit\/Adding-interactivity-to-widgets-and-Live-Activities].\n7. Add animations to bring attention to content updates as described in [doc:\/\/com.apple.documentation\/documentation\/WidgetKit\/Animating-data-updates-in-widgets-and-live-activities].\n\n### Define a set of static and dynamic data\n\nAfter you add a widget extension target that includes Live Activities to your Xcode project, describe the data that your Live Activity displays by implementing [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/ActivityAttributes]. The [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/ActivityAttributes] inform the system about static data that appears in the Live Activity. You also use [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/ActivityAttributes] to declare the required custom [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/Activity\/ContentState-swift.typealias] type that describes the dynamic data of your Live Activity. In the example below from the [doc:\/\/com.apple.documentation\/documentation\/WidgetKit\/emoji-rangers-supporting-live-activities-interactivity-and-animations] sample code project, `AdventureAttributes ` describes the hero information as static data using `let hero: EmojiRanger`. Note how the code defines the [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/Activity\/ContentState-swift.typealias] to encapsulate dynamic data: the current health level of the hero and a string that describes what happens to the hero.\n\n```swift\nimport ActivityKit\n\nstruct AdventureAttributes: ActivityAttributes {\n    struct ContentState: Codable & Hashable {\n        let currentHealthLevel: Double\n        let eventDescription: String\n    }\n    \n    let hero: EmojiRanger\n}\n```\n\n\n\n### Add Live Activities to the widget extension\n\nLive Activities leverage WidgetKit. After you add code to describe the data that appears in the Live Activity with the [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/ActivityAttributes] structure, add code to return an [doc:\/\/com.apple.documentation\/documentation\/WidgetKit\/ActivityConfiguration] in your widget implementation.\n\nThe following example uses the `AdventureAttributes` structure from the previous example:\n\n```swift\nimport WidgetKit\nimport SwiftUI\n\nstruct AdventureActivityConfiguration: Widget {\n    var body: some WidgetConfiguration {\n        ActivityConfiguration(for: AdventureAttributes.self) { context in\n            \/\/ Create the presentation that appears on the Lock Screen and as a\n            \/\/ banner on the Home Screen of devices that don't support the\n            \/\/ Dynamic Island.\n            \/\/ ...\n        } dynamicIsland: { context in\n            \/\/ Create the presentations that appear in the Dynamic Island.\n            \/\/ ...\n        }\n    }\n}\n```\n\n\n\nIf your app already offers widgets, add the Live Activity to your [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/WidgetBundle]. If you don’t have a [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/WidgetBundle] — for example, if you only offer one widget — create a widget bundle as described in [doc:\/\/com.apple.documentation\/documentation\/WidgetKit\/Creating-a-Widget-Extension] and then add the Live Activity to it.\n\n### Create the Lock Screen presentation\n\nTo create the user interface of the Live Activity, you use [doc:\/\/com.apple.documentation\/documentation\/SwiftUI] in the widget extension you created earlier. Similar to widgets, you don’t provide the size of the user interface for your Live Activity but let the system determine the appropriate dimensions.\n\nStart with the presentation that appears on the Lock Screen. The following code displays the information that the `AdventureAttributes` struct describes using the custom `AdventureLiveActivityView`:\n\n```swift\nstruct AdventureActivityConfiguration: Widget {\n    var body: some WidgetConfiguration {\n        ActivityConfiguration(for: AdventureAttributes.self) { context in\n            \/\/ Create the presentation that appears on the Lock Screen and as a\n            \/\/ banner on the Home Screen of devices that don't support the\n            \/\/ Dynamic Island.\n            AdventureLiveActivityView(\n                hero: context.attributes.hero,\n                isStale: context.isStale,\n                contentState: context.state\n            )\n            .activityBackgroundTint(Color.liveActivityBackground.opacity(0.25))\n        } dynamicIsland: { context in\n            \/\/ Create the presentations that appear in the Dynamic Island.\n            \/\/ ...\n        }\n    }\n}\n```\n\n\n\nOn a device that doesn’t support the Dynamic Island, the system displays the Lock Screen presentation as a banner for a Live Activity update  if:\n\n- The device is unlocked and its app isn’t in use\n- You pass an [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/AlertConfiguration] to the [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/Activity\/update(_:alertConfiguration:)] function\n\nOn iPhone in StandBy, the Lock Screen presentation appears scaled to fill the screen of the device. Make sure your assets offer a high-enough resolution for StandBy. Additionally, consider updating the Lock Screen presentation to make use of the additional space. To detect Standby, use the [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/EnvironmentValues\/isActivityFullscreen] environment variable.\n\n### Create the compact and minimal presentations\n\nLive Activities appear in the Dynamic Island of devices that support it. When you start one or more Live Activities and no other app starts a Live Activity, the compact leading and trailing presentations appear together to form a cohesive presentation in the Dynamic Island for one Live Activity.\n\n\n\nWhen more than one app starts a Live Activity, the system chooses which Live Activities are visible and displays two Live Activities using the minimal presentation for each: One minimal presentation appears attached to the Dynamic Island, while the other appears detached. Additionally, the detached minimal presentation appears on the Lock Screen on iPhone in StandBy. If your app starts more than one Live Activity at the same time, you can tell the system which one it should display by setting a relevance score. For more information, refer to the [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/displaying-live-data-with-live-activities#Configure-the-Live-Activity] section below.\n\n\n\nThe following example shows how the [doc:\/\/com.apple.documentation\/documentation\/WidgetKit\/emoji-rangers-supporting-live-activities-interactivity-and-animations] app provides the required compact and minimal presentations. For the leading presentation, it reuses the custom SwiftUI view `Avatar`. For the trailing presentation, it uses a [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/ProgressView].\n\n```swift\nimport SwiftUI\nimport WidgetKit\n\nstruct AdventureActivityConfiguration: Widget {\n    var body: some WidgetConfiguration {\n        ActivityConfiguration(for: AdventureAttributes.self) { context in\n            \/\/ Create the presentation that appears on the Lock Screen and as a\n            \/\/ banner on the Home Screen of devices that don't support the\n            \/\/ Dynamic Island.\n            \/\/ ...\n        } dynamicIsland: { context in\n            \/\/ Create the presentations that appear in the Dynamic Island.\n            DynamicIsland {\n                \/\/ Create the expanded presentation.\n                \/\/ ...\n            } compactLeading: {\n                \/\/ Create the compact leading presentation.\n                Avatar(hero: context.attributes.hero, includeBackground: true)\n                    .accessibilityLabel(\"The avatar of \\(context.attributes.hero.name).\")\n            } compactTrailing: {\n                \/\/ Create the compact trailing presentation.\n                ProgressView(value: context.state.currentHealthLevel, total: 1) {\n                    let healthLevel = Int(context.state.currentHealthLevel * 100)\n                    Text(\"\\(healthLevel)\")\n                        .accessibilityLabel(\"Health level at \\(healthLevel) percent.\")\n                }\n                .progressViewStyle(.circular)\n                .tint(context.state.currentHealthLevel <= 0.2 ? Color.red : Color.green)\n            } minimal: {\n                \/\/ Create the minimal presentation.\n                \/\/ ...\n            }           \n        }\n    }\n}\n```\n\n### Create the expanded presentation\n\nIn addition to the compact and minimal presentations, you must support the expanded presentation. It appears when a person touches and holds a compact or minimal presentation, and it also appears briefly for Live Activity updates.\n\n\n\nUse the [doc:\/\/com.apple.documentation\/documentation\/WidgetKit\/DynamicIslandExpandedRegionPosition] to specify detailed instructions where you want SwiftUI to position your content. The following example shows how the [doc:\/\/com.apple.documentation\/documentation\/WidgetKit\/emoji-rangers-supporting-live-activities-interactivity-and-animations] app creates its expanded presentation using a [doc:\/\/com.apple.documentation\/documentation\/WidgetKit\/DynamicIslandExpandedContentBuilder]:\n\n```swift\nstruct AdventureActivityConfiguration: Widget {\n    var body: some WidgetConfiguration {\n        ActivityConfiguration(for: AdventureAttributes.self) { context in\n            \/\/ Create the presentation that appears on the Lock Screen and as a\n            \/\/ banner on the Home Screen of devices that don't support the\n            \/\/ Dynamic Island.\n            \/\/ ...\n        } dynamicIsland: { context in\n            \/\/ Create the presentations that appear in the Dynamic Island.\n            DynamicIsland {\n                \/\/ Create the expanded presentation.\n                expandedContent(\n                    hero: context.attributes.hero,\n                    contentState: context.state,\n                    isStale: context.isStale\n                )\n            } compactLeading: {\n                \/\/ Create the compact leading presentation.\n                \/\/ ...\n            } compactTrailing: {\n                \/\/ Create the compact trailing presentation.\n                \/\/ ...\n            } minimal: {\n                \/\/ Create the minimal presentation.\n                \/\/ ...\n            }\n        }\n    }\n    \n    @DynamicIslandExpandedContentBuilder\n    private func expandedContent(hero: EmojiRanger,\n                                 contentState: AdventureAttributes.ContentState,\n                                 isStale: Bool) -> DynamicIslandExpandedContent<some View> {\n        DynamicIslandExpandedRegion(.leading) {\n            LiveActivityAvatarView(hero: hero)\n        }\n        \n        DynamicIslandExpandedRegion(.trailing) {\n            StatsView(\n                hero: hero,\n                isStale: isStale\n            )\n        }\n        \n        DynamicIslandExpandedRegion(.bottom) {\n            HealthBar(currentHealthLevel: contentState.currentHealthLevel)\n            \n            EventDescriptionView(\n                hero: hero,\n                contentState: contentState\n            )\n        }\n    }\n}\n```\n\nTo render views that appear in the expanded Live Activity, the system divides the expanded presentation into different areas. Note how the example returns a [doc:\/\/com.apple.documentation\/documentation\/WidgetKit\/DynamicIsland] that specifies several [doc:\/\/com.apple.documentation\/documentation\/WidgetKit\/DynamicIslandExpandedRegion] objects. Pass the following [doc:\/\/com.apple.documentation\/documentation\/WidgetKit\/DynamicIslandExpandedRegionPosition] values to lay out your content at a specified position in the expanded presentation:\n\n- [doc:\/\/com.apple.documentation\/documentation\/WidgetKit\/DynamicIslandExpandedRegionPosition\/center] places content below the TrueDepth camera.\n- [doc:\/\/com.apple.documentation\/documentation\/WidgetKit\/DynamicIslandExpandedRegionPosition\/leading] places content along the leading edge of the expanded Live Activity next to the TrueDepth camera and wraps additional content below it.\n- [doc:\/\/com.apple.documentation\/documentation\/WidgetKit\/DynamicIslandExpandedRegionPosition\/trailing] places content along the trailing edge of the expanded Live Activity next to the TrueDepth camera and wraps additional content below it.\n- [doc:\/\/com.apple.documentation\/documentation\/WidgetKit\/DynamicIslandExpandedRegionPosition\/bottom] places content below the leading, trailing, and center content.\n\n\n\nTo render content that appears in the expanded Live Activity, the system first determines the width of the center content while taking into account the minimal width of the leading and trailing content. The system then places and sizes the leading and trailing content based on its vertical position. By default, leading and trailing positions receive an equal amount of horizontal space.\n\nYou can tell the system to prioritize one of the `DynamicIslandExpandedRegion` views by passing a `priority` to the [doc:\/\/com.apple.documentation\/documentation\/WidgetKit\/DynamicIslandExpandedRegion\/init(_:priority:content:)] initializer. The system renders the view with the highest priority with the full width of the Dynamic Island. The following illustration shows leading and trailing positions in an expanded presentation with higher priority to render them below the TrueDepth camera.\n\n\n\n\n\n### Configure how your Live Activity launches your app\n\nPeople tap your Live Activity to launch your app. Use deep links to take them to the scene in your app that matches the activity’s information. On Apple Watch, choose if people can open your app on iPhone or its watchOS companion by tapping your Live Activity on Apple Watch. For more information, refer to [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/launching-your-app-from-a-live-activity].\n\n### Add Buttons or Toggles\n\nLike widgets, Live Activities can contain SwiftUI buttons and toggles to provide quick actions. For example, a food-ordering app might show a button in its Live Activity that people tap to check in at a restaurant when they pick up a takeout order.\n\nTo add a toggle or button to a Live Activity, adopt the [doc:\/\/com.apple.documentation\/documentation\/AppIntents] framework and use the initializers for [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/Button] and [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/Toggle] that take an app intent. For more information about using toggles and buttons in widget extensions, including for Live Activities, refer to [doc:\/\/com.apple.documentation\/documentation\/WidgetKit].\n\n\n\n### Provide accessibility labels\n\nDesigning with accessibility in mind is a foundational principle when creating an app. It also applies to Live Activities. To allow people to customize how they interact with your Live Activity and to make sure VoiceOver for your Live Activity works correctly, add accessibility labels for the SwiftUI views you create for each Live Activity presentation. For more information, refer to [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/adding-accessible-descriptions-to-widgets-and-live-activities].\n\n### Make sure Live Activities are available\n\nLive Activities are available on iPhone and iPad. If your app is available on additional platforms and offers a widget extension, make sure Live Activities are available at runtime. Additionally, people can choose to deactivate Live Activities for an app in the Settings app.\n\nTo refer to if Live Activities are available and if a person allowed your app to use Live Activities:\n\n- Use [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/ActivityAuthorizationInfo\/areActivitiesEnabled] to synchronously determine whether to show a user interface in your app for starting a Live Activity.\n- Receive asynchronous user authorization updates by observing any user authorization changes with the [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/ActivityAuthorizationInfo\/activityEnablementUpdates-swift.property] stream and respond to them accordingly.\n\n\n\n### Configure the Live Activity\n\nBefore you can start a Live Activity in your app, configure it with an [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/ActivityContent] structure. The activity content encapsulates the [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/ActivityAttributes] and additional configuration information:\n\n- The [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/ActivityContent\/staleDate] tells the system when the Live Activity content becomes outdated.\n- The [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/ActivityContent\/relevanceScore] determines which of your Live Activities appears in the Dynamic Island and the order of your Live Activities on the Lock Screen.\n\nWhile setting the [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/ActivityContent\/staleDate] is optional, it’s helpful when you want to ensure your Live Activity doesn’t display outdated content. At the specified date, the [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/Activity\/activityState] changes to [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/ActivityState\/stale] and [doc:\/\/com.apple.documentation\/documentation\/WidgetKit\/ActivityViewContext\/isStale] changes to `true`. Access [doc:\/\/com.apple.documentation\/documentation\/WidgetKit\/ActivityViewContext\/isStale] to monitor the activity state and respond to outdated Live Activities that haven’t received updates. For example, while a person has network connectivity, a sports app could update the Live Activity with the latest game information and advance the stale date. If a person enters an area without network connectivity, the app can’t update the Live Activity with new information and an advanced stale date. Eventually, the Live Activity becomes stale and displays text to indicate that the displayed information is outdated. On the next app launch or when it performs background tasks, the app can also respond to the [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/ActivityState\/stale] state.\n\nIf your app starts more than one Live Activity, provide a relevance score to determine the order of your Live Activities on the Lock Screen and which of your Live Activities appears in the Dynamic Island:\n\n- If you don’t provide a relevance score or if Live Activities have the same relevance score, the system shows the first Live Activity you started in the Dynamic Island.\n- If you use different relevance scores, the system shows the Live Activity with the highest relevance score in the Dynamic Island.\n\nThe system expects relative values for the relevance score. Assign a higher value for an important Live Activity content update — for example, a score of `100` — and use lower values for less important Live Activity content updates — for example, `50`.\n\n\n\n### Start the Live Activity\n\nYou start a Live Activity in your app’s code while the app is in the foreground with the [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/Activity\/request(attributes:content:pushType:)] function. Pass the [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/ActivityAttributes] and [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/ActivityContent] objects you created to it and, if you implement ActivityKit push notifications, the `pushType` parameter.\n\nThe following example from the [doc:\/\/com.apple.documentation\/documentation\/WidgetKit\/emoji-rangers-supporting-live-activities-interactivity-and-animations] app creates the initial attributes and content state for the Emoji Rangers Live Activity.\n\n```swift\nif ActivityAuthorizationInfo().areActivitiesEnabled {\n    do {\n        let adventure = AdventureAttributes(hero: hero)\n        let initialState = AdventureAttributes.ContentState(\n            currentHealthLevel: hero.healthLevel,\n            eventDescription: \"Adventure has begun!\"\n        )\n        \n        let activity = try Activity.request(\n            attributes: adventure,\n            content: .init(state: initialState, staleDate: nil),\n            pushType: .token\n        )\n        \n        self.setup(withActivity: activity)\n    } catch {\n        errorMessage = \"\"\"\n\t\t\t\t    Couldn't start activity\n\t\t\t\t    ------------------------\n\t\t\t\t    \\(String(describing: error))\n\t\t\t\t    \"\"\"\n        \n        self.errorMessage = errorMessage\n    }\n}\n```\n\nIn general, your app needs to be in the foreground to start a Live Activity. You can update or end a Live Activity from your app while it runs in the background — for example, by using [doc:\/\/com.apple.documentation\/documentation\/BackgroundTasks]. However, you can start a Live Activity while your app is in the background by using an app intent that conforms to [doc:\/\/com.apple.documentation\/documentation\/AppIntents\/LiveActivityIntent]. For example, you might create a control that people place in Control Center. The control could use a `LiveActivityIntent` and starts the Live Activity in the intent’s `perform()` method. For more information about app intents, refer to [doc:\/\/com.apple.documentation\/documentation\/AppIntents] and [doc:\/\/com.apple.documentation\/documentation\/AppIntents\/Making-actions-and-content-discoverable-and-widely-available].\n\n### Schedule a Live Activity at a specific date\n\nYou can schedule a Live Activity for a specific date using the [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/Activity\/request(attributes:content:pushType:style:alertConfiguration:startDate:)] function. For example, an app that allows people to watch or follow sports matches might want to schedule a Live Activity for an upcoming game. If you allow people to schedule a Live Activity, you must pass an [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/AlertConfiguration] to make sure they know when your app starts a Live Activity.\n\n### Start a transient Live Activity\n\nLive Activities can appear temporarily in the extended presentation in the Dynamic Island to allow interactions and status updates while a person is actively performing a task. Locking the device, collapsing the extended presentation in the Dynamic Island, or tapping outside the Dynamic Island ends the Live Activity. For example, the Music app displays an extended presentation in the Dynamic Island when a person starts playing audio in the app, allowing people to choose to move the audio to a HomePod that’s on the same Wi-Fi network with AirPlay. The Live Activity ends automatically when the person leaves the app.\n\nTo start a transient Live Activity, use [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/Activity\/request(attributes:content:pushType:style:)] and pass [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/ActivityStyle\/transient]  as the `style` parameter.\n\n### Start, update, and end your Live Activity with a push notification\n\nIn addition to updating and ending a Live Activity from your app with ActivityKit, start, update, or end a Live Activity with an ActivityKit push notification that you send from your server to the Apple Push Notification service (APNs).\n\nTo learn more about using ActivityKit push notifications, refer to [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/starting-and-updating-live-activities-with-activitykit-push-notifications].\n\n### Update the Live Activity\n\nWhen you start a Live Activity from your app, update the data that appears in the Live Activity using the [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/Activity\/update(_:)] function of the [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/Activity] object you received when you started the Live Activity. To retrieve your app’s active Live Activities, use [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/Activity\/activities].\n\nFor important updates, use the [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/Activity\/update(_:alertConfiguration:)] function to display an alert on iPhone, iPad, and a paired Apple Watch that tells a person about new Live Activity content. For example, the [doc:\/\/com.apple.documentation\/documentation\/WidgetKit\/emoji-rangers-supporting-live-activities-interactivity-and-animations] app updates its Live Activity using an alert configuration to display an alert that lets people know that the hero has been knocked down:\n\n```swift\nguard let activity = currentActivity else {\n    return\n}\n\nvar alertConfig: AlertConfiguration? = nil\nlet contentState: AdventureAttributes.ContentState\nif alert {\n    let heroName = activity.attributes.hero.name\n    \n    alertConfig = AlertConfiguration(\n        title: \"\\(heroName) has been knocked down!\",\n        body: \"Open the app and use a potion to heal \\(heroName).\",\n        sound: .default\n    )\n    \n    contentState = AdventureAttributes.ContentState(\n        currentHealthLevel: 0,\n        eventDescription: \"\\(heroName) has been knocked down!\"\n    )\n} else {\n    contentState = AdventureAttributes.ContentState(\n        currentHealthLevel: Double.random(in: 0...1),\n        eventDescription: self.getEventDescription(hero: activity.attributes.hero)\n    )\n}\n\nawait activity.update(\n    ActivityContent<AdventureAttributes.ContentState>(\n        state: contentState,\n        staleDate: Date.now + 15,\n        relevanceScore: alert ? 100 : 50\n    ),\n    alertConfiguration: alertConfig\n)\n```\n\n\n\nOn Apple Watch, the system uses the `title` and `body` attributes for the alert. On iPhone and iPad, the system doesn’t show a regular alert but instead shows the expanded Live Activity in the Dynamic Island or the Lock Screen presentation as a banner on devices without the Dynamic Island.\n\n### Animate content updates\n\nWhen you define the user interface of your Live Activity, the system ignores any animation modifiers — for example, [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/withAnimation(_:_:)] and [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/View\/animation(_:value:)] — and uses the system’s animation timing instead. However, the system performs some animation when the dynamic content of the Live Activity changes. Text views animate content changes with blurred content transitions, and the system animates content transitions for images and SF Symbols. If you add or remove views from the user interface based on content or state changes, views fade in and out. Use the following view transitions to configure these built-in transitions: [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/AnyTransition\/opacity], [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/AnyTransition\/move(edge:)], [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/AnyTransition\/slide], [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/AnyTransition\/push(from:)], or combinations of them. Additionally, request animations for timer text with [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/ContentTransition\/numericText(countsDown:)].\n\nYou can animate data changes in your Live Activity with functions that give you more control over animation timing. For example, you can use [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/Animation\/timingCurve(_:duration:)] to create an animation with a custom timing curve. For more information on SwiftUI animations, refer to [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/Animation].\n\n\n\n### End the Live Activity\n\nAlways end a Live Activity after the associated task or live event ends. A Live Activity that ended remains on the Lock Screen until the person removes it or the system removes it automatically. The automatic removal depends on the dismissal policy you provide to the [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/Activity\/end(_:dismissalPolicy:)] function. Always include an updated [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/Activity\/ContentState-swift.typealias] to ensure the Live Activity shows the latest and final content update after it ends. This is important because the Live Activity can remain visible on the Lock Screen for some time after it ends.\n\nThe following example shows how the [doc:\/\/com.apple.documentation\/documentation\/WidgetKit\/emoji-rangers-supporting-live-activities-interactivity-and-animations] app ends its Live Activity and sets a custom dismissal policy based on a setting in the app:\n\n```swift\nfunc endActivity(dismissTimeInterval: Double?) async {\n    guard let activity = currentActivity else {\n        return\n    }\n    \n    let hero = activity.attributes.hero\n    \n    let finalContent = AdventureAttributes.ContentState(\n        currentHealthLevel: 1.0,\n        eventDescription: \"Adventure over! \\(hero.name) is taking a nap.\"\n    )\n    \n    let dismissalPolicy: ActivityUIDismissalPolicy\n    if let dismissTimeInterval = dismissTimeInterval {\n        if dismissTimeInterval <= 0 {\n            dismissalPolicy = .immediate\n        } else {\n            dismissalPolicy = .after(.now + dismissTimeInterval)\n        }\n    } else {\n        dismissalPolicy = .default\n    }\n    \n    await activity.end(ActivityContent(state: finalContent, staleDate: nil), dismissalPolicy: dismissalPolicy)\n}\n```\n\nWith the [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/ActivityUIDismissalPolicy\/default] dismissal policy, the Live Activity appears on the Lock Screen for some time after it ends to allow a person to glance at their phone to refer to the latest information. A person can choose to remove the Live Activity at any time, or the system removes it automatically four hours after it ended.\n\nTo immediately remove the Live Activity that ended from the Lock Screen, use [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/ActivityUIDismissalPolicy\/immediate]. Alternatively, use [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/ActivityUIDismissalPolicy\/after(_:)] to specify a date within a four-hour window. While you can provide any date, the system removes the ended Live Activity after the given date or after four hours from the moment the Live Activity ended — whichever comes first.\n\nA person can remove your Live Activity from their Lock Screen at any time. This ends the Live Activity, but it doesn’t end or cancel the person’s action that started it. For example, a person may remove the Live Activity for their pizza delivery from the Lock Screen, but this doesn’t cancel the pizza order.\n\n\n\n### Keep track of updates\n\nWhen you start a Live Activity, ActivityKit returns an [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/Activity] object. In addition to the [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/Activity\/id] that uniquely identifies each activity, the [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/Activity] offers sequences to observe content, activity state, and push token updates. Use the corresponding sequence to receive updates in your app, keep your app and Live Activities in sync, and respond to changed data:\n\n- To observe changes to ongoing Live Activities and to asynchronously access a Live Activity when you start it, use [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/Activity\/activityUpdates-swift.type.property].\n- To observe the state of an ongoing Live Activity — for example, to determine whether it’s active or has ended — use [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/Activity\/activityStateUpdates-swift.property].\n- To observe changes to the dynamic content of a Live Activity, use [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/Activity\/contentUpdates-swift.property].\n- To observe changes to the push token of a Live Activity, use [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/Activity\/pushTokenUpdates-swift.property].\n\nThe following example shows how the [doc:\/\/com.apple.documentation\/documentation\/WidgetKit\/emoji-rangers-supporting-live-activities-interactivity-and-animations] app tracks updates its content for ongoing Live Activities and updates its adventure view accordingly:\n\n```swift\n\/\/ Observe updates for ongoing Live Activities.\nTask {\n    for await content in activity.contentUpdates {\n        self.updateAdventureView(content: content)\n    }\n}\n```\n\n### Observe active Live Activities\n\nYour app can start more than one Live Activity. For example, a sports app may allow a person to start a Live Activity for each live sports game they’re interested in. If your app starts multiple Live Activities, keep track of ongoing Live Activities for your app using the [doc:\/\/com.apple.activitykit\/documentation\/ActivityKit\/Activity\/activities] property to make sure your app is aware of all ongoing Live Activities that ActivityKit tracks. Another use case for fetching all activities is to maintain Live Activities that are in progress and make sure you don’t keep any activities running for longer than needed. For example, the system may stop your app, or your app may crash while a Live Activity is active. When the app launches the next time, check if any activities are still active, update your app’s stored Live Activity data, and end any Live Activity that’s no longer relevant.\n\n### Start and stop Live Activities from App Intents\n\nThe [doc:\/\/com.apple.documentation\/documentation\/AppIntents] framework enables you to extend your app’s custom functionality to support system-level services like Siri and the Shortcuts app, as well as the functionality to start a Live Activity. For example, a sports app could expose functionality to start a Live Activity for a person’s favorite sports team with the Shortcuts app or Siri.\n\nStarting a Live Activity from an app intent is almost the same as adopting [doc:\/\/com.apple.documentation\/documentation\/AppIntents] to expose other functionality in your app:\n\n1. Adopt the App Intents framework as described in [doc:\/\/com.apple.documentation\/documentation\/AppIntents\/Making-actions-and-content-discoverable-and-widely-available].\n2. When you implement your app intent that starts the Live Activity, make sure it inherits from [doc:\/\/com.apple.documentation\/documentation\/AppIntents\/LiveActivityIntent].\n3. In your `LiveActivityIntent` implementation, add code to start the Live Activity.\n\n## Starting a Live Activity\n\n- **Starting and updating Live Activities with ActivityKit push notifications**: Use ActivityKit to receive push tokens and to remotely start, update, and end your Live Activity with ActivityKit notifications.\n- **Activity**: The object you use to start, update, and end a Live Activity.\n- **Emoji Rangers: Supporting Live Activities, interactivity, and animations**: Offer Live Activities, controls, animate data updates, and add interactivity to widgets.\n- **NSSupportsLiveActivities**: A Boolean value that indicates whether an app supports Live Activities.\n- **NSSupportsLiveActivitiesFrequentUpdates**: A Boolean value that indicates whether an app can update its Live Activities frequently.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Use ActivityKit to receive push tokens and to remotely start, update, and end your Live Activity with ActivityKit notifications.",
          "name" : "Starting and updating Live Activities with ActivityKit push notifications",
          "url" : "https:\/\/developer.apple.com\/documentation\/ActivityKit\/starting-and-updating-live-activities-with-activitykit-push-notifications"
        },
        {
          "description" : "The object you use to start, update, and end a Live Activity.",
          "name" : "Activity",
          "url" : "https:\/\/developer.apple.com\/documentation\/ActivityKit\/Activity"
        },
        {
          "description" : "Offer Live Activities, controls, animate data updates, and add interactivity to widgets.",
          "name" : "Emoji Rangers: Supporting Live Activities, interactivity, and animations",
          "url" : "https:\/\/developer.apple.com\/documentation\/WidgetKit\/emoji-rangers-supporting-live-activities-interactivity-and-animations"
        },
        {
          "description" : "A Boolean value that indicates whether an app supports Live Activities.",
          "name" : "NSSupportsLiveActivities",
          "url" : "https:\/\/developer.apple.com\/documentation\/BundleResources\/Information-Property-List\/NSSupportsLiveActivities"
        },
        {
          "description" : "A Boolean value that indicates whether an app can update its Live Activities frequently.",
          "name" : "NSSupportsLiveActivitiesFrequentUpdates",
          "url" : "https:\/\/developer.apple.com\/documentation\/BundleResources\/Information-Property-List\/NSSupportsLiveActivitiesFrequentUpdates"
        }
      ],
      "title" : "Starting a Live Activity"
    }
  ],
  "source" : "appleJSON",
  "title" : "Displaying live data with Live Activities",
  "url" : "https:\/\/developer.apple.com\/documentation\/activitykit\/displaying-live-data-with-live-activities"
}