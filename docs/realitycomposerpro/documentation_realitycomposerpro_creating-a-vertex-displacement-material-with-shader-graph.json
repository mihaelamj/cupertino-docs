{
  "abstract" : "Animate the vertices of a mesh over time with 3D Perlin noise by creating a Shader Graph material.",
  "codeExamples" : [

  ],
  "contentHash" : "06087be27fd3dae76252729cd87eb4dbcad0731f35116233fb11d06c56bb1f78",
  "crawledAt" : "2025-12-02T15:56:01Z",
  "id" : "9E0DF2FC-BAFF-4F6B-9831-A73CDC1AC682",
  "kind" : "article",
  "language" : "swift",
  "overview" : "## Overview\n\nMoving the vertices of a mesh with a shader is a valuable technique to have in your shader toolbox. Using this technique, you can procedurally distort the shape of a mesh and animate it over time, all without having to author explicit frame-by-frame animations. Moving the vertices displaces them from their original positions, so this effect is known as *vertex displacement*, as shown in the example below:\n\nTo create a shader graph material that displaces the vertices of a mesh over time, apply a positional offset to each vertex with a [https:\/\/developer.apple.com\/documentation\/shadergraph\/realitykit\/geometry-modifier-(realitykit)] node and a [https:\/\/developer.apple.com\/documentation\/shadergraph\/3d-procedural\/noise-3d] node. You can control the amplitude, scale, and rate of displacement with shader uniforms. See [doc:\/\/RealityComposerPro\/documentation\/RealityComposerPro\/loading-entities-with-shadergraph-materials] to download a sample project containing this shader along with many others.\n\n## Prepare a displacement node graph\n\nHouse the vertex displacement logic in a reusable [https:\/\/developer.apple.com\/documentation\/shadergraph\/material\/nodegraph] by following these steps:\n\nThe following images show the Displacement node graph and its Inspector:\n\n## Set up the geometry modifier\n\nAdd a [https:\/\/developer.apple.com\/documentation\/shadergraph\/realitykit\/geometry-modifier-(realitykit)] node to offset the vertex positions by the output of the Displacement node graph:\n\nThe main shader body is as follows:\n\n\n\nIn this example, the `Space` of the `Position` node is set to `object` so that the displacement effect remains consistent regardless of the model’s position, orientation, or scale in world space, but you can use `world` instead if you want your displacement effect to depend on these factors.\n\n## Displace the vertices\n\nOne way to displace the vertices in a mesh is by utilizing output of a [https:\/\/developer.apple.com\/documentation\/shadergraph\/3d-procedural\/noise-3d] node:\n\nThe following image shows the interior of the Displacement node graph:\n\n\n\nYou can see the result of the shader in the Shader Graph Preview window, as shown below:\n\n\n\nIn the example shown here, the `Noise 3D` node generates vertex offsets with Perlin noise, which distorts the shape of the mesh in a smooth yet random manner. To distort the shape of the surface differently, you can experiment with other noise functions, such as [https:\/\/developer.apple.com\/documentation\/shadergraph\/3d-procedural\/fractal-noise-3d] or [https:\/\/developer.apple.com\/documentation\/shadergraph\/3d-procedural\/worley-noise-3d], or you can displace the vertices with your own custom logic.\n\n## Control the amplitude of displacement\n\nControl the degree to which the shader offsets the vertices by adjusting the `Amplitude` parameter of the `Noise 3D` node:\n\nThe following image shows the interior of the Displacement node graph:\n\n\n\nYou can increase the value of the `Amplitude` node to increase the amount the shader displaces the vertices by, as shown in the three examples below:\n\n## Control the scale of displacement\n\nControl the scale at which the shader offsets the vertices by multiplying the position by a constant factor before sampling the `Noise 3D` node:\n\nThe following image shows the interior of the Displacement node graph:\n\n\n\nYou can increase the value of the `Scale` node to increase the scale at which the shader displaces the vertices, as shown in the three examples below:\n\n## Displace the vertices over time\n\nAnimate the vertices by moving the position over time, following these steps:\n\nThe following image shows the interior of the Displacement node graph:\n\n\n\nThe vertices of the mesh move over time, as shown below:\n\n## Control the rate of displacement\n\nControl the rate at which the shader displaces the vertices over time by multiplying the time by a constant factor:\n\nThe following image shows the interior of the Displacement node graph:\n\n\n\nYou can adjust the `Rate` value to control the speed of the vertex displacement animation, as shown in the three examples below:\n\n## Create uniform inputs\n\nBack in the main graph of your shader, create uniform inputs for each of the input properties of the `Displacement` node — `Amplitude`, `Scale`, and `Rate` — so that you can adjust these properties at the material level:\n\nCreating uniform inputs also allows you to adjust the shader properties in code with the [https:\/\/developer.apple.com\/documentation\/realitykit\/shadergraphmaterial\/setparameter(name:value:)] method, for example.\n\n## Correct the normal directions\n\nWhen displacing the vertices of a mesh, you may notice that the way the mesh reacts to lighting no longer appears correct. This is typically the result of displacing the vertex positions without also modifying the vertex normals to match. For an obvious example, apply the material to the plane mesh in the preview window and observe how flat it looks despite its vertices moving:\n\nSee [doc:\/\/RealityComposerPro\/documentation\/RealityComposerPro\/Correcting-normals-after-vertex-displacement-with-Shader-Graph] for information on how you can approximate and correct the normal directions, as shown in the following video:",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/RealityComposerPro\/Creating-a-vertex-displacement-material-with-Shader-Graph\ncrawled: 2025-12-02T15:56:01Z\n---\n\n# Creating a vertex displacement material with Shader Graph\n\n**Article**\n\nAnimate the vertices of a mesh over time with 3D Perlin noise by creating a Shader Graph material.\n\n## Overview\n\nMoving the vertices of a mesh with a shader is a valuable technique to have in your shader toolbox. Using this technique, you can procedurally distort the shape of a mesh and animate it over time, all without having to author explicit frame-by-frame animations. Moving the vertices displaces them from their original positions, so this effect is known as *vertex displacement*, as shown in the example below:\n\n\n\nTo create a shader graph material that displaces the vertices of a mesh over time, apply a positional offset to each vertex with a [https:\/\/developer.apple.com\/documentation\/shadergraph\/realitykit\/geometry-modifier-(realitykit)] node and a [https:\/\/developer.apple.com\/documentation\/shadergraph\/3d-procedural\/noise-3d] node. You can control the amplitude, scale, and rate of displacement with shader uniforms. See [doc:\/\/RealityComposerPro\/documentation\/RealityComposerPro\/loading-entities-with-shadergraph-materials] to download a sample project containing this shader along with many others.\n\n## Prepare a displacement node graph\n\nHouse the vertex displacement logic in a reusable [https:\/\/developer.apple.com\/documentation\/shadergraph\/material\/nodegraph] by following these steps:\n\n1. Create a custom Shader Graph material (Insert > Material > Shader Graph).\n2. Open the Shader Graph Editor by clicking the Shader Graph button.\n3. Add a `NodeGraph` node by clicking the New Node button or pressing the tab key and searching for “Node Graph”.\n4. Name the `NodeGraph` node “Displacement”.\n5. Add a new input to the Displacement node graph by selecting it and clicking the New Input button in the Inspector.\n6. Name the new input “Position” and give it a type of `Vector3 (Float)`.\n7. Add a new output to the Displacement node graph by selecting it and clicking the New Output button in the Inspector.\n8. Name the new output “ModelPositionOffset” and give it a type of `Vector3 (Float)`.\n\nThe following images show the Displacement node graph and its Inspector:\n\n\n\n## Set up the geometry modifier\n\nAdd a [https:\/\/developer.apple.com\/documentation\/shadergraph\/realitykit\/geometry-modifier-(realitykit)] node to offset the vertex positions by the output of the Displacement node graph:\n\n1. Add a [https:\/\/developer.apple.com\/documentation\/shadergraph\/geometric\/position] node.\n2. Connect the output of the `Position` node to the `Position` input of the Displacement node graph.\n3. Add a `Geometry Modifier` node.\n4. Connect the `Model Position Offset` output of the Displacement node graph to the `Model Position Offset` input of a `Geometry Modifier` node.\n5. Connect the `Out` output of the `Geometry Modifier` node to the `Custom Geometry Modifier` input of the `Outputs` node.\n\nThe main shader body is as follows:\n\n\n\nIn this example, the `Space` of the `Position` node is set to `object` so that the displacement effect remains consistent regardless of the model’s position, orientation, or scale in world space, but you can use `world` instead if you want your displacement effect to depend on these factors.\n\n## Displace the vertices\n\nOne way to displace the vertices in a mesh is by utilizing output of a [https:\/\/developer.apple.com\/documentation\/shadergraph\/3d-procedural\/noise-3d] node:\n\n1. Open the Displacement node graph by double-clicking it or selecting it in the Navigator.\n2. Add a `Noise 3D` node.\n3. Connect the output of the `Position` node to the `Position` input of the `Noise 3D` node.\n4. Connect the `Out` output of the `Noise 3D` node to the `Model Position Offset` parameter of Outputs.\n\nThe following image shows the interior of the Displacement node graph:\n\n\n\nYou can see the result of the shader in the Shader Graph Preview window, as shown below:\n\n\n\nIn the example shown here, the `Noise 3D` node generates vertex offsets with Perlin noise, which distorts the shape of the mesh in a smooth yet random manner. To distort the shape of the surface differently, you can experiment with other noise functions, such as [https:\/\/developer.apple.com\/documentation\/shadergraph\/3d-procedural\/fractal-noise-3d] or [https:\/\/developer.apple.com\/documentation\/shadergraph\/3d-procedural\/worley-noise-3d], or you can displace the vertices with your own custom logic.\n\n## Control the amplitude of displacement\n\nControl the degree to which the shader offsets the vertices by adjusting the `Amplitude` parameter of the `Noise 3D` node:\n\n1. Add a new input to the Displacement node graph of type `Float` and name it “Amplitude”.\n2. Add a [https:\/\/developer.apple.com\/documentation\/shadergraph\/data\/convert] node and set its type to `Convert (float vector3f)`.\n3. Connect the output of the `Amplitude` node to the input of the `Convert` node.\n4. Connect the output of the `Convert` node to the `Amplitude` input of the `Noise 3D` node.\n\nThe following image shows the interior of the Displacement node graph:\n\n\n\nYou can increase the value of the `Amplitude` node to increase the amount the shader displaces the vertices by, as shown in the three examples below:\n\n\n\n## Control the scale of displacement\n\nControl the scale at which the shader offsets the vertices by multiplying the position by a constant factor before sampling the `Noise 3D` node:\n\n1. Add a new input to the Displacement node graph of type `Float` and name it “Scale”.\n2. Multiply the output of the `Position` node by the output of the `Scale` node with a [https:\/\/developer.apple.com\/documentation\/shadergraph\/math\/multiply?changes=lat_3___7__3] node.\n3. Connect the output of the `Multiply` node to the `Position` input of the `Noise 3D` node.\n\nThe following image shows the interior of the Displacement node graph:\n\n\n\nYou can increase the value of the `Scale` node to increase the scale at which the shader displaces the vertices, as shown in the three examples below:\n\n\n\n## Displace the vertices over time\n\nAnimate the vertices by moving the position over time, following these steps:\n\n1. Add a [https:\/\/developer.apple.com\/documentation\/shadergraph\/application\/time-(float)] node.\n2. Add the output of the `Multiply` node, multiplying the `Position` by the `Scale` to the `Time` with an [https:\/\/developer.apple.com\/documentation\/shadergraph\/math\/add] node.\n3. Connect the output of the `Add` node to the `Position` input of the `Noise 3D` node.\n\nThe following image shows the interior of the Displacement node graph:\n\n\n\nThe vertices of the mesh move over time, as shown below:\n\n\n\n## Control the rate of displacement\n\nControl the rate at which the shader displaces the vertices over time by multiplying the time by a constant factor:\n\n1. Add a new input of type `Float` and name it “Rate”.\n2. Multiply the output of the `Time` node by the output of the `Rate` node with a `Multiply` node.\n3. Connect the output of the `Multiply` node to the bottom input of the `Add` node.\n\nThe following image shows the interior of the Displacement node graph:\n\n\n\nYou can adjust the `Rate` value to control the speed of the vertex displacement animation, as shown in the three examples below:\n\n\n\n## Create uniform inputs\n\nBack in the main graph of your shader, create uniform inputs for each of the input properties of the `Displacement` node — `Amplitude`, `Scale`, and `Rate` — so that you can adjust these properties at the material level:\n\n\n\nCreating uniform inputs also allows you to adjust the shader properties in code with the [https:\/\/developer.apple.com\/documentation\/realitykit\/shadergraphmaterial\/setparameter(name:value:)] method, for example.\n\n## Correct the normal directions\n\nWhen displacing the vertices of a mesh, you may notice that the way the mesh reacts to lighting no longer appears correct. This is typically the result of displacing the vertex positions without also modifying the vertex normals to match. For an obvious example, apply the material to the plane mesh in the preview window and observe how flat it looks despite its vertices moving:\n\n\n\nSee [doc:\/\/RealityComposerPro\/documentation\/RealityComposerPro\/Correcting-normals-after-vertex-displacement-with-Shader-Graph] for information on how you can approximate and correct the normal directions, as shown in the following video:\n\n\n\n## Shader Graph\n\n- **Designing materials with Shader Graph**: Create realistic materials with Shader Graph’s node editor in Reality Composer Pro.\n- **Loading entities with ShaderGraph materials**: Bring entities that contain materials created with Reality Composer Pro for use in your visionOS app.\n- **Creating a Fresnel outline effect with Shader Graph**: Highlight a model by adding an outline effect.\n- **Correcting normals after vertex displacement with Shader Graph**: Approximate new vertex normals for materials that displace a mesh’s vertices.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Create realistic materials with Shader Graph’s node editor in Reality Composer Pro.",
          "name" : "Designing materials with Shader Graph",
          "url" : "https:\/\/developer.apple.com\/documentation\/RealityComposerPro\/Editor_ShaderGraph"
        },
        {
          "description" : "Bring entities that contain materials created with Reality Composer Pro for use in your visionOS app.",
          "name" : "Loading entities with ShaderGraph materials",
          "url" : "https:\/\/developer.apple.com\/documentation\/RealityComposerPro\/loading-entities-with-shadergraph-materials"
        },
        {
          "description" : "Highlight a model by adding an outline effect.",
          "name" : "Creating a Fresnel outline effect with Shader Graph",
          "url" : "https:\/\/developer.apple.com\/documentation\/RealityComposerPro\/Creating-a-Fresnel-outline-effect-with-Shader-Graph"
        },
        {
          "description" : "Approximate new vertex normals for materials that displace a mesh’s vertices.",
          "name" : "Correcting normals after vertex displacement with Shader Graph",
          "url" : "https:\/\/developer.apple.com\/documentation\/RealityComposerPro\/Correcting-normals-after-vertex-displacement-with-Shader-Graph"
        }
      ],
      "title" : "Shader Graph"
    }
  ],
  "source" : "appleJSON",
  "title" : "Creating a vertex displacement material with Shader Graph",
  "url" : "https:\/\/developer.apple.com\/documentation\/RealityComposerPro\/Creating-a-vertex-displacement-material-with-Shader-Graph"
}