{
  "abstract" : "Use TelephonyMessagingKit to send and receive SMS, MMS, and RCS messages.",
  "codeExamples" : [
    {
      "code" : "guard TelephonyMessagingSession.shared.isConfiguredForCarrierMessaging else { return }\nlet notifications = try TelephonyMessagingSession.shared.smsService.incomingMessageNotifications\nfor await smsMessageNotification in notifications {\n    let message = smsMessageNotification.message\n    \/\/ Add message to data store.\n    storeSMSMessage(message)\n\n    \/\/ Post local notification.\n    let notificationContent = UNMutableNotificationContent()\n    notificationContent.title = \"My Message App\"\n    notificationContent.subtitle = \"From: \\(message.handle.phoneNumber)\"\n    notificationContent.body = message.content.body\n    let request = UNNotificationRequest(identifier: \"com.example.mymessageapp\",\n                                        content: notificationContent,\n                                        trigger: nil)\n    try await UNUserNotificationCenter.current().add(request)\n}",
      "language" : "swift"
    },
    {
      "code" : "guard TelephonyMessagingSession.shared.isConfiguredForCarrierMessaging else { return }\nlet service = TelephonyMessagingSession.shared.smsService\nlet cellularServices = try TelephonyMessagingSession.shared.cellularServices\nlet cellularServiceID = cellularServices[0].id\nguard service.isViable(for: cellularServiceID) else { return }\n\nlet message = SMSMessage(\n    cellularServiceID: cellularServiceID,\n    handle: SMSHandle(phoneNumber: SAMPLE_PHONE_NUMBER),\n    messageID: SMSMessageID(rawValue: SAMPLE_SMS_MESSAGE_ID),\n    content: SMSContent(body: \"Hello There.\")\n)\n\ntry await service.sendMessage(message)",
      "language" : "swift"
    }
  ],
  "contentHash" : "b72d3a7e63dde05da53735802c275ee3d8273ffec61bdaaca74f18fcc2b2aafe",
  "crawledAt" : "2025-12-03T03:55:43Z",
  "id" : "1C351785-EEA2-4BDA-99BD-16BBEA3BE64D",
  "kind" : "article",
  "language" : "swift",
  "module" : "TelephonyMessagingKit",
  "overview" : "## Overview\n\nWhen the person using a device chooses your app to be the default carrier messaging app, the system sends all SMS, MMS, and RCS messages received by the device to your app. You use this framework to send and receive messages with those services.\n\nThis article describes how to set up your app to be the default app for carrier messaging. To see how to also make your app the default app for internet-based messaging, see [doc:\/\/com.apple.documentation\/documentation\/Messages\/Preparing-your-app-to-be-the-default-messaging-app].\n\n### Configure your app with the required entitlement\n\nTo make your app eligible to become the default carrier messaging app, add the  [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Entitlements\/com.apple.developer.carrier-messaging-app] entitlement, as described on the entitlement’s documentation page.\n\nWhen someone uses the device in an environment that supports the use of TelephonyMessagingKit, they can choose a default carrier messaging app from the Settings app. If they choose your app, the system sends all SMS, MMS, and RCS messages to your app. If they choose a different app, your app doesn’t receive and can’t send carrier messages.\n\nTo test whether your app can send and receive carrier messages, check the [doc:\/\/com.apple.availability\/documentation\/TelephonyMessagingKit\/TelephonyMessagingSession] property [doc:\/\/com.apple.availability\/documentation\/TelephonyMessagingKit\/TelephonyMessagingSession\/isConfiguredForCarrierMessaging] before you make any calls to TelephonyMessagingKit.\n\n### Handle app launch\n\nIf your app isn’t running and the device receives an SMS, MMS, or RCS message, the system launches your app in the background, and gives your app some CPU time to process the received messages. Use this time to collect the messages, add them to your app’s data model or a persistent data store, and then post a local notification.\n\nThe person using the device can launch your app by tapping on a local notification you post, or by launching it normally from the app icon. This means there may or may not be messages to collect immediately after the app launches.\n\n### Discover cellular services\n\nThe person using your app may have multiple cellular services active at one time. To get an array of cellular services, use the [doc:\/\/com.apple.availability\/documentation\/TelephonyMessagingKit\/TelephonyMessagingSession\/shared] instance of [doc:\/\/com.apple.availability\/documentation\/TelephonyMessagingKit\/TelephonyMessagingSession] to get the [doc:\/\/com.apple.availability\/documentation\/TelephonyMessagingKit\/TelephonyMessagingSession\/cellularServices] array. Each member of this array is an instance of [doc:\/\/com.apple.availability\/documentation\/TelephonyMessagingKit\/CellularServiceState], which contains a unique identifier for the cellular service and a label string. These labels correspond to the names the person gives to the services in the Settings app, under Settings > Cellular > SIM > Cellular Plan Label.\n\nYour app needs a cellular service identifier when posting messages to specify which cellular service sends the message. Received messages include a cellular service identifier, so you know which service sent them.\n\nIf you want to handle changes to the cellular services, such as someone removing a SIM or changing the labels associated with their services, monitor the session’s [doc:\/\/com.apple.availability\/documentation\/TelephonyMessagingKit\/TelephonyMessagingSession\/cellularServiceStateUpdates] asynchronous sequence.\n\n### Receive messages\n\nThe shared instance of [doc:\/\/com.apple.availability\/documentation\/TelephonyMessagingKit\/TelephonyMessagingSession] also provides access to the device’s messaging services, as the properties [doc:\/\/com.apple.availability\/documentation\/TelephonyMessagingKit\/TelephonyMessagingSession\/smsService], [doc:\/\/com.apple.availability\/documentation\/TelephonyMessagingKit\/TelephonyMessagingSession\/mmsService], and [doc:\/\/com.apple.availability\/documentation\/TelephonyMessagingKit\/TelephonyMessagingSession\/rcsService]. These properties are instances of the types [doc:\/\/com.apple.availability\/documentation\/TelephonyMessagingKit\/SMSService], [doc:\/\/com.apple.availability\/documentation\/TelephonyMessagingKit\/MMSService], and [doc:\/\/com.apple.availability\/documentation\/TelephonyMessagingKit\/RCSService], respectively. Be aware that some or all of these may be available or unavailable at any time, based on carrier offerings and the device’s service plan, and whether your app is the default carrier messaging app.\n\nEach service provides an asynchronous sequence called `incomingMessageNotifications` that you use to receive messages.  Iterate over this sequence with a `for`-`await`-`in` loop to collect any messages that TelephonyMessagingKit queued while your app wasn’t running, and to receive new messages as they arrive. Each notification includes a `message` property to represent the incoming message, along with other service-specific properties, such as group information when using an [doc:\/\/com.apple.availability\/documentation\/TelephonyMessagingKit\/RCSService].\n\nThe following example shows a loop that processes incoming SMS messages by calling a hypothetical `storeSMSMessage(_:)` method to add them to a local data store, so they are available for a view elsewhere in the app to display. The loop also sends local notifications with the [doc:\/\/com.apple.documentation\/documentation\/UserNotifications] framework in case the app is running in the background, which can happen if messages arrive and the app isn’t running. If the app is running when messages arrive, sending the local notification does nothing.\n\nThe process is similar for receiving MMS and RCS messages.\n\n### Send messages\n\nYour app can also send messages with SMS, MMS, or RCS.  While there are differences in the `sendMessage()` methods exposed by [doc:\/\/com.apple.availability\/documentation\/TelephonyMessagingKit\/SMSService], [doc:\/\/com.apple.availability\/documentation\/TelephonyMessagingKit\/MMSService], and [doc:\/\/com.apple.availability\/documentation\/TelephonyMessagingKit\/RCSService], they all require the following:\n\nIf there are multiple cellular services in the session’s [doc:\/\/com.apple.availability\/documentation\/TelephonyMessagingKit\/TelephonyMessagingSession\/cellularServices] array, your app can show a list to the person using the app and let them choose one to send the message. If the array contains only one cellular service, you can skip this and default to using the first member of the array.\n\nThe following example shows the basic case of sending an SMS text message to a single recipient. This example uses the first cellular service in the session’s [doc:\/\/com.apple.availability\/documentation\/TelephonyMessagingKit\/TelephonyMessagingSession\/cellularServices] array; a more robust app needs to give someone the ability to choose which of their services to use if there are more than one.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/Availability\/creating-a-carrier-messaging-app\ncrawled: 2025-12-03T03:55:43Z\n---\n\n# Creating a carrier messaging app\n\n**Article**\n\nUse TelephonyMessagingKit to send and receive SMS, MMS, and RCS messages.\n\n## Overview\n\nWhen the person using a device chooses your app to be the default carrier messaging app, the system sends all SMS, MMS, and RCS messages received by the device to your app. You use this framework to send and receive messages with those services.\n\nThis article describes how to set up your app to be the default app for carrier messaging. To see how to also make your app the default app for internet-based messaging, see [doc:\/\/com.apple.documentation\/documentation\/Messages\/Preparing-your-app-to-be-the-default-messaging-app].\n\n\n\n### Configure your app with the required entitlement\n\nTo make your app eligible to become the default carrier messaging app, add the  [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Entitlements\/com.apple.developer.carrier-messaging-app] entitlement, as described on the entitlement’s documentation page.\n\nWhen someone uses the device in an environment that supports the use of TelephonyMessagingKit, they can choose a default carrier messaging app from the Settings app. If they choose your app, the system sends all SMS, MMS, and RCS messages to your app. If they choose a different app, your app doesn’t receive and can’t send carrier messages.\n\nTo test whether your app can send and receive carrier messages, check the [doc:\/\/com.apple.availability\/documentation\/TelephonyMessagingKit\/TelephonyMessagingSession] property [doc:\/\/com.apple.availability\/documentation\/TelephonyMessagingKit\/TelephonyMessagingSession\/isConfiguredForCarrierMessaging] before you make any calls to TelephonyMessagingKit.\n\n### Handle app launch\n\nIf your app isn’t running and the device receives an SMS, MMS, or RCS message, the system launches your app in the background, and gives your app some CPU time to process the received messages. Use this time to collect the messages, add them to your app’s data model or a persistent data store, and then post a local notification.\n\nThe person using the device can launch your app by tapping on a local notification you post, or by launching it normally from the app icon. This means there may or may not be messages to collect immediately after the app launches.\n\n\n\n### Discover cellular services\n\nThe person using your app may have multiple cellular services active at one time. To get an array of cellular services, use the [doc:\/\/com.apple.availability\/documentation\/TelephonyMessagingKit\/TelephonyMessagingSession\/shared] instance of [doc:\/\/com.apple.availability\/documentation\/TelephonyMessagingKit\/TelephonyMessagingSession] to get the [doc:\/\/com.apple.availability\/documentation\/TelephonyMessagingKit\/TelephonyMessagingSession\/cellularServices] array. Each member of this array is an instance of [doc:\/\/com.apple.availability\/documentation\/TelephonyMessagingKit\/CellularServiceState], which contains a unique identifier for the cellular service and a label string. These labels correspond to the names the person gives to the services in the Settings app, under Settings > Cellular > SIM > Cellular Plan Label.\n\nYour app needs a cellular service identifier when posting messages to specify which cellular service sends the message. Received messages include a cellular service identifier, so you know which service sent them.\n\nIf you want to handle changes to the cellular services, such as someone removing a SIM or changing the labels associated with their services, monitor the session’s [doc:\/\/com.apple.availability\/documentation\/TelephonyMessagingKit\/TelephonyMessagingSession\/cellularServiceStateUpdates] asynchronous sequence.\n\n### Receive messages\n\nThe shared instance of [doc:\/\/com.apple.availability\/documentation\/TelephonyMessagingKit\/TelephonyMessagingSession] also provides access to the device’s messaging services, as the properties [doc:\/\/com.apple.availability\/documentation\/TelephonyMessagingKit\/TelephonyMessagingSession\/smsService], [doc:\/\/com.apple.availability\/documentation\/TelephonyMessagingKit\/TelephonyMessagingSession\/mmsService], and [doc:\/\/com.apple.availability\/documentation\/TelephonyMessagingKit\/TelephonyMessagingSession\/rcsService]. These properties are instances of the types [doc:\/\/com.apple.availability\/documentation\/TelephonyMessagingKit\/SMSService], [doc:\/\/com.apple.availability\/documentation\/TelephonyMessagingKit\/MMSService], and [doc:\/\/com.apple.availability\/documentation\/TelephonyMessagingKit\/RCSService], respectively. Be aware that some or all of these may be available or unavailable at any time, based on carrier offerings and the device’s service plan, and whether your app is the default carrier messaging app.\n\nEach service provides an asynchronous sequence called `incomingMessageNotifications` that you use to receive messages.  Iterate over this sequence with a `for`-`await`-`in` loop to collect any messages that TelephonyMessagingKit queued while your app wasn’t running, and to receive new messages as they arrive. Each notification includes a `message` property to represent the incoming message, along with other service-specific properties, such as group information when using an [doc:\/\/com.apple.availability\/documentation\/TelephonyMessagingKit\/RCSService].\n\nThe following example shows a loop that processes incoming SMS messages by calling a hypothetical `storeSMSMessage(_:)` method to add them to a local data store, so they are available for a view elsewhere in the app to display. The loop also sends local notifications with the [doc:\/\/com.apple.documentation\/documentation\/UserNotifications] framework in case the app is running in the background, which can happen if messages arrive and the app isn’t running. If the app is running when messages arrive, sending the local notification does nothing.\n\n```swift\nguard TelephonyMessagingSession.shared.isConfiguredForCarrierMessaging else { return }\nlet notifications = try TelephonyMessagingSession.shared.smsService.incomingMessageNotifications\nfor await smsMessageNotification in notifications {\n    let message = smsMessageNotification.message\n    \/\/ Add message to data store.\n    storeSMSMessage(message)\n\n    \/\/ Post local notification.\n    let notificationContent = UNMutableNotificationContent()\n    notificationContent.title = \"My Message App\"\n    notificationContent.subtitle = \"From: \\(message.handle.phoneNumber)\"\n    notificationContent.body = message.content.body\n    let request = UNNotificationRequest(identifier: \"com.example.mymessageapp\",\n                                        content: notificationContent,\n                                        trigger: nil)\n    try await UNUserNotificationCenter.current().add(request)\n}\n```\n\nThe process is similar for receiving MMS and RCS messages.\n\n### Send messages\n\nYour app can also send messages with SMS, MMS, or RCS.  While there are differences in the `sendMessage()` methods exposed by [doc:\/\/com.apple.availability\/documentation\/TelephonyMessagingKit\/SMSService], [doc:\/\/com.apple.availability\/documentation\/TelephonyMessagingKit\/MMSService], and [doc:\/\/com.apple.availability\/documentation\/TelephonyMessagingKit\/RCSService], they all require the following:\n\n- A [doc:\/\/com.apple.availability\/documentation\/TelephonyMessagingKit\/CellularServiceID] that indicates which cellular service the framework should use to send the message.\n- The phone number of a recipient, wrapped in a “handle” type specific to the messaging service, like [doc:\/\/com.apple.availability\/documentation\/TelephonyMessagingKit\/SMSHandle]. For MMS, you can send a message to multiple recipients as an array of handles. For RCS, the [doc:\/\/com.apple.availability\/documentation\/TelephonyMessagingKit\/RCSHandle] type can represent either a single recipient or a group of recipients.\n- A unique identifier for the message.\n- The message content. For SMS, the [doc:\/\/com.apple.availability\/documentation\/TelephonyMessagingKit\/SMSContent] type wraps a single string. For MMS, you create an [doc:\/\/com.apple.availability\/documentation\/TelephonyMessagingKit\/MMSContent] instance, which can contain multiple parts of different types. For RCS, there are different supporting types for different kinds of content, like text, acknowledgements of file transfers, geolocation coordinates, and composing indicators (such as “someone is typing”). In the RCS case, separate overloads of the `sendMessage()` method handle each of these different content types.\n\nIf there are multiple cellular services in the session’s [doc:\/\/com.apple.availability\/documentation\/TelephonyMessagingKit\/TelephonyMessagingSession\/cellularServices] array, your app can show a list to the person using the app and let them choose one to send the message. If the array contains only one cellular service, you can skip this and default to using the first member of the array.\n\nThe following example shows the basic case of sending an SMS text message to a single recipient. This example uses the first cellular service in the session’s [doc:\/\/com.apple.availability\/documentation\/TelephonyMessagingKit\/TelephonyMessagingSession\/cellularServices] array; a more robust app needs to give someone the ability to choose which of their services to use if there are more than one.\n\n```swift\nguard TelephonyMessagingSession.shared.isConfiguredForCarrierMessaging else { return }\nlet service = TelephonyMessagingSession.shared.smsService\nlet cellularServices = try TelephonyMessagingSession.shared.cellularServices\nlet cellularServiceID = cellularServices[0].id\nguard service.isViable(for: cellularServiceID) else { return }\n\nlet message = SMSMessage(\n    cellularServiceID: cellularServiceID,\n    handle: SMSHandle(phoneNumber: SAMPLE_PHONE_NUMBER),\n    messageID: SMSMessageID(rawValue: SAMPLE_SMS_MESSAGE_ID),\n    content: SMSContent(body: \"Hello There.\")\n)\n\ntry await service.sendMessage(message)\n```\n\n## Essentials\n\n- **TelephonyMessagingSession**: An object that coordinates interaction with the TelephonyMessagingKit framework.\n- **Default Carrier Messaging App**: A Boolean value that indicates whether the app can use the TelephonyMessagingKit framework to serve as the default carrier messaging app.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "An object that coordinates interaction with the TelephonyMessagingKit framework.",
          "name" : "TelephonyMessagingSession",
          "url" : "https:\/\/developer.apple.com\/documentation\/TelephonyMessagingKit\/TelephonyMessagingSession"
        },
        {
          "description" : "A Boolean value that indicates whether the app can use the TelephonyMessagingKit framework to serve as the default carrier messaging app.",
          "name" : "Default Carrier Messaging App",
          "url" : "https:\/\/developer.apple.com\/documentation\/BundleResources\/Entitlements\/com.apple.developer.carrier-messaging-app"
        }
      ],
      "title" : "Essentials"
    }
  ],
  "source" : "appleJSON",
  "title" : "Creating a carrier messaging app",
  "url" : "https:\/\/developer.apple.com\/documentation\/Availability\/creating-a-carrier-messaging-app"
}