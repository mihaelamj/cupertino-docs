{
  "abstract" : "Make it easy for people to use Siri with your app by providing shortcuts to your app’s actions.",
  "codeExamples" : [
    {
      "code" : "if menuItem.attributes.contains(.available) == false {\n    \/\/  Here's an example of how to use a custom response for a failure case when a particular soup item is unavailable.\n    completion(OrderSoupIntentResponse.failureOutOfStock(soup: soup))\n    return\n}",
      "language" : "swift"
    },
    {
      "code" : "private func donateInteraction(for order: Order) {\n    let interaction = INInteraction(intent: order.intent, response: nil)\n    \n    \/\/ Store the order identifier with the interaction so that it is easy\n    \/\/ to locate an interaction from an order. When a soup is removed from\n    \/\/ the menu, the app deletes the interaction so the soup isn't suggested\n    \/\/ to the user.\n    interaction.identifier = order.id.uuidString\n    \n    interaction.donate { (error) in\n        if error != nil {\n            if let error = error as NSError? {\n                Logger().debug(\"Interaction donation failed: \\(error)\")\n            }\n        } else {\n            Logger().debug(\"Successfully donated interaction\")\n        }\n    }\n}",
      "language" : "swift"
    },
    {
      "code" : "\/\/\/ The system calls this method when continuing a user activity through the restoration handler\n\/\/\/ in `UISceneDelegate scene(_:continue:)`.\noverride func restoreUserActivityState(_ activity: NSUserActivity) {\n    super.restoreUserActivityState(activity)\n\n    if activity.activityType == NSUserActivity.viewMenuActivityType {\n        \n        \/\/ This order came from the \"View Menu\" shortcut that is based on NSUserActivity.\n        prepareForUserActivityRestoration() {\n            self.performSegue(withIdentifier: SegueIdentifiers.soupMenu.rawValue, sender: nil)\n        }\n        \n    } else if activity.activityType == NSStringFromClass(OrderSoupIntent.self) {\n        \n        \/\/ This order started as a shortcut, but isn't complete because the user tapped on the SoupChef Intent UI\n        \/\/ during the order process. Let the user finish customizing their order.\n        prepareForUserActivityRestoration() {\n            self.performSegue(withIdentifier: SegueIdentifiers.soupMenu.rawValue, sender: activity)\n        }\n        \n    } else if activity.activityType == NSUserActivity.orderCompleteActivityType,\n             let orderID = activity.userInfo?[NSUserActivity.ActivityKeys.orderID.rawValue] as? UUID,\n             let order = soupOrderManager.order(matching: orderID) {\n        \n        \/\/ This order was just created outside of the main app through an intent.\n        \/\/ Display the order in the order history.\n        prepareForUserActivityRestoration() {\n            self.displayOrderDetail(order)\n        }\n    }\n}",
      "language" : "swift"
    },
    {
      "code" : "addShortcutButton = INUIAddVoiceShortcutButton(style: .automaticOutline)\naddShortcutButton.shortcut = INShortcut(intent: orderSoupIntent)\naddShortcutButton.delegate = configuration.delegate",
      "language" : "swift"
    },
    {
      "code" : "func present(_ editVoiceShortcutViewController: INUIEditVoiceShortcutViewController, for addVoiceShortcutButton: INUIAddVoiceShortcutButton) {\n    editVoiceShortcutViewController.delegate = self\n    present(editVoiceShortcutViewController, animated: true, completion: nil)\n}",
      "language" : "swift"
    }
  ],
  "contentHash" : "eead4cca504e5a59a624e72acb07734a1af215b9ff6ce15c115a8b1a320be9ea",
  "crawledAt" : "2025-12-05T19:39:05Z",
  "id" : "12489F5A-E914-4907-9E69-93184BD40BD0",
  "kind" : "unknown",
  "language" : "swift",
  "module" : "Intents",
  "overview" : "## Overview\n\nSoup Chef is the fictitious app from this sample code project. The project shows you how to add shortcuts and personalized phrases to Siri. With shortcuts, users can access features of your app from places such as Spotlight search and the Lock screen. With phrases, users can speak to Siri to access your app’s features. For example, a user of Soup Chef may order a bowl of clam chowder by saying to Siri, “Order clam chowder.”\n\n### Configure the Sample Code Project\n\nBefore you can run Soup Chef, you need to:\n\n### Share Code Between the App and App Extension\n\nThe Soup Chef project contains targets for an app and an Intents app extension, which the system uses to handle shortcuts that run in the background. To avoid duplicating code that is common across the two targets, the project includes a shared framework called SoupKit. This framework provides a central location for shared code responsible for tasks such as data management and donating shortcuts. For more information about structuring code, see [doc:\/\/com.apple.documentation\/documentation\/SiriKit\/structuring-your-code-to-support-app-extensions].\n\n### Identify Common Actions\n\nSoup Chef has a key feature that people are likely to use frequently: ordering soup. To make it easy for users to place an order for soup, it makes sense for the app to add a shortcut for this feature for use with Siri. By adding the shortcut, Siri can make suggestions to the user based on their previous order history. For example, say the user likes to order tomato soup every Monday around noon. After placing this order a few times using Soup Chef, Siri learns the user’s pattern, and can use that information to predicate when the user might place a similar order. On the following Monday, Siri suggests to the user that they might want to order a bowl of tomato soup from Soup Chef.\n\n### Define Custom Intents\n\nTo create a shortcut, the app needs an `OrderSoup` intent. However, the system doesn’t provide this type of intent, so Soup Chef provides a custom intent.\n\nDefine a custom intent by first adding an Intent Definition file to your Xcode project. Then add the custom intent to the definition file. Soup Chef defines its custom intent as `OrderSoup`. The intent has three parameters:\n\nSoup Chef uses the three parameters to define the different shortcut types. A shortcut type has a title, subtitle, and a set of parameter combinations such as:\n\nThese types define the schema that Siri uses to identify requests the user makes; for example, “Order tomato soup with cheese.” The parameter combination for this example is: `soup` and `toppings`.\n\nSoup Chef marks each shortcut type with *Supports background execution*; this way, the system doesn’t need to open the app to handle the intent. When marked this way, the system uses Soup Chef’s Intents app extension to handle the order. This provides a better user experience because the user never leaves their current screen.\n\n### Define Custom Responses\n\nThe `OrderSoup` intent includes a set of custom responses that Siri shows to the user. Siri selects the response based on a code returned by the Intents app extension when it confirms or handles the intent. For example, if the user orders a cup of chili and chili isn’t on the menu that day, the extension returns the `failureOutOfStock` code. Siri then responds to the user with “Sorry, we’re all out of chili.”\n\n### Share Intents Between Targets\n\nTo use a custom intent in an app, Xcode needs to generate source code for the items defined in the Intent Definition file. However, for apps that have a shared framework, like Soup Chef, code generation only needs to happen for the framework target. Generating the code for the shared framework and app causes conflicts due to duplicated code.\n\nTo specify which target has the generated source code, use the Intent Classes setting in the Target Membership panel. For Soup Chef, only the SoupKit target uses the Intent Classes setting; all other targets use the No Generated Classes setting. And because SoupKit shares its code with other targets, the other targets can use `OrderSoupIntent`.\n\n### Donate Shortcuts\n\nBefore Siri can suggest shortcuts to the user, the app must tell Siri about the shortcuts through intent donations. An app makes a donation each time the user performs an action in the app. Soup Chef, for example, donates an `OrderSoupIntent` each time the user places an order through the app. Donating the intent each time the user places the order helps Siri learn about the user’s behavior, which helps Siri better predicate when the user may want to order soup again.\n\n### Handle Shortcuts\n\nAs mentioned earlier, to handle a order soup intent, Soup Chef provides an Intents app extension, which handles the intent in the background. This makes it possible for the user to remain on the current screen – such as the Lock screen – while Soup Chef places the order in the background.\n\nThere are times, however, when the app must launch to handle the intent; for example, when the user taps the shortcut in Search. That’s why Soup Chef also handles the order soup intent in its [doc:\/\/com.apple.documentation\/documentation\/UIKit\/UISceneDelegate\/scene(_:continue:)] implementation found in the scene delegate.\n\n### Add Phrases to Siri\n\nOrdering soup based on suggestions from Siri is a great start to expediting soup orders, but Soup Chef goes one step further by letting the user set a voice phrase for a particular order, and adding that phrase to Siri. Afterward, the user can ask Siri to place the order by saying the phrase. For example, the user can add to Siri the phrase, “Clam chowder time,” for the shortcut that orders clam chowder with croutons. The next time the user craves clam chowder, they say to Siri, “Clam chowder time,” and Siri tells Soup Chef to place an order for clam chowder with croutons.\n\nUsers can set custom phrases in the Shortcuts app. To make the experience better, however, Soup Chef provides the option to add the phrase directly from the app. From the order history, the user can tap a previous order to view its details. At the bottom of the order details is an *Add to Siri* button that, when tapped, lets the user set a new phrase. Soup Chef also provides a suggested phrase to help inspire the user.\n\nIf a phrase already exists for the shortcut, the button displays the current phrase, and allows the user to change the phrase directly from Soup Chef by presenting a view controller to edit or delete the current phrase.\n\nAdding shortcuts and phrases are two examples of how your app can accelerate user interactions with Siri. For more information on how your app can leverage Siri, see the [doc:\/\/com.apple.documentation\/documentation\/SiriKit] developer documentation.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/sirikit\/soup-chef-accelerating-app-interactions-with-shortcuts\ncrawled: 2025-12-05T19:39:05Z\n---\n\n# Soup Chef: Accelerating App Interactions with Shortcuts\n\n**Sample Code**\n\nMake it easy for people to use Siri with your app by providing shortcuts to your app’s actions.\n\n## Overview\n\nSoup Chef is the fictitious app from this sample code project. The project shows you how to add shortcuts and personalized phrases to Siri. With shortcuts, users can access features of your app from places such as Spotlight search and the Lock screen. With phrases, users can speak to Siri to access your app’s features. For example, a user of Soup Chef may order a bowl of clam chowder by saying to Siri, “Order clam chowder.”\n\n### Configure the Sample Code Project\n\nBefore you can run Soup Chef, you need to:\n\n1. Set the app group name for the SoupChef, SoupChefIntents, SoupChefWatch Extension, and SoupChefIntentsWatch targets to a valid name. For more information on app groups, see [https:\/\/help.apple.com\/xcode\/mac\/current\/#\/dev8dd3880fe].\n\n### Share Code Between the App and App Extension\n\nThe Soup Chef project contains targets for an app and an Intents app extension, which the system uses to handle shortcuts that run in the background. To avoid duplicating code that is common across the two targets, the project includes a shared framework called SoupKit. This framework provides a central location for shared code responsible for tasks such as data management and donating shortcuts. For more information about structuring code, see [doc:\/\/com.apple.documentation\/documentation\/SiriKit\/structuring-your-code-to-support-app-extensions].\n\n### Identify Common Actions\n\nSoup Chef has a key feature that people are likely to use frequently: ordering soup. To make it easy for users to place an order for soup, it makes sense for the app to add a shortcut for this feature for use with Siri. By adding the shortcut, Siri can make suggestions to the user based on their previous order history. For example, say the user likes to order tomato soup every Monday around noon. After placing this order a few times using Soup Chef, Siri learns the user’s pattern, and can use that information to predicate when the user might place a similar order. On the following Monday, Siri suggests to the user that they might want to order a bowl of tomato soup from Soup Chef.\n\n### Define Custom Intents\n\nTo create a shortcut, the app needs an `OrderSoup` intent. However, the system doesn’t provide this type of intent, so Soup Chef provides a custom intent.\n\nDefine a custom intent by first adding an Intent Definition file to your Xcode project. Then add the custom intent to the definition file. Soup Chef defines its custom intent as `OrderSoup`. The intent has three parameters:\n\n- `soup`: The type of soup.\n- `quantity`: The number of bowls of soup.\n- `toppings`: Optionals toppings–such as cheese or croutons–to add to the soup.\n\nSoup Chef uses the three parameters to define the different shortcut types. A shortcut type has a title, subtitle, and a set of parameter combinations such as:\n\n- `soup` and `quantity`\n- `soup` and `toppings`\n- `soup`, `toppings`, and `quantity`\n\nThese types define the schema that Siri uses to identify requests the user makes; for example, “Order tomato soup with cheese.” The parameter combination for this example is: `soup` and `toppings`.\n\nSoup Chef marks each shortcut type with *Supports background execution*; this way, the system doesn’t need to open the app to handle the intent. When marked this way, the system uses Soup Chef’s Intents app extension to handle the order. This provides a better user experience because the user never leaves their current screen.\n\n### Define Custom Responses\n\nThe `OrderSoup` intent includes a set of custom responses that Siri shows to the user. Siri selects the response based on a code returned by the Intents app extension when it confirms or handles the intent. For example, if the user orders a cup of chili and chili isn’t on the menu that day, the extension returns the `failureOutOfStock` code. Siri then responds to the user with “Sorry, we’re all out of chili.”\n\n```swift\nif menuItem.attributes.contains(.available) == false {\n    \/\/  Here's an example of how to use a custom response for a failure case when a particular soup item is unavailable.\n    completion(OrderSoupIntentResponse.failureOutOfStock(soup: soup))\n    return\n}\n```\n\n### Share Intents Between Targets\n\nTo use a custom intent in an app, Xcode needs to generate source code for the items defined in the Intent Definition file. However, for apps that have a shared framework, like Soup Chef, code generation only needs to happen for the framework target. Generating the code for the shared framework and app causes conflicts due to duplicated code.\n\nTo specify which target has the generated source code, use the Intent Classes setting in the Target Membership panel. For Soup Chef, only the SoupKit target uses the Intent Classes setting; all other targets use the No Generated Classes setting. And because SoupKit shares its code with other targets, the other targets can use `OrderSoupIntent`.\n\n### Donate Shortcuts\n\nBefore Siri can suggest shortcuts to the user, the app must tell Siri about the shortcuts through intent donations. An app makes a donation each time the user performs an action in the app. Soup Chef, for example, donates an `OrderSoupIntent` each time the user places an order through the app. Donating the intent each time the user places the order helps Siri learn about the user’s behavior, which helps Siri better predicate when the user may want to order soup again.\n\n```swift\nprivate func donateInteraction(for order: Order) {\n    let interaction = INInteraction(intent: order.intent, response: nil)\n    \n    \/\/ Store the order identifier with the interaction so that it is easy\n    \/\/ to locate an interaction from an order. When a soup is removed from\n    \/\/ the menu, the app deletes the interaction so the soup isn't suggested\n    \/\/ to the user.\n    interaction.identifier = order.id.uuidString\n    \n    interaction.donate { (error) in\n        if error != nil {\n            if let error = error as NSError? {\n                Logger().debug(\"Interaction donation failed: \\(error)\")\n            }\n        } else {\n            Logger().debug(\"Successfully donated interaction\")\n        }\n    }\n}\n```\n\n### Handle Shortcuts\n\nAs mentioned earlier, to handle a order soup intent, Soup Chef provides an Intents app extension, which handles the intent in the background. This makes it possible for the user to remain on the current screen – such as the Lock screen – while Soup Chef places the order in the background.\n\nThere are times, however, when the app must launch to handle the intent; for example, when the user taps the shortcut in Search. That’s why Soup Chef also handles the order soup intent in its [doc:\/\/com.apple.documentation\/documentation\/UIKit\/UISceneDelegate\/scene(_:continue:)] implementation found in the scene delegate.\n\n```swift\n\/\/\/ The system calls this method when continuing a user activity through the restoration handler\n\/\/\/ in `UISceneDelegate scene(_:continue:)`.\noverride func restoreUserActivityState(_ activity: NSUserActivity) {\n    super.restoreUserActivityState(activity)\n\n    if activity.activityType == NSUserActivity.viewMenuActivityType {\n        \n        \/\/ This order came from the \"View Menu\" shortcut that is based on NSUserActivity.\n        prepareForUserActivityRestoration() {\n            self.performSegue(withIdentifier: SegueIdentifiers.soupMenu.rawValue, sender: nil)\n        }\n        \n    } else if activity.activityType == NSStringFromClass(OrderSoupIntent.self) {\n        \n        \/\/ This order started as a shortcut, but isn't complete because the user tapped on the SoupChef Intent UI\n        \/\/ during the order process. Let the user finish customizing their order.\n        prepareForUserActivityRestoration() {\n            self.performSegue(withIdentifier: SegueIdentifiers.soupMenu.rawValue, sender: activity)\n        }\n        \n    } else if activity.activityType == NSUserActivity.orderCompleteActivityType,\n             let orderID = activity.userInfo?[NSUserActivity.ActivityKeys.orderID.rawValue] as? UUID,\n             let order = soupOrderManager.order(matching: orderID) {\n        \n        \/\/ This order was just created outside of the main app through an intent.\n        \/\/ Display the order in the order history.\n        prepareForUserActivityRestoration() {\n            self.displayOrderDetail(order)\n        }\n    }\n}\n```\n\n### Add Phrases to Siri\n\nOrdering soup based on suggestions from Siri is a great start to expediting soup orders, but Soup Chef goes one step further by letting the user set a voice phrase for a particular order, and adding that phrase to Siri. Afterward, the user can ask Siri to place the order by saying the phrase. For example, the user can add to Siri the phrase, “Clam chowder time,” for the shortcut that orders clam chowder with croutons. The next time the user craves clam chowder, they say to Siri, “Clam chowder time,” and Siri tells Soup Chef to place an order for clam chowder with croutons.\n\nUsers can set custom phrases in the Shortcuts app. To make the experience better, however, Soup Chef provides the option to add the phrase directly from the app. From the order history, the user can tap a previous order to view its details. At the bottom of the order details is an *Add to Siri* button that, when tapped, lets the user set a new phrase. Soup Chef also provides a suggested phrase to help inspire the user.\n\n```swift\naddShortcutButton = INUIAddVoiceShortcutButton(style: .automaticOutline)\naddShortcutButton.shortcut = INShortcut(intent: orderSoupIntent)\naddShortcutButton.delegate = configuration.delegate\n```\n\nIf a phrase already exists for the shortcut, the button displays the current phrase, and allows the user to change the phrase directly from Soup Chef by presenting a view controller to edit or delete the current phrase.\n\n```swift\nfunc present(_ editVoiceShortcutViewController: INUIEditVoiceShortcutViewController, for addVoiceShortcutButton: INUIAddVoiceShortcutButton) {\n    editVoiceShortcutViewController.delegate = self\n    present(editVoiceShortcutViewController, animated: true, completion: nil)\n}\n```\n\nAdding shortcuts and phrases are two examples of how your app can accelerate user interactions with Siri. For more information on how your app can leverage Siri, see the [doc:\/\/com.apple.documentation\/documentation\/SiriKit] developer documentation.\n\n## Sample code\n\n- **Adding Shortcuts for Wind Down**: Reveal your app’s shortcuts inside the Health app.\n- **Booking Rides with SiriKit**: Add Intents extensions to your app to handle requests to book rides using Siri and Maps.\n- **Handling Payment Requests with SiriKit**: Add an Intent Extension to your app to handle money transfer requests with Siri.\n- **Handling Workout Requests with SiriKit**: Add an Intent Extension to your app that handles requests to control workouts with Siri.\n- **Integrating Your App with Siri Event Suggestions**: Donate reservations and provide quick access to event details throughout the system.\n- **Managing Audio with SiriKit**: Control audio playback and handle requests to add media using SiriKit Media Intents.\n- **Providing Hands-Free App Control with Intents**: Resolve, confirm, and handle intents without an extension.\n- **Soup Chef with App Intents: Migrating custom intents**: Integrating App Intents to provide your appʼs actions to Siri and Shortcuts.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Reveal your app’s shortcuts inside the Health app.",
          "name" : "Adding Shortcuts for Wind Down",
          "url" : "https:\/\/developer.apple.com\/documentation\/SiriKit\/adding-shortcuts-for-wind-down"
        },
        {
          "description" : "Add Intents extensions to your app to handle requests to book rides using Siri and Maps.",
          "name" : "Booking Rides with SiriKit",
          "url" : "https:\/\/developer.apple.com\/documentation\/SiriKit\/booking-rides-with-sirikit"
        },
        {
          "description" : "Add an Intent Extension to your app to handle money transfer requests with Siri.",
          "name" : "Handling Payment Requests with SiriKit",
          "url" : "https:\/\/developer.apple.com\/documentation\/SiriKit\/handling-payment-requests-with-sirikit"
        },
        {
          "description" : "Add an Intent Extension to your app that handles requests to control workouts with Siri.",
          "name" : "Handling Workout Requests with SiriKit",
          "url" : "https:\/\/developer.apple.com\/documentation\/SiriKit\/handling-workout-requests-with-sirikit"
        },
        {
          "description" : "Donate reservations and provide quick access to event details throughout the system.",
          "name" : "Integrating Your App with Siri Event Suggestions",
          "url" : "https:\/\/developer.apple.com\/documentation\/SiriKit\/integrating-your-app-with-siri-event-suggestions"
        },
        {
          "description" : "Control audio playback and handle requests to add media using SiriKit Media Intents.",
          "name" : "Managing Audio with SiriKit",
          "url" : "https:\/\/developer.apple.com\/documentation\/SiriKit\/managing-audio-with-sirikit"
        },
        {
          "description" : "Resolve, confirm, and handle intents without an extension.",
          "name" : "Providing Hands-Free App Control with Intents",
          "url" : "https:\/\/developer.apple.com\/documentation\/SiriKit\/providing-hands-free-app-control-with-intents"
        },
        {
          "description" : "Integrating App Intents to provide your appʼs actions to Siri and Shortcuts.",
          "name" : "Soup Chef with App Intents: Migrating custom intents",
          "url" : "https:\/\/developer.apple.com\/documentation\/SiriKit\/soup-chef-with-app-intents-migrating-custom-intents"
        }
      ],
      "title" : "Sample code"
    }
  ],
  "source" : "appleJSON",
  "title" : "Soup Chef: Accelerating App Interactions with Shortcuts",
  "url" : "https:\/\/developer.apple.com\/documentation\/sirikit\/soup-chef-accelerating-app-interactions-with-shortcuts"
}