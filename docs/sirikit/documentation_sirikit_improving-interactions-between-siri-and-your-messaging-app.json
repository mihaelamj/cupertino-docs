{
  "abstract" : "Donate app-specific content, use Siri’s contact suggestions, and adopt the latest platform features to create a more consistent messaging experience.",
  "codeExamples" : [
    {
      "code" : "let contacts = NSOrderedSet(array: [\n    INSpeakableString(vocabularyIdentifier: \"73f16d14-0207-4668-a1c1-1bd90aaea93f\",\n                      spokenPhrase: \"Maria Ruiz\",\n                      pronunciationHint: nil),\n    INSpeakableString(vocabularyIdentifier: \"c28da32e-31a0-4ee9-b93c-9619ad254e10\",\n                      spokenPhrase: \"Juan Chavez\",\n                      pronunciationHint: nil)\n])\n\n\/\/ Use INVocabularyStringType.contactGroupName for group chats.\nINVocabulary.shared().setVocabulary(contacts, of: .contactName)",
      "language" : "swift"
    },
    {
      "code" : "class UnsendMessagesIntentHandler: NSObject, INUnsendMessagesIntentHandling {\n    func handle(intent: INUnsendMessagesIntent) async -> INUnsendMessagesIntentResponse {\n        guard let identifiers = intent.messageIdentifiers, identifiers.count > 0 else {\n            return INUnsendMessagesIntentResponse(code: .failure, userActivity: nil)\n        }\n\n        messageIdentifiers.forEach { MessageDatabase.unsendMessage($0) }\n        return INUnsendMessagesIntentResponse(code: .success, userActivity: nil)\n    }\n}",
      "language" : "swift"
    }
  ],
  "contentHash" : "a2716d22f4e2009f32c74cbd9bad73f30a78d68742c17e5c1de26cc97f876b9e",
  "crawledAt" : "2025-12-01T10:00:28Z",
  "id" : "B7F20A56-1351-4F6F-A2FC-51E8D59EA717",
  "kind" : "article",
  "module" : "Intents",
  "overview" : "## Overview\n\nSiriKit provides a number of supplementary APIs that are specific to messaging apps. Adopt these APIs and provide the required information so your messaging app can:\n\nFor information about how Apple protects people’s privacy when your messaging or VoIP app shares information with the system, see the Siri section of [https:\/\/www.apple.com\/privacy\/features].\n\n### Donate contact vocabulary and app interactions to Siri\n\nSiri integrates with the Contacts app and uses the app’s contact database to suggest message recipients. If your app manages its own database of contacts, independent of the Contacts app, donate the names of those contacts using [doc:\/\/com.apple.sirikit\/documentation\/Intents\/INVocabulary] to enable Siri to locate them when handling requests. If your messaging app supports group chats, use the same APIs to donate the in-app names of those group chats.\n\nTo donate the required vocabulary, create instances of [doc:\/\/com.apple.sirikit\/documentation\/Intents\/INSpeakableString]. Set `spokenPhrase` to the name of the contact or group chat, and `vocabularyIdenfitier` to the value of the contact’s [doc:\/\/com.apple.sirikit\/documentation\/Intents\/INPerson\/customIdentifier] property — the value your app uses to uniquely identify that object.\n\nWhen someone performs an action in your messaging app and the app includes support for the corresponding intent, such as sending or replying to a message, create and donate an instance of [doc:\/\/com.apple.sirikit\/documentation\/Intents\/INInteraction] to make Siri aware of the action. If your app uses the system’s Contacts database, reduce ambiguity by setting the [doc:\/\/com.apple.sirikit\/documentation\/Intents\/INPerson\/contactIdentifier] property for each of the interaction’s contacts to their corresponding database identifier; otherwise, set their [doc:\/\/com.apple.sirikit\/documentation\/Intents\/INPerson\/customIdentifier] property to the unique value your app uses to identify them.\n\n### Choose recipients from the matches Siri suggests\n\nWhen Siri asks your intent handler to resolve a message’s recipients, it provides a collection of [doc:\/\/com.apple.sirikit\/documentation\/Intents\/INPerson] objects — one for each recipient. Using data from the Contacts app (for example, work or family relationships), Siri populates the [doc:\/\/com.apple.sirikit\/documentation\/Intents\/INPerson\/siriMatches] property on each instance of [doc:\/\/com.apple.sirikit\/documentation\/Intents\/INPerson] with zero or more proposed contact matches, enabling your app to provide more accurate recipient options to the person sending the message.\n\nUse the following guidance to determine which [doc:\/\/com.apple.sirikit\/documentation\/Intents\/INPersonResolutionResult] method to invoke based on the matches Siri provides:\n\nIf your messaging app allows people to attach a custom image to each of their contacts, use the [doc:\/\/com.apple.sirikit\/documentation\/Intents\/INPerson\/image] property on [doc:\/\/com.apple.sirikit\/documentation\/Intents\/INPerson] to provide that image when returning an instance of [doc:\/\/com.apple.sirikit\/documentation\/Intents\/INPersonResolutionResult].\n\n### Enable people to unsend or edit sent messages\n\nIn iOS 16 and later, after a person sends a message from the Messages app or Siri, within a short duration after sending, they can unsend or edit that message. To add the same functionality to your messaging app, perform the following:\n\nThe following shows an example implementation of message unsending:\n\nSiriKit provides additional response codes specific to message unsending and editing. For more information, see [doc:\/\/com.apple.sirikit\/documentation\/Intents\/INUnsendMessagesIntentResponseCode] and [doc:\/\/com.apple.sirikit\/documentation\/Intents\/INEditMessageIntentResponseCode].\n\n### Return attachment metadata in Siri search results\n\nWhen someone asks Siri for information about their sent or received messages, Siri creates an instance of [doc:\/\/com.apple.sirikit\/documentation\/Intents\/INSearchForMessagesIntent] and requests your app to fulfill that intent. If the messages in your app’s results include attachments, use the appropriate attachment-related initializers on [doc:\/\/com.apple.sirikit\/documentation\/Intents\/INMessage] to provide additional information for Siri to announce or display. For example, you can include an array of [doc:\/\/com.apple.sirikit\/documentation\/Intents\/INFile] instances that describe each file (including their content type), or if a single message has several attachments, provide the count of attachments instead.\n\nFor more information, see the following:",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/SiriKit\/improving-interactions-between-siri-and-your-messaging-app\ncrawled: 2025-12-01T10:00:28Z\n---\n\n# Improving interactions between Siri and your messaging app\n\n**Article**\n\nDonate app-specific content, use Siri’s contact suggestions, and adopt the latest platform features to create a more consistent messaging experience.\n\n## Overview\n\nSiriKit provides a number of supplementary APIs that are specific to messaging apps. Adopt these APIs and provide the required information so your messaging app can:\n\n- influence the choices Siri makes when routing a message-related request\n- provide more accurate recipient options when sending messages with Siri\n- enable someone to unsend or edit a message sent with Siri\n- provide richer information about message attachments for Siri to announce or display\n\n\n\nFor information about how Apple protects people’s privacy when your messaging or VoIP app shares information with the system, see the Siri section of [https:\/\/www.apple.com\/privacy\/features].\n\n### Donate contact vocabulary and app interactions to Siri\n\nSiri integrates with the Contacts app and uses the app’s contact database to suggest message recipients. If your app manages its own database of contacts, independent of the Contacts app, donate the names of those contacts using [doc:\/\/com.apple.sirikit\/documentation\/Intents\/INVocabulary] to enable Siri to locate them when handling requests. If your messaging app supports group chats, use the same APIs to donate the in-app names of those group chats.\n\nTo donate the required vocabulary, create instances of [doc:\/\/com.apple.sirikit\/documentation\/Intents\/INSpeakableString]. Set `spokenPhrase` to the name of the contact or group chat, and `vocabularyIdenfitier` to the value of the contact’s [doc:\/\/com.apple.sirikit\/documentation\/Intents\/INPerson\/customIdentifier] property — the value your app uses to uniquely identify that object.\n\n```swift\nlet contacts = NSOrderedSet(array: [\n    INSpeakableString(vocabularyIdentifier: \"73f16d14-0207-4668-a1c1-1bd90aaea93f\",\n                      spokenPhrase: \"Maria Ruiz\",\n                      pronunciationHint: nil),\n    INSpeakableString(vocabularyIdentifier: \"c28da32e-31a0-4ee9-b93c-9619ad254e10\",\n                      spokenPhrase: \"Juan Chavez\",\n                      pronunciationHint: nil)\n])\n\n\/\/ Use INVocabularyStringType.contactGroupName for group chats.\nINVocabulary.shared().setVocabulary(contacts, of: .contactName)\n```\n\n\n\nWhen someone performs an action in your messaging app and the app includes support for the corresponding intent, such as sending or replying to a message, create and donate an instance of [doc:\/\/com.apple.sirikit\/documentation\/Intents\/INInteraction] to make Siri aware of the action. If your app uses the system’s Contacts database, reduce ambiguity by setting the [doc:\/\/com.apple.sirikit\/documentation\/Intents\/INPerson\/contactIdentifier] property for each of the interaction’s contacts to their corresponding database identifier; otherwise, set their [doc:\/\/com.apple.sirikit\/documentation\/Intents\/INPerson\/customIdentifier] property to the unique value your app uses to identify them.\n\n### Choose recipients from the matches Siri suggests\n\nWhen Siri asks your intent handler to resolve a message’s recipients, it provides a collection of [doc:\/\/com.apple.sirikit\/documentation\/Intents\/INPerson] objects — one for each recipient. Using data from the Contacts app (for example, work or family relationships), Siri populates the [doc:\/\/com.apple.sirikit\/documentation\/Intents\/INPerson\/siriMatches] property on each instance of [doc:\/\/com.apple.sirikit\/documentation\/Intents\/INPerson] with zero or more proposed contact matches, enabling your app to provide more accurate recipient options to the person sending the message.\n\nUse the following guidance to determine which [doc:\/\/com.apple.sirikit\/documentation\/Intents\/INPersonResolutionResult] method to invoke based on the matches Siri provides:\n\n- If the [doc:\/\/com.apple.sirikit\/documentation\/Intents\/INPerson\/siriMatches] array contains a single match and your app successfully identifies that person by their [doc:\/\/com.apple.sirikit\/documentation\/Intents\/INPerson\/contactIdentifier] or [doc:\/\/com.apple.sirikit\/documentation\/Intents\/INPerson\/customIdentifier], use the [doc:\/\/com.apple.sirikit\/documentation\/Intents\/INPersonResolutionResult\/success(with:)] method to resolve the recipient.\n- If the array contains multiple people and those people each have distinct [doc:\/\/com.apple.sirikit\/documentation\/Intents\/INPerson\/contactIdentifier] or [doc:\/\/com.apple.sirikit\/documentation\/Intents\/INPerson\/customIdentifier] values, disregard those your app can’t identify and then respond according to the number of remaining matches. For example, if there are still two or more matches, use the [doc:\/\/com.apple.sirikit\/documentation\/Intents\/INPersonResolutionResult\/disambiguation(with:)] method to ask the person interacting with Siri to choose.\n- If the array contains multiple people and they all have the same [doc:\/\/com.apple.sirikit\/documentation\/Intents\/INPerson\/contactIdentifier], disambiguate using [doc:\/\/com.apple.sirikit\/documentation\/Intents\/INPerson\/personHandle] instead. If your app doesn’t use handles, simply pass any match to the [doc:\/\/com.apple.sirikit\/documentation\/Intents\/INPersonResolutionResult\/success(with:)] method.\n- If the array is empty or the property is `nil`, search your app’s contacts for people matching those in the [doc:\/\/com.apple.sirikit\/documentation\/Intents\/INSendMessageIntent\/recipients] property of [doc:\/\/com.apple.sirikit\/documentation\/Intents\/INSendMessageIntent] instead. Use the [doc:\/\/com.apple.sirikit\/documentation\/Intents\/INPersonResolutionResult] method that best describes the outcome of that search.\n\nIf your messaging app allows people to attach a custom image to each of their contacts, use the [doc:\/\/com.apple.sirikit\/documentation\/Intents\/INPerson\/image] property on [doc:\/\/com.apple.sirikit\/documentation\/Intents\/INPerson] to provide that image when returning an instance of [doc:\/\/com.apple.sirikit\/documentation\/Intents\/INPersonResolutionResult].\n\n### Enable people to unsend or edit sent messages\n\nIn iOS 16 and later, after a person sends a message from the Messages app or Siri, within a short duration after sending, they can unsend or edit that message. To add the same functionality to your messaging app, perform the following:\n\n1. Whenever you create an instance of [doc:\/\/com.apple.sirikit\/documentation\/Intents\/INSendMessageIntentResponse], populate the [doc:\/\/com.apple.sirikit\/documentation\/Intents\/INSendMessageIntentResponse\/sentMessages] property with one or more [doc:\/\/com.apple.sirikit\/documentation\/Intents\/INMessage] objects. Set each object’s [doc:\/\/com.apple.sirikit\/documentation\/Intents\/INMessage\/identifier] property to the value your app uses to uniquely identify the sent message. The system passes those values to your app when the app needs to take action on behalf of the sender.\n2. To support message unsending, create an object that conforms to the [doc:\/\/com.apple.sirikit\/documentation\/Intents\/INUnsendMessagesIntentHandling] protocol and implement the required [doc:\/\/com.apple.sirikit\/documentation\/Intents\/INUnsendMessagesIntentHandling\/handle(intent:completion:)] method. On receipt of an unsend request, Siri invokes this method and provides an instance of [doc:\/\/com.apple.sirikit\/documentation\/Intents\/INUnsendMessagesIntent]. Use the values in the object’s [doc:\/\/com.apple.sirikit\/documentation\/Intents\/INUnsendMessagesIntent\/messageIdentifiers] property to identify those messages in your app and take the action necessary to unsend them.\n3. Similarly, to support message editing, create an object that conforms to the [doc:\/\/com.apple.sirikit\/documentation\/Intents\/INEditMessageIntentHandling] protocol and implement the required [doc:\/\/com.apple.sirikit\/documentation\/Intents\/INEditMessageIntentHandling\/handle(intent:completion:)] method. On receipt of an edit request, Siri invokes this method and provides an instance of [doc:\/\/com.apple.sirikit\/documentation\/Intents\/INEditMessageIntent]. The object contains a single message identifier for you to identify the corresponding message in your app. If you specify multiple [doc:\/\/com.apple.sirikit\/documentation\/Intents\/INMessage] objects when originally sending the message, the system returns the last one with a message type of [doc:\/\/com.apple.sirikit\/documentation\/Intents\/INMessageType\/text].\n\nThe following shows an example implementation of message unsending:\n\n```swift\nclass UnsendMessagesIntentHandler: NSObject, INUnsendMessagesIntentHandling {\n    func handle(intent: INUnsendMessagesIntent) async -> INUnsendMessagesIntentResponse {\n        guard let identifiers = intent.messageIdentifiers, identifiers.count > 0 else {\n            return INUnsendMessagesIntentResponse(code: .failure, userActivity: nil)\n        }\n\n        messageIdentifiers.forEach { MessageDatabase.unsendMessage($0) }\n        return INUnsendMessagesIntentResponse(code: .success, userActivity: nil)\n    }\n}\n```\n\nSiriKit provides additional response codes specific to message unsending and editing. For more information, see [doc:\/\/com.apple.sirikit\/documentation\/Intents\/INUnsendMessagesIntentResponseCode] and [doc:\/\/com.apple.sirikit\/documentation\/Intents\/INEditMessageIntentResponseCode].\n\n### Return attachment metadata in Siri search results\n\nWhen someone asks Siri for information about their sent or received messages, Siri creates an instance of [doc:\/\/com.apple.sirikit\/documentation\/Intents\/INSearchForMessagesIntent] and requests your app to fulfill that intent. If the messages in your app’s results include attachments, use the appropriate attachment-related initializers on [doc:\/\/com.apple.sirikit\/documentation\/Intents\/INMessage] to provide additional information for Siri to announce or display. For example, you can include an array of [doc:\/\/com.apple.sirikit\/documentation\/Intents\/INFile] instances that describe each file (including their content type), or if a single message has several attachments, provide the count of attachments instead.\n\nFor more information, see the following:\n\n\n\n## Articles\n\n- **Adding User Interactivity with Siri Shortcuts and the Shortcuts App**: Add custom intents and parameters to help users interact more quickly and effectively with Siri and the Shortcuts app.\n- **Defining Relevant Shortcuts for the Siri Watch Face**: Inform Siri when your app’s shortcuts may be useful to the user.\n- **Deleting Donated Shortcuts**: Remove your donations from Siri.\n- **Dispatching intents to handlers**: Provide SiriKit with an intent handler capable of handling a specific intent.\n- **Improving Siri Media Interactions and App Selection**: Fine-tune voice controls and improve Siri Suggestions by sharing app capabilities, customized names, and listening habits with the system.\n- **Registering Custom Vocabulary with SiriKit**: Register your app’s custom terminology, and provide sample phrases for how to use your app with Siri.\n- **Confirming the Details of an Intent**: Perform final validation of the intent parameters and verify that your services are ready to fulfill the intent.\n- **Handling an Intent**: Fulfill the intent and provide feedback to SiriKit about what you did.\n- **Resolving the Parameters of an Intent**: Validate the parameters of an intent and make sure that you have the information you need to continue.\n- **Generating a List of Ride Options**: Generate ride options for Maps to display to the user.\n- **Handling the Ride-Booking Intents**: Support the different intent-handling sequences for booking rides with Shortcuts or Maps.\n- **Donating Reservations**: Inform Siri of reservations made from your app.\n- **Specifying Synonyms for Your App Name**: Provide alternative names for your app that are more familiar or easier for users to speak.\n- **Intent Phrases**: The keys that you include in your global vocabulary file to show how users engage your app from Siri.\n- **Localizing Your Vocabulary for Chinese Dialects**: Apply emphasis markers to your pronunciation tips to assist Siri with Chinese dialects.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Add custom intents and parameters to help users interact more quickly and effectively with Siri and the Shortcuts app.",
          "name" : "Adding User Interactivity with Siri Shortcuts and the Shortcuts App",
          "url" : "https:\/\/developer.apple.com\/documentation\/SiriKit\/adding-user-interactivity-with-siri-shortcuts-and-the-shortcuts-app"
        },
        {
          "description" : "Inform Siri when your app’s shortcuts may be useful to the user.",
          "name" : "Defining Relevant Shortcuts for the Siri Watch Face",
          "url" : "https:\/\/developer.apple.com\/documentation\/SiriKit\/defining-relevant-shortcuts-for-the-siri-watch-face"
        },
        {
          "description" : "Remove your donations from Siri.",
          "name" : "Deleting Donated Shortcuts",
          "url" : "https:\/\/developer.apple.com\/documentation\/SiriKit\/deleting-donated-shortcuts"
        },
        {
          "description" : "Provide SiriKit with an intent handler capable of handling a specific intent.",
          "name" : "Dispatching intents to handlers",
          "url" : "https:\/\/developer.apple.com\/documentation\/SiriKit\/dispatching-intents-to-handlers"
        },
        {
          "description" : "Fine-tune voice controls and improve Siri Suggestions by sharing app capabilities, customized names, and listening habits with the system.",
          "name" : "Improving Siri Media Interactions and App Selection",
          "url" : "https:\/\/developer.apple.com\/documentation\/SiriKit\/improving-siri-media-interactions-and-app-selection"
        },
        {
          "description" : "Register your app’s custom terminology, and provide sample phrases for how to use your app with Siri.",
          "name" : "Registering Custom Vocabulary with SiriKit",
          "url" : "https:\/\/developer.apple.com\/documentation\/SiriKit\/registering-custom-vocabulary-with-sirikit"
        },
        {
          "description" : "Perform final validation of the intent parameters and verify that your services are ready to fulfill the intent.",
          "name" : "Confirming the Details of an Intent",
          "url" : "https:\/\/developer.apple.com\/documentation\/SiriKit\/confirming-the-details-of-an-intent"
        },
        {
          "description" : "Fulfill the intent and provide feedback to SiriKit about what you did.",
          "name" : "Handling an Intent",
          "url" : "https:\/\/developer.apple.com\/documentation\/SiriKit\/handling-an-intent"
        },
        {
          "description" : "Validate the parameters of an intent and make sure that you have the information you need to continue.",
          "name" : "Resolving the Parameters of an Intent",
          "url" : "https:\/\/developer.apple.com\/documentation\/SiriKit\/resolving-the-parameters-of-an-intent"
        },
        {
          "description" : "Generate ride options for Maps to display to the user.",
          "name" : "Generating a List of Ride Options",
          "url" : "https:\/\/developer.apple.com\/documentation\/SiriKit\/generating-a-list-of-ride-options"
        },
        {
          "description" : "Support the different intent-handling sequences for booking rides with Shortcuts or Maps.",
          "name" : "Handling the Ride-Booking Intents",
          "url" : "https:\/\/developer.apple.com\/documentation\/SiriKit\/handling-the-ride-booking-intents"
        },
        {
          "description" : "Inform Siri of reservations made from your app.",
          "name" : "Donating Reservations",
          "url" : "https:\/\/developer.apple.com\/documentation\/SiriKit\/donating-reservations"
        },
        {
          "description" : "Provide alternative names for your app that are more familiar or easier for users to speak.",
          "name" : "Specifying Synonyms for Your App Name",
          "url" : "https:\/\/developer.apple.com\/documentation\/SiriKit\/specifying-synonyms-for-your-app-name"
        },
        {
          "description" : "The keys that you include in your global vocabulary file to show how users engage your app from Siri.",
          "name" : "Intent Phrases",
          "url" : "https:\/\/developer.apple.com\/documentation\/SiriKit\/intent-phrases"
        },
        {
          "description" : "Apply emphasis markers to your pronunciation tips to assist Siri with Chinese dialects.",
          "name" : "Localizing Your Vocabulary for Chinese Dialects",
          "url" : "https:\/\/developer.apple.com\/documentation\/SiriKit\/localizing-your-vocabulary-for-chinese-dialects"
        }
      ],
      "title" : "Articles"
    }
  ],
  "source" : "appleJSON",
  "title" : "Improving interactions between Siri and your messaging app",
  "url" : "https:\/\/developer.apple.com\/documentation\/SiriKit\/improving-interactions-between-siri-and-your-messaging-app"
}