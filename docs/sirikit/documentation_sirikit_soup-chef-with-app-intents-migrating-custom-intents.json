{
  "abstract" : "Integrating App Intents to provide your appʼs actions to Siri and Shortcuts.",
  "codeExamples" : [
    {
      "code" : "struct OrderSoup: AppIntent, CustomIntentMigratedAppIntent {",
      "language" : "swift"
    },
    {
      "code" : "func suggestedEntities() async throws -> IntentItemCollection<SoupAppEntity> {\n            let soupMenuManager = SoupMenuManager()\n            \n            \/\/ Only adopt `EntityStringQuery` for searching large catalogs, not for small static collections.\n            \/\/ The Shortcuts app supports filtering of small collections by default.\n            let availableRegularItems = soupMenuManager.findItems(exactlyMatching: [.available, .regularItem])\n            let availableDailySpecialItems = soupMenuManager.findItems(exactlyMatching: [.available, .dailySpecialItem])\n            \n            return ItemCollection {\n                ItemSection<SoupAppEntity>(\n                    items:\n                        availableRegularItems .map {\n                            IntentItem<SoupAppEntity>(\n                                SoupAppEntity($0),\n                                title: SoupAppEntity($0).localizedStringResource,\n                                image: SoupAppEntity($0).displayRepresentation.image)\n                        }\n                )\n                ItemSection<SoupAppEntity>(\n                    title: \"Specials\",\n                    items: availableDailySpecialItems .map {\n                        IntentItem<SoupAppEntity>(\n                            SoupAppEntity($0),\n                            title: SoupAppEntity($0).localizedStringResource,\n                            image: SoupAppEntity($0).displayRepresentation.image)\n                    }\n                )\n            }\n        }",
      "language" : "swift"
    },
    {
      "code" : "  func entities(matching string: String) async throws -> [ToppingAppEntity] {\n            let menuItemTopping = Order.MenuItemTopping.allCases.filter { $0.rawValue == string }\n            let result = menuItemTopping.map { (topping) -> ToppingAppEntity in\n                return ToppingAppEntity(\n                    id: topping.rawValue, displayString: topping.localizedName(useDeferredIntentLocalization: true))\n            }\n            return result\n        }",
      "language" : "swift"
    },
    {
      "code" : "    func perform() async throws -> some ProvidesDialog & ShowsSnippetView {\n        if quantity > menuItem[0].itemsInStock {\n                let errorPrompt = OrderSoupError.notEnoughInStock(quantity ).localizedStringResource\n                            return .result(value: OrderDetailsAppEntity(), dialog: IntentDialog(errorPrompt))\n        }",
      "language" : "swift"
    },
    {
      "code" : "@available(iOS 16.0, macOS 13.0, watchOS 9.0, tvOS 16.0, *)\nstruct SoupChefAppShortcutsProvider: AppShortcutsProvider {\n    static var appShortcuts: [AppShortcut] {\n        AppShortcut(\n            intent: OrderSoup(),\n            phrases: [\n                \"Order \\(.applicationName)\",\n                \"Order \\(\\.$soup) from \\(.applicationName)\"\n            ],\n            shortTitle: \"Order Soup\"\n        )\n    }\n    static var shortcutTileColor: ShortcutTileColor = .orange\n}",
      "language" : "swift"
    },
    {
      "code" : "\"TOMATO_SOUP\" = \"Tomato Soup\";\n\"NE_CLAM_CHOWDER\" = \"New England Clam Chowder\";\n\"CHICKEN_NOODLE_SOUP\" = \"Chicken Noodle Soup\";",
      "language" : "swift"
    }
  ],
  "contentHash" : "1a63f52eb605a55935b86015e0b8d10cae47efcee8c8ecf0b495793bfea6e1a9",
  "crawledAt" : "2025-12-05T18:08:16Z",
  "id" : "20C54693-004C-4FE4-A9D0-C2A094D7E0AF",
  "kind" : "unknown",
  "language" : "swift",
  "module" : "Intents",
  "overview" : "## Overview\n\nThis version of Soup Chef highlights the changes required to migrate from a custom intent to App Intents. It modifies the existing Soup Chef sample to add support for AppIntents, AppEntities, and App Shortcuts as described in [https:\/\/developer.apple.com\/videos\/play\/tech-talks\/10168\/].\n\n### Configure the sample code project\n\nBefore you can run Soup Chef, you need to:\n\n### Share code between the app and app extension\n\nThe Soup Chef project contains targets for an app and an Intents app extension, which the system uses to handle shortcuts that run in the background. To avoid duplicating code that is common across the two targets, the project includes a shared framework called SoupKit. This framework provides a central location for shared code responsible for tasks such as data management and donating shortcuts. For more information about structuring code, see Structuring Your Code to Support App Extensions.\n\n### Convert the intent definition\n\nThe intent definitions, which define the custom intents, are recreated as their respective AppIntent representation using the “Convert to AppIntents” button in the intent definition file. The new intent files, located in the App Intent Group of the project, each have an autogenerated structure and implement the [doc:\/\/com.apple.documentation\/documentation\/AppIntents\/CustomIntentMigratedAppIntent] protocol. Each parameter of the custom intent represents an `AppEntity` structure.\n\n### Implement queries\n\nEach of the four parameters for the `OrderSoupIntent` have their respective AppEntity representation. The `SoupAppEntity` and `ToppingAppEntity` use the existing data manager to resolve the entity values. Additionally, apps can also resolve entities by string or UUID. The full list of entities the person sees when they tap the parameter in the Shortcuts app can also show by returning a collection of entities in the `suggestedEntities()` implementation. `OrderType` has a representation as `AppEnum`, and `OrderDetails` is represented as a `TransientAppEntity` because it doesn’t have unique identifier.\n\n### Replace custom intents with App Intents\n\nThe `Perform` method in AppIntents subsumes the resolve, confirm, and handle functionality that was required with custom Intents. Entities declared in an App Intent can be optional or required. The entity type and query implementation help to resolve their values automatically in App Intents. Handling cases where user input requires confirmation or needs new value are handled explicitly within the `Perform` function. For example, confirming the order before placing it, or requesting a delivery location aren’t provided. The `Perform` method handles the final execution and returns an intent result which can be the dialog that needs to be spoken as well as the snippet that is shown onscreen to the person.\n\nThe following is an example of how to resolve `Topping` using an Entity Query:\n\nThe following is an example of how to validate quantity values and returning results in perform method:\n\n### Provide dynamic options\n\nThe `storeLocations` parameter has a backing by a `DynamicOptionsProvider` that returns all store locations directly in results method.\n\n### App Shortcut provider and localization\n\nTo make the Intent easier to discover, this version of Soup Chef implement AppShortcuts that allow the Intent to automatically appear in the Shortcut app. To aid with localization of AppShortcuts, use `AppShortcuts.strings` to add support for other locales.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/sirikit\/soup-chef-with-app-intents-migrating-custom-intents\ncrawled: 2025-12-05T18:08:16Z\n---\n\n# Soup Chef with App Intents: Migrating custom intents\n\n**Sample Code**\n\nIntegrating App Intents to provide your appʼs actions to Siri and Shortcuts.\n\n## Overview\n\nThis version of Soup Chef highlights the changes required to migrate from a custom intent to App Intents. It modifies the existing Soup Chef sample to add support for AppIntents, AppEntities, and App Shortcuts as described in [https:\/\/developer.apple.com\/videos\/play\/tech-talks\/10168\/].\n\n### Configure the sample code project\n\nBefore you can run Soup Chef, you need to:\n\n1. Set the app group name for the SoupChef, SoupChefIntents, SoupChefWatchExtension, and SoupChefIntentsWatch targets to a valid name. For more information on App Groups, see Configure App Groups.\n2. Change the value of AppGroup in UserDefaults+DataSource.swift to match your app group name.\n\n### Share code between the app and app extension\n\nThe Soup Chef project contains targets for an app and an Intents app extension, which the system uses to handle shortcuts that run in the background. To avoid duplicating code that is common across the two targets, the project includes a shared framework called SoupKit. This framework provides a central location for shared code responsible for tasks such as data management and donating shortcuts. For more information about structuring code, see Structuring Your Code to Support App Extensions.\n\n### Convert the intent definition\n\nThe intent definitions, which define the custom intents, are recreated as their respective AppIntent representation using the “Convert to AppIntents” button in the intent definition file. The new intent files, located in the App Intent Group of the project, each have an autogenerated structure and implement the [doc:\/\/com.apple.documentation\/documentation\/AppIntents\/CustomIntentMigratedAppIntent] protocol. Each parameter of the custom intent represents an `AppEntity` structure.\n\n```swift\nstruct OrderSoup: AppIntent, CustomIntentMigratedAppIntent {\n```\n\n### Implement queries\n\nEach of the four parameters for the `OrderSoupIntent` have their respective AppEntity representation. The `SoupAppEntity` and `ToppingAppEntity` use the existing data manager to resolve the entity values. Additionally, apps can also resolve entities by string or UUID. The full list of entities the person sees when they tap the parameter in the Shortcuts app can also show by returning a collection of entities in the `suggestedEntities()` implementation. `OrderType` has a representation as `AppEnum`, and `OrderDetails` is represented as a `TransientAppEntity` because it doesn’t have unique identifier.\n\n```swift\nfunc suggestedEntities() async throws -> IntentItemCollection<SoupAppEntity> {\n            let soupMenuManager = SoupMenuManager()\n            \n            \/\/ Only adopt `EntityStringQuery` for searching large catalogs, not for small static collections.\n            \/\/ The Shortcuts app supports filtering of small collections by default.\n            let availableRegularItems = soupMenuManager.findItems(exactlyMatching: [.available, .regularItem])\n            let availableDailySpecialItems = soupMenuManager.findItems(exactlyMatching: [.available, .dailySpecialItem])\n            \n            return ItemCollection {\n                ItemSection<SoupAppEntity>(\n                    items:\n                        availableRegularItems .map {\n                            IntentItem<SoupAppEntity>(\n                                SoupAppEntity($0),\n                                title: SoupAppEntity($0).localizedStringResource,\n                                image: SoupAppEntity($0).displayRepresentation.image)\n                        }\n                )\n                ItemSection<SoupAppEntity>(\n                    title: \"Specials\",\n                    items: availableDailySpecialItems .map {\n                        IntentItem<SoupAppEntity>(\n                            SoupAppEntity($0),\n                            title: SoupAppEntity($0).localizedStringResource,\n                            image: SoupAppEntity($0).displayRepresentation.image)\n                    }\n                )\n            }\n        }\n```\n\n### Replace custom intents with App Intents\n\nThe `Perform` method in AppIntents subsumes the resolve, confirm, and handle functionality that was required with custom Intents. Entities declared in an App Intent can be optional or required. The entity type and query implementation help to resolve their values automatically in App Intents. Handling cases where user input requires confirmation or needs new value are handled explicitly within the `Perform` function. For example, confirming the order before placing it, or requesting a delivery location aren’t provided. The `Perform` method handles the final execution and returns an intent result which can be the dialog that needs to be spoken as well as the snippet that is shown onscreen to the person.\n\nThe following is an example of how to resolve `Topping` using an Entity Query:\n\n```swift\n  func entities(matching string: String) async throws -> [ToppingAppEntity] {\n            let menuItemTopping = Order.MenuItemTopping.allCases.filter { $0.rawValue == string }\n            let result = menuItemTopping.map { (topping) -> ToppingAppEntity in\n                return ToppingAppEntity(\n                    id: topping.rawValue, displayString: topping.localizedName(useDeferredIntentLocalization: true))\n            }\n            return result\n        }\n```\n\nThe following is an example of how to validate quantity values and returning results in perform method:\n\n```swift\n    func perform() async throws -> some ProvidesDialog & ShowsSnippetView {\n        if quantity > menuItem[0].itemsInStock {\n                let errorPrompt = OrderSoupError.notEnoughInStock(quantity ).localizedStringResource\n                            return .result(value: OrderDetailsAppEntity(), dialog: IntentDialog(errorPrompt))\n        }\n```\n\n### Provide dynamic options\n\nThe `storeLocations` parameter has a backing by a `DynamicOptionsProvider` that returns all store locations directly in results method.\n\n```swift\n@available(iOS 16.0, macOS 13.0, watchOS 9.0, tvOS 16.0, *)\nstruct SoupChefAppShortcutsProvider: AppShortcutsProvider {\n    static var appShortcuts: [AppShortcut] {\n        AppShortcut(\n            intent: OrderSoup(),\n            phrases: [\n                \"Order \\(.applicationName)\",\n                \"Order \\(\\.$soup) from \\(.applicationName)\"\n            ],\n            shortTitle: \"Order Soup\"\n        )\n    }\n    static var shortcutTileColor: ShortcutTileColor = .orange\n}\n```\n\n### App Shortcut provider and localization\n\nTo make the Intent easier to discover, this version of Soup Chef implement AppShortcuts that allow the Intent to automatically appear in the Shortcut app. To aid with localization of AppShortcuts, use `AppShortcuts.strings` to add support for other locales.\n\n```swift\n\"TOMATO_SOUP\" = \"Tomato Soup\";\n\"NE_CLAM_CHOWDER\" = \"New England Clam Chowder\";\n\"CHICKEN_NOODLE_SOUP\" = \"Chicken Noodle Soup\";\n```\n\n## Sample code\n\n- **Adding Shortcuts for Wind Down**: Reveal your app’s shortcuts inside the Health app.\n- **Booking Rides with SiriKit**: Add Intents extensions to your app to handle requests to book rides using Siri and Maps.\n- **Handling Payment Requests with SiriKit**: Add an Intent Extension to your app to handle money transfer requests with Siri.\n- **Handling Workout Requests with SiriKit**: Add an Intent Extension to your app that handles requests to control workouts with Siri.\n- **Integrating Your App with Siri Event Suggestions**: Donate reservations and provide quick access to event details throughout the system.\n- **Managing Audio with SiriKit**: Control audio playback and handle requests to add media using SiriKit Media Intents.\n- **Providing Hands-Free App Control with Intents**: Resolve, confirm, and handle intents without an extension.\n- **Soup Chef: Accelerating App Interactions with Shortcuts**: Make it easy for people to use Siri with your app by providing shortcuts to your app’s actions.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Reveal your app’s shortcuts inside the Health app.",
          "name" : "Adding Shortcuts for Wind Down",
          "url" : "https:\/\/developer.apple.com\/documentation\/SiriKit\/adding-shortcuts-for-wind-down"
        },
        {
          "description" : "Add Intents extensions to your app to handle requests to book rides using Siri and Maps.",
          "name" : "Booking Rides with SiriKit",
          "url" : "https:\/\/developer.apple.com\/documentation\/SiriKit\/booking-rides-with-sirikit"
        },
        {
          "description" : "Add an Intent Extension to your app to handle money transfer requests with Siri.",
          "name" : "Handling Payment Requests with SiriKit",
          "url" : "https:\/\/developer.apple.com\/documentation\/SiriKit\/handling-payment-requests-with-sirikit"
        },
        {
          "description" : "Add an Intent Extension to your app that handles requests to control workouts with Siri.",
          "name" : "Handling Workout Requests with SiriKit",
          "url" : "https:\/\/developer.apple.com\/documentation\/SiriKit\/handling-workout-requests-with-sirikit"
        },
        {
          "description" : "Donate reservations and provide quick access to event details throughout the system.",
          "name" : "Integrating Your App with Siri Event Suggestions",
          "url" : "https:\/\/developer.apple.com\/documentation\/SiriKit\/integrating-your-app-with-siri-event-suggestions"
        },
        {
          "description" : "Control audio playback and handle requests to add media using SiriKit Media Intents.",
          "name" : "Managing Audio with SiriKit",
          "url" : "https:\/\/developer.apple.com\/documentation\/SiriKit\/managing-audio-with-sirikit"
        },
        {
          "description" : "Resolve, confirm, and handle intents without an extension.",
          "name" : "Providing Hands-Free App Control with Intents",
          "url" : "https:\/\/developer.apple.com\/documentation\/SiriKit\/providing-hands-free-app-control-with-intents"
        },
        {
          "description" : "Make it easy for people to use Siri with your app by providing shortcuts to your app’s actions.",
          "name" : "Soup Chef: Accelerating App Interactions with Shortcuts",
          "url" : "https:\/\/developer.apple.com\/documentation\/SiriKit\/soup-chef-accelerating-app-interactions-with-shortcuts"
        }
      ],
      "title" : "Sample code"
    }
  ],
  "source" : "appleJSON",
  "title" : "Soup Chef with App Intents: Migrating custom intents",
  "url" : "https:\/\/developer.apple.com\/documentation\/sirikit\/soup-chef-with-app-intents-migrating-custom-intents"
}