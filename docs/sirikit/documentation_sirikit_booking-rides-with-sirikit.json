{
  "abstract" : "Add Intents extensions to your app to handle requests to book rides using Siri and Maps.",
  "codeExamples" : [
    {
      "code" : "func resolvePickupLocation(for intent: INRequestRideIntent, with completion: @escaping (INPlacemarkResolutionResult) -> Void) {\n    \/\/ Always check if parameter is not nil\n    if let pickup = intent.pickupLocation {\n        completion(.success(with: pickup))\n    } else {\n        completion(.confirmationRequired(with: intent.pickupLocation))\n    }\n}\n\nfunc resolveDropOffLocation(for intent: INRequestRideIntent, with completion: @escaping (INPlacemarkResolutionResult) -> Void) {\n    if let dropOff = intent.dropOffLocation {\n        completion(.success(with: dropOff))\n    } else {\n        completion(.confirmationRequired(with: intent.dropOffLocation))\n    }\n}",
      "language" : "swift"
    },
    {
      "code" : "func confirm(intent: INRequestRideIntent, completion: @escaping (INRequestRideIntentResponse) -> Void) {\n    let rideOption = INRideOption(name: \"Small car\", estimatedPickupDate: Date(timeIntervalSinceNow: 5 * 60))\n    let rideStatus = INRideStatus()\n    rideStatus.rideOption = rideOption\n    rideStatus.estimatedPickupDate = Date(timeIntervalSinceNow: 5 * 60)\n    rideStatus.rideIdentifier = NSUUID().uuidString \/\/ This ride identifier must match the one in handleRequestRide and getRideStatus\n\n    \/\/ set pickup and dropoff locations\n    let response = INRequestRideIntentResponse(code: .success, userActivity: nil)\n    response.rideStatus = rideStatus\n\n    completion(response)\n}",
      "language" : "swift"
    },
    {
      "code" : "func handle(intent: INRequestRideIntent, completion: @escaping (INRequestRideIntentResponse) -> Void) {\n    \/\/ Build response shown to user after tapping \"Request.\"\n    let response = INRequestRideIntentResponse(code: .success, userActivity: .none)\n\n    \/\/ Populate status with all information you want to display on screen.\n    let status = INRideStatus()\n    status.rideIdentifier = NSUUID().uuidString\n    \/\/ Set current ride status\n    status.phase = .confirmed\n    status.pickupLocation = intent.pickupLocation\n    status.dropOffLocation = intent.dropOffLocation\n    status.completionStatus = .completed()\n\n    \/\/ Add driver field\n    status.driver = INRideDriver(personHandle: INPersonHandle(value: \"email@example.com\", \n                                type: .emailAddress),\n                                nameComponents: PersonNameComponents(),\n                                displayName: \"John Doe\",\n                                image: INImage(named: \"handle_blue\"),\n                                contactIdentifier: nil,\n                                customIdentifier: nil,\n                                aliases: nil,\n                                suggestionType: .instantMessageAddress)\n\n    \/\/ Add ETA field\n    status.estimatedPickupDate = Calendar.current.date(byAdding: DateComponents(minute: 5), to: Date())\n    let vehicle = INRideVehicle()\n    vehicle.model = \"1984 Small Car\"\n    status.vehicle = vehicle\n\n    response.rideStatus = status\n    completion(response)\n}",
      "language" : "swift"
    },
    {
      "code" : "func handle(intent: INListRideOptionsIntent, completion: @escaping (INListRideOptionsIntentResponse) -> Void) {\n    for(index, name) in rideNames.enumerated() {\n        let rideOption = INRideOption(name: name, estimatedPickupDate: Date(timeIntervalSinceNow: 120))\n        \/\/ Populate ride options\n        if index == 0 {\n            rideOption.availablePartySizeOptions = poolOptions\n            rideOption.fareLineItems = fareLineItems\n            rideOption.priceRange = INPriceRange(price: NSDecimalNumber(string: \"6.00\"), currencyCode: \"USD\")\n        } \n        ...\n        rideOptions.append(rideOption)\n    }\n\n    let paymentOptions = [\n        INPaymentMethod(type: .credit,\n                        name: \"Card 1\",\n                        identificationHint: \"••••1111\",\n                        icon: INImage(named: \"\")),\n        ...\n    ]\n    \n    let response = INListRideOptionsIntentResponse(code: .success, userActivity: nil)\n    response.expirationDate = Date(timeIntervalSinceNow: 60 * 5)\n    response.paymentMethods = paymentOptions\n    response.rideOptions = rideOptions\n\n    completion(response)\n}"
    }
  ],
  "contentHash" : "a8d0d5f90812a582debb8f213b048bf8baf553081e575d1efe64e1b84f72edfe",
  "crawledAt" : "2025-12-05T18:09:31Z",
  "id" : "0530E160-37BE-46DD-AE95-B4C1EEEF1421",
  "kind" : "unknown",
  "language" : "swift",
  "module" : "Intents",
  "overview" : "## Overview\n\nThe app in this sample project demonstrates how to use app extensions to give users the ability to book rides through Siri and Maps. App extensions implement the necessary intent-handling protocols for the ride-booking domain.\n\nFor information about the general process of adding an Intents extension to your app, including how to enable the Siri capability and configure the NSExtension keys in the `Info.plist` file, see [doc:\/\/com.apple.documentation\/documentation\/SiriKit\/creating-an-intents-app-extension].\n\nThe `GetRideStatusHandler` class, which conforms to the [doc:\/\/com.apple.documentation\/documentation\/Intents\/INGetRideStatusIntentHandling] protocol, contains comments to help you implement the ridesharing domain for your server. It does not include implementation, but has hints about where to perform certain implementation tasks.\n\n### Test the Sample Code Project\n\nYou can run this sample app in the iOS simulator without special setup. However, a few steps are required to test the app’s functionalities.\n\nTo test the app for booking a ride with Siri, launch Siri and say one of the possible commands. Here are a few to get you started:\n\nTo test the app for booking a ride with Maps, open the Maps app, enter a destination, and tap Directions. Then go to the Ride tab and request a ride.\n\nMake sure your simulator location is set to “Apple” for the sample to function correctly. Ride booking will only be functional if the pickup and drop-off locations are within the geographic area specified in `CoverageArea.geojson`.\n\n### Handle Ride Booking with Siri\n\nTo enable Siri to recognize and respond to ride-booking requests, you must implement classes that conform to the [doc:\/\/com.apple.documentation\/documentation\/Intents\/INRequestRideIntentHandling] protocol. Within the protocol, different methods are responsible for different components of the ride-booking process.\n\nThe first step is to resolve the parameters necessary for booking a ride; most commonly, you need to resolve pickup and drop-off locations. If the parameters you choose to resolve are not provided in the initial command, they show up as prompts from Siri. For example, if the user says “Book a ride” without including a destination, and you choose to resolve the drop-off location, Siri prompts the user to add a destination.\n\nThe pickup and drop-off locations are resolved within the `RideRequestHandler` class.\n\nAfter the parameters are resolved, the system calls `confirm(intent:completion:)` to let the user validate their request. You need to create an [doc:\/\/com.apple.documentation\/documentation\/Intents\/INRequestRideIntentResponse] object to be passed into the completion block. This response contains the information Siri uses to construct the ride confirmation card. Build an [doc:\/\/com.apple.documentation\/documentation\/Intents\/INRideStatus] object to provide additional details about the ride, and attach it to the response.\n\nWhen you are finished building your [doc:\/\/com.apple.documentation\/documentation\/Intents\/INRequestRideIntentResponse], pass the response back to the completion handler and call the `completion` block so Siri can access your response.\n\nAfter you confirm the request, handle it using the `handle(intent:completion:)` method. Include any code needed to connect a driver with the passenger, and include any UI or content changes in the app.\n\nIn every handle method, you must construct an [doc:\/\/com.apple.documentation\/documentation\/Intents\/INRequestRideIntentResponse]. You pass this response object into the completion handler, which tells Siri what information to show in the Siri interface when a ride request is initialized. To provide more details, add an [doc:\/\/com.apple.documentation\/documentation\/Intents\/INRideStatus] object to your response as well.\n\nMake sure you call the `completion` block with your response passed in at the end of the `handle` function.\n\n### Show a List of Ride Options in Maps\n\nBy conforming to the [doc:\/\/com.apple.documentation\/documentation\/Intents\/INListRideOptionsIntentHandling] protocol, you can display different ride options inside the Maps app under the Ride tab. For the Maps context, you don’t need to implement resolve methods. At minimum, you only need to implement the handle method to tell the context what ride options are available, and how to handle ride selection.\n\nTo add ride options to Maps, create an [doc:\/\/com.apple.documentation\/documentation\/Intents\/INRideOption] object and populate it with, at minimum,  `name`, `estimatedPickupDate`, `availablePartySizeOptions`, and `priceRange`. Populate the response object’s `expirationDate`, `paymentMethods`, and `rideOptions` properties and pass the response object into the completion handler.\n\nTo ensure that the ride options show up in Maps, add the [doc:\/\/com.apple.documentation\/documentation\/Intents\/INGetRideStatusIntent], [doc:\/\/com.apple.documentation\/documentation\/Intents\/INListRideOptionsIntent], and [doc:\/\/com.apple.documentation\/documentation\/Intents\/INRequestRideIntent] keys to your extension’s `Info.plist` file under IntentsSupported.\n\n### Customize the Ride Request UI in Siri\n\nYou can create a custom UI for Siri or Maps to display when a user requests a ride.\n\nUse Interface Builder to modify the `MainInterface` storyboard in the RideExtensionUI folder. After building your UI, conform to the [doc:\/\/com.apple.documentation\/documentation\/IntentsUI\/INUIHostedViewControlling] protocol in `IntentViewController.swift`. To do so, implement the `configure(with:context:completion:)` method by calling the completion block and passing in a `CGSize` object that fits your custom view.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/sirikit\/booking-rides-with-sirikit\ncrawled: 2025-12-05T18:09:31Z\n---\n\n# Booking Rides with SiriKit\n\n**Sample Code**\n\nAdd Intents extensions to your app to handle requests to book rides using Siri and Maps.\n\n## Overview\n\nThe app in this sample project demonstrates how to use app extensions to give users the ability to book rides through Siri and Maps. App extensions implement the necessary intent-handling protocols for the ride-booking domain.\n\nFor information about the general process of adding an Intents extension to your app, including how to enable the Siri capability and configure the NSExtension keys in the `Info.plist` file, see [doc:\/\/com.apple.documentation\/documentation\/SiriKit\/creating-an-intents-app-extension].\n\nThe `GetRideStatusHandler` class, which conforms to the [doc:\/\/com.apple.documentation\/documentation\/Intents\/INGetRideStatusIntentHandling] protocol, contains comments to help you implement the ridesharing domain for your server. It does not include implementation, but has hints about where to perform certain implementation tasks.\n\n### Test the Sample Code Project\n\nYou can run this sample app in the iOS simulator without special setup. However, a few steps are required to test the app’s functionalities.\n\nTo test the app for booking a ride with Siri, launch Siri and say one of the possible commands. Here are a few to get you started:\n\n- “Book a ride”\n- “Book a ride to San Francisco”\n- “Book a ride from Cupertino to San Francisco”\n\nTo test the app for booking a ride with Maps, open the Maps app, enter a destination, and tap Directions. Then go to the Ride tab and request a ride.\n\nMake sure your simulator location is set to “Apple” for the sample to function correctly. Ride booking will only be functional if the pickup and drop-off locations are within the geographic area specified in `CoverageArea.geojson`.\n\n### Handle Ride Booking with Siri\n\nTo enable Siri to recognize and respond to ride-booking requests, you must implement classes that conform to the [doc:\/\/com.apple.documentation\/documentation\/Intents\/INRequestRideIntentHandling] protocol. Within the protocol, different methods are responsible for different components of the ride-booking process.\n\nThe first step is to resolve the parameters necessary for booking a ride; most commonly, you need to resolve pickup and drop-off locations. If the parameters you choose to resolve are not provided in the initial command, they show up as prompts from Siri. For example, if the user says “Book a ride” without including a destination, and you choose to resolve the drop-off location, Siri prompts the user to add a destination.\n\nThe pickup and drop-off locations are resolved within the `RideRequestHandler` class.\n\n```swift\nfunc resolvePickupLocation(for intent: INRequestRideIntent, with completion: @escaping (INPlacemarkResolutionResult) -> Void) {\n    \/\/ Always check if parameter is not nil\n    if let pickup = intent.pickupLocation {\n        completion(.success(with: pickup))\n    } else {\n        completion(.confirmationRequired(with: intent.pickupLocation))\n    }\n}\n\nfunc resolveDropOffLocation(for intent: INRequestRideIntent, with completion: @escaping (INPlacemarkResolutionResult) -> Void) {\n    if let dropOff = intent.dropOffLocation {\n        completion(.success(with: dropOff))\n    } else {\n        completion(.confirmationRequired(with: intent.dropOffLocation))\n    }\n}\n```\n\nAfter the parameters are resolved, the system calls `confirm(intent:completion:)` to let the user validate their request. You need to create an [doc:\/\/com.apple.documentation\/documentation\/Intents\/INRequestRideIntentResponse] object to be passed into the completion block. This response contains the information Siri uses to construct the ride confirmation card. Build an [doc:\/\/com.apple.documentation\/documentation\/Intents\/INRideStatus] object to provide additional details about the ride, and attach it to the response.\n\nWhen you are finished building your [doc:\/\/com.apple.documentation\/documentation\/Intents\/INRequestRideIntentResponse], pass the response back to the completion handler and call the `completion` block so Siri can access your response.\n\n```swift\nfunc confirm(intent: INRequestRideIntent, completion: @escaping (INRequestRideIntentResponse) -> Void) {\n    let rideOption = INRideOption(name: \"Small car\", estimatedPickupDate: Date(timeIntervalSinceNow: 5 * 60))\n    let rideStatus = INRideStatus()\n    rideStatus.rideOption = rideOption\n    rideStatus.estimatedPickupDate = Date(timeIntervalSinceNow: 5 * 60)\n    rideStatus.rideIdentifier = NSUUID().uuidString \/\/ This ride identifier must match the one in handleRequestRide and getRideStatus\n\n    \/\/ set pickup and dropoff locations\n    let response = INRequestRideIntentResponse(code: .success, userActivity: nil)\n    response.rideStatus = rideStatus\n\n    completion(response)\n}\n```\n\nAfter you confirm the request, handle it using the `handle(intent:completion:)` method. Include any code needed to connect a driver with the passenger, and include any UI or content changes in the app.\n\nIn every handle method, you must construct an [doc:\/\/com.apple.documentation\/documentation\/Intents\/INRequestRideIntentResponse]. You pass this response object into the completion handler, which tells Siri what information to show in the Siri interface when a ride request is initialized. To provide more details, add an [doc:\/\/com.apple.documentation\/documentation\/Intents\/INRideStatus] object to your response as well.\n\nMake sure you call the `completion` block with your response passed in at the end of the `handle` function.\n\n```swift\nfunc handle(intent: INRequestRideIntent, completion: @escaping (INRequestRideIntentResponse) -> Void) {\n    \/\/ Build response shown to user after tapping \"Request.\"\n    let response = INRequestRideIntentResponse(code: .success, userActivity: .none)\n\n    \/\/ Populate status with all information you want to display on screen.\n    let status = INRideStatus()\n    status.rideIdentifier = NSUUID().uuidString\n    \/\/ Set current ride status\n    status.phase = .confirmed\n    status.pickupLocation = intent.pickupLocation\n    status.dropOffLocation = intent.dropOffLocation\n    status.completionStatus = .completed()\n\n    \/\/ Add driver field\n    status.driver = INRideDriver(personHandle: INPersonHandle(value: \"email@example.com\", \n                                type: .emailAddress),\n                                nameComponents: PersonNameComponents(),\n                                displayName: \"John Doe\",\n                                image: INImage(named: \"handle_blue\"),\n                                contactIdentifier: nil,\n                                customIdentifier: nil,\n                                aliases: nil,\n                                suggestionType: .instantMessageAddress)\n\n    \/\/ Add ETA field\n    status.estimatedPickupDate = Calendar.current.date(byAdding: DateComponents(minute: 5), to: Date())\n    let vehicle = INRideVehicle()\n    vehicle.model = \"1984 Small Car\"\n    status.vehicle = vehicle\n\n    response.rideStatus = status\n    completion(response)\n}\n```\n\n### Show a List of Ride Options in Maps\n\nBy conforming to the [doc:\/\/com.apple.documentation\/documentation\/Intents\/INListRideOptionsIntentHandling] protocol, you can display different ride options inside the Maps app under the Ride tab. For the Maps context, you don’t need to implement resolve methods. At minimum, you only need to implement the handle method to tell the context what ride options are available, and how to handle ride selection.\n\nTo add ride options to Maps, create an [doc:\/\/com.apple.documentation\/documentation\/Intents\/INRideOption] object and populate it with, at minimum,  `name`, `estimatedPickupDate`, `availablePartySizeOptions`, and `priceRange`. Populate the response object’s `expirationDate`, `paymentMethods`, and `rideOptions` properties and pass the response object into the completion handler.\n\n```\nfunc handle(intent: INListRideOptionsIntent, completion: @escaping (INListRideOptionsIntentResponse) -> Void) {\n    for(index, name) in rideNames.enumerated() {\n        let rideOption = INRideOption(name: name, estimatedPickupDate: Date(timeIntervalSinceNow: 120))\n        \/\/ Populate ride options\n        if index == 0 {\n            rideOption.availablePartySizeOptions = poolOptions\n            rideOption.fareLineItems = fareLineItems\n            rideOption.priceRange = INPriceRange(price: NSDecimalNumber(string: \"6.00\"), currencyCode: \"USD\")\n        } \n        ...\n        rideOptions.append(rideOption)\n    }\n\n    let paymentOptions = [\n        INPaymentMethod(type: .credit,\n                        name: \"Card 1\",\n                        identificationHint: \"••••1111\",\n                        icon: INImage(named: \"\")),\n        ...\n    ]\n    \n    let response = INListRideOptionsIntentResponse(code: .success, userActivity: nil)\n    response.expirationDate = Date(timeIntervalSinceNow: 60 * 5)\n    response.paymentMethods = paymentOptions\n    response.rideOptions = rideOptions\n\n    completion(response)\n}\n```\n\nTo ensure that the ride options show up in Maps, add the [doc:\/\/com.apple.documentation\/documentation\/Intents\/INGetRideStatusIntent], [doc:\/\/com.apple.documentation\/documentation\/Intents\/INListRideOptionsIntent], and [doc:\/\/com.apple.documentation\/documentation\/Intents\/INRequestRideIntent] keys to your extension’s `Info.plist` file under IntentsSupported.\n\n### Customize the Ride Request UI in Siri\n\nYou can create a custom UI for Siri or Maps to display when a user requests a ride.\n\nUse Interface Builder to modify the `MainInterface` storyboard in the RideExtensionUI folder. After building your UI, conform to the [doc:\/\/com.apple.documentation\/documentation\/IntentsUI\/INUIHostedViewControlling] protocol in `IntentViewController.swift`. To do so, implement the `configure(with:context:completion:)` method by calling the completion block and passing in a `CGSize` object that fits your custom view.\n\n## Sample code\n\n- **Adding Shortcuts for Wind Down**: Reveal your app’s shortcuts inside the Health app.\n- **Handling Payment Requests with SiriKit**: Add an Intent Extension to your app to handle money transfer requests with Siri.\n- **Handling Workout Requests with SiriKit**: Add an Intent Extension to your app that handles requests to control workouts with Siri.\n- **Integrating Your App with Siri Event Suggestions**: Donate reservations and provide quick access to event details throughout the system.\n- **Managing Audio with SiriKit**: Control audio playback and handle requests to add media using SiriKit Media Intents.\n- **Providing Hands-Free App Control with Intents**: Resolve, confirm, and handle intents without an extension.\n- **Soup Chef: Accelerating App Interactions with Shortcuts**: Make it easy for people to use Siri with your app by providing shortcuts to your app’s actions.\n- **Soup Chef with App Intents: Migrating custom intents**: Integrating App Intents to provide your appʼs actions to Siri and Shortcuts.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Reveal your app’s shortcuts inside the Health app.",
          "name" : "Adding Shortcuts for Wind Down",
          "url" : "https:\/\/developer.apple.com\/documentation\/SiriKit\/adding-shortcuts-for-wind-down"
        },
        {
          "description" : "Add an Intent Extension to your app to handle money transfer requests with Siri.",
          "name" : "Handling Payment Requests with SiriKit",
          "url" : "https:\/\/developer.apple.com\/documentation\/SiriKit\/handling-payment-requests-with-sirikit"
        },
        {
          "description" : "Add an Intent Extension to your app that handles requests to control workouts with Siri.",
          "name" : "Handling Workout Requests with SiriKit",
          "url" : "https:\/\/developer.apple.com\/documentation\/SiriKit\/handling-workout-requests-with-sirikit"
        },
        {
          "description" : "Donate reservations and provide quick access to event details throughout the system.",
          "name" : "Integrating Your App with Siri Event Suggestions",
          "url" : "https:\/\/developer.apple.com\/documentation\/SiriKit\/integrating-your-app-with-siri-event-suggestions"
        },
        {
          "description" : "Control audio playback and handle requests to add media using SiriKit Media Intents.",
          "name" : "Managing Audio with SiriKit",
          "url" : "https:\/\/developer.apple.com\/documentation\/SiriKit\/managing-audio-with-sirikit"
        },
        {
          "description" : "Resolve, confirm, and handle intents without an extension.",
          "name" : "Providing Hands-Free App Control with Intents",
          "url" : "https:\/\/developer.apple.com\/documentation\/SiriKit\/providing-hands-free-app-control-with-intents"
        },
        {
          "description" : "Make it easy for people to use Siri with your app by providing shortcuts to your app’s actions.",
          "name" : "Soup Chef: Accelerating App Interactions with Shortcuts",
          "url" : "https:\/\/developer.apple.com\/documentation\/SiriKit\/soup-chef-accelerating-app-interactions-with-shortcuts"
        },
        {
          "description" : "Integrating App Intents to provide your appʼs actions to Siri and Shortcuts.",
          "name" : "Soup Chef with App Intents: Migrating custom intents",
          "url" : "https:\/\/developer.apple.com\/documentation\/SiriKit\/soup-chef-with-app-intents-migrating-custom-intents"
        }
      ],
      "title" : "Sample code"
    }
  ],
  "source" : "appleJSON",
  "title" : "Booking Rides with SiriKit",
  "url" : "https:\/\/developer.apple.com\/documentation\/sirikit\/booking-rides-with-sirikit"
}