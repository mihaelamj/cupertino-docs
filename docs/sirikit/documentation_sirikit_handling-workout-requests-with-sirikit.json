{
  "abstract" : "Add an Intent Extension to your app that handles requests to control workouts with Siri.",
  "codeExamples" : [
    {
      "code" : "override func handler(for intent: INIntent) -> Any {\n    for handler in intentHandlers where handler.canHandle(intent) {\n        return handler\n    }\n    preconditionFailure(\"Unexpected intent type\")\n}",
      "language" : "swift"
    },
    {
      "code" : "func resolveWorkoutName(for intent: INStartWorkoutIntent, with completion: @escaping (INSpeakableStringResolutionResult) -> Void) {\n    let result: INSpeakableStringResolutionResult\n    let workoutHistory = WorkoutHistory.load()\n\n    if let name = intent.workoutName {\n        \/\/ Try to determine the obstacle (wall or boulder) from the supplied workout name.\n        if Workout.Obstacle(intentWorkoutName: name) != nil {\n            result = INSpeakableStringResolutionResult.success(with: name)\n        } else {\n            result = INSpeakableStringResolutionResult.needsValue()\n        }\n    } else if let lastWorkout = workoutHistory.last {\n        \/\/ A name hasn't been supplied so suggest the last obstacle.\n        result = INSpeakableStringResolutionResult.confirmationRequired(with: lastWorkout.obstacle.intentWorkoutName)\n    } else {\n        result = INSpeakableStringResolutionResult.needsValue()\n    }\n\n    completion(result)\n}",
      "language" : "swift"
    },
    {
      "code" : "func handle(intent: INStartWorkoutIntent, completion: @escaping (INStartWorkoutIntentResponse) -> Void) {\n    \/\/ `handleInApp` will transfer handling this activity to the main app and deliver the intent to the app delegate in the background.\n    let response = INStartWorkoutIntentResponse(code: .handleInApp, userActivity: nil)\n    completion(response)\n}",
      "language" : "swift"
    },
    {
      "code" : "func application(_ application: UIApplication, handle intent: INIntent, completionHandler: @escaping (INIntentResponse) -> Void) {\n    if let intent = intent as? INStartWorkoutIntent {\n        completionHandler(handle(intent))\n    } else if let intent = intent as? INCancelWorkoutIntent {\n        completionHandler(handle(intent))\n    } else if let intent = intent as? INPauseWorkoutIntent {\n        completionHandler(handle(intent))\n    } else if let intent = intent as? INEndWorkoutIntent {\n        completionHandler(handle(intent))\n    } else if let intent = intent as? INResumeWorkoutIntent {\n        completionHandler(handle(intent))\n    } else {\n        preconditionFailure(\"Trying to handle unknown intent type\")\n    }\n}",
      "language" : "swift"
    }
  ],
  "contentHash" : "91078135d3b956c225216648aa44bacd4172cd78a758984701d62d6bf3becd9c",
  "crawledAt" : "2025-12-05T19:40:18Z",
  "id" : "290C2FD6-EBC8-4D48-ACA5-5271DDD8715D",
  "kind" : "unknown",
  "language" : "swift",
  "module" : "Intents",
  "overview" : "## Overview\n\nThe app in this sample project allows users to start, pause, resume, cancel, and end custom wall-climbing or bouldering workouts with Siri, as well as view historical workout data inside the main app.\n\nThe project consists of three targets:\n\nSee [doc:\/\/com.apple.documentation\/documentation\/SiriKit\/creating-an-intents-app-extension] for more information on the general process of adding an Intent Extension to your app, including how to enable the Siri capability and configure the `NSExtension` keys in `Info.plist`.\n\n### Configure the Sample Code Project\n\nThis sample app can be run in the iOS Simulator without any special setup, but in order to run it on a device you will need to update the build settings and enable an App Group for the project:\n\n### Recognize and Respond to Workout Requests\n\nIn order for the Intent Extension to handle workout requests, the principal class of the extension must implement the [doc:\/\/com.apple.documentation\/documentation\/Intents\/INIntentHandlerProviding\/handler(for:)] method of [doc:\/\/com.apple.documentation\/documentation\/Intents\/INIntentHandlerProviding]. Use this method to dispatch the request to a class configured to handle it.\n\nIn order for a class to handle a request from SiriKit to use the workout controls, the class must implement one of the workout intent handler protocols. In this sample project:\n\n### Resolve Parameters\n\nThe first step in handling a request from Siri with one of these classes is to resolve any parameters from the voice command. For example, when starting a workout the user may specify parameters such as the type of workout, a particular goal, and the location of the workout:\n\nAn app must decide how to handle these situations using the available resolution methods for the intent type. To handle parameter resolution for [doc:\/\/com.apple.documentation\/documentation\/Intents\/INStartWorkoutIntentHandling], implement one or more of the [doc:\/\/com.apple.documentation\/documentation\/Intents\/INStartWorkoutIntentHandling\/resolveWorkoutName(for:with:)], [doc:\/\/com.apple.documentation\/documentation\/Intents\/INStartWorkoutIntentHandling\/resolveGoalValue(for:with:)], [doc:\/\/com.apple.documentation\/documentation\/Intents\/INStartWorkoutIntentHandling\/resolveWorkoutGoalUnitType(for:with:)], [doc:\/\/com.apple.documentation\/documentation\/Intents\/INStartWorkoutIntentHandling\/resolveWorkoutLocationType(for:with:)], or [doc:\/\/com.apple.documentation\/documentation\/Intents\/INStartWorkoutIntentHandling\/resolveIsOpenEnded(for:with:)] methods.\n\nIn each of these calls, return an appropriate resolution result value by calling the `completion` block. For example, when handling the resolution of the workout name, return an [doc:\/\/com.apple.documentation\/documentation\/Intents\/INSpeakableStringResolutionResult] such as [doc:\/\/com.apple.documentation\/documentation\/Intents\/INSpeakableStringResolutionResult\/success(with:)], [doc:\/\/com.apple.documentation\/documentation\/Intents\/INSpeakableStringResolutionResult\/confirmationRequired(with:)], or [doc:\/\/com.apple.documentation\/documentation\/Intents\/INSpeakableStringResolutionResult\/disambiguation(with:)].\n\nTo aid Siri with recognition of parameter names like “wall climb” and “boulder climb,” add an `AppIntentVocabulary.plist` to a project. More information on this file and how it can add vocabulary to Siri can be found in [doc:\/\/com.apple.documentation\/documentation\/SiriKit\/registering-custom-vocabulary-with-sirikit].\n\nOnce all parameters have been resolved, the system calls [doc:\/\/com.apple.documentation\/documentation\/Intents\/INStartWorkoutIntentHandling\/confirm(intent:completion:)]. Validate the resolved parameters and pass back an [doc:\/\/com.apple.documentation\/documentation\/Intents\/INStartWorkoutIntentResponse] with an [doc:\/\/com.apple.documentation\/documentation\/Intents\/INStartWorkoutIntentResponseCode].\n\n### Complete the Request\n\nOnce the request to start the workout has been confirmed, the system calls [doc:\/\/com.apple.documentation\/documentation\/Intents\/INStartWorkoutIntentHandling\/handle(intent:completion:)]. Some requests from Siri will be better handled by the main app rather than the Intent Extension; for example, the main app can better respond to requests in which long-lived system services are needed to support the workout.\n\nTo transfer control to the main app, create a [doc:\/\/com.apple.documentation\/documentation\/Intents\/INStartWorkoutIntentResponse] with the [doc:\/\/com.apple.documentation\/documentation\/Intents\/INStartWorkoutIntentResponseCode\/handleInApp] code and pass it to the completion block.\n\nWhen an Intent Extension handles an intent with the `handleInApp` response code, it delivers the to the intent to the [doc:\/\/com.apple.documentation\/documentation\/UIKit\/UIApplicationDelegate\/application(_:handle:completionHandler:)] method in the main app’s process in the background.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/sirikit\/handling-workout-requests-with-sirikit\ncrawled: 2025-12-05T19:40:18Z\n---\n\n# Handling Workout Requests with SiriKit\n\n**Sample Code**\n\nAdd an Intent Extension to your app that handles requests to control workouts with Siri.\n\n## Overview\n\nThe app in this sample project allows users to start, pause, resume, cancel, and end custom wall-climbing or bouldering workouts with Siri, as well as view historical workout data inside the main app.\n\nThe project consists of three targets:\n\n- `Ascent`, an iOS app that displays a history of climbing and bouldering workouts.\n- `AscentIntentsExtension`, an Intent Extension that integrates with SiriKit to control workouts.\n- `AscentFramework`, an embedded framework containing shared code needed by both the Intent Extension and the main app.\n\nSee [doc:\/\/com.apple.documentation\/documentation\/SiriKit\/creating-an-intents-app-extension] for more information on the general process of adding an Intent Extension to your app, including how to enable the Siri capability and configure the `NSExtension` keys in `Info.plist`.\n\n### Configure the Sample Code Project\n\nThis sample app can be run in the iOS Simulator without any special setup, but in order to run it on a device you will need to update the build settings and enable an App Group for the project:\n\n1. Open `Ascent.xcodeproj` with the latest version of Xcode.\n2. In the project editor, set a new bundle identifier under Identity on the General pane for each of the three targets in the project.\n3. In the Capabilities pane, make sure that App Groups is switched on for the `Ascent` and `AscentIntentsExtension` targets.\n4. Add an App Group identifier with the format `group.com.example`.\n5. Reference the new App Group identifier in the source code. Open `WorkoutHistory.swift` and modify the implementation of the `sharedUserDefaults` property to reference the new identifier.\n\n\n\n### Recognize and Respond to Workout Requests\n\nIn order for the Intent Extension to handle workout requests, the principal class of the extension must implement the [doc:\/\/com.apple.documentation\/documentation\/Intents\/INIntentHandlerProviding\/handler(for:)] method of [doc:\/\/com.apple.documentation\/documentation\/Intents\/INIntentHandlerProviding]. Use this method to dispatch the request to a class configured to handle it.\n\n```swift\noverride func handler(for intent: INIntent) -> Any {\n    for handler in intentHandlers where handler.canHandle(intent) {\n        return handler\n    }\n    preconditionFailure(\"Unexpected intent type\")\n}\n```\n\nIn order for a class to handle a request from SiriKit to use the workout controls, the class must implement one of the workout intent handler protocols. In this sample project:\n\n- `StartWorkoutIntentHandler` implements [doc:\/\/com.apple.documentation\/documentation\/Intents\/INStartWorkoutIntentHandling].\n- `PauseWorkoutIntentHandler` implements [doc:\/\/com.apple.documentation\/documentation\/Intents\/INPauseWorkoutIntentHandling].\n- `ResumeWorkoutIntentHandler` implements [doc:\/\/com.apple.documentation\/documentation\/Intents\/INResumeWorkoutIntentHandling].\n- `CancelWorkoutIntentHandler` implements [doc:\/\/com.apple.documentation\/documentation\/Intents\/INCancelWorkoutIntentHandling].\n- `EndWorkoutIntentHandler` implements [doc:\/\/com.apple.documentation\/documentation\/Intents\/INEndWorkoutIntentHandling].\n\n### Resolve Parameters\n\nThe first step in handling a request from Siri with one of these classes is to resolve any parameters from the voice command. For example, when starting a workout the user may specify parameters such as the type of workout, a particular goal, and the location of the workout:\n\n- “Start a 30 minute outdoor wall climb with Ascent” specifies the workout goal, location, and name.\n- “Start a wall climb workout with Ascent” specifies only the name of the workout.\n- “Start a workout with Ascent” specifies no parameters, only that a workout should be started.\n\nAn app must decide how to handle these situations using the available resolution methods for the intent type. To handle parameter resolution for [doc:\/\/com.apple.documentation\/documentation\/Intents\/INStartWorkoutIntentHandling], implement one or more of the [doc:\/\/com.apple.documentation\/documentation\/Intents\/INStartWorkoutIntentHandling\/resolveWorkoutName(for:with:)], [doc:\/\/com.apple.documentation\/documentation\/Intents\/INStartWorkoutIntentHandling\/resolveGoalValue(for:with:)], [doc:\/\/com.apple.documentation\/documentation\/Intents\/INStartWorkoutIntentHandling\/resolveWorkoutGoalUnitType(for:with:)], [doc:\/\/com.apple.documentation\/documentation\/Intents\/INStartWorkoutIntentHandling\/resolveWorkoutLocationType(for:with:)], or [doc:\/\/com.apple.documentation\/documentation\/Intents\/INStartWorkoutIntentHandling\/resolveIsOpenEnded(for:with:)] methods.\n\nIn each of these calls, return an appropriate resolution result value by calling the `completion` block. For example, when handling the resolution of the workout name, return an [doc:\/\/com.apple.documentation\/documentation\/Intents\/INSpeakableStringResolutionResult] such as [doc:\/\/com.apple.documentation\/documentation\/Intents\/INSpeakableStringResolutionResult\/success(with:)], [doc:\/\/com.apple.documentation\/documentation\/Intents\/INSpeakableStringResolutionResult\/confirmationRequired(with:)], or [doc:\/\/com.apple.documentation\/documentation\/Intents\/INSpeakableStringResolutionResult\/disambiguation(with:)].\n\n```swift\nfunc resolveWorkoutName(for intent: INStartWorkoutIntent, with completion: @escaping (INSpeakableStringResolutionResult) -> Void) {\n    let result: INSpeakableStringResolutionResult\n    let workoutHistory = WorkoutHistory.load()\n\n    if let name = intent.workoutName {\n        \/\/ Try to determine the obstacle (wall or boulder) from the supplied workout name.\n        if Workout.Obstacle(intentWorkoutName: name) != nil {\n            result = INSpeakableStringResolutionResult.success(with: name)\n        } else {\n            result = INSpeakableStringResolutionResult.needsValue()\n        }\n    } else if let lastWorkout = workoutHistory.last {\n        \/\/ A name hasn't been supplied so suggest the last obstacle.\n        result = INSpeakableStringResolutionResult.confirmationRequired(with: lastWorkout.obstacle.intentWorkoutName)\n    } else {\n        result = INSpeakableStringResolutionResult.needsValue()\n    }\n\n    completion(result)\n}\n```\n\n\n\nTo aid Siri with recognition of parameter names like “wall climb” and “boulder climb,” add an `AppIntentVocabulary.plist` to a project. More information on this file and how it can add vocabulary to Siri can be found in [doc:\/\/com.apple.documentation\/documentation\/SiriKit\/registering-custom-vocabulary-with-sirikit].\n\nOnce all parameters have been resolved, the system calls [doc:\/\/com.apple.documentation\/documentation\/Intents\/INStartWorkoutIntentHandling\/confirm(intent:completion:)]. Validate the resolved parameters and pass back an [doc:\/\/com.apple.documentation\/documentation\/Intents\/INStartWorkoutIntentResponse] with an [doc:\/\/com.apple.documentation\/documentation\/Intents\/INStartWorkoutIntentResponseCode].\n\n### Complete the Request\n\nOnce the request to start the workout has been confirmed, the system calls [doc:\/\/com.apple.documentation\/documentation\/Intents\/INStartWorkoutIntentHandling\/handle(intent:completion:)]. Some requests from Siri will be better handled by the main app rather than the Intent Extension; for example, the main app can better respond to requests in which long-lived system services are needed to support the workout.\n\nTo transfer control to the main app, create a [doc:\/\/com.apple.documentation\/documentation\/Intents\/INStartWorkoutIntentResponse] with the [doc:\/\/com.apple.documentation\/documentation\/Intents\/INStartWorkoutIntentResponseCode\/handleInApp] code and pass it to the completion block.\n\n```swift\nfunc handle(intent: INStartWorkoutIntent, completion: @escaping (INStartWorkoutIntentResponse) -> Void) {\n    \/\/ `handleInApp` will transfer handling this activity to the main app and deliver the intent to the app delegate in the background.\n    let response = INStartWorkoutIntentResponse(code: .handleInApp, userActivity: nil)\n    completion(response)\n}\n```\n\nWhen an Intent Extension handles an intent with the `handleInApp` response code, it delivers the to the intent to the [doc:\/\/com.apple.documentation\/documentation\/UIKit\/UIApplicationDelegate\/application(_:handle:completionHandler:)] method in the main app’s process in the background.\n\n```swift\nfunc application(_ application: UIApplication, handle intent: INIntent, completionHandler: @escaping (INIntentResponse) -> Void) {\n    if let intent = intent as? INStartWorkoutIntent {\n        completionHandler(handle(intent))\n    } else if let intent = intent as? INCancelWorkoutIntent {\n        completionHandler(handle(intent))\n    } else if let intent = intent as? INPauseWorkoutIntent {\n        completionHandler(handle(intent))\n    } else if let intent = intent as? INEndWorkoutIntent {\n        completionHandler(handle(intent))\n    } else if let intent = intent as? INResumeWorkoutIntent {\n        completionHandler(handle(intent))\n    } else {\n        preconditionFailure(\"Trying to handle unknown intent type\")\n    }\n}\n```\n\n## Sample code\n\n- **Adding Shortcuts for Wind Down**: Reveal your app’s shortcuts inside the Health app.\n- **Booking Rides with SiriKit**: Add Intents extensions to your app to handle requests to book rides using Siri and Maps.\n- **Handling Payment Requests with SiriKit**: Add an Intent Extension to your app to handle money transfer requests with Siri.\n- **Integrating Your App with Siri Event Suggestions**: Donate reservations and provide quick access to event details throughout the system.\n- **Managing Audio with SiriKit**: Control audio playback and handle requests to add media using SiriKit Media Intents.\n- **Providing Hands-Free App Control with Intents**: Resolve, confirm, and handle intents without an extension.\n- **Soup Chef: Accelerating App Interactions with Shortcuts**: Make it easy for people to use Siri with your app by providing shortcuts to your app’s actions.\n- **Soup Chef with App Intents: Migrating custom intents**: Integrating App Intents to provide your appʼs actions to Siri and Shortcuts.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Reveal your app’s shortcuts inside the Health app.",
          "name" : "Adding Shortcuts for Wind Down",
          "url" : "https:\/\/developer.apple.com\/documentation\/SiriKit\/adding-shortcuts-for-wind-down"
        },
        {
          "description" : "Add Intents extensions to your app to handle requests to book rides using Siri and Maps.",
          "name" : "Booking Rides with SiriKit",
          "url" : "https:\/\/developer.apple.com\/documentation\/SiriKit\/booking-rides-with-sirikit"
        },
        {
          "description" : "Add an Intent Extension to your app to handle money transfer requests with Siri.",
          "name" : "Handling Payment Requests with SiriKit",
          "url" : "https:\/\/developer.apple.com\/documentation\/SiriKit\/handling-payment-requests-with-sirikit"
        },
        {
          "description" : "Donate reservations and provide quick access to event details throughout the system.",
          "name" : "Integrating Your App with Siri Event Suggestions",
          "url" : "https:\/\/developer.apple.com\/documentation\/SiriKit\/integrating-your-app-with-siri-event-suggestions"
        },
        {
          "description" : "Control audio playback and handle requests to add media using SiriKit Media Intents.",
          "name" : "Managing Audio with SiriKit",
          "url" : "https:\/\/developer.apple.com\/documentation\/SiriKit\/managing-audio-with-sirikit"
        },
        {
          "description" : "Resolve, confirm, and handle intents without an extension.",
          "name" : "Providing Hands-Free App Control with Intents",
          "url" : "https:\/\/developer.apple.com\/documentation\/SiriKit\/providing-hands-free-app-control-with-intents"
        },
        {
          "description" : "Make it easy for people to use Siri with your app by providing shortcuts to your app’s actions.",
          "name" : "Soup Chef: Accelerating App Interactions with Shortcuts",
          "url" : "https:\/\/developer.apple.com\/documentation\/SiriKit\/soup-chef-accelerating-app-interactions-with-shortcuts"
        },
        {
          "description" : "Integrating App Intents to provide your appʼs actions to Siri and Shortcuts.",
          "name" : "Soup Chef with App Intents: Migrating custom intents",
          "url" : "https:\/\/developer.apple.com\/documentation\/SiriKit\/soup-chef-with-app-intents-migrating-custom-intents"
        }
      ],
      "title" : "Sample code"
    }
  ],
  "source" : "appleJSON",
  "title" : "Handling Workout Requests with SiriKit",
  "url" : "https:\/\/developer.apple.com\/documentation\/sirikit\/handling-workout-requests-with-sirikit"
}