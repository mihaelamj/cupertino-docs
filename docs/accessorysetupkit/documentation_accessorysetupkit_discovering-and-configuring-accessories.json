{
  "abstract" : "Detect nearby accessories and facilitate their setup.",
  "codeExamples" : [
    {
      "code" : "let session = ASAccessorySession()\noverride func viewDidLoad() {\n    super.viewDidLoad()\n    \n    session.activate(on: DispatchQueue.main) { [weak self] event in\n        guard let self else { return }\n        \n        switch event.eventType {\n        case .activated:\n            \/\/ Use previously-discovered accessories in\n            \/\/ session.accessories, if necessary.\n        case .accessoryAdded:\n            \/\/ Handle addition of an accessory by person using the app.\n        case .accessoryRemoved, .accessoryChanged:\n            \/\/ Handle removal or change of previously-added\n            \/\/ accessory, if necessary.\n        case .invalidated:\n            \/\/ The session is now invalid and you can't use it further.\n        case .migrationComplete:\n            \/\/ Handle migration.\n        case .pickerDidPresent:\n            \/\/ Update state for picker appearing, if necessary.\n        case .pickerDidDismiss:\n            \/\/ Update state for picker disappearing, if necessary.\n        case .unknown:\n            \/\/ Handle unknown event type, if appropriate.\n        @unknown default:\n            \/\/ Reserve this space for yet-to-be-defined event types.\n        }\n    }\n}",
      "language" : "swift"
    },
    {
      "code" : "private func showMyPicker() {\n    var descriptor = ASDiscoveryDescriptor()\n    descriptor.bluetoothServiceUUID = CBUUID(string: MY_ACCESSORY_UUID_STRING) \/\/ If using Wi-Fi, set descriptor.ssid instead.\n    \n    let displayName = \"My Accessory\"\n    guard let productImage = UIImage(named: MY_ACCESSORY_IMAGE_NAME) else { return }\n    \n    var items: [ASPickerDisplayItem] = []\n    items.append (ASPickerDisplayItem(name: displayName,\n                                      productImage: productImage,\n                                      descriptor: descriptor))\n    \n    \/\/ Create additional picker items if you support multiple accessories\n    \/\/ with different Wi-Fi SSIDs or Bluetooth service UUIDs.\n    \n    session.showPicker(for: items) { error in\n        if let error {\n            \/\/ Handle error.\n        } else {\n            \/\/ Perform any post-picker cleanup.\n            \/\/ If the picker finished by selecting an item, the event\n            \/\/ handler receives it as an event of type `.accessoryAdded`.\n        }\n    }\n}",
      "language" : "swift"
    },
    {
      "code" : "let settings = ASPickerDisplaySettings.default\nsettings.discoveryTimeout = .unbounded\nsettings.options.insert(.filterDiscoveryResults)\nsession.pickerDisplaySettings = settings",
      "language" : "swift"
    },
    {
      "code" : "session.activate(on: .main) { [weak self] event in\n    guard let strongSelf = self else { return }\n    switch event.eventType {\n    case .accessoryDiscovered: \n        if let accessory = event.accessory as? ASDiscoveredAccessory { \n            if myShouldDisplayAccessory(advertisement: accessory.bluetoothAdvertisementData,\n                                        rssi: accessory.bluetoothRSSI) {\n                let item = ASDiscoveredDisplayItem(name: \"More Specific Product Name\",\n                                                   productImage: UIImage(named: \"AssetPreparedJustInTime\")!,\n                                                   accessory: accessory)\n                session.updatePicker(showing: [item]) { error in\n                    print(error)\n                }\n            }\n        }\n    }\n}",
      "language" : "swift"
    },
    {
      "code" : "case .accessoryAdded:\n    self.pickedAccessory = event.accessory\ncase .pickerDidDismiss:\n    guard let accessory = self.pickedAccessory else { return }\n    self.pickedAccessory = nil\n    self.handleAccessoryAdded(accessory)",
      "language" : "swift"
    },
    {
      "code" : "private func handleAccessoryAdded(_ accessory: ASAccessory) {\n    if let btIdentifier = accessory.bluetoothIdentifier {\n        \/\/ Use Core Bluetooth to communicate with and configure the accessory.\n    }\n    else if let ssid = accessory.ssid {\n        \/\/ Create a `NEHotspotConfiguration` with this SSID to configure.\n    }\n}",
      "language" : "swift"
    }
  ],
  "contentHash" : "6cd89d4bf2742ad9d9c0c9455c1dca64570d0e78ee0c210332575a85bf9ee943",
  "crawledAt" : "2025-12-02T15:57:03Z",
  "id" : "C46ED4DD-28D1-403D-8E1A-E6D34372060E",
  "kind" : "article",
  "language" : "swift",
  "module" : "AccessorySetupKit",
  "overview" : "## Overview\n\nUse the AccessorySetupKit framework to simplify discovery and configuration of Bluetooth or Wi-Fi accessories. This allows the person using your app to use these devices without granting overly-broad Bluetooth or Wi-Fi access.\n\nTo discover accessories and present them in your app:\n\n### Declare your app’s accessories\n\nTo prepare your app to discover accessories, add the `NSAccessorySetupKitSupports` key to its information property list. Set its value to an array of strings that contains one or more of the following values:\n\nIf you add `Bluetooth` to the list of supported protocols, you also need to add the following keys and values to your app’s information property list:\n\n### Activate a discovery session\n\nThe [doc:\/\/com.apple.AccessorySetupKit\/documentation\/AccessorySetupKit\/ASAccessorySession] is how your app uses the AccessorySetupKit framework. In your app, you create an instance of [doc:\/\/com.apple.AccessorySetupKit\/documentation\/AccessorySetupKit\/ASAccessorySession] and activate it to receive callbacks with events as the session processes events. The [doc:\/\/com.apple.AccessorySetupKit\/documentation\/AccessorySetupKit\/ASAccessorySession\/activate(on:eventHandler:)] method takes a [doc:\/\/com.apple.documentation\/documentation\/Dispatch\/DispatchQueue] and an event-handling block or closure. The callbacks occur on the provided queue, which defaults to [doc:\/\/com.apple.documentation\/documentation\/Dispatch\/DispatchQueue\/main].\n\nThe event handler receives a single parameter of type [doc:\/\/com.apple.AccessorySetupKit\/documentation\/AccessorySetupKit\/ASAccessoryEvent], which has an [doc:\/\/com.apple.AccessorySetupKit\/documentation\/AccessorySetupKit\/ASAccessoryEvent\/eventType] that you use to determine what to do with each callback. For example, shortly after activating the session, your callback receives the [doc:\/\/com.apple.AccessorySetupKit\/documentation\/AccessorySetupKit\/ASAccessoryEventType\/activated] event. The following listing comments on the meaning of these events and how you may want to handle them.\n\n### Display an accessory picker\n\nWhen the session activates, its [doc:\/\/com.apple.AccessorySetupKit\/documentation\/AccessorySetupKit\/ASAccessorySession\/accessories] array contains any accessories previously authorized for the app, which you can inspect. To discover new devices, your app needs to show an accessory picker. The person using the app uses this picker to choose the accessory to configure.\n\nCreate instances of [doc:\/\/com.apple.AccessorySetupKit\/documentation\/AccessorySetupKit\/ASPickerDisplayItem] that describe the items in the session that your app can configure. Collect these items in an array and pass them to the session for the operating system to present a picker:\n\nEach display item’s [doc:\/\/com.apple.AccessorySetupKit\/documentation\/AccessorySetupKit\/ASPickerDisplayItem\/descriptor], a property of type [doc:\/\/com.apple.AccessorySetupKit\/documentation\/AccessorySetupKit\/ASDiscoveryDescriptor], needs to have a [doc:\/\/com.apple.AccessorySetupKit\/documentation\/AccessorySetupKit\/ASDiscoveryDescriptor\/bluetoothCompanyIdentifier] or [doc:\/\/com.apple.AccessorySetupKit\/documentation\/AccessorySetupKit\/ASDiscoveryDescriptor\/bluetoothServiceUUID], and at least one of the following accessory identifiers:\n\nFor Bluetooth accessories, the accessory identifiers you use in display items need to match the values you supply in the app’s information property list.\n\nAlong with filtering matched accessories to show in the picker, the display item and its descriptor allow you to control certain behaviors of the picker interaction. You can limit the [doc:\/\/com.apple.AccessorySetupKit\/documentation\/AccessorySetupKit\/ASDiscoveryDescriptor\/bluetoothRange] of the descriptor to only match accessories in the immediate physical proximity of the device running the app. To specify behaviors like allowing renaming of the accessory during setup, or confirming accessory authorization before showing the setup view, set the display item’s [doc:\/\/com.apple.AccessorySetupKit\/documentation\/AccessorySetupKit\/ASPickerDisplayItem\/setupOptions-swift.property].\n\nWhen the picker appears, the person using the app sees a view of all nearby accessories that match the identifiers you provide. When multiple devices match a given identifier, the picker shows a separate item for each unique device. This allows the person to select a single device with the picker.\n\nThe following figure shows a single accessory selected in the picker.\n\n\n\n### Use the picker when migrating to AccessorySetupKit\n\nYou can also perform a one-time migration of previously-configured accessories, which adds them to the AccessorySetupKit framework’s list of known accessories. To do this, create instances of [doc:\/\/com.apple.AccessorySetupKit\/documentation\/AccessorySetupKit\/ASMigrationDisplayItem] and include them in the array of items you send to [doc:\/\/com.apple.AccessorySetupKit\/documentation\/AccessorySetupKit\/ASAccessorySession\/showPicker(for:completionHandler:)].\n\nFor items you want to migrate, set one or both of the following:\n\n### Perform custom filtering\n\nSome apps need to obtain over-the-air (OTA) data from discovered accessories and perform additional filtering before showing them in the picker. The filtering includes tasks like validating the authenticity of an accessory, testing whether it’s in pairing mode, and other checks. If your app needs do this, set the picker’s display settings to use the [doc:\/\/com.apple.AccessorySetupKit\/documentation\/AccessorySetupKit\/ASPickerDisplaySettings\/Options-swift.struct\/filterDiscoveryResults] option. If you need unlimited time to perform filtering and perform additional actions like downloading product artwork, set the [doc:\/\/com.apple.AccessorySetupKit\/documentation\/AccessorySetupKit\/ASPickerDisplaySettings\/discoveryTimeout-swift.property] to [doc:\/\/com.apple.AccessorySetupKit\/documentation\/AccessorySetupKit\/ASPickerDisplaySettings\/DiscoveryTimeout-swift.struct\/unbounded].\n\nThe following code performs these setup steps:\n\nWhen the session produces an [doc:\/\/com.apple.AccessorySetupKit\/documentation\/AccessorySetupKit\/ASAccessoryEventType\/accessoryDiscovered] event, examine the accessory and determine whether to display it in the picker. To add the accessory to the picker, create a [doc:\/\/com.apple.AccessorySetupKit\/documentation\/AccessorySetupKit\/ASDiscoveredDisplayItem]. Using this type gives you the option to customize the item’s display with a specific name and a custom image. Then call [doc:\/\/com.apple.AccessorySetupKit\/documentation\/AccessorySetupKit\/ASAccessorySession\/updatePicker(showing:completionHandler:)] on the session to show the customized item.\n\nThe following example demonstrates an event handler that inspects discovered accessories and adds customized items to the picker.\n\nIf your custom filtering process requires the app to finish the accessory discovery early, manually end the discovery process by calling [doc:\/\/com.apple.AccessorySetupKit\/documentation\/AccessorySetupKit\/ASAccessorySession\/finishPickerDiscovery(completionHandler:)]. If your filtering process didn’t add any discovered items to the picker, this call shows a timeout message in the app.\n\n### Connect and configure the selected device\n\nWhen the person picks an accessory, the picker sends an event of type [doc:\/\/com.apple.AccessorySetupKit\/documentation\/AccessorySetupKit\/ASAccessoryEventType\/accessoryAdded], followed by an [doc:\/\/com.apple.AccessorySetupKit\/documentation\/AccessorySetupKit\/ASAccessoryEventType\/pickerDidDismiss] event when they dismiss the picker. If your app presents its own UI to configure the accessory, wait for the picker to dismiss, then use the accessory from the first event. You can handle this scenario by rewriting your event handler closure from before as follows, storing the accessory on the first event and retrieving it on the second.\n\nThe event’s [doc:\/\/com.apple.AccessorySetupKit\/documentation\/AccessorySetupKit\/ASAccessoryEvent\/accessory] property contains details of the selected device, like its [doc:\/\/com.apple.AccessorySetupKit\/documentation\/AccessorySetupKit\/ASAccessory\/displayName] and an [doc:\/\/com.apple.AccessorySetupKit\/documentation\/AccessorySetupKit\/ASAccessory\/bluetoothIdentifier] for Bluetooth devices or [doc:\/\/com.apple.AccessorySetupKit\/documentation\/AccessorySetupKit\/ASAccessory\/ssid] for Wi-Fi. Use this information to connect to the accessory — using [doc:\/\/com.apple.documentation\/documentation\/CoreBluetooth] for Bluetooth or [doc:\/\/com.apple.documentation\/documentation\/NetworkExtension] for Wi-Fi — and begin your device-specific setup process.\n\nBecause the app discovered the device with AccessorySetupKit, connecting to the device won’t invoke the TCC or other alerts that the system normally shows when using these system frameworks.\n\nStarting in watchOS 26, if your iOS app has a companion watchOS app, the watchOS app can use CoreBluetooth to communicate with a device that someone set up by using AccessorySetupKit in the iOS app. Unlike iOS, however, the watchOS app still shows TCC alerts when connecting.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/AccessorySetupKit\/discovering-and-configuring-accessories\ncrawled: 2025-12-02T15:57:03Z\n---\n\n# Discovering and configuring accessories\n\n**Article**\n\nDetect nearby accessories and facilitate their setup.\n\n## Overview\n\nUse the AccessorySetupKit framework to simplify discovery and configuration of Bluetooth or Wi-Fi accessories. This allows the person using your app to use these devices without granting overly-broad Bluetooth or Wi-Fi access.\n\nTo discover accessories and present them in your app:\n\n1. Declare that your app uses AccessorySetupKit in its information property list.\n2. In your app, create and activate an instance of [doc:\/\/com.apple.AccessorySetupKit\/documentation\/AccessorySetupKit\/ASAccessorySession].\n3. Provide information about your supported accessories to display a picker. This lets the person using your app discover and select nearby accessories to configure.\n4. When the picker sends an accessory added event, use information about the selected device to create a Bluetooth or Wi-Fi connection.\n\n### Declare your app’s accessories\n\nTo prepare your app to discover accessories, add the `NSAccessorySetupKitSupports` key to its information property list. Set its value to an array of strings that contains one or more of the following values:\n\n\n\nIf you add `Bluetooth` to the list of supported protocols, you also need to add the following keys and values to your app’s information property list:\n\n\n\n\n\n### Activate a discovery session\n\nThe [doc:\/\/com.apple.AccessorySetupKit\/documentation\/AccessorySetupKit\/ASAccessorySession] is how your app uses the AccessorySetupKit framework. In your app, you create an instance of [doc:\/\/com.apple.AccessorySetupKit\/documentation\/AccessorySetupKit\/ASAccessorySession] and activate it to receive callbacks with events as the session processes events. The [doc:\/\/com.apple.AccessorySetupKit\/documentation\/AccessorySetupKit\/ASAccessorySession\/activate(on:eventHandler:)] method takes a [doc:\/\/com.apple.documentation\/documentation\/Dispatch\/DispatchQueue] and an event-handling block or closure. The callbacks occur on the provided queue, which defaults to [doc:\/\/com.apple.documentation\/documentation\/Dispatch\/DispatchQueue\/main].\n\nThe event handler receives a single parameter of type [doc:\/\/com.apple.AccessorySetupKit\/documentation\/AccessorySetupKit\/ASAccessoryEvent], which has an [doc:\/\/com.apple.AccessorySetupKit\/documentation\/AccessorySetupKit\/ASAccessoryEvent\/eventType] that you use to determine what to do with each callback. For example, shortly after activating the session, your callback receives the [doc:\/\/com.apple.AccessorySetupKit\/documentation\/AccessorySetupKit\/ASAccessoryEventType\/activated] event. The following listing comments on the meaning of these events and how you may want to handle them.\n\n```swift\nlet session = ASAccessorySession()\noverride func viewDidLoad() {\n    super.viewDidLoad()\n    \n    session.activate(on: DispatchQueue.main) { [weak self] event in\n        guard let self else { return }\n        \n        switch event.eventType {\n        case .activated:\n            \/\/ Use previously-discovered accessories in\n            \/\/ session.accessories, if necessary.\n        case .accessoryAdded:\n            \/\/ Handle addition of an accessory by person using the app.\n        case .accessoryRemoved, .accessoryChanged:\n            \/\/ Handle removal or change of previously-added\n            \/\/ accessory, if necessary.\n        case .invalidated:\n            \/\/ The session is now invalid and you can't use it further.\n        case .migrationComplete:\n            \/\/ Handle migration.\n        case .pickerDidPresent:\n            \/\/ Update state for picker appearing, if necessary.\n        case .pickerDidDismiss:\n            \/\/ Update state for picker disappearing, if necessary.\n        case .unknown:\n            \/\/ Handle unknown event type, if appropriate.\n        @unknown default:\n            \/\/ Reserve this space for yet-to-be-defined event types.\n        }\n    }\n}\n```\n\n### Display an accessory picker\n\nWhen the session activates, its [doc:\/\/com.apple.AccessorySetupKit\/documentation\/AccessorySetupKit\/ASAccessorySession\/accessories] array contains any accessories previously authorized for the app, which you can inspect. To discover new devices, your app needs to show an accessory picker. The person using the app uses this picker to choose the accessory to configure.\n\n\n\nCreate instances of [doc:\/\/com.apple.AccessorySetupKit\/documentation\/AccessorySetupKit\/ASPickerDisplayItem] that describe the items in the session that your app can configure. Collect these items in an array and pass them to the session for the operating system to present a picker:\n\n```swift\nprivate func showMyPicker() {\n    var descriptor = ASDiscoveryDescriptor()\n    descriptor.bluetoothServiceUUID = CBUUID(string: MY_ACCESSORY_UUID_STRING) \/\/ If using Wi-Fi, set descriptor.ssid instead.\n    \n    let displayName = \"My Accessory\"\n    guard let productImage = UIImage(named: MY_ACCESSORY_IMAGE_NAME) else { return }\n    \n    var items: [ASPickerDisplayItem] = []\n    items.append (ASPickerDisplayItem(name: displayName,\n                                      productImage: productImage,\n                                      descriptor: descriptor))\n    \n    \/\/ Create additional picker items if you support multiple accessories\n    \/\/ with different Wi-Fi SSIDs or Bluetooth service UUIDs.\n    \n    session.showPicker(for: items) { error in\n        if let error {\n            \/\/ Handle error.\n        } else {\n            \/\/ Perform any post-picker cleanup.\n            \/\/ If the picker finished by selecting an item, the event\n            \/\/ handler receives it as an event of type `.accessoryAdded`.\n        }\n    }\n}\n```\n\nEach display item’s [doc:\/\/com.apple.AccessorySetupKit\/documentation\/AccessorySetupKit\/ASPickerDisplayItem\/descriptor], a property of type [doc:\/\/com.apple.AccessorySetupKit\/documentation\/AccessorySetupKit\/ASDiscoveryDescriptor], needs to have a [doc:\/\/com.apple.AccessorySetupKit\/documentation\/AccessorySetupKit\/ASDiscoveryDescriptor\/bluetoothCompanyIdentifier] or [doc:\/\/com.apple.AccessorySetupKit\/documentation\/AccessorySetupKit\/ASDiscoveryDescriptor\/bluetoothServiceUUID], and at least one of the following accessory identifiers:\n\n- [doc:\/\/com.apple.AccessorySetupKit\/documentation\/AccessorySetupKit\/ASDiscoveryDescriptor\/bluetoothNameSubstring]\n- A [doc:\/\/com.apple.AccessorySetupKit\/documentation\/AccessorySetupKit\/ASDiscoveryDescriptor\/bluetoothManufacturerDataBlob] and [doc:\/\/com.apple.AccessorySetupKit\/documentation\/AccessorySetupKit\/ASDiscoveryDescriptor\/bluetoothManufacturerDataMask] set to the same length.\n- A [doc:\/\/com.apple.AccessorySetupKit\/documentation\/AccessorySetupKit\/ASDiscoveryDescriptor\/bluetoothServiceDataBlob] and [doc:\/\/com.apple.AccessorySetupKit\/documentation\/AccessorySetupKit\/ASDiscoveryDescriptor\/bluetoothServiceDataMask] set to the same length.\n- Either [doc:\/\/com.apple.AccessorySetupKit\/documentation\/AccessorySetupKit\/ASDiscoveryDescriptor\/ssid] or [doc:\/\/com.apple.AccessorySetupKit\/documentation\/AccessorySetupKit\/ASDiscoveryDescriptor\/ssidPrefix], which needs to have a non-zero length. Only supply one of these; the app crashes if you supply both.\n\nFor Bluetooth accessories, the accessory identifiers you use in display items need to match the values you supply in the app’s information property list.\n\nAlong with filtering matched accessories to show in the picker, the display item and its descriptor allow you to control certain behaviors of the picker interaction. You can limit the [doc:\/\/com.apple.AccessorySetupKit\/documentation\/AccessorySetupKit\/ASDiscoveryDescriptor\/bluetoothRange] of the descriptor to only match accessories in the immediate physical proximity of the device running the app. To specify behaviors like allowing renaming of the accessory during setup, or confirming accessory authorization before showing the setup view, set the display item’s [doc:\/\/com.apple.AccessorySetupKit\/documentation\/AccessorySetupKit\/ASPickerDisplayItem\/setupOptions-swift.property].\n\nWhen the picker appears, the person using the app sees a view of all nearby accessories that match the identifiers you provide. When multiple devices match a given identifier, the picker shows a separate item for each unique device. This allows the person to select a single device with the picker.\n\nThe following figure shows a single accessory selected in the picker.\n\n\n\n### Use the picker when migrating to AccessorySetupKit\n\nYou can also perform a one-time migration of previously-configured accessories, which adds them to the AccessorySetupKit framework’s list of known accessories. To do this, create instances of [doc:\/\/com.apple.AccessorySetupKit\/documentation\/AccessorySetupKit\/ASMigrationDisplayItem] and include them in the array of items you send to [doc:\/\/com.apple.AccessorySetupKit\/documentation\/AccessorySetupKit\/ASAccessorySession\/showPicker(for:completionHandler:)].\n\nFor items you want to migrate, set one or both of the following:\n\n- An [doc:\/\/com.apple.AccessorySetupKit\/documentation\/AccessorySetupKit\/ASMigrationDisplayItem\/hotspotSSID], which must be a full SSID and not a prefix.\n- An [doc:\/\/com.apple.AccessorySetupKit\/documentation\/AccessorySetupKit\/ASMigrationDisplayItem\/peripheralIdentifier], which corresponds to the [doc:\/\/com.apple.documentation\/documentation\/CoreBluetooth\/CBPeer\/identifier] property of the [doc:\/\/com.apple.documentation\/documentation\/CoreBluetooth\/CBPeer] type.\n\n\n\n### Perform custom filtering\n\nSome apps need to obtain over-the-air (OTA) data from discovered accessories and perform additional filtering before showing them in the picker. The filtering includes tasks like validating the authenticity of an accessory, testing whether it’s in pairing mode, and other checks. If your app needs do this, set the picker’s display settings to use the [doc:\/\/com.apple.AccessorySetupKit\/documentation\/AccessorySetupKit\/ASPickerDisplaySettings\/Options-swift.struct\/filterDiscoveryResults] option. If you need unlimited time to perform filtering and perform additional actions like downloading product artwork, set the [doc:\/\/com.apple.AccessorySetupKit\/documentation\/AccessorySetupKit\/ASPickerDisplaySettings\/discoveryTimeout-swift.property] to [doc:\/\/com.apple.AccessorySetupKit\/documentation\/AccessorySetupKit\/ASPickerDisplaySettings\/DiscoveryTimeout-swift.struct\/unbounded].\n\nThe following code performs these setup steps:\n\n```swift\nlet settings = ASPickerDisplaySettings.default\nsettings.discoveryTimeout = .unbounded\nsettings.options.insert(.filterDiscoveryResults)\nsession.pickerDisplaySettings = settings\n```\n\nWhen the session produces an [doc:\/\/com.apple.AccessorySetupKit\/documentation\/AccessorySetupKit\/ASAccessoryEventType\/accessoryDiscovered] event, examine the accessory and determine whether to display it in the picker. To add the accessory to the picker, create a [doc:\/\/com.apple.AccessorySetupKit\/documentation\/AccessorySetupKit\/ASDiscoveredDisplayItem]. Using this type gives you the option to customize the item’s display with a specific name and a custom image. Then call [doc:\/\/com.apple.AccessorySetupKit\/documentation\/AccessorySetupKit\/ASAccessorySession\/updatePicker(showing:completionHandler:)] on the session to show the customized item.\n\nThe following example demonstrates an event handler that inspects discovered accessories and adds customized items to the picker.\n\n```swift\nsession.activate(on: .main) { [weak self] event in\n    guard let strongSelf = self else { return }\n    switch event.eventType {\n    case .accessoryDiscovered: \n        if let accessory = event.accessory as? ASDiscoveredAccessory { \n            if myShouldDisplayAccessory(advertisement: accessory.bluetoothAdvertisementData,\n                                        rssi: accessory.bluetoothRSSI) {\n                let item = ASDiscoveredDisplayItem(name: \"More Specific Product Name\",\n                                                   productImage: UIImage(named: \"AssetPreparedJustInTime\")!,\n                                                   accessory: accessory)\n                session.updatePicker(showing: [item]) { error in\n                    print(error)\n                }\n            }\n        }\n    }\n}\n```\n\nIf your custom filtering process requires the app to finish the accessory discovery early, manually end the discovery process by calling [doc:\/\/com.apple.AccessorySetupKit\/documentation\/AccessorySetupKit\/ASAccessorySession\/finishPickerDiscovery(completionHandler:)]. If your filtering process didn’t add any discovered items to the picker, this call shows a timeout message in the app.\n\n\n\n### Connect and configure the selected device\n\nWhen the person picks an accessory, the picker sends an event of type [doc:\/\/com.apple.AccessorySetupKit\/documentation\/AccessorySetupKit\/ASAccessoryEventType\/accessoryAdded], followed by an [doc:\/\/com.apple.AccessorySetupKit\/documentation\/AccessorySetupKit\/ASAccessoryEventType\/pickerDidDismiss] event when they dismiss the picker. If your app presents its own UI to configure the accessory, wait for the picker to dismiss, then use the accessory from the first event. You can handle this scenario by rewriting your event handler closure from before as follows, storing the accessory on the first event and retrieving it on the second.\n\n```swift\ncase .accessoryAdded:\n    self.pickedAccessory = event.accessory\ncase .pickerDidDismiss:\n    guard let accessory = self.pickedAccessory else { return }\n    self.pickedAccessory = nil\n    self.handleAccessoryAdded(accessory)\n```\n\nThe event’s [doc:\/\/com.apple.AccessorySetupKit\/documentation\/AccessorySetupKit\/ASAccessoryEvent\/accessory] property contains details of the selected device, like its [doc:\/\/com.apple.AccessorySetupKit\/documentation\/AccessorySetupKit\/ASAccessory\/displayName] and an [doc:\/\/com.apple.AccessorySetupKit\/documentation\/AccessorySetupKit\/ASAccessory\/bluetoothIdentifier] for Bluetooth devices or [doc:\/\/com.apple.AccessorySetupKit\/documentation\/AccessorySetupKit\/ASAccessory\/ssid] for Wi-Fi. Use this information to connect to the accessory — using [doc:\/\/com.apple.documentation\/documentation\/CoreBluetooth] for Bluetooth or [doc:\/\/com.apple.documentation\/documentation\/NetworkExtension] for Wi-Fi — and begin your device-specific setup process.\n\n```swift\nprivate func handleAccessoryAdded(_ accessory: ASAccessory) {\n    if let btIdentifier = accessory.bluetoothIdentifier {\n        \/\/ Use Core Bluetooth to communicate with and configure the accessory.\n    }\n    else if let ssid = accessory.ssid {\n        \/\/ Create a `NEHotspotConfiguration` with this SSID to configure.\n    }\n}\n```\n\nBecause the app discovered the device with AccessorySetupKit, connecting to the device won’t invoke the TCC or other alerts that the system normally shows when using these system frameworks.\n\nStarting in watchOS 26, if your iOS app has a companion watchOS app, the watchOS app can use CoreBluetooth to communicate with a device that someone set up by using AccessorySetupKit in the iOS app. Unlike iOS, however, the watchOS app still shows TCC alerts when connecting.\n\n## Essentials\n\n- **Setting up and authorizing a Bluetooth accessory**: Discover, select, and set up a specific Bluetooth accessory without requesting permission to use Bluetooth.\n- **ASAccessorySession**: A class to coordinate accessory discovery.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Discover, select, and set up a specific Bluetooth accessory without requesting permission to use Bluetooth.",
          "name" : "Setting up and authorizing a Bluetooth accessory",
          "url" : "https:\/\/developer.apple.com\/documentation\/AccessorySetupKit\/setting-up-and-authorizing-a-bluetooth-accessory"
        },
        {
          "description" : "A class to coordinate accessory discovery.",
          "name" : "ASAccessorySession",
          "url" : "https:\/\/developer.apple.com\/documentation\/AccessorySetupKit\/ASAccessorySession"
        }
      ],
      "title" : "Essentials"
    }
  ],
  "source" : "appleJSON",
  "title" : "Discovering and configuring accessories",
  "url" : "https:\/\/developer.apple.com\/documentation\/AccessorySetupKit\/discovering-and-configuring-accessories"
}