{
  "abstract" : "The base class for managing the setup and registration of your driver.",
  "codeExamples" : [
    {
      "code" : "struct MyCustomKeyboardDriver_IVars\n{\n    OSArray *elements;\n    \n    struct {\n        OSArray *elements;\n    } keyboard;\n};\n\nbool MyCustomKeyboardDriver::init()\n{\n   if (!super::init()) {return false;}\n    \n   \/\/ Allocate memory for the instance variables.\n   ivars = IONewZero(MyCustomKeyboardDriver_IVars, 1);\n   if (!ivars) {return false;}\n    \nexit:\n   return true;\n}\n",
      "language" : "objc"
    }
  ],
  "contentHash" : "1d18b351198aa2a204a5ae595759e593a30cbcafeed8819b504f76d6127fd483",
  "crawledAt" : "2025-12-05T15:57:31Z",
  "declaration" : {
    "code" : "class IOService;",
    "language" : "swift"
  },
  "id" : "F95E5972-8AE8-437A-B0DA-BA5AE4981735",
  "inheritedBy" : [
    "IOUserClient",
    "IOUserServer"
  ],
  "kind" : "class",
  "language" : "occ",
  "module" : "DriverKit",
  "overview" : "## Overview\n\nAn [doc:\/\/com.apple.driverkit\/documentation\/DriverKit\/IOService] object is the base class the system uses to represent all devices and device-related interfaces. When the user plugs in a device, the system creates one or more service objects to manage interactions with that device. One service object represents the device itself, and additional service objects represent the interfaces or communication protocols that the device supports. For example, the driver for a USB camera that supports multiple video and audio protocols might define different service objects for each protocol.\n\nWhen the user plugs in a device, the system looks for the service objects that best match the device’s capabilities. Apple’s built-in driver families support most device types and a large array of standard interfaces. You provide custom service objects to support your device’s custom behaviors.\n\nIn most cases, you subclass a child of [doc:\/\/com.apple.driverkit\/documentation\/DriverKit\/IOService] such as [doc:\/\/com.apple.documentation\/documentation\/USBDriverKit\/IOUSBHostInterface], instead of [doc:\/\/com.apple.driverkit\/documentation\/DriverKit\/IOService] itself. Use the methods of this class to do the following:\n\nFor additional information about how to implement services for a particular type of device, see the service subclasses in [doc:\/\/com.apple.documentation\/documentation\/HIDDriverKit], [doc:\/\/com.apple.documentation\/documentation\/USBDriverKit], [doc:\/\/com.apple.documentation\/documentation\/NetworkingDriverKit], [doc:\/\/com.apple.documentation\/documentation\/SerialDriverKit], and [doc:\/\/com.apple.documentation\/documentation\/USBSerialDriverKit].\n\n### Adding Member Variables to Your Custom Subclass\n\nDon’t declare custom member variables directly in your [doc:\/\/com.apple.driverkit\/documentation\/DriverKit\/IOService] subclass. Instead, DriverKit requires you to define all variables in a separate structure. During initialization, allocate a block of memory for that structure and assign that block to the system-provided `ivars` variable of your service class. The following code example shows you how to define the structure and allocate it in the [doc:\/\/com.apple.driverkit\/documentation\/DriverKit\/IOService\/init] method of your service class.\n\nDeallocate any memory that you allocate for your custom variables in the [doc:\/\/com.apple.driverkit\/documentation\/DriverKit\/IOService\/free] method of your class.",
  "platforms" : [
    "Unsupported OS: driverkit"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/driverkit\/ioservice\ncrawled: 2025-12-05T15:57:31Z\n---\n\n# IOService\n\n**Class**\n\nThe base class for managing the setup and registration of your driver.\n\n## Declaration\n\n```swift\nclass IOService;\n```\n\n## Overview\n\nAn [doc:\/\/com.apple.driverkit\/documentation\/DriverKit\/IOService] object is the base class the system uses to represent all devices and device-related interfaces. When the user plugs in a device, the system creates one or more service objects to manage interactions with that device. One service object represents the device itself, and additional service objects represent the interfaces or communication protocols that the device supports. For example, the driver for a USB camera that supports multiple video and audio protocols might define different service objects for each protocol.\n\nWhen the user plugs in a device, the system looks for the service objects that best match the device’s capabilities. Apple’s built-in driver families support most device types and a large array of standard interfaces. You provide custom service objects to support your device’s custom behaviors.\n\nIn most cases, you subclass a child of [doc:\/\/com.apple.driverkit\/documentation\/DriverKit\/IOService] such as [doc:\/\/com.apple.documentation\/documentation\/USBDriverKit\/IOUSBHostInterface], instead of [doc:\/\/com.apple.driverkit\/documentation\/DriverKit\/IOService] itself. Use the methods of this class to do the following:\n\n- Handle the initialization, setup, and teardown of your driver.\n- View and manage the I\/O Registry entry for the device or interface.\n- Configure the dispatch queue on which to execute your code.\n- Respond to power-level changes\n\nFor additional information about how to implement services for a particular type of device, see the service subclasses in [doc:\/\/com.apple.documentation\/documentation\/HIDDriverKit], [doc:\/\/com.apple.documentation\/documentation\/USBDriverKit], [doc:\/\/com.apple.documentation\/documentation\/NetworkingDriverKit], [doc:\/\/com.apple.documentation\/documentation\/SerialDriverKit], and [doc:\/\/com.apple.documentation\/documentation\/USBSerialDriverKit].\n\n### Adding Member Variables to Your Custom Subclass\n\nDon’t declare custom member variables directly in your [doc:\/\/com.apple.driverkit\/documentation\/DriverKit\/IOService] subclass. Instead, DriverKit requires you to define all variables in a separate structure. During initialization, allocate a block of memory for that structure and assign that block to the system-provided `ivars` variable of your service class. The following code example shows you how to define the structure and allocate it in the [doc:\/\/com.apple.driverkit\/documentation\/DriverKit\/IOService\/init] method of your service class.\n\n```objc\nstruct MyCustomKeyboardDriver_IVars\n{\n    OSArray *elements;\n    \n    struct {\n        OSArray *elements;\n    } keyboard;\n};\n\nbool MyCustomKeyboardDriver::init()\n{\n   if (!super::init()) {return false;}\n    \n   \/\/ Allocate memory for the instance variables.\n   ivars = IONewZero(MyCustomKeyboardDriver_IVars, 1);\n   if (!ivars) {return false;}\n    \nexit:\n   return true;\n}\n\n```\n\nDeallocate any memory that you allocate for your custom variables in the [doc:\/\/com.apple.driverkit\/documentation\/DriverKit\/IOService\/free] method of your class.\n\n## Running the Service\n\n- **init**: Handles the basic initialization of the service.\n- **Start**: Starts the current service and associates it with the specified provider.\n- **Stop**: Stops the service associated with the specified provider.\n- **free**: Performs any final cleanup for the service.\n\n## Registering the Service with IOKit\n\n- **RegisterService**: Starts the registration process for the service and performs any additional matching.\n- **SetName**: Sets the name of the service in the system’s registry.\n- **GetRegistryEntryID**: Returns the registry ID for the current service.\n- **IOServiceName**: A string type for setting the name of the service in the system’s registry.\n\n## Managing the Registry Properties\n\n- **CopyProperties**: Returns the registry properties associated with the current service.\n- **SetProperties**: Sends the dictionary of properties to the current service object.\n- **SearchProperty**: Searches for a property with the specified name in the current service or one of its parent services, and returns the corresponding value.\n- **IOPropertyName**: A string type for specifying the name of a property in the system’s registry.\n- **IORegistryPlaneName**: A string type for specifying the name of a plane in the system’s registry.\n- **Search Options**: Options to apply when searching for registry properties.\n\n## Configuring Additional Dispatch Queues\n\n- **SetDispatchQueue**: Associates a custom dispatch queue with the service and assigns the specified name to it.\n- **CopyDispatchQueue**: Gets the dispatch queue with the specified name from the current service.\n\n## Responding to Power-Level Changes\n\n- **SetPowerState**: Updates the service in response to power-related changes for a provider.\n- **ChangePowerState**: Changes the device’s power state to the specified level.\n- **Service Power Capabilities**: Constants that indicate the power state of a device.\n\n## Creating a New Service\n\n- **NewUserClient**: Requests the creation of a new user client for the service.\n- **Create**: Requests the creation of a new service object.\n\n## Instance Methods\n\n- **AdjustBusy**\n- **ClientCrashed**\n- **ConfigureReport**\n- **CopyName**\n- **CopyProviderProperties**\n- **CopySystemStateNotificationService**\n- **CoreAnalyticsSendEvent**\n- **CreateDefaultDispatchQueue**\n- **GetBusyState**\n- **GetProvider**\n- **JoinPMTree**\n- **RemoveProperty**\n- **RequireMaxBusStall**\n- **SetLegend**\n- **SetPowerOverride**\n- **StateNotificationItemCopy**\n- **StateNotificationItemCreate**\n- **StateNotificationItemSet**\n- **Stop_async**\n- **StringFromReturn**\n- **Terminate**\n- **UpdateReport**\n- **CreatePMAssertion**\n- **ReleasePMAssertion**\n\n## Type Methods\n\n- **CreateKernelClassMatchingDictionary**\n- **CreateKernelClassMatchingDictionary**\n- **CreateNameMatchingDictionary**\n- **CreateNameMatchingDictionary**\n- **CreatePropertyMatchingDictionary**\n- **CreatePropertyMatchingDictionary**\n- **CreateUserClassMatchingDictionary**\n- **CreateUserClassMatchingDictionary**\n\n## Services\n\n- **Creating a Driver Using the DriverKit SDK**: Create a driver that supports proprietary features of your company’s hardware devices.\n- **Debugging and testing system extensions**: Debug your system extensions by temporarily disabling the security checks that macOS performs during the installation process.\n\n## Inherits From\n\n- OSObject\n\n## Inherited By\n\n- IOUserClient\n- IOUserServer\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Handles the basic initialization of the service.",
          "name" : "init",
          "url" : "https:\/\/developer.apple.com\/documentation\/DriverKit\/IOService\/init"
        },
        {
          "description" : "Starts the current service and associates it with the specified provider.",
          "name" : "Start",
          "url" : "https:\/\/developer.apple.com\/documentation\/DriverKit\/IOService\/Start"
        },
        {
          "description" : "Stops the service associated with the specified provider.",
          "name" : "Stop",
          "url" : "https:\/\/developer.apple.com\/documentation\/DriverKit\/IOService\/Stop"
        },
        {
          "description" : "Performs any final cleanup for the service.",
          "name" : "free",
          "url" : "https:\/\/developer.apple.com\/documentation\/DriverKit\/IOService\/free"
        }
      ],
      "title" : "Running the Service"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Starts the registration process for the service and performs any additional matching.",
          "name" : "RegisterService",
          "url" : "https:\/\/developer.apple.com\/documentation\/DriverKit\/IOService\/RegisterService"
        },
        {
          "description" : "Sets the name of the service in the system’s registry.",
          "name" : "SetName",
          "url" : "https:\/\/developer.apple.com\/documentation\/DriverKit\/IOService\/SetName"
        },
        {
          "description" : "Returns the registry ID for the current service.",
          "name" : "GetRegistryEntryID",
          "url" : "https:\/\/developer.apple.com\/documentation\/DriverKit\/IOService\/GetRegistryEntryID"
        },
        {
          "description" : "A string type for setting the name of the service in the system’s registry.",
          "name" : "IOServiceName",
          "url" : "https:\/\/developer.apple.com\/documentation\/DriverKit\/IOServiceName"
        }
      ],
      "title" : "Registering the Service with IOKit"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Returns the registry properties associated with the current service.",
          "name" : "CopyProperties",
          "url" : "https:\/\/developer.apple.com\/documentation\/DriverKit\/IOService\/CopyProperties"
        },
        {
          "description" : "Sends the dictionary of properties to the current service object.",
          "name" : "SetProperties",
          "url" : "https:\/\/developer.apple.com\/documentation\/DriverKit\/IOService\/SetProperties"
        },
        {
          "description" : "Searches for a property with the specified name in the current service or one of its parent services, and returns the corresponding value.",
          "name" : "SearchProperty",
          "url" : "https:\/\/developer.apple.com\/documentation\/DriverKit\/IOService\/SearchProperty"
        },
        {
          "description" : "A string type for specifying the name of a property in the system’s registry.",
          "name" : "IOPropertyName",
          "url" : "https:\/\/developer.apple.com\/documentation\/DriverKit\/IOPropertyName"
        },
        {
          "description" : "A string type for specifying the name of a plane in the system’s registry.",
          "name" : "IORegistryPlaneName",
          "url" : "https:\/\/developer.apple.com\/documentation\/DriverKit\/IORegistryPlaneName"
        },
        {
          "description" : "Options to apply when searching for registry properties.",
          "name" : "Search Options",
          "url" : "https:\/\/developer.apple.com\/documentation\/DriverKit\/3325572-search_options"
        }
      ],
      "title" : "Managing the Registry Properties"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Associates a custom dispatch queue with the service and assigns the specified name to it.",
          "name" : "SetDispatchQueue",
          "url" : "https:\/\/developer.apple.com\/documentation\/DriverKit\/IOService\/SetDispatchQueue"
        },
        {
          "description" : "Gets the dispatch queue with the specified name from the current service.",
          "name" : "CopyDispatchQueue",
          "url" : "https:\/\/developer.apple.com\/documentation\/DriverKit\/IOService\/CopyDispatchQueue"
        }
      ],
      "title" : "Configuring Additional Dispatch Queues"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Updates the service in response to power-related changes for a provider.",
          "name" : "SetPowerState",
          "url" : "https:\/\/developer.apple.com\/documentation\/DriverKit\/IOService\/SetPowerState"
        },
        {
          "description" : "Changes the device’s power state to the specified level.",
          "name" : "ChangePowerState",
          "url" : "https:\/\/developer.apple.com\/documentation\/DriverKit\/IOService\/ChangePowerState"
        },
        {
          "description" : "Constants that indicate the power state of a device.",
          "name" : "Service Power Capabilities",
          "url" : "https:\/\/developer.apple.com\/documentation\/DriverKit\/3325571-service_power_capabilities"
        }
      ],
      "title" : "Responding to Power-Level Changes"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Requests the creation of a new user client for the service.",
          "name" : "NewUserClient",
          "url" : "https:\/\/developer.apple.com\/documentation\/DriverKit\/IOService\/NewUserClient"
        },
        {
          "description" : "Requests the creation of a new service object.",
          "name" : "Create",
          "url" : "https:\/\/developer.apple.com\/documentation\/DriverKit\/IOService\/Create"
        }
      ],
      "title" : "Creating a New Service"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "",
          "name" : "AdjustBusy",
          "url" : "https:\/\/developer.apple.com\/documentation\/DriverKit\/IOService\/AdjustBusy"
        },
        {
          "description" : "",
          "name" : "ClientCrashed",
          "url" : "https:\/\/developer.apple.com\/documentation\/DriverKit\/IOService\/ClientCrashed"
        },
        {
          "description" : "",
          "name" : "ConfigureReport",
          "url" : "https:\/\/developer.apple.com\/documentation\/DriverKit\/IOService\/ConfigureReport"
        },
        {
          "description" : "",
          "name" : "CopyName",
          "url" : "https:\/\/developer.apple.com\/documentation\/DriverKit\/IOService\/CopyName"
        },
        {
          "description" : "",
          "name" : "CopyProviderProperties",
          "url" : "https:\/\/developer.apple.com\/documentation\/DriverKit\/IOService\/CopyProviderProperties"
        },
        {
          "description" : "",
          "name" : "CopySystemStateNotificationService",
          "url" : "https:\/\/developer.apple.com\/documentation\/DriverKit\/IOService\/CopySystemStateNotificationService"
        },
        {
          "description" : "",
          "name" : "CoreAnalyticsSendEvent",
          "url" : "https:\/\/developer.apple.com\/documentation\/DriverKit\/IOService\/CoreAnalyticsSendEvent"
        },
        {
          "description" : "",
          "name" : "CreateDefaultDispatchQueue",
          "url" : "https:\/\/developer.apple.com\/documentation\/DriverKit\/IOService\/CreateDefaultDispatchQueue"
        },
        {
          "description" : "",
          "name" : "GetBusyState",
          "url" : "https:\/\/developer.apple.com\/documentation\/DriverKit\/IOService\/GetBusyState"
        },
        {
          "description" : "",
          "name" : "GetProvider",
          "url" : "https:\/\/developer.apple.com\/documentation\/DriverKit\/IOService\/GetProvider"
        },
        {
          "description" : "",
          "name" : "JoinPMTree",
          "url" : "https:\/\/developer.apple.com\/documentation\/DriverKit\/IOService\/JoinPMTree"
        },
        {
          "description" : "",
          "name" : "RemoveProperty",
          "url" : "https:\/\/developer.apple.com\/documentation\/DriverKit\/IOService\/RemoveProperty"
        },
        {
          "description" : "",
          "name" : "RequireMaxBusStall",
          "url" : "https:\/\/developer.apple.com\/documentation\/DriverKit\/IOService\/RequireMaxBusStall"
        },
        {
          "description" : "",
          "name" : "SetLegend",
          "url" : "https:\/\/developer.apple.com\/documentation\/DriverKit\/IOService\/SetLegend"
        },
        {
          "description" : "",
          "name" : "SetPowerOverride",
          "url" : "https:\/\/developer.apple.com\/documentation\/DriverKit\/IOService\/SetPowerOverride"
        },
        {
          "description" : "",
          "name" : "StateNotificationItemCopy",
          "url" : "https:\/\/developer.apple.com\/documentation\/DriverKit\/IOService\/StateNotificationItemCopy"
        },
        {
          "description" : "",
          "name" : "StateNotificationItemCreate",
          "url" : "https:\/\/developer.apple.com\/documentation\/DriverKit\/IOService\/StateNotificationItemCreate"
        },
        {
          "description" : "",
          "name" : "StateNotificationItemSet",
          "url" : "https:\/\/developer.apple.com\/documentation\/DriverKit\/IOService\/StateNotificationItemSet"
        },
        {
          "description" : "",
          "name" : "Stop_async",
          "url" : "https:\/\/developer.apple.com\/documentation\/DriverKit\/IOService\/Stop_async"
        },
        {
          "description" : "",
          "name" : "StringFromReturn",
          "url" : "https:\/\/developer.apple.com\/documentation\/DriverKit\/IOService\/StringFromReturn"
        },
        {
          "description" : "",
          "name" : "Terminate",
          "url" : "https:\/\/developer.apple.com\/documentation\/DriverKit\/IOService\/Terminate"
        },
        {
          "description" : "",
          "name" : "UpdateReport",
          "url" : "https:\/\/developer.apple.com\/documentation\/DriverKit\/IOService\/UpdateReport"
        },
        {
          "description" : "",
          "name" : "CreatePMAssertion",
          "url" : "https:\/\/developer.apple.com\/documentation\/DriverKit\/IOService\/CreatePMAssertion"
        },
        {
          "description" : "",
          "name" : "ReleasePMAssertion",
          "url" : "https:\/\/developer.apple.com\/documentation\/DriverKit\/IOService\/ReleasePMAssertion"
        }
      ],
      "title" : "Instance Methods"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "",
          "name" : "CreateKernelClassMatchingDictionary",
          "url" : "https:\/\/developer.apple.com\/documentation\/DriverKit\/IOService\/CreateKernelClassMatchingDictionary-9b28"
        },
        {
          "description" : "",
          "name" : "CreateKernelClassMatchingDictionary",
          "url" : "https:\/\/developer.apple.com\/documentation\/DriverKit\/IOService\/CreateKernelClassMatchingDictionary-3uqly"
        },
        {
          "description" : "",
          "name" : "CreateNameMatchingDictionary",
          "url" : "https:\/\/developer.apple.com\/documentation\/DriverKit\/IOService\/CreateNameMatchingDictionary-2nzta"
        },
        {
          "description" : "",
          "name" : "CreateNameMatchingDictionary",
          "url" : "https:\/\/developer.apple.com\/documentation\/DriverKit\/IOService\/CreateNameMatchingDictionary-206ej"
        },
        {
          "description" : "",
          "name" : "CreatePropertyMatchingDictionary",
          "url" : "https:\/\/developer.apple.com\/documentation\/DriverKit\/IOService\/CreatePropertyMatchingDictionary-4tuca"
        },
        {
          "description" : "",
          "name" : "CreatePropertyMatchingDictionary",
          "url" : "https:\/\/developer.apple.com\/documentation\/DriverKit\/IOService\/CreatePropertyMatchingDictionary-6o4ss"
        },
        {
          "description" : "",
          "name" : "CreateUserClassMatchingDictionary",
          "url" : "https:\/\/developer.apple.com\/documentation\/DriverKit\/IOService\/CreateUserClassMatchingDictionary-4gpbj"
        },
        {
          "description" : "",
          "name" : "CreateUserClassMatchingDictionary",
          "url" : "https:\/\/developer.apple.com\/documentation\/DriverKit\/IOService\/CreateUserClassMatchingDictionary-60ptx"
        }
      ],
      "title" : "Type Methods"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Create a driver that supports proprietary features of your company’s hardware devices.",
          "name" : "Creating a Driver Using the DriverKit SDK",
          "url" : "https:\/\/developer.apple.com\/documentation\/DriverKit\/creating-a-driver-using-the-driverkit-sdk"
        },
        {
          "description" : "Debug your system extensions by temporarily disabling the security checks that macOS performs during the installation process.",
          "name" : "Debugging and testing system extensions",
          "url" : "https:\/\/developer.apple.com\/documentation\/DriverKit\/debugging-and-testing-system-extensions"
        }
      ],
      "title" : "Services"
    },
    {
      "content" : "",
      "items" : [
        {
          "name" : "OSObject"
        }
      ],
      "title" : "Inherits From"
    }
  ],
  "source" : "appleJSON",
  "title" : "IOService",
  "url" : "https:\/\/developer.apple.com\/documentation\/driverkit\/ioservice"
}