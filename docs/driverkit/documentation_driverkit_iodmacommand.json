{
  "abstract" : "An object that converts memory references to I\/O bus addresses.",
  "codeExamples" : [

  ],
  "contentHash" : "ce19dfe1cb4428a44587ab8c13e1aba2c9a94cd54902984fb803c554303d65a3",
  "crawledAt" : "2025-12-04T07:33:38Z",
  "declaration" : {
    "code" : "class IODMACommand;",
    "language" : "swift"
  },
  "id" : "B5685112-CBEC-40D9-8C0F-A4A39496971A",
  "kind" : "class",
  "language" : "occ",
  "module" : "DriverKit",
  "overview" : "## Overview\n\nThe [doc:\/\/com.apple.driverkit\/documentation\/DriverKit\/IODMACommand] class supersedes [doc:\/\/com.apple.documentation\/documentation\/kernel\/iomemorycursor] and greatly enhances the functionality and power of it. The command can be specified to output 64 bit physical addresses and also allows driver writers to bypass mapping hardware or get addresses suitable for non-snooped DMA.\n\nThe command is designed to be very easily subclassable. Most driver writers need to associate some DMA operations with their memory descriptor, and usually use a C structure for that purpose. This structure is often kept in a linked list. This [doc:\/\/com.apple.driverkit\/documentation\/DriverKit\/IODMACommand] has built-in `<kern\/queue.h>` linkage and can be derived and ‘public:’ variables added, giving the developer a structure that can associate a memory descriptor with a particular DMA command but will also allow the developer to generate that command and keep the state necessary for tracking it.\n\nCreate a pool of [doc:\/\/com.apple.driverkit\/documentation\/DriverKit\/IODMACommand] objects at driver initialization, and keep each command in an [doc:\/\/com.apple.driverkit\/documentation\/DriverKit\/IOCommandPool] when not in use. You may also maintain your own free list of objects if preferred. See the `<kern\/queue.h>` and `<xnu\/iokit\/Kernel\/IOCommandPool>` for sample code on manipulating the command’s doubly linked list entries.\n\nYou can use an [doc:\/\/com.apple.driverkit\/documentation\/DriverKit\/IODMACommand] object in a ‘weak-linked’ manner. To do this you must avoid using any static member functions. Use the much slower, but safe, [doc:\/\/com.apple.documentation\/documentation\/kernel\/1547721-weakwithspecification] function. On success, the function returns a DMA command object, which you can use to clone as many commands as needed.",
  "platforms" : [
    "Unsupported OS: driverkit"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/driverkit\/iodmacommand\ncrawled: 2025-12-04T07:33:38Z\n---\n\n# IODMACommand\n\n**Class**\n\nAn object that converts memory references to I\/O bus addresses.\n\n## Declaration\n\n```swift\nclass IODMACommand;\n```\n\n## Overview\n\nThe [doc:\/\/com.apple.driverkit\/documentation\/DriverKit\/IODMACommand] class supersedes [doc:\/\/com.apple.documentation\/documentation\/kernel\/iomemorycursor] and greatly enhances the functionality and power of it. The command can be specified to output 64 bit physical addresses and also allows driver writers to bypass mapping hardware or get addresses suitable for non-snooped DMA.\n\nThe command is designed to be very easily subclassable. Most driver writers need to associate some DMA operations with their memory descriptor, and usually use a C structure for that purpose. This structure is often kept in a linked list. This [doc:\/\/com.apple.driverkit\/documentation\/DriverKit\/IODMACommand] has built-in `<kern\/queue.h>` linkage and can be derived and ‘public:’ variables added, giving the developer a structure that can associate a memory descriptor with a particular DMA command but will also allow the developer to generate that command and keep the state necessary for tracking it.\n\nCreate a pool of [doc:\/\/com.apple.driverkit\/documentation\/DriverKit\/IODMACommand] objects at driver initialization, and keep each command in an [doc:\/\/com.apple.driverkit\/documentation\/DriverKit\/IOCommandPool] when not in use. You may also maintain your own free list of objects if preferred. See the `<kern\/queue.h>` and `<xnu\/iokit\/Kernel\/IOCommandPool>` for sample code on manipulating the command’s doubly linked list entries.\n\nYou can use an [doc:\/\/com.apple.driverkit\/documentation\/DriverKit\/IODMACommand] object in a ‘weak-linked’ manner. To do this you must avoid using any static member functions. Use the much slower, but safe, [doc:\/\/com.apple.documentation\/documentation\/kernel\/1547721-weakwithspecification] function. On success, the function returns a DMA command object, which you can use to clone as many commands as needed.\n\n## Creating a DMA Command\n\n- **init**\n- **free**\n- **Create**\n\n## Performing Internal Operations\n\n- **CompleteDMA**\n- **GetPreparation**\n- **PerformOperation**\n- **PrepareForDMA**\n\n## Data Types\n\n- **IOCallOnceBlock**\n- **IOCallOnceFlag**\n- **IOCommand**\n- **IOCommandPool**\n- **IOCommandPoolPtr**\n- **IOCommandPtr**\n- **IODMACommandSpecification**\n- **IODispatchAction**\n- **IOHistogramReporter_IVars**\n- **IOReportLegendEntry**\n- **IOReporter_IVars**\n- **IOSimpleReporter_IVars**\n- **IOStateReporter_IVars**\n- **IOStateReporter_valueSelector**\n- **IVarsInvalidator**\n\n## Inherits From\n\n- OSObject\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "",
          "name" : "init",
          "url" : "https:\/\/developer.apple.com\/documentation\/DriverKit\/IODMACommand\/init"
        },
        {
          "description" : "",
          "name" : "free",
          "url" : "https:\/\/developer.apple.com\/documentation\/DriverKit\/IODMACommand\/free"
        },
        {
          "description" : "",
          "name" : "Create",
          "url" : "https:\/\/developer.apple.com\/documentation\/DriverKit\/IODMACommand\/Create"
        }
      ],
      "title" : "Creating a DMA Command"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "",
          "name" : "CompleteDMA",
          "url" : "https:\/\/developer.apple.com\/documentation\/DriverKit\/IODMACommand\/CompleteDMA"
        },
        {
          "description" : "",
          "name" : "GetPreparation",
          "url" : "https:\/\/developer.apple.com\/documentation\/DriverKit\/IODMACommand\/GetPreparation"
        },
        {
          "description" : "",
          "name" : "PerformOperation",
          "url" : "https:\/\/developer.apple.com\/documentation\/DriverKit\/IODMACommand\/PerformOperation"
        },
        {
          "description" : "",
          "name" : "PrepareForDMA",
          "url" : "https:\/\/developer.apple.com\/documentation\/DriverKit\/IODMACommand\/PrepareForDMA"
        }
      ],
      "title" : "Performing Internal Operations"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "",
          "name" : "IOCallOnceBlock",
          "url" : "https:\/\/developer.apple.com\/documentation\/DriverKit\/IOCallOnceBlock"
        },
        {
          "description" : "",
          "name" : "IOCallOnceFlag",
          "url" : "https:\/\/developer.apple.com\/documentation\/DriverKit\/IOCallOnceFlag"
        },
        {
          "description" : "",
          "name" : "IOCommand",
          "url" : "https:\/\/developer.apple.com\/documentation\/DriverKit\/IOCommand"
        },
        {
          "description" : "",
          "name" : "IOCommandPool",
          "url" : "https:\/\/developer.apple.com\/documentation\/DriverKit\/IOCommandPool"
        },
        {
          "description" : "",
          "name" : "IOCommandPoolPtr",
          "url" : "https:\/\/developer.apple.com\/documentation\/DriverKit\/IOCommandPoolPtr"
        },
        {
          "description" : "",
          "name" : "IOCommandPtr",
          "url" : "https:\/\/developer.apple.com\/documentation\/DriverKit\/IOCommandPtr"
        },
        {
          "description" : "",
          "name" : "IODMACommandSpecification",
          "url" : "https:\/\/developer.apple.com\/documentation\/DriverKit\/IODMACommandSpecification"
        },
        {
          "description" : "",
          "name" : "IODispatchAction",
          "url" : "https:\/\/developer.apple.com\/documentation\/DriverKit\/IODispatchAction"
        },
        {
          "description" : "",
          "name" : "IOHistogramReporter_IVars",
          "url" : "https:\/\/developer.apple.com\/documentation\/DriverKit\/IOHistogramReporter_IVars"
        },
        {
          "description" : "",
          "name" : "IOReportLegendEntry",
          "url" : "https:\/\/developer.apple.com\/documentation\/DriverKit\/IOReportLegendEntry"
        },
        {
          "description" : "",
          "name" : "IOReporter_IVars",
          "url" : "https:\/\/developer.apple.com\/documentation\/DriverKit\/IOReporter_IVars"
        },
        {
          "description" : "",
          "name" : "IOSimpleReporter_IVars",
          "url" : "https:\/\/developer.apple.com\/documentation\/DriverKit\/IOSimpleReporter_IVars"
        },
        {
          "description" : "",
          "name" : "IOStateReporter_IVars",
          "url" : "https:\/\/developer.apple.com\/documentation\/DriverKit\/IOStateReporter_IVars"
        },
        {
          "description" : "",
          "name" : "IOStateReporter_valueSelector",
          "url" : "https:\/\/developer.apple.com\/documentation\/DriverKit\/IOStateReporter_valueSelector"
        },
        {
          "description" : "",
          "name" : "IVarsInvalidator",
          "url" : "https:\/\/developer.apple.com\/documentation\/DriverKit\/IVarsInvalidator"
        }
      ],
      "title" : "Data Types"
    },
    {
      "content" : "",
      "items" : [
        {
          "name" : "OSObject"
        }
      ],
      "title" : "Inherits From"
    }
  ],
  "source" : "appleJSON",
  "title" : "IODMACommand",
  "url" : "https:\/\/developer.apple.com\/documentation\/driverkit\/iodmacommand"
}