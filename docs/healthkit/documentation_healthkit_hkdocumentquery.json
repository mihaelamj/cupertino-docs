{
  "abstract" : "A query that returns a snapshot of all matching documents currently saved in the HealthKit store.",
  "codeExamples" : [
    {
      "code" : "guard let cdaType = HKObjectType.documentType(forIdentifier: .CDA) else {\n    fatalError(\"Unable to create a CDA document type.\")\n}\n \nvar allDocuments = [HKDocumentSample]()\nlet cdaQuery = HKDocumentQuery(documentType: cdaType,\n                               predicate: nil,\n                               limit: HKObjectQueryNoLimit,\n                               sortDescriptors: nil,\n                               includeDocumentData: false) {\n                                \n                                (query, resultsOrNil, done, errorOrNil) in\n                                \n                                guard let results = resultsOrNil else {\n                                    if let queryError = errorOrNil {\n                                        \/\/ Handle the query error here...\n                                    }\n                                    \n                                    return\n                                }\n                                \n                                allDocuments += results\n                                \n                                if done {\n                                    \/\/ the allDocuments array now contains all the samples returned by the query.\n                                    \/\/ Handle the documents here...\n                                }\n}",
      "language" : "swift"
    }
  ],
  "conformsTo" : [
    "CVarArg",
    "CustomDebugStringConvertible",
    "CustomStringConvertible",
    "Equatable",
    "Hashable",
    "NSObjectProtocol",
    "Sendable",
    "SendableMetatype"
  ],
  "contentHash" : "7d513d6bd7bde431e5331a63b92071a176cca8a31cb867ab59d673ed20dc1311",
  "crawledAt" : "2025-12-02T18:11:47Z",
  "declaration" : {
    "code" : "class HKDocumentQuery",
    "language" : "swift"
  },
  "id" : "4D8FE0A3-072D-4523-8A88-E97B0EB64A9D",
  "kind" : "class",
  "language" : "swift",
  "module" : "HealthKit",
  "overview" : "## Overview\n\nUse an `HKDocumentQuery` object to search for documents in the HealthKit store. You can provide a predicate to filter the search results, a sort order for the returned samples, or even a limit to the number of samples returned.\n\nDocument queries are immutable: The query’s properties are set when the query is first created. They cannot change.\n\n### Executing Queries\n\nTo create and execute a query, perform the following steps:\n\nNote, the query returns the results in batches and may call the results handler more than once. If the `done` parameter is set to [doc:\/\/com.apple.documentation\/documentation\/Swift\/false], the query is still active and will call the results handler with additional results. If the `done` parameter is set to [doc:\/\/com.apple.documentation\/documentation\/Swift\/true], the query is complete.\n\n### Subclassing Document Queries\n\nLike many HealthKit classes, the `HKDocumentQuery` class should not be subclassed.",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "visionOS",
    "watchOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/HealthKit\/HKDocumentQuery\ncrawled: 2025-12-02T18:11:47Z\n---\n\n# HKDocumentQuery\n\n**Class**\n\nA query that returns a snapshot of all matching documents currently saved in the HealthKit store.\n\n## Declaration\n\n```swift\nclass HKDocumentQuery\n```\n\n## Overview\n\nUse an `HKDocumentQuery` object to search for documents in the HealthKit store. You can provide a predicate to filter the search results, a sort order for the returned samples, or even a limit to the number of samples returned.\n\nDocument queries are immutable: The query’s properties are set when the query is first created. They cannot change.\n\n### Executing Queries\n\nTo create and execute a query, perform the following steps:\n\n1. Create the document type by calling the [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKObjectType] class’s [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKObjectType\/documentType(forIdentifier:)] method.\n2. (optionally) Create an [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSPredicate] object to filter the search results.\n3. (optionally) Create an array of [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSSortDescriptor] objects to provide the sort order for the results.\n4. Instantiate a new query by calling the [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKDocumentQuery\/init(documentType:predicate:limit:sortDescriptors:includeDocumentData:resultsHandler:)] method.\n5. In the results handler, handle any errors and process the results.\n\nNote, the query returns the results in batches and may call the results handler more than once. If the `done` parameter is set to [doc:\/\/com.apple.documentation\/documentation\/Swift\/false], the query is still active and will call the results handler with additional results. If the `done` parameter is set to [doc:\/\/com.apple.documentation\/documentation\/Swift\/true], the query is complete.\n\n```swift\nguard let cdaType = HKObjectType.documentType(forIdentifier: .CDA) else {\n    fatalError(\"Unable to create a CDA document type.\")\n}\n \nvar allDocuments = [HKDocumentSample]()\nlet cdaQuery = HKDocumentQuery(documentType: cdaType,\n                               predicate: nil,\n                               limit: HKObjectQueryNoLimit,\n                               sortDescriptors: nil,\n                               includeDocumentData: false) {\n                                \n                                (query, resultsOrNil, done, errorOrNil) in\n                                \n                                guard let results = resultsOrNil else {\n                                    if let queryError = errorOrNil {\n                                        \/\/ Handle the query error here...\n                                    }\n                                    \n                                    return\n                                }\n                                \n                                allDocuments += results\n                                \n                                if done {\n                                    \/\/ the allDocuments array now contains all the samples returned by the query.\n                                    \/\/ Handle the documents here...\n                                }\n}\n```\n\n### Subclassing Document Queries\n\nLike many HealthKit classes, the `HKDocumentQuery` class should not be subclassed.\n\n## Creating Document Queries\n\n- **init(documentType:predicate:limit:sortDescriptors:includeDocumentData:resultsHandler:)**: Instantiates and returns a document query.\n- **HKObjectQueryNoLimit**: A value indicating that the query returns all the matching samples in the HealthKit store.\n\n## Accessing the Document Query’s Properties\n\n- **includeDocumentData**: A Boolean value that indicates whether the sample includes the full document’s data.\n- **limit**: The maximum number of documents the receiver will return upon completion.\n- **sortDescriptors**: An array of sort descriptors that specify the order of the results returned by this query.\n\n## Clinical record queries\n\n- **HKVerifiableClinicalRecordQueryDescriptor**: A query interface that provides one-time access to a SMART Health Card or EU Digital COVID Certificate using Swift concurrency.\n- **HKVerifiableClinicalRecordQuery**: A query for one-time access to a SMART Health Card or EU Digital COVID Certificate.\n- **HKVerifiableClinicalRecordSourceType**: The source type for the verifiable clinical record.\n- **HKVerifiableClinicalRecordCredentialType**: The type of record returned by a verifiable clinical record query.\n\n## Inherits From\n\n- HKQuery\n\n## Conforms To\n\n- CVarArg\n- CustomDebugStringConvertible\n- CustomStringConvertible\n- Equatable\n- Hashable\n- NSObjectProtocol\n- Sendable\n- SendableMetatype\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Instantiates and returns a document query.",
          "name" : "init(documentType:predicate:limit:sortDescriptors:includeDocumentData:resultsHandler:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKDocumentQuery\/init(documentType:predicate:limit:sortDescriptors:includeDocumentData:resultsHandler:)"
        },
        {
          "description" : "A value indicating that the query returns all the matching samples in the HealthKit store.",
          "name" : "HKObjectQueryNoLimit",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKObjectQueryNoLimit"
        }
      ],
      "title" : "Creating Document Queries"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "A Boolean value that indicates whether the sample includes the full document’s data.",
          "name" : "includeDocumentData",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKDocumentQuery\/includeDocumentData"
        },
        {
          "description" : "The maximum number of documents the receiver will return upon completion.",
          "name" : "limit",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKDocumentQuery\/limit"
        },
        {
          "description" : "An array of sort descriptors that specify the order of the results returned by this query.",
          "name" : "sortDescriptors",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKDocumentQuery\/sortDescriptors"
        }
      ],
      "title" : "Accessing the Document Query’s Properties"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "A query interface that provides one-time access to a SMART Health Card or EU Digital COVID Certificate using Swift concurrency.",
          "name" : "HKVerifiableClinicalRecordQueryDescriptor",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKVerifiableClinicalRecordQueryDescriptor"
        },
        {
          "description" : "A query for one-time access to a SMART Health Card or EU Digital COVID Certificate.",
          "name" : "HKVerifiableClinicalRecordQuery",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKVerifiableClinicalRecordQuery"
        },
        {
          "description" : "The source type for the verifiable clinical record.",
          "name" : "HKVerifiableClinicalRecordSourceType",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKVerifiableClinicalRecordSourceType"
        },
        {
          "description" : "The type of record returned by a verifiable clinical record query.",
          "name" : "HKVerifiableClinicalRecordCredentialType",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKVerifiableClinicalRecordCredentialType"
        }
      ],
      "title" : "Clinical record queries"
    },
    {
      "content" : "",
      "items" : [
        {
          "name" : "HKQuery"
        }
      ],
      "title" : "Inherits From"
    }
  ],
  "source" : "appleJSON",
  "title" : "HKDocumentQuery",
  "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKDocumentQuery"
}