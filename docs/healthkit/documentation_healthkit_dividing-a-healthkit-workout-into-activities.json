{
  "abstract" : "Partition multisport and interval workouts into activities that represent the different parts of the workout.",
  "codeExamples" : [
    {
      "code" : "\/\/ Create the workout configuration for a multisport workout.\nlet configuration = HKWorkoutConfiguration()\nconfiguration.activityType = .swimBikeRun\nconfiguration.locationType = .outdoor\n\n\/\/ Create the workout session.\nsession = try HKWorkoutSession(healthStore: store,\n                               configuration: configuration)\n\n\/\/ Start the session and the workout builder.\nlet startDate = Date()\nsession.startActivity(with: startDate)\nworkoutBuilder = session.associatedWorkoutBuilder()\n\n\/\/ Set the workout builder's data source.\nworkoutBuilder.dataSource =\nHKLiveWorkoutDataSource(healthStore: store,\n                        workoutConfiguration: configuration)\n\n\/\/ Start collecting data.\ntry await workoutBuilder.beginCollection(at: startDate)",
      "language" : "swift"
    },
    {
      "code" : "\/\/ Start the swimming activity.\nlet swimmingConfiguration = HKWorkoutConfiguration()\nswimmingConfiguration.activityType = .swimming\nswimmingConfiguration.locationType = .outdoor\nswimmingConfiguration.swimmingLocationType = .openWater\n\nsession.beginNewActivity(configuration: swimmingConfiguration,\n                         date: Date(),\n                         metadata: nil)",
      "language" : "swift"
    },
    {
      "code" : "\/\/ End the activity.\nsession.endCurrentActivity(on: Date())",
      "language" : "swift"
    },
    {
      "code" : "\/\/ Explicitly track the transition between activities.\nlet transitionConfiguration = HKWorkoutConfiguration()\ntransitionConfiguration.activityType = .transition\ntransitionConfiguration.locationType = .outdoor\n\nsession.beginNewActivity(configuration: transitionConfiguration,\n                         date: Date(),\n                         metadata: nil)",
      "language" : "swift"
    },
    {
      "code" : "\/\/ Ending the session also ends the current activity.\nsession.end()\n\n\/\/ Finishing the workout saves the workout\n\/\/ and returns an HKWorkout object that you can use to display summary data.\nlet workout = try await workoutBuilder.finishWorkout()\n\n\/\/ Do something with the workout here.\nprint(workout as Any)",
      "language" : "swift"
    },
    {
      "code" : "\/\/ Enable the collection of respiratory rate.\nguard let dataSource = session.associatedWorkoutBuilder().dataSource else {\n    print(\"*** No data source found! ***\")\n    return }\n\nlet respiratoryRate = HKQuantityType(.respiratoryRate)\ndataSource.enableCollection(for: respiratoryRate, predicate: nil)",
      "language" : "swift"
    },
    {
      "code" : "\/\/ Disable the collection of respiratory rate.\nguard let dataSource = session.associatedWorkoutBuilder().dataSource else {\n    print(\"*** No data source found! ***\")\n    return }\n\nlet respiratoryRate = HKQuantityType(.respiratoryRate)\ndataSource.disableCollection(for: respiratoryRate)",
      "language" : "swift"
    },
    {
      "code" : "\/\/ Create a predicate for an average heart rate of greater than 150 bpm.\nlet highHeartRate = HKQuantity(unit: .count(), doubleValue: 150.0)\nlet heartRateType = HKQuantityType(.heartRate)\n\nlet heartRatePredicate =\nHKQuery.predicateForWorkoutActivities(operatorType: .greaterThan,\n                                      quantityType: heartRateType,\n                                      averageQuantity: highHeartRate)\n\n\/\/ Wrap the workout activity predicate inside a workout predicate.\nlet workoutPredicate = HKQuery.predicateForWorkouts(activityPredicate: heartRatePredicate)\n\nlet query = HKSampleQueryDescriptor(predicates: [.workout(workoutPredicate)],\n                                    sortDescriptors: [])\n\nlet matchingWorkouts = try await query.result(for: store)\n\n\/\/ Do something with the samples here.\nprint(matchingWorkouts)",
      "language" : "swift"
    }
  ],
  "contentHash" : "27662a8cbbb5e422341f0e30b648f6a7efdd893db66b92be029ad13e153ad541",
  "crawledAt" : "2025-12-01T12:05:32Z",
  "id" : "D9A7D011-B86D-461B-8744-A6B96C94C62C",
  "kind" : "article",
  "module" : "HealthKit",
  "overview" : "## Overview\n\nSome workouts benefit from having the workout’s duration broken into a set of discrete activities. For example, a multisport event, like a triathlon, has separate swim, bike, and run portions. Similarly, you can divide interval training into active and rest periods.\n\n\n\nTo model these activities in HealthKit, use the [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKWorkoutActivity] class to specify the different parts of a workout. You can then query for workouts that have matching activities, and analyze those activities independently from the rest of the workout.\n\n[doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKWorkoutActivity] instances have two main use cases:\n\n### Mark transitions\n\nActivities can’t overlap, but they also don’t need to cover the entire [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKWorkout] sample’s duration. You can leave the time between the active portions of the workout blank, or you can explicitly create workout activities for these intervals. For example, explicitly creating activities for the time between active portions of the workout helps you track statistics during those intervals.\n\nFor multisport workouts, you can explicitly mark the transitions between activities using an [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKWorkoutActivityType\/transition] type. For interval training, you can use the same activity type as the workout for the rest periods; however, you may want to add custom metadata to indicate whether the activity is an active or resting interval.\n\nHow you choose to model the data depends on the needs of your app and the types of intervals you’re tracking. If you’re tracking a workout that alternates between a fast and a slow pace, using workout activities to explicitly track all intervals makes sense. If, however, the intervals alternate between exercising and resting (for example, during many high-intensity interval training exercises), you may want to leave the rest intervals blank.\n\n### Add workout activities to a workout session\n\nTo add workout activities to a workout session, start by creating the session and start collecting data using the workout builder.\n\nNext, when an activity begins, create a new configuration for the activity, and start the activity using the session’s [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKWorkoutSession\/beginNewActivity(configuration:date:metadata:)] method. The data source automatically begins collecting the default data types for the activity.\n\nWhen the activity ends, call the session’s [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKWorkoutSession\/endCurrentActivity(on:)] method. HealthKit also ends the current activity when you begin a new activity.\n\nTo explicitly track the intervals between activities, start a new activity using [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKWorkoutActivityType\/transition]. End this transition when the next activity begins.\n\nFinally, when the entire workout session ends, call the session’s [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKWorkoutSession\/end()] method. This also ends the current activity. Then call the workout builder’s [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKWorkoutBuilder\/finishWorkout(completion:)] method to save the workout to the HealthKit store. This method also returns an [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKWorkout] object, which you can use to display summary information about the workout.\n\n### Enable and disable the collection of data\n\nWhen you start a new workout activity, your data source automatically begins collecting relevant data from Apple Watch. To see the data types that the data source collects, check the data source’s `typesToCollect` property.\n\nWhen running an [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKWorkoutActivityType\/swimBikeRun] workout session, HealthKit automatically changes the collected data types based on the current workout activity. For example, the data source collects data like [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKQuantityTypeIdentifier\/activeEnergyBurned], [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKQuantityTypeIdentifier\/distanceSwimming], and [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKQuantityTypeIdentifier\/swimmingStrokeCount].\n\nIf you start an [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKWorkoutActivityType\/running] activity, the system automatically updates the data source’s `typesToCollect` property based on the new activity. For example, the data source automatically stops collecting [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKQuantityTypeIdentifier\/distanceSwimming] and [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKQuantityTypeIdentifier\/swimmingStrokeCount], and starts collecting relevant data like [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKQuantityTypeIdentifier\/distanceWalkingRunning] and [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKQuantityTypeIdentifier\/runningStrideLength].\n\nMost of the time, you can use the default collected data types. However, if your app calculates and saves its own [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKSample] objects during the workout, you may want to manually enable and disable the collection of that data type, letting the data source automatically associate your samples with the workout.\n\nTo start collecting a data type, call the data source’s [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKLiveWorkoutDataSource\/enableCollection(for:predicate:)] method.\n\nHealthKit then associates any matching samples from your app with the workout activity. You can also disable the collection of a data type by calling [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKLiveWorkoutDataSource\/disableCollection(for:)].\n\n### Query for workout activities\n\nTo query for workouts with activities that match a specific predicate, start by creating a workout activity predicate using one of the [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKQuery] class’s `predicateForWorkoutActivities` methods. Next, use [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKQuery\/predicateForWorkouts(activityPredicate:)] to wrap the activity predicate inside a workout predicate. You can then use the workout predicate in your query.\n\nThis example returns all the workouts that have an activity with an average heart rate over 150 bpm. Use the workout’s [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKWorkout\/workoutActivities] property to access the activities associated with a workout.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/HealthKit\/dividing-a-healthkit-workout-into-activities\ncrawled: 2025-12-01T12:05:32Z\n---\n\n# Dividing a HealthKit workout into activities\n\n**Article**\n\nPartition multisport and interval workouts into activities that represent the different parts of the workout.\n\n## Overview\n\nSome workouts benefit from having the workout’s duration broken into a set of discrete activities. For example, a multisport event, like a triathlon, has separate swim, bike, and run portions. Similarly, you can divide interval training into active and rest periods.\n\n\n\nTo model these activities in HealthKit, use the [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKWorkoutActivity] class to specify the different parts of a workout. You can then query for workouts that have matching activities, and analyze those activities independently from the rest of the workout.\n\n[doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKWorkoutActivity] instances have two main use cases:\n\n\n\n\n\n### Mark transitions\n\nActivities can’t overlap, but they also don’t need to cover the entire [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKWorkout] sample’s duration. You can leave the time between the active portions of the workout blank, or you can explicitly create workout activities for these intervals. For example, explicitly creating activities for the time between active portions of the workout helps you track statistics during those intervals.\n\nFor multisport workouts, you can explicitly mark the transitions between activities using an [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKWorkoutActivityType\/transition] type. For interval training, you can use the same activity type as the workout for the rest periods; however, you may want to add custom metadata to indicate whether the activity is an active or resting interval.\n\nHow you choose to model the data depends on the needs of your app and the types of intervals you’re tracking. If you’re tracking a workout that alternates between a fast and a slow pace, using workout activities to explicitly track all intervals makes sense. If, however, the intervals alternate between exercising and resting (for example, during many high-intensity interval training exercises), you may want to leave the rest intervals blank.\n\n### Add workout activities to a workout session\n\nTo add workout activities to a workout session, start by creating the session and start collecting data using the workout builder.\n\n```swift\n\/\/ Create the workout configuration for a multisport workout.\nlet configuration = HKWorkoutConfiguration()\nconfiguration.activityType = .swimBikeRun\nconfiguration.locationType = .outdoor\n\n\/\/ Create the workout session.\nsession = try HKWorkoutSession(healthStore: store,\n                               configuration: configuration)\n\n\/\/ Start the session and the workout builder.\nlet startDate = Date()\nsession.startActivity(with: startDate)\nworkoutBuilder = session.associatedWorkoutBuilder()\n\n\/\/ Set the workout builder's data source.\nworkoutBuilder.dataSource =\nHKLiveWorkoutDataSource(healthStore: store,\n                        workoutConfiguration: configuration)\n\n\/\/ Start collecting data.\ntry await workoutBuilder.beginCollection(at: startDate)\n```\n\nNext, when an activity begins, create a new configuration for the activity, and start the activity using the session’s [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKWorkoutSession\/beginNewActivity(configuration:date:metadata:)] method. The data source automatically begins collecting the default data types for the activity.\n\n```swift\n\/\/ Start the swimming activity.\nlet swimmingConfiguration = HKWorkoutConfiguration()\nswimmingConfiguration.activityType = .swimming\nswimmingConfiguration.locationType = .outdoor\nswimmingConfiguration.swimmingLocationType = .openWater\n\nsession.beginNewActivity(configuration: swimmingConfiguration,\n                         date: Date(),\n                         metadata: nil)\n```\n\nWhen the activity ends, call the session’s [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKWorkoutSession\/endCurrentActivity(on:)] method. HealthKit also ends the current activity when you begin a new activity.\n\n```swift\n\/\/ End the activity.\nsession.endCurrentActivity(on: Date())\n```\n\nTo explicitly track the intervals between activities, start a new activity using [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKWorkoutActivityType\/transition]. End this transition when the next activity begins.\n\n```swift\n\/\/ Explicitly track the transition between activities.\nlet transitionConfiguration = HKWorkoutConfiguration()\ntransitionConfiguration.activityType = .transition\ntransitionConfiguration.locationType = .outdoor\n\nsession.beginNewActivity(configuration: transitionConfiguration,\n                         date: Date(),\n                         metadata: nil)\n```\n\nFinally, when the entire workout session ends, call the session’s [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKWorkoutSession\/end()] method. This also ends the current activity. Then call the workout builder’s [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKWorkoutBuilder\/finishWorkout(completion:)] method to save the workout to the HealthKit store. This method also returns an [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKWorkout] object, which you can use to display summary information about the workout.\n\n```swift\n\/\/ Ending the session also ends the current activity.\nsession.end()\n\n\/\/ Finishing the workout saves the workout\n\/\/ and returns an HKWorkout object that you can use to display summary data.\nlet workout = try await workoutBuilder.finishWorkout()\n\n\/\/ Do something with the workout here.\nprint(workout as Any)\n```\n\n### Enable and disable the collection of data\n\nWhen you start a new workout activity, your data source automatically begins collecting relevant data from Apple Watch. To see the data types that the data source collects, check the data source’s `typesToCollect` property.\n\nWhen running an [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKWorkoutActivityType\/swimBikeRun] workout session, HealthKit automatically changes the collected data types based on the current workout activity. For example, the data source collects data like [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKQuantityTypeIdentifier\/activeEnergyBurned], [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKQuantityTypeIdentifier\/distanceSwimming], and [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKQuantityTypeIdentifier\/swimmingStrokeCount].\n\nIf you start an [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKWorkoutActivityType\/running] activity, the system automatically updates the data source’s `typesToCollect` property based on the new activity. For example, the data source automatically stops collecting [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKQuantityTypeIdentifier\/distanceSwimming] and [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKQuantityTypeIdentifier\/swimmingStrokeCount], and starts collecting relevant data like [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKQuantityTypeIdentifier\/distanceWalkingRunning] and [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKQuantityTypeIdentifier\/runningStrideLength].\n\nMost of the time, you can use the default collected data types. However, if your app calculates and saves its own [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKSample] objects during the workout, you may want to manually enable and disable the collection of that data type, letting the data source automatically associate your samples with the workout.\n\nTo start collecting a data type, call the data source’s [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKLiveWorkoutDataSource\/enableCollection(for:predicate:)] method.\n\n```swift\n\/\/ Enable the collection of respiratory rate.\nguard let dataSource = session.associatedWorkoutBuilder().dataSource else {\n    print(\"*** No data source found! ***\")\n    return }\n\nlet respiratoryRate = HKQuantityType(.respiratoryRate)\ndataSource.enableCollection(for: respiratoryRate, predicate: nil)\n```\n\nHealthKit then associates any matching samples from your app with the workout activity. You can also disable the collection of a data type by calling [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKLiveWorkoutDataSource\/disableCollection(for:)].\n\n```swift\n\/\/ Disable the collection of respiratory rate.\nguard let dataSource = session.associatedWorkoutBuilder().dataSource else {\n    print(\"*** No data source found! ***\")\n    return }\n\nlet respiratoryRate = HKQuantityType(.respiratoryRate)\ndataSource.disableCollection(for: respiratoryRate)\n```\n\n### Query for workout activities\n\nTo query for workouts with activities that match a specific predicate, start by creating a workout activity predicate using one of the [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKQuery] class’s `predicateForWorkoutActivities` methods. Next, use [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKQuery\/predicateForWorkouts(activityPredicate:)] to wrap the activity predicate inside a workout predicate. You can then use the workout predicate in your query.\n\n```swift\n\/\/ Create a predicate for an average heart rate of greater than 150 bpm.\nlet highHeartRate = HKQuantity(unit: .count(), doubleValue: 150.0)\nlet heartRateType = HKQuantityType(.heartRate)\n\nlet heartRatePredicate =\nHKQuery.predicateForWorkoutActivities(operatorType: .greaterThan,\n                                      quantityType: heartRateType,\n                                      averageQuantity: highHeartRate)\n\n\/\/ Wrap the workout activity predicate inside a workout predicate.\nlet workoutPredicate = HKQuery.predicateForWorkouts(activityPredicate: heartRatePredicate)\n\nlet query = HKSampleQueryDescriptor(predicates: [.workout(workoutPredicate)],\n                                    sortDescriptors: [])\n\nlet matchingWorkouts = try await query.result(for: store)\n\n\/\/ Do something with the samples here.\nprint(matchingWorkouts)\n```\n\nThis example returns all the workouts that have an activity with an average heart rate over 150 bpm. Use the workout’s [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKWorkout\/workoutActivities] property to access the activities associated with a workout.\n\n## Samples\n\n- **Adding samples to a workout**: Create associated samples that add details to a workout.\n- **Accessing condensed workout samples**: Read series data from condensed workouts.\n- **HKWorkout**: A workout sample that stores information about a single physical activity.\n- **HKWorkoutActivity**: An object that describes an activity within a longer workout.\n- **HKWorkoutBuilder**: A builder object that incrementally constructs a workout.\n- **HKWorkoutType**: A type that identifies samples that store information about a workout.\n- **HKWorkoutTypeIdentifier**: The workout type identifier.\n- **HKWorkoutActivityType**: The type of activity performed during a workout.\n- **HKWorkoutSessionType**: The type of session.\n- **HKWorkoutEvent**: An object representing an important event during a workout.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Create associated samples that add details to a workout.",
          "name" : "Adding samples to a workout",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/adding-samples-to-a-workout"
        },
        {
          "description" : "Read series data from condensed workouts.",
          "name" : "Accessing condensed workout samples",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/accessing-condensed-workout-samples"
        },
        {
          "description" : "A workout sample that stores information about a single physical activity.",
          "name" : "HKWorkout",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKWorkout"
        },
        {
          "description" : "An object that describes an activity within a longer workout.",
          "name" : "HKWorkoutActivity",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKWorkoutActivity"
        },
        {
          "description" : "A builder object that incrementally constructs a workout.",
          "name" : "HKWorkoutBuilder",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKWorkoutBuilder"
        },
        {
          "description" : "A type that identifies samples that store information about a workout.",
          "name" : "HKWorkoutType",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKWorkoutType"
        },
        {
          "description" : "The workout type identifier.",
          "name" : "HKWorkoutTypeIdentifier",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKWorkoutTypeIdentifier"
        },
        {
          "description" : "The type of activity performed during a workout.",
          "name" : "HKWorkoutActivityType",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKWorkoutActivityType"
        },
        {
          "description" : "The type of session.",
          "name" : "HKWorkoutSessionType",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKWorkoutSessionType"
        },
        {
          "description" : "An object representing an important event during a workout.",
          "name" : "HKWorkoutEvent",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKWorkoutEvent"
        }
      ],
      "title" : "Samples"
    }
  ],
  "source" : "appleJSON",
  "title" : "Dividing a HealthKit workout into activities",
  "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/dividing-a-healthkit-workout-into-activities"
}