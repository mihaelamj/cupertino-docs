{
  "abstract" : "A query descriptor that calculates the minimum, maximum, average, or sum over a set of samples from the HealthKit store.",
  "codeExamples" : [
    {
      "code" : "\/\/ Create a predicate for today's samples.\nlet calendar = Calendar(identifier: .gregorian)\nlet startDate = calendar.startOfDay(for: Date())\nlet endDate = calendar.date(byAdding: .day, value: 1, to: startDate)\nlet today = HKQuery.predicateForSamples(withStart: startDate, end: endDate)\n\n\/\/ Create the query descriptor.\nlet stepType = HKQuantityType(.stepCount)\nlet stepsToday = HKSamplePredicate.quantitySample(type: stepType, predicate:today)\nlet sumOfStepsQuery = HKStatisticsQueryDescriptor(predicate: stepsToday, options: .cumulativeSum)\n\n\/\/ Run the query.\nlet stepCount = try await sumOfStepsQuery.result(for: store)?\n    .sumQuantity()?\n    .doubleValue(for: HKUnit.count())\n\n\/\/ Use the step count here.",
      "language" : "swift"
    }
  ],
  "conformsTo" : [
    "Copyable",
    "HKAsyncQuery"
  ],
  "contentHash" : "413808f8a5d3c27fe7c09908f399dc66ba3ed9ee19b82d2b31d9f5c2e723234f",
  "crawledAt" : "2025-12-04T17:47:34Z",
  "declaration" : {
    "code" : "struct HKStatisticsQueryDescriptor",
    "language" : "swift"
  },
  "id" : "BC78E4EE-EACA-47FF-BBF9-448F9373CE2B",
  "kind" : "struct",
  "language" : "swift",
  "module" : "HealthKit",
  "overview" : "## Overview\n\nUse the [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKStatisticsQueryDescriptor] to perform calculations over sets of samples currently saved in the HealthKit store.",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "visionOS",
    "watchOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/healthkit\/hkstatisticsquerydescriptor\ncrawled: 2025-12-04T17:47:34Z\n---\n\n# HKStatisticsQueryDescriptor\n\n**Structure**\n\nA query descriptor that calculates the minimum, maximum, average, or sum over a set of samples from the HealthKit store.\n\n## Declaration\n\n```swift\nstruct HKStatisticsQueryDescriptor\n```\n\n## Overview\n\nUse the [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKStatisticsQueryDescriptor] to perform calculations over sets of samples currently saved in the HealthKit store.\n\n```swift\n\/\/ Create a predicate for today's samples.\nlet calendar = Calendar(identifier: .gregorian)\nlet startDate = calendar.startOfDay(for: Date())\nlet endDate = calendar.date(byAdding: .day, value: 1, to: startDate)\nlet today = HKQuery.predicateForSamples(withStart: startDate, end: endDate)\n\n\/\/ Create the query descriptor.\nlet stepType = HKQuantityType(.stepCount)\nlet stepsToday = HKSamplePredicate.quantitySample(type: stepType, predicate:today)\nlet sumOfStepsQuery = HKStatisticsQueryDescriptor(predicate: stepsToday, options: .cumulativeSum)\n\n\/\/ Run the query.\nlet stepCount = try await sumOfStepsQuery.result(for: store)?\n    .sumQuantity()?\n    .doubleValue(for: HKUnit.count())\n\n\/\/ Use the step count here.\n```\n\n## Creating Query Descriptors\n\n- **init(predicate:options:)**: Creates a statistics query descriptor.\n\n## Running Queries\n\n- **result(for:)**: Runs a one-shot query and asynchronously returns a snapshot of the current matching results.\n\n## Accessing Query Properties\n\n- **predicate**: A predicate that defines the set of data that the query uses to calculate the statistics.\n- **options**: A list of options that define the type of statistical calculations performed and the way in which HealthKit merges data from multiple sources.\n\n## Default Implementations\n\n- **HKAsyncQuery Implementations**\n\n## Statistics\n\n- **Executing Statistical Queries**: Create and run statistical queries.\n- **Executing Statistics Collection Queries**: Calculate statistical data for graphs and charts.\n- **HKStatisticsQuery**: A query that performs statistical calculations over a set of matching quantity samples, and returns the results.\n- **HKStatisticsCollectionQueryDescriptor**: A query descriptor that gathers a collection of statistics calculated over a series of fixed-length time intervals.\n- **HKStatisticsCollectionQuery**: A query that performs multiple statistics queries over a series of fixed-length time intervals.\n- **HKStatistics**: An object that represents the result of calculating the minimum, maximum, average, or sum over a set of samples from the HealthKit store.\n- **HKStatisticsCollection**: An object that manages a collection of statistics, representing the results calculated over separate time intervals.\n- **HKStatisticsOptions**: Options for specifying the statistic to calculate.\n\n## Conforms To\n\n- Copyable\n- HKAsyncQuery\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Creates a statistics query descriptor.",
          "name" : "init(predicate:options:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKStatisticsQueryDescriptor\/init(predicate:options:)"
        }
      ],
      "title" : "Creating Query Descriptors"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Runs a one-shot query and asynchronously returns a snapshot of the current matching results.",
          "name" : "result(for:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKStatisticsQueryDescriptor\/result(for:)"
        }
      ],
      "title" : "Running Queries"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "A predicate that defines the set of data that the query uses to calculate the statistics.",
          "name" : "predicate",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKStatisticsQueryDescriptor\/predicate"
        },
        {
          "description" : "A list of options that define the type of statistical calculations performed and the way in which HealthKit merges data from multiple sources.",
          "name" : "options",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKStatisticsQueryDescriptor\/options"
        }
      ],
      "title" : "Accessing Query Properties"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "",
          "name" : "HKAsyncQuery Implementations",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKStatisticsQueryDescriptor\/HKAsyncQuery-Implementations"
        }
      ],
      "title" : "Default Implementations"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Create and run statistical queries.",
          "name" : "Executing Statistical Queries",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/executing-statistical-queries"
        },
        {
          "description" : "Calculate statistical data for graphs and charts.",
          "name" : "Executing Statistics Collection Queries",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/executing-statistics-collection-queries"
        },
        {
          "description" : "A query that performs statistical calculations over a set of matching quantity samples, and returns the results.",
          "name" : "HKStatisticsQuery",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKStatisticsQuery"
        },
        {
          "description" : "A query descriptor that gathers a collection of statistics calculated over a series of fixed-length time intervals.",
          "name" : "HKStatisticsCollectionQueryDescriptor",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKStatisticsCollectionQueryDescriptor"
        },
        {
          "description" : "A query that performs multiple statistics queries over a series of fixed-length time intervals.",
          "name" : "HKStatisticsCollectionQuery",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKStatisticsCollectionQuery"
        },
        {
          "description" : "An object that represents the result of calculating the minimum, maximum, average, or sum over a set of samples from the HealthKit store.",
          "name" : "HKStatistics",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKStatistics"
        },
        {
          "description" : "An object that manages a collection of statistics, representing the results calculated over separate time intervals.",
          "name" : "HKStatisticsCollection",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKStatisticsCollection"
        },
        {
          "description" : "Options for specifying the statistic to calculate.",
          "name" : "HKStatisticsOptions",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKStatisticsOptions"
        }
      ],
      "title" : "Statistics"
    }
  ],
  "source" : "appleJSON",
  "title" : "HKStatisticsQueryDescriptor",
  "url" : "https:\/\/developer.apple.com\/documentation\/healthkit\/hkstatisticsquerydescriptor"
}