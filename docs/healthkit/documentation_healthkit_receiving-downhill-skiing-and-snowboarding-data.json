{
  "abstract" : "Receive segments and distance samples during downhill skiing and snowboarding workout sessions.",
  "codeExamples" : [
    {
      "code" : "let updateHandler: ((HKAnchoredObjectQuery, [HKSample]?, [HKDeletedObject]?, HKQueryAnchor?, Error?) -> Void) = { [unowned self] (query, samplesOrNil, deletedObjectsOrNil, newAnchorOrNil, errorOrNil) in\n    \n    \/\/ Check for errors.\n    if let error = errorOrNil {\n        \/\/ Handle the error here.\n        print(\"*** An error occurred: \\(error.localizedDescription) ***\")\n        return\n    }\n    \n    \/\/ Process the samples.\n    if let samples = samplesOrNil  {\n        \/\/ Do something with the distance samples here.\n        print(\"Samples: \\(samples)\")\n    }\n    \n    \/\/ Update the anchor.\n    if let newAnchor = newAnchorOrNil {\n        self.myCurrentAnchor = newAnchor\n    }\n}\n\/\/ Get the downhill skiing type.\nguard let downhillSnowSport = HKObjectType.quantityType(forIdentifier: HKQuantityTypeIdentifier.distanceDownhillSnowSports) else {\n    fatalError(\"*** Unable to get the downhill snow sport type ***\")\n}\n\/\/ Only find samples that start after the workout began.\nlet datePredicate = NSPredicate(format: \"%K > %@\", HKPredicateKeyPathStartDate, workoutStartDate as NSDate)\nlet distanceQuery = HKAnchoredObjectQuery(type: downhillSnowSport,\n                                          predicate: datePredicate,\n                                          anchor: myCurrentAnchor,\n                                          limit: HKObjectQueryNoLimit,\n                                          resultsHandler: updateHandler)\ndistanceQuery.updateHandler = updateHandler\n\/\/ Run the query.\nstore.execute(distanceQuery)",
      "language" : "swift"
    },
    {
      "code" : "func workoutSession(_ workoutSession: HKWorkoutSession, didGenerate event: HKWorkoutEvent) {\n    \n    \/\/ Check to see if the event is a segment.\n    if event.type == .segment {\n        \n        \/\/ Get the segment's start and end times.\n        let startTime = event.dateInterval.start\n        let endTime = event.dateInterval.end\n        \n        \/\/ Get the segment's metadata.\n        let averageSpeed = event.metadata?[HKMetadataKeyAverageSpeed]\n        let maxSpeed = event.metadata?[HKMetadataKeyMaximumSpeed]\n        let alpineSlope = event.metadata?[HKMetadataKeyAlpineSlopeGrade]\n        let elevationDescended = event.metadata?[HKMetadataKeyElevationDescended]\n        \n        \/\/ Do something with the segment data here...\n        \n    }\n    \n    \/\/ Also handle any other event types...\n}\n",
      "language" : "swift"
    }
  ],
  "contentHash" : "d2fb4cb013cbc6126b11acffd3ea8043cefb46970b3b90f94ab7205b1835c430",
  "crawledAt" : "2025-12-06T02:01:33Z",
  "id" : "A19F3899-DF0C-4AA8-92C9-96B428173252",
  "kind" : "article",
  "language" : "swift",
  "module" : "HealthKit",
  "overview" : "## Overview\n\nOn Apple Watch Series 3, the system automatically generates distance samples, segments, and pause and resume events during [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKWorkoutActivityType\/downhillSkiing] and [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKWorkoutActivityType\/snowboarding] workout sessions. Monitor these samples to receive additional information about individual runs. You can then display this information on the watch during the session.\n\n### Receiving Distance Samples\n\nThe system generates a [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKQuantityTypeIdentifier\/distanceDownhillSnowSports] sample at the end of each run. Use an [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKAnchoredObjectQuery] query to receive and process these samples.\n\n### Receiving Segments\n\nThe system generates a segment event for each run. This event is passed to your app using the session delegate’s [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKWorkoutSessionDelegate\/workoutSession(_:didGenerate:)] method.\n\nEach autogenerated segment has a metadata dictionary with the following keys and values:\n\n### Handling Pause and Resume Events\n\nThe system automatically generates [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKWorkoutEventType\/motionPaused] and [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKWorkoutEventType\/motionResumed] events for [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKWorkoutActivityType\/downhillSkiing] and [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKWorkoutActivityType\/snowboarding] sessions:\n\nThese events are similar to the motion events generated for [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKWorkoutActivityType\/running] workout sessions; however, unlike [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKWorkoutActivityType\/running] sessions, [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKWorkoutActivityType\/downhillSkiing] and [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKWorkoutActivityType\/snowboarding] sessions do not continue to run in the background while paused. As a result, you should use these events to pause and resume any other long-running tasks your app is performing (for example, location tracking).",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/HealthKit\/receiving-downhill-skiing-and-snowboarding-data\ncrawled: 2025-12-06T02:01:33Z\n---\n\n# Receiving Downhill Skiing and Snowboarding Data\n\n**Article**\n\nReceive segments and distance samples during downhill skiing and snowboarding workout sessions.\n\n## Overview\n\nOn Apple Watch Series 3, the system automatically generates distance samples, segments, and pause and resume events during [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKWorkoutActivityType\/downhillSkiing] and [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKWorkoutActivityType\/snowboarding] workout sessions. Monitor these samples to receive additional information about individual runs. You can then display this information on the watch during the session.\n\n### Receiving Distance Samples\n\nThe system generates a [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKQuantityTypeIdentifier\/distanceDownhillSnowSports] sample at the end of each run. Use an [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKAnchoredObjectQuery] query to receive and process these samples.\n\n```swift\nlet updateHandler: ((HKAnchoredObjectQuery, [HKSample]?, [HKDeletedObject]?, HKQueryAnchor?, Error?) -> Void) = { [unowned self] (query, samplesOrNil, deletedObjectsOrNil, newAnchorOrNil, errorOrNil) in\n    \n    \/\/ Check for errors.\n    if let error = errorOrNil {\n        \/\/ Handle the error here.\n        print(\"*** An error occurred: \\(error.localizedDescription) ***\")\n        return\n    }\n    \n    \/\/ Process the samples.\n    if let samples = samplesOrNil  {\n        \/\/ Do something with the distance samples here.\n        print(\"Samples: \\(samples)\")\n    }\n    \n    \/\/ Update the anchor.\n    if let newAnchor = newAnchorOrNil {\n        self.myCurrentAnchor = newAnchor\n    }\n}\n\/\/ Get the downhill skiing type.\nguard let downhillSnowSport = HKObjectType.quantityType(forIdentifier: HKQuantityTypeIdentifier.distanceDownhillSnowSports) else {\n    fatalError(\"*** Unable to get the downhill snow sport type ***\")\n}\n\/\/ Only find samples that start after the workout began.\nlet datePredicate = NSPredicate(format: \"%K > %@\", HKPredicateKeyPathStartDate, workoutStartDate as NSDate)\nlet distanceQuery = HKAnchoredObjectQuery(type: downhillSnowSport,\n                                          predicate: datePredicate,\n                                          anchor: myCurrentAnchor,\n                                          limit: HKObjectQueryNoLimit,\n                                          resultsHandler: updateHandler)\ndistanceQuery.updateHandler = updateHandler\n\/\/ Run the query.\nstore.execute(distanceQuery)\n```\n\n### Receiving Segments\n\nThe system generates a segment event for each run. This event is passed to your app using the session delegate’s [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKWorkoutSessionDelegate\/workoutSession(_:didGenerate:)] method.\n\n```swift\nfunc workoutSession(_ workoutSession: HKWorkoutSession, didGenerate event: HKWorkoutEvent) {\n    \n    \/\/ Check to see if the event is a segment.\n    if event.type == .segment {\n        \n        \/\/ Get the segment's start and end times.\n        let startTime = event.dateInterval.start\n        let endTime = event.dateInterval.end\n        \n        \/\/ Get the segment's metadata.\n        let averageSpeed = event.metadata?[HKMetadataKeyAverageSpeed]\n        let maxSpeed = event.metadata?[HKMetadataKeyMaximumSpeed]\n        let alpineSlope = event.metadata?[HKMetadataKeyAlpineSlopeGrade]\n        let elevationDescended = event.metadata?[HKMetadataKeyElevationDescended]\n        \n        \/\/ Do something with the segment data here...\n        \n    }\n    \n    \/\/ Also handle any other event types...\n}\n\n```\n\nEach autogenerated segment has a metadata dictionary with the following keys and values:\n\n- [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKMetadataKeyAverageSpeed]\n- [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKMetadataKeyMaximumSpeed]\n- [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKMetadataKeyAlpineSlopeGrade]\n- [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKMetadataKeyElevationDescended]\n\n### Handling Pause and Resume Events\n\nThe system automatically generates [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKWorkoutEventType\/motionPaused] and [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKWorkoutEventType\/motionResumed] events for [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKWorkoutActivityType\/downhillSkiing] and [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKWorkoutActivityType\/snowboarding] sessions:\n\n- [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKWorkoutEventType\/motionPaused] events are generated at the end of each run.\n- [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKWorkoutEventType\/motionResumed] events are generated at the beginning of the next run.\n\nThese events are similar to the motion events generated for [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKWorkoutActivityType\/running] workout sessions; however, unlike [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKWorkoutActivityType\/running] sessions, [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKWorkoutActivityType\/downhillSkiing] and [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKWorkoutActivityType\/snowboarding] sessions do not continue to run in the background while paused. As a result, you should use these events to pause and resume any other long-running tasks your app is performing (for example, location tracking).\n\n",
  "sections" : [

  ],
  "source" : "appleJSON",
  "title" : "Receiving Downhill Skiing and Snowboarding Data",
  "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/receiving-downhill-skiing-and-snowboarding-data"
}