{
  "abstract" : "Initializes a statistics collection query to perform the specified calculations over a set of time intervals.",
  "codeExamples" : [

  ],
  "contentHash" : "af3c059dc5d32d117f20b9e9c70d03d7d1246f0f7bcdaa07bb6b15e9a04d6906",
  "crawledAt" : "2025-12-01T13:02:52Z",
  "declaration" : {
    "code" : "init(quantityType: HKQuantityType, quantitySamplePredicate: NSPredicate?, options: HKStatisticsOptions = [], anchorDate: Date, intervalComponents: DateComponents)",
    "language" : "swift"
  },
  "id" : "BA3FEAD8-1D80-4DAC-BC73-7354F6B85D84",
  "kind" : "unknown",
  "module" : "HealthKit",
  "overview" : "## Return Value\n\nA newly initialized statistics collection query object.\n\n## Discussion\n\nAfter you instantiate the query, set up one or both of the callback handlers, and then call the [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKHealthStore] class’s [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKHealthStore\/execute(_:)] method to run it. Queries run on an anonymous background queue. As soon as the query is complete, the initial results handler is executed on the same background queue (but not necessarily on the same thread). You typically dispatch these results to the main queue to update the user interface.\n\nStatistics collection queries can also act as long-running queries. If you assign a statistics update handler, they continue to monitor the HealthKit store after gathering the initial results. The statistics update handler is called on the background queue every time a matching sample is saved to the HealthKit Store. You can cancel this query by calling the store’s [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKHealthStore\/stop(_:)] method.",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "visionOS",
    "watchOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/HealthKit\/HKStatisticsCollectionQuery\/init(quantityType:quantitySamplePredicate:options:anchorDate:intervalComponents:)\ncrawled: 2025-12-01T13:02:52Z\n---\n\n# init(quantityType:quantitySamplePredicate:options:anchorDate:intervalComponents:)\n\n**Initializer**\n\nInitializes a statistics collection query to perform the specified calculations over a set of time intervals.\n\n## Declaration\n\n```swift\ninit(quantityType: HKQuantityType, quantitySamplePredicate: NSPredicate?, options: HKStatisticsOptions = [], anchorDate: Date, intervalComponents: DateComponents)\n```\n\n## Parameters\n\n- **quantityType**: The type of sample to search for. This type must be an instance of the [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKQuantityType] class. You cannot perform statistics collection queries using other sample types.\n- **quantitySamplePredicate**: A predicate that limits the results returned by the query. You can pass `nil` if you want to perform the statistical calculation over all the samples of the specified type.\n- **options**: A list of options that define the type of statistical calculations performed and the way in which data from multiple sources are merged. For a list of valid options, see [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKStatisticsOptions].\n- **anchorDate**: The date used to anchor the collection’s time intervals. Use this parameter to set the start time for your time intervals. For example, if you are using a day interval, you might create a date object with a time of 2:00 a.m. This value sets the start of the day for each of your time intervals.\n\nTechnically, the anchor sets the start time for a single time interval. All other time intervals must align with this interval. The time intervals can extend before or after the anchor date. Each time interval has the same length, and there is no gap between adjacent intervals. Think of time as a number line: The anchor date represents its origin, with the intervals creating tick marks that extend away from the origin in both directions.\n- **intervalComponents**: The date components that define the time interval for each statistics object in the collection. For a collection of sample time intervals, see [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKStatisticsCollectionQuery\/intervalComponents].\n\n## Return Value\n\nA newly initialized statistics collection query object.\n\n## Discussion\n\nAfter you instantiate the query, set up one or both of the callback handlers, and then call the [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKHealthStore] class’s [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKHealthStore\/execute(_:)] method to run it. Queries run on an anonymous background queue. As soon as the query is complete, the initial results handler is executed on the same background queue (but not necessarily on the same thread). You typically dispatch these results to the main queue to update the user interface.\n\nStatistics collection queries can also act as long-running queries. If you assign a statistics update handler, they continue to monitor the HealthKit store after gathering the initial results. The statistics update handler is called on the background queue every time a matching sample is saved to the HealthKit Store. You can cancel this query by calling the store’s [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKHealthStore\/stop(_:)] method.\n\n\n\n## Related Documentation\n\n- **statisticsUpdateHandler**: The results handler for monitoring updates to the HealthKit store.\n- **anchorDate**: The anchor date for the collection’s time intervals.\n- **intervalComponents**: The date components that define the time interval for each statistics object in the collection.\n- **options**: A list of options that define the type of statistical calculations performed and the way in which data from multiple sources are merged.\n- **initialResultsHandler**: The results handler for the query’s initial results.\n\n## Creating Statistics Collection Objects\n\n- **Executing Statistics Collection Queries**: Calculate statistical data for graphs and charts.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "The results handler for monitoring updates to the HealthKit store.",
          "name" : "statisticsUpdateHandler",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKStatisticsCollectionQuery\/statisticsUpdateHandler"
        },
        {
          "description" : "The anchor date for the collection’s time intervals.",
          "name" : "anchorDate",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKStatisticsCollectionQuery\/anchorDate"
        },
        {
          "description" : "The date components that define the time interval for each statistics object in the collection.",
          "name" : "intervalComponents",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKStatisticsCollectionQuery\/intervalComponents"
        },
        {
          "description" : "A list of options that define the type of statistical calculations performed and the way in which data from multiple sources are merged.",
          "name" : "options",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKStatisticsCollectionQuery\/options"
        },
        {
          "description" : "The results handler for the query’s initial results.",
          "name" : "initialResultsHandler",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKStatisticsCollectionQuery\/initialResultsHandler"
        }
      ],
      "title" : "Related Documentation"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Calculate statistical data for graphs and charts.",
          "name" : "Executing Statistics Collection Queries",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/executing-statistics-collection-queries"
        }
      ],
      "title" : "Creating Statistics Collection Objects"
    }
  ],
  "source" : "appleJSON",
  "title" : "init(quantityType:quantitySamplePredicate:options:anchorDate:intervalComponents:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKStatisticsCollectionQuery\/init(quantityType:quantitySamplePredicate:options:anchorDate:intervalComponents:)"
}