{
  "abstract" : "Request permission to read and share data in your app.",
  "codeExamples" : [
    {
      "code" : "\/\/ Create the HealthKit data types your app\n\/\/ needs to read and write.\nlet allTypes: Set = [\n    HKQuantityType.workoutType(),\n    HKQuantityType(.activeEnergyBurned),\n    HKQuantityType(.distanceCycling),\n    HKQuantityType(.distanceWalkingRunning),\n    HKQuantityType(.distanceWheelchair),\n    HKQuantityType(.heartRate)\n]",
      "language" : "swift"
    },
    {
      "code" : "do {\n    \/\/ Check that Health data is available on the device.\n    if HKHealthStore.isHealthDataAvailable() {\n        \n        \/\/ Asynchronously request authorization to the data.\n        try await healthStore.requestAuthorization(toShare: allTypes, read: allTypes)\n    }\n} catch {\n    \n    \/\/ Typically, authorization requests only fail if you haven't set the\n    \/\/ usage and share descriptions in your app's Info.plist, or if\n    \/\/ Health data isn't available on the current device.\n    fatalError(\"*** An unexpected error occurred while requesting authorization: \\(error.localizedDescription) ***\")\n}",
      "language" : "swift"
    },
    {
      "code" : "import SwiftUI\nimport HealthKitUI\n\nstruct MyView: View {\n    @State var authenticated = false\n    @State var trigger = false\n\n    var body: some View {\n        Button(\"Access health data\") {\n            \/\/ OK to read or write HealthKit data here.\n        }\n        .disabled(!authenticated)\n        \n        \/\/ If HealthKit data is available, request authorization\n        \/\/ when this view appears.\n        .onAppear() {\n            \n            \/\/ Check that Health data is available on the device.\n            if HKHealthStore.isHealthDataAvailable() {\n                \/\/ Modifying the trigger initiates the health data\n                \/\/ access request.\n                trigger.toggle()\n            }\n        }\n        \n        \/\/ Requests access to share and read HealthKit data types\n        \/\/ when the trigger changes.\n        .healthDataAccessRequest(store: healthStore,\n                                 shareTypes: allTypes,\n                                 readTypes: allTypes,\n                                 trigger: trigger) { result in\n            switch result {\n                \n            case .success(_):\n                authenticated = true\n            case .failure(let error):\n                \/\/ Handle the error here.\n                fatalError(\"*** An error occurred while requesting authentication: \\(error) ***\")\n            }\n        }\n    }\n}",
      "language" : "swift"
    }
  ],
  "contentHash" : "a77f11b080670b95b89e1554de74bfc5cd2a36da020f60a4331044b0526ab8ba",
  "crawledAt" : "2025-12-02T17:02:24Z",
  "id" : "71019C3E-F28C-4C2B-B195-AEB28ED1D19C",
  "kind" : "article",
  "language" : "swift",
  "module" : "HealthKit",
  "overview" : "## Overview\n\nTo help protect people’s privacy, HealthKit requires fine-grained authorization. You need to request permission to both read and share each data type before your app attempts to use the data. However, you don’t need to request permission for all data types at once. Instead, it might make more sense to wait until you need to access the data before asking for permission.\n\nAs part of the privacy protections, your app doesn’t know whether someone granted or denied permission to read data from HealthKit. If they denied permission, attempts to read data from HealthKit return only samples that your app successfully saved to the HealthKit store. Additionally, in a Guest User session on Apple Vision Pro, the guest can view previously authorized data, but can’t access unauthorized data or change the authorizations.\n\nRequesting permission to read and share data is only one part of protecting your user’s privacy. For more information, see [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/protecting-user-privacy].\n\n### Enable HealthKit\n\nBefore you can request authorization to read or save HealthKit data, you need to add the HealthKit capability to your app. You must also provide custom messages for the Health permissions sheet.\n\nXcode requires separate custom messages for reading and writing HealthKit data. Set the [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Information-Property-List\/NSHealthShareUsageDescription] key to customize the message for reading data and the [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Information-Property-List\/NSHealthUpdateUsageDescription] key to customize the message for writing data.\n\nFor projects created using Xcode 13 or later, set these keys in the Target Properties list on the app’s Info tab. For projects created with Xcode 12 or earlier, set these keys in the app’s `Info.plist` file. For more information, see [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Information-Property-List].\n\nFinally, check that Health data is available on the current device by calling [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKHealthStore\/isHealthDataAvailable()] before calling any other HealthKit methods. For more information, see [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/setting-up-healthkit].\n\n### Request permission\n\nTo request permission to read or write data, start by creating the HealthKit data types that you want to read or write. The following example creates data types for active energy burned, distance cycling, distance walking or running, distance in a wheelchair, and heart rate.\n\nNext, you can request read or write access to that data. To request access from the HealthKit store, call [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKHealthStore\/requestAuthorization(toShare:read:)].\n\nTo request access from SwiftUI, use the [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/View\/healthDataAccessRequest(store:shareTypes:readTypes:trigger:completion:)] `modifier.`\n\nAny time your app requests new permissions, the system displays a form with all the requested data types shown. People can toggle individual read and share permissions on and off.\n\n\n\nTo learn how to provide a great experience when asking for permissions, see [https:\/\/developer.apple.com\/design\/human-interface-guidelines\/healthkit].\n\n### Check for authorization before saving data\n\nIf someone grants permission to share a data type, you can create new samples of that type and save them to the HealthKit store. However, before attempting to save any data, check to see if your app is authorized to share that data type by calling the [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKHealthStore\/authorizationStatus(for:)] method. If you haven’t yet requested permission, any attempts to save fail with an [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKError\/Code\/errorAuthorizationNotDetermined] error. If they’ve denied permission, attempts to save fail with an [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKError\/Code\/errorAuthorizationDenied] error.\n\n### Support Guest User sessions on Vision Pro\n\nTo protect their privacy, people can put their Vision Pro in a Guest User session before sharing it. This session lets the owner control which apps the guest can use, and what data they can see. For more information, refer to [https:\/\/support.apple.com\/en-us\/117742].\n\nA Guest User session has the following affects on HealthKit:\n\nAny attempt to request authorization for HealthKit data types fails silently. The system doesn’t display the authorization sheet during a Guest User session.\n\nIf your app receives an [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKError\/Code\/errorNotPermissibleForGuestUserMode] error, you can silently ignore the error for passive or periodic saves. Silently dropping the changes ensures that they don’t persist past the Guest User session without interrupting the guest’s experience. However, if the guest performs an action that would obviously result in saving data (for example, tapping a Save button), you can display an alert telling them that the action isn’t available during a Guest User session.\n\n### Specify required clinical record types\n\nIf your app requires access to specific clinical record data to function properly, specify the required clinical record types in your app’s `Info.plist` file using the [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Information-Property-List\/NSHealthRequiredReadAuthorizationTypeIdentifiers] key. This key defines the data types that your app must have permission to read. Set the value to an array of strings containing the type identifiers for your required types. For a list of type identifiers, see [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKClinicalTypeIdentifier].\n\nTo protect people’s privacy, you must specify three or more required clinical record types. If a person denies authorization to any of the types, authorization fails with an [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKError\/Code\/errorRequiredAuthorizationDenied] error; the system doesn’t tell your app which record types the person denied access to.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/HealthKit\/authorizing-access-to-health-data\ncrawled: 2025-12-02T17:02:24Z\n---\n\n# Authorizing access to health data\n\n**Article**\n\nRequest permission to read and share data in your app.\n\n## Overview\n\nTo help protect people’s privacy, HealthKit requires fine-grained authorization. You need to request permission to both read and share each data type before your app attempts to use the data. However, you don’t need to request permission for all data types at once. Instead, it might make more sense to wait until you need to access the data before asking for permission.\n\nAs part of the privacy protections, your app doesn’t know whether someone granted or denied permission to read data from HealthKit. If they denied permission, attempts to read data from HealthKit return only samples that your app successfully saved to the HealthKit store. Additionally, in a Guest User session on Apple Vision Pro, the guest can view previously authorized data, but can’t access unauthorized data or change the authorizations.\n\n\n\nRequesting permission to read and share data is only one part of protecting your user’s privacy. For more information, see [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/protecting-user-privacy].\n\n### Enable HealthKit\n\nBefore you can request authorization to read or save HealthKit data, you need to add the HealthKit capability to your app. You must also provide custom messages for the Health permissions sheet.\n\nXcode requires separate custom messages for reading and writing HealthKit data. Set the [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Information-Property-List\/NSHealthShareUsageDescription] key to customize the message for reading data and the [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Information-Property-List\/NSHealthUpdateUsageDescription] key to customize the message for writing data.\n\nFor projects created using Xcode 13 or later, set these keys in the Target Properties list on the app’s Info tab. For projects created with Xcode 12 or earlier, set these keys in the app’s `Info.plist` file. For more information, see [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Information-Property-List].\n\nFinally, check that Health data is available on the current device by calling [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKHealthStore\/isHealthDataAvailable()] before calling any other HealthKit methods. For more information, see [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/setting-up-healthkit].\n\n### Request permission\n\nTo request permission to read or write data, start by creating the HealthKit data types that you want to read or write. The following example creates data types for active energy burned, distance cycling, distance walking or running, distance in a wheelchair, and heart rate.\n\n```swift\n\/\/ Create the HealthKit data types your app\n\/\/ needs to read and write.\nlet allTypes: Set = [\n    HKQuantityType.workoutType(),\n    HKQuantityType(.activeEnergyBurned),\n    HKQuantityType(.distanceCycling),\n    HKQuantityType(.distanceWalkingRunning),\n    HKQuantityType(.distanceWheelchair),\n    HKQuantityType(.heartRate)\n]\n```\n\nNext, you can request read or write access to that data. To request access from the HealthKit store, call [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKHealthStore\/requestAuthorization(toShare:read:)].\n\n```swift\ndo {\n    \/\/ Check that Health data is available on the device.\n    if HKHealthStore.isHealthDataAvailable() {\n        \n        \/\/ Asynchronously request authorization to the data.\n        try await healthStore.requestAuthorization(toShare: allTypes, read: allTypes)\n    }\n} catch {\n    \n    \/\/ Typically, authorization requests only fail if you haven't set the\n    \/\/ usage and share descriptions in your app's Info.plist, or if\n    \/\/ Health data isn't available on the current device.\n    fatalError(\"*** An unexpected error occurred while requesting authorization: \\(error.localizedDescription) ***\")\n}\n```\n\nTo request access from SwiftUI, use the [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/View\/healthDataAccessRequest(store:shareTypes:readTypes:trigger:completion:)] `modifier.`\n\n\n\n```swift\nimport SwiftUI\nimport HealthKitUI\n\nstruct MyView: View {\n    @State var authenticated = false\n    @State var trigger = false\n\n    var body: some View {\n        Button(\"Access health data\") {\n            \/\/ OK to read or write HealthKit data here.\n        }\n        .disabled(!authenticated)\n        \n        \/\/ If HealthKit data is available, request authorization\n        \/\/ when this view appears.\n        .onAppear() {\n            \n            \/\/ Check that Health data is available on the device.\n            if HKHealthStore.isHealthDataAvailable() {\n                \/\/ Modifying the trigger initiates the health data\n                \/\/ access request.\n                trigger.toggle()\n            }\n        }\n        \n        \/\/ Requests access to share and read HealthKit data types\n        \/\/ when the trigger changes.\n        .healthDataAccessRequest(store: healthStore,\n                                 shareTypes: allTypes,\n                                 readTypes: allTypes,\n                                 trigger: trigger) { result in\n            switch result {\n                \n            case .success(_):\n                authenticated = true\n            case .failure(let error):\n                \/\/ Handle the error here.\n                fatalError(\"*** An error occurred while requesting authentication: \\(error) ***\")\n            }\n        }\n    }\n}\n```\n\nAny time your app requests new permissions, the system displays a form with all the requested data types shown. People can toggle individual read and share permissions on and off.\n\n\n\nTo learn how to provide a great experience when asking for permissions, see [https:\/\/developer.apple.com\/design\/human-interface-guidelines\/healthkit].\n\n\n\n### Check for authorization before saving data\n\nIf someone grants permission to share a data type, you can create new samples of that type and save them to the HealthKit store. However, before attempting to save any data, check to see if your app is authorized to share that data type by calling the [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKHealthStore\/authorizationStatus(for:)] method. If you haven’t yet requested permission, any attempts to save fail with an [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKError\/Code\/errorAuthorizationNotDetermined] error. If they’ve denied permission, attempts to save fail with an [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKError\/Code\/errorAuthorizationDenied] error.\n\n### Support Guest User sessions on Vision Pro\n\nTo protect their privacy, people can put their Vision Pro in a Guest User session before sharing it. This session lets the owner control which apps the guest can use, and what data they can see. For more information, refer to [https:\/\/support.apple.com\/en-us\/117742].\n\nA Guest User session has the following affects on HealthKit:\n\n- If the owner has already authorized access to the data, the guest can read that data from the HealthKit store.\n- The guest can’t authorize any additional data types.\n- The system obscures Health data in the Privacy and Security and Health Data panels in Settings.\n- Any attempts to save data or otherwise mutate data in the HealthKit store fails with an [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKError\/Code\/errorNotPermissibleForGuestUserMode] error (or [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKError\/Code\/errorHealthDataRestricted] on apps running in iOS 17).\n\n\n\nAny attempt to request authorization for HealthKit data types fails silently. The system doesn’t display the authorization sheet during a Guest User session.\n\nIf your app receives an [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKError\/Code\/errorNotPermissibleForGuestUserMode] error, you can silently ignore the error for passive or periodic saves. Silently dropping the changes ensures that they don’t persist past the Guest User session without interrupting the guest’s experience. However, if the guest performs an action that would obviously result in saving data (for example, tapping a Save button), you can display an alert telling them that the action isn’t available during a Guest User session.\n\n### Specify required clinical record types\n\nIf your app requires access to specific clinical record data to function properly, specify the required clinical record types in your app’s `Info.plist` file using the [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Information-Property-List\/NSHealthRequiredReadAuthorizationTypeIdentifiers] key. This key defines the data types that your app must have permission to read. Set the value to an array of strings containing the type identifiers for your required types. For a list of type identifiers, see [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKClinicalTypeIdentifier].\n\nTo protect people’s privacy, you must specify three or more required clinical record types. If a person denies authorization to any of the types, authorization fails with an [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKError\/Code\/errorRequiredAuthorizationDenied] error; the system doesn’t tell your app which record types the person denied access to.\n\n## Essentials\n\n- **About the HealthKit framework**: Learn about the architecture and design of the HealthKit framework.\n- **Setting up HealthKit**: Set up and configure your HealthKit store.\n- **Protecting user privacy**: Respect and safeguard your user’s privacy.\n- **HealthKit updates**: Learn about important changes to HealthKit.\n- **HealthKitUI**: Display user interface that enables a person to view and interact with their health data.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Learn about the architecture and design of the HealthKit framework.",
          "name" : "About the HealthKit framework",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/about-the-healthkit-framework"
        },
        {
          "description" : "Set up and configure your HealthKit store.",
          "name" : "Setting up HealthKit",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/setting-up-healthkit"
        },
        {
          "description" : "Respect and safeguard your user’s privacy.",
          "name" : "Protecting user privacy",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/protecting-user-privacy"
        },
        {
          "description" : "Learn about important changes to HealthKit.",
          "name" : "HealthKit updates",
          "url" : "https:\/\/developer.apple.com\/documentation\/Updates\/HealthKit"
        },
        {
          "description" : "Display user interface that enables a person to view and interact with their health data.",
          "name" : "HealthKitUI",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKitUI"
        }
      ],
      "title" : "Essentials"
    }
  ],
  "source" : "appleJSON",
  "title" : "Authorizing access to health data",
  "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/authorizing-access-to-health-data"
}