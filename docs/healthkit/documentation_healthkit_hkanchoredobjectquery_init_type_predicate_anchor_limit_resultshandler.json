{
  "abstract" : "Initializes a new anchored object query.",
  "codeExamples" : [

  ],
  "contentHash" : "6d7078e0daf896719ba016507096ecdc433e80ba12aeeb71a23a6b58bf330f08",
  "crawledAt" : "2025-12-01T13:01:49Z",
  "declaration" : {
    "code" : "init(type: HKSampleType, predicate: NSPredicate?, anchor: HKQueryAnchor?, limit: Int, resultsHandler handler: @escaping (HKAnchoredObjectQuery, [HKSample]?, [HKDeletedObject]?, HKQueryAnchor?, (any Error)?) -> Void)",
    "language" : "swift"
  },
  "id" : "51F5C131-B7A9-4C93-BC4A-966330D63460",
  "kind" : "unknown",
  "module" : "HealthKit",
  "overview" : "## Return Value\n\nA newly initialized anchor query object.\n\n## Discussion\n\nAfter instantiating the query, call the [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKHealthStore] class’s [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKHealthStore\/execute(_:)] method to run it. The queries run on an anonymous background queue. As soon as the query is complete, the results handler block is executed on the same background queue (but not necessarily the same thread). Be sure to dispatch these results to the main queue before updating the user interface.\n\nThe first time you call this method, pass `nil` as the `anchor` parameter. This method returns all matching objects currently in the HealthKit store. Additionally, save the returned anchor object and pass it to the next query.\n\nAnchor queries can also act as long-running queries. If you assign an update handler before executing the query, the query continues to monitor the HealthKit store after gathering the initial results. The system calls the update handler on a background queue whenever a matching sample is saved to or deleted from the HealthKit store. To cancel this query, call the store’s [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKHealthStore\/stop(_:)] method.",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "visionOS",
    "watchOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/HealthKit\/HKAnchoredObjectQuery\/init(type:predicate:anchor:limit:resultsHandler:)\ncrawled: 2025-12-01T13:01:49Z\n---\n\n# init(type:predicate:anchor:limit:resultsHandler:)\n\n**Initializer**\n\nInitializes a new anchored object query.\n\n## Declaration\n\n```swift\ninit(type: HKSampleType, predicate: NSPredicate?, anchor: HKQueryAnchor?, limit: Int, resultsHandler handler: @escaping (HKAnchoredObjectQuery, [HKSample]?, [HKDeletedObject]?, HKQueryAnchor?, (any Error)?) -> Void)\n```\n\n## Parameters\n\n- **type**: The type of sample to search for. This query supports all subclasses of [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKSampleType], such as [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKQuantityType], [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKCategoryType], [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKWorkoutType],  and [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKCorrelationType].\n- **predicate**: A predicate that filters both the samples and the deleted objects returned by the query.  Pass `nil` to receive all the newly added samples and recently deleted objects of the specified type.\n- **anchor**: The anchor returned by the previous anchored object query. The anchor object corresponds to the last object that was returned by the previous anchored object query. The new query returns only samples and deleted objects that are newer than that object.\n\nPass `nil` to receive all the matching samples and recently deleted objects currently in the HealthKit store.\n- **limit**: The maximum number of samples received by the query. To receive all of the new samples, pass [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKObjectQueryNoLimit].\n- **handler**: A block that the system calls after gathering the initial results. This block takes the following parameters:\n\n\n\n## Return Value\n\nA newly initialized anchor query object.\n\n## Discussion\n\nAfter instantiating the query, call the [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKHealthStore] class’s [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKHealthStore\/execute(_:)] method to run it. The queries run on an anonymous background queue. As soon as the query is complete, the results handler block is executed on the same background queue (but not necessarily the same thread). Be sure to dispatch these results to the main queue before updating the user interface.\n\nThe first time you call this method, pass `nil` as the `anchor` parameter. This method returns all matching objects currently in the HealthKit store. Additionally, save the returned anchor object and pass it to the next query.\n\nAnchor queries can also act as long-running queries. If you assign an update handler before executing the query, the query continues to monitor the HealthKit store after gathering the initial results. The system calls the update handler on a background queue whenever a matching sample is saved to or deleted from the HealthKit store. To cancel this query, call the store’s [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKHealthStore\/stop(_:)] method.\n\n## Creating Anchored Object Queries\n\n- **Executing Anchored Object Queries**: Create and run an anchored object query.\n- **init(queryDescriptors:anchor:limit:resultsHandler:)**: Creates an anchored object query that matches any of the query descriptors you provided.\n- **HKObjectQueryNoLimit**: A value indicating that the query returns all the matching samples in the HealthKit store.\n- **init(type:predicate:anchor:limit:completionHandler:)**: Initializes a new anchored object query.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Create and run an anchored object query.",
          "name" : "Executing Anchored Object Queries",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/executing-anchored-object-queries"
        },
        {
          "description" : "Creates an anchored object query that matches any of the query descriptors you provided.",
          "name" : "init(queryDescriptors:anchor:limit:resultsHandler:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKAnchoredObjectQuery\/init(queryDescriptors:anchor:limit:resultsHandler:)"
        },
        {
          "description" : "A value indicating that the query returns all the matching samples in the HealthKit store.",
          "name" : "HKObjectQueryNoLimit",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKObjectQueryNoLimit"
        },
        {
          "description" : "Initializes a new anchored object query.",
          "name" : "init(type:predicate:anchor:limit:completionHandler:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKAnchoredObjectQuery\/init(type:predicate:anchor:limit:completionHandler:)"
        }
      ],
      "title" : "Creating Anchored Object Queries"
    }
  ],
  "source" : "appleJSON",
  "title" : "init(type:predicate:anchor:limit:resultsHandler:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKAnchoredObjectQuery\/init(type:predicate:anchor:limit:resultsHandler:)"
}