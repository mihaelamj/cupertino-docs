{
  "abstract" : "A query that performs multiple statistics queries over a series of fixed-length time intervals.",
  "codeExamples" : [

  ],
  "conformsTo" : [
    "CVarArg",
    "CustomDebugStringConvertible",
    "CustomStringConvertible",
    "Equatable",
    "Hashable",
    "NSObjectProtocol",
    "Sendable",
    "SendableMetatype"
  ],
  "contentHash" : "bf9a35f570bc681ca7938307312ca61f2a6aaa56d020afa179cbe862332f5285",
  "crawledAt" : "2025-12-02T18:11:40Z",
  "declaration" : {
    "code" : "class HKStatisticsCollectionQuery",
    "language" : "swift"
  },
  "id" : "6FAA5684-85A8-44FB-AC3D-C7FCC10DDF15",
  "kind" : "class",
  "language" : "swift",
  "module" : "HealthKit",
  "overview" : "## Overview\n\nStatistics collection queries are often used to produce data for graphs and charts. For example, you might create a statistics collection query that calculates the total number of steps for each day or the average heart rate for each hour. Like observer queries, collection queries can also act as long-running queries, receiving updates when the HealthKit store’s content changes.\n\nStatistics collection queries are mostly immutable. You can assign the query’s [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKStatisticsCollectionQuery\/initialResultsHandler] and [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKStatisticsCollectionQuery\/statisticsUpdateHandler] properties after instantiating the object. You must set all other properties when you instantiate the object, and they can’t change.\n\nFor more information about statistics queries, see [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKStatisticsQuery].",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "visionOS",
    "watchOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/HealthKit\/HKStatisticsCollectionQuery\ncrawled: 2025-12-02T18:11:40Z\n---\n\n# HKStatisticsCollectionQuery\n\n**Class**\n\nA query that performs multiple statistics queries over a series of fixed-length time intervals.\n\n## Declaration\n\n```swift\nclass HKStatisticsCollectionQuery\n```\n\n## Overview\n\nStatistics collection queries are often used to produce data for graphs and charts. For example, you might create a statistics collection query that calculates the total number of steps for each day or the average heart rate for each hour. Like observer queries, collection queries can also act as long-running queries, receiving updates when the HealthKit store’s content changes.\n\n\n\nStatistics collection queries are mostly immutable. You can assign the query’s [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKStatisticsCollectionQuery\/initialResultsHandler] and [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKStatisticsCollectionQuery\/statisticsUpdateHandler] properties after instantiating the object. You must set all other properties when you instantiate the object, and they can’t change.\n\nFor more information about statistics queries, see [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKStatisticsQuery].\n\n## Creating Statistics Collection Objects\n\n- **Executing Statistics Collection Queries**: Calculate statistical data for graphs and charts.\n- **init(quantityType:quantitySamplePredicate:options:anchorDate:intervalComponents:)**: Initializes a statistics collection query to perform the specified calculations over a set of time intervals.\n\n## Getting and Setting Results Handlers\n\n- **initialResultsHandler**: The results handler for the query’s initial results.\n- **statisticsUpdateHandler**: The results handler for monitoring updates to the HealthKit store.\n\n## Getting Property Data\n\n- **anchorDate**: The anchor date for the collection’s time intervals.\n- **intervalComponents**: The date components that define the time interval for each statistics object in the collection.\n- **options**: A list of options that define the type of statistical calculations performed and the way in which data from multiple sources are merged.\n\n## Statistics\n\n- **Executing Statistical Queries**: Create and run statistical queries.\n- **Executing Statistics Collection Queries**: Calculate statistical data for graphs and charts.\n- **HKStatisticsQueryDescriptor**: A query descriptor that calculates the minimum, maximum, average, or sum over a set of samples from the HealthKit store.\n- **HKStatisticsQuery**: A query that performs statistical calculations over a set of matching quantity samples, and returns the results.\n- **HKStatisticsCollectionQueryDescriptor**: A query descriptor that gathers a collection of statistics calculated over a series of fixed-length time intervals.\n- **HKStatistics**: An object that represents the result of calculating the minimum, maximum, average, or sum over a set of samples from the HealthKit store.\n- **HKStatisticsCollection**: An object that manages a collection of statistics, representing the results calculated over separate time intervals.\n- **HKStatisticsOptions**: Options for specifying the statistic to calculate.\n\n## Inherits From\n\n- HKQuery\n\n## Conforms To\n\n- CVarArg\n- CustomDebugStringConvertible\n- CustomStringConvertible\n- Equatable\n- Hashable\n- NSObjectProtocol\n- Sendable\n- SendableMetatype\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Calculate statistical data for graphs and charts.",
          "name" : "Executing Statistics Collection Queries",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/executing-statistics-collection-queries"
        },
        {
          "description" : "Initializes a statistics collection query to perform the specified calculations over a set of time intervals.",
          "name" : "init(quantityType:quantitySamplePredicate:options:anchorDate:intervalComponents:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKStatisticsCollectionQuery\/init(quantityType:quantitySamplePredicate:options:anchorDate:intervalComponents:)"
        }
      ],
      "title" : "Creating Statistics Collection Objects"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "The results handler for the query’s initial results.",
          "name" : "initialResultsHandler",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKStatisticsCollectionQuery\/initialResultsHandler"
        },
        {
          "description" : "The results handler for monitoring updates to the HealthKit store.",
          "name" : "statisticsUpdateHandler",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKStatisticsCollectionQuery\/statisticsUpdateHandler"
        }
      ],
      "title" : "Getting and Setting Results Handlers"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "The anchor date for the collection’s time intervals.",
          "name" : "anchorDate",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKStatisticsCollectionQuery\/anchorDate"
        },
        {
          "description" : "The date components that define the time interval for each statistics object in the collection.",
          "name" : "intervalComponents",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKStatisticsCollectionQuery\/intervalComponents"
        },
        {
          "description" : "A list of options that define the type of statistical calculations performed and the way in which data from multiple sources are merged.",
          "name" : "options",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKStatisticsCollectionQuery\/options"
        }
      ],
      "title" : "Getting Property Data"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Create and run statistical queries.",
          "name" : "Executing Statistical Queries",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/executing-statistical-queries"
        },
        {
          "description" : "Calculate statistical data for graphs and charts.",
          "name" : "Executing Statistics Collection Queries",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/executing-statistics-collection-queries"
        },
        {
          "description" : "A query descriptor that calculates the minimum, maximum, average, or sum over a set of samples from the HealthKit store.",
          "name" : "HKStatisticsQueryDescriptor",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKStatisticsQueryDescriptor"
        },
        {
          "description" : "A query that performs statistical calculations over a set of matching quantity samples, and returns the results.",
          "name" : "HKStatisticsQuery",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKStatisticsQuery"
        },
        {
          "description" : "A query descriptor that gathers a collection of statistics calculated over a series of fixed-length time intervals.",
          "name" : "HKStatisticsCollectionQueryDescriptor",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKStatisticsCollectionQueryDescriptor"
        },
        {
          "description" : "An object that represents the result of calculating the minimum, maximum, average, or sum over a set of samples from the HealthKit store.",
          "name" : "HKStatistics",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKStatistics"
        },
        {
          "description" : "An object that manages a collection of statistics, representing the results calculated over separate time intervals.",
          "name" : "HKStatisticsCollection",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKStatisticsCollection"
        },
        {
          "description" : "Options for specifying the statistic to calculate.",
          "name" : "HKStatisticsOptions",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKStatisticsOptions"
        }
      ],
      "title" : "Statistics"
    },
    {
      "content" : "",
      "items" : [
        {
          "name" : "HKQuery"
        }
      ],
      "title" : "Inherits From"
    }
  ],
  "source" : "appleJSON",
  "title" : "HKStatisticsCollectionQuery",
  "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKStatisticsCollectionQuery"
}