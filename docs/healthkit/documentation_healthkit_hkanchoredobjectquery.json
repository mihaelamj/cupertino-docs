{
  "abstract" : "A query that returns changes to the HealthKit store, including a snapshot of new changes and continuous monitoring as a long-running query.",
  "codeExamples" : [

  ],
  "conformsTo" : [
    "CVarArg",
    "CustomDebugStringConvertible",
    "CustomStringConvertible",
    "Equatable",
    "Hashable",
    "NSObjectProtocol",
    "Sendable",
    "SendableMetatype"
  ],
  "contentHash" : "f984a9767bca9dd15405388d382888f32ed3270615919167bd8b2b1aa54360f3",
  "crawledAt" : "2025-12-02T18:11:31Z",
  "declaration" : {
    "code" : "class HKAnchoredObjectQuery",
    "language" : "swift"
  },
  "id" : "B4674312-D856-4B39-BB42-2466A9980AFE",
  "kind" : "class",
  "language" : "swift",
  "module" : "HealthKit",
  "overview" : "## Overview\n\nAnchored object queries provide an easy way to search for new data in the HealthKit store. An [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKAnchoredObjectQuery] returns an anchor value that corresponds to the last sample or deleted object received by that query. Subsequent queries can use this anchor to restrict their results to only newer saved or deleted objects.\n\nAnchored object queries are mostly immutable. You can assign the query’s [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKAnchoredObjectQuery\/updateHandler] property after instantiating the object, but you must set all other properties when you instantiate the object. You can’t change them.\n\n### Combine Snapshots and Updates\n\nThe anchored object query can combine the abilities of a regular query with a long-running query.\n\nOften, it’s more efficient to set up and run a single anchored object query than to run separate sample and observer queries. As a result, you may want to use anchored object queries, even when you aren’t using anchors to limit the results. In this case, set the anchor parameter to `nil`.",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "visionOS",
    "watchOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/HealthKit\/HKAnchoredObjectQuery\ncrawled: 2025-12-02T18:11:31Z\n---\n\n# HKAnchoredObjectQuery\n\n**Class**\n\nA query that returns changes to the HealthKit store, including a snapshot of new changes and continuous monitoring as a long-running query.\n\n## Declaration\n\n```swift\nclass HKAnchoredObjectQuery\n```\n\n## Overview\n\nAnchored object queries provide an easy way to search for new data in the HealthKit store. An [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKAnchoredObjectQuery] returns an anchor value that corresponds to the last sample or deleted object received by that query. Subsequent queries can use this anchor to restrict their results to only newer saved or deleted objects.\n\nAnchored object queries are mostly immutable. You can assign the query’s [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKAnchoredObjectQuery\/updateHandler] property after instantiating the object, but you must set all other properties when you instantiate the object. You can’t change them.\n\n### Combine Snapshots and Updates\n\nThe anchored object query can combine the abilities of a regular query with a long-running query.\n\n- It grabs a snapshot of the data currently stored in the HealthKit store (like an [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKSampleQuery]).\n- It can also perform a long-running query that responds to updates (like an [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKObserverQuery]).\n\nOften, it’s more efficient to set up and run a single anchored object query than to run separate sample and observer queries. As a result, you may want to use anchored object queries, even when you aren’t using anchors to limit the results. In this case, set the anchor parameter to `nil`.\n\n## Creating Anchored Object Queries\n\n- **Executing Anchored Object Queries**: Create and run an anchored object query.\n- **init(type:predicate:anchor:limit:resultsHandler:)**: Initializes a new anchored object query.\n- **init(queryDescriptors:anchor:limit:resultsHandler:)**: Creates an anchored object query that matches any of the query descriptors you provided.\n- **HKObjectQueryNoLimit**: A value indicating that the query returns all the matching samples in the HealthKit store.\n- **init(type:predicate:anchor:limit:completionHandler:)**: Initializes a new anchored object query.\n\n## Receiving Updates\n\n- **updateHandler**: Handler for monitoring updates to the HealthKit store.\n\n## Tracking Anchors\n\n- **HKQueryAnchor**: An object used to identify all the samples previously returned by an anchored object query.\n\n## Tracking Deleted Objects\n\n- **HKDeletedObject**: An object that represents a sample that has been deleted from the HealthKit store.\n\n## Long-running queries\n\n- **HKActivitySummaryQueryDescriptor**: A query interface that reads activity summaries using Swift concurrency.\n- **HKActivitySummaryQuery**: A query for reading activity summary objects from the HealthKit store.\n- **HKAnchoredObjectQueryDescriptor**: A query interface that runs anchored object queries using Swift concurrency.\n- **HKObserverQuery**: A long-running query that monitors the HealthKit store and updates your app when the HealthKit store saves or deletes a matching sample.\n\n## Inherits From\n\n- HKQuery\n\n## Conforms To\n\n- CVarArg\n- CustomDebugStringConvertible\n- CustomStringConvertible\n- Equatable\n- Hashable\n- NSObjectProtocol\n- Sendable\n- SendableMetatype\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Create and run an anchored object query.",
          "name" : "Executing Anchored Object Queries",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/executing-anchored-object-queries"
        },
        {
          "description" : "Initializes a new anchored object query.",
          "name" : "init(type:predicate:anchor:limit:resultsHandler:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKAnchoredObjectQuery\/init(type:predicate:anchor:limit:resultsHandler:)"
        },
        {
          "description" : "Creates an anchored object query that matches any of the query descriptors you provided.",
          "name" : "init(queryDescriptors:anchor:limit:resultsHandler:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKAnchoredObjectQuery\/init(queryDescriptors:anchor:limit:resultsHandler:)"
        },
        {
          "description" : "A value indicating that the query returns all the matching samples in the HealthKit store.",
          "name" : "HKObjectQueryNoLimit",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKObjectQueryNoLimit"
        },
        {
          "description" : "Initializes a new anchored object query.",
          "name" : "init(type:predicate:anchor:limit:completionHandler:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKAnchoredObjectQuery\/init(type:predicate:anchor:limit:completionHandler:)"
        }
      ],
      "title" : "Creating Anchored Object Queries"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Handler for monitoring updates to the HealthKit store.",
          "name" : "updateHandler",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKAnchoredObjectQuery\/updateHandler"
        }
      ],
      "title" : "Receiving Updates"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "An object used to identify all the samples previously returned by an anchored object query.",
          "name" : "HKQueryAnchor",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKQueryAnchor"
        }
      ],
      "title" : "Tracking Anchors"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "An object that represents a sample that has been deleted from the HealthKit store.",
          "name" : "HKDeletedObject",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKDeletedObject"
        }
      ],
      "title" : "Tracking Deleted Objects"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "A query interface that reads activity summaries using Swift concurrency.",
          "name" : "HKActivitySummaryQueryDescriptor",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKActivitySummaryQueryDescriptor"
        },
        {
          "description" : "A query for reading activity summary objects from the HealthKit store.",
          "name" : "HKActivitySummaryQuery",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKActivitySummaryQuery"
        },
        {
          "description" : "A query interface that runs anchored object queries using Swift concurrency.",
          "name" : "HKAnchoredObjectQueryDescriptor",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKAnchoredObjectQueryDescriptor"
        },
        {
          "description" : "A long-running query that monitors the HealthKit store and updates your app when the HealthKit store saves or deletes a matching sample.",
          "name" : "HKObserverQuery",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKObserverQuery"
        }
      ],
      "title" : "Long-running queries"
    },
    {
      "content" : "",
      "items" : [
        {
          "name" : "HKQuery"
        }
      ],
      "title" : "Inherits From"
    }
  ],
  "source" : "appleJSON",
  "title" : "HKAnchoredObjectQuery",
  "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKAnchoredObjectQuery"
}