{
  "abstract" : "Read series data from condensed workouts.",
  "codeExamples" : [
    {
      "code" : "\/\/ Create the workout predicate.\nlet forWorkout = HKQuery.predicateForObjects(from: workout)\n\n\/\/ Create the heart-rate descriptor.\nlet heartRateDescriptor = HKQueryDescriptor(sampleType: myHeartRateType,\n                                            predicate: forWorkout)\n\n\/\/ Create the query.\nlet heartRateQuery = HKSampleQuery(queryDescriptors: [heartRateDescriptor],\n                                   limit: HKObjectQueryNoLimit)\n{ query, samples, error in\n    \/\/ Process the samples.\n}\n\n\/\/ Run  the query.\nmyStore.execute(heartRateQuery)",
      "language" : "swift"
    },
    {
      "code" : "\/\/ Create the query.\nlet heartRateQuery = HKSampleQuery(queryDescriptors: [heartRateDescriptor],\n                                   limit: HKObjectQueryNoLimit)\n{ query, samples, error in\n\n    \/\/ Start by checking for errors.\n    guard let samples = samples else {\n        \/\/ Handle the error.\n        fatalError(\"*** An error occurred: \\(error!.localizedDescription) ***\")\n    }\n    \n    \/\/ Iterate over all the samples.\n    for sample in samples {\n        \n        guard let sample = sample as? HKDiscreteQuantitySample else {\n            fatalError(\"*** Unexpected Sample Type ***\")\n        }\n        \n        \/\/ Check to see if the sample is a series.\n        if sample.count == 1 {\n            \/\/ This is a single sample.\n            \/\/ Use the sample.\n            myOutput.append(\"\\(sample)\\n\")\n        }\n        else {\n            \/\/ This is a series.\n            \/\/ Get the detailed items for the series.\n            myGetDetailedItems(for: sample)\n        }\n    }\n}\n",
      "language" : "swift"
    },
    {
      "code" : "\/\/ Create the predicate.\nlet inSeriesSample = HKQuery.predicateForObject(with: series.uuid)\n\n\/\/ Create the query.\nlet detailQuery = HKQuantitySeriesSampleQuery(quantityType: myHeartRateType,\n                                              predicate: inSeriesSample)\n{ query, quantity, dateInterval, HKSample, done, error in\n    \n    guard let quantity = quantity, let dateInterval = dateInterval else {\n        fatalError(\"*** An error occurred: \\(error!.localizedDescription) ***\")\n    }\n    \n    \/\/ Use the data.\n    myOutput.append(\"\\(quantity.doubleValue(for: HKUnit(from: \"count\/min\"))): \\(dateInterval)\")\n}\n\n\/\/ Run the query.\nmyStore.execute(detailQuery)",
      "language" : "swift"
    }
  ],
  "contentHash" : "4cfb7136ab7fb5093443ed094b745509611541fd1b6d0defd97d5bb69ac66fde",
  "crawledAt" : "2025-12-03T06:57:26Z",
  "id" : "77B64529-B7E8-4EE0-837C-3C33A3B5AEA2",
  "kind" : "article",
  "language" : "swift",
  "module" : "HealthKit",
  "overview" : "## Overview\n\nTo reduce the size of workout data, HealthKit can condense system generated samples associated with first party workouts. HealthKit enumerates the data associated with a workout and adds that data to one or more quantity series samples. After saving all the data to series objects, HealthKit deletes the originals. In addition, it converts older [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKQuantitySample] objects to [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKCumulativeQuantitySample] or [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKDiscreteQuantitySample] objects.\n\nHealthKit condenses high-frequency first party workout data. This includes, but it’s not limited to, the following data types:\n\nFor these data types, HealthKit condenses samples associated with a workout that’s at least a few months old and has a duration of at least a few minutes. HealthKit may condense samples for a given workout more than once. For example, if the system syncs new samples associated with the workout to the phone, or if the condenser algorithm changes, HealthKit may condense the workout again.\n\nHealthKit merges quantities within each series to save space and improve query performance on workout data, while still preserving data resolution. HealthKit also coalesces cumulative types and heart rate samples. For cumulative types, such as active energy, HealthKit combines data that’s consecutive in time and has the same value for rate over time. When combining quantities, the framework replaces the data with a new total that spans the combined timespan, with a value is the sum of the original quantities.\n\nIn the example below, several energy samples are consecutive in time, and the rates (calories per time unit) of these samples are identical. Thus, instead of storing five quantities in series, HealthKit combines all these into one. Since the rate over time is the same, coalescing doesn’t alter the results of statistics.\n\n\n\nFor heart rate samples associated with first-party workouts, HealthKit coalesces quantities that have the same value and occurred close together. When coalescing, HealthKit replaces the quantities, which are instantaneous in time, with a new quantity that’s the original value and a continuous interval that spans the combined timespan.\n\nIn the example below, HealthKit merges consecutive heart rate samples that have the same value and aren’t far apart. Merging instantaneous heart rate quantities results in a continuous interval. HealthKit does this to preserve statistics.\n\n\n\nThe condensing and coalescing processes preserve all the data from the original workout and reduce the overhead needed to save that data to disk. However, your app may need to perform additional steps to read the condensed and coalesced data.\n\n### Query high-frequency data from a condensed workout\n\nBecause HealthKit condenses and coalesces older workout data, any samples associated with a workout may actually represent a series of higher-frequency data. In many cases, you don’t need to operate on the `HKSamples` or the backing quantity series data. Instead, you should use [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKStatisticsQuery] and [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKStatisticsCollectionQuery] to transparently compute statistics for the underlying data.\n\nHowever, if your app needs to access the underlying data directly, start by querying for all the samples associated with a workout:\n\nThen, in the query’s results handler, if a sample has a [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKQuantitySample\/count] greater than 1, it contains series data.\n\nUse an [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKQuantitySeriesSampleQuery] to access the detailed data from the series.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/HealthKit\/accessing-condensed-workout-samples\ncrawled: 2025-12-03T06:57:26Z\n---\n\n# Accessing condensed workout samples\n\n**Article**\n\nRead series data from condensed workouts.\n\n## Overview\n\nTo reduce the size of workout data, HealthKit can condense system generated samples associated with first party workouts. HealthKit enumerates the data associated with a workout and adds that data to one or more quantity series samples. After saving all the data to series objects, HealthKit deletes the originals. In addition, it converts older [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKQuantitySample] objects to [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKCumulativeQuantitySample] or [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKDiscreteQuantitySample] objects.\n\nHealthKit condenses high-frequency first party workout data. This includes, but it’s not limited to, the following data types:\n\n- [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKQuantityTypeIdentifier\/distanceWalkingRunning]\n- [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKQuantityTypeIdentifier\/distanceCycling]\n- [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKQuantityTypeIdentifier\/basalEnergyBurned]\n- [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKQuantityTypeIdentifier\/activeEnergyBurned]\n- [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKQuantityTypeIdentifier\/heartRate]\n\nFor these data types, HealthKit condenses samples associated with a workout that’s at least a few months old and has a duration of at least a few minutes. HealthKit may condense samples for a given workout more than once. For example, if the system syncs new samples associated with the workout to the phone, or if the condenser algorithm changes, HealthKit may condense the workout again.\n\nHealthKit merges quantities within each series to save space and improve query performance on workout data, while still preserving data resolution. HealthKit also coalesces cumulative types and heart rate samples. For cumulative types, such as active energy, HealthKit combines data that’s consecutive in time and has the same value for rate over time. When combining quantities, the framework replaces the data with a new total that spans the combined timespan, with a value is the sum of the original quantities.\n\nIn the example below, several energy samples are consecutive in time, and the rates (calories per time unit) of these samples are identical. Thus, instead of storing five quantities in series, HealthKit combines all these into one. Since the rate over time is the same, coalescing doesn’t alter the results of statistics.\n\n\n\nFor heart rate samples associated with first-party workouts, HealthKit coalesces quantities that have the same value and occurred close together. When coalescing, HealthKit replaces the quantities, which are instantaneous in time, with a new quantity that’s the original value and a continuous interval that spans the combined timespan.\n\nIn the example below, HealthKit merges consecutive heart rate samples that have the same value and aren’t far apart. Merging instantaneous heart rate quantities results in a continuous interval. HealthKit does this to preserve statistics.\n\n\n\nThe condensing and coalescing processes preserve all the data from the original workout and reduce the overhead needed to save that data to disk. However, your app may need to perform additional steps to read the condensed and coalesced data.\n\n### Query high-frequency data from a condensed workout\n\nBecause HealthKit condenses and coalesces older workout data, any samples associated with a workout may actually represent a series of higher-frequency data. In many cases, you don’t need to operate on the `HKSamples` or the backing quantity series data. Instead, you should use [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKStatisticsQuery] and [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKStatisticsCollectionQuery] to transparently compute statistics for the underlying data.\n\nHowever, if your app needs to access the underlying data directly, start by querying for all the samples associated with a workout:\n\n```swift\n\/\/ Create the workout predicate.\nlet forWorkout = HKQuery.predicateForObjects(from: workout)\n\n\/\/ Create the heart-rate descriptor.\nlet heartRateDescriptor = HKQueryDescriptor(sampleType: myHeartRateType,\n                                            predicate: forWorkout)\n\n\/\/ Create the query.\nlet heartRateQuery = HKSampleQuery(queryDescriptors: [heartRateDescriptor],\n                                   limit: HKObjectQueryNoLimit)\n{ query, samples, error in\n    \/\/ Process the samples.\n}\n\n\/\/ Run  the query.\nmyStore.execute(heartRateQuery)\n```\n\nThen, in the query’s results handler, if a sample has a [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKQuantitySample\/count] greater than 1, it contains series data.\n\n```swift\n\/\/ Create the query.\nlet heartRateQuery = HKSampleQuery(queryDescriptors: [heartRateDescriptor],\n                                   limit: HKObjectQueryNoLimit)\n{ query, samples, error in\n\n    \/\/ Start by checking for errors.\n    guard let samples = samples else {\n        \/\/ Handle the error.\n        fatalError(\"*** An error occurred: \\(error!.localizedDescription) ***\")\n    }\n    \n    \/\/ Iterate over all the samples.\n    for sample in samples {\n        \n        guard let sample = sample as? HKDiscreteQuantitySample else {\n            fatalError(\"*** Unexpected Sample Type ***\")\n        }\n        \n        \/\/ Check to see if the sample is a series.\n        if sample.count == 1 {\n            \/\/ This is a single sample.\n            \/\/ Use the sample.\n            myOutput.append(\"\\(sample)\\n\")\n        }\n        else {\n            \/\/ This is a series.\n            \/\/ Get the detailed items for the series.\n            myGetDetailedItems(for: sample)\n        }\n    }\n}\n\n```\n\nUse an [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKQuantitySeriesSampleQuery] to access the detailed data from the series.\n\n```swift\n\/\/ Create the predicate.\nlet inSeriesSample = HKQuery.predicateForObject(with: series.uuid)\n\n\/\/ Create the query.\nlet detailQuery = HKQuantitySeriesSampleQuery(quantityType: myHeartRateType,\n                                              predicate: inSeriesSample)\n{ query, quantity, dateInterval, HKSample, done, error in\n    \n    guard let quantity = quantity, let dateInterval = dateInterval else {\n        fatalError(\"*** An error occurred: \\(error!.localizedDescription) ***\")\n    }\n    \n    \/\/ Use the data.\n    myOutput.append(\"\\(quantity.doubleValue(for: HKUnit(from: \"count\/min\"))): \\(dateInterval)\")\n}\n\n\/\/ Run the query.\nmyStore.execute(detailQuery)\n```\n\n## Samples\n\n- **Adding samples to a workout**: Create associated samples that add details to a workout.\n- **Dividing a HealthKit workout into activities**: Partition multisport and interval workouts into activities that represent the different parts of the workout.\n- **HKWorkout**: A workout sample that stores information about a single physical activity.\n- **HKWorkoutActivity**: An object that describes an activity within a longer workout.\n- **HKWorkoutBuilder**: A builder object that incrementally constructs a workout.\n- **HKWorkoutType**: A type that identifies samples that store information about a workout.\n- **HKWorkoutTypeIdentifier**: The workout type identifier.\n- **HKWorkoutActivityType**: The type of activity performed during a workout.\n- **HKWorkoutSessionType**: The type of session.\n- **HKWorkoutEvent**: An object representing an important event during a workout.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Create associated samples that add details to a workout.",
          "name" : "Adding samples to a workout",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/adding-samples-to-a-workout"
        },
        {
          "description" : "Partition multisport and interval workouts into activities that represent the different parts of the workout.",
          "name" : "Dividing a HealthKit workout into activities",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/dividing-a-healthkit-workout-into-activities"
        },
        {
          "description" : "A workout sample that stores information about a single physical activity.",
          "name" : "HKWorkout",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKWorkout"
        },
        {
          "description" : "An object that describes an activity within a longer workout.",
          "name" : "HKWorkoutActivity",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKWorkoutActivity"
        },
        {
          "description" : "A builder object that incrementally constructs a workout.",
          "name" : "HKWorkoutBuilder",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKWorkoutBuilder"
        },
        {
          "description" : "A type that identifies samples that store information about a workout.",
          "name" : "HKWorkoutType",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKWorkoutType"
        },
        {
          "description" : "The workout type identifier.",
          "name" : "HKWorkoutTypeIdentifier",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKWorkoutTypeIdentifier"
        },
        {
          "description" : "The type of activity performed during a workout.",
          "name" : "HKWorkoutActivityType",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKWorkoutActivityType"
        },
        {
          "description" : "The type of session.",
          "name" : "HKWorkoutSessionType",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKWorkoutSessionType"
        },
        {
          "description" : "An object representing an important event during a workout.",
          "name" : "HKWorkoutEvent",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKWorkoutEvent"
        }
      ],
      "title" : "Samples"
    }
  ],
  "source" : "appleJSON",
  "title" : "Accessing condensed workout samples",
  "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/accessing-condensed-workout-samples"
}