{
  "abstract" : "Creates a query for samples that match any of the query descriptors you provided, sorted by the sort descriptors you provided.",
  "codeExamples" : [
    {
      "code" : "\/\/ Create the data types.\nlet stepCountType = HKQuantityType(.stepCount)\nlet pushCountType = HKQuantityType(.pushCount)\n\n\/\/ Specify the desired sample types.\nlet stepDescriptor = HKQueryDescriptor(sampleType: stepCountType, predicate: nil)\nlet pushDescriptor = HKQueryDescriptor(sampleType: pushCountType, predicate: nil)\n\n\/\/ Specify the sort descriptors.\nlet startDateDescriptor = NSSortDescriptor(key: HKSampleSortIdentifierStartDate,\n                                           ascending: true)\n\n\/\/ Create the query.\nlet query = HKSampleQuery(queryDescriptors: [stepDescriptor, pushDescriptor],\n                           limit: HKObjectQueryNoLimit,\n                           sortDescriptors: [startDateDescriptor])  { (query, samples, error) in\n    \n    if let error = error {\n        \/\/ Handle errors here.\n    }\n    \n    DispatchQueue.main.async {\n        \/\/ Process the samples here.\n    }\n}\n\n\/\/ Run the query.\nstore.execute(query)",
      "language" : "swift"
    }
  ],
  "contentHash" : "0a161831dc54c620f37d32f97371551dee63c0e680b4d1f22530fbbf522192f5",
  "crawledAt" : "2025-12-03T07:49:40Z",
  "declaration" : {
    "code" : "init(queryDescriptors: [HKQueryDescriptor], limit: Int, sortDescriptors: [NSSortDescriptor], resultsHandler: @escaping (HKSampleQuery, [HKSample]?, (any Error)?) -> Void)",
    "language" : "swift"
  },
  "id" : "9F555019-34C1-4010-963A-2DABC7282540",
  "kind" : "unknown",
  "language" : "swift",
  "module" : "HealthKit",
  "overview" : "## Discussion\n\nUse this initializer to create a sample query for data that matches any of the [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKQueryDescriptor] objects. Each descriptor can specify a different data type. The system sorts the results by the provided sort descriptors.\n\nAfter instantiating the query, call the [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKHealthStore] class’s [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKHealthStore\/execute(_:)] method to run this query. Queries run on an anonymous background queue. As soon as the query is complete, the system executes the results handler on the background queue, returning samples that match any of the descriptors. You typically dispatch these results to the main queue to update the user interface.\n\nFor example, the following code returns all the step count and push count samples sorted based on their start dates:",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "visionOS",
    "watchOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/HealthKit\/HKSampleQuery\/init(queryDescriptors:limit:sortDescriptors:resultsHandler:)\ncrawled: 2025-12-03T07:49:40Z\n---\n\n# init(queryDescriptors:limit:sortDescriptors:resultsHandler:)\n\n**Initializer**\n\nCreates a query for samples that match any of the query descriptors you provided, sorted by the sort descriptors you provided.\n\n## Declaration\n\n```swift\ninit(queryDescriptors: [HKQueryDescriptor], limit: Int, sortDescriptors: [NSSortDescriptor], resultsHandler: @escaping (HKSampleQuery, [HKSample]?, (any Error)?) -> Void)\n```\n\n## Parameters\n\n- **queryDescriptors**: An array of descriptors that specify the types of samples that the query returns.\n- **limit**: The maximum number of samples that the query returns. If you want to return all matching samples, use [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKObjectQueryNoLimit].\n- **sortDescriptors**: An array of sort descriptors that specify the order of the results that the query returns.\n\n\n- **resultsHandler**: A block that the HealthKit store calls after it finishes executing the query.\n\nThis block takes the following parameters:\n\n\n\n## Discussion\n\nUse this initializer to create a sample query for data that matches any of the [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKQueryDescriptor] objects. Each descriptor can specify a different data type. The system sorts the results by the provided sort descriptors.\n\nAfter instantiating the query, call the [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKHealthStore] class’s [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKHealthStore\/execute(_:)] method to run this query. Queries run on an anonymous background queue. As soon as the query is complete, the system executes the results handler on the background queue, returning samples that match any of the descriptors. You typically dispatch these results to the main queue to update the user interface.\n\nFor example, the following code returns all the step count and push count samples sorted based on their start dates:\n\n```swift\n\/\/ Create the data types.\nlet stepCountType = HKQuantityType(.stepCount)\nlet pushCountType = HKQuantityType(.pushCount)\n\n\/\/ Specify the desired sample types.\nlet stepDescriptor = HKQueryDescriptor(sampleType: stepCountType, predicate: nil)\nlet pushDescriptor = HKQueryDescriptor(sampleType: pushCountType, predicate: nil)\n\n\/\/ Specify the sort descriptors.\nlet startDateDescriptor = NSSortDescriptor(key: HKSampleSortIdentifierStartDate,\n                                           ascending: true)\n\n\/\/ Create the query.\nlet query = HKSampleQuery(queryDescriptors: [stepDescriptor, pushDescriptor],\n                           limit: HKObjectQueryNoLimit,\n                           sortDescriptors: [startDateDescriptor])  { (query, samples, error) in\n    \n    if let error = error {\n        \/\/ Handle errors here.\n    }\n    \n    DispatchQueue.main.async {\n        \/\/ Process the samples here.\n    }\n}\n\n\/\/ Run the query.\nstore.execute(query)\n```\n\n## Creating Sample Queries\n\n- **Executing Sample Queries**: Create, run, and sort sample queries.\n- **init(sampleType:predicate:limit:sortDescriptors:resultsHandler:)**: Instantiates and returns a sample query.\n- **init(queryDescriptors:limit:resultsHandler:)**: Creates a query for samples that match any of the descriptors you provided.\n- **HKObjectQueryNoLimit**: A value indicating that the query returns all the matching samples in the HealthKit store.\n- **HealthKit sort descriptors**: Identifiers for sorting results.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Create, run, and sort sample queries.",
          "name" : "Executing Sample Queries",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/executing-sample-queries"
        },
        {
          "description" : "Instantiates and returns a sample query.",
          "name" : "init(sampleType:predicate:limit:sortDescriptors:resultsHandler:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKSampleQuery\/init(sampleType:predicate:limit:sortDescriptors:resultsHandler:)"
        },
        {
          "description" : "Creates a query for samples that match any of the descriptors you provided.",
          "name" : "init(queryDescriptors:limit:resultsHandler:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKSampleQuery\/init(queryDescriptors:limit:resultsHandler:)"
        },
        {
          "description" : "A value indicating that the query returns all the matching samples in the HealthKit store.",
          "name" : "HKObjectQueryNoLimit",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKObjectQueryNoLimit"
        },
        {
          "description" : "Identifiers for sorting results.",
          "name" : "HealthKit sort descriptors",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/healthkit-sort-descriptors"
        }
      ],
      "title" : "Creating Sample Queries"
    }
  ],
  "source" : "appleJSON",
  "title" : "init(queryDescriptors:limit:sortDescriptors:resultsHandler:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKSampleQuery\/init(queryDescriptors:limit:sortDescriptors:resultsHandler:)"
}