{
  "abstract" : "Instantiates and returns a query that monitors the HealthKit store and responds to changes.",
  "codeExamples" : [

  ],
  "contentHash" : "7b6c141c5046ac5887e2cfffd345e379be112b072734d876e1cc50cde4def8c5",
  "crawledAt" : "2025-12-03T07:54:10Z",
  "declaration" : {
    "code" : "init(sampleType: HKSampleType, predicate: NSPredicate?, updateHandler: @escaping (HKObserverQuery, @escaping HKObserverQueryCompletionHandler, (any Error)?) -> Void)",
    "language" : "swift"
  },
  "id" : "CF83233F-0288-489E-9414-671129499FBF",
  "kind" : "unknown",
  "language" : "swift",
  "module" : "HealthKit",
  "overview" : "## Return Value\n\nA newly initialized observer query object.\n\n## Discussion\n\nAfter instantiating the query, call the [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKHealthStore] class’s [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKHealthStore\/execute(_:)] method to run this query. Observer queries are long-running tasks. They continue to run on an anonymous background thread and call their results handler whenever they detects relevant changes to the HealthKit store. To stop a query, call the [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKHealthStore] class’s [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKHealthStore\/stop(_:)] method.\n\nThe provided update handler block is called every time samples matching this query are saved to or deleted from the HealthKit store. You often need to launch other queries from inside this block to get the updated data. In particular, you can use Anchored Object Queries to retrieve the list of new samples that have been added to the store. For more information, see [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKAnchoredObjectQuery]",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "visionOS",
    "watchOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/HealthKit\/HKObserverQuery\/init(sampleType:predicate:updateHandler:)\ncrawled: 2025-12-03T07:54:10Z\n---\n\n# init(sampleType:predicate:updateHandler:)\n\n**Initializer**\n\nInstantiates and returns a query that monitors the HealthKit store and responds to changes.\n\n## Declaration\n\n```swift\ninit(sampleType: HKSampleType, predicate: NSPredicate?, updateHandler: @escaping (HKObserverQuery, @escaping HKObserverQueryCompletionHandler, (any Error)?) -> Void)\n```\n\n## Parameters\n\n- **sampleType**: The type of sample to search for. This query supports all sample types. Specifically, you can pass any concrete subclass of the [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKSampleType] class (the [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKQuantityType], [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKCategoryType], [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKWorkoutType],  and [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKCorrelationType] classes)\n- **predicate**: A predicate that limits the samples matched by the query. Pass `nil` if you want to receive updates for every new sample of the specified type.\n- **updateHandler**: A block that is called when a matching sample is saved to or deleted from the HealthKit store. This block takes the following parameters:\n\n\n\n## Return Value\n\nA newly initialized observer query object.\n\n## Discussion\n\nAfter instantiating the query, call the [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKHealthStore] class’s [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKHealthStore\/execute(_:)] method to run this query. Observer queries are long-running tasks. They continue to run on an anonymous background thread and call their results handler whenever they detects relevant changes to the HealthKit store. To stop a query, call the [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKHealthStore] class’s [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKHealthStore\/stop(_:)] method.\n\nThe provided update handler block is called every time samples matching this query are saved to or deleted from the HealthKit store. You often need to launch other queries from inside this block to get the updated data. In particular, you can use Anchored Object Queries to retrieve the list of new samples that have been added to the store. For more information, see [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKAnchoredObjectQuery]\n\n## Creating Observer Queries\n\n- **Executing Observer Queries**: Create and run observer queries.\n- **init(queryDescriptors:updateHandler:)**: Creates a query that monitors the HealthKit store and responds to any changes matching any of the query descriptors you provided.\n- **HKObserverQueryCompletionHandler**: The completion handler for background deliveries.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Create and run observer queries.",
          "name" : "Executing Observer Queries",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/executing-observer-queries"
        },
        {
          "description" : "Creates a query that monitors the HealthKit store and responds to any changes matching any of the query descriptors you provided.",
          "name" : "init(queryDescriptors:updateHandler:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKObserverQuery\/init(queryDescriptors:updateHandler:)"
        },
        {
          "description" : "The completion handler for background deliveries.",
          "name" : "HKObserverQueryCompletionHandler",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKObserverQueryCompletionHandler"
        }
      ],
      "title" : "Creating Observer Queries"
    }
  ],
  "source" : "appleJSON",
  "title" : "init(sampleType:predicate:updateHandler:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKObserverQuery\/init(sampleType:predicate:updateHandler:)"
}