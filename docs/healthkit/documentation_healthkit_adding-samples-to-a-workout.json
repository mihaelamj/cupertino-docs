{
  "abstract" : "Create associated samples that add details to a workout.",
  "codeExamples" : [
    {
      "code" : "let energyBurned = HKQuantity(unit: HKUnit.largeCalorie(), doubleValue: 425.0)\nlet distance = HKQuantity(unit: HKUnit.mile(), doubleValue: 3.2)",
      "language" : "swift"
    },
    {
      "code" : "let run = HKWorkout(activityType: HKWorkoutActivityType.running,\n                    start: start,\n                    end: end,\n                    duration: 0,\n                    totalEnergyBurned: energyBurned,\n                    totalDistance: distance,\n                    metadata: nil)",
      "language" : "swift"
    },
    {
      "code" : "store.save(run) { (success, error) -> Void in\n    guard success else {\n        \/\/ Perform proper error handling here.\n        return\n    }\n    \n    \/\/ Add detail samples here.\n}",
      "language" : "swift"
    },
    {
      "code" : "guard let distanceType =\n    HKObjectType.quantityType(forIdentifier:\n        HKQuantityTypeIdentifier.distanceWalkingRunning) else {\n    fatalError(\"*** Unable to create a distance type ***\")\n}\n\nlet distancePerInterval = HKQuantity(unit: HKUnit.foot(),\n                                     doubleValue: 165.0)\n\nlet distancePerIntervalSample = HKQuantitySample(type: distanceType,\n                                                 quantity: distancePerInterval,\n                                                 start: myIntervals[0],\n                                                 end: myIntervals[1])\n\nmyDetailSamples.append(distancePerIntervalSample)",
      "language" : "swift"
    },
    {
      "code" : "guard let energyBurnedType =\n    HKObjectType.quantityType(forIdentifier:\n        HKQuantityTypeIdentifier.activeEnergyBurned) else {\n    fatalError(\"*** Unable to create an energy burned type ***\")\n}\n\nlet energyBurnedPerInterval = HKQuantity(unit: HKUnit.largeCalorie(),\n                                         doubleValue: 15.5)\n\nlet energyBurnedPerIntervalSample =\n    HKQuantitySample(type: energyBurnedType,\n                     quantity: energyBurnedPerInterval,\n                     start: myIntervals[0],\n                     end: myIntervals[1])\n\nmyDetailSamples.append(energyBurnedPerIntervalSample)",
      "language" : "swift"
    },
    {
      "code" : "guard let heartRateType =\n    HKObjectType.quantityType(forIdentifier:\n        HKQuantityTypeIdentifier.heartRate) else {\n    fatalError(\"*** Unable to create a heart rate type ***\")\n}\n\nlet heartRateForInterval = HKQuantity(unit: HKUnit(from: \"count\/min\"),\n                                      doubleValue: 95.0)\n\nlet heartRateForIntervalSample =\n    HKQuantitySample(type: heartRateType,\n                     quantity: heartRateForInterval,\n                     start: myIntervals[0],\n                     end: myIntervals[1])\n\nmyDetailSamples.append(heartRateForIntervalSample)",
      "language" : "swift"
    },
    {
      "code" : "store.add(myDetailSamples, to: run) { (success, error) -> Void in\n    guard success else {\n        \/\/ Perform proper error handling here.\n        return\n    }\n}",
      "language" : "swift"
    },
    {
      "code" : "guard let distanceType =\n    HKObjectType.quantityType(forIdentifier:\n        HKQuantityTypeIdentifier.distanceWalkingRunning) else {\n            fatalError(\"*** Unable to create a distance type ***\")\n}\n\nlet workoutPredicate = HKQuery.predicateForObjects(from: workout)\n\nlet startDateSort = NSSortDescriptor(key: HKSampleSortIdentifierStartDate, ascending: true)\n\nlet query = HKSampleQuery(sampleType: distanceType,\n                          predicate: workoutPredicate,\n                          limit: 0,\n                          sortDescriptors: [startDateSort]) { (sampleQuery, results, error) -> Void in\n                            guard let distanceSamples = results as? [HKQuantitySample] else {\n                                \/\/ Perform proper error handling here.\n                                return\n                            }\n                            \n                            \/\/ Use the workout's distance samples here.\n}\n\nstore.execute(query)",
      "language" : "swift"
    }
  ],
  "contentHash" : "05a712f00c70d9a45e0aab29d54943e14376a2c4904d363ffe210ebcb805588e",
  "crawledAt" : "2025-12-01T12:05:30Z",
  "id" : "81C2B2A3-755A-4B7C-B69C-F40FBFAD59E2",
  "kind" : "article",
  "module" : "HealthKit",
  "overview" : "## Overview\n\nWhen you create a workout sample, it only contains a general overview of the workout: the workout’s duration, the total distance traveled, and the total energy burned. You can enhance the workout by creating samples that provide additional details, and associating these samples with the workout. To associate a sample with a workout use the HealthKit store’s [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKHealthStore\/add(_:to:completion:)] method. The workout must be saved to the HealthKit store before you add any samples. The samples don’t need to be saved. Adding them to the workout automatically saves them.\n\n### Gather data about a workout\n\nAssociating samples with a workout provides fine-grain information about the workout. However, adding samples to the workout does not change any of the workout’s properties. Specifically, adding distance samples won’t change the quantity stored in the [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKWorkout\/totalDistance], [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKSample\/startDate], [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKSample\/endDate], or [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKWorkout\/duration] properties. Likewise, adding active energy burned samples won’t change the quantity stored in the [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKWorkout\/totalEnergyBurned] property. Therefore, adding associated samples leads to some duplication between the workout’s properties and these samples.\n\nYour app should always provide data for the workout’s [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKWorkout\/duration], [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKWorkout\/totalDistance], and [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKWorkout\/totalEnergyBurned] properties when the data is both available and relevant to the workout. In addition, you should provide a set of associated samples that sum up to these totals. You can also provide additional associated samples, to help track how the intensity of the exercise changed during the course of the workout.\n\nFor example, an app that tracks runs might create a workout that includes the total distance, duration, and calories burned after the user finishes the run. The app could also save samples that describe the distance, calories burned, step count, heart rate, flights climbed, and other data over much smaller time intervals.\n\nFine tune the exact length of your associated samples based on the type of workout and the needs of your app. Using five-minute intervals minimizes the amount of memory needed to store the workouts, while still providing a general sense of the change in intensity over the course of a long workout. Using five-second intervals provides a much more detailed view of the workout, but requires considerably more memory and processing.\n\nThe following code samples show how to associate distance, energy burned, and Heart Rate samples with a workout. For simplicity’s sake, these samples use hard-coded values and perform all the operations inline. A real-world app would calculate these values from sensor data and break the operation up using helper methods.\n\n### Create and save the sample\n\nStart by creating quantity objects for the total energy burned, and total distance traveled.\n\nNext create the workout sample.\n\nAnd save the sample to the HealthKit store.\n\n### Add detailed samples\n\nIn the completion handler, you check to ensure that the save succeeded, and then add detailed samples to the workout. For example, you could split the workout into intervals and then calculate detailed information for each interval. The following code listing creates a sample for the distance covered in the first interval.\n\nThen you create an energy-burned sample for that interval.\n\nHowever, you’re not limited to just energy burned and distance. The following code creates a heart rate sample.\n\nContinue to create all the samples you need for all of your intervals. Then use the HealthKit store to add these samples to the workout.\n\n### Read associated samples\n\nTo read a workout’s fine-grain details, you need to create a query that returns only the samples associated with the workout. Use the [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKQuery\/predicateForObjects(from:)-5irg9] method to create a predicate object that matches only samples associated with the  workout. You can then use that predicate to filter one or more queries. For example, the following sample code returns all the distance samples associated with the workout.\n\nYou need to create a separate query for each data type associated with the workout. For example, to get the full details of the workout created earlier, you would need separate queries for distance, energy burned, and heart rate.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/HealthKit\/adding-samples-to-a-workout\ncrawled: 2025-12-01T12:05:30Z\n---\n\n# Adding samples to a workout\n\n**Article**\n\nCreate associated samples that add details to a workout.\n\n## Overview\n\nWhen you create a workout sample, it only contains a general overview of the workout: the workout’s duration, the total distance traveled, and the total energy burned. You can enhance the workout by creating samples that provide additional details, and associating these samples with the workout. To associate a sample with a workout use the HealthKit store’s [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKHealthStore\/add(_:to:completion:)] method. The workout must be saved to the HealthKit store before you add any samples. The samples don’t need to be saved. Adding them to the workout automatically saves them.\n\n### Gather data about a workout\n\nAssociating samples with a workout provides fine-grain information about the workout. However, adding samples to the workout does not change any of the workout’s properties. Specifically, adding distance samples won’t change the quantity stored in the [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKWorkout\/totalDistance], [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKSample\/startDate], [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKSample\/endDate], or [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKWorkout\/duration] properties. Likewise, adding active energy burned samples won’t change the quantity stored in the [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKWorkout\/totalEnergyBurned] property. Therefore, adding associated samples leads to some duplication between the workout’s properties and these samples.\n\nYour app should always provide data for the workout’s [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKWorkout\/duration], [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKWorkout\/totalDistance], and [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKWorkout\/totalEnergyBurned] properties when the data is both available and relevant to the workout. In addition, you should provide a set of associated samples that sum up to these totals. You can also provide additional associated samples, to help track how the intensity of the exercise changed during the course of the workout.\n\nFor example, an app that tracks runs might create a workout that includes the total distance, duration, and calories burned after the user finishes the run. The app could also save samples that describe the distance, calories burned, step count, heart rate, flights climbed, and other data over much smaller time intervals.\n\nFine tune the exact length of your associated samples based on the type of workout and the needs of your app. Using five-minute intervals minimizes the amount of memory needed to store the workouts, while still providing a general sense of the change in intensity over the course of a long workout. Using five-second intervals provides a much more detailed view of the workout, but requires considerably more memory and processing.\n\nThe following code samples show how to associate distance, energy burned, and Heart Rate samples with a workout. For simplicity’s sake, these samples use hard-coded values and perform all the operations inline. A real-world app would calculate these values from sensor data and break the operation up using helper methods.\n\n### Create and save the sample\n\nStart by creating quantity objects for the total energy burned, and total distance traveled.\n\n```swift\nlet energyBurned = HKQuantity(unit: HKUnit.largeCalorie(), doubleValue: 425.0)\nlet distance = HKQuantity(unit: HKUnit.mile(), doubleValue: 3.2)\n```\n\nNext create the workout sample.\n\n```swift\nlet run = HKWorkout(activityType: HKWorkoutActivityType.running,\n                    start: start,\n                    end: end,\n                    duration: 0,\n                    totalEnergyBurned: energyBurned,\n                    totalDistance: distance,\n                    metadata: nil)\n```\n\nAnd save the sample to the HealthKit store.\n\n```swift\nstore.save(run) { (success, error) -> Void in\n    guard success else {\n        \/\/ Perform proper error handling here.\n        return\n    }\n    \n    \/\/ Add detail samples here.\n}\n```\n\n### Add detailed samples\n\nIn the completion handler, you check to ensure that the save succeeded, and then add detailed samples to the workout. For example, you could split the workout into intervals and then calculate detailed information for each interval. The following code listing creates a sample for the distance covered in the first interval.\n\n```swift\nguard let distanceType =\n    HKObjectType.quantityType(forIdentifier:\n        HKQuantityTypeIdentifier.distanceWalkingRunning) else {\n    fatalError(\"*** Unable to create a distance type ***\")\n}\n\nlet distancePerInterval = HKQuantity(unit: HKUnit.foot(),\n                                     doubleValue: 165.0)\n\nlet distancePerIntervalSample = HKQuantitySample(type: distanceType,\n                                                 quantity: distancePerInterval,\n                                                 start: myIntervals[0],\n                                                 end: myIntervals[1])\n\nmyDetailSamples.append(distancePerIntervalSample)\n```\n\nThen you create an energy-burned sample for that interval.\n\n```swift\nguard let energyBurnedType =\n    HKObjectType.quantityType(forIdentifier:\n        HKQuantityTypeIdentifier.activeEnergyBurned) else {\n    fatalError(\"*** Unable to create an energy burned type ***\")\n}\n\nlet energyBurnedPerInterval = HKQuantity(unit: HKUnit.largeCalorie(),\n                                         doubleValue: 15.5)\n\nlet energyBurnedPerIntervalSample =\n    HKQuantitySample(type: energyBurnedType,\n                     quantity: energyBurnedPerInterval,\n                     start: myIntervals[0],\n                     end: myIntervals[1])\n\nmyDetailSamples.append(energyBurnedPerIntervalSample)\n```\n\nHowever, you’re not limited to just energy burned and distance. The following code creates a heart rate sample.\n\n```swift\nguard let heartRateType =\n    HKObjectType.quantityType(forIdentifier:\n        HKQuantityTypeIdentifier.heartRate) else {\n    fatalError(\"*** Unable to create a heart rate type ***\")\n}\n\nlet heartRateForInterval = HKQuantity(unit: HKUnit(from: \"count\/min\"),\n                                      doubleValue: 95.0)\n\nlet heartRateForIntervalSample =\n    HKQuantitySample(type: heartRateType,\n                     quantity: heartRateForInterval,\n                     start: myIntervals[0],\n                     end: myIntervals[1])\n\nmyDetailSamples.append(heartRateForIntervalSample)\n```\n\nContinue to create all the samples you need for all of your intervals. Then use the HealthKit store to add these samples to the workout.\n\n```swift\nstore.add(myDetailSamples, to: run) { (success, error) -> Void in\n    guard success else {\n        \/\/ Perform proper error handling here.\n        return\n    }\n}\n```\n\n### Read associated samples\n\nTo read a workout’s fine-grain details, you need to create a query that returns only the samples associated with the workout. Use the [doc:\/\/com.apple.healthkit\/documentation\/HealthKit\/HKQuery\/predicateForObjects(from:)-5irg9] method to create a predicate object that matches only samples associated with the  workout. You can then use that predicate to filter one or more queries. For example, the following sample code returns all the distance samples associated with the workout.\n\n```swift\nguard let distanceType =\n    HKObjectType.quantityType(forIdentifier:\n        HKQuantityTypeIdentifier.distanceWalkingRunning) else {\n            fatalError(\"*** Unable to create a distance type ***\")\n}\n\nlet workoutPredicate = HKQuery.predicateForObjects(from: workout)\n\nlet startDateSort = NSSortDescriptor(key: HKSampleSortIdentifierStartDate, ascending: true)\n\nlet query = HKSampleQuery(sampleType: distanceType,\n                          predicate: workoutPredicate,\n                          limit: 0,\n                          sortDescriptors: [startDateSort]) { (sampleQuery, results, error) -> Void in\n                            guard let distanceSamples = results as? [HKQuantitySample] else {\n                                \/\/ Perform proper error handling here.\n                                return\n                            }\n                            \n                            \/\/ Use the workout's distance samples here.\n}\n\nstore.execute(query)\n```\n\nYou need to create a separate query for each data type associated with the workout. For example, to get the full details of the workout created earlier, you would need separate queries for distance, energy burned, and heart rate.\n\n## Samples\n\n- **Accessing condensed workout samples**: Read series data from condensed workouts.\n- **Dividing a HealthKit workout into activities**: Partition multisport and interval workouts into activities that represent the different parts of the workout.\n- **HKWorkout**: A workout sample that stores information about a single physical activity.\n- **HKWorkoutActivity**: An object that describes an activity within a longer workout.\n- **HKWorkoutBuilder**: A builder object that incrementally constructs a workout.\n- **HKWorkoutType**: A type that identifies samples that store information about a workout.\n- **HKWorkoutTypeIdentifier**: The workout type identifier.\n- **HKWorkoutActivityType**: The type of activity performed during a workout.\n- **HKWorkoutSessionType**: The type of session.\n- **HKWorkoutEvent**: An object representing an important event during a workout.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Read series data from condensed workouts.",
          "name" : "Accessing condensed workout samples",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/accessing-condensed-workout-samples"
        },
        {
          "description" : "Partition multisport and interval workouts into activities that represent the different parts of the workout.",
          "name" : "Dividing a HealthKit workout into activities",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/dividing-a-healthkit-workout-into-activities"
        },
        {
          "description" : "A workout sample that stores information about a single physical activity.",
          "name" : "HKWorkout",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKWorkout"
        },
        {
          "description" : "An object that describes an activity within a longer workout.",
          "name" : "HKWorkoutActivity",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKWorkoutActivity"
        },
        {
          "description" : "A builder object that incrementally constructs a workout.",
          "name" : "HKWorkoutBuilder",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKWorkoutBuilder"
        },
        {
          "description" : "A type that identifies samples that store information about a workout.",
          "name" : "HKWorkoutType",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKWorkoutType"
        },
        {
          "description" : "The workout type identifier.",
          "name" : "HKWorkoutTypeIdentifier",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKWorkoutTypeIdentifier"
        },
        {
          "description" : "The type of activity performed during a workout.",
          "name" : "HKWorkoutActivityType",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKWorkoutActivityType"
        },
        {
          "description" : "The type of session.",
          "name" : "HKWorkoutSessionType",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKWorkoutSessionType"
        },
        {
          "description" : "An object representing an important event during a workout.",
          "name" : "HKWorkoutEvent",
          "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/HKWorkoutEvent"
        }
      ],
      "title" : "Samples"
    }
  ],
  "source" : "appleJSON",
  "title" : "Adding samples to a workout",
  "url" : "https:\/\/developer.apple.com\/documentation\/HealthKit\/adding-samples-to-a-workout"
}