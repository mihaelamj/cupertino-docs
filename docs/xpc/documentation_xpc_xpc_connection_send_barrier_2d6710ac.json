{
  "abstract" : "Issues a barrier against the connection’s message-send activity.",
  "codeExamples" : [

  ],
  "contentHash" : "4bd4aefbb1a1475dfbe036eb5b336a1d2e522fbd692a6b911e6f57f90a0b5eb4",
  "crawledAt" : "2025-12-07T16:55:10Z",
  "declaration" : {
    "code" : "func xpc_connection_send_barrier(_ connection: xpc_connection_t, _ barrier: @escaping () -> Void)",
    "language" : "swift"
  },
  "id" : "1B46DECC-3649-4641-9349-C27A07C3944B",
  "kind" : "function",
  "language" : "swift",
  "module" : "XPC",
  "overview" : "## Discussion\n\nXPC guarantees that, even if the connection’s target queue is a concurrent queue, there are no other messages being sent concurrently while the barrier block is executing. XPC does not guarantee that the receipt of messages (either through the connection’s event handler or through reply handlers) will be suspended while the barrier is executing.\n\nA barrier is issued relative to the message-send queue. So, if you call [doc:\/\/com.apple.xpc\/documentation\/XPC\/xpc_connection_send_message(_:_:)] five times and then call [doc:\/\/com.apple.xpc\/documentation\/XPC\/xpc_connection_send_barrier(_:_:)], the barrier will be invoked after the fifth message has been sent and its memory disposed of. You may safely cancel a connection from within a barrier block.\n\nIf a barrier is issued after sending a message which expects a reply, the behavior is the same as described above. The receipt of a reply message will not influence when the barrier runs.\n\nA barrier block can be useful for throttling resource consumption on the connected side of a connection. For example, if your connection sends many large messages, you can use a barrier to limit the number of messages that are inflight at any given time. This can be particularly useful for messages that contain kernel resources (like file descriptors) which have a systemwide limit.\n\nIf a barrier is issued on a canceled connection, it will be invoked immediately. If a connection has been canceled and still has outstanding barriers, those barriers will be invoked as part of the connection’s unwinding process.\n\nIt is important to note that a barrier block’s execution order is not guaranteed with respect to other blocks that have been scheduled on the target queue of the connection. Or said differently, [doc:\/\/com.apple.xpc\/documentation\/XPC\/xpc_connection_send_barrier(_:_:)] is not equivalent to [doc:\/\/com.apple.documentation\/documentation\/Dispatch\/dispatch_async].",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/XPC\/xpc_connection_send_barrier(_:_:)\ncrawled: 2025-12-07T16:55:10Z\n---\n\n# xpc_connection_send_barrier(_:_:)\n\n**Function**\n\nIssues a barrier against the connection’s message-send activity.\n\n## Declaration\n\n```swift\nfunc xpc_connection_send_barrier(_ connection: xpc_connection_t, _ barrier: @escaping () -> Void)\n```\n\n## Parameters\n\n- **connection**: The connection against which the barrier is to be issued.\n- **barrier**: The barrier block to issue. This barrier prevents concurrent message-send activity on the connection. No messages will be sent while the barrier block is executing.\n\n## Discussion\n\nXPC guarantees that, even if the connection’s target queue is a concurrent queue, there are no other messages being sent concurrently while the barrier block is executing. XPC does not guarantee that the receipt of messages (either through the connection’s event handler or through reply handlers) will be suspended while the barrier is executing.\n\nA barrier is issued relative to the message-send queue. So, if you call [doc:\/\/com.apple.xpc\/documentation\/XPC\/xpc_connection_send_message(_:_:)] five times and then call [doc:\/\/com.apple.xpc\/documentation\/XPC\/xpc_connection_send_barrier(_:_:)], the barrier will be invoked after the fifth message has been sent and its memory disposed of. You may safely cancel a connection from within a barrier block.\n\nIf a barrier is issued after sending a message which expects a reply, the behavior is the same as described above. The receipt of a reply message will not influence when the barrier runs.\n\nA barrier block can be useful for throttling resource consumption on the connected side of a connection. For example, if your connection sends many large messages, you can use a barrier to limit the number of messages that are inflight at any given time. This can be particularly useful for messages that contain kernel resources (like file descriptors) which have a systemwide limit.\n\nIf a barrier is issued on a canceled connection, it will be invoked immediately. If a connection has been canceled and still has outstanding barriers, those barriers will be invoked as part of the connection’s unwinding process.\n\nIt is important to note that a barrier block’s execution order is not guaranteed with respect to other blocks that have been scheduled on the target queue of the connection. Or said differently, [doc:\/\/com.apple.xpc\/documentation\/XPC\/xpc_connection_send_barrier(_:_:)] is not equivalent to [doc:\/\/com.apple.documentation\/documentation\/Dispatch\/dispatch_async].\n\n## Messages\n\n- **xpc_connection_send_message(_:_:)**: Sends a message over the connection to the destination service.\n- **xpc_connection_send_message_with_reply(_:_:_:_:)**: Sends a message over the connection to the destination service and associates a handler to invoke when the remote service sends a reply message.\n- **xpc_connection_send_message_with_reply_sync(_:_:)**: Sends a message over the connection and blocks the caller until it receives a reply.\n- **xpc_main(_:)**: Starts listening for incoming connections and processes them with the specified event handler.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Sends a message over the connection to the destination service.",
          "name" : "xpc_connection_send_message(_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/XPC\/xpc_connection_send_message(_:_:)"
        },
        {
          "description" : "Sends a message over the connection to the destination service and associates a handler to invoke when the remote service sends a reply message.",
          "name" : "xpc_connection_send_message_with_reply(_:_:_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/XPC\/xpc_connection_send_message_with_reply(_:_:_:_:)"
        },
        {
          "description" : "Sends a message over the connection and blocks the caller until it receives a reply.",
          "name" : "xpc_connection_send_message_with_reply_sync(_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/XPC\/xpc_connection_send_message_with_reply_sync(_:_:)"
        },
        {
          "description" : "Starts listening for incoming connections and processes them with the specified event handler.",
          "name" : "xpc_main(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/XPC\/xpc_main(_:)"
        }
      ],
      "title" : "Messages"
    }
  ],
  "source" : "appleJSON",
  "title" : "xpc_connection_send_barrier(_:_:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/XPC\/xpc_connection_send_barrier(_:_:)"
}