{
  "abstract" : "Create and manage connections to services using connection-based APIs.",
  "codeExamples" : [

  ],
  "contentHash" : "06dd9cfb420b7f2da9ff4dd96cb0ca98d906585241dd21d9180cd0e2d4070337",
  "crawledAt" : "2025-12-05T13:20:50Z",
  "id" : "5A1DDDBA-47C9-4280-BF4A-82EA7626EDB8",
  "kind" : "collection",
  "language" : "swift",
  "module" : "XPC",
  "overview" : "## Overview\n\nUse these APIs to work with XPC connections and related types — for example, when a framework function that you call returns an [doc:\/\/com.apple.xpc\/documentation\/XPC\/xpc_connection_t].\n\nBut, in most situations, the listener- and session-based APIs are a better choice for designing XPC communication protocols. For more information, see [doc:\/\/com.apple.xpc\/documentation\/XPC\/creating-xpc-services].",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/XPC\/xpc-connections\ncrawled: 2025-12-05T13:20:50Z\n---\n\n# XPC connections\n\n**API Collection**\n\nCreate and manage connections to services using connection-based APIs.\n\n## Overview\n\nUse these APIs to work with XPC connections and related types — for example, when a framework function that you call returns an [doc:\/\/com.apple.xpc\/documentation\/XPC\/xpc_connection_t].\n\nBut, in most situations, the listener- and session-based APIs are a better choice for designing XPC communication protocols. For more information, see [doc:\/\/com.apple.xpc\/documentation\/XPC\/creating-xpc-services].\n\n## Creation\n\n- **xpc_connection_t**: A type that represents a connection to a named service.\n- **xpc_connection_create(_:_:)**: Creates a new connection object.\n- **xpc_connection_create_from_endpoint(_:)**: Creates a new connection from the specified endpoint.\n- **xpc_connection_create_mach_service(_:_:_:)**: Creates a new connection object that represents a Mach service.\n- **xpc_connection_set_target_queue(_:_:)**: Sets the target queue of the connection.\n- **XPC_CONNECTION_MACH_SERVICE_LISTENER**: A flag that indicates the caller is the listener for the named service.\n- **XPC_CONNECTION_MACH_SERVICE_PRIVILEGED**: A flag that indicates the job advertising the service name belongs to a launch daemon rather than a launch agent.\n\n## Event handling\n\n- **xpc_connection_set_event_handler(_:_:)**: Sets the event handler block for the connection.\n- **xpc_handler_t**: The type of block that the XPC connection APIs accept.\n- **xpc_connection_handler_t**: The type of the function to invoke for a bundled XPC service when there’s a new connection on the service.\n\n## Life cycle\n\n- **xpc_main(_:)**: Starts listening for incoming connections and processes them with the specified event handler.\n- **xpc_connection_activate(_:)**: Activates a new connection.\n- **xpc_connection_suspend(_:)**: Suspends the connection so the event handler block doesn’t fire and the connection doesn’t attempt to send any messages it has in its queue.\n- **xpc_connection_resume(_:)**: Resumes a suspended connection.\n- **xpc_connection_cancel(_:)**: Cancels the connection and ensures that its event handler doesn’t fire again.\n- **xpc_transaction_begin()**: Informs the XPC runtime when a transaction begins, indicating that the service isn’t idle.\n- **xpc_transaction_end()**: Informs the XPC runtime when a transaction ends.\n- **xpc_connection_copy_invalidation_reason(_:)**\n\n## Messages\n\n- **xpc_connection_send_message(_:_:)**: Sends a message over the connection to the destination service.\n- **xpc_connection_send_barrier(_:_:)**: Issues a barrier against the connection’s message-send activity.\n- **xpc_connection_send_message_with_reply(_:_:_:_:)**: Sends a message over the connection to the destination service and associates a handler to invoke when the remote service sends a reply message.\n- **xpc_connection_send_message_with_reply_sync(_:_:)**: Sends a message over the connection and blocks the caller until it receives a reply.\n- **xpc_main(_:)**: Starts listening for incoming connections and processes them with the specified event handler.\n\n## Remote peer information\n\n- **xpc_connection_get_name(_:)**: Returns the name of the remote service that creates the connection.\n- **xpc_connection_get_euid(_:)**: Returns the EUID of the remote peer.\n- **xpc_connection_get_egid(_:)**: Returns the EGID of the remote peer.\n- **xpc_connection_get_pid(_:)**: Returns the PID of the remote peer.\n- **xpc_connection_get_asid(_:)**: Returns the audit session identifier of the remote peer.\n- **xpc_connection_set_peer_entitlement_exists_requirement(_:_:)**: Sets a requirement that the executable for the peer process has a valid code signature that contains an entitlement.\n- **xpc_connection_set_peer_entitlement_matches_value_requirement(_:_:_:)**: Sets a requirement that the executable for the peer process has a valid code signature that contains an entitlement with a specific value.\n- **xpc_connection_set_peer_lightweight_code_requirement(_:_:)**: Sets a requirement that the executable for the peer process has a valid code signature that matches the lightweight code requirement.\n- **xpc_connection_set_peer_platform_identity_requirement(_:_:)**: Sets a requirement that the executable for the peer process has a valid code signature that identifies it as an Apple-signed binary with the given signing identifier.\n- **xpc_connection_set_peer_team_identity_requirement(_:_:)**: Sets a requirement that the executable for the peer process has a valid code signature and is signed by the same team identifier as the calling process.\n- **xpc_connection_set_peer_code_signing_requirement(_:_:)**\n\n## Context\n\n- **xpc_connection_set_context(_:_:)**: Sets a context on the connection.\n- **xpc_connection_get_context(_:)**: Returns the context for the connection.\n- **xpc_connection_set_finalizer_f(_:_:)**: Sets the finalizer for the connection.\n- **xpc_finalizer_t**: A function to invoke when tearing down a connection and freeing its context.\n\n## Endpoints\n\n- **xpc_endpoint_create(_:)**: Creates a new endpoint from a connection that is suitable for embedding into messages.\n- **xpc_endpoint_t**: A type that represents a connection in serialized form.\n\n## Errors\n\n- **XPC_ERROR_CONNECTION_INVALID**: An error that sends to the connection’s event handler to indicate that the connection is no longer usable.\n- **XPC_ERROR_CONNECTION_INTERRUPTED**: An error that sends to the connection’s event handler when the remote service exits.\n- **XPC_ERROR_TERMINATION_IMMINENT**: An error that sends to a peer connection’s event handler when the XPC runtime determines that the program needs to exit and that all outstanding transactions must wind down.\n\n## Additional Types\n\n- **XPC objects**: Encapsulate data in objects that represent primitive types, collections, and more.\n- **Utilities**: Browse debugging utilities and constants to use with the XPC APIs.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "A type that represents a connection to a named service.",
          "name" : "xpc_connection_t",
          "url" : "https:\/\/developer.apple.com\/documentation\/XPC\/xpc_connection_t"
        },
        {
          "description" : "Creates a new connection object.",
          "name" : "xpc_connection_create(_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/XPC\/xpc_connection_create(_:_:)"
        },
        {
          "description" : "Creates a new connection from the specified endpoint.",
          "name" : "xpc_connection_create_from_endpoint(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/XPC\/xpc_connection_create_from_endpoint(_:)"
        },
        {
          "description" : "Creates a new connection object that represents a Mach service.",
          "name" : "xpc_connection_create_mach_service(_:_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/XPC\/xpc_connection_create_mach_service(_:_:_:)"
        },
        {
          "description" : "Sets the target queue of the connection.",
          "name" : "xpc_connection_set_target_queue(_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/XPC\/xpc_connection_set_target_queue(_:_:)"
        },
        {
          "description" : "A flag that indicates the caller is the listener for the named service.",
          "name" : "XPC_CONNECTION_MACH_SERVICE_LISTENER",
          "url" : "https:\/\/developer.apple.com\/documentation\/XPC\/XPC_CONNECTION_MACH_SERVICE_LISTENER"
        },
        {
          "description" : "A flag that indicates the job advertising the service name belongs to a launch daemon rather than a launch agent.",
          "name" : "XPC_CONNECTION_MACH_SERVICE_PRIVILEGED",
          "url" : "https:\/\/developer.apple.com\/documentation\/XPC\/XPC_CONNECTION_MACH_SERVICE_PRIVILEGED"
        }
      ],
      "title" : "Creation"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Sets the event handler block for the connection.",
          "name" : "xpc_connection_set_event_handler(_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/XPC\/xpc_connection_set_event_handler(_:_:)"
        },
        {
          "description" : "The type of block that the XPC connection APIs accept.",
          "name" : "xpc_handler_t",
          "url" : "https:\/\/developer.apple.com\/documentation\/XPC\/xpc_handler_t"
        },
        {
          "description" : "The type of the function to invoke for a bundled XPC service when there’s a new connection on the service.",
          "name" : "xpc_connection_handler_t",
          "url" : "https:\/\/developer.apple.com\/documentation\/XPC\/xpc_connection_handler_t"
        }
      ],
      "title" : "Event handling"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Starts listening for incoming connections and processes them with the specified event handler.",
          "name" : "xpc_main(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/XPC\/xpc_main(_:)"
        },
        {
          "description" : "Activates a new connection.",
          "name" : "xpc_connection_activate(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/XPC\/xpc_connection_activate(_:)"
        },
        {
          "description" : "Suspends the connection so the event handler block doesn’t fire and the connection doesn’t attempt to send any messages it has in its queue.",
          "name" : "xpc_connection_suspend(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/XPC\/xpc_connection_suspend(_:)"
        },
        {
          "description" : "Resumes a suspended connection.",
          "name" : "xpc_connection_resume(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/XPC\/xpc_connection_resume(_:)"
        },
        {
          "description" : "Cancels the connection and ensures that its event handler doesn’t fire again.",
          "name" : "xpc_connection_cancel(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/XPC\/xpc_connection_cancel(_:)"
        },
        {
          "description" : "Informs the XPC runtime when a transaction begins, indicating that the service isn’t idle.",
          "name" : "xpc_transaction_begin()",
          "url" : "https:\/\/developer.apple.com\/documentation\/XPC\/xpc_transaction_begin()"
        },
        {
          "description" : "Informs the XPC runtime when a transaction ends.",
          "name" : "xpc_transaction_end()",
          "url" : "https:\/\/developer.apple.com\/documentation\/XPC\/xpc_transaction_end()"
        },
        {
          "description" : "",
          "name" : "xpc_connection_copy_invalidation_reason(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/XPC\/xpc_connection_copy_invalidation_reason(_:)"
        }
      ],
      "title" : "Life cycle"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Sends a message over the connection to the destination service.",
          "name" : "xpc_connection_send_message(_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/XPC\/xpc_connection_send_message(_:_:)"
        },
        {
          "description" : "Issues a barrier against the connection’s message-send activity.",
          "name" : "xpc_connection_send_barrier(_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/XPC\/xpc_connection_send_barrier(_:_:)"
        },
        {
          "description" : "Sends a message over the connection to the destination service and associates a handler to invoke when the remote service sends a reply message.",
          "name" : "xpc_connection_send_message_with_reply(_:_:_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/XPC\/xpc_connection_send_message_with_reply(_:_:_:_:)"
        },
        {
          "description" : "Sends a message over the connection and blocks the caller until it receives a reply.",
          "name" : "xpc_connection_send_message_with_reply_sync(_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/XPC\/xpc_connection_send_message_with_reply_sync(_:_:)"
        },
        {
          "description" : "Starts listening for incoming connections and processes them with the specified event handler.",
          "name" : "xpc_main(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/XPC\/xpc_main(_:)"
        }
      ],
      "title" : "Messages"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Returns the name of the remote service that creates the connection.",
          "name" : "xpc_connection_get_name(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/XPC\/xpc_connection_get_name(_:)"
        },
        {
          "description" : "Returns the EUID of the remote peer.",
          "name" : "xpc_connection_get_euid(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/XPC\/xpc_connection_get_euid(_:)"
        },
        {
          "description" : "Returns the EGID of the remote peer.",
          "name" : "xpc_connection_get_egid(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/XPC\/xpc_connection_get_egid(_:)"
        },
        {
          "description" : "Returns the PID of the remote peer.",
          "name" : "xpc_connection_get_pid(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/XPC\/xpc_connection_get_pid(_:)"
        },
        {
          "description" : "Returns the audit session identifier of the remote peer.",
          "name" : "xpc_connection_get_asid(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/XPC\/xpc_connection_get_asid(_:)"
        },
        {
          "description" : "Sets a requirement that the executable for the peer process has a valid code signature that contains an entitlement.",
          "name" : "xpc_connection_set_peer_entitlement_exists_requirement(_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/XPC\/xpc_connection_set_peer_entitlement_exists_requirement(_:_:)"
        },
        {
          "description" : "Sets a requirement that the executable for the peer process has a valid code signature that contains an entitlement with a specific value.",
          "name" : "xpc_connection_set_peer_entitlement_matches_value_requirement(_:_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/XPC\/xpc_connection_set_peer_entitlement_matches_value_requirement(_:_:_:)"
        },
        {
          "description" : "Sets a requirement that the executable for the peer process has a valid code signature that matches the lightweight code requirement.",
          "name" : "xpc_connection_set_peer_lightweight_code_requirement(_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/XPC\/xpc_connection_set_peer_lightweight_code_requirement(_:_:)"
        },
        {
          "description" : "Sets a requirement that the executable for the peer process has a valid code signature that identifies it as an Apple-signed binary with the given signing identifier.",
          "name" : "xpc_connection_set_peer_platform_identity_requirement(_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/XPC\/xpc_connection_set_peer_platform_identity_requirement(_:_:)"
        },
        {
          "description" : "Sets a requirement that the executable for the peer process has a valid code signature and is signed by the same team identifier as the calling process.",
          "name" : "xpc_connection_set_peer_team_identity_requirement(_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/XPC\/xpc_connection_set_peer_team_identity_requirement(_:_:)"
        },
        {
          "description" : "",
          "name" : "xpc_connection_set_peer_code_signing_requirement(_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/XPC\/xpc_connection_set_peer_code_signing_requirement(_:_:)"
        }
      ],
      "title" : "Remote peer information"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Sets a context on the connection.",
          "name" : "xpc_connection_set_context(_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/XPC\/xpc_connection_set_context(_:_:)"
        },
        {
          "description" : "Returns the context for the connection.",
          "name" : "xpc_connection_get_context(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/XPC\/xpc_connection_get_context(_:)"
        },
        {
          "description" : "Sets the finalizer for the connection.",
          "name" : "xpc_connection_set_finalizer_f(_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/XPC\/xpc_connection_set_finalizer_f(_:_:)"
        },
        {
          "description" : "A function to invoke when tearing down a connection and freeing its context.",
          "name" : "xpc_finalizer_t",
          "url" : "https:\/\/developer.apple.com\/documentation\/XPC\/xpc_finalizer_t"
        }
      ],
      "title" : "Context"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Creates a new endpoint from a connection that is suitable for embedding into messages.",
          "name" : "xpc_endpoint_create(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/XPC\/xpc_endpoint_create(_:)"
        },
        {
          "description" : "A type that represents a connection in serialized form.",
          "name" : "xpc_endpoint_t",
          "url" : "https:\/\/developer.apple.com\/documentation\/XPC\/xpc_endpoint_t"
        }
      ],
      "title" : "Endpoints"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "An error that sends to the connection’s event handler to indicate that the connection is no longer usable.",
          "name" : "XPC_ERROR_CONNECTION_INVALID",
          "url" : "https:\/\/developer.apple.com\/documentation\/XPC\/XPC_ERROR_CONNECTION_INVALID-swift.var"
        },
        {
          "description" : "An error that sends to the connection’s event handler when the remote service exits.",
          "name" : "XPC_ERROR_CONNECTION_INTERRUPTED",
          "url" : "https:\/\/developer.apple.com\/documentation\/XPC\/XPC_ERROR_CONNECTION_INTERRUPTED-swift.var"
        },
        {
          "description" : "An error that sends to a peer connection’s event handler when the XPC runtime determines that the program needs to exit and that all outstanding transactions must wind down.",
          "name" : "XPC_ERROR_TERMINATION_IMMINENT",
          "url" : "https:\/\/developer.apple.com\/documentation\/XPC\/XPC_ERROR_TERMINATION_IMMINENT-swift.var"
        }
      ],
      "title" : "Errors"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Encapsulate data in objects that represent primitive types, collections, and more.",
          "name" : "XPC objects",
          "url" : "https:\/\/developer.apple.com\/documentation\/XPC\/xpc-objects"
        },
        {
          "description" : "Browse debugging utilities and constants to use with the XPC APIs.",
          "name" : "Utilities",
          "url" : "https:\/\/developer.apple.com\/documentation\/XPC\/utilities"
        }
      ],
      "title" : "Additional Types"
    }
  ],
  "source" : "appleJSON",
  "title" : "XPC connections",
  "url" : "https:\/\/developer.apple.com\/documentation\/XPC\/xpc-connections"
}