{
  "abstract" : "Sends a message over the connection to the destination service and associates a handler to invoke when the remote service sends a reply message.",
  "codeExamples" : [

  ],
  "contentHash" : "0ae2aae2551144eda8e217805c912c74aba080ecfc719a04d32c8b2cf9541f47",
  "crawledAt" : "2025-12-07T16:55:11Z",
  "declaration" : {
    "code" : "func xpc_connection_send_message_with_reply(_ connection: xpc_connection_t, _ message: xpc_object_t, _ replyq: dispatch_queue_t?, _ handler: @escaping (xpc_object_t) -> Void)",
    "language" : "swift"
  },
  "id" : "41B501D9-1C15-420E-9AE0-EA7C2F27F012",
  "kind" : "function",
  "language" : "swift",
  "module" : "XPC",
  "overview" : "## Discussion\n\nIf the given GCD queue is a concurrent queue, XPC cannot guarantee that there will not be multiple reply handlers being invoked concurrently. XPC does not guarantee any ordering for the invocation of reply handers. So if multiple messages are waiting for replies and the connection goes invalid, there is no guarantee that the reply handlers will be invoked in FIFO order. Similarly, XPC does not guarantee that reply handlers will not run concurrently with the connection’s event handler in the case that the reply queue and the connection’s target queue are the same concurrent queue.",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/XPC\/xpc_connection_send_message_with_reply(_:_:_:_:)\ncrawled: 2025-12-07T16:55:11Z\n---\n\n# xpc_connection_send_message_with_reply(_:_:_:_:)\n\n**Function**\n\nSends a message over the connection to the destination service and associates a handler to invoke when the remote service sends a reply message.\n\n## Declaration\n\n```swift\nfunc xpc_connection_send_message_with_reply(_ connection: xpc_connection_t, _ message: xpc_object_t, _ replyq: dispatch_queue_t?, _ handler: @escaping (xpc_object_t) -> Void)\n```\n\n## Parameters\n\n- **connection**: The connection over which the message shall be sent.\n- **message**: The message to send. This must be a dictionary object.\n- **replyq**: The GCD queue to which the reply handler will be submitted. This may be a concurrent queue.\n- **handler**: The handler block to invoke when a reply to the message is received from the connection. If the remote service exits prematurely before the reply was received, the [doc:\/\/com.apple.xpc\/documentation\/XPC\/XPC_ERROR_CONNECTION_INTERRUPTED-swift.var] error will be returned. If the connection went invalid before the message could be sent, the [doc:\/\/com.apple.xpc\/documentation\/XPC\/XPC_ERROR_CONNECTION_INVALID-swift.var] error will be returned.\n\n## Discussion\n\nIf the given GCD queue is a concurrent queue, XPC cannot guarantee that there will not be multiple reply handlers being invoked concurrently. XPC does not guarantee any ordering for the invocation of reply handers. So if multiple messages are waiting for replies and the connection goes invalid, there is no guarantee that the reply handlers will be invoked in FIFO order. Similarly, XPC does not guarantee that reply handlers will not run concurrently with the connection’s event handler in the case that the reply queue and the connection’s target queue are the same concurrent queue.\n\n## Messages\n\n- **xpc_connection_send_message(_:_:)**: Sends a message over the connection to the destination service.\n- **xpc_connection_send_barrier(_:_:)**: Issues a barrier against the connection’s message-send activity.\n- **xpc_connection_send_message_with_reply_sync(_:_:)**: Sends a message over the connection and blocks the caller until it receives a reply.\n- **xpc_main(_:)**: Starts listening for incoming connections and processes them with the specified event handler.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Sends a message over the connection to the destination service.",
          "name" : "xpc_connection_send_message(_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/XPC\/xpc_connection_send_message(_:_:)"
        },
        {
          "description" : "Issues a barrier against the connection’s message-send activity.",
          "name" : "xpc_connection_send_barrier(_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/XPC\/xpc_connection_send_barrier(_:_:)"
        },
        {
          "description" : "Sends a message over the connection and blocks the caller until it receives a reply.",
          "name" : "xpc_connection_send_message_with_reply_sync(_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/XPC\/xpc_connection_send_message_with_reply_sync(_:_:)"
        },
        {
          "description" : "Starts listening for incoming connections and processes them with the specified event handler.",
          "name" : "xpc_main(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/XPC\/xpc_main(_:)"
        }
      ],
      "title" : "Messages"
    }
  ],
  "source" : "appleJSON",
  "title" : "xpc_connection_send_message_with_reply(_:_:_:_:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/XPC\/xpc_connection_send_message_with_reply(_:_:_:_:)"
}