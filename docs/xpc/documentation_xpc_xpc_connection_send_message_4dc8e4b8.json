{
  "abstract" : "Sends a message over the connection to the destination service.",
  "codeExamples" : [

  ],
  "contentHash" : "cb7b5ce7cdf3c925c2caab6b15f19f5aae4537e8a6a2912b2cff182b9abdf7fa",
  "crawledAt" : "2025-12-07T15:30:14Z",
  "declaration" : {
    "code" : "func xpc_connection_send_message(_ connection: xpc_connection_t, _ message: xpc_object_t)",
    "language" : "swift"
  },
  "id" : "5CCE9DF4-9AB3-45F6-9CA9-DD87652AC896",
  "kind" : "function",
  "language" : "swift",
  "module" : "XPC",
  "overview" : "## Discussion\n\nMessages are delivered in FIFO order. This API is safe to call from multiple GCD queues. There is no indication that a message was delivered successfully. This is because even once the message has been successfully enqueued on the remote end, there are no guarantees about when the runtime will dequeue the message and invoke the other connection’s event handler block.\n\nIf this API is used to send a message that is in reply to another message, there is no guarantee of ordering between the invocations of the connection’s event handler and the reply handler for that message, even if they are targeted to the same queue.\n\nAfter extensive study, we have found that clients who are interested in the state of the message on the server end are typically holding open transactions related to that message. And the only reliable way to track the lifetime of that transaction is at the protocol layer. So the server should send a reply message, which upon receiving, will cause the client to close its transaction.",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/XPC\/xpc_connection_send_message(_:_:)\ncrawled: 2025-12-07T15:30:14Z\n---\n\n# xpc_connection_send_message(_:_:)\n\n**Function**\n\nSends a message over the connection to the destination service.\n\n## Declaration\n\n```swift\nfunc xpc_connection_send_message(_ connection: xpc_connection_t, _ message: xpc_object_t)\n```\n\n## Parameters\n\n- **connection**: The connection over which the message shall be sent.\n- **message**: The message to send. This must be a dictionary object. This dictionary is logically copied by the connection, so it is safe to modify the dictionary after this call.\n\n## Discussion\n\nMessages are delivered in FIFO order. This API is safe to call from multiple GCD queues. There is no indication that a message was delivered successfully. This is because even once the message has been successfully enqueued on the remote end, there are no guarantees about when the runtime will dequeue the message and invoke the other connection’s event handler block.\n\nIf this API is used to send a message that is in reply to another message, there is no guarantee of ordering between the invocations of the connection’s event handler and the reply handler for that message, even if they are targeted to the same queue.\n\nAfter extensive study, we have found that clients who are interested in the state of the message on the server end are typically holding open transactions related to that message. And the only reliable way to track the lifetime of that transaction is at the protocol layer. So the server should send a reply message, which upon receiving, will cause the client to close its transaction.\n\n## Messages\n\n- **xpc_connection_send_barrier(_:_:)**: Issues a barrier against the connection’s message-send activity.\n- **xpc_connection_send_message_with_reply(_:_:_:_:)**: Sends a message over the connection to the destination service and associates a handler to invoke when the remote service sends a reply message.\n- **xpc_connection_send_message_with_reply_sync(_:_:)**: Sends a message over the connection and blocks the caller until it receives a reply.\n- **xpc_main(_:)**: Starts listening for incoming connections and processes them with the specified event handler.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Issues a barrier against the connection’s message-send activity.",
          "name" : "xpc_connection_send_barrier(_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/XPC\/xpc_connection_send_barrier(_:_:)"
        },
        {
          "description" : "Sends a message over the connection to the destination service and associates a handler to invoke when the remote service sends a reply message.",
          "name" : "xpc_connection_send_message_with_reply(_:_:_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/XPC\/xpc_connection_send_message_with_reply(_:_:_:_:)"
        },
        {
          "description" : "Sends a message over the connection and blocks the caller until it receives a reply.",
          "name" : "xpc_connection_send_message_with_reply_sync(_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/XPC\/xpc_connection_send_message_with_reply_sync(_:_:)"
        },
        {
          "description" : "Starts listening for incoming connections and processes them with the specified event handler.",
          "name" : "xpc_main(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/XPC\/xpc_main(_:)"
        }
      ],
      "title" : "Messages"
    }
  ],
  "source" : "appleJSON",
  "title" : "xpc_connection_send_message(_:_:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/XPC\/xpc_connection_send_message(_:_:)"
}