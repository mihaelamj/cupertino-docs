{
  "abstract" : "Build app extensions that provide a custom UI, and host those views in your app’s interface.",
  "codeExamples" : [
    {
      "code" : "extension AppExtensionPoint {\n\n    @Definition\n    public static var greetingExtension: AppExtensionPoint {\n        Name(\"GreetingUI\")\n        UserInterface(true)\n        Scope(restriction: .none)\n    }\n}",
      "language" : "swift"
    },
    {
      "code" : "struct ExtensionView: NSViewControllerRepresentable {\n    typealias NSViewControllerType = EXHostViewController\n    \n    let identity: AppExtensionIdentity\n    let sceneID: String\n    \n    func makeNSViewController(context: Context) -> EXHostViewController {\n        let viewController = EXHostViewController()\n        viewController.configuration = EXHostViewController.Configuration(appExtension: identity, sceneID: sceneID)\n        \n        return viewController\n    }\n    \n    func updateNSViewController(_ uiViewController: EXHostViewController, context: Context) {\n        uiViewController.configuration = EXHostViewController.Configuration(appExtension: identity, sceneID: sceneID)\n    }\n}",
      "language" : "swift"
    },
    {
      "code" : "struct ContentView: View {\n    \n    @State private var viewModel = ViewModel()\n\n    var body: some View {\n        NavigationStack {\n        \n            VStack {\n                if viewModel.identities.count > 0 {\n                    ForEach(viewModel.identities, id: \\.self) { identity in\n                        ExtensionView(identity: identity, sceneID: \"GreetingScene\")\n                    }\n                }\n                else {\n                    Text(\"No greeting available.\")\n                }\n            }\n            .padding()\n            .task {\n                await viewModel.load()\n            }\n        }\n    }\n}",
      "language" : "swift"
    },
    {
      "code" : "struct ExampleScene<Content: View>: ExampleAppExtensionScene {\n    \n    let sceneID = \"GreetingScene\"\n\n    public init(content: @escaping () ->  Content) {\n        self.content = content\n    }\n    \n    private let content: () -> Content\n    \n    public var body: some AppExtensionScene {\n        PrimitiveAppExtensionScene(id: sceneID) {\n            content()\n        } onConnection: { connection in\n            \/\/ TODO: Configure the XPC connection and return true\n            return true\n        }\n    }\n}",
      "language" : "swift"
    },
    {
      "code" : "@main\nclass MyExtension : ExampleExtension {\n   \/\/ The initializer and binding declaration code.\n\n    var body: some ExampleAppExtensionScene {\n        ExampleScene {\n            Text(\"Scene 1!\")\n        }\n        SecondScene {\n            Text(\"Scene 2!\")\n        }\n    }\n}",
      "language" : "swift"
    },
    {
      "code" : "public var body: some AppExtensionScene {\n    PrimitiveAppExtensionScene(id: sceneID) {\n        content()\n    } onConnection: { connection in\n        connection.exportedObject = MySceneManager\n        connection.exportedInterface = NSXPCInterface(with: HostInterface.self)\n        connection.resume()\n        return true\n    }\n}",
      "language" : "swift"
    }
  ],
  "contentHash" : "82369d1d5f229e95be1637fbf38d1458d1a8b0a27579505582574fff3f886726",
  "crawledAt" : "2025-12-05T13:23:48Z",
  "id" : "52C1869F-27A2-48E1-A9E3-C32110AB188B",
  "kind" : "article",
  "language" : "swift",
  "module" : "ExtensionKit",
  "overview" : "## Overview\n\nWhen adding support for app extensions, you can configure one of your app’s extension points to support a custom UI. You might choose this option when the app extension needs to manage the presented content. For example, an image-editing app might let app extensions present their own UI to configure custom image modifications.\n\nTo support app extensions with custom UI, both the app and app extensions must adopt the [doc:\/\/com.apple.extensionkit\/documentation\/ExtensionKit] framework. To display the app extension’s UI, the host app presents a view controller from its interface. The app extension provides the content for that view controller, delivering it the host app with the framework’s help.\n\n### Add the user interface attribute to your extension point\n\nTo display custom UI from app extensions, the host app’s extension point must include the [doc:\/\/com.apple.documentation\/documentation\/ExtensionFoundation\/AppExtensionPoint\/UserInterface] attribute in its extension point definition. When this attribute is present and has a value of `true`, the host app can incorporate custom UI from its app extensions. The following example shows an extension point definition that includes this attribute:\n\nIn an app extension, the binding declaration you create remains the same whether or not you’re providing custom UI. You’re expected to know whether the extension point requires a custom UI. If you’re creating an app extension for another app, the app’s SDK needs to specify this information.\n\n### Display a host view controller from your app’s interface\n\nYou’re responsible for deciding how best to integrate UI from app extensions into your host app. You might incorporate this content in a separate window, as part of an inspector, in a settings panel, or in other ways.\n\nTo display the UI for an app extension, add an [doc:\/\/com.apple.extensionkit\/documentation\/ExtensionKit\/EXHostViewController] to your app’s interface.\nApp extensions can provide multiple scenes of content, but the host view controller displays only one of those scenes at a time. When configuring the view controller, specify the identity of the app extension and a string with the name of the scene you want to display in the view controller’s [doc:\/\/com.apple.extensionkit\/documentation\/ExtensionKit\/EXHostViewController\/configuration-swift.property] property. The app extension uses the scene name to deliver the correct set of views to your app. To display a different scene, change the configuration details or display a new host view controller.\n\nWhen building your interface with SwiftUI, wrap the [doc:\/\/com.apple.extensionkit\/documentation\/ExtensionKit\/EXHostViewController] in a representable type for the corresponding platform. The [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/UIViewControllerRepresentable] and [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/NSViewControllerRepresentable] protocols give you a way to create a SwiftUI view using content from a UIKit or AppKit view controller. The following example shows a SwiftUI view for macOS that wraps the [doc:\/\/com.apple.extensionkit\/documentation\/ExtensionKit\/EXHostViewController] type. The view stores the scene name and app extension identity as local variables, which it uses to configure the view controller.\n\nWhen you display an [doc:\/\/com.apple.extensionkit\/documentation\/ExtensionKit\/EXHostViewController] in your app’s interface, either directly or as part of a SwiftUI view, the view controller loads the relevant views from the app extension. Treat the view controller’s content as opaque, and focus on where in your UI you want to display it. The following example displays the UI from one or more app extensions using the custom `ExtensionView` type from the previous example. The custom `viewModel` object locates the available app extensions using an [doc:\/\/com.apple.documentation\/documentation\/ExtensionFoundation\/AppExtensionPoint\/Monitor] type.\n\nFor information about how to get the list of app extension identities using a monitor, see [doc:\/\/com.apple.documentation\/documentation\/ExtensionFoundation\/discovering-app-extensions-from-your-app].\n\n### Create the initial scene for your app extension\n\nTo build an app extension with custom UI, create that UI using a special set of types from the [doc:\/\/com.apple.extensionkit\/documentation\/ExtensionKit] framework. The recommended way to create your custom views is with SwiftUI, and the framework provides SwiftUI scenes to incorporate into your app extension. When creating new app extensions, the Xcode templates provide the initial views you need to build your UI.\n\nTo create a new UI-based app extension:\n\nThe template code contains an initial code for you to modify. When starting from this template, make most of your changes in the custom [doc:\/\/com.apple.documentation\/documentation\/ExtensionFoundation\/AppExtension] type:\n\nThe template’s `ExampleScene` type provides a concrete implementation of a scene that you can use without modification. This scene delivers your SwiftUI views to the host app using a [doc:\/\/com.apple.extensionkit\/documentation\/ExtensionKit\/PrimitiveAppExtensionScene] structure. To display the correct scene, make sure the string you passed to the initializer of this structure matches the scene the host app requests. In the example code, specify the scene name using the `sceneID` property, as shown in the following example:\n\nIf your app extension offers multiple scenes, create a separate [doc:\/\/com.apple.extensionkit\/documentation\/ExtensionKit\/AppExtensionScene] type for each unique scene you display. If you’re starting from the Xcode template, duplicate the `ExampleScene` type and update the type name and scene ID information. To make each new scene type available, update the `body` property of the [doc:\/\/com.apple.documentation\/documentation\/ExtensionFoundation\/AppExtension] subclass, as shown in the example below. When the host app requests a scene, [doc:\/\/com.apple.extensionkit\/documentation\/ExtensionKit] determines which scene contains a [doc:\/\/com.apple.extensionkit\/documentation\/ExtensionKit\/PrimitiveAppExtensionScene] with the matching scene ID and returns its content.\n\n### Handle incoming XPC connection requests\n\n[doc:\/\/com.apple.extensionkit\/documentation\/ExtensionKit] handles interface-related updates between the app extension and host app, but the host app might still want to exchange data directly with the app extension. For example, a host app might need to send data to the app extension that’s unrelated to the UI. To facilitate this type of transfer, the host app has two options:\n\nTo communicate with a specific instance of the app extension’s UI, the host app makes an XPC connection using its [doc:\/\/com.apple.extensionkit\/documentation\/ExtensionKit\/EXHostViewController] object. Calling the [doc:\/\/com.apple.extensionkit\/documentation\/ExtensionKit\/EXHostViewController\/makeXPCConnection()] method creates a connection to the [doc:\/\/com.apple.extensionkit\/documentation\/ExtensionKit\/PrimitiveAppExtensionScene] type in the app extension. Use the `onConnection` handler of that type to accept the XPC connection request and provide the host app with a proxy object, as shown in the following code:\n\nTo create a global connection that’s independent of a specific UI instance, the host app initiates the XPC connection from its [doc:\/\/com.apple.documentation\/documentation\/ExtensionFoundation\/AppExtensionProcess] type. The app extension responds to connection requests using the [doc:\/\/com.apple.documentation\/documentation\/ExtensionFoundation\/AppExtensionConfiguration\/accept(connection:)] method in its [doc:\/\/com.apple.documentation\/documentation\/ExtensionFoundation\/AppExtensionConfiguration] type. For information about setting up this connection, see [doc:\/\/com.apple.documentation\/documentation\/ExtensionFoundation\/building-an-app-extension-to-support-a-host-app#Configure-the-XPC-connection-to-the-host-app].\n\n### Respond to activation and deactivation events\n\nCreating and presenting an [doc:\/\/com.apple.extensionkit\/documentation\/ExtensionKit\/EXHostViewController] from your app doesn’t guarantee the appearance of an app extension’s UI. [doc:\/\/com.apple.extensionkit\/documentation\/ExtensionKit] might need to launch the app extension and get it running first, before the host app tries to create an XPC connection to it. Similarly, the app extension might exit unexpectedly or require the dismantling of its views for other reasons. The host view controller reports these changes to its associated delegate object.\n\nWhen the app extension is ready to accept an XPC connection, the host view controller calls its delegate’s [doc:\/\/com.apple.extensionkit\/documentation\/ExtensionKit\/EXHostViewControllerDelegate\/hostViewControllerDidActivate(_:)] method. Use this method to initiate the XPC connection and start communication with the app extension. Similarly, use the delegate’s [doc:\/\/com.apple.extensionkit\/documentation\/ExtensionKit\/EXHostViewControllerDelegate\/hostViewControllerWillDeactivate(_:error:)] to close out the current connection and stop communicating with the app extension.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/extensionkit\/including-extension-based-ui-in-your-interface\ncrawled: 2025-12-05T13:23:48Z\n---\n\n# Including extension-based UI in your interface\n\n**Article**\n\nBuild app extensions that provide a custom UI, and host those views in your app’s interface.\n\n## Overview\n\nWhen adding support for app extensions, you can configure one of your app’s extension points to support a custom UI. You might choose this option when the app extension needs to manage the presented content. For example, an image-editing app might let app extensions present their own UI to configure custom image modifications.\n\nTo support app extensions with custom UI, both the app and app extensions must adopt the [doc:\/\/com.apple.extensionkit\/documentation\/ExtensionKit] framework. To display the app extension’s UI, the host app presents a view controller from its interface. The app extension provides the content for that view controller, delivering it the host app with the framework’s help.\n\n### Add the user interface attribute to your extension point\n\nTo display custom UI from app extensions, the host app’s extension point must include the [doc:\/\/com.apple.documentation\/documentation\/ExtensionFoundation\/AppExtensionPoint\/UserInterface] attribute in its extension point definition. When this attribute is present and has a value of `true`, the host app can incorporate custom UI from its app extensions. The following example shows an extension point definition that includes this attribute:\n\n```swift\nextension AppExtensionPoint {\n\n    @Definition\n    public static var greetingExtension: AppExtensionPoint {\n        Name(\"GreetingUI\")\n        UserInterface(true)\n        Scope(restriction: .none)\n    }\n}\n```\n\nIn an app extension, the binding declaration you create remains the same whether or not you’re providing custom UI. You’re expected to know whether the extension point requires a custom UI. If you’re creating an app extension for another app, the app’s SDK needs to specify this information.\n\n### Display a host view controller from your app’s interface\n\nYou’re responsible for deciding how best to integrate UI from app extensions into your host app. You might incorporate this content in a separate window, as part of an inspector, in a settings panel, or in other ways.\n\nTo display the UI for an app extension, add an [doc:\/\/com.apple.extensionkit\/documentation\/ExtensionKit\/EXHostViewController] to your app’s interface.\nApp extensions can provide multiple scenes of content, but the host view controller displays only one of those scenes at a time. When configuring the view controller, specify the identity of the app extension and a string with the name of the scene you want to display in the view controller’s [doc:\/\/com.apple.extensionkit\/documentation\/ExtensionKit\/EXHostViewController\/configuration-swift.property] property. The app extension uses the scene name to deliver the correct set of views to your app. To display a different scene, change the configuration details or display a new host view controller.\n\nWhen building your interface with SwiftUI, wrap the [doc:\/\/com.apple.extensionkit\/documentation\/ExtensionKit\/EXHostViewController] in a representable type for the corresponding platform. The [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/UIViewControllerRepresentable] and [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/NSViewControllerRepresentable] protocols give you a way to create a SwiftUI view using content from a UIKit or AppKit view controller. The following example shows a SwiftUI view for macOS that wraps the [doc:\/\/com.apple.extensionkit\/documentation\/ExtensionKit\/EXHostViewController] type. The view stores the scene name and app extension identity as local variables, which it uses to configure the view controller.\n\n```swift\nstruct ExtensionView: NSViewControllerRepresentable {\n    typealias NSViewControllerType = EXHostViewController\n    \n    let identity: AppExtensionIdentity\n    let sceneID: String\n    \n    func makeNSViewController(context: Context) -> EXHostViewController {\n        let viewController = EXHostViewController()\n        viewController.configuration = EXHostViewController.Configuration(appExtension: identity, sceneID: sceneID)\n        \n        return viewController\n    }\n    \n    func updateNSViewController(_ uiViewController: EXHostViewController, context: Context) {\n        uiViewController.configuration = EXHostViewController.Configuration(appExtension: identity, sceneID: sceneID)\n    }\n}\n```\n\nWhen you display an [doc:\/\/com.apple.extensionkit\/documentation\/ExtensionKit\/EXHostViewController] in your app’s interface, either directly or as part of a SwiftUI view, the view controller loads the relevant views from the app extension. Treat the view controller’s content as opaque, and focus on where in your UI you want to display it. The following example displays the UI from one or more app extensions using the custom `ExtensionView` type from the previous example. The custom `viewModel` object locates the available app extensions using an [doc:\/\/com.apple.documentation\/documentation\/ExtensionFoundation\/AppExtensionPoint\/Monitor] type.\n\n```swift\nstruct ContentView: View {\n    \n    @State private var viewModel = ViewModel()\n\n    var body: some View {\n        NavigationStack {\n        \n            VStack {\n                if viewModel.identities.count > 0 {\n                    ForEach(viewModel.identities, id: \\.self) { identity in\n                        ExtensionView(identity: identity, sceneID: \"GreetingScene\")\n                    }\n                }\n                else {\n                    Text(\"No greeting available.\")\n                }\n            }\n            .padding()\n            .task {\n                await viewModel.load()\n            }\n        }\n    }\n}\n```\n\nFor information about how to get the list of app extension identities using a monitor, see [doc:\/\/com.apple.documentation\/documentation\/ExtensionFoundation\/discovering-app-extensions-from-your-app].\n\n### Create the initial scene for your app extension\n\nTo build an app extension with custom UI, create that UI using a special set of types from the [doc:\/\/com.apple.extensionkit\/documentation\/ExtensionKit] framework. The recommended way to create your custom views is with SwiftUI, and the framework provides SwiftUI scenes to incorporate into your app extension. When creating new app extensions, the Xcode templates provide the initial views you need to build your UI.\n\nTo create a new UI-based app extension:\n\n1. Add a new target to your Xcode project.\n2. Choose the Generic extension template.\n3. Click Next.\n4. In the options panel, set the extension type UI Extension.\n5. Provide a name and specify other options for your app extension.\n6. Click Finish.\n\nThe template code contains an initial code for you to modify. When starting from this template, make most of your changes in the custom [doc:\/\/com.apple.documentation\/documentation\/ExtensionFoundation\/AppExtension] type:\n\n- Put your SwiftUI views in the closure for the scene in the `body` property.\n- Update the information in the [doc:\/\/com.apple.documentation\/documentation\/ExtensionFoundation\/AppExtensionPoint\/Bind]. Specify the name of the host app and the specific extension point you’re supporting.\n- Add any custom initialization code to the `init()` method.\n\nThe template’s `ExampleScene` type provides a concrete implementation of a scene that you can use without modification. This scene delivers your SwiftUI views to the host app using a [doc:\/\/com.apple.extensionkit\/documentation\/ExtensionKit\/PrimitiveAppExtensionScene] structure. To display the correct scene, make sure the string you passed to the initializer of this structure matches the scene the host app requests. In the example code, specify the scene name using the `sceneID` property, as shown in the following example:\n\n```swift\nstruct ExampleScene<Content: View>: ExampleAppExtensionScene {\n    \n    let sceneID = \"GreetingScene\"\n\n    public init(content: @escaping () ->  Content) {\n        self.content = content\n    }\n    \n    private let content: () -> Content\n    \n    public var body: some AppExtensionScene {\n        PrimitiveAppExtensionScene(id: sceneID) {\n            content()\n        } onConnection: { connection in\n            \/\/ TODO: Configure the XPC connection and return true\n            return true\n        }\n    }\n}\n```\n\nIf your app extension offers multiple scenes, create a separate [doc:\/\/com.apple.extensionkit\/documentation\/ExtensionKit\/AppExtensionScene] type for each unique scene you display. If you’re starting from the Xcode template, duplicate the `ExampleScene` type and update the type name and scene ID information. To make each new scene type available, update the `body` property of the [doc:\/\/com.apple.documentation\/documentation\/ExtensionFoundation\/AppExtension] subclass, as shown in the example below. When the host app requests a scene, [doc:\/\/com.apple.extensionkit\/documentation\/ExtensionKit] determines which scene contains a [doc:\/\/com.apple.extensionkit\/documentation\/ExtensionKit\/PrimitiveAppExtensionScene] with the matching scene ID and returns its content.\n\n```swift\n@main\nclass MyExtension : ExampleExtension {\n   \/\/ The initializer and binding declaration code.\n\n    var body: some ExampleAppExtensionScene {\n        ExampleScene {\n            Text(\"Scene 1!\")\n        }\n        SecondScene {\n            Text(\"Scene 2!\")\n        }\n    }\n}\n```\n\n### Handle incoming XPC connection requests\n\n[doc:\/\/com.apple.extensionkit\/documentation\/ExtensionKit] handles interface-related updates between the app extension and host app, but the host app might still want to exchange data directly with the app extension. For example, a host app might need to send data to the app extension that’s unrelated to the UI. To facilitate this type of transfer, the host app has two options:\n\n- Configure an XPC connection that’s tied to a specific instance of the app extension’s UI.\n- Configure an XPC connection that’s global to the app extension.\n\nTo communicate with a specific instance of the app extension’s UI, the host app makes an XPC connection using its [doc:\/\/com.apple.extensionkit\/documentation\/ExtensionKit\/EXHostViewController] object. Calling the [doc:\/\/com.apple.extensionkit\/documentation\/ExtensionKit\/EXHostViewController\/makeXPCConnection()] method creates a connection to the [doc:\/\/com.apple.extensionkit\/documentation\/ExtensionKit\/PrimitiveAppExtensionScene] type in the app extension. Use the `onConnection` handler of that type to accept the XPC connection request and provide the host app with a proxy object, as shown in the following code:\n\n```swift\npublic var body: some AppExtensionScene {\n    PrimitiveAppExtensionScene(id: sceneID) {\n        content()\n    } onConnection: { connection in\n        connection.exportedObject = MySceneManager\n        connection.exportedInterface = NSXPCInterface(with: HostInterface.self)\n        connection.resume()\n        return true\n    }\n}\n```\n\nTo create a global connection that’s independent of a specific UI instance, the host app initiates the XPC connection from its [doc:\/\/com.apple.documentation\/documentation\/ExtensionFoundation\/AppExtensionProcess] type. The app extension responds to connection requests using the [doc:\/\/com.apple.documentation\/documentation\/ExtensionFoundation\/AppExtensionConfiguration\/accept(connection:)] method in its [doc:\/\/com.apple.documentation\/documentation\/ExtensionFoundation\/AppExtensionConfiguration] type. For information about setting up this connection, see [doc:\/\/com.apple.documentation\/documentation\/ExtensionFoundation\/building-an-app-extension-to-support-a-host-app#Configure-the-XPC-connection-to-the-host-app].\n\n### Respond to activation and deactivation events\n\nCreating and presenting an [doc:\/\/com.apple.extensionkit\/documentation\/ExtensionKit\/EXHostViewController] from your app doesn’t guarantee the appearance of an app extension’s UI. [doc:\/\/com.apple.extensionkit\/documentation\/ExtensionKit] might need to launch the app extension and get it running first, before the host app tries to create an XPC connection to it. Similarly, the app extension might exit unexpectedly or require the dismantling of its views for other reasons. The host view controller reports these changes to its associated delegate object.\n\nWhen the app extension is ready to accept an XPC connection, the host view controller calls its delegate’s [doc:\/\/com.apple.extensionkit\/documentation\/ExtensionKit\/EXHostViewControllerDelegate\/hostViewControllerDidActivate(_:)] method. Use this method to initiate the XPC connection and start communication with the app extension. Similarly, use the delegate’s [doc:\/\/com.apple.extensionkit\/documentation\/ExtensionKit\/EXHostViewControllerDelegate\/hostViewControllerWillDeactivate(_:error:)] to close out the current connection and stop communicating with the app extension.\n\n",
  "sections" : [

  ],
  "source" : "appleJSON",
  "title" : "Including extension-based UI in your interface",
  "url" : "https:\/\/developer.apple.com\/documentation\/extensionkit\/including-extension-based-ui-in-your-interface"
}