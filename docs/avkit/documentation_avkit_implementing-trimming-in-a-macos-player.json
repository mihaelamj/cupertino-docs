{
  "abstract" : "Provide a QuickTime media-trimming experience in your macOS app.",
  "codeExamples" : [
    {
      "code" : "override func validateUserInterfaceItem(_ item: NSValidatedUserInterfaceItem) -> Bool {\n    if item.action == #selector(beginTrimming) {\n        return playerView.canBeginTrimming\n    }\n    return super.validateUserInterfaceItem(item)\n}",
      "language" : "swift"
    },
    {
      "code" : "@IBAction func beginTrimming(_ sender: AnyObject) {\n    playerView.beginTrimming { result in\n        if result == .okButton {\n            \/\/ user selected Trim button (AVPlayerViewTrimResult.okButton)...\n        } else {\n            \/\/ user selected Cancel button (AVPlayerViewTrimResult.cancelButton)...\n        }\n    }\n}",
      "language" : "swift"
    },
    {
      "code" : "\/\/ Transcoding preset\nlet preset = AVAssetExportPresetAppleM4V720pHD\nlet exportSession = AVAssetExportSession(asset: playerItem.asset, presetName: preset)!\nexportSession.outputFileType = AVFileTypeAppleM4V\nexportSession.outputURL = \/\/ Output URL",
      "language" : "swift"
    },
    {
      "code" : "\/\/ Create CMTimeRange with the trim in\/out point times\nlet startTime = self.playerItem.reversePlaybackEndTime\nlet endTime = self.playerItem.forwardPlaybackEndTime\nlet timeRange = CMTimeRangeFromTimeToTime(startTime, endTime)\nexportSession.timeRange = timeRange",
      "language" : "swift"
    },
    {
      "code" : "exportSession.exportAsynchronously {\n    switch exportSession.status {\n    case .completed:\n        \/\/ Export Complete\n    case .failed:\n        \/\/ failed\n    default:\n        \/\/ handle others\n    }\n}",
      "language" : "swift"
    }
  ],
  "contentHash" : "5fd9b4cd3bf4afd5f501e99210c2df1e96c6bbd76e7ccbb2ce5e52ceb6dc5cfc",
  "crawledAt" : "2025-12-03T04:38:44Z",
  "id" : "C4E6A217-84F5-42D2-949A-D67D9DCB804B",
  "kind" : "article",
  "language" : "swift",
  "module" : "AVKit",
  "overview" : "## Overview\n\nYou use [doc:\/\/com.apple.avkit\/documentation\/AVKit\/AVPlayerView] to provide a playback experience like that of QuickTime Player in macOS. However, `AVPlayerView` not only provides the QuickTime playback interface, but it also provides the QuickTime media-trimming experience.\n\n\n\n### Verify that Trimming Is Allowed\n\nBefore attempting to put the player into trimming mode, verify that trimming is allowed by querying the player view’s [doc:\/\/com.apple.avkit\/documentation\/AVKit\/AVPlayerView\/canBeginTrimming] property. This property returns `false` if you’re playing an asset delivered over HTTP Live Streaming or if the asset is content protected. If you’re presenting a menu item to initiate trimming, a good place to perform this check is in the [doc:\/\/com.apple.documentation\/documentation\/AppKit\/NSDocument\/validateUserInterfaceItem(_:)] method of [doc:\/\/com.apple.documentation\/documentation\/AppKit\/NSDocument], so that the menu item can automatically be disabled if trimming is disallowed.\n\n### Enter Trimming Mode\n\nAfter you’ve determined that the media supports trimming, you call the [doc:\/\/com.apple.avkit\/documentation\/AVKit\/AVPlayerView\/beginTrimming(completionHandler:)]. This method takes a completion block that you use to determine whether the user completed the trim or canceled the operation.\n\n### Transcode the Trimmed Asset\n\nBecause [doc:\/\/com.apple.documentation\/documentation\/AVFoundation\/AVAsset] is an immutable object, you may be wondering how its duration is changed when you click the Trim button. Trimming relies on a feature of [doc:\/\/com.apple.documentation\/documentation\/AVFoundation\/AVPlayerItem] to adjust the presented time range. `AVPlayerItem` provides the [doc:\/\/com.apple.documentation\/documentation\/AVFoundation\/AVPlayerItem\/reversePlaybackEndTime] and [doc:\/\/com.apple.documentation\/documentation\/AVFoundation\/AVPlayerItem\/forwardPlaybackEndTime] properties that set the in and out points for a media item. It doesn’t change the underlying asset, but essentially changes your effective view of it. To save the results of the user’s trim operation, you export a new copy of the asset, trimming it to the specified times. The simplest way to do this is to use [doc:\/\/com.apple.documentation\/documentation\/AVFoundation\/AVAssetExportSession], which provides a simple and performant way for you to transcode the media of an asset. You create a new export session, passing it the asset to export along with a transcoding preset to use.\n\nThis example uses a preset to export the media as a 720p, M4V file, but `AVAssetExportSession` supports a wide variety of export presets. To find out what export session presets are supported for the current asset, you can use the session’s [doc:\/\/com.apple.documentation\/documentation\/AVFoundation\/AVAssetExportSession\/exportPresets(compatibleWith:)] class method, passing it the asset you want to export. This method returns an array of valid presets that you can use in your export.\n\n### Select the Trimmed Asset\n\nTo export only the content the user trimmed, you use the current player item’s reverse and forward end-time values to define a [doc:\/\/com.apple.documentation\/documentation\/CoreMedia\/CMTimeRange] to set on the export session.\n\n### Export the Trimmed Asset\n\nTo perform the actual export operation, you call its [doc:\/\/com.apple.documentation\/documentation\/AVFoundation\/AVAssetExportSession\/exportAsynchronously(completionHandler:)] method. Check the status of the export session in the completion handler and handle completion and failure cases.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/AVKit\/implementing-trimming-in-a-macos-player\ncrawled: 2025-12-03T04:38:44Z\n---\n\n# Implementing Trimming in a macOS Player\n\n**Article**\n\nProvide a QuickTime media-trimming experience in your macOS app.\n\n## Overview\n\nYou use [doc:\/\/com.apple.avkit\/documentation\/AVKit\/AVPlayerView] to provide a playback experience like that of QuickTime Player in macOS. However, `AVPlayerView` not only provides the QuickTime playback interface, but it also provides the QuickTime media-trimming experience.\n\n\n\n### Verify that Trimming Is Allowed\n\nBefore attempting to put the player into trimming mode, verify that trimming is allowed by querying the player view’s [doc:\/\/com.apple.avkit\/documentation\/AVKit\/AVPlayerView\/canBeginTrimming] property. This property returns `false` if you’re playing an asset delivered over HTTP Live Streaming or if the asset is content protected. If you’re presenting a menu item to initiate trimming, a good place to perform this check is in the [doc:\/\/com.apple.documentation\/documentation\/AppKit\/NSDocument\/validateUserInterfaceItem(_:)] method of [doc:\/\/com.apple.documentation\/documentation\/AppKit\/NSDocument], so that the menu item can automatically be disabled if trimming is disallowed.\n\n```swift\noverride func validateUserInterfaceItem(_ item: NSValidatedUserInterfaceItem) -> Bool {\n    if item.action == #selector(beginTrimming) {\n        return playerView.canBeginTrimming\n    }\n    return super.validateUserInterfaceItem(item)\n}\n```\n\n### Enter Trimming Mode\n\nAfter you’ve determined that the media supports trimming, you call the [doc:\/\/com.apple.avkit\/documentation\/AVKit\/AVPlayerView\/beginTrimming(completionHandler:)]. This method takes a completion block that you use to determine whether the user completed the trim or canceled the operation.\n\n```swift\n@IBAction func beginTrimming(_ sender: AnyObject) {\n    playerView.beginTrimming { result in\n        if result == .okButton {\n            \/\/ user selected Trim button (AVPlayerViewTrimResult.okButton)...\n        } else {\n            \/\/ user selected Cancel button (AVPlayerViewTrimResult.cancelButton)...\n        }\n    }\n}\n```\n\n### Transcode the Trimmed Asset\n\nBecause [doc:\/\/com.apple.documentation\/documentation\/AVFoundation\/AVAsset] is an immutable object, you may be wondering how its duration is changed when you click the Trim button. Trimming relies on a feature of [doc:\/\/com.apple.documentation\/documentation\/AVFoundation\/AVPlayerItem] to adjust the presented time range. `AVPlayerItem` provides the [doc:\/\/com.apple.documentation\/documentation\/AVFoundation\/AVPlayerItem\/reversePlaybackEndTime] and [doc:\/\/com.apple.documentation\/documentation\/AVFoundation\/AVPlayerItem\/forwardPlaybackEndTime] properties that set the in and out points for a media item. It doesn’t change the underlying asset, but essentially changes your effective view of it. To save the results of the user’s trim operation, you export a new copy of the asset, trimming it to the specified times. The simplest way to do this is to use [doc:\/\/com.apple.documentation\/documentation\/AVFoundation\/AVAssetExportSession], which provides a simple and performant way for you to transcode the media of an asset. You create a new export session, passing it the asset to export along with a transcoding preset to use.\n\n```swift\n\/\/ Transcoding preset\nlet preset = AVAssetExportPresetAppleM4V720pHD\nlet exportSession = AVAssetExportSession(asset: playerItem.asset, presetName: preset)!\nexportSession.outputFileType = AVFileTypeAppleM4V\nexportSession.outputURL = \/\/ Output URL\n```\n\nThis example uses a preset to export the media as a 720p, M4V file, but `AVAssetExportSession` supports a wide variety of export presets. To find out what export session presets are supported for the current asset, you can use the session’s [doc:\/\/com.apple.documentation\/documentation\/AVFoundation\/AVAssetExportSession\/exportPresets(compatibleWith:)] class method, passing it the asset you want to export. This method returns an array of valid presets that you can use in your export.\n\n### Select the Trimmed Asset\n\nTo export only the content the user trimmed, you use the current player item’s reverse and forward end-time values to define a [doc:\/\/com.apple.documentation\/documentation\/CoreMedia\/CMTimeRange] to set on the export session.\n\n```swift\n\/\/ Create CMTimeRange with the trim in\/out point times\nlet startTime = self.playerItem.reversePlaybackEndTime\nlet endTime = self.playerItem.forwardPlaybackEndTime\nlet timeRange = CMTimeRangeFromTimeToTime(startTime, endTime)\nexportSession.timeRange = timeRange\n```\n\n### Export the Trimmed Asset\n\nTo perform the actual export operation, you call its [doc:\/\/com.apple.documentation\/documentation\/AVFoundation\/AVAssetExportSession\/exportAsynchronously(completionHandler:)] method. Check the status of the export session in the completion handler and handle completion and failure cases.\n\n```swift\nexportSession.exportAsynchronously {\n    switch exportSession.status {\n    case .completed:\n        \/\/ Export Complete\n    case .failed:\n        \/\/ failed\n    default:\n        \/\/ handle others\n    }\n}\n```\n\n## macOS playback and capture\n\n- **AVPlayerView**: A view that displays content from a player and presents a native user interface to control playback.\n- **AVCaptureView**: A view that displays standard user interface controls for capturing media data.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "A view that displays content from a player and presents a native user interface to control playback.",
          "name" : "AVPlayerView",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVKit\/AVPlayerView"
        },
        {
          "description" : "A view that displays standard user interface controls for capturing media data.",
          "name" : "AVCaptureView",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVKit\/AVCaptureView"
        }
      ],
      "title" : "macOS playback and capture"
    }
  ],
  "source" : "appleJSON",
  "title" : "Implementing Trimming in a macOS Player",
  "url" : "https:\/\/developer.apple.com\/documentation\/AVKit\/implementing-trimming-in-a-macos-player"
}