{
  "abstract" : "Add multitasking capability to your video-call apps by using Picture in Picture (PiP).",
  "codeExamples" : [
    {
      "code" : "class SampleBufferVideoCallView: UIView {\n    override class var layerClass: AnyClass {\n        AVSampleBufferDisplayLayer.self\n    }\n    \n    var sampleBufferDisplayLayer: AVSampleBufferDisplayLayer {\n        layer as! AVSampleBufferDisplayLayer\n    }\n}",
      "language" : "swift"
    },
    {
      "code" : "let pipVideoCallViewController = AVPictureInPictureVideoCallViewController()\npipVideoCallViewController.preferredContentSize = CGSize(width: 1080, height: 1920)\npipVideoCallViewController.view.addSubview(sampleBufferVideoCallView)",
      "language" : "swift"
    },
    {
      "code" : "let pipContentSource = AVPictureInPictureController.ContentSource(\n                            activeVideoCallSourceView: videoCallViewSourceView, \n                            contentViewController: pipVideoCallViewController)",
      "language" : "swift"
    },
    {
      "code" : "let pipController = AVPictureInPictureController(contentSource: pipContentSource)\npipController.canStartPictureInPictureAutomaticallyFromInline = true\npipController.delegate = self",
      "language" : "swift"
    }
  ],
  "contentHash" : "2a934e77cd913d6a0fe51fb954f4ef378564a854295ed8e4e093d08df9995a6c",
  "crawledAt" : "2025-12-02T16:17:17Z",
  "id" : "2D3038BF-BFD2-4459-B4C3-1D97294E72E3",
  "kind" : "article",
  "language" : "swift",
  "module" : "AVKit",
  "overview" : "## Overview\n\nUse PiP in your video-call apps so users can multitask with other apps while on video calls. When a user enables PiP, your app scales down to a corner of the screen, so they can see the Home Screen and interact with other apps. In iOS 15 and later, [doc:\/\/com.apple.avkit\/documentation\/AVKit] provides PiP support for video-calling apps, which enables you to deliver a familiar video-calling experience that behaves like FaceTime.\n\n### Create a source view\n\nProviding PiP support begins by choosing a source view to display inside the video-call view controller. You need to add a `UIView` to `AVPictureInPictureVideoCallViewController`, so use [doc:\/\/com.apple.documentation\/documentation\/AVFoundation\/AVCaptureVideoPreviewLayer] or [doc:\/\/com.apple.documentation\/documentation\/AVFoundation\/AVSampleBufferDisplayLayer] depending on your need. In iOS 18 and later, you may also use [doc:\/\/com.apple.documentation\/documentation\/MetalKit\/MTKView] as your source view. Video-calling apps need to display the remote view, so use [doc:\/\/com.apple.documentation\/documentation\/AVFoundation\/AVSampleBufferDisplayLayer] to do so.\n\n### Create a video-call controller\n\nTo display your source view, create a [doc:\/\/com.apple.avkit\/documentation\/AVKit\/AVPictureInPictureVideoCallViewController] and add your source as a subview.\n\nUse [doc:\/\/com.apple.avkit\/documentation\/AVKit\/AVPictureInPictureController\/isPictureInPictureSupported()] to determine whether the current device supports PiP playback. If PiP isn’t supported on the current device, attempting to initialize a PiP controller returns `nil`.\n\n### Create a PiP controller using a content source\n\nBefore you create an [doc:\/\/com.apple.avkit\/documentation\/AVKit\/AVPictureInPictureController], you need to create an [doc:\/\/com.apple.avkit\/documentation\/AVKit\/AVPictureInPictureController\/ContentSource-swift.class] that represents the source of the content the system displays. A content source requires a video-call view controller, and a source view that contains the content you associate with the video call.\n\nAfter creating a content source, use it to initialize [doc:\/\/com.apple.avkit\/documentation\/AVKit\/AVPictureInPictureController]. By default, PiP starts when a user moves to the background if your source view is full-screen, or you set [doc:\/\/com.apple.avkit\/documentation\/AVKit\/AVPictureInPictureController\/canStartPictureInPictureAutomaticallyFromInline] to `true`. If your app is in the foreground, you can start PiP by calling [doc:\/\/com.apple.avkit\/documentation\/AVKit\/AVPictureInPictureController\/startPictureInPicture()].\n\nThe system uses the source view to determine the source frame for the PiP animation, and the restore target for either when the user returns to the app or PiP stops.\n\n### Observe PiP life cycle events\n\nWhen you use PiP, you respond to life-cycle events by observing [doc:\/\/com.apple.avkit\/documentation\/AVKit\/AVPictureInPictureControllerDelegate]. This allows you to handle your app’s user interface based on the PiP state, along with observing for potential errors.\n\nThe system interrupts your capture session when the system or user stashes PiP, so observe [doc:\/\/com.apple.documentation\/documentation\/AVFoundation\/AVCaptureSession\/wasInterruptedNotification] for [doc:\/\/com.apple.documentation\/documentation\/AVFoundation\/AVCaptureSession\/InterruptionReason\/videoDeviceNotAvailableInBackground] to handle the interruption.\n\nWhen your app is in PiP mode, it can’t assume control of the camera. For example, Camera.app assumes control of the camera when it’s opened, and the system returns camera control when Camera.app finishes with it. You observe [doc:\/\/com.apple.documentation\/documentation\/AVFoundation\/AVCaptureSession\/wasInterruptedNotification] for [doc:\/\/com.apple.documentation\/documentation\/AVFoundation\/AVCaptureSession\/InterruptionReason\/videoDeviceInUseByAnotherClient] to handle the interruption.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/AVKit\/adopting-picture-in-picture-for-video-calls\ncrawled: 2025-12-02T16:17:17Z\n---\n\n# Adopting Picture in Picture for video calls\n\n**Article**\n\nAdd multitasking capability to your video-call apps by using Picture in Picture (PiP).\n\n## Overview\n\nUse PiP in your video-call apps so users can multitask with other apps while on video calls. When a user enables PiP, your app scales down to a corner of the screen, so they can see the Home Screen and interact with other apps. In iOS 15 and later, [doc:\/\/com.apple.avkit\/documentation\/AVKit] provides PiP support for video-calling apps, which enables you to deliver a familiar video-calling experience that behaves like FaceTime.\n\n\n\n### Create a source view\n\nProviding PiP support begins by choosing a source view to display inside the video-call view controller. You need to add a `UIView` to `AVPictureInPictureVideoCallViewController`, so use [doc:\/\/com.apple.documentation\/documentation\/AVFoundation\/AVCaptureVideoPreviewLayer] or [doc:\/\/com.apple.documentation\/documentation\/AVFoundation\/AVSampleBufferDisplayLayer] depending on your need. In iOS 18 and later, you may also use [doc:\/\/com.apple.documentation\/documentation\/MetalKit\/MTKView] as your source view. Video-calling apps need to display the remote view, so use [doc:\/\/com.apple.documentation\/documentation\/AVFoundation\/AVSampleBufferDisplayLayer] to do so.\n\n```swift\nclass SampleBufferVideoCallView: UIView {\n    override class var layerClass: AnyClass {\n        AVSampleBufferDisplayLayer.self\n    }\n    \n    var sampleBufferDisplayLayer: AVSampleBufferDisplayLayer {\n        layer as! AVSampleBufferDisplayLayer\n    }\n}\n```\n\n### Create a video-call controller\n\nTo display your source view, create a [doc:\/\/com.apple.avkit\/documentation\/AVKit\/AVPictureInPictureVideoCallViewController] and add your source as a subview.\n\n```swift\nlet pipVideoCallViewController = AVPictureInPictureVideoCallViewController()\npipVideoCallViewController.preferredContentSize = CGSize(width: 1080, height: 1920)\npipVideoCallViewController.view.addSubview(sampleBufferVideoCallView)\n```\n\nUse [doc:\/\/com.apple.avkit\/documentation\/AVKit\/AVPictureInPictureController\/isPictureInPictureSupported()] to determine whether the current device supports PiP playback. If PiP isn’t supported on the current device, attempting to initialize a PiP controller returns `nil`.\n\n### Create a PiP controller using a content source\n\nBefore you create an [doc:\/\/com.apple.avkit\/documentation\/AVKit\/AVPictureInPictureController], you need to create an [doc:\/\/com.apple.avkit\/documentation\/AVKit\/AVPictureInPictureController\/ContentSource-swift.class] that represents the source of the content the system displays. A content source requires a video-call view controller, and a source view that contains the content you associate with the video call.\n\n```swift\nlet pipContentSource = AVPictureInPictureController.ContentSource(\n                            activeVideoCallSourceView: videoCallViewSourceView, \n                            contentViewController: pipVideoCallViewController)\n```\n\n\n\nAfter creating a content source, use it to initialize [doc:\/\/com.apple.avkit\/documentation\/AVKit\/AVPictureInPictureController]. By default, PiP starts when a user moves to the background if your source view is full-screen, or you set [doc:\/\/com.apple.avkit\/documentation\/AVKit\/AVPictureInPictureController\/canStartPictureInPictureAutomaticallyFromInline] to `true`. If your app is in the foreground, you can start PiP by calling [doc:\/\/com.apple.avkit\/documentation\/AVKit\/AVPictureInPictureController\/startPictureInPicture()].\n\n```swift\nlet pipController = AVPictureInPictureController(contentSource: pipContentSource)\npipController.canStartPictureInPictureAutomaticallyFromInline = true\npipController.delegate = self\n```\n\nThe system uses the source view to determine the source frame for the PiP animation, and the restore target for either when the user returns to the app or PiP stops.\n\n\n\n### Observe PiP life cycle events\n\nWhen you use PiP, you respond to life-cycle events by observing [doc:\/\/com.apple.avkit\/documentation\/AVKit\/AVPictureInPictureControllerDelegate]. This allows you to handle your app’s user interface based on the PiP state, along with observing for potential errors.\n\nThe system interrupts your capture session when the system or user stashes PiP, so observe [doc:\/\/com.apple.documentation\/documentation\/AVFoundation\/AVCaptureSession\/wasInterruptedNotification] for [doc:\/\/com.apple.documentation\/documentation\/AVFoundation\/AVCaptureSession\/InterruptionReason\/videoDeviceNotAvailableInBackground] to handle the interruption.\n\nWhen your app is in PiP mode, it can’t assume control of the camera. For example, Camera.app assumes control of the camera when it’s opened, and the system returns camera control when Camera.app finishes with it. You observe [doc:\/\/com.apple.documentation\/documentation\/AVFoundation\/AVCaptureSession\/wasInterruptedNotification] for [doc:\/\/com.apple.documentation\/documentation\/AVFoundation\/AVCaptureSession\/InterruptionReason\/videoDeviceInUseByAnotherClient] to handle the interruption.\n\n## Picture in Picture\n\n- **Adopting Picture in Picture Playback in tvOS**: Add advanced multitasking capabilities to your video apps by using Picture in Picture playback in tvOS.\n- **Adopting Picture in Picture in a Standard Player**: Add Picture in Picture (PiP) playback to your app using a player view controller.\n- **Adopting Picture in Picture in a Custom Player**: Add controls to your custom player user interface to invoke Picture in Picture (PiP) playback.\n- **Accessing the camera while multitasking on iPad**: Operate the camera in Split View, Slide Over, Picture in Picture, and Stage Manager modes.\n- **AVPictureInPictureController**: A controller that responds to user-initiated Picture in Picture playback of video in a floating, resizable window.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Add advanced multitasking capabilities to your video apps by using Picture in Picture playback in tvOS.",
          "name" : "Adopting Picture in Picture Playback in tvOS",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVKit\/adopting-picture-in-picture-playback-in-tvos"
        },
        {
          "description" : "Add Picture in Picture (PiP) playback to your app using a player view controller.",
          "name" : "Adopting Picture in Picture in a Standard Player",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVKit\/adopting-picture-in-picture-in-a-standard-player"
        },
        {
          "description" : "Add controls to your custom player user interface to invoke Picture in Picture (PiP) playback.",
          "name" : "Adopting Picture in Picture in a Custom Player",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVKit\/adopting-picture-in-picture-in-a-custom-player"
        },
        {
          "description" : "Operate the camera in Split View, Slide Over, Picture in Picture, and Stage Manager modes.",
          "name" : "Accessing the camera while multitasking on iPad",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVKit\/accessing-the-camera-while-multitasking-on-ipad"
        },
        {
          "description" : "A controller that responds to user-initiated Picture in Picture playback of video in a floating, resizable window.",
          "name" : "AVPictureInPictureController",
          "url" : "https:\/\/developer.apple.com\/documentation\/AVKit\/AVPictureInPictureController"
        }
      ],
      "title" : "Picture in Picture"
    }
  ],
  "source" : "appleJSON",
  "title" : "Adopting Picture in Picture for video calls",
  "url" : "https:\/\/developer.apple.com\/documentation\/AVKit\/adopting-picture-in-picture-for-video-calls"
}