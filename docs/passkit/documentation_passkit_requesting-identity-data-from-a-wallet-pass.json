{
  "abstract" : "Initiate a request for identity information by prompting a user for permission and decrypting a response payload.",
  "codeExamples" : [
    {
      "code" : "let controller = PKIdentityAuthorizationController()\ncontroller.checkCanRequestDocument(descriptor) { canRequest in\n    \/\/ Show or hide the identity button.\n}",
      "language" : "swift"
    },
    {
      "code" : "let request = PKIdentityRequest()\nrequest.descriptor = descriptor\nrequest.merchantIdentifier = \/\/ The merchant identifier.\nrequest.nonce = \/\/ The nonce your server generates.",
      "language" : "swift"
    },
    {
      "code" : "do {\n    let document = try await controller.requestDocument(request)\n} catch {\n    \/\/ Handle the error.\n}",
      "language" : "swift"
    }
  ],
  "contentHash" : "13c1e24ca7d85ebd02143efc240d416879a8888ec997769cdf919433d6b594e6",
  "crawledAt" : "2025-12-03T07:04:40Z",
  "id" : "961355A3-BBCE-44FB-9C1B-A09F92D8A9DE",
  "kind" : "article",
  "language" : "swift",
  "module" : "PassKit (Apple Pay and Wallet)",
  "overview" : "## Overview\n\nThe Wallet app allows people to store an identification card, for example, a mobile driver’s license (mDL), or national identification card from a government issuing authority, or a digital ID issued by Apple.\n\nBeginning on iPhone with iOS 16, you can request information from IDs in Wallet to verify a person’s age or identity. If a person accepts the request, the system gets the information from their issuing authority and your app receives a payload. After decryption, the payload contains data that follows the ISO 18013-5 specification. To use the elements your app requests, send the payload to your server for verification.\n\nFor design guidance, see [https:\/\/developer.apple.com\/design\/human-interface-guidelines\/technologies\/wallet\/introduction].\n\n### Create an identity document descriptor\n\nBefore you request information from an ID in Wallet, you create an object to describe the elements you need. Your app can only request the elements your entitlement grants. There are a few identity document descriptor options:\n\nFor each element, you specify your intent to store the resulting data by using [doc:\/\/com.apple.passkit\/documentation\/PassKit\/PKIdentityIntentToStore\/mayStore(days:)], [doc:\/\/com.apple.passkit\/documentation\/PassKit\/PKIdentityIntentToStore\/mayStore], or [doc:\/\/com.apple.passkit\/documentation\/PassKit\/PKIdentityIntentToStore\/willNotStore]. Upon request, the system presents the information for a person to review in a system sheet.\n\nThe framework allows for requesting the Boolean [doc:\/\/com.apple.passkit\/documentation\/PassKit\/PKIdentityElement\/age(atLeast:)] element for any age between `1` and `125` only if the issuer includes it. If an app requests [doc:\/\/com.apple.passkit\/documentation\/PassKit\/PKIdentityElement\/age(atLeast:)] and the `age_over_XX` element isn’t present in the mobile driver’s license, the framework falls back to a request for the age element.\n\nAn app can’t include both an [doc:\/\/com.apple.passkit\/documentation\/PassKit\/PKIdentityElement\/age(atLeast:)] element and an [doc:\/\/com.apple.passkit\/documentation\/PassKit\/PKIdentityElement\/age] element in the same request.\n\nThe following code shows how you create the different identity document descriptors:\n\nTo check whether the identity document you describe is available to request, create a [doc:\/\/com.apple.passkit\/documentation\/PassKit\/PKIdentityAuthorizationController] and call [doc:\/\/com.apple.passkit\/documentation\/PassKit\/PKIdentityAuthorizationController\/checkCanRequestDocument(_:completion:)]. If the document exists, show a [doc:\/\/com.apple.passkit\/documentation\/PassKit\/PKIdentityButton] to allow the user to begin the authorization request.\n\n### Create a request\n\nTo create an identity request, you need the merchant identifier you configure in the developer portal. A merchant identifier never expires, and you can use the same one that you use for Apple Pay.\n\nA request also needs a [doc:\/\/com.apple.passkit\/documentation\/PassKit\/PKIdentityRequest\/nonce] to prevent your server from using a response document more than once. Your server needs the [doc:\/\/com.apple.passkit\/documentation\/PassKit\/PKIdentityRequest\/nonce] to decrypt the response document, so generate it there and associate it with the user’s session.\n\nYour app’s `Info.plist` file needs to provide a message for the `NSIdentityUsageDescription` key. If this key is missing, any attempt to request a document fails.\n\n### Request the document\n\nWhen requesting a document, the system presents a sheet to the user to confirm the request before retrieving any data. If the user rejects the request, your app receives a [doc:\/\/com.apple.passkit\/documentation\/PassKit\/PKIdentityError-swift.struct\/Code\/cancelled] error.\n\nWhen you receive a [doc:\/\/com.apple.passkit\/documentation\/PassKit\/PKIdentityDocument], you’re ready to verify the request payload. The data in the [doc:\/\/com.apple.passkit\/documentation\/PassKit\/PKIdentityDocument\/encryptedData] property isn’t readable on the device, so you need to send it to your server for verification.\n\nThe elements in the descriptors map this way in their responses:\n\nTo learn more about verifying identity requests, see [doc:\/\/com.apple.documentation\/documentation\/PassKit\/verifying-wallet-identity-requests].\n\n### Test the implementation\n\nEven if you don’t live in an area that supports IDs in Wallet, you can test your implementation through the iPhone simulator or by downloading a developer profile on your local device. When you request a document, you receive a mock mDL that’s similar to a real ID. When you test with the simulator, the response doesn’t include a real issuing authority or device signature. The developer test profile produces a real device signature, but not a real issuer signature. A mock mDL isn’t visible in the Wallet app, so don’t treat it as real. To activate a mock mDL on your device, download the Wallet identity developer profile from [https:\/\/developer.apple.com\/bug-reporting\/profiles-and-logs\/].",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/passkit\/requesting-identity-data-from-a-wallet-pass\ncrawled: 2025-12-03T07:04:40Z\n---\n\n# Requesting identity data from a Wallet pass\n\n**Article**\n\nInitiate a request for identity information by prompting a user for permission and decrypting a response payload.\n\n## Overview\n\nThe Wallet app allows people to store an identification card, for example, a mobile driver’s license (mDL), or national identification card from a government issuing authority, or a digital ID issued by Apple.\n\nBeginning on iPhone with iOS 16, you can request information from IDs in Wallet to verify a person’s age or identity. If a person accepts the request, the system gets the information from their issuing authority and your app receives a payload. After decryption, the payload contains data that follows the ISO 18013-5 specification. To use the elements your app requests, send the payload to your server for verification.\n\nFor design guidance, see [https:\/\/developer.apple.com\/design\/human-interface-guidelines\/technologies\/wallet\/introduction].\n\n\n\n### Create an identity document descriptor\n\nBefore you request information from an ID in Wallet, you create an object to describe the elements you need. Your app can only request the elements your entitlement grants. There are a few identity document descriptor options:\n\n\n\nFor each element, you specify your intent to store the resulting data by using [doc:\/\/com.apple.passkit\/documentation\/PassKit\/PKIdentityIntentToStore\/mayStore(days:)], [doc:\/\/com.apple.passkit\/documentation\/PassKit\/PKIdentityIntentToStore\/mayStore], or [doc:\/\/com.apple.passkit\/documentation\/PassKit\/PKIdentityIntentToStore\/willNotStore]. Upon request, the system presents the information for a person to review in a system sheet.\n\nThe framework allows for requesting the Boolean [doc:\/\/com.apple.passkit\/documentation\/PassKit\/PKIdentityElement\/age(atLeast:)] element for any age between `1` and `125` only if the issuer includes it. If an app requests [doc:\/\/com.apple.passkit\/documentation\/PassKit\/PKIdentityElement\/age(atLeast:)] and the `age_over_XX` element isn’t present in the mobile driver’s license, the framework falls back to a request for the age element.\n\nAn app can’t include both an [doc:\/\/com.apple.passkit\/documentation\/PassKit\/PKIdentityElement\/age(atLeast:)] element and an [doc:\/\/com.apple.passkit\/documentation\/PassKit\/PKIdentityElement\/age] element in the same request.\n\nThe following code shows how you create the different identity document descriptors:\n\n\n\nTo check whether the identity document you describe is available to request, create a [doc:\/\/com.apple.passkit\/documentation\/PassKit\/PKIdentityAuthorizationController] and call [doc:\/\/com.apple.passkit\/documentation\/PassKit\/PKIdentityAuthorizationController\/checkCanRequestDocument(_:completion:)]. If the document exists, show a [doc:\/\/com.apple.passkit\/documentation\/PassKit\/PKIdentityButton] to allow the user to begin the authorization request.\n\n```swift\nlet controller = PKIdentityAuthorizationController()\ncontroller.checkCanRequestDocument(descriptor) { canRequest in\n    \/\/ Show or hide the identity button.\n}\n```\n\n### Create a request\n\nTo create an identity request, you need the merchant identifier you configure in the developer portal. A merchant identifier never expires, and you can use the same one that you use for Apple Pay.\n\nA request also needs a [doc:\/\/com.apple.passkit\/documentation\/PassKit\/PKIdentityRequest\/nonce] to prevent your server from using a response document more than once. Your server needs the [doc:\/\/com.apple.passkit\/documentation\/PassKit\/PKIdentityRequest\/nonce] to decrypt the response document, so generate it there and associate it with the user’s session.\n\n```swift\nlet request = PKIdentityRequest()\nrequest.descriptor = descriptor\nrequest.merchantIdentifier = \/\/ The merchant identifier.\nrequest.nonce = \/\/ The nonce your server generates.\n```\n\nYour app’s `Info.plist` file needs to provide a message for the `NSIdentityUsageDescription` key. If this key is missing, any attempt to request a document fails.\n\n### Request the document\n\nWhen requesting a document, the system presents a sheet to the user to confirm the request before retrieving any data. If the user rejects the request, your app receives a [doc:\/\/com.apple.passkit\/documentation\/PassKit\/PKIdentityError-swift.struct\/Code\/cancelled] error.\n\n```swift\ndo {\n    let document = try await controller.requestDocument(request)\n} catch {\n    \/\/ Handle the error.\n}\n```\n\nWhen you receive a [doc:\/\/com.apple.passkit\/documentation\/PassKit\/PKIdentityDocument], you’re ready to verify the request payload. The data in the [doc:\/\/com.apple.passkit\/documentation\/PassKit\/PKIdentityDocument\/encryptedData] property isn’t readable on the device, so you need to send it to your server for verification.\n\nThe elements in the descriptors map this way in their responses:\n\n- [doc:\/\/com.apple.passkit\/documentation\/PassKit\/PKIdentityDriversLicenseDescriptor] maps to a set of elements in the ISO and American Association of Motor Vehicle Administrators (AAMVA) namespaces.\n- [doc:\/\/com.apple.passkit\/documentation\/PassKit\/PKIdentityPhotoIDDescriptor] maps to a set of elements in the ISO.\n- [doc:\/\/com.apple.passkit\/documentation\/PassKit\/PKIdentityNationalIDCardDescriptor] maps to a set of elements in the ISO and JP namespace.\n- See [doc:\/\/com.apple.passkit\/documentation\/PassKit\/PKIdentityDriversLicenseDescriptor], [doc:\/\/com.apple.passkit\/documentation\/PassKit\/PKIdentityPhotoIDDescriptor], and [doc:\/\/com.apple.passkit\/documentation\/PassKit\/PKIdentityNationalIDCardDescriptor] for a list of elements.\n\n\n\nTo learn more about verifying identity requests, see [doc:\/\/com.apple.documentation\/documentation\/PassKit\/verifying-wallet-identity-requests].\n\n### Test the implementation\n\nEven if you don’t live in an area that supports IDs in Wallet, you can test your implementation through the iPhone simulator or by downloading a developer profile on your local device. When you request a document, you receive a mock mDL that’s similar to a real ID. When you test with the simulator, the response doesn’t include a real issuing authority or device signature. The developer test profile produces a real device signature, but not a real issuer signature. A mock mDL isn’t visible in the Wallet app, so don’t treat it as real. To activate a mock mDL on your device, download the Wallet identity developer profile from [https:\/\/developer.apple.com\/bug-reporting\/profiles-and-logs\/].\n\n## Essentials\n\n- **Pass Type IDs Entitlement**: A list of identifiers that specify pass types that your app can access in Wallet.\n- **Merchant IDs Entitlement**: A list of merchant IDs your app uses for Apple Pay support.\n- **com.apple.developer.in-app-identity-presentment**: An entitlement that verifies age or identity.\n- **Verifying Wallet identity requests**: Decrypt and verify an in-app presentment request on your server.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "A list of identifiers that specify pass types that your app can access in Wallet.",
          "name" : "Pass Type IDs Entitlement",
          "url" : "https:\/\/developer.apple.com\/documentation\/BundleResources\/Entitlements\/com.apple.developer.pass-type-identifiers"
        },
        {
          "description" : "A list of merchant IDs your app uses for Apple Pay support.",
          "name" : "Merchant IDs Entitlement",
          "url" : "https:\/\/developer.apple.com\/documentation\/BundleResources\/Entitlements\/com.apple.developer.in-app-payments"
        },
        {
          "description" : "An entitlement that verifies age or identity.",
          "name" : "com.apple.developer.in-app-identity-presentment",
          "url" : "https:\/\/developer.apple.com\/documentation\/BundleResources\/Entitlements\/com.apple.developer.in-app-identity-presentment"
        },
        {
          "description" : "Decrypt and verify an in-app presentment request on your server.",
          "name" : "Verifying Wallet identity requests",
          "url" : "https:\/\/developer.apple.com\/documentation\/PassKit\/verifying-wallet-identity-requests"
        }
      ],
      "title" : "Essentials"
    }
  ],
  "source" : "appleJSON",
  "title" : "Requesting identity data from a Wallet pass",
  "url" : "https:\/\/developer.apple.com\/documentation\/passkit\/requesting-identity-data-from-a-wallet-pass"
}