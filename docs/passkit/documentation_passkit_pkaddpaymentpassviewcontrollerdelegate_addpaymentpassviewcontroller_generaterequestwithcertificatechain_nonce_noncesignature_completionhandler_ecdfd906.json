{
  "abstract" : "Asks the delegate to create an add payment request.",
  "codeExamples" : [

  ],
  "contentHash" : "25c18fe4f170d7114a1e2c26b0897bd05b52358816976afdd489aa806ad50f3d",
  "crawledAt" : "2025-12-07T16:16:57Z",
  "declaration" : {
    "code" : "func addPaymentPassViewController(_ controller: PKAddPaymentPassViewController, generateRequestWithCertificateChain certificates: [Data], nonce: Data, nonceSignature: Data, completionHandler handler: @escaping (PKAddPaymentPassRequest) -> Void)",
    "language" : "swift"
  },
  "id" : "4FBFC008-00B1-4E2F-9C6A-0C29B2609257",
  "kind" : "method",
  "language" : "swift",
  "module" : "PassKit (Apple Pay and Wallet)",
  "overview" : "## Discussion\n\nThis method provides the data needed to create an add payment request. Pass the certificate chain to the issuer server. The server returns an encrypted JSON file containing the card data. After you receive the encrypted data, create a add payment request and call the handler.\n\nFor more information on the encrypted card data, see [doc:\/\/com.apple.passkit\/documentation\/PassKit\/PKAddPaymentPassRequest\/encryptedPassData] in [doc:\/\/com.apple.passkit\/documentation\/PassKit\/PKAddPaymentPassRequest].",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "visionOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/passkit\/pkaddpaymentpassviewcontrollerdelegate\/addpaymentpassviewcontroller(_:generaterequestwithcertificatechain:nonce:noncesignature:completionhandler:)\ncrawled: 2025-12-07T16:16:57Z\n---\n\n# addPaymentPassViewController(_:generateRequestWithCertificateChain:nonce:nonceSignature:completionHandler:)\n\n**Instance Method**\n\nAsks the delegate to create an add payment request.\n\n## Declaration\n\n```swift\nfunc addPaymentPassViewController(_ controller: PKAddPaymentPassViewController, generateRequestWithCertificateChain certificates: [Data], nonce: Data, nonceSignature: Data, completionHandler handler: @escaping (PKAddPaymentPassRequest) -> Void)\n```\n\n```swift\nfunc addPaymentPassViewController(_ controller: PKAddPaymentPassViewController, generateRequestWithCertificateChain certificates: [Data], nonce: Data, nonceSignature: Data) async -> PKAddPaymentPassRequest\n```\n\n## Parameters\n\n- **controller**: The view controller asking for the add payment request.\n- **certificates**: An array of NSData objects. Each object contains a DER encoded X.509 certificate, with the leaf first and root last. You must download the root CA to validate the entire chain.\n- **nonce**: A one-time nonce value generated by Apple’s servers. This nonce must be included in the add payment request’s encrypted data.\n- **nonceSignature**: The device-specific signature for the nonce.This signature must be included in the add payment request’s encrypted data.\n- **handler**: A completion handler. Call this block after you have created your add payment request.\n\n\n\n## Discussion\n\nThis method provides the data needed to create an add payment request. Pass the certificate chain to the issuer server. The server returns an encrypted JSON file containing the card data. After you receive the encrypted data, create a add payment request and call the handler.\n\nFor more information on the encrypted card data, see [doc:\/\/com.apple.passkit\/documentation\/PassKit\/PKAddPaymentPassRequest\/encryptedPassData] in [doc:\/\/com.apple.passkit\/documentation\/PassKit\/PKAddPaymentPassRequest].\n\n\n\n## Requesting to add payment cards to Apple Pay\n\n- **PKAddPaymentPassRequest**: Contains the card data needed to add a card to Apple Pay.\n- **addPaymentPassViewController(_:didFinishAdding:error:)**\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Contains the card data needed to add a card to Apple Pay.",
          "name" : "PKAddPaymentPassRequest",
          "url" : "https:\/\/developer.apple.com\/documentation\/PassKit\/PKAddPaymentPassRequest"
        },
        {
          "description" : "",
          "name" : "addPaymentPassViewController(_:didFinishAdding:error:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/PassKit\/PKAddPaymentPassViewControllerDelegate\/addPaymentPassViewController(_:didFinishAdding:error:)"
        }
      ],
      "title" : "Requesting to add payment cards to Apple Pay"
    }
  ],
  "source" : "appleJSON",
  "title" : "addPaymentPassViewController(_:generateRequestWithCertificateChain:nonce:nonceSignature:completionHandler:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/passkit\/pkaddpaymentpassviewcontrollerdelegate\/addpaymentpassviewcontroller(_:generaterequestwithcertificatechain:nonce:noncesignature:completionhandler:)"
}