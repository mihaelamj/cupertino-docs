{
  "abstract" : "Loads a new instance of the music item that includes the specified properties.",
  "codeExamples" : [
    {
      "code" : "let album: Album = …\nlet detailedAlbum = try await album.with(\n    [\n        .tracks,\n        .recordLabels,\n        .relatedAlbums\n    ],\n    preferredSource: .library\n)",
      "language" : "swift"
    }
  ],
  "contentHash" : "95c1d3e1ba711621a3f07dfd976853a17743d2bf0db66681bf274a750aec07ff",
  "crawledAt" : "2025-12-02T13:18:01Z",
  "declaration" : {
    "code" : "func with(_ properties: [PartialMusicAsyncProperty<Self>], preferredSource: MusicPropertySource) async throws -> Self",
    "language" : "swift"
  },
  "id" : "74492692-3C5F-4645-BEFE-A9A0CB72B2B9",
  "kind" : "method",
  "module" : "MusicKit",
  "overview" : "## Discussion\n\nThis asynchronous method fetches a more complete representation of the receiver, loading the contents for each property you request from either the Apple Music catalog or the user’s library, depending on the preferred source as well the availability of the content in those respective data sources.\n\nFor example, if you want to load the [doc:\/\/com.apple.MusicKit\/documentation\/MusicKit\/PartialMusicProperty\/tracks-9mk2l] relationship for an [doc:\/\/com.apple.MusicKit\/documentation\/MusicKit\/Album], as found in the user’s library, as well as other associations of content that only live in the Apple Music catalog, like the [doc:\/\/com.apple.MusicKit\/documentation\/MusicKit\/PartialMusicProperty\/recordLabels] and [doc:\/\/com.apple.MusicKit\/documentation\/MusicKit\/PartialMusicProperty\/relatedAlbums] associations, you can use this code:\n\nHere, because the [doc:\/\/com.apple.MusicKit\/documentation\/MusicKit\/PartialMusicProperty\/tracks-9mk2l] relationship for an [doc:\/\/com.apple.MusicKit\/documentation\/MusicKit\/Album] is supported in both the library and the catalog, and because the this code specifically requests [doc:\/\/com.apple.MusicKit\/documentation\/MusicKit\/MusicPropertySource\/library] as the preferred source, the framework will load the tracks from the user’s library. However, because the [doc:\/\/com.apple.MusicKit\/documentation\/MusicKit\/PartialMusicProperty\/recordLabels] and [doc:\/\/com.apple.MusicKit\/documentation\/MusicKit\/PartialMusicProperty\/relatedAlbums] associations are only available in the Apple Music catalog, the framework will also issue a network request to Apple Music API to fetch those associations of content from the catalog.",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "tvOS",
    "visionOS",
    "watchOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/MusicKit\/MusicItem\/with(_:preferredSource:)-416sk\ncrawled: 2025-12-02T13:18:01Z\n---\n\n# with(_:preferredSource:)\n\n**Instance Method**\n\nLoads a new instance of the music item that includes the specified properties.\n\n## Declaration\n\n```swift\nfunc with(_ properties: [PartialMusicAsyncProperty<Self>], preferredSource: MusicPropertySource) async throws -> Self\n```\n\n## Discussion\n\nThis asynchronous method fetches a more complete representation of the receiver, loading the contents for each property you request from either the Apple Music catalog or the user’s library, depending on the preferred source as well the availability of the content in those respective data sources.\n\nFor example, if you want to load the [doc:\/\/com.apple.MusicKit\/documentation\/MusicKit\/PartialMusicProperty\/tracks-9mk2l] relationship for an [doc:\/\/com.apple.MusicKit\/documentation\/MusicKit\/Album], as found in the user’s library, as well as other associations of content that only live in the Apple Music catalog, like the [doc:\/\/com.apple.MusicKit\/documentation\/MusicKit\/PartialMusicProperty\/recordLabels] and [doc:\/\/com.apple.MusicKit\/documentation\/MusicKit\/PartialMusicProperty\/relatedAlbums] associations, you can use this code:\n\n```swift\nlet album: Album = …\nlet detailedAlbum = try await album.with(\n    [\n        .tracks,\n        .recordLabels,\n        .relatedAlbums\n    ],\n    preferredSource: .library\n)\n```\n\nHere, because the [doc:\/\/com.apple.MusicKit\/documentation\/MusicKit\/PartialMusicProperty\/tracks-9mk2l] relationship for an [doc:\/\/com.apple.MusicKit\/documentation\/MusicKit\/Album] is supported in both the library and the catalog, and because the this code specifically requests [doc:\/\/com.apple.MusicKit\/documentation\/MusicKit\/MusicPropertySource\/library] as the preferred source, the framework will load the tracks from the user’s library. However, because the [doc:\/\/com.apple.MusicKit\/documentation\/MusicKit\/PartialMusicProperty\/recordLabels] and [doc:\/\/com.apple.MusicKit\/documentation\/MusicKit\/PartialMusicProperty\/relatedAlbums] associations are only available in the Apple Music catalog, the framework will also issue a network request to Apple Music API to fetch those associations of content from the catalog.\n\n",
  "sections" : [

  ],
  "source" : "appleJSON",
  "title" : "with(_:preferredSource:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/MusicKit\/MusicItem\/with(_:preferredSource:)-416sk"
}