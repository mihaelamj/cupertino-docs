{
  "abstract" : "Add an extension to your Xcode project to provide systemwide customized text input.",
  "codeExamples" : [
    {
      "code" : "nextKeyboardButton.addTarget(self, action: #selector(handleInputModeList(from:with:)), for: .allTouchEvents)",
      "language" : "swift"
    },
    {
      "code" : "\/\/ Insert a string into the text input view.\ntextDocumentProxy.insertText(\"Hello world.\")\n\n\/\/ Get the currently selected text\nlet selectedText = textDocumentProxy.selectedText",
      "language" : "swift"
    }
  ],
  "contentHash" : "1f6f19ec240394ad4a97506daaca5154a26696a245cb8042df92646506ef91bc",
  "crawledAt" : "2025-12-01T10:38:35Z",
  "id" : "E10471D0-ACD8-45F6-991C-5B06F2ADB932",
  "kind" : "collection",
  "module" : "UIKit",
  "overview" : "## Overview\n\nA custom keyboard replaces the system keyboard for users who want capabilities such as a novel text input method or the ability to enter text in a language not otherwise supported. Users enable your custom keyboard in Settings, which allows them to access your keyboard systemwide wherever third-party keyboards are supported.\n\nCreating a custom keyboard requires several steps. In addition to adding a Custom Keyboard extension target to your project, you have to configure options, implement your custom interface, and decide what text interactions to support. Users expect a variety of common keyboard interactions such as autocorrection, autocapitalization, smart quotes, and more.\n\n### Add a Custom Keyboard target to your app\n\nThe Custom Keyboard Extension template provides a starting point for you to build your keyboard extension. Xcode configures your project to build the extension and includes it in your app’s bundle.\n\n\n\nMake sure the Display Name field in the General tab of your keyboard target accurately describes your keyboard. The Settings app uses this value in the list of third-party keyboards.\n\n\n\nIf you support multiple languages that require different keyboard layout or functionality, repeat the steps above to add additional custom keyboard targets for each language. Set the `PrimaryLanguage` value accordingly in each of the target’s `Info.plist` files.\n\n### Configure information property list options\n\nIf applicable to your custom keyboard, edit the keyboard extension’s `Info.plist` to configure the following options:\n\nSet these keys in the [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Information-Property-List\/NSExtension] > [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Information-Property-List\/NSExtension\/NSExtensionAttributes] dictionary of the `Info.plist` file:\n\n\n\n### Add your custom user interface\n\nWhen the user activates your keyboard, it replaces the system keyboard. Your custom keyboard extension’s principal class provides the view that’s displayed. By default, Xcode’s custom keyboard template configures a class named `KeyboardViewController` as the principal class. This controller’s view is where you define your user interface.\n\nWhen designing your keyboard’s user interface, incorporate a button to switch keyboards. The system keyboard uses a button with a globe icon as shown in the following image.\n\n\n\nUse the [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UIInputViewController\/needsInputModeSwitchKey] property on [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UIInputViewController] to determine if you should display a button to switch keyboards. If the user has only one keyboard enabled, there’s no need to show a keyboard switching interface. On iPhones with Face ID, iOS automatically shows the globe icon below your keyboard view and sets this property to [doc:\/\/com.apple.documentation\/documentation\/Swift\/false], indicating that you shouldn’t show your button.\n\nConfigure your keyboard switching button with an action targeting the [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UIInputViewController\/handleInputModeList(from:with:)] method of your input view controller subclass. The default custom keyboard template does this by adding an action to the button:\n\nUsing [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UIControl\/Event\/allTouchEvents] allows the system to automatically show the keyboard list picker when the user long presses the button.\n\n\n\nYour keyboard should also be flexible with the layout because the width of the keyboard can vary, even while it’s currently on screen. All keyboards should support both compact and regular widths and allow for transitioning between the two. Test your keyboard in portrait and landscape orientations, and on iPadOS be sure to test your keyboard in a floating view.\n\n\n\nFor more details, see [doc:\/\/com.apple.uikit\/documentation\/UIKit\/configuring-a-custom-keyboard-interface].\n\n### Handle text interactions\n\nCustom keyboards run in an isolated process that doesn’t have direct access to the text input view. [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UIInputViewController] provides a [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UIInputViewController\/textDocumentProxy] property allowing your keyboard to access the text input view. You use this proxy to get the selected text, insert or delete text, manipulate the text insertion position, and get surrounding textual context in order to support things like autocorrect or autocomplete.\n\nFor more information, see [doc:\/\/com.apple.uikit\/documentation\/UIKit\/handling-text-interactions-in-custom-keyboards].\n\n### Debug your custom keyboard\n\nDebugging a custom keyboard is similar to debugging any app extension. Xcode prompts you to choose a host app to launch, then you begin editing text in that host app in order to invoke your custom keyboard. The host app can be any app available in the run destination, including your app that contains the keyboard extension.\n\niOS launches your keyboard extension in its own process, and Xcode attaches a debugging session to it. You can now set breakpoints and perform normal debugging tasks in your extension code.\n\n### Limit memory usage\n\nYour custom keyboard code executes in a separate process, and that process has a limit on the amount of memory it may use. If your keyboard extension exceeds the memory limit the system terminates it. Here are some tips for managing memory efficiently:\n\nFor more information on crash logs related to memory usage limits, see [doc:\/\/com.apple.documentation\/documentation\/Xcode\/diagnosing-issues-using-crash-reports-and-device-logs] and `EXC_CRASH (SIGQUIT)`.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/UIKit\/creating-a-custom-keyboard\ncrawled: 2025-12-01T10:38:35Z\n---\n\n# Creating a custom keyboard\n\nAdd an extension to your Xcode project to provide systemwide customized text input.\n\n## Overview\n\nA custom keyboard replaces the system keyboard for users who want capabilities such as a novel text input method or the ability to enter text in a language not otherwise supported. Users enable your custom keyboard in Settings, which allows them to access your keyboard systemwide wherever third-party keyboards are supported.\n\n\n\nCreating a custom keyboard requires several steps. In addition to adding a Custom Keyboard extension target to your project, you have to configure options, implement your custom interface, and decide what text interactions to support. Users expect a variety of common keyboard interactions such as autocorrection, autocapitalization, smart quotes, and more.\n\n### Add a Custom Keyboard target to your app\n\nThe Custom Keyboard Extension template provides a starting point for you to build your keyboard extension. Xcode configures your project to build the extension and includes it in your app’s bundle.\n\n1. Open your app project in Xcode.\n2. Choose File > New > Target.\n3. Select Custom Keyboard Extension from the Application Extension group.\n4. Click Next.\n5. Specify the name of your extension and configure the language and other options.\n6. Click Finish.\n\n\n\nMake sure the Display Name field in the General tab of your keyboard target accurately describes your keyboard. The Settings app uses this value in the list of third-party keyboards.\n\n\n\nIf you support multiple languages that require different keyboard layout or functionality, repeat the steps above to add additional custom keyboard targets for each language. Set the `PrimaryLanguage` value accordingly in each of the target’s `Info.plist` files.\n\n### Configure information property list options\n\nIf applicable to your custom keyboard, edit the keyboard extension’s `Info.plist` to configure the following options:\n\n\n\nSet these keys in the [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Information-Property-List\/NSExtension] > [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Information-Property-List\/NSExtension\/NSExtensionAttributes] dictionary of the `Info.plist` file:\n\n\n\n### Add your custom user interface\n\nWhen the user activates your keyboard, it replaces the system keyboard. Your custom keyboard extension’s principal class provides the view that’s displayed. By default, Xcode’s custom keyboard template configures a class named `KeyboardViewController` as the principal class. This controller’s view is where you define your user interface.\n\n\n\nWhen designing your keyboard’s user interface, incorporate a button to switch keyboards. The system keyboard uses a button with a globe icon as shown in the following image.\n\n\n\nUse the [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UIInputViewController\/needsInputModeSwitchKey] property on [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UIInputViewController] to determine if you should display a button to switch keyboards. If the user has only one keyboard enabled, there’s no need to show a keyboard switching interface. On iPhones with Face ID, iOS automatically shows the globe icon below your keyboard view and sets this property to [doc:\/\/com.apple.documentation\/documentation\/Swift\/false], indicating that you shouldn’t show your button.\n\nConfigure your keyboard switching button with an action targeting the [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UIInputViewController\/handleInputModeList(from:with:)] method of your input view controller subclass. The default custom keyboard template does this by adding an action to the button:\n\n```swift\nnextKeyboardButton.addTarget(self, action: #selector(handleInputModeList(from:with:)), for: .allTouchEvents)\n```\n\nUsing [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UIControl\/Event\/allTouchEvents] allows the system to automatically show the keyboard list picker when the user long presses the button.\n\n\n\nYour keyboard should also be flexible with the layout because the width of the keyboard can vary, even while it’s currently on screen. All keyboards should support both compact and regular widths and allow for transitioning between the two. Test your keyboard in portrait and landscape orientations, and on iPadOS be sure to test your keyboard in a floating view.\n\n\n\nFor more details, see [doc:\/\/com.apple.uikit\/documentation\/UIKit\/configuring-a-custom-keyboard-interface].\n\n### Handle text interactions\n\nCustom keyboards run in an isolated process that doesn’t have direct access to the text input view. [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UIInputViewController] provides a [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UIInputViewController\/textDocumentProxy] property allowing your keyboard to access the text input view. You use this proxy to get the selected text, insert or delete text, manipulate the text insertion position, and get surrounding textual context in order to support things like autocorrect or autocomplete.\n\n```swift\n\/\/ Insert a string into the text input view.\ntextDocumentProxy.insertText(\"Hello world.\")\n\n\/\/ Get the currently selected text\nlet selectedText = textDocumentProxy.selectedText\n```\n\nFor more information, see [doc:\/\/com.apple.uikit\/documentation\/UIKit\/handling-text-interactions-in-custom-keyboards].\n\n### Debug your custom keyboard\n\nDebugging a custom keyboard is similar to debugging any app extension. Xcode prompts you to choose a host app to launch, then you begin editing text in that host app in order to invoke your custom keyboard. The host app can be any app available in the run destination, including your app that contains the keyboard extension.\n\n1. Select the build scheme for your keyboard extension target and a run destination (simulator or device).\n2. Select Product > Run to begin your debugging session.\n3. Xcode prompts you to select a host app. Choose an app that allows text input, like Notes. Xcode builds and installs your app with its keyboard extension, then launches the app you selected.\n4. After the host app launches, begin editing a text field. The most recently used keyboard is shown.\n5. Touch and hold the globe button to display the list of available keyboards. Choose your app’s keyboard.\n\niOS launches your keyboard extension in its own process, and Xcode attaches a debugging session to it. You can now set breakpoints and perform normal debugging tasks in your extension code.\n\n\n\n### Limit memory usage\n\nYour custom keyboard code executes in a separate process, and that process has a limit on the amount of memory it may use. If your keyboard extension exceeds the memory limit the system terminates it. Here are some tips for managing memory efficiently:\n\n- Test your keyboard on various device models. The memory limits vary from model to model.\n- Be sure to handle low memory notifications. Release any resources that aren’t strictly necessary.\n- Keep in mind that dismissing the keyboard won’t necessarily terminate the keyboard extension process. Don’t assume the system releases memory your keyboard is using when it’s no longer visible on screen.\n\nFor more information on crash logs related to memory usage limits, see [doc:\/\/com.apple.documentation\/documentation\/Xcode\/diagnosing-issues-using-crash-reports-and-device-logs] and `EXC_CRASH (SIGQUIT)`.\n\n## Keyboard configuration\n\n- **Configuring a custom keyboard interface**: Design a flexible, functional, and responsive interface for editing text.\n- **Configuring open access for a custom keyboard**: Enable network access and write access to a shared group container.\n\n## Text interactions\n\n- **Handling text interactions in custom keyboards**: Insert, delete, and manipulate text by using a proxy to a text input view.\n\n## Custom keyboards\n\n- **UIInputViewController**: The primary view controller for a custom keyboard app extension.\n- **UIInputView**: An object that displays and manages custom input for a view when that view becomes the first responder.\n- **UILexicon**: A read-only array of term pairs, each in a lexicon entry object, for a custom keyboard.\n- **UILexiconEntry**: A read-only term pair, available within a lexicon object, for a custom keyboard.\n- **UITextDocumentProxy**: An object that provides textual context to a custom keyboard.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Design a flexible, functional, and responsive interface for editing text.",
          "name" : "Configuring a custom keyboard interface",
          "url" : "https:\/\/developer.apple.com\/documentation\/UIKit\/configuring-a-custom-keyboard-interface"
        },
        {
          "description" : "Enable network access and write access to a shared group container.",
          "name" : "Configuring open access for a custom keyboard",
          "url" : "https:\/\/developer.apple.com\/documentation\/UIKit\/configuring-open-access-for-a-custom-keyboard"
        }
      ],
      "title" : "Keyboard configuration"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Insert, delete, and manipulate text by using a proxy to a text input view.",
          "name" : "Handling text interactions in custom keyboards",
          "url" : "https:\/\/developer.apple.com\/documentation\/UIKit\/handling-text-interactions-in-custom-keyboards"
        }
      ],
      "title" : "Text interactions"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "The primary view controller for a custom keyboard app extension.",
          "name" : "UIInputViewController",
          "url" : "https:\/\/developer.apple.com\/documentation\/UIKit\/UIInputViewController"
        },
        {
          "description" : "An object that displays and manages custom input for a view when that view becomes the first responder.",
          "name" : "UIInputView",
          "url" : "https:\/\/developer.apple.com\/documentation\/UIKit\/UIInputView"
        },
        {
          "description" : "A read-only array of term pairs, each in a lexicon entry object, for a custom keyboard.",
          "name" : "UILexicon",
          "url" : "https:\/\/developer.apple.com\/documentation\/UIKit\/UILexicon"
        },
        {
          "description" : "A read-only term pair, available within a lexicon object, for a custom keyboard.",
          "name" : "UILexiconEntry",
          "url" : "https:\/\/developer.apple.com\/documentation\/UIKit\/UILexiconEntry"
        },
        {
          "description" : "An object that provides textual context to a custom keyboard.",
          "name" : "UITextDocumentProxy",
          "url" : "https:\/\/developer.apple.com\/documentation\/UIKit\/UITextDocumentProxy"
        }
      ],
      "title" : "Custom keyboards"
    }
  ],
  "source" : "appleJSON",
  "title" : "Creating a custom keyboard",
  "url" : "https:\/\/developer.apple.com\/documentation\/UIKit\/creating-a-custom-keyboard"
}