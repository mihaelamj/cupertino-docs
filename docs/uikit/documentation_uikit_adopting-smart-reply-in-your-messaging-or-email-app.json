{
  "abstract" : "Generate reply suggestions by using Apple Intelligence and put selected text into your text UI.",
  "codeExamples" : [

  ],
  "contentHash" : "c0d1531bbb296b62d881d46781c994586c8fdd9fd505cd76d5fb3e70f878cf26",
  "crawledAt" : "2025-12-01T10:38:26Z",
  "id" : "EBAD8D74-A6A4-4A9A-A3D1-7ADD3C45566F",
  "kind" : "article",
  "module" : "UIKit",
  "overview" : "## Overview\n\nMessages and Mail use Apple Intelligence to provide the Smart Reply feature, which generates suggestions that are contextually relevant for a thread when you draft a message or email. To add this feature to your messaging or email app, follow these steps:\n\n### Create a conversation context\n\nTo give Apple Intelligence the context it needs for Smart Reply generation, create a conversation context object with information about your messaging conversation. This object includes information about participants in the conversation and text entries from the conversation.\n\nWhen you prepare your user interface to send and receive messages with one or more participants, create a conversation context that reflects the type of messaging thread in your app: use [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UIMessageConversationContext] for messaging, and [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UIMailConversationContext] for email.\n\nConfigure the conversation context with these details:\n\nHere’s how you configure a conversation context:\n\n### Attach the conversation context to a text view or text field\n\nWhen you create an entry field, such as a text view or text field, which you use to get input from the person using your app, assign the conversation context you created to the object’s [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UITextInputTraits\/conversationContext] property before the keyboard appears:\n\nThe keyboard uses this context once per session for initialization. Use the steps in the next section to handle changes to the conversation during the keyboard session.\n\n### Keep the conversation context up-to-date\n\nEvery time you send or receive a message, keep the conversation context up-to-date. Because the conversation context is tied to a keyboard session, update or regenerate the conversation context you created earlier if the focus changed from your entry field, then set the entry field’s `conversationContext` to the updated context:\n\nThen, call [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UITextInputDelegate\/conversationContext(_:didChange:)] on the entry field’s `inputDelegate` to notify it that the conversation has more entries:\n\n### Generate long-form responses\n\nFor email or other long-form messaging apps, instead of dropping the Smart Reply response directly into the entry field, use the suggestion to generate a long-form response with your own model. To do this, implement [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UITextViewDelegate\/textView(_:insertInputSuggestion:)] or [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UITextFieldDelegate\/textField(_:insertInputSuggestion:)]:\n\nIf your entry field is a custom implementation of [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UITextInput], call [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UITextInput\/insert(_:)] instead.\n\n### Understand when the system generates Smart Reply suggestions\n\nThe system only generates Smart Reply suggestions in specific circumstances, and might not generate suggestions in all cases.\n\nCircumstances when a messaging conversation can generate suggestions include:\n\nCircumstances when a mail conversation can generate suggestions include:",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/UIKit\/adopting-smart-reply-in-your-messaging-or-email-app\ncrawled: 2025-12-01T10:38:26Z\n---\n\n# Adopting Smart Reply in your messaging or email app\n\n**Article**\n\nGenerate reply suggestions by using Apple Intelligence and put selected text into your text UI.\n\n## Overview\n\nMessages and Mail use Apple Intelligence to provide the Smart Reply feature, which generates suggestions that are contextually relevant for a thread when you draft a message or email. To add this feature to your messaging or email app, follow these steps:\n\n- Create a *conversation context* object with your app’s data from a thread.\n- Attach the conversation context to your text view or text field when you prepare your user interface.\n- Implement delegate methods to keep the conversation context up-to-date when you send or receive messages.\n- For an email or other long-form type of messaging, use the selected input suggestion to generate a long-form response and place it in the entry field.\n\n### Create a conversation context\n\nTo give Apple Intelligence the context it needs for Smart Reply generation, create a conversation context object with information about your messaging conversation. This object includes information about participants in the conversation and text entries from the conversation.\n\nWhen you prepare your user interface to send and receive messages with one or more participants, create a conversation context that reflects the type of messaging thread in your app: use [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UIMessageConversationContext] for messaging, and [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UIMailConversationContext] for email.\n\nConfigure the conversation context with these details:\n\n- A unique identifier for the thread\n- A dictionary of unique identifiers and names of the participants in the thread\n- A set of identifiers for the current person using your app to send and receive messages\n- A set of identifiers for the other people in the conversation\n- An array of conversation entries for the type of thread, either [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UIMessageConversationContext\/MessageEntry] or [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UIMailConversationContext\/MailEntry]\n\nHere’s how you configure a conversation context:\n\n\n\n### Attach the conversation context to a text view or text field\n\nWhen you create an entry field, such as a text view or text field, which you use to get input from the person using your app, assign the conversation context you created to the object’s [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UITextInputTraits\/conversationContext] property before the keyboard appears:\n\n\n\nThe keyboard uses this context once per session for initialization. Use the steps in the next section to handle changes to the conversation during the keyboard session.\n\n### Keep the conversation context up-to-date\n\nEvery time you send or receive a message, keep the conversation context up-to-date. Because the conversation context is tied to a keyboard session, update or regenerate the conversation context you created earlier if the focus changed from your entry field, then set the entry field’s `conversationContext` to the updated context:\n\n\n\nThen, call [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UITextInputDelegate\/conversationContext(_:didChange:)] on the entry field’s `inputDelegate` to notify it that the conversation has more entries:\n\n\n\n### Generate long-form responses\n\nFor email or other long-form messaging apps, instead of dropping the Smart Reply response directly into the entry field, use the suggestion to generate a long-form response with your own model. To do this, implement [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UITextViewDelegate\/textView(_:insertInputSuggestion:)] or [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UITextFieldDelegate\/textField(_:insertInputSuggestion:)]:\n\n\n\nIf your entry field is a custom implementation of [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UITextInput], call [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UITextInput\/insert(_:)] instead.\n\n### Understand when the system generates Smart Reply suggestions\n\nThe system only generates Smart Reply suggestions in specific circumstances, and might not generate suggestions in all cases.\n\nCircumstances when a messaging conversation can generate suggestions include:\n\n- The input field is empty.\n- The last message in the conversation is from the recipient, not the person sending messages.\n- The preceding messages in the conversation are text (not images or emojis).\n- The preceding messages are recent.\n\nCircumstances when a mail conversation can generate suggestions include:\n\n- The person is the direct recipient of the email, and is not in the CC or BCC list.\n- The person has not already replied to the email.\n- The sender and recipient of the email have different email addresses.\n\n## Smart Reply for messaging\n\n- **UIConversationContext**: A base class that represents a conversation between participants, such as in an email or messaging app.\n- **UIConversationContext.Entry**: A base class that represents a message in a conversation.\n- **UIMailConversationContext**: A class that represents an email conversation.\n- **UIMailConversationContext.MailEntry**: A class that represents a specific email in an email thread.\n- **UIMessageConversationContext**: A class that represents a message conversation.\n- **UIMessageConversationContext.MessageEntry**: A class that represents a message in a message conversation.\n- **UIInputSuggestion**: A base class you use to handle suggestions from the keyboard or system.\n- **UISmartReplySuggestion**: A class you use to handle a Smart Reply suggestion.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "A base class that represents a conversation between participants, such as in an email or messaging app.",
          "name" : "UIConversationContext",
          "url" : "https:\/\/developer.apple.com\/documentation\/UIKit\/UIConversationContext"
        },
        {
          "description" : "A base class that represents a message in a conversation.",
          "name" : "UIConversationContext.Entry",
          "url" : "https:\/\/developer.apple.com\/documentation\/UIKit\/UIConversationContext\/Entry"
        },
        {
          "description" : "A class that represents an email conversation.",
          "name" : "UIMailConversationContext",
          "url" : "https:\/\/developer.apple.com\/documentation\/UIKit\/UIMailConversationContext"
        },
        {
          "description" : "A class that represents a specific email in an email thread.",
          "name" : "UIMailConversationContext.MailEntry",
          "url" : "https:\/\/developer.apple.com\/documentation\/UIKit\/UIMailConversationContext\/MailEntry"
        },
        {
          "description" : "A class that represents a message conversation.",
          "name" : "UIMessageConversationContext",
          "url" : "https:\/\/developer.apple.com\/documentation\/UIKit\/UIMessageConversationContext"
        },
        {
          "description" : "A class that represents a message in a message conversation.",
          "name" : "UIMessageConversationContext.MessageEntry",
          "url" : "https:\/\/developer.apple.com\/documentation\/UIKit\/UIMessageConversationContext\/MessageEntry"
        },
        {
          "description" : "A base class you use to handle suggestions from the keyboard or system.",
          "name" : "UIInputSuggestion",
          "url" : "https:\/\/developer.apple.com\/documentation\/UIKit\/UIInputSuggestion"
        },
        {
          "description" : "A class you use to handle a Smart Reply suggestion.",
          "name" : "UISmartReplySuggestion",
          "url" : "https:\/\/developer.apple.com\/documentation\/UIKit\/UISmartReplySuggestion"
        }
      ],
      "title" : "Smart Reply for messaging"
    }
  ],
  "source" : "appleJSON",
  "title" : "Adopting Smart Reply in your messaging or email app",
  "url" : "https:\/\/developer.apple.com\/documentation\/UIKit\/adopting-smart-reply-in-your-messaging-or-email-app"
}