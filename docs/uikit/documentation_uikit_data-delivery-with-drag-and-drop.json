{
  "abstract" : "Share data between iPad apps during a drag and drop operation using an item provider.",
  "codeExamples" : [
    {
      "code" : "func tableView(_ tableView: UITableView,\n               itemsForBeginning session: UIDragSession,\n               at indexPath: IndexPath) -> [UIDragItem] {\n    let contactCard = dataSource.clients[indexPath.row]\n    let dragItem = UIDragItem(itemProvider: NSItemProvider(object: contactCard))\n    return [dragItem]\n}",
      "language" : "swift"
    },
    {
      "code" : "func tableView(_ tableView: UITableView,\n               itemsForAddingTo session: UIDragSession,\n               at indexPath: IndexPath,\n               point: CGPoint) -> [UIDragItem] {\n    \/\/ use this to NOT allow additional items to the drag:\n    \/\/ return []\n\n    let contactCard = dataSource.clients[indexPath.row]\n    let dragItem = UIDragItem(itemProvider: NSItemProvider(object: contactCard))\n    dragItem.localObject = true \/\/ makes it faster to drag and drop content within the same app\n    return [dragItem]\n}",
      "language" : "swift"
    },
    {
      "code" : "_ = dropItem.dragItem.itemProvider.loadObject(\n    ofClass: ContactCard.self,\n    completionHandler: { (data, error) in\n        if error == nil {\n            DispatchQueue.main.async {\n                let placeHolder = UITableViewDropPlaceholder(\n                    insertionIndexPath: destinationIndexPath!,\n                    reuseIdentifier: ClientsDataSource.tableCellIdentifier,\n                    rowHeight: UITableView.automaticDimension)\n\n                let placeHolderContext = coordinator.drop(dropItem.dragItem, to: placeHolder)\n\n                placeHolderContext.commitInsertion(dataSourceUpdates: { (insertionIndexPath) in\n                    \/\/ Update our data source with the newly dropped contact.\n                    if let newContact = data as? ContactCard {\n                        self.dataSource.clients.insert(newContact, at: insertionIndexPath.item)\n                    }\n                })\n            }\n        } else {\n            print(\"\"\"\n                There was an error in loading the drop item: ### \\(#function),\n                \\(String(describing: error?.localizedDescription))\n                \"\"\")\n        }\n    })",
      "language" : "swift"
    },
    {
      "code" : "_ = dropItem.dragItem.itemProvider.loadObject(\n    ofClass: ContactCard.self,\n    completionHandler: { (data, error) in\n        if error == nil {\n            if let newContact = data as? ContactCard {\n                self.dataSource.clients.append(newContact)\n                DispatchQueue.main.async {\n                    self.tableView.reloadData()\n                }\n            }\n        } else {\n            print(\"\"\"\n                There was an error in loading the drop item: ### \\(#function),\n                \\(String(describing: error?.localizedDescription))\n                \"\"\")\n        }\n    })",
      "language" : "swift"
    }
  ],
  "contentHash" : "7f1881c18ff033a41636b4382753be774ada388a955f801107f6d3fc5deb52b6",
  "crawledAt" : "2025-12-02T21:06:56Z",
  "id" : "17E5968B-7991-47BF-BFFC-2A31783AEC41",
  "kind" : "unknown",
  "language" : "swift",
  "module" : "UIKit",
  "overview" : "## Overview\n\nWith drag and drop, users can copy data from one iPad app to another. The data is shared between the apps using an [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSItemProvider] object. This sample code project shows how to use an item provider to:\n\nThe sample iPad app uses a table view to display a list of contacts. The user can drag one or more contacts and drop them into another app such as Contacts or Notes. Also, the user can use another app, like Contacts or Notes, to drag and drop new contacts into the sample app.\n\n### Add drag support\n\nThe table view in the sample app displays a list of contacts. When the user begins dragging a contact, the system calls the [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UITableViewDragDelegate\/tableView(_:itemsForBeginning:at:)] method. The method’s implementation retrieves the contact from the list using the `at` parameter to determine the contact’s location within the list. The method then creates an item provider with the contact object and wraps the item provider in a [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UIDragItem] object. The method places the drag item into an array which it returns to the system. Finally, the system adds the drag item to the current drag session.\n\nThe user may select multiple contacts to drag to another app. Each time the user selects a contact, the system calls the [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UITableViewDragDelegate\/tableView(_:itemsForAddingTo:at:point:)] method. Similar to beginning a drag session, this method creates an item provider for the selected contact, creates a drag item that contains the item provider, and returns an array containing the drag item so the system can add the drag item to the drag session.\n\nIn both cases, the [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UITableViewDragDelegate] methods create item providers using instances of the `ContactCard` class. This class implements the [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSItemProviderWriting] protocol, making it possible to initialize a new item provider with a contact card object.\n\nBy conforming to this protocol, a contact card object can tell the item provider the data types it supports; the sample app supports vCard and plain text. A contact card can also load data of a specified type, which an item provider retrieves by calling the contact card’s [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSItemProviderWriting\/loadData(withTypeIdentifier:forItemProviderCompletionHandler:)] method.\n\n### Add drop support\n\nWhen the user drops contact information from another app into the sample app, the system calls the [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UITableViewDropDelegate\/tableView(_:performDropWith:)] method. `ContactsTableViewController` implements this method to handle the drop operation. The implementation of the method uses the drop item’s item provider to call [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSItemProvider\/loadObject(ofClass:completionHandler:)-8ak5d], which retrieves a `ContactCard` object representing the dropped contact information.\n\nThe `loadObject` method asks the `ContactCard` class for the contact card object. The class, which conforms to the [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSItemProviderReading] protocol, implements the [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSItemProviderReading\/object(withItemProviderData:typeIdentifier:)] class method, which creates and initializes a contact card object with the item provider data.\n\nWhen the user drops a contact at a specific location within the table view, the completion handler (from the `loadObject` call) creates a placeholder that displays a gap at the drop location. Next, the handler inserts the dropped contact into the list of contacts at the index path of the drop location. And finally, the completion handler replaces the placeholder with a view displaying contact.\n\nWhen the user drops the contact on an empty location in the table view, the completion handler adds the dropped contact to the end of the list without displaying a gap.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/uikit\/data-delivery-with-drag-and-drop\ncrawled: 2025-12-02T21:06:56Z\n---\n\n# Data delivery with drag and drop\n\n**Sample Code**\n\nShare data between iPad apps during a drag and drop operation using an item provider.\n\n## Overview\n\nWith drag and drop, users can copy data from one iPad app to another. The data is shared between the apps using an [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSItemProvider] object. This sample code project shows how to use an item provider to:\n\n- Share a contact that the user drags from the sample iPad app and drops into another app.\n- Retrieve contact information that the user drags from another app and drops into the sample app.\n\nThe sample iPad app uses a table view to display a list of contacts. The user can drag one or more contacts and drop them into another app such as Contacts or Notes. Also, the user can use another app, like Contacts or Notes, to drag and drop new contacts into the sample app.\n\n### Add drag support\n\nThe table view in the sample app displays a list of contacts. When the user begins dragging a contact, the system calls the [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UITableViewDragDelegate\/tableView(_:itemsForBeginning:at:)] method. The method’s implementation retrieves the contact from the list using the `at` parameter to determine the contact’s location within the list. The method then creates an item provider with the contact object and wraps the item provider in a [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UIDragItem] object. The method places the drag item into an array which it returns to the system. Finally, the system adds the drag item to the current drag session.\n\n```swift\nfunc tableView(_ tableView: UITableView,\n               itemsForBeginning session: UIDragSession,\n               at indexPath: IndexPath) -> [UIDragItem] {\n    let contactCard = dataSource.clients[indexPath.row]\n    let dragItem = UIDragItem(itemProvider: NSItemProvider(object: contactCard))\n    return [dragItem]\n}\n```\n\nThe user may select multiple contacts to drag to another app. Each time the user selects a contact, the system calls the [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UITableViewDragDelegate\/tableView(_:itemsForAddingTo:at:point:)] method. Similar to beginning a drag session, this method creates an item provider for the selected contact, creates a drag item that contains the item provider, and returns an array containing the drag item so the system can add the drag item to the drag session.\n\n```swift\nfunc tableView(_ tableView: UITableView,\n               itemsForAddingTo session: UIDragSession,\n               at indexPath: IndexPath,\n               point: CGPoint) -> [UIDragItem] {\n    \/\/ use this to NOT allow additional items to the drag:\n    \/\/ return []\n\n    let contactCard = dataSource.clients[indexPath.row]\n    let dragItem = UIDragItem(itemProvider: NSItemProvider(object: contactCard))\n    dragItem.localObject = true \/\/ makes it faster to drag and drop content within the same app\n    return [dragItem]\n}\n```\n\n\n\nIn both cases, the [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UITableViewDragDelegate] methods create item providers using instances of the `ContactCard` class. This class implements the [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSItemProviderWriting] protocol, making it possible to initialize a new item provider with a contact card object.\n\nBy conforming to this protocol, a contact card object can tell the item provider the data types it supports; the sample app supports vCard and plain text. A contact card can also load data of a specified type, which an item provider retrieves by calling the contact card’s [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSItemProviderWriting\/loadData(withTypeIdentifier:forItemProviderCompletionHandler:)] method.\n\n### Add drop support\n\nWhen the user drops contact information from another app into the sample app, the system calls the [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UITableViewDropDelegate\/tableView(_:performDropWith:)] method. `ContactsTableViewController` implements this method to handle the drop operation. The implementation of the method uses the drop item’s item provider to call [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSItemProvider\/loadObject(ofClass:completionHandler:)-8ak5d], which retrieves a `ContactCard` object representing the dropped contact information.\n\nThe `loadObject` method asks the `ContactCard` class for the contact card object. The class, which conforms to the [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSItemProviderReading] protocol, implements the [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSItemProviderReading\/object(withItemProviderData:typeIdentifier:)] class method, which creates and initializes a contact card object with the item provider data.\n\nWhen the user drops a contact at a specific location within the table view, the completion handler (from the `loadObject` call) creates a placeholder that displays a gap at the drop location. Next, the handler inserts the dropped contact into the list of contacts at the index path of the drop location. And finally, the completion handler replaces the placeholder with a view displaying contact.\n\n```swift\n_ = dropItem.dragItem.itemProvider.loadObject(\n    ofClass: ContactCard.self,\n    completionHandler: { (data, error) in\n        if error == nil {\n            DispatchQueue.main.async {\n                let placeHolder = UITableViewDropPlaceholder(\n                    insertionIndexPath: destinationIndexPath!,\n                    reuseIdentifier: ClientsDataSource.tableCellIdentifier,\n                    rowHeight: UITableView.automaticDimension)\n\n                let placeHolderContext = coordinator.drop(dropItem.dragItem, to: placeHolder)\n\n                placeHolderContext.commitInsertion(dataSourceUpdates: { (insertionIndexPath) in\n                    \/\/ Update our data source with the newly dropped contact.\n                    if let newContact = data as? ContactCard {\n                        self.dataSource.clients.insert(newContact, at: insertionIndexPath.item)\n                    }\n                })\n            }\n        } else {\n            print(\"\"\"\n                There was an error in loading the drop item: ### \\(#function),\n                \\(String(describing: error?.localizedDescription))\n                \"\"\")\n        }\n    })\n```\n\nWhen the user drops the contact on an empty location in the table view, the completion handler adds the dropped contact to the end of the list without displaying a gap.\n\n```swift\n_ = dropItem.dragItem.itemProvider.loadObject(\n    ofClass: ContactCard.self,\n    completionHandler: { (data, error) in\n        if error == nil {\n            if let newContact = data as? ContactCard {\n                self.dataSource.clients.append(newContact)\n                DispatchQueue.main.async {\n                    self.tableView.reloadData()\n                }\n            }\n        } else {\n            print(\"\"\"\n                There was an error in loading the drop item: ### \\(#function),\n                \\(String(describing: error?.localizedDescription))\n                \"\"\")\n        }\n    })\n```\n\n## Item providers\n\n- **NSItemProvider**: An item provider for conveying data or a file between processes during drag-and-drop or copy-and-paste activities, or from a host app to an app extension.\n- **NSItemProviderReading**: The protocol for implementing a class to allow an item provider to create an instance of the class.\n- **NSItemProviderWriting**: The protocol for implementing a class to allow an item provider to retrieve data from an instance of the class.\n- **UIItemProviderPresentationSizeProviding**\n- **UIItemProviderReadingAugmentationDesignating**\n- **UIItemProviderReadingAugmentationProviding**\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "An item provider for conveying data or a file between processes during drag-and-drop or copy-and-paste activities, or from a host app to an app extension.",
          "name" : "NSItemProvider",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSItemProvider"
        },
        {
          "description" : "The protocol for implementing a class to allow an item provider to create an instance of the class.",
          "name" : "NSItemProviderReading",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSItemProviderReading"
        },
        {
          "description" : "The protocol for implementing a class to allow an item provider to retrieve data from an instance of the class.",
          "name" : "NSItemProviderWriting",
          "url" : "https:\/\/developer.apple.com\/documentation\/Foundation\/NSItemProviderWriting"
        },
        {
          "description" : "",
          "name" : "UIItemProviderPresentationSizeProviding",
          "url" : "https:\/\/developer.apple.com\/documentation\/UIKit\/UIItemProviderPresentationSizeProviding"
        },
        {
          "description" : "",
          "name" : "UIItemProviderReadingAugmentationDesignating",
          "url" : "https:\/\/developer.apple.com\/documentation\/UIKit\/UIItemProviderReadingAugmentationDesignating"
        },
        {
          "description" : "",
          "name" : "UIItemProviderReadingAugmentationProviding",
          "url" : "https:\/\/developer.apple.com\/documentation\/UIKit\/UIItemProviderReadingAugmentationProviding"
        }
      ],
      "title" : "Item providers"
    }
  ],
  "source" : "appleJSON",
  "title" : "Data delivery with drag and drop",
  "url" : "https:\/\/developer.apple.com\/documentation\/uikit\/data-delivery-with-drag-and-drop"
}