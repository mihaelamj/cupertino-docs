{
  "abstract" : "Share data and collaborate with people from your app.",
  "codeExamples" : [
    {
      "code" : "\/\/ Create an item provider for your data.\nlet itemProvider = NSItemProvider(item: noteText.text as NSString,\n                                  typeIdentifier: \"public.utf8-plain-text\")\n\n\/\/ Create an activity item configuration from the item provider.\nlet configuration =\nUIActivityItemsConfiguration(itemProviders: [itemProvider])\n\n\/\/ Create the activity view controller from the configuration.\nlet shareSheet = UIActivityViewController(activityItemsConfiguration: configuration)\n\n\/\/ Present the share sheet.\npresent(shareSheet, animated:true) {}",
      "language" : "swift"
    },
    {
      "code" : "\/\/ Create an empty item provider.\nlet itemProvider = NSItemProvider()\n\n\/\/ Add the URL to a file saved in the iCloud document container.\nitemProvider\n    .registerFileRepresentation(for: .utf8PlainText,\n                                openInPlace: true) { completion in\n    completion(url, true, nil)\n    return nil\n}",
      "language" : "swift"
    },
    {
      "code" : "\/\/ Create an item provider.\nlet itemProvider = NSItemProvider()\n\n\/\/ Create and save a new share.\nitemProvider.registerCKShare(container: container,\n                             allowedSharingOptions: CKAllowedSharingOptions.standard) {\n    \n    \/\/ Create your share.\n    let newShare = CKShare(rootRecord: recordToShare)\n    \n    \/\/ Configure the share, save it, and handle any errors here.\n    \n    \/\/ Return the newly saved share.\n    return newShare\n    \n}",
      "language" : "swift"
    },
    {
      "code" : "\/\/ Create an item provider.\nlet itemProvider = NSItemProvider()\n\n\/\/ Register an existing share.\nitemProvider\n    .registerCKShare(\n        savedShare,\n        container: container,\n        allowedSharingOptions: CKAllowedSharingOptions.standard\n    )",
      "language" : "swift"
    },
    {
      "code" : "\/\/ Iterate through the metadata keys.\nconfiguration.perItemMetadataProvider = { _, key in\n    switch key {\n    case .collaborationModeRestrictions:\n        \/\/ If it's the collaboration mode restriction key, return an array\n        \/\/ containing a collaboration mode restriction object.\n        let modeRestriction = UIActivityViewController.CollaborationModeRestriction(\n            disabledMode: .collaborate\n        )\n        return [modeRestriction]\n    default:\n        return nil\n    }\n}",
      "language" : "swift"
    },
    {
      "code" : "\/\/ Iterate through the metadata keys.\nconfiguration.perItemMetadataProvider = { _, key in\n    switch key {\n    case .collaborationModeRestrictions:\n        \/\/ Set the title and text for the alert. Optionally, you can set the title and provide\n        \/\/ a launch URL for the recovery action.\n        let modeRestriction = UIActivityViewController.CollaborationModeRestriction(\n            disabledMode: .collaborate,\n            alertTitle: \"File Locked\",\n            alertMessage: \"You need to unlock the file before you can share it for collaboration.\",\n            alertDismissButtonTitle: \"Cancel\",\n            alertRecoverySuggestionButtonTitle: \"Unlock\",\n            alertRecoverySuggestionButtonLaunch: unlockURL\n        )\n        return [modeRestriction]\n    default:\n        return nil\n    }\n}",
      "language" : "swift"
    },
    {
      "code" : "\/\/ Gather data about the recipient.\nvar name = PersonNameComponents()\nname.givenName = myBFF.givenName\nname.familyName = myBFF.familyName\n\nlet displayName = myBFF.givenName\nlet email = myBFF.email\nlet image = INImage(imageData: myBFF.image)\n\n\/\/ Create an `INPerson` instance for the recipient.\nlet recipient = INPerson(\n    personHandle: .init(value: email, type: .emailAddress),\n    nameComponents: name,\n    displayName: displayName,\n    image: image,\n    contactIdentifier: nil,\n    customIdentifier: nil)\n\n\/\/ Iterate through the metadata keys.\nconfiguration.perItemMetadataProvider = { _, key in\n    switch key {\n        \/\/ Set the share recipients to an array of `INPerson` instances.\n    case .shareRecipients:\n        return [recipient]\n    default:\n        return nil\n    }\n}",
      "language" : "swift"
    },
    {
      "code" : "\/\/ Hide the suggested recipients.\nshareSheet.excludedActivityViewTypes = .peopleSuggestions",
      "language" : "swift"
    }
  ],
  "contentHash" : "6d13d73d784231098e0ec1ee89eb2b9ebc7e8124d788430ff84cdf28af33fea8",
  "crawledAt" : "2025-12-02T16:43:46Z",
  "id" : "1694754C-D04E-4C8F-ACD6-5EDE0FF981F5",
  "kind" : "article",
  "language" : "swift",
  "module" : "UIKit",
  "overview" : "## Overview\n\nYou can share data from your app using a [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UIActivityViewController] object. There are numerous options for packaging your data and instantiating the activity view controller. One approach is to create one or more [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSItemProvider] objects for the data you want to share. Use the item providers to create a [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UIActivityItemsConfiguration], and then use the configuration to create your activity view controller. You can then present the view controller.\n\nThis displays the share sheet, letting someone share a copy of the data with other apps on the device. The options that appear in the share sheet vary depending on the type of data that you’re sharing. The example above shares a UTF-8 string, so the share sheet shows apps that can accept text, like Messages, Mail, and Notes.\n\n\n\n### Enable collaboration for iCloud documents\n\nThe example above shares a copy of your app’s data. You can also enable collaboration so that the recipients can see an updated view of the data, and even make their own changes to it, depending on the permissions in your app.\n\nTo enable collaboration, you need shareable content, such as:\n\nFor example, to enable collaboration for an iCloud document, you need a URL to a file in your app’s iCloud container. Create an [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSItemProvider] object, and call its [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSItemProvider\/registerFileRepresentation(for:visibility:openInPlace:loadHandler:)] method, passing the URL as the `for:` parameter and [doc:\/\/com.apple.documentation\/documentation\/Swift\/true] as the `openInPlace:` parameter.\n\nThen create and display the activity view controller as in the first code example. This time, the share sheet has a pop-up menu for selecting a sharing mode.\n\n\n\n### Enable the copying and collaboration of CloudKit data\n\nBecause CloudKit doesn’t store its data as files, it requires a different approach for both sharing copies and collaborating. To share a copy of CloudKit data, you need to create a shareable representation of the data. Then register that data with an [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSItemProvider]. For example, if you want to share your app’s data as UTF-8 text, you can use the previous example to create an item provider for your text.\n\nTo enable collaboration, create a [doc:\/\/com.apple.documentation\/documentation\/CloudKit\/CKShare] when collaboration starts. You also need your [doc:\/\/com.apple.documentation\/documentation\/CloudKit\/CKContainer] and the [doc:\/\/com.apple.documentation\/documentation\/CloudKit\/CKAllowedSharingOptions] that define the permissions you’re granting to collaborators.\n\nTo invite new collaborators to an existing share, create an item provider and register the share.\n\nFor more information about collaboration in CloudKit, see [doc:\/\/com.apple.documentation\/documentation\/CloudKit\/sharing-cloudkit-data-with-other-icloud-users].\n\n### Restrict the sharing mode\n\nBy default, if your item provider supports both copying and collaborating, the share sheet shows a pop-up menu, letting people select a sharing mode. In iOS 18 and later, you can restrict sharing to only one of the two modes.\n\nTo restrict the sharing mode, create a [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UIActivityViewController\/CollaborationModeRestriction] and assign it to your configuration’s metadata. You can access the metadata using the configuration’s [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UIActivityItemsConfiguration\/perItemMetadataProvider] property.\n\nThen, create and present the share sheet as before. This produces a share sheet that displays only the allowed sharing mode.\n\n\n\nAlternatively, you can show both sharing options, but display an alert when someone selects the restricted mode. This alert can also include a recovery suggestion to help people enable the restricted mode.\n\nIn this case, the share sheet shows the pop-up menu with the allowed sharing mode already selected. When someone tries to change the sharing mode to the restricted mode, the system displays an alert. If they then tap the recovery button, it calls your scene delegate’s [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UISceneDelegate\/scene(_:openURLContexts:)] method, passing in the provided URL. For more information about using launch URLs, see [doc:\/\/com.apple.documentation\/documentation\/Xcode\/defining-a-custom-url-scheme-for-your-app].\n\n### Specify the people to share with\n\nIn iOS 18 and later, you can also specify recipients for the shared data. Create an [doc:\/\/com.apple.documentation\/documentation\/Intents\/INPerson] instance for each recipient and add them to your activity configuration’s metadata.\n\nThe share sheet then populates the recipient’s data in apps that accept recipients, such as Mail and Messages.\n\n\n\nIf a person selects a different recipient from the share sheet, that selection overrides your specified recipients. If they select an app that doesn’t accept recipients, the system ignores your recipient.\n\nYou can also hide the other recipients from the share sheet by setting the activity view controller’s `excludedActivityViewTypes` property to `UIActivityViewTypesPeopleSuggestions`.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/UIKit\/collaborating-and-sharing-copies-of-your-data\ncrawled: 2025-12-02T16:43:46Z\n---\n\n# Collaborating and sharing copies of your data\n\n**Article**\n\nShare data and collaborate with people from your app.\n\n## Overview\n\nYou can share data from your app using a [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UIActivityViewController] object. There are numerous options for packaging your data and instantiating the activity view controller. One approach is to create one or more [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSItemProvider] objects for the data you want to share. Use the item providers to create a [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UIActivityItemsConfiguration], and then use the configuration to create your activity view controller. You can then present the view controller.\n\n```swift\n\/\/ Create an item provider for your data.\nlet itemProvider = NSItemProvider(item: noteText.text as NSString,\n                                  typeIdentifier: \"public.utf8-plain-text\")\n\n\/\/ Create an activity item configuration from the item provider.\nlet configuration =\nUIActivityItemsConfiguration(itemProviders: [itemProvider])\n\n\/\/ Create the activity view controller from the configuration.\nlet shareSheet = UIActivityViewController(activityItemsConfiguration: configuration)\n\n\/\/ Present the share sheet.\npresent(shareSheet, animated:true) {}\n```\n\nThis displays the share sheet, letting someone share a copy of the data with other apps on the device. The options that appear in the share sheet vary depending on the type of data that you’re sharing. The example above shares a UTF-8 string, so the share sheet shows apps that can accept text, like Messages, Mail, and Notes.\n\n\n\n### Enable collaboration for iCloud documents\n\nThe example above shares a copy of your app’s data. You can also enable collaboration so that the recipients can see an updated view of the data, and even make their own changes to it, depending on the permissions in your app.\n\nTo enable collaboration, you need shareable content, such as:\n\n- A URL to an iCloud document (see [doc:\/\/com.apple.documentation\/documentation\/Foundation\/FileManager\/url(forUbiquityContainerIdentifier:)])\n- Data stored in [doc:\/\/com.apple.documentation\/documentation\/CloudKit]\n- A custom collaboration architecture that supports universal links (see [https:\/\/developer.apple.com\/videos\/play\/wwdc2022\/10093])\n\nFor example, to enable collaboration for an iCloud document, you need a URL to a file in your app’s iCloud container. Create an [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSItemProvider] object, and call its [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSItemProvider\/registerFileRepresentation(for:visibility:openInPlace:loadHandler:)] method, passing the URL as the `for:` parameter and [doc:\/\/com.apple.documentation\/documentation\/Swift\/true] as the `openInPlace:` parameter.\n\n```swift\n\/\/ Create an empty item provider.\nlet itemProvider = NSItemProvider()\n\n\/\/ Add the URL to a file saved in the iCloud document container.\nitemProvider\n    .registerFileRepresentation(for: .utf8PlainText,\n                                openInPlace: true) { completion in\n    completion(url, true, nil)\n    return nil\n}\n```\n\nThen create and display the activity view controller as in the first code example. This time, the share sheet has a pop-up menu for selecting a sharing mode.\n\n\n\n### Enable the copying and collaboration of CloudKit data\n\nBecause CloudKit doesn’t store its data as files, it requires a different approach for both sharing copies and collaborating. To share a copy of CloudKit data, you need to create a shareable representation of the data. Then register that data with an [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSItemProvider]. For example, if you want to share your app’s data as UTF-8 text, you can use the previous example to create an item provider for your text.\n\nTo enable collaboration, create a [doc:\/\/com.apple.documentation\/documentation\/CloudKit\/CKShare] when collaboration starts. You also need your [doc:\/\/com.apple.documentation\/documentation\/CloudKit\/CKContainer] and the [doc:\/\/com.apple.documentation\/documentation\/CloudKit\/CKAllowedSharingOptions] that define the permissions you’re granting to collaborators.\n\n```swift\n\/\/ Create an item provider.\nlet itemProvider = NSItemProvider()\n\n\/\/ Create and save a new share.\nitemProvider.registerCKShare(container: container,\n                             allowedSharingOptions: CKAllowedSharingOptions.standard) {\n    \n    \/\/ Create your share.\n    let newShare = CKShare(rootRecord: recordToShare)\n    \n    \/\/ Configure the share, save it, and handle any errors here.\n    \n    \/\/ Return the newly saved share.\n    return newShare\n    \n}\n```\n\nTo invite new collaborators to an existing share, create an item provider and register the share.\n\n```swift\n\/\/ Create an item provider.\nlet itemProvider = NSItemProvider()\n\n\/\/ Register an existing share.\nitemProvider\n    .registerCKShare(\n        savedShare,\n        container: container,\n        allowedSharingOptions: CKAllowedSharingOptions.standard\n    )\n```\n\nFor more information about collaboration in CloudKit, see [doc:\/\/com.apple.documentation\/documentation\/CloudKit\/sharing-cloudkit-data-with-other-icloud-users].\n\n### Restrict the sharing mode\n\nBy default, if your item provider supports both copying and collaborating, the share sheet shows a pop-up menu, letting people select a sharing mode. In iOS 18 and later, you can restrict sharing to only one of the two modes.\n\nTo restrict the sharing mode, create a [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UIActivityViewController\/CollaborationModeRestriction] and assign it to your configuration’s metadata. You can access the metadata using the configuration’s [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UIActivityItemsConfiguration\/perItemMetadataProvider] property.\n\n```swift\n\/\/ Iterate through the metadata keys.\nconfiguration.perItemMetadataProvider = { _, key in\n    switch key {\n    case .collaborationModeRestrictions:\n        \/\/ If it's the collaboration mode restriction key, return an array\n        \/\/ containing a collaboration mode restriction object.\n        let modeRestriction = UIActivityViewController.CollaborationModeRestriction(\n            disabledMode: .collaborate\n        )\n        return [modeRestriction]\n    default:\n        return nil\n    }\n}\n```\n\nThen, create and present the share sheet as before. This produces a share sheet that displays only the allowed sharing mode.\n\n\n\nAlternatively, you can show both sharing options, but display an alert when someone selects the restricted mode. This alert can also include a recovery suggestion to help people enable the restricted mode.\n\n```swift\n\/\/ Iterate through the metadata keys.\nconfiguration.perItemMetadataProvider = { _, key in\n    switch key {\n    case .collaborationModeRestrictions:\n        \/\/ Set the title and text for the alert. Optionally, you can set the title and provide\n        \/\/ a launch URL for the recovery action.\n        let modeRestriction = UIActivityViewController.CollaborationModeRestriction(\n            disabledMode: .collaborate,\n            alertTitle: \"File Locked\",\n            alertMessage: \"You need to unlock the file before you can share it for collaboration.\",\n            alertDismissButtonTitle: \"Cancel\",\n            alertRecoverySuggestionButtonTitle: \"Unlock\",\n            alertRecoverySuggestionButtonLaunch: unlockURL\n        )\n        return [modeRestriction]\n    default:\n        return nil\n    }\n}\n```\n\nIn this case, the share sheet shows the pop-up menu with the allowed sharing mode already selected. When someone tries to change the sharing mode to the restricted mode, the system displays an alert. If they then tap the recovery button, it calls your scene delegate’s [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UISceneDelegate\/scene(_:openURLContexts:)] method, passing in the provided URL. For more information about using launch URLs, see [doc:\/\/com.apple.documentation\/documentation\/Xcode\/defining-a-custom-url-scheme-for-your-app].\n\n### Specify the people to share with\n\nIn iOS 18 and later, you can also specify recipients for the shared data. Create an [doc:\/\/com.apple.documentation\/documentation\/Intents\/INPerson] instance for each recipient and add them to your activity configuration’s metadata.\n\n```swift\n\/\/ Gather data about the recipient.\nvar name = PersonNameComponents()\nname.givenName = myBFF.givenName\nname.familyName = myBFF.familyName\n\nlet displayName = myBFF.givenName\nlet email = myBFF.email\nlet image = INImage(imageData: myBFF.image)\n\n\/\/ Create an `INPerson` instance for the recipient.\nlet recipient = INPerson(\n    personHandle: .init(value: email, type: .emailAddress),\n    nameComponents: name,\n    displayName: displayName,\n    image: image,\n    contactIdentifier: nil,\n    customIdentifier: nil)\n\n\/\/ Iterate through the metadata keys.\nconfiguration.perItemMetadataProvider = { _, key in\n    switch key {\n        \/\/ Set the share recipients to an array of `INPerson` instances.\n    case .shareRecipients:\n        return [recipient]\n    default:\n        return nil\n    }\n}\n```\n\nThe share sheet then populates the recipient’s data in apps that accept recipients, such as Mail and Messages.\n\n\n\nIf a person selects a different recipient from the share sheet, that selection overrides your specified recipients. If they select an app that doesn’t accept recipients, the system ignores your recipient.\n\nYou can also hide the other recipients from the share sheet by setting the activity view controller’s `excludedActivityViewTypes` property to `UIActivityViewTypesPeopleSuggestions`.\n\n```swift\n\/\/ Hide the suggested recipients.\nshareSheet.excludedActivityViewTypes = .peopleSuggestions\n```\n\n## Activities interface\n\n- **UIActivityViewController**: A view controller that you use to offer standard services from your app.\n- **UIActivityItemProvider**: A proxy for data that passes to an activity view controller.\n- **UIActivityItemSource**: A set of methods that an activity view controller uses to retrieve the data items to act on.\n- **UIActivity**: An abstract class that you subclass to implement app-specific services.\n- **UIActivityItemsConfigurationProviding**: An interface that provides a source for shareable content to fulfill user requests to share current content.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "A view controller that you use to offer standard services from your app.",
          "name" : "UIActivityViewController",
          "url" : "https:\/\/developer.apple.com\/documentation\/UIKit\/UIActivityViewController"
        },
        {
          "description" : "A proxy for data that passes to an activity view controller.",
          "name" : "UIActivityItemProvider",
          "url" : "https:\/\/developer.apple.com\/documentation\/UIKit\/UIActivityItemProvider"
        },
        {
          "description" : "A set of methods that an activity view controller uses to retrieve the data items to act on.",
          "name" : "UIActivityItemSource",
          "url" : "https:\/\/developer.apple.com\/documentation\/UIKit\/UIActivityItemSource"
        },
        {
          "description" : "An abstract class that you subclass to implement app-specific services.",
          "name" : "UIActivity",
          "url" : "https:\/\/developer.apple.com\/documentation\/UIKit\/UIActivity"
        },
        {
          "description" : "An interface that provides a source for shareable content to fulfill user requests to share current content.",
          "name" : "UIActivityItemsConfigurationProviding",
          "url" : "https:\/\/developer.apple.com\/documentation\/UIKit\/UIActivityItemsConfigurationProviding"
        }
      ],
      "title" : "Activities interface"
    }
  ],
  "source" : "appleJSON",
  "title" : "Collaborating and sharing copies of your data",
  "url" : "https:\/\/developer.apple.com\/documentation\/UIKit\/collaborating-and-sharing-copies-of-your-data"
}