{
  "abstract" : "Use a document picker to access the content of a directory outside your app’s container.",
  "codeExamples" : [
    {
      "code" : "\/\/ Create a document picker for directories.\nlet documentPicker =\n    UIDocumentPickerViewController(forOpeningContentTypes: [.folder])\ndocumentPicker.delegate = self\n\n\/\/ Set the initial directory.\ndocumentPicker.directoryURL = startingDirectory\n\n\/\/ Present the document picker.\npresent(documentPicker, animated: true, completion: nil)",
      "language" : "swift"
    },
    {
      "code" : "func documentPicker(_ controller: UIDocumentPickerViewController, didPickDocumentAt url: URL) {\n    \/\/ Start accessing a security-scoped resource.\n    guard url.startAccessingSecurityScopedResource() else {\n        \/\/ Handle the failure here.\n        return\n    }\n\n    \/\/ Make sure you release the security-scoped resource when you finish.\n    defer { url.stopAccessingSecurityScopedResource() }\n\n    \/\/ Use file coordination for reading and writing any of the URL’s content.\n    var error: NSError? = nil\n    NSFileCoordinator().coordinate(readingItemAt: url, error: &error) { (url) in\n            \n        let keys : [URLResourceKey] = [.nameKey, .isDirectoryKey]\n            \n        \/\/ Get an enumerator for the directory's content.\n        guard let fileList =\n            FileManager.default.enumerator(at: url, includingPropertiesForKeys: keys) else {\n            Swift.debugPrint(\"*** Unable to access the contents of \\(url.path) ***\\n\")\n            return\n        }\n            \n        for case let file as URL in fileList {\n            \/\/ Start accessing the content's security-scoped URL.\n            guard file.startAccessingSecurityScopedResource() else {\n                \/\/ Handle the failure here.\n                continue\n            }\n\n            \/\/ Do something with the file here.\n            Swift.debugPrint(\"chosen file: \\(file.lastPathComponent)\")\n                \n            \/\/ Make sure you release the security-scoped resource when you finish.\n            file.stopAccessingSecurityScopedResource()\n        }\n    }\n}",
      "language" : "swift"
    },
    {
      "code" : "do {\n    \/\/ Start accessing a security-scoped resource.\n    guard url.startAccessingSecurityScopedResource() else {\n        \/\/ Handle the failure here.\n        return\n    }\n    \n    \/\/ Make sure you release the security-scoped resource when you finish.\n    defer { url.stopAccessingSecurityScopedResource() }\n    \n    let bookmarkData = try url.bookmarkData(options: .minimalBookmark, includingResourceValuesForKeys: nil, relativeTo: nil)\n    \n    try bookmarkData.write(to: getMyURLForBookmark())\n}\ncatch let error {\n    \/\/ Handle the error here.\n}",
      "language" : "swift"
    },
    {
      "code" : "do {\n    let bookmarkData = try Data(contentsOf: getMyURLForBookmark())\n    var isStale = false\n    let url = try URL(resolvingBookmarkData: bookmarkData, bookmarkDataIsStale: &isStale)\n    \n    guard !isStale else {\n        \/\/ Handle stale data here.\n        return\n    }\n    \n    \/\/ Use the URL here.\n}\ncatch let error {\n    \/\/ Handle the error here.\n}",
      "language" : "swift"
    }
  ],
  "contentHash" : "de555e19957fbad3b5f8208f4da62da85325c47008620458528be1ca67967ad8",
  "crawledAt" : "2025-12-02T15:59:40Z",
  "id" : "E61A89DF-2FD8-4E0E-9CBC-904925979BAC",
  "kind" : "article",
  "language" : "swift",
  "module" : "UIKit",
  "overview" : "## Overview\n\nIn iOS 12 and earlier, users can open and interact with files outside the app’s container. The [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UIDocumentBrowserViewController] and [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UIDocumentPickerViewController] provide access to files in the system’s local file provider, in iCloud, or in third-party services that use a File Provider extension. Users can select multiple files at a time — but they need to select each file individually.\n\nIn iOS 13, users can select a directory from any of the available file providers using a [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UIDocumentPickerViewController]. The document picker returns a *security-scoped URL* for the directory that permits your app to access content outside its container. In this case, the URL lets your app recursively access the directory and all of its contents, which includes accessing any new items you add to the directory in the future. Your app can even save a bookmark for this URL, letting it access the directory the next time it launches.\n\n### Ask the user to select a directory\n\nTo prompt the user to select a directory, create a document picker and set the content type to open to the type [doc:\/\/com.apple.documentation\/documentation\/UniformTypeIdentifiers\/UTType-swift.struct\/folder]. Then set the document picker’s delegate and present it.\n\nAs soon as you call the [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UIViewController\/present(_:animated:completion:)] method, the system displays the document picker to the user. If you specify the [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UIDocumentPickerViewController\/directoryURL] property, the document picker starts with the selected directory. Otherwise, it starts with the most recent directory the user chose.\n\n\n\nAfter the user taps Done, the system calls your delegate’s [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UIDocumentPickerDelegate\/documentPicker(_:didPickDocumentsAt:)] method, passing an array of security-scoped URLs for the user’s selected directories. Use a security-scoped URL to enumerate the content of the directory and any of its subdirectories, or to add, remove, or modify any files.\n\nIf the user taps Cancel, the system calls [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UIDocumentPickerDelegate\/documentPickerWasCancelled(_:)] instead.\n\n### Access the directory’s content\n\nWhen the user selects a directory in the document picker, the system gives your app permission to access that directory and all of its contents. The document picker returns a security-scoped URL for the directory. When you use one of these URLs to enumerate the directory’s content, the resulting URLs are also security-scoped. You can save a security-scoped URL as a bookmark and later resolve it back into a security-scoped URL.\n\nTo access the content of a security-scoped URL, you must do the following:\n\n### Save the URL as a bookmark\n\nTo access the URL in the future, save the URL as a [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSURL\/BookmarkCreationOptions\/minimalBookmark] using its [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSURL\/bookmarkData(options:includingResourceValuesForKeys:relativeTo:)] method.\n\nYou can then read the bookmark, and resolve it to a security-scoped URL again.\n\n### Respond to permission changes\n\nUsers always have complete control over the apps that can access directories. After selecting a directory from the document picker, your app appears in Settings > Privacy > Files and Folders. This page lists all the apps that have permission to access shared directories, and users can revoke or restore permission for each app at any time.\n\nThis means your app must be ready to handle failures when accessing a directory’s content. Calls to the [doc:\/\/com.apple.documentation\/documentation\/Foundation\/URL\/startAccessingSecurityScopedResource()] method can fail, as well as any attempts to read or write to the URL. This is especially true when saving and resolving bookmarks to security-scoped URLs because using saved bookmarks can greatly increase the amount of time users have to possibly change your app’s permissions.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/UIKit\/providing-access-to-directories\ncrawled: 2025-12-02T15:59:40Z\n---\n\n# Providing access to directories\n\n**Article**\n\nUse a document picker to access the content of a directory outside your app’s container.\n\n## Overview\n\nIn iOS 12 and earlier, users can open and interact with files outside the app’s container. The [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UIDocumentBrowserViewController] and [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UIDocumentPickerViewController] provide access to files in the system’s local file provider, in iCloud, or in third-party services that use a File Provider extension. Users can select multiple files at a time — but they need to select each file individually.\n\nIn iOS 13, users can select a directory from any of the available file providers using a [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UIDocumentPickerViewController]. The document picker returns a *security-scoped URL* for the directory that permits your app to access content outside its container. In this case, the URL lets your app recursively access the directory and all of its contents, which includes accessing any new items you add to the directory in the future. Your app can even save a bookmark for this URL, letting it access the directory the next time it launches.\n\n### Ask the user to select a directory\n\nTo prompt the user to select a directory, create a document picker and set the content type to open to the type [doc:\/\/com.apple.documentation\/documentation\/UniformTypeIdentifiers\/UTType-swift.struct\/folder]. Then set the document picker’s delegate and present it.\n\n```swift\n\/\/ Create a document picker for directories.\nlet documentPicker =\n    UIDocumentPickerViewController(forOpeningContentTypes: [.folder])\ndocumentPicker.delegate = self\n\n\/\/ Set the initial directory.\ndocumentPicker.directoryURL = startingDirectory\n\n\/\/ Present the document picker.\npresent(documentPicker, animated: true, completion: nil)\n```\n\nAs soon as you call the [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UIViewController\/present(_:animated:completion:)] method, the system displays the document picker to the user. If you specify the [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UIDocumentPickerViewController\/directoryURL] property, the document picker starts with the selected directory. Otherwise, it starts with the most recent directory the user chose.\n\n\n\nAfter the user taps Done, the system calls your delegate’s [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UIDocumentPickerDelegate\/documentPicker(_:didPickDocumentsAt:)] method, passing an array of security-scoped URLs for the user’s selected directories. Use a security-scoped URL to enumerate the content of the directory and any of its subdirectories, or to add, remove, or modify any files.\n\nIf the user taps Cancel, the system calls [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UIDocumentPickerDelegate\/documentPickerWasCancelled(_:)] instead.\n\n\n\n### Access the directory’s content\n\nWhen the user selects a directory in the document picker, the system gives your app permission to access that directory and all of its contents. The document picker returns a security-scoped URL for the directory. When you use one of these URLs to enumerate the directory’s content, the resulting URLs are also security-scoped. You can save a security-scoped URL as a bookmark and later resolve it back into a security-scoped URL.\n\nTo access the content of a security-scoped URL, you must do the following:\n\n1. Before accessing the URL, call [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSURL\/startAccessingSecurityScopedResource()].\n2. Use a file coordinator to perform read or write operations on the URL’s contents.\n3. After you access the URL, call [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSURL\/stopAccessingSecurityScopedResource()].\n\n```swift\nfunc documentPicker(_ controller: UIDocumentPickerViewController, didPickDocumentAt url: URL) {\n    \/\/ Start accessing a security-scoped resource.\n    guard url.startAccessingSecurityScopedResource() else {\n        \/\/ Handle the failure here.\n        return\n    }\n\n    \/\/ Make sure you release the security-scoped resource when you finish.\n    defer { url.stopAccessingSecurityScopedResource() }\n\n    \/\/ Use file coordination for reading and writing any of the URL’s content.\n    var error: NSError? = nil\n    NSFileCoordinator().coordinate(readingItemAt: url, error: &error) { (url) in\n            \n        let keys : [URLResourceKey] = [.nameKey, .isDirectoryKey]\n            \n        \/\/ Get an enumerator for the directory's content.\n        guard let fileList =\n            FileManager.default.enumerator(at: url, includingPropertiesForKeys: keys) else {\n            Swift.debugPrint(\"*** Unable to access the contents of \\(url.path) ***\\n\")\n            return\n        }\n            \n        for case let file as URL in fileList {\n            \/\/ Start accessing the content's security-scoped URL.\n            guard file.startAccessingSecurityScopedResource() else {\n                \/\/ Handle the failure here.\n                continue\n            }\n\n            \/\/ Do something with the file here.\n            Swift.debugPrint(\"chosen file: \\(file.lastPathComponent)\")\n                \n            \/\/ Make sure you release the security-scoped resource when you finish.\n            file.stopAccessingSecurityScopedResource()\n        }\n    }\n}\n```\n\n### Save the URL as a bookmark\n\nTo access the URL in the future, save the URL as a [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSURL\/BookmarkCreationOptions\/minimalBookmark] using its [doc:\/\/com.apple.documentation\/documentation\/Foundation\/NSURL\/bookmarkData(options:includingResourceValuesForKeys:relativeTo:)] method.\n\n```swift\ndo {\n    \/\/ Start accessing a security-scoped resource.\n    guard url.startAccessingSecurityScopedResource() else {\n        \/\/ Handle the failure here.\n        return\n    }\n    \n    \/\/ Make sure you release the security-scoped resource when you finish.\n    defer { url.stopAccessingSecurityScopedResource() }\n    \n    let bookmarkData = try url.bookmarkData(options: .minimalBookmark, includingResourceValuesForKeys: nil, relativeTo: nil)\n    \n    try bookmarkData.write(to: getMyURLForBookmark())\n}\ncatch let error {\n    \/\/ Handle the error here.\n}\n```\n\nYou can then read the bookmark, and resolve it to a security-scoped URL again.\n\n```swift\ndo {\n    let bookmarkData = try Data(contentsOf: getMyURLForBookmark())\n    var isStale = false\n    let url = try URL(resolvingBookmarkData: bookmarkData, bookmarkDataIsStale: &isStale)\n    \n    guard !isStale else {\n        \/\/ Handle stale data here.\n        return\n    }\n    \n    \/\/ Use the URL here.\n}\ncatch let error {\n    \/\/ Handle the error here.\n}\n```\n\n### Respond to permission changes\n\nUsers always have complete control over the apps that can access directories. After selecting a directory from the document picker, your app appears in Settings > Privacy > Files and Folders. This page lists all the apps that have permission to access shared directories, and users can revoke or restore permission for each app at any time.\n\nThis means your app must be ready to handle failures when accessing a directory’s content. Calls to the [doc:\/\/com.apple.documentation\/documentation\/Foundation\/URL\/startAccessingSecurityScopedResource()] method can fail, as well as any attempts to read or write to the URL. This is especially true when saving and resolving bookmarks to security-scoped URLs because using saved bookmarks can greatly increase the amount of time users have to possibly change your app’s permissions.\n\n## Documents and directories\n\n- **Customizing a document-based app’s launch experience**: Add unique elements to your app’s document launch scene.\n- **Adding a document browser to your app**: Give users access to their local or remote documents from within your app.\n- **Building a document browser-based app**: Use a document browser to provide access to the user’s text files.\n- **Building a document browser app for custom file formats**: Implement a custom document file format to manage user interactions with files on different cloud storage providers.\n- **UIDocumentViewController**: A view controller that manages and presents a document stored locally or in the cloud.\n- **UIDocumentBrowserViewController**: A view controller for browsing and performing actions on documents that you store locally and in the cloud.\n- **UIDocumentPickerViewController**: A view controller that provides access to documents or destinations outside your app’s sandbox.\n- **UIDocumentInteractionController**: A view controller that previews, opens, or prints files with a file format that your app can’t handle directly.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Add unique elements to your app’s document launch scene.",
          "name" : "Customizing a document-based app’s launch experience",
          "url" : "https:\/\/developer.apple.com\/documentation\/UIKit\/customizing-a-document-based-app-s-launch-experience"
        },
        {
          "description" : "Give users access to their local or remote documents from within your app.",
          "name" : "Adding a document browser to your app",
          "url" : "https:\/\/developer.apple.com\/documentation\/UIKit\/adding-a-document-browser-to-your-app"
        },
        {
          "description" : "Use a document browser to provide access to the user’s text files.",
          "name" : "Building a document browser-based app",
          "url" : "https:\/\/developer.apple.com\/documentation\/UIKit\/building-a-document-browser-based-app"
        },
        {
          "description" : "Implement a custom document file format to manage user interactions with files on different cloud storage providers.",
          "name" : "Building a document browser app for custom file formats",
          "url" : "https:\/\/developer.apple.com\/documentation\/UIKit\/building-a-document-browser-app-for-custom-file-formats"
        },
        {
          "description" : "A view controller that manages and presents a document stored locally or in the cloud.",
          "name" : "UIDocumentViewController",
          "url" : "https:\/\/developer.apple.com\/documentation\/UIKit\/UIDocumentViewController"
        },
        {
          "description" : "A view controller for browsing and performing actions on documents that you store locally and in the cloud.",
          "name" : "UIDocumentBrowserViewController",
          "url" : "https:\/\/developer.apple.com\/documentation\/UIKit\/UIDocumentBrowserViewController"
        },
        {
          "description" : "A view controller that provides access to documents or destinations outside your app’s sandbox.",
          "name" : "UIDocumentPickerViewController",
          "url" : "https:\/\/developer.apple.com\/documentation\/UIKit\/UIDocumentPickerViewController"
        },
        {
          "description" : "A view controller that previews, opens, or prints files with a file format that your app can’t handle directly.",
          "name" : "UIDocumentInteractionController",
          "url" : "https:\/\/developer.apple.com\/documentation\/UIKit\/UIDocumentInteractionController"
        }
      ],
      "title" : "Documents and directories"
    }
  ],
  "source" : "appleJSON",
  "title" : "Providing access to directories",
  "url" : "https:\/\/developer.apple.com\/documentation\/UIKit\/providing-access-to-directories"
}