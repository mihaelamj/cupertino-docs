{
  "abstract" : "​ Load, display, edit, and save HDR images using SwiftUI and Core Image. ​",
  "codeExamples" : [
    {
      "code" : "FilmStrip(assets: $assets, selectedAsset: $selectedAsset)\n    .allowedDynamicRange(.constrainedHigh)\n    .frame(height: geometry.size.height \/ 10.0)",
      "language" : "swift"
    },
    {
      "code" : "let view = UIImageView()\nview.preferredImageDynamicRange = .high",
      "language" : "swift"
    },
    {
      "code" : "let view = NSImageView()\nview.preferredImageDynamicRange = .high",
      "language" : "swift"
    },
    {
      "code" : "let ciOptions: [CIImageOption: Any] = [.applyOrientationProperty: true, .expandToHDR: true]",
      "language" : "swift"
    },
    {
      "code" : "let cgImage = context.createCGImage(image,\n                                    from: image.extent,\n                                    format: .RGB10,\n                                    colorSpace: colorspace ?? CGColorSpace(name: CGColorSpace.itur_2100_PQ)!,\n                                    deferred: true)",
      "language" : "swift"
    },
    {
      "code" : "guard let outputURL = try? output.renderedContentURL(for: .heic) else {\n    print(\"Failed to obtain HEIC output URL.\")\n    return nil\n}",
      "language" : "swift"
    }
  ],
  "contentHash" : "5d4ce81edc73f76eecafea7ef885fa27da912f68332942f67ee5e0239b0934ce",
  "crawledAt" : "2025-12-02T15:34:19Z",
  "id" : "59A1C646-9ACC-49CA-86D8-A2B4F3B51155",
  "kind" : "unknown",
  "language" : "swift",
  "module" : "UIKit",
  "overview" : "## Overview\n\nThis sample code project shows how to read, write, edit, and display HDR images using SwiftUI, UIKit, AppKit, Core Image, and Core Graphics. It loads a film strip of multiple images from on-disk or from the Photos library. Then it allows you to select, edit, and save an image in HDR. The sample uses several new APIs in various frameworks to correctly handle HDR images in a complete HDR workflow. ​\n\n### Configure the sample code project\n\nBefore you run this sample code project in Xcode, ensure you’re using iOS 17 or later for the iOS target, and macOS 14 or later for the Mac target. ​\n\n### Enable HDR on image views\n\nTo turn on HDR in the SwiftUI image view, the sample uses the `allowedDynamicRange` modifier in the film strip to show limited HDR headroom.\n\n​For the UIKit main image view, the sample adds the `preferredImageDynamicRange` property to the `UIImageView`. ​\n\n​ ​For AppKit, the sample adds the property to the `NSImageView`.\n\n​​ ​\n\n### Edit HDR using Core Image\n\nTo ensure Core Image reads Gain Map HDR images as HDR, the sample sets the `CIImageOption.expandToHDR` property to `true`. To modify the HDR image data, it uses `CIFilter` filters.\n\n​ ​The sample saves the image to disk if it’s an on-disk file to begin with. The sample uses a `CIContext` and `CGImageDestination` to render a `CIImage` into a `CGImage` and write it to a 10-bit HEIC image file.\n\n​ ​The sample writes the edited HDR image data back to the Photos library by writing a 10-bit HEIC image to the `renderedContentURL` of a `PHContentEditingOutput` object. The sample only uses this path when an image comes from the Photos library using the `PhotosPicker`.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/UIKit\/supporting-hdr-images-in-your-app\ncrawled: 2025-12-02T15:34:19Z\n---\n\n# Supporting HDR images in your app\n\n**Sample Code**\n\n​ Load, display, edit, and save HDR images using SwiftUI and Core Image. ​\n\n## Overview\n\nThis sample code project shows how to read, write, edit, and display HDR images using SwiftUI, UIKit, AppKit, Core Image, and Core Graphics. It loads a film strip of multiple images from on-disk or from the Photos library. Then it allows you to select, edit, and save an image in HDR. The sample uses several new APIs in various frameworks to correctly handle HDR images in a complete HDR workflow. ​\n\n\n\n### Configure the sample code project\n\nBefore you run this sample code project in Xcode, ensure you’re using iOS 17 or later for the iOS target, and macOS 14 or later for the Mac target. ​\n\n### Enable HDR on image views\n\nTo turn on HDR in the SwiftUI image view, the sample uses the `allowedDynamicRange` modifier in the film strip to show limited HDR headroom.\n\n```swift\nFilmStrip(assets: $assets, selectedAsset: $selectedAsset)\n    .allowedDynamicRange(.constrainedHigh)\n    .frame(height: geometry.size.height \/ 10.0)\n```\n\n​For the UIKit main image view, the sample adds the `preferredImageDynamicRange` property to the `UIImageView`. ​\n\n```swift\nlet view = UIImageView()\nview.preferredImageDynamicRange = .high\n```\n\n​ ​For AppKit, the sample adds the property to the `NSImageView`.\n\n```swift\nlet view = NSImageView()\nview.preferredImageDynamicRange = .high\n```\n\n​​ ​\n\n### Edit HDR using Core Image\n\nTo ensure Core Image reads Gain Map HDR images as HDR, the sample sets the `CIImageOption.expandToHDR` property to `true`. To modify the HDR image data, it uses `CIFilter` filters.\n\n```swift\nlet ciOptions: [CIImageOption: Any] = [.applyOrientationProperty: true, .expandToHDR: true]\n```\n\n​ ​The sample saves the image to disk if it’s an on-disk file to begin with. The sample uses a `CIContext` and `CGImageDestination` to render a `CIImage` into a `CGImage` and write it to a 10-bit HEIC image file.\n\n```swift\nlet cgImage = context.createCGImage(image,\n                                    from: image.extent,\n                                    format: .RGB10,\n                                    colorSpace: colorspace ?? CGColorSpace(name: CGColorSpace.itur_2100_PQ)!,\n                                    deferred: true)\n```\n\n​ ​The sample writes the edited HDR image data back to the Photos library by writing a 10-bit HEIC image to the `renderedContentURL` of a `PHContentEditingOutput` object. The sample only uses this path when an image comes from the Photos library using the `PhotosPicker`.\n\n```swift\nguard let outputURL = try? output.renderedContentURL(for: .heic) else {\n    print(\"Failed to obtain HEIC output URL.\")\n    return nil\n}\n```\n\n## Image creation\n\n- **jpegData(compressionQuality:)**: Returns a data object that contains the image in JPEG format.\n- **pngData()**: Returns a data object that contains the specified image in PNG format.\n- **UIGraphicsBeginImageContext(_:)**: Creates a bitmap-based graphics context and makes it the current context.\n- **UIGraphicsGetImageFromCurrentImageContext()**: Returns an image from the contents of the current bitmap-based graphics context.\n- **UIGraphicsEndImageContext()**: Removes the current bitmap-based graphics context from the top of the stack.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Returns a data object that contains the image in JPEG format.",
          "name" : "jpegData(compressionQuality:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/UIKit\/UIImage\/jpegData(compressionQuality:)"
        },
        {
          "description" : "Returns a data object that contains the specified image in PNG format.",
          "name" : "pngData()",
          "url" : "https:\/\/developer.apple.com\/documentation\/UIKit\/UIImage\/pngData()"
        },
        {
          "description" : "Creates a bitmap-based graphics context and makes it the current context.",
          "name" : "UIGraphicsBeginImageContext(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/UIKit\/UIGraphicsBeginImageContext(_:)"
        },
        {
          "description" : "Returns an image from the contents of the current bitmap-based graphics context.",
          "name" : "UIGraphicsGetImageFromCurrentImageContext()",
          "url" : "https:\/\/developer.apple.com\/documentation\/UIKit\/UIGraphicsGetImageFromCurrentImageContext()"
        },
        {
          "description" : "Removes the current bitmap-based graphics context from the top of the stack.",
          "name" : "UIGraphicsEndImageContext()",
          "url" : "https:\/\/developer.apple.com\/documentation\/UIKit\/UIGraphicsEndImageContext()"
        }
      ],
      "title" : "Image creation"
    }
  ],
  "source" : "appleJSON",
  "title" : "Supporting HDR images in your app",
  "url" : "https:\/\/developer.apple.com\/documentation\/UIKit\/supporting-hdr-images-in-your-app"
}