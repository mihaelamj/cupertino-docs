{
  "abstract" : "Accelerate actions in your app by providing shortcuts to preview content in detail view controllers.",
  "codeExamples" : [
    {
      "code" : "override func prepare(for segue: UIStoryboardSegue, sender: Any?) {\n    guard let selectedTableViewCell = sender as? UITableViewCell,\n        let indexPath = tableView.indexPath(for: selectedTableViewCell)\n        else { preconditionFailure(\"Expected sender to be a valid table view cell\") }\n\n    guard let colorItemViewController = segue.destination as? ColorItemViewController\n        else { preconditionFailure(\"Expected a ColorItemViewController\") }\n\n    \/\/ Pass over a reference to the ColorData object and the specific ColorItem being viewed.\n    colorItemViewController.colorData = colorData\n    colorItemViewController.colorItem = colorData.colors[indexPath.row]\n}",
      "language" : "swift"
    },
    {
      "code" : "override func viewDidLoad() {\n    super.viewDidLoad()\n\n    registerForPreviewing(with: self, sourceView: tableView)\n}",
      "language" : "swift"
    },
    {
      "code" : "func previewingContext(_ previewingContext: UIViewControllerPreviewing, viewControllerForLocation location: CGPoint) -> UIViewController? {\n    \/\/ First, get the index path and view for the previewed cell.\n    guard let indexPath = tableView.indexPathForRow(at: location),\n        let cell = tableView.cellForRow(at: indexPath)\n        else { return nil }\n\n    \/\/ Enable blurring of other UI elements, and a zoom in animation while peeking.\n    previewingContext.sourceRect = cell.frame\n\n    \/\/ Create and configure an instance of the color item view controller to show for the peek.\n    guard let viewController = storyboard?.instantiateViewController(withIdentifier: \"ColorItemViewController\") as? ColorItemViewController\n        else { preconditionFailure(\"Expected a ColorItemViewController\") }\n\n    \/\/ Pass over a reference to the ColorData object and the specific ColorItem being viewed.\n    viewController.colorData = colorData\n    viewController.colorItem = colorData.colors[indexPath.row]\n\n    return viewController\n}",
      "language" : "swift"
    },
    {
      "code" : "func previewingContext(_ previewingContext: UIViewControllerPreviewing, commit viewControllerToCommit: UIViewController) {\n    \/\/ Push the configured view controller onto the navigation stack.\n    navigationController?.pushViewController(viewControllerToCommit, animated: true)\n}",
      "language" : "swift"
    },
    {
      "code" : "override var previewActionItems: [UIPreviewActionItem] {\n    let starAction = UIPreviewAction(title: starButtonTitle(), style: .default, handler: { [unowned self] (_, _) in\n        guard let colorItem = self.colorItem\n            else { preconditionFailure(\"Expected a color item\") }\n\n        colorItem.starred.toggle()\n    })\n\n    let deleteAction = UIPreviewAction(title: \"Delete\", style: .destructive) { [unowned self] (_, _) in\n        guard let colorData = self.colorData\n            else { preconditionFailure(\"Expected a reference to the color data container\") }\n\n        guard let colorItem = self.colorItem\n            else { preconditionFailure(\"Expected a color item\") }\n\n        colorData.delete(colorItem)\n    }\n\n    return [ starAction, deleteAction ]\n}",
      "language" : "swift"
    }
  ],
  "contentHash" : "9d278ad3fe12f840c352a82d372452af68ce5d66e7b49ce195f87ce5991b9039",
  "crawledAt" : "2025-12-02T15:52:22Z",
  "id" : "B7D6578D-1D79-4F7D-9233-77B5AC1F9B1E",
  "kind" : "unknown",
  "language" : "swift",
  "module" : "UIKit",
  "overview" : "## Overview\n\nThis sample project demonstrates previewing content and providing quick shortcuts to functionality using Peek and Pop APIs. The app uses a table view to display a list of colors and tapping any row in the table navigates to a detail view controller showing the color. The app uses 3D Touch on the table view rows to allow users to peek at the content without placing it on the navigation stack.\n\nColors can also be starred or unstarred. Starred colors are shown with a solid filled colored star icon to the left of the name and unstarred colors have a hollow star. Users can toggle whether a color is starred using one of two methods: they can either tap a button in the navigation bar of the detail view, or use 3D Touch to peek at the content. Swiping up while in 3D Touch lets the user access a Peek Quick Action.\n\nThe app uses a tab bar controller to demonstrate two different methods for implementing Peek and Pop. The first tab contains the `ColorsViewControllerStoryboard` view controller, which configures Peek and Pop using the segue in `Main.storyboard`. The second tab contains the `ColorsViewControllerCode` view controller to achieve the same functionality, but in code.\n\nBoth `ColorsViewControllerStoryboard` and `ColorsViewControllerCode` are subclasses of `ColorsViewControllerBase`, which contains the implementation of everything necessary to display the table view and handle the standard segue.\n\n### Peek and Pop from a storyboard\n\nThe storyboard uses a Show segue with Peek and Pop enabled to navigate from the `ColorViewControllerStoryboard` to `ColorItemViewController`. This is done by selecting the Show segue, and turning on “Preview & Commit Segues” next to Peek & Pop in the Attributes inspector.\n\nWhen configuring the `ColorItemViewController`, enable the “Use Preferred Explicit Size” option in the View Controller section of the Attributes inspector. Set the “Content Size” to have 0 width and an appropriate height. Zero width configures the view controller to automatically resize to the device width when the user peeks at the content.\n\nWhen implementing the `ColorsViewControllerBase` view controller, resist the temptation of using either [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UITableView\/indexPathForSelectedRow] or [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UITableView\/indexPathsForSelectedRows] when preparing to execute a segue. If you configure the storyboard with the default implementation of Peek and Pop, these methods return `nil` at the time of segue execution. Instead, use the segue’s `sender` property to access the cell initiating the peek.\n\n### Peek and Pop in code\n\nThe `ColorsViewControllerCode` view controller adds code to manually register for Peek and Pop instead of using the storyboard to customize the segue. Call [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UIViewController\/registerForPreviewing(with:sourceView:)] to register a class which implements the [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UIViewControllerPreviewingDelegate] protocol, and then pass in a view which responds to the 3D Touch.\n\nThe protocol requires the implementation of two methods. When the system detects the 3D Touch, it calls [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UIViewControllerPreviewingDelegate\/previewingContext(_:viewControllerForLocation:)], passing a `previewingContext` object that conforms to the [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UIViewControllerPreviewing] protocol. Use this method to configure and pass back a view controller for the peek.\n\nWhen the system detects enough pressure in the 3D Touch to pop the view controller, it calls [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UIViewControllerPreviewingDelegate\/previewingContext(_:commit:)]. Take the passed in view controller and present to the user.\n\n### Implement Peek Quick Actions\n\nTo enable Peek Quick Actions for the `ColorItemViewController`, you must override the default implementation of the [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UIViewController\/previewActionItems] property to return an array of [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UIPreviewAction] or [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UIPreviewActionGroup] objects.\n\nBoth a star\/unstar action and a delete action are available as quick actions using the following code:\n\nThe star\/unstar action is shown with a default style and the delete action is shown as being destructive.\n\nIt’s important to ensure that your app’s features are still available to devices that do not support 3D Touch. In this sample, both the star\/unstar and the delete functionality remain available by navigating into the `ColorItemViewController` and tapping buttons in the navigation bar. The Peek Quick Action provides a more convenient way to access that feature.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/UIKit\/implementing-peek-and-pop\ncrawled: 2025-12-02T15:52:22Z\n---\n\n# Implementing Peek and Pop\n\n**Sample Code**\n\nAccelerate actions in your app by providing shortcuts to preview content in detail view controllers.\n\n## Overview\n\nThis sample project demonstrates previewing content and providing quick shortcuts to functionality using Peek and Pop APIs. The app uses a table view to display a list of colors and tapping any row in the table navigates to a detail view controller showing the color. The app uses 3D Touch on the table view rows to allow users to peek at the content without placing it on the navigation stack.\n\nColors can also be starred or unstarred. Starred colors are shown with a solid filled colored star icon to the left of the name and unstarred colors have a hollow star. Users can toggle whether a color is starred using one of two methods: they can either tap a button in the navigation bar of the detail view, or use 3D Touch to peek at the content. Swiping up while in 3D Touch lets the user access a Peek Quick Action.\n\nThe app uses a tab bar controller to demonstrate two different methods for implementing Peek and Pop. The first tab contains the `ColorsViewControllerStoryboard` view controller, which configures Peek and Pop using the segue in `Main.storyboard`. The second tab contains the `ColorsViewControllerCode` view controller to achieve the same functionality, but in code.\n\nBoth `ColorsViewControllerStoryboard` and `ColorsViewControllerCode` are subclasses of `ColorsViewControllerBase`, which contains the implementation of everything necessary to display the table view and handle the standard segue.\n\n### Peek and Pop from a storyboard\n\nThe storyboard uses a Show segue with Peek and Pop enabled to navigate from the `ColorViewControllerStoryboard` to `ColorItemViewController`. This is done by selecting the Show segue, and turning on “Preview & Commit Segues” next to Peek & Pop in the Attributes inspector.\n\nWhen configuring the `ColorItemViewController`, enable the “Use Preferred Explicit Size” option in the View Controller section of the Attributes inspector. Set the “Content Size” to have 0 width and an appropriate height. Zero width configures the view controller to automatically resize to the device width when the user peeks at the content.\n\nWhen implementing the `ColorsViewControllerBase` view controller, resist the temptation of using either [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UITableView\/indexPathForSelectedRow] or [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UITableView\/indexPathsForSelectedRows] when preparing to execute a segue. If you configure the storyboard with the default implementation of Peek and Pop, these methods return `nil` at the time of segue execution. Instead, use the segue’s `sender` property to access the cell initiating the peek.\n\n```swift\noverride func prepare(for segue: UIStoryboardSegue, sender: Any?) {\n    guard let selectedTableViewCell = sender as? UITableViewCell,\n        let indexPath = tableView.indexPath(for: selectedTableViewCell)\n        else { preconditionFailure(\"Expected sender to be a valid table view cell\") }\n\n    guard let colorItemViewController = segue.destination as? ColorItemViewController\n        else { preconditionFailure(\"Expected a ColorItemViewController\") }\n\n    \/\/ Pass over a reference to the ColorData object and the specific ColorItem being viewed.\n    colorItemViewController.colorData = colorData\n    colorItemViewController.colorItem = colorData.colors[indexPath.row]\n}\n```\n\n### Peek and Pop in code\n\nThe `ColorsViewControllerCode` view controller adds code to manually register for Peek and Pop instead of using the storyboard to customize the segue. Call [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UIViewController\/registerForPreviewing(with:sourceView:)] to register a class which implements the [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UIViewControllerPreviewingDelegate] protocol, and then pass in a view which responds to the 3D Touch.\n\n```swift\noverride func viewDidLoad() {\n    super.viewDidLoad()\n\n    registerForPreviewing(with: self, sourceView: tableView)\n}\n```\n\nThe protocol requires the implementation of two methods. When the system detects the 3D Touch, it calls [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UIViewControllerPreviewingDelegate\/previewingContext(_:viewControllerForLocation:)], passing a `previewingContext` object that conforms to the [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UIViewControllerPreviewing] protocol. Use this method to configure and pass back a view controller for the peek.\n\n```swift\nfunc previewingContext(_ previewingContext: UIViewControllerPreviewing, viewControllerForLocation location: CGPoint) -> UIViewController? {\n    \/\/ First, get the index path and view for the previewed cell.\n    guard let indexPath = tableView.indexPathForRow(at: location),\n        let cell = tableView.cellForRow(at: indexPath)\n        else { return nil }\n\n    \/\/ Enable blurring of other UI elements, and a zoom in animation while peeking.\n    previewingContext.sourceRect = cell.frame\n\n    \/\/ Create and configure an instance of the color item view controller to show for the peek.\n    guard let viewController = storyboard?.instantiateViewController(withIdentifier: \"ColorItemViewController\") as? ColorItemViewController\n        else { preconditionFailure(\"Expected a ColorItemViewController\") }\n\n    \/\/ Pass over a reference to the ColorData object and the specific ColorItem being viewed.\n    viewController.colorData = colorData\n    viewController.colorItem = colorData.colors[indexPath.row]\n\n    return viewController\n}\n```\n\nWhen the system detects enough pressure in the 3D Touch to pop the view controller, it calls [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UIViewControllerPreviewingDelegate\/previewingContext(_:commit:)]. Take the passed in view controller and present to the user.\n\n```swift\nfunc previewingContext(_ previewingContext: UIViewControllerPreviewing, commit viewControllerToCommit: UIViewController) {\n    \/\/ Push the configured view controller onto the navigation stack.\n    navigationController?.pushViewController(viewControllerToCommit, animated: true)\n}\n```\n\n### Implement Peek Quick Actions\n\nTo enable Peek Quick Actions for the `ColorItemViewController`, you must override the default implementation of the [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UIViewController\/previewActionItems] property to return an array of [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UIPreviewAction] or [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UIPreviewActionGroup] objects.\n\nBoth a star\/unstar action and a delete action are available as quick actions using the following code:\n\n```swift\noverride var previewActionItems: [UIPreviewActionItem] {\n    let starAction = UIPreviewAction(title: starButtonTitle(), style: .default, handler: { [unowned self] (_, _) in\n        guard let colorItem = self.colorItem\n            else { preconditionFailure(\"Expected a color item\") }\n\n        colorItem.starred.toggle()\n    })\n\n    let deleteAction = UIPreviewAction(title: \"Delete\", style: .destructive) { [unowned self] (_, _) in\n        guard let colorData = self.colorData\n            else { preconditionFailure(\"Expected a reference to the color data container\") }\n\n        guard let colorItem = self.colorItem\n            else { preconditionFailure(\"Expected a color item\") }\n\n        colorData.delete(colorItem)\n    }\n\n    return [ starAction, deleteAction ]\n}\n```\n\nThe star\/unstar action is shown with a default style and the delete action is shown as being destructive.\n\nIt’s important to ensure that your app’s features are still available to devices that do not support 3D Touch. In this sample, both the star\/unstar and the delete functionality remain available by navigating into the `ColorItemViewController` and tapping buttons in the navigation bar. The Peek Quick Action provides a more convenient way to access that feature.\n\n",
  "sections" : [

  ],
  "source" : "appleJSON",
  "title" : "Implementing Peek and Pop",
  "url" : "https:\/\/developer.apple.com\/documentation\/UIKit\/implementing-peek-and-pop"
}