{
  "abstract" : "Respond dynamically to keyboard movement by using the tracking features of the keyboard layout guide.",
  "codeExamples" : [
    {
      "code" : "view.keyboardLayoutGuide.topAnchor.constraint(\n    equalToSystemSpacingBelow: textView.bottomAnchor, multiplier: 1.0).isActive = true",
      "language" : "swift"
    },
    {
      "code" : "\/\/ This is necessary to allow the various edge constraints to engage.\nview.keyboardLayoutGuide.followsUndockedKeyboard = true",
      "language" : "swift"
    },
    {
      "code" : "\/\/ When the keyboard isn't near the top, tie the edit view to the keyboard layout guide (it\n\/\/ deactivates when near the top).\nlet editViewOnKeyboard = view.keyboardLayoutGuide.topAnchor.constraint(equalTo: editView.bottomAnchor)\neditViewOnKeyboard.identifier = \"editViewOnKeyboard\"\nview.keyboardLayoutGuide.setConstraints([editViewOnKeyboard], activeWhenAwayFrom: .top)\n\n\/\/ When the keyboard is near the top, tie the edit view to the bottom anchor of the safeAreaLayoutGuide, so that it doesn't go offscreen.\nlet editViewOnBottom = view.safeAreaLayoutGuide.bottomAnchor.constraint(equalTo: editView.bottomAnchor)\neditViewOnBottom.identifier = \"editViewOnBottom\"\nview.keyboardLayoutGuide.setConstraints([editViewOnBottom], activeWhenNearEdge: .top)",
      "language" : "swift"
    },
    {
      "code" : "let centeredImage = imageView.centerXAnchor.constraint(equalTo: view.centerXAnchor)\ncenteredImage.identifier = \"centeredImage\"\nview.keyboardLayoutGuide.setConstraints([centeredImage], activeWhenAwayFrom: [.leading, .trailing])\n\nlet imageViewToLeading = imageView.leadingAnchor.constraint(\n    equalToSystemSpacingAfter: view.safeAreaLayoutGuide.leadingAnchor, multiplier: 1.0)\nimageViewToLeading.identifier = \"imageViewToLeading\"\n\nlet nearTrailingConstraints = [ editViewToUndockedKeyboardTrailing, imageViewToLeading ]\nview.keyboardLayoutGuide.setConstraints(nearTrailingConstraints, activeWhenNearEdge: .trailing)\n\nlet imageViewToTrailing = view.safeAreaLayoutGuide.trailingAnchor.constraint(\n    equalToSystemSpacingAfter: imageView.trailingAnchor, multiplier: 1.0)\nimageViewToTrailing.identifier = \"imageViewToTrailing\"\n\nlet nearLeadingConstraints = [ editViewToKeyboardLeading, imageViewToTrailing ]\nview.keyboardLayoutGuide.setConstraints(nearLeadingConstraints, activeWhenNearEdge: .leading)",
      "language" : "swift"
    },
    {
      "code" : "let editCenterXToKeyboard = view.keyboardLayoutGuide.centerXAnchor.constraint(equalTo: editView.centerXAnchor)\neditCenterXToKeyboard.identifier = \"editCenterXToKeyboard\"\n\nview.keyboardLayoutGuide.setConstraints([editCenterXToKeyboard], activeWhenAwayFrom: [.leading, .trailing, .bottom])",
      "language" : "swift"
    }
  ],
  "contentHash" : "dee88768964391fc57c89bb8d29b1f075be3ec342f05737a304a230693bf5ecf",
  "crawledAt" : "2025-12-02T15:52:02Z",
  "id" : "86EF8906-3DAC-4056-A021-91F85F20EE0B",
  "kind" : "unknown",
  "language" : "swift",
  "module" : "UIKit",
  "overview" : "## Overview\n\nWhen your app presents a keyboard, you want it to integrate well into your layout. This sample code project demonstrates how to configure constraints when you set [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UIKeyboardLayoutGuide\/followsUndockedKeyboard] to `true` on the [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UIView\/keyboardLayoutGuide] property in `UIView` to adapt your layout to the movement of the floating keyboard onscreen. The sample illustrates several concepts, such as handling when the keyboard is close to the top of the screen, and adapting the layout when the additional views don’t have constraints with a direct relationship to the `keyboardLayoutGuide`.\n\nWhen you use `keyboardLayoutGuide` and leave `followsUndockedKeyboard` set to the default value of `false`, the guide matches the keyboard when it docks. When the keyboard isn’t onscreen, the guide is at the bottom of the window and has a height equal to the bottom of the current [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UIView\/safeAreaInsets]. By default, when the keyboard undocks, the guide behaves the same as when you dismiss the keyboard or the keyboard isn’t visible. You can use the guide like any other layout guide.\n\nSee [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UILayoutGuide] for more information about layout guides.\n\n### Follow the undocked keyboard\n\nFor more precise layout responses to the undocked keyboard, the sample sets `followsUndockedKeyboard` to `true` and then creates tracking constraints that activate and deactivate when the keyboard approaches or leaves an edge. Tracking constraints only apply when `followsUndockedKeyboard` is `true`.\n\n### Enable tracking constraints\n\nThe sample shows how the [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UITrackingLayoutGuide] activates or deactivates constraints when the `keyboardLayoutGuide` approaches or leaves an edge. The sample code passes an array of constraints to the `keyboardLayoutGuide`, and indicates which edges trigger the change. The sample configures an array of constraints to activate when `awayFrom` the leading and trailing edges, so the constraints activate when the keyboard docks or when the floating keyboard is in the middle area of the screen. Conversely, the constraints deactivate when the floating keyboard approaches either the leading or trailing edge.\n\nThe following example shows how to pin a view to the top of the `keyboardLayoutGuide` when the guide is `awayFrom` the top edge, and to the bottom of the view’s [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UIView\/safeAreaLayoutGuide] when it’s `near` the top edge:\n\nThe sample demonstrates that it isn’t necessary to pin views to the `keyboardLayoutGuide` to affect their constraints when the keyboard approaches an edge. The guide can take any array of constraints in the layout and activate and deactivate them when necessary. For example, the following code shows an `imageView` with no constraint relationships to the `keyboardLayoutGuide` itself, but the image moves to the opposite side of the screen from the keyboard to stay visible as the keyboard moves around:\n\n### Account for keyboard types\n\nThe following list describes which edges the system reports the `keyboardLayoutGuide` is `near` and `awayFrom` when different types of keyboards are active:\n\nWhen the app is in 1\/3 split view mode, the `keyboardLayoutGuide` is `awayFrom` leading and trailing edges, `near` the bottom edge if docked, and can be `near` the top edge if floating or undocked.\n\n### Handle edge combinations\n\nThe sample shows constraints that are active when `near` or `awayFrom` multiple edges. The system activates or deactivates the constraints only when the position of the keyboard meets all edge requirements. Because a docked keyboard is `awayFrom` leading and trailing edges, but `near` the bottom edge, the constraint in the example below only activates when the keyboard undocks and is `awayFrom` the leading and trailing edges. This situation happens with undocked full or split keyboards, and with a floating keyboard in the horizontal middle of the screen.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/UIKit\/adjusting-your-layout-with-keyboard-layout-guide\ncrawled: 2025-12-02T15:52:02Z\n---\n\n# Adjusting your layout with keyboard layout guide\n\n**Sample Code**\n\nRespond dynamically to keyboard movement by using the tracking features of the keyboard layout guide.\n\n## Overview\n\nWhen your app presents a keyboard, you want it to integrate well into your layout. This sample code project demonstrates how to configure constraints when you set [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UIKeyboardLayoutGuide\/followsUndockedKeyboard] to `true` on the [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UIView\/keyboardLayoutGuide] property in `UIView` to adapt your layout to the movement of the floating keyboard onscreen. The sample illustrates several concepts, such as handling when the keyboard is close to the top of the screen, and adapting the layout when the additional views don’t have constraints with a direct relationship to the `keyboardLayoutGuide`.\n\nWhen you use `keyboardLayoutGuide` and leave `followsUndockedKeyboard` set to the default value of `false`, the guide matches the keyboard when it docks. When the keyboard isn’t onscreen, the guide is at the bottom of the window and has a height equal to the bottom of the current [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UIView\/safeAreaInsets]. By default, when the keyboard undocks, the guide behaves the same as when you dismiss the keyboard or the keyboard isn’t visible. You can use the guide like any other layout guide.\n\n```swift\nview.keyboardLayoutGuide.topAnchor.constraint(\n    equalToSystemSpacingBelow: textView.bottomAnchor, multiplier: 1.0).isActive = true\n```\n\nSee [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UILayoutGuide] for more information about layout guides.\n\n### Follow the undocked keyboard\n\nFor more precise layout responses to the undocked keyboard, the sample sets `followsUndockedKeyboard` to `true` and then creates tracking constraints that activate and deactivate when the keyboard approaches or leaves an edge. Tracking constraints only apply when `followsUndockedKeyboard` is `true`.\n\n```swift\n\/\/ This is necessary to allow the various edge constraints to engage.\nview.keyboardLayoutGuide.followsUndockedKeyboard = true\n```\n\n### Enable tracking constraints\n\nThe sample shows how the [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UITrackingLayoutGuide] activates or deactivates constraints when the `keyboardLayoutGuide` approaches or leaves an edge. The sample code passes an array of constraints to the `keyboardLayoutGuide`, and indicates which edges trigger the change. The sample configures an array of constraints to activate when `awayFrom` the leading and trailing edges, so the constraints activate when the keyboard docks or when the floating keyboard is in the middle area of the screen. Conversely, the constraints deactivate when the floating keyboard approaches either the leading or trailing edge.\n\n\n\nThe following example shows how to pin a view to the top of the `keyboardLayoutGuide` when the guide is `awayFrom` the top edge, and to the bottom of the view’s [doc:\/\/com.apple.uikit\/documentation\/UIKit\/UIView\/safeAreaLayoutGuide] when it’s `near` the top edge:\n\n```swift\n\/\/ When the keyboard isn't near the top, tie the edit view to the keyboard layout guide (it\n\/\/ deactivates when near the top).\nlet editViewOnKeyboard = view.keyboardLayoutGuide.topAnchor.constraint(equalTo: editView.bottomAnchor)\neditViewOnKeyboard.identifier = \"editViewOnKeyboard\"\nview.keyboardLayoutGuide.setConstraints([editViewOnKeyboard], activeWhenAwayFrom: .top)\n\n\/\/ When the keyboard is near the top, tie the edit view to the bottom anchor of the safeAreaLayoutGuide, so that it doesn't go offscreen.\nlet editViewOnBottom = view.safeAreaLayoutGuide.bottomAnchor.constraint(equalTo: editView.bottomAnchor)\neditViewOnBottom.identifier = \"editViewOnBottom\"\nview.keyboardLayoutGuide.setConstraints([editViewOnBottom], activeWhenNearEdge: .top)\n```\n\nThe sample demonstrates that it isn’t necessary to pin views to the `keyboardLayoutGuide` to affect their constraints when the keyboard approaches an edge. The guide can take any array of constraints in the layout and activate and deactivate them when necessary. For example, the following code shows an `imageView` with no constraint relationships to the `keyboardLayoutGuide` itself, but the image moves to the opposite side of the screen from the keyboard to stay visible as the keyboard moves around:\n\n```swift\nlet centeredImage = imageView.centerXAnchor.constraint(equalTo: view.centerXAnchor)\ncenteredImage.identifier = \"centeredImage\"\nview.keyboardLayoutGuide.setConstraints([centeredImage], activeWhenAwayFrom: [.leading, .trailing])\n\nlet imageViewToLeading = imageView.leadingAnchor.constraint(\n    equalToSystemSpacingAfter: view.safeAreaLayoutGuide.leadingAnchor, multiplier: 1.0)\nimageViewToLeading.identifier = \"imageViewToLeading\"\n\nlet nearTrailingConstraints = [ editViewToUndockedKeyboardTrailing, imageViewToLeading ]\nview.keyboardLayoutGuide.setConstraints(nearTrailingConstraints, activeWhenNearEdge: .trailing)\n\nlet imageViewToTrailing = view.safeAreaLayoutGuide.trailingAnchor.constraint(\n    equalToSystemSpacingAfter: imageView.trailingAnchor, multiplier: 1.0)\nimageViewToTrailing.identifier = \"imageViewToTrailing\"\n\nlet nearLeadingConstraints = [ editViewToKeyboardLeading, imageViewToTrailing ]\nview.keyboardLayoutGuide.setConstraints(nearLeadingConstraints, activeWhenNearEdge: .leading)\n```\n\n### Account for keyboard types\n\nThe following list describes which edges the system reports the `keyboardLayoutGuide` is `near` and `awayFrom` when different types of keyboards are active:\n\n- Docked keyboards:\n\n- Are always `awayFrom` leading, trailing, and top edges\n- Are always `near` the bottom edge\n- Split and undocked keyboards:\n\n- Are always `awayFrom` leading, trailing, and bottom edges\n- Can be `near` the top edge\n- Floating keyboards:\n\n- Can be `awayFrom` all edges\n- Can be `near` any edge or any two adjacent edges\n- The shortcuts bar (available with an external attached keyboard):\n\n- Is always `awayFrom` the top edge and `near` the bottom edge\n- Can be `near` the leading or trailing edge when in a collapsed state\n\n\n\nWhen the app is in 1\/3 split view mode, the `keyboardLayoutGuide` is `awayFrom` leading and trailing edges, `near` the bottom edge if docked, and can be `near` the top edge if floating or undocked.\n\n### Handle edge combinations\n\nThe sample shows constraints that are active when `near` or `awayFrom` multiple edges. The system activates or deactivates the constraints only when the position of the keyboard meets all edge requirements. Because a docked keyboard is `awayFrom` leading and trailing edges, but `near` the bottom edge, the constraint in the example below only activates when the keyboard undocks and is `awayFrom` the leading and trailing edges. This situation happens with undocked full or split keyboards, and with a floating keyboard in the horizontal middle of the screen.\n\n```swift\nlet editCenterXToKeyboard = view.keyboardLayoutGuide.centerXAnchor.constraint(equalTo: editView.centerXAnchor)\neditCenterXToKeyboard.identifier = \"editCenterXToKeyboard\"\n\nview.keyboardLayoutGuide.setConstraints([editCenterXToKeyboard], activeWhenAwayFrom: [.leading, .trailing, .bottom])\n```\n\n## Keyboard layout\n\n- **UIKeyboardLayoutGuide**: A layout guide that represents the space the keyboard occupies in your app’s layout.\n- **UITrackingLayoutGuide**: A layout guide that automatically activates and deactivates layout constraints depending on its proximity to edges.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "A layout guide that represents the space the keyboard occupies in your app’s layout.",
          "name" : "UIKeyboardLayoutGuide",
          "url" : "https:\/\/developer.apple.com\/documentation\/UIKit\/UIKeyboardLayoutGuide"
        },
        {
          "description" : "A layout guide that automatically activates and deactivates layout constraints depending on its proximity to edges.",
          "name" : "UITrackingLayoutGuide",
          "url" : "https:\/\/developer.apple.com\/documentation\/UIKit\/UITrackingLayoutGuide"
        }
      ],
      "title" : "Keyboard layout"
    }
  ],
  "source" : "appleJSON",
  "title" : "Adjusting your layout with keyboard layout guide",
  "url" : "https:\/\/developer.apple.com\/documentation\/UIKit\/adjusting-your-layout-with-keyboard-layout-guide"
}