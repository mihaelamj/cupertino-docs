{
  "abstract" : "Read NFC tags with NDEF messages in your app.",
  "codeExamples" : [
    {
      "code" : "@IBAction func beginScanning(_ sender: Any) {\n    guard NFCNDEFReaderSession.readingAvailable else {\n        let alertController = UIAlertController(\n            title: \"Scanning Not Supported\",\n            message: \"This device doesn't support tag scanning.\",\n            preferredStyle: .alert\n        )\n        alertController.addAction(UIAlertAction(title: \"OK\", style: .default, handler: nil))\n        self.present(alertController, animated: true, completion: nil)\n        return\n    }\n\n    session = NFCNDEFReaderSession(delegate: self, queue: nil, invalidateAfterFirstRead: false)\n    session?.alertMessage = \"Hold your iPhone near the item to learn more about it.\"\n    session?.begin()\n}",
      "language" : "swift"
    },
    {
      "code" : "class MessagesTableViewController: UITableViewController, NFCNDEFReaderSessionDelegate {",
      "language" : "swift"
    },
    {
      "code" : "func readerSession(_ session: NFCNDEFReaderSession, didDetectNDEFs messages: [NFCNDEFMessage]) {\n    DispatchQueue.main.async {\n        \/\/ Process detected NFCNDEFMessage objects.\n        self.detectedMessages.append(contentsOf: messages)\n        self.tableView.reloadData()\n    }\n}",
      "language" : "swift"
    },
    {
      "code" : "func readerSession(_ session: NFCNDEFReaderSession, didInvalidateWithError error: Error) {\n    \/\/ Check the invalidation reason from the returned error.\n    if let readerError = error as? NFCReaderError {\n        \/\/ Show an alert when the invalidation reason is not because of a\n        \/\/ successful read during a single-tag read session, or because the\n        \/\/ user canceled a multiple-tag read session from the UI or\n        \/\/ programmatically using the invalidate method call.\n        if (readerError.code != .readerSessionInvalidationErrorFirstNDEFTagRead)\n            && (readerError.code != .readerSessionInvalidationErrorUserCanceled) {\n            let alertController = UIAlertController(\n                title: \"Session Invalidated\",\n                message: error.localizedDescription,\n                preferredStyle: .alert\n            )\n            alertController.addAction(UIAlertAction(title: \"OK\", style: .default, handler: nil))\n            DispatchQueue.main.async {\n                self.present(alertController, animated: true, completion: nil)\n            }\n        }\n    }\n\n    \/\/ To read new tags, a new session instance is required.\n    self.session = nil\n}",
      "language" : "swift"
    },
    {
      "code" : "@IBAction func beginWrite(_ sender: Any) {\n    session = NFCNDEFReaderSession(delegate: self, queue: nil, invalidateAfterFirstRead: false)\n    session?.alertMessage = \"Hold your iPhone near an NDEF tag to write the message.\"\n    session?.begin()\n}",
      "language" : "swift"
    },
    {
      "code" : "func readerSession(_ session: NFCNDEFReaderSession, didDetect tags: [NFCNDEFTag]) {\n    if tags.count > 1 {\n        \/\/ Restart polling in 500 milliseconds.\n        let retryInterval = DispatchTimeInterval.milliseconds(500)\n        session.alertMessage = \"More than 1 tag is detected. Please remove all tags and try again.\"\n        DispatchQueue.global().asyncAfter(deadline: .now() + retryInterval, execute: {\n            session.restartPolling()\n        })\n        return\n    }\n    \n    \/\/ Connect to the found tag and write an NDEF message to it.\n    let tag = tags.first!\n    session.connect(to: tag, completionHandler: { (error: Error?) in\n        if nil != error {\n            session.alertMessage = \"Unable to connect to tag.\"\n            session.invalidate()\n            return\n        }\n        \n        tag.queryNDEFStatus(completionHandler: { (ndefStatus: NFCNDEFStatus, capacity: Int, error: Error?) in\n            guard error == nil else {\n                session.alertMessage = \"Unable to query the NDEF status of tag.\"\n                session.invalidate()\n                return\n            }\n\n            switch ndefStatus {\n            case .notSupported:\n                session.alertMessage = \"Tag is not NDEF compliant.\"\n                session.invalidate()\n            case .readOnly:\n                session.alertMessage = \"Tag is read only.\"\n                session.invalidate()\n            case .readWrite:\n                tag.writeNDEF(self.message, completionHandler: { (error: Error?) in\n                    if nil != error {\n                        session.alertMessage = \"Write NDEF message fail: \\(error!)\"\n                    } else {\n                        session.alertMessage = \"Write NDEF message successful.\"\n                    }\n                    session.invalidate()\n                })\n            @unknown default:\n                session.alertMessage = \"Unknown NDEF tag status.\"\n                session.invalidate()\n            }\n        })\n    })\n}",
      "language" : "swift"
    }
  ],
  "contentHash" : "f16fc880b21a66dcd4a018a30757cd093c7fcf9587f3f72fa4a8f43bafba45ba",
  "crawledAt" : "2025-12-03T17:07:16Z",
  "id" : "4CD4CFCF-1475-44F8-AB73-BB63D49AF764",
  "kind" : "unknown",
  "language" : "swift",
  "module" : "Core NFC",
  "overview" : "## Overview\n\nThis sample code project shows how to use Core NFC in an app to read Near Field Communication (NFC) tags of types 1 through 5 that contains NFC Data Exchange Format (NDEF) data. To use this sample, download the project and build it using Xcode. Run the sample app on your iPhone. Tap the Scan button to start scanning for tags, then hold the phone near an NFC tag.\n\nTo read a tag, the sample app creates an NFC NDEF reader session and provides a delegate. The running reader session polls for NFC tags and calls the delegate when it finds tags that contain NDEF messages, passing the messages to the delegate. The delegate then stores the messages so the user can view them later.\n\n### Configure the App to Detect NFC Tags\n\nBegin building your tag reader by configuring your app to detect NFC tags. Turn on Near Field Communication Tag Reading under the Capabilities tab for the project’s target (see [https:\/\/help.apple.com\/xcode\/mac\/current\/#\/dev88ff319e7]). This step:\n\nNext, add the [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Information-Property-List\/NFCReaderUsageDescription] key as a string item to the `Info.plist` file. For the value, enter a string that describes the reason the app needs access to the device’s NFC reader. If the app attempts to read a tag without providing this key and string, the app exits.\n\n### Start a Reader Session\n\nCreate an [doc:\/\/com.apple.documentation\/documentation\/CoreNFC\/NFCNDEFReaderSession] object by calling the [doc:\/\/com.apple.documentation\/documentation\/CoreNFC\/NFCNDEFReaderSession\/init(delegate:queue:invalidateAfterFirstRead:)] initializer method and passing in:\n\nAfter creating the reader session, give instructions to the user by setting the [doc:\/\/com.apple.documentation\/documentation\/CoreNFC\/NFCReaderSessionProtocol\/alertMessage] property. For example, you might tell users, “Hold your iPhone near the item to learn more about it.” The system displays this message to the user while the phone is scanning for NFC tags. Finally, call [doc:\/\/com.apple.documentation\/documentation\/CoreNFC\/NFCReaderSessionProtocol\/begin()] to start the reader session. This enables radio-frequency polling on the phone, and the phone begins scanning for tags.\n\nThe sample app starts a reader session when the user taps the Scan button. The app configures the reader session to invalidate the session after reading the first tag. To read additional tags, the user taps the Scan button again.\n\n### Adopt the Reader Session Delegate Protocol\n\nThe reader session requires a delegate object that conforms to the [doc:\/\/com.apple.documentation\/documentation\/CoreNFC\/NFCNDEFReaderSessionDelegate] protocol. Adopting this protocol allows the delegate to receive notifications from the reader session when it:\n\n### Read an NDEF Message\n\nEach time the reader session retrieves a new NDEF message, the session sends the message to the delegate by calling the [doc:\/\/com.apple.documentation\/documentation\/CoreNFC\/NFCNDEFReaderSessionDelegate\/readerSession(_:didDetectNDEFs:)] method. This is the app’s opportunity to do something useful with the data. For instance, the sample app stores the message so the user can view it later.\n\n### Handle an Invalid Reader Session\n\nWhen a reader session ends, it calls the delegate method [doc:\/\/com.apple.documentation\/documentation\/CoreNFC\/NFCNDEFReaderSessionDelegate\/readerSession(_:didInvalidateWithError:)] and passes in an error object that gives the reason for ending the session. Possible reasons include:\n\nIn the sample app, the delegate displays an alert when the reader session ends for any reason other than reading the first tag during a single-tag reader session, or the user canceling the session. Also, you cannot reuse an invalidated reader session, so the sample app sets `self.session` to `nil`.\n\n### Write an NDEF Message\n\nTo write to a tag, the sample app starts a new reader session. This session must be active to write an NDEF message to the tag, so this time, `invalidateAfterFirstRead` is set to `false`, preventing the session from becoming invalid after reading the tag.\n\nWhen the reader session detects a tag, it calls the [doc:\/\/com.apple.documentation\/documentation\/CoreNFC\/NFCNDEFReaderSessionDelegate\/readerSession(_:didDetectNDEFs:)] delegate method. However, because the session doesn’t become invalid after reading the first tag, it’s possible for the session to detect more than one tag. The sample app writes to one tag only, so it checks that the session detected only one tag. If the session detected more than one, the app asks the user to remove the tags, and then restarts polling to scan for a new tag.\n\nAfter the app confirms that it has only one tag, it connects to the tag and verifies that it’s writable. The app then writes the NDEF message it read earlier to the tag.\n\n### Support Background Tag Reading\n\nTo learn how to set up your app to process tags that iOS reads in the background, see [doc:\/\/com.apple.documentation\/documentation\/CoreNFC\/adding-support-for-background-tag-reading].",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/corenfc\/building-an-nfc-tag-reader-app\ncrawled: 2025-12-03T17:07:16Z\n---\n\n# Building an NFC Tag-Reader App\n\n**Sample Code**\n\nRead NFC tags with NDEF messages in your app.\n\n## Overview\n\nThis sample code project shows how to use Core NFC in an app to read Near Field Communication (NFC) tags of types 1 through 5 that contains NFC Data Exchange Format (NDEF) data. To use this sample, download the project and build it using Xcode. Run the sample app on your iPhone. Tap the Scan button to start scanning for tags, then hold the phone near an NFC tag.\n\nTo read a tag, the sample app creates an NFC NDEF reader session and provides a delegate. The running reader session polls for NFC tags and calls the delegate when it finds tags that contain NDEF messages, passing the messages to the delegate. The delegate then stores the messages so the user can view them later.\n\n### Configure the App to Detect NFC Tags\n\nBegin building your tag reader by configuring your app to detect NFC tags. Turn on Near Field Communication Tag Reading under the Capabilities tab for the project’s target (see [https:\/\/help.apple.com\/xcode\/mac\/current\/#\/dev88ff319e7]). This step:\n\n- Adds the NFC tag-reading feature to the App ID.\n- Adds the [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Entitlements\/com.apple.developer.nfc.readersession.formats] to the entitlements file.\n\nNext, add the [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Information-Property-List\/NFCReaderUsageDescription] key as a string item to the `Info.plist` file. For the value, enter a string that describes the reason the app needs access to the device’s NFC reader. If the app attempts to read a tag without providing this key and string, the app exits.\n\n### Start a Reader Session\n\nCreate an [doc:\/\/com.apple.documentation\/documentation\/CoreNFC\/NFCNDEFReaderSession] object by calling the [doc:\/\/com.apple.documentation\/documentation\/CoreNFC\/NFCNDEFReaderSession\/init(delegate:queue:invalidateAfterFirstRead:)] initializer method and passing in:\n\n- The reader session delegate object.\n- The dispatch queue to use when calling methods on the delegate.\n- The `invalidateAfterFirstRead` flag to determine whether the reader session reads only a single tag or multiple tags.\n\nAfter creating the reader session, give instructions to the user by setting the [doc:\/\/com.apple.documentation\/documentation\/CoreNFC\/NFCReaderSessionProtocol\/alertMessage] property. For example, you might tell users, “Hold your iPhone near the item to learn more about it.” The system displays this message to the user while the phone is scanning for NFC tags. Finally, call [doc:\/\/com.apple.documentation\/documentation\/CoreNFC\/NFCReaderSessionProtocol\/begin()] to start the reader session. This enables radio-frequency polling on the phone, and the phone begins scanning for tags.\n\nThe sample app starts a reader session when the user taps the Scan button. The app configures the reader session to invalidate the session after reading the first tag. To read additional tags, the user taps the Scan button again.\n\n```swift\n@IBAction func beginScanning(_ sender: Any) {\n    guard NFCNDEFReaderSession.readingAvailable else {\n        let alertController = UIAlertController(\n            title: \"Scanning Not Supported\",\n            message: \"This device doesn't support tag scanning.\",\n            preferredStyle: .alert\n        )\n        alertController.addAction(UIAlertAction(title: \"OK\", style: .default, handler: nil))\n        self.present(alertController, animated: true, completion: nil)\n        return\n    }\n\n    session = NFCNDEFReaderSession(delegate: self, queue: nil, invalidateAfterFirstRead: false)\n    session?.alertMessage = \"Hold your iPhone near the item to learn more about it.\"\n    session?.begin()\n}\n```\n\n### Adopt the Reader Session Delegate Protocol\n\nThe reader session requires a delegate object that conforms to the [doc:\/\/com.apple.documentation\/documentation\/CoreNFC\/NFCNDEFReaderSessionDelegate] protocol. Adopting this protocol allows the delegate to receive notifications from the reader session when it:\n\n- Reads an NDEF message\n- Becomes invalid due to ending the session or encountering an error\n\n```swift\nclass MessagesTableViewController: UITableViewController, NFCNDEFReaderSessionDelegate {\n```\n\n### Read an NDEF Message\n\nEach time the reader session retrieves a new NDEF message, the session sends the message to the delegate by calling the [doc:\/\/com.apple.documentation\/documentation\/CoreNFC\/NFCNDEFReaderSessionDelegate\/readerSession(_:didDetectNDEFs:)] method. This is the app’s opportunity to do something useful with the data. For instance, the sample app stores the message so the user can view it later.\n\n```swift\nfunc readerSession(_ session: NFCNDEFReaderSession, didDetectNDEFs messages: [NFCNDEFMessage]) {\n    DispatchQueue.main.async {\n        \/\/ Process detected NFCNDEFMessage objects.\n        self.detectedMessages.append(contentsOf: messages)\n        self.tableView.reloadData()\n    }\n}\n```\n\n### Handle an Invalid Reader Session\n\nWhen a reader session ends, it calls the delegate method [doc:\/\/com.apple.documentation\/documentation\/CoreNFC\/NFCNDEFReaderSessionDelegate\/readerSession(_:didInvalidateWithError:)] and passes in an error object that gives the reason for ending the session. Possible reasons include:\n\n- The phone successfully read an NFC tag with a reader session configured to invalidate the session after reading the first tag. The error code is [doc:\/\/com.apple.documentation\/documentation\/CoreNFC\/NFCReaderError-swift.struct\/Code\/readerSessionInvalidationErrorFirstNDEFTagRead].\n- The user canceled the session, or the app called [doc:\/\/com.apple.documentation\/documentation\/CoreNFC\/NFCReaderSessionProtocol\/invalidate()] to end the session. The error code is [doc:\/\/com.apple.documentation\/documentation\/CoreNFC\/NFCReaderError-swift.struct\/Code\/readerSessionInvalidationErrorUserCanceled].\n- An error occurred during the reader session. See [doc:\/\/com.apple.documentation\/documentation\/CoreNFC\/NFCReaderError-swift.struct\/Code] for the complete list of error codes.\n\nIn the sample app, the delegate displays an alert when the reader session ends for any reason other than reading the first tag during a single-tag reader session, or the user canceling the session. Also, you cannot reuse an invalidated reader session, so the sample app sets `self.session` to `nil`.\n\n```swift\nfunc readerSession(_ session: NFCNDEFReaderSession, didInvalidateWithError error: Error) {\n    \/\/ Check the invalidation reason from the returned error.\n    if let readerError = error as? NFCReaderError {\n        \/\/ Show an alert when the invalidation reason is not because of a\n        \/\/ successful read during a single-tag read session, or because the\n        \/\/ user canceled a multiple-tag read session from the UI or\n        \/\/ programmatically using the invalidate method call.\n        if (readerError.code != .readerSessionInvalidationErrorFirstNDEFTagRead)\n            && (readerError.code != .readerSessionInvalidationErrorUserCanceled) {\n            let alertController = UIAlertController(\n                title: \"Session Invalidated\",\n                message: error.localizedDescription,\n                preferredStyle: .alert\n            )\n            alertController.addAction(UIAlertAction(title: \"OK\", style: .default, handler: nil))\n            DispatchQueue.main.async {\n                self.present(alertController, animated: true, completion: nil)\n            }\n        }\n    }\n\n    \/\/ To read new tags, a new session instance is required.\n    self.session = nil\n}\n```\n\n### Write an NDEF Message\n\nTo write to a tag, the sample app starts a new reader session. This session must be active to write an NDEF message to the tag, so this time, `invalidateAfterFirstRead` is set to `false`, preventing the session from becoming invalid after reading the tag.\n\n```swift\n@IBAction func beginWrite(_ sender: Any) {\n    session = NFCNDEFReaderSession(delegate: self, queue: nil, invalidateAfterFirstRead: false)\n    session?.alertMessage = \"Hold your iPhone near an NDEF tag to write the message.\"\n    session?.begin()\n}\n```\n\nWhen the reader session detects a tag, it calls the [doc:\/\/com.apple.documentation\/documentation\/CoreNFC\/NFCNDEFReaderSessionDelegate\/readerSession(_:didDetectNDEFs:)] delegate method. However, because the session doesn’t become invalid after reading the first tag, it’s possible for the session to detect more than one tag. The sample app writes to one tag only, so it checks that the session detected only one tag. If the session detected more than one, the app asks the user to remove the tags, and then restarts polling to scan for a new tag.\n\nAfter the app confirms that it has only one tag, it connects to the tag and verifies that it’s writable. The app then writes the NDEF message it read earlier to the tag.\n\n```swift\nfunc readerSession(_ session: NFCNDEFReaderSession, didDetect tags: [NFCNDEFTag]) {\n    if tags.count > 1 {\n        \/\/ Restart polling in 500 milliseconds.\n        let retryInterval = DispatchTimeInterval.milliseconds(500)\n        session.alertMessage = \"More than 1 tag is detected. Please remove all tags and try again.\"\n        DispatchQueue.global().asyncAfter(deadline: .now() + retryInterval, execute: {\n            session.restartPolling()\n        })\n        return\n    }\n    \n    \/\/ Connect to the found tag and write an NDEF message to it.\n    let tag = tags.first!\n    session.connect(to: tag, completionHandler: { (error: Error?) in\n        if nil != error {\n            session.alertMessage = \"Unable to connect to tag.\"\n            session.invalidate()\n            return\n        }\n        \n        tag.queryNDEFStatus(completionHandler: { (ndefStatus: NFCNDEFStatus, capacity: Int, error: Error?) in\n            guard error == nil else {\n                session.alertMessage = \"Unable to query the NDEF status of tag.\"\n                session.invalidate()\n                return\n            }\n\n            switch ndefStatus {\n            case .notSupported:\n                session.alertMessage = \"Tag is not NDEF compliant.\"\n                session.invalidate()\n            case .readOnly:\n                session.alertMessage = \"Tag is read only.\"\n                session.invalidate()\n            case .readWrite:\n                tag.writeNDEF(self.message, completionHandler: { (error: Error?) in\n                    if nil != error {\n                        session.alertMessage = \"Write NDEF message fail: \\(error!)\"\n                    } else {\n                        session.alertMessage = \"Write NDEF message successful.\"\n                    }\n                    session.invalidate()\n                })\n            @unknown default:\n                session.alertMessage = \"Unknown NDEF tag status.\"\n                session.invalidate()\n            }\n        })\n    })\n}\n```\n\n### Support Background Tag Reading\n\nTo learn how to set up your app to process tags that iOS reads in the background, see [doc:\/\/com.apple.documentation\/documentation\/CoreNFC\/adding-support-for-background-tag-reading].\n\n## Essentials\n\n- **Adding Support for Background Tag Reading**: Allow users to scan NFC tags without an app using background tag reading.\n- **NFCReaderUsageDescription**: A message that tells people why the app is requesting access to the device’s NFC hardware.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Allow users to scan NFC tags without an app using background tag reading.",
          "name" : "Adding Support for Background Tag Reading",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreNFC\/adding-support-for-background-tag-reading"
        },
        {
          "description" : "A message that tells people why the app is requesting access to the device’s NFC hardware.",
          "name" : "NFCReaderUsageDescription",
          "url" : "https:\/\/developer.apple.com\/documentation\/BundleResources\/Information-Property-List\/NFCReaderUsageDescription"
        }
      ],
      "title" : "Essentials"
    }
  ],
  "source" : "appleJSON",
  "title" : "Building an NFC Tag-Reader App",
  "url" : "https:\/\/developer.apple.com\/documentation\/corenfc\/building-an-nfc-tag-reader-app"
}