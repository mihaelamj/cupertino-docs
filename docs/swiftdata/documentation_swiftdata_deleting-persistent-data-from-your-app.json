{
  "abstract" : "Explore different ways to use SwiftData to delete persistent data.",
  "codeExamples" : [
    {
      "code" : "private struct AnimalList: View {\n    @Environment(NavigationContext.self) private var navigationContext\n    @Environment(\\.modelContext) private var modelContext\n    @Query(sort: \\Animal.name) private var animals: [Animal]\n\n    var body: some View {\n        @Bindable var navigationContext = navigationContext\n        List(selection: $navigationContext.selectedAnimal) {\n            ForEach(animals) { animal in\n                NavigationLink(animal.name, value: animal)\n            }\n            .onDelete(perform: removeAnimals)\n        }\n    }\n}",
      "language" : "swift"
    },
    {
      "code" : "private func removeAnimals(at indexSet: IndexSet) {\n    for index in indexSet {\n        modelContext.delete(animals[index])\n    }\n}",
      "language" : "swift"
    },
    {
      "code" : "private func removeAnimals(at indexSet: IndexSet) {\n    for index in indexSet {\n        let animalToDelete = animals[index]\n        if navigationContext.selectedAnimal?.persistentModelID == animalToDelete.persistentModelID {\n            navigationContext.selectedAnimal = nil\n        }\n        modelContext.delete(animalToDelete)\n    }\n}",
      "language" : "swift"
    },
    {
      "code" : "private func removeAnimals(at indexSet: IndexSet) {\n    do {\n\t    for index in indexSet {\n\t        let animalToDelete = animals[index]\n\t        if navigationContext.selectedAnimal?.persistentModelID == animalToDelete.persistentModelID {\n\t            navigationContext.selectedAnimal = nil\n\t        }\n\t        modelContext.delete(animalToDelete)\n\t    }\n        try modelContext.save()\n    } catch {\n        \/\/ Handle error.\n    }\n}",
      "language" : "swift"
    },
    {
      "code" : "struct AnimalDetailView: View {\n    var animal: Animal?\n    @State private var isDeleting = false\n    @Environment(\\.modelContext) private var modelContext\n    @Environment(NavigationContext.self) private var navigationContext\n\n    var body: some View {\n        if let animal {\n            AnimalDetailContentView(animal: animal)\n                .navigationTitle(\"\\(animal.name)\")\n                .toolbar {\n                    Button { isDeleting = true } label: {\n                        Label(\"Delete \\(animal.name)\", systemImage: \"trash\")\n                            .help(\"Delete the animal\")\n                    }\n                }\n        } else {\n            ContentUnavailableView(\"Select an animal\", systemImage: \"pawprint\")\n        }\n    }\n}",
      "language" : "swift"
    },
    {
      "code" : ".alert(\"Delete \\(animal.name)?\", isPresented: $isDeleting) {\n    Button(\"Yes, delete \\(animal.name)\", role: .destructive) {\n        delete(animal)\n    }\n}",
      "language" : "swift"
    },
    {
      "code" : "private func delete(_ animal: Animal) {\n    navigationContext.selectedAnimal = nil\n    modelContext.delete(animal)\n}",
      "language" : "swift"
    },
    {
      "code" : "private func delete(_ animal: Animal) {\n    do {\n        navigationContext.selectedAnimal = nil\n        modelContext.delete(animal)\n        try modelContext.save()\n    } catch {\n        \/\/ Handle error.\n    }\n}",
      "language" : "swift"
    },
    {
      "code" : "static func reloadSampleData(modelContext: ModelContext) {\n    do {\n        try modelContext.delete(model: AnimalCategory.self)\n        insertSampleData(modelContext: modelContext)\n    } catch {\n        fatalError(error.localizedDescription)\n    }\n}",
      "language" : "swift"
    },
    {
      "code" : "import SwiftData\n\n@Model\nfinal class AnimalCategory {\n    @Attribute(.unique) var name: String\n    \/\/ `.cascade` tells SwiftData to delete all animals contained in the \n    \/\/ category when deleting it.\n    @Relationship(deleteRule: .cascade, inverse: \\Animal.category)\n    var animals = [Animal]()\n    \n    init(name: String) {\n        self.name = name\n    }\n}",
      "language" : "swift"
    }
  ],
  "contentHash" : "73ddaa4438a4bdb85ebc90fb6f2c53ce0502591569b43e7c41dedd1cb3eb4e92",
  "crawledAt" : "2025-12-02T15:50:45Z",
  "id" : "648953FD-786C-4ECD-9622-50BBA4DE5B03",
  "kind" : "unknown",
  "language" : "swift",
  "module" : "SwiftData",
  "overview" : "## Overview\n\nData-driven apps typically provide a way for a person to delete data, and this sample is no exception. It shows three ways to remove data stored in a SwiftData model container:\n\n## Swipe to delete\n\nThe sample app shows a list of animals. A person using the app can delete an animal using a swipe gesture. For example, the following code adds the swipe-to-delete option to the `AnimalList` view by applying the [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/DynamicViewContent\/onDelete(perform:)] modifier to [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/ForEach]:\n\nThe [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/DynamicViewContent\/onDelete(perform:)] modifier in the previous code calls the custom method `removeAnimals` to remove one or more animals from the list. This method receives an [doc:\/\/com.apple.documentation\/documentation\/Foundation\/IndexSet] which identifies the animals to delete. The method then iterates through the index set, deleting each animal using the [doc:\/\/com.apple.SwiftData\/documentation\/SwiftData\/ModelContext] method [doc:\/\/com.apple.SwiftData\/documentation\/SwiftData\/ModelContext\/delete(_:)].\n\nHowever, it’s possible for a person using this sample to delete the selected animal, so the `removeAnimals` method needs to unselect the animal before deleting it. The updated version of `removeAnimals` uses the [doc:\/\/com.apple.SwiftData\/documentation\/SwiftData\/PersistentModel\/persistentModelID] to determine whether the animal to delete is also the selected animal. If it is, the method sets the selected animal to `nil`.\n\nThe sample uses the SwiftData autosave feature, which is enabled by default when creating a [doc:\/\/com.apple.SwiftData\/documentation\/SwiftData\/ModelContainer] using the [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/View\/modelContainer(for:inMemory:isAutosaveEnabled:isUndoEnabled:onSetup:)-18hhy] modifier. If this feature is disabled, the `removeAnimals` method needs to explicitly save the change by calling the [doc:\/\/com.apple.SwiftData\/documentation\/SwiftData\/ModelContext] method [doc:\/\/com.apple.SwiftData\/documentation\/SwiftData\/ModelContext\/save()]; for example:\n\n## Delete with confirmation\n\nThe sample app also lets a person delete the selected animal by clicking the Trash button that `AnimalDetailView` displays in its toolbar.\n\nThe action for the button set the state variable `isDeleting` to `true`, which displays the delete confirmation alert described in the following code:\n\nAfter confirming the delete request, the action for the confirmation button calls the custom `delete` method. This method sets the selected animal to `nil`, then deletes the animal from the model context by calling the [doc:\/\/com.apple.SwiftData\/documentation\/SwiftData\/ModelContext\/delete(_:)] method.\n\nIf the SwiftData autosave feature was disabled, the `delete` method would need to explicitly save the change by calling the `ModelContext` method [doc:\/\/com.apple.SwiftData\/documentation\/SwiftData\/ModelContext\/save()]; for example:\n\n## Delete all\n\nDeleting all items of a particular model type is less common in data driven apps, but there may be times when having this option is helpful. For example, the sample apps lets a person reload sample data that comes with the app. Reloading the sample data deletes all animal categories and animals from persistent storage.\n\nTo delete all items of a particular model type, use the [doc:\/\/com.apple.SwiftData\/documentation\/SwiftData\/ModelContext] method [doc:\/\/com.apple.SwiftData\/documentation\/SwiftData\/ModelContext\/delete(model:where:includeSubclasses:)]. For example, the following code deletes all animal categories before reloading the sample data:\n\nWhen deleting all animal categories, SwiftData also deletes all animals within those categories. SwiftData knows to perform this cascading delete because the relationship between `AnimalCategory` and `Animal` uses the [doc:\/\/com.apple.SwiftData\/documentation\/SwiftData\/Schema\/Relationship\/DeleteRule-swift.enum\/cascade] delete rule. (For a complete list of delete rules, see [doc:\/\/com.apple.SwiftData\/documentation\/SwiftData\/Schema\/Relationship\/DeleteRule-swift.enum].)\n\nTo delete all persistent data from your app and not just data of a certain model type, use the [doc:\/\/com.apple.SwiftData\/documentation\/SwiftData\/ModelContainer] method [doc:\/\/com.apple.SwiftData\/documentation\/SwiftData\/ModelContainer\/deleteAllData()].",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/SwiftData\/Deleting-persistent-data-from-your-app\ncrawled: 2025-12-02T15:50:45Z\n---\n\n# Deleting persistent data from your app\n\n**Sample Code**\n\nExplore different ways to use SwiftData to delete persistent data.\n\n## Overview\n\nData-driven apps typically provide a way for a person to delete data, and this sample is no exception. It shows three ways to remove data stored in a SwiftData model container:\n\n- Swiping to delete\n- Deleting with confirmation\n- Deleting all\n\n\n\n## Swipe to delete\n\nThe sample app shows a list of animals. A person using the app can delete an animal using a swipe gesture. For example, the following code adds the swipe-to-delete option to the `AnimalList` view by applying the [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/DynamicViewContent\/onDelete(perform:)] modifier to [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/ForEach]:\n\n```swift\nprivate struct AnimalList: View {\n    @Environment(NavigationContext.self) private var navigationContext\n    @Environment(\\.modelContext) private var modelContext\n    @Query(sort: \\Animal.name) private var animals: [Animal]\n\n    var body: some View {\n        @Bindable var navigationContext = navigationContext\n        List(selection: $navigationContext.selectedAnimal) {\n            ForEach(animals) { animal in\n                NavigationLink(animal.name, value: animal)\n            }\n            .onDelete(perform: removeAnimals)\n        }\n    }\n}\n```\n\nThe [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/DynamicViewContent\/onDelete(perform:)] modifier in the previous code calls the custom method `removeAnimals` to remove one or more animals from the list. This method receives an [doc:\/\/com.apple.documentation\/documentation\/Foundation\/IndexSet] which identifies the animals to delete. The method then iterates through the index set, deleting each animal using the [doc:\/\/com.apple.SwiftData\/documentation\/SwiftData\/ModelContext] method [doc:\/\/com.apple.SwiftData\/documentation\/SwiftData\/ModelContext\/delete(_:)].\n\n```swift\nprivate func removeAnimals(at indexSet: IndexSet) {\n    for index in indexSet {\n        modelContext.delete(animals[index])\n    }\n}\n```\n\nHowever, it’s possible for a person using this sample to delete the selected animal, so the `removeAnimals` method needs to unselect the animal before deleting it. The updated version of `removeAnimals` uses the [doc:\/\/com.apple.SwiftData\/documentation\/SwiftData\/PersistentModel\/persistentModelID] to determine whether the animal to delete is also the selected animal. If it is, the method sets the selected animal to `nil`.\n\n```swift\nprivate func removeAnimals(at indexSet: IndexSet) {\n    for index in indexSet {\n        let animalToDelete = animals[index]\n        if navigationContext.selectedAnimal?.persistentModelID == animalToDelete.persistentModelID {\n            navigationContext.selectedAnimal = nil\n        }\n        modelContext.delete(animalToDelete)\n    }\n}\n```\n\nThe sample uses the SwiftData autosave feature, which is enabled by default when creating a [doc:\/\/com.apple.SwiftData\/documentation\/SwiftData\/ModelContainer] using the [doc:\/\/com.apple.documentation\/documentation\/SwiftUI\/View\/modelContainer(for:inMemory:isAutosaveEnabled:isUndoEnabled:onSetup:)-18hhy] modifier. If this feature is disabled, the `removeAnimals` method needs to explicitly save the change by calling the [doc:\/\/com.apple.SwiftData\/documentation\/SwiftData\/ModelContext] method [doc:\/\/com.apple.SwiftData\/documentation\/SwiftData\/ModelContext\/save()]; for example:\n\n```swift\nprivate func removeAnimals(at indexSet: IndexSet) {\n    do {\n\t    for index in indexSet {\n\t        let animalToDelete = animals[index]\n\t        if navigationContext.selectedAnimal?.persistentModelID == animalToDelete.persistentModelID {\n\t            navigationContext.selectedAnimal = nil\n\t        }\n\t        modelContext.delete(animalToDelete)\n\t    }\n        try modelContext.save()\n    } catch {\n        \/\/ Handle error.\n    }\n}\n```\n\n\n\n## Delete with confirmation\n\nThe sample app also lets a person delete the selected animal by clicking the Trash button that `AnimalDetailView` displays in its toolbar.\n\n```swift\nstruct AnimalDetailView: View {\n    var animal: Animal?\n    @State private var isDeleting = false\n    @Environment(\\.modelContext) private var modelContext\n    @Environment(NavigationContext.self) private var navigationContext\n\n    var body: some View {\n        if let animal {\n            AnimalDetailContentView(animal: animal)\n                .navigationTitle(\"\\(animal.name)\")\n                .toolbar {\n                    Button { isDeleting = true } label: {\n                        Label(\"Delete \\(animal.name)\", systemImage: \"trash\")\n                            .help(\"Delete the animal\")\n                    }\n                }\n        } else {\n            ContentUnavailableView(\"Select an animal\", systemImage: \"pawprint\")\n        }\n    }\n}\n```\n\nThe action for the button set the state variable `isDeleting` to `true`, which displays the delete confirmation alert described in the following code:\n\n```swift\n.alert(\"Delete \\(animal.name)?\", isPresented: $isDeleting) {\n    Button(\"Yes, delete \\(animal.name)\", role: .destructive) {\n        delete(animal)\n    }\n}\n```\n\nAfter confirming the delete request, the action for the confirmation button calls the custom `delete` method. This method sets the selected animal to `nil`, then deletes the animal from the model context by calling the [doc:\/\/com.apple.SwiftData\/documentation\/SwiftData\/ModelContext\/delete(_:)] method.\n\n```swift\nprivate func delete(_ animal: Animal) {\n    navigationContext.selectedAnimal = nil\n    modelContext.delete(animal)\n}\n```\n\nIf the SwiftData autosave feature was disabled, the `delete` method would need to explicitly save the change by calling the `ModelContext` method [doc:\/\/com.apple.SwiftData\/documentation\/SwiftData\/ModelContext\/save()]; for example:\n\n```swift\nprivate func delete(_ animal: Animal) {\n    do {\n        navigationContext.selectedAnimal = nil\n        modelContext.delete(animal)\n        try modelContext.save()\n    } catch {\n        \/\/ Handle error.\n    }\n}\n```\n\n## Delete all\n\nDeleting all items of a particular model type is less common in data driven apps, but there may be times when having this option is helpful. For example, the sample apps lets a person reload sample data that comes with the app. Reloading the sample data deletes all animal categories and animals from persistent storage.\n\nTo delete all items of a particular model type, use the [doc:\/\/com.apple.SwiftData\/documentation\/SwiftData\/ModelContext] method [doc:\/\/com.apple.SwiftData\/documentation\/SwiftData\/ModelContext\/delete(model:where:includeSubclasses:)]. For example, the following code deletes all animal categories before reloading the sample data:\n\n```swift\nstatic func reloadSampleData(modelContext: ModelContext) {\n    do {\n        try modelContext.delete(model: AnimalCategory.self)\n        insertSampleData(modelContext: modelContext)\n    } catch {\n        fatalError(error.localizedDescription)\n    }\n}\n```\n\nWhen deleting all animal categories, SwiftData also deletes all animals within those categories. SwiftData knows to perform this cascading delete because the relationship between `AnimalCategory` and `Animal` uses the [doc:\/\/com.apple.SwiftData\/documentation\/SwiftData\/Schema\/Relationship\/DeleteRule-swift.enum\/cascade] delete rule. (For a complete list of delete rules, see [doc:\/\/com.apple.SwiftData\/documentation\/SwiftData\/Schema\/Relationship\/DeleteRule-swift.enum].)\n\n```swift\nimport SwiftData\n\n@Model\nfinal class AnimalCategory {\n    @Attribute(.unique) var name: String\n    \/\/ `.cascade` tells SwiftData to delete all animals contained in the \n    \/\/ category when deleting it.\n    @Relationship(deleteRule: .cascade, inverse: \\Animal.category)\n    var animals = [Animal]()\n    \n    init(name: String) {\n        self.name = name\n    }\n}\n```\n\nTo delete all persistent data from your app and not just data of a certain model type, use the [doc:\/\/com.apple.SwiftData\/documentation\/SwiftData\/ModelContainer] method [doc:\/\/com.apple.SwiftData\/documentation\/SwiftData\/ModelContainer\/deleteAllData()].\n\n## Model life cycle\n\n- **ModelContainer**: An object that manages an app’s schema and model storage configuration.\n- **ModelContext**: An object that enables you to fetch, insert, and delete models, and save any changes to disk.\n- **Fetching and filtering time-based model changes**: Track all inserts, updates, and deletes that occur in a data store and process them as a series of chronological transactions.\n- **HistoryDescriptor**: A type that describes the criteria, and, optionally, sort order, to use when fetching history data\n- **Reverting data changes using the undo manager**: Automatically record data change operations that people perform in your SwiftUI app, and let them undo and redo those changes.\n- **Syncing model data across a person’s devices**: Add the required capabilities and define a compatible schema to enable SwiftData to automatically sync your app’s model data using iCloud.\n- **Concurrency support**: Types you use to access model attributes and perform storage-related tasks in a safe and isolated way.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "An object that manages an app’s schema and model storage configuration.",
          "name" : "ModelContainer",
          "url" : "https:\/\/developer.apple.com\/documentation\/SwiftData\/ModelContainer"
        },
        {
          "description" : "An object that enables you to fetch, insert, and delete models, and save any changes to disk.",
          "name" : "ModelContext",
          "url" : "https:\/\/developer.apple.com\/documentation\/SwiftData\/ModelContext"
        },
        {
          "description" : "Track all inserts, updates, and deletes that occur in a data store and process them as a series of chronological transactions.",
          "name" : "Fetching and filtering time-based model changes",
          "url" : "https:\/\/developer.apple.com\/documentation\/SwiftData\/Fetching-and-filtering-time-based-model-changes"
        },
        {
          "description" : "A type that describes the criteria, and, optionally, sort order, to use when fetching history data",
          "name" : "HistoryDescriptor",
          "url" : "https:\/\/developer.apple.com\/documentation\/SwiftData\/HistoryDescriptor"
        },
        {
          "description" : "Automatically record data change operations that people perform in your SwiftUI app, and let them undo and redo those changes.",
          "name" : "Reverting data changes using the undo manager",
          "url" : "https:\/\/developer.apple.com\/documentation\/SwiftData\/Reverting-data-changes-using-the-undo-manager"
        },
        {
          "description" : "Add the required capabilities and define a compatible schema to enable SwiftData to automatically sync your app’s model data using iCloud.",
          "name" : "Syncing model data across a person’s devices",
          "url" : "https:\/\/developer.apple.com\/documentation\/SwiftData\/Syncing-model-data-across-a-persons-devices"
        },
        {
          "description" : "Types you use to access model attributes and perform storage-related tasks in a safe and isolated way.",
          "name" : "Concurrency support",
          "url" : "https:\/\/developer.apple.com\/documentation\/SwiftData\/ConcurrencySupport"
        }
      ],
      "title" : "Model life cycle"
    }
  ],
  "source" : "appleJSON",
  "title" : "Deleting persistent data from your app",
  "url" : "https:\/\/developer.apple.com\/documentation\/SwiftData\/Deleting-persistent-data-from-your-app"
}