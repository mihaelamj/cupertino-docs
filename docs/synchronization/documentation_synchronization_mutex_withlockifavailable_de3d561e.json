{
  "abstract" : "Attempts to acquire the lock and then calls the given closure if successful.",
  "codeExamples" : [
    {
      "code" : "guard mutex.tryLock() else {\n  return nil\n}\ndefer {\n  mutex.unlock()\n}\nreturn try body(&value)",
      "language" : "swift"
    }
  ],
  "contentHash" : "5fe183975dbf1472a76b16c6f025350aa3c3bd620b206488cd977bf06e152ca8",
  "crawledAt" : "2025-12-04T17:22:59Z",
  "declaration" : {
    "code" : "borrowing func withLockIfAvailable<Result, E>(_ body: (inout sending Value) throws(E) -> sending Result) throws(E) -> sending Result? where E : Error, Result : ~Copyable",
    "language" : "swift"
  },
  "id" : "DD546D56-6B93-4A61-8793-401FCACC1714",
  "kind" : "method",
  "language" : "swift",
  "module" : "Synchronization",
  "overview" : "## Return Value\n\nThe return value, if any, of the `body` closure parameter or nil if the lock couldn’t be acquired.\n\n## Discussion\n\nIf the calling thread was successful in acquiring the lock, the closure will be executed and then immediately after it will release ownership of the lock. If we were unable to acquire the lock, this will return `nil`.\n\nThis method is equivalent to the following sequence of code:",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "tvOS",
    "visionOS",
    "watchOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/Synchronization\/Mutex\/withLockIfAvailable(_:)\ncrawled: 2025-12-04T17:22:59Z\n---\n\n# withLockIfAvailable(_:)\n\n**Instance Method**\n\nAttempts to acquire the lock and then calls the given closure if successful.\n\n## Declaration\n\n```swift\nborrowing func withLockIfAvailable<Result, E>(_ body: (inout sending Value) throws(E) -> sending Result) throws(E) -> sending Result? where E : Error, Result : ~Copyable\n```\n\n## Parameters\n\n- **body**: A closure with a parameter of `Value` that has exclusive access to the value being stored within this mutex. This closure is considered the critical section as it will only be executed if the calling thread acquires the lock.\n\n## Return Value\n\nThe return value, if any, of the `body` closure parameter or nil if the lock couldn’t be acquired.\n\n## Discussion\n\nIf the calling thread was successful in acquiring the lock, the closure will be executed and then immediately after it will release ownership of the lock. If we were unable to acquire the lock, this will return `nil`.\n\nThis method is equivalent to the following sequence of code:\n\n```swift\nguard mutex.tryLock() else {\n  return nil\n}\ndefer {\n  mutex.unlock()\n}\nreturn try body(&value)\n```\n\n\n\n",
  "sections" : [

  ],
  "source" : "appleJSON",
  "title" : "withLockIfAvailable(_:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/Synchronization\/Mutex\/withLockIfAvailable(_:)"
}