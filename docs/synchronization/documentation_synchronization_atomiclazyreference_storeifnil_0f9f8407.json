{
  "abstract" : "Atomically initializes this reference if its current value is nil, then returns the initialized value. If this reference is already initialized, then `storeIfNil(_:)` discards its supplied argument and returns the current value without updating it.",
  "codeExamples" : [
    {
      "code" : "class Image {\n  let _histogram = AtomicLazyReference<Histogram>()\n\n  \/\/ This is safe to call concurrently from multiple threads.\n  var atomicLazyHistogram: Histogram {\n    if let histogram = _histogram.load() { return histogram }\n    \/\/ Note that code here may run concurrently on\n    \/\/ multiple threads, but only one of them will get to\n    \/\/ succeed setting the reference.\n    let histogram = ...\n    return _histogram.storeIfNil(histogram)\n  }\n}",
      "language" : "swift"
    }
  ],
  "contentHash" : "94cf398f1eed5a736bb7c3e8ec7f595aecaf6616ecd4ed12ef3c777009e64117",
  "crawledAt" : "2025-12-04T18:42:12Z",
  "declaration" : {
    "code" : "func storeIfNil(_ desired: consuming Instance) -> Instance",
    "language" : "swift"
  },
  "id" : "E319E6CB-FEC4-463C-98B2-065A303FAA82",
  "kind" : "method",
  "language" : "swift",
  "module" : "Synchronization",
  "overview" : "## Return Value\n\nThe value of `Instance` that was successfully stored within the lazy reference. This may or may not be the same value of `Instance` that was passed to this function.\n\n## Discussion\n\nThe following example demonstrates how this can be used to implement a thread-safe lazily initialized reference:",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "tvOS",
    "visionOS",
    "watchOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/Synchronization\/AtomicLazyReference\/storeIfNil(_:)\ncrawled: 2025-12-04T18:42:12Z\n---\n\n# storeIfNil(_:)\n\n**Instance Method**\n\nAtomically initializes this reference if its current value is nil, then returns the initialized value. If this reference is already initialized, then `storeIfNil(_:)` discards its supplied argument and returns the current value without updating it.\n\n## Declaration\n\n```swift\nfunc storeIfNil(_ desired: consuming Instance) -> Instance\n```\n\n## Parameters\n\n- **desired**: A value of `Instance` that we will attempt to store if the lazy reference is currently nil.\n\n## Return Value\n\nThe value of `Instance` that was successfully stored within the lazy reference. This may or may not be the same value of `Instance` that was passed to this function.\n\n## Discussion\n\nThe following example demonstrates how this can be used to implement a thread-safe lazily initialized reference:\n\n```swift\nclass Image {\n  let _histogram = AtomicLazyReference<Histogram>()\n\n  \/\/ This is safe to call concurrently from multiple threads.\n  var atomicLazyHistogram: Histogram {\n    if let histogram = _histogram.load() { return histogram }\n    \/\/ Note that code here may run concurrently on\n    \/\/ multiple threads, but only one of them will get to\n    \/\/ succeed setting the reference.\n    let histogram = ...\n    return _histogram.storeIfNil(histogram)\n  }\n}\n```\n\n\n\n",
  "sections" : [

  ],
  "source" : "appleJSON",
  "title" : "storeIfNil(_:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/Synchronization\/AtomicLazyReference\/storeIfNil(_:)"
}