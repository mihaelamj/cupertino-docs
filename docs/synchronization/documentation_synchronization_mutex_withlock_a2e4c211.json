{
  "abstract" : "Calls the given closure after acquiring the lock and then releases ownership.",
  "codeExamples" : [
    {
      "code" : "mutex.lock()\ndefer {\n  mutex.unlock()\n}\nreturn try body(&value)",
      "language" : "swift"
    }
  ],
  "contentHash" : "023171fcfff7b73a07ec30059d39d56c0e8192f921fee585d3a6bafdaf927330",
  "crawledAt" : "2025-12-04T18:54:25Z",
  "declaration" : {
    "code" : "borrowing func withLock<Result, E>(_ body: (inout sending Value) throws(E) -> sending Result) throws(E) -> sending Result where E : Error, Result : ~Copyable",
    "language" : "swift"
  },
  "id" : "D6C650DA-0B4E-4AD9-B375-566B21D0E576",
  "kind" : "method",
  "language" : "swift",
  "module" : "Synchronization",
  "overview" : "## Return Value\n\nThe return value, if any, of the `body` closure parameter.\n\n## Discussion\n\nThis method is equivalent to the following sequence of code:",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "tvOS",
    "visionOS",
    "watchOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/Synchronization\/Mutex\/withLock(_:)\ncrawled: 2025-12-04T18:54:25Z\n---\n\n# withLock(_:)\n\n**Instance Method**\n\nCalls the given closure after acquiring the lock and then releases ownership.\n\n## Declaration\n\n```swift\nborrowing func withLock<Result, E>(_ body: (inout sending Value) throws(E) -> sending Result) throws(E) -> sending Result where E : Error, Result : ~Copyable\n```\n\n## Parameters\n\n- **body**: A closure with a parameter of `Value` that has exclusive access to the value being stored within this mutex. This closure is considered the critical section as it will only be executed once the calling thread has acquired the lock.\n\n## Return Value\n\nThe return value, if any, of the `body` closure parameter.\n\n## Discussion\n\nThis method is equivalent to the following sequence of code:\n\n```swift\nmutex.lock()\ndefer {\n  mutex.unlock()\n}\nreturn try body(&value)\n```\n\n\n\n",
  "sections" : [

  ],
  "source" : "appleJSON",
  "title" : "withLock(_:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/Synchronization\/Mutex\/withLock(_:)"
}