{
  "abstract" : "Implement single sign-on for media-streaming apps by managing a sign-in token on a person’s Apple Account.",
  "codeExamples" : [
    {
      "code" : "\/\/ Access the static shared user account manager. \nlet accountManager = VSUserAccountManager.shared\nlet autoSignInToken = try? await accountManager.autoSignInToken\n\nif autoSignInToken?.value == nil || autoSignInToken?.authorization == .notDetermined {      \n    \/\/ Prompt the person to sign in. ",
      "language" : "swift"
    },
    {
      "code" : "\/\/ Media streaming service sign-in success:  \nif case .success = newSignInResult {\n    \/\/ Prompt to opt-in to Automatic Sign-In.\n    if let context = try? await accountManager.requestAutoSignInAuthorization() {\n        \/\/ Generate the token. \n    }\n}",
      "language" : "swift"
    },
    {
      "code" : "let newToken = await generateNewAutoSignInToken() \/\/ Your implementation.\ntry? await accountManager.updateAutoSignInToken(newToken, updateContext: context) ",
      "language" : "swift"
    },
    {
      "code" : "let accountManager = VSUserAccountManager.shared\nlet autoSignInToken = try? await accountManager.autoSignInToken\nif let token = autoSignInToken?.value {\n    \/\/ Consume the token to bypass the sign-in screen, if appropriate.\n}",
      "language" : "swift"
    },
    {
      "code" : "https:\/\/api.storekit.itunes.apple.com\/account\/v1\/autoSignIn\/delete",
      "language" : "other"
    },
    {
      "code" : "https:\/\/api.storekit.itunes.apple.com\/account\/v1\/autoSignIn\/update",
      "language" : "other"
    }
  ],
  "contentHash" : "6a260df0c4b697f2f38b2edcfce1bf1d1ff9d0fc27b8a3d58eb01be15c0be60b",
  "crawledAt" : "2025-12-03T05:11:58Z",
  "id" : "FF43D3AC-8842-445D-9837-CE31A51056B1",
  "kind" : "article",
  "language" : "swift",
  "module" : "Video Subscriber Account",
  "overview" : "## Overview\n\nThe Automatic Sign-In feature offers a single sign-on experience for media-streaming apps that have the [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Entitlements\/com.apple.smoot.subscriptionservice] entitlement. The first time a person signs in to your media streaming service, your app prompts them to opt in to Automatic Sign-In. If they agree, your app generates a *string value* token. You provide the token to the framework, which stores it on the person’s Apple Account to sign the person in across all of their devices. When your app launches again, the framework provides the token if it exists on the person’s Apple Account, which your app uses to bypass the sign-in prompt and give the person quick access to the media streaming features in your app.\n\nIn addition, the feature creates a single sign-on experience when a person:\n\nOnly your app interprets the value to authenticate the person, for example, by ensuring it represents an account with a valid subscription. The framework only manages *token storage* for your app. In addition to storing the token value on the person’s Apple Account, the framework also records the token *authorization*, that is, the choice a person makes on the prompt. If the person dismisses the prompt without approving, your app proceeds to enable streaming without creating a token value.\n\n## Generate an Automatic Sign-In token\n\nWhen your app launches with the person signed out, check for an Automatic Sign-In token ([doc:\/\/com.apple.videosubscriberaccount\/documentation\/VideoSubscriberAccount\/VSUserAccountManager\/autoSignInToken-swift.property]) to use for signing them in.\n\nIf the token is undefined ([doc:\/\/com.apple.videosubscriberaccount\/documentation\/VideoSubscriberAccount\/VSUserAccountManager\/AutoSignInToken-swift.struct\/value] is `nil` or [doc:\/\/com.apple.videosubscriberaccount\/documentation\/VideoSubscriberAccount\/VSUserAccountManager\/AutoSignInToken-swift.struct\/authorization] is  [doc:\/\/com.apple.videosubscriberaccount\/documentation\/VideoSubscriberAccount\/VSUserAccountManager\/AutoSignInAuthorization\/notDetermined]), prompt the person to sign in to your media streaming service:\n\nAfter the person signs in successfully, prompt them to opt in to Automatic Sign-In. Call [doc:\/\/com.apple.videosubscriberaccount\/documentation\/VideoSubscriberAccount\/VSUserAccountManager\/requestAutoSignInAuthorization()] to present a sheet that asks for their approval:\n\nIf the person dismisses the prompt without approving, the system leaves the [doc:\/\/com.apple.videosubscriberaccount\/documentation\/VideoSubscriberAccount\/VSUserAccountManager\/AutoSignInTokenUpdateContext\/authorization] status [doc:\/\/com.apple.videosubscriberaccount\/documentation\/VideoSubscriberAccount\/VSUserAccountManager\/AutoSignInAuthorization\/notDetermined] and the framework doesn’t prompt them again until the app calls [doc:\/\/com.apple.videosubscriberaccount\/documentation\/VideoSubscriberAccount\/VSUserAccountManager\/requestAutoSignInAuthorization()] once more.\n\nIf the person approves the prompt, the method returns an [doc:\/\/com.apple.videosubscriberaccount\/documentation\/VideoSubscriberAccount\/VSUserAccountManager\/AutoSignInTokenUpdateContext] instance with an [doc:\/\/com.apple.videosubscriberaccount\/documentation\/VideoSubscriberAccount\/VSUserAccountManager\/AutoSignInTokenUpdateContext\/authorization] set to [doc:\/\/com.apple.videosubscriberaccount\/documentation\/VideoSubscriberAccount\/VSUserAccountManager\/AutoSignInAuthorization\/granted]. Generate a token [doc:\/\/com.apple.videosubscriberaccount\/documentation\/VideoSubscriberAccount\/VSUserAccountManager\/AutoSignInToken-swift.struct\/value] and pass it to the framework using [doc:\/\/com.apple.videosubscriberaccount\/documentation\/VideoSubscriberAccount\/VSUserAccountManager\/updateAutoSignInToken(_:updateContext:)]:\n\nThe system stores the token value and its authorization status to the person’s Apple Account, where the framework can find it from your app across the their other devices.\n\n## Sign in with an Automatic Sign-In token\n\nIf your app launches signed out but the Automatic Sign-In token ([doc:\/\/com.apple.videosubscriberaccount\/documentation\/VideoSubscriberAccount\/VSUserAccountManager\/autoSignInToken-swift.property]) has a valid [doc:\/\/com.apple.videosubscriberaccount\/documentation\/VideoSubscriberAccount\/VSUserAccountManager\/AutoSignInToken-swift.struct\/value], consume the token and sign them in:\n\n## Manage the token on device or from a web server\n\nYou might revoke an Automatic Sign-In token if:\n\nTo revoke an Automatic Sign-In token, call [doc:\/\/com.apple.videosubscriberaccount\/documentation\/VideoSubscriberAccount\/VSUserAccountManager\/deleteAutoSignInToken()], and the framework sets the token:\n\nThe [doc:\/\/com.apple.videosubscriberaccount\/documentation\/AutomaticSignInAPI] enables you to manage tokens on your web sever. For example, you might allow the person to opt out of Automatic Sign-In from your website.\n\nTo remove the current token value from your web server, call the [doc:\/\/com.apple.videosubscriberaccount\/documentation\/AutomaticSignInAPI\/Delete-this-token-for-all-associated-users] endpoint:\n\nIn addition, you can update the current token value from your web server by calling [doc:\/\/com.apple.videosubscriberaccount\/documentation\/AutomaticSignInAPI\/Update-this-token-for-all-associated-users]:",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/videosubscriberaccount\/signing-people-in-to-media-apps-automatically\ncrawled: 2025-12-03T05:11:58Z\n---\n\n# Signing people in to their media accounts automatically\n\n**Article**\n\nImplement single sign-on for media-streaming apps by managing a sign-in token on a person’s Apple Account.\n\n## Overview\n\nThe Automatic Sign-In feature offers a single sign-on experience for media-streaming apps that have the [doc:\/\/com.apple.documentation\/documentation\/BundleResources\/Entitlements\/com.apple.smoot.subscriptionservice] entitlement. The first time a person signs in to your media streaming service, your app prompts them to opt in to Automatic Sign-In. If they agree, your app generates a *string value* token. You provide the token to the framework, which stores it on the person’s Apple Account to sign the person in across all of their devices. When your app launches again, the framework provides the token if it exists on the person’s Apple Account, which your app uses to bypass the sign-in prompt and give the person quick access to the media streaming features in your app.\n\nIn addition, the feature creates a single sign-on experience when a person:\n\n- Acquires a new Apple TV, iPhone, or iPad and restores app purchases\n- Downloads your media-streaming app later on another device\n\nOnly your app interprets the value to authenticate the person, for example, by ensuring it represents an account with a valid subscription. The framework only manages *token storage* for your app. In addition to storing the token value on the person’s Apple Account, the framework also records the token *authorization*, that is, the choice a person makes on the prompt. If the person dismisses the prompt without approving, your app proceeds to enable streaming without creating a token value.\n\n\n\n## Generate an Automatic Sign-In token\n\nWhen your app launches with the person signed out, check for an Automatic Sign-In token ([doc:\/\/com.apple.videosubscriberaccount\/documentation\/VideoSubscriberAccount\/VSUserAccountManager\/autoSignInToken-swift.property]) to use for signing them in.\n\nIf the token is undefined ([doc:\/\/com.apple.videosubscriberaccount\/documentation\/VideoSubscriberAccount\/VSUserAccountManager\/AutoSignInToken-swift.struct\/value] is `nil` or [doc:\/\/com.apple.videosubscriberaccount\/documentation\/VideoSubscriberAccount\/VSUserAccountManager\/AutoSignInToken-swift.struct\/authorization] is  [doc:\/\/com.apple.videosubscriberaccount\/documentation\/VideoSubscriberAccount\/VSUserAccountManager\/AutoSignInAuthorization\/notDetermined]), prompt the person to sign in to your media streaming service:\n\n```swift\n\/\/ Access the static shared user account manager. \nlet accountManager = VSUserAccountManager.shared\nlet autoSignInToken = try? await accountManager.autoSignInToken\n\nif autoSignInToken?.value == nil || autoSignInToken?.authorization == .notDetermined {      \n    \/\/ Prompt the person to sign in. \n```\n\nAfter the person signs in successfully, prompt them to opt in to Automatic Sign-In. Call [doc:\/\/com.apple.videosubscriberaccount\/documentation\/VideoSubscriberAccount\/VSUserAccountManager\/requestAutoSignInAuthorization()] to present a sheet that asks for their approval:\n\n```swift\n\/\/ Media streaming service sign-in success:  \nif case .success = newSignInResult {\n    \/\/ Prompt to opt-in to Automatic Sign-In.\n    if let context = try? await accountManager.requestAutoSignInAuthorization() {\n        \/\/ Generate the token. \n    }\n}\n```\n\nIf the person dismisses the prompt without approving, the system leaves the [doc:\/\/com.apple.videosubscriberaccount\/documentation\/VideoSubscriberAccount\/VSUserAccountManager\/AutoSignInTokenUpdateContext\/authorization] status [doc:\/\/com.apple.videosubscriberaccount\/documentation\/VideoSubscriberAccount\/VSUserAccountManager\/AutoSignInAuthorization\/notDetermined] and the framework doesn’t prompt them again until the app calls [doc:\/\/com.apple.videosubscriberaccount\/documentation\/VideoSubscriberAccount\/VSUserAccountManager\/requestAutoSignInAuthorization()] once more.\n\nIf the person approves the prompt, the method returns an [doc:\/\/com.apple.videosubscriberaccount\/documentation\/VideoSubscriberAccount\/VSUserAccountManager\/AutoSignInTokenUpdateContext] instance with an [doc:\/\/com.apple.videosubscriberaccount\/documentation\/VideoSubscriberAccount\/VSUserAccountManager\/AutoSignInTokenUpdateContext\/authorization] set to [doc:\/\/com.apple.videosubscriberaccount\/documentation\/VideoSubscriberAccount\/VSUserAccountManager\/AutoSignInAuthorization\/granted]. Generate a token [doc:\/\/com.apple.videosubscriberaccount\/documentation\/VideoSubscriberAccount\/VSUserAccountManager\/AutoSignInToken-swift.struct\/value] and pass it to the framework using [doc:\/\/com.apple.videosubscriberaccount\/documentation\/VideoSubscriberAccount\/VSUserAccountManager\/updateAutoSignInToken(_:updateContext:)]:\n\n```swift\nlet newToken = await generateNewAutoSignInToken() \/\/ Your implementation.\ntry? await accountManager.updateAutoSignInToken(newToken, updateContext: context) \n```\n\nThe system stores the token value and its authorization status to the person’s Apple Account, where the framework can find it from your app across the their other devices.\n\n## Sign in with an Automatic Sign-In token\n\nIf your app launches signed out but the Automatic Sign-In token ([doc:\/\/com.apple.videosubscriberaccount\/documentation\/VideoSubscriberAccount\/VSUserAccountManager\/autoSignInToken-swift.property]) has a valid [doc:\/\/com.apple.videosubscriberaccount\/documentation\/VideoSubscriberAccount\/VSUserAccountManager\/AutoSignInToken-swift.struct\/value], consume the token and sign them in:\n\n```swift\nlet accountManager = VSUserAccountManager.shared\nlet autoSignInToken = try? await accountManager.autoSignInToken\nif let token = autoSignInToken?.value {\n    \/\/ Consume the token to bypass the sign-in screen, if appropriate.\n}\n```\n\n\n\n## Manage the token on device or from a web server\n\nYou might revoke an Automatic Sign-In token if:\n\n- Your app provides its own UI that lets the person opt out of Automatic Sign-In.\n- The person changes their password and wants to sign out from all of their devices.\n- Your app implements conditions to invalidate a token, such as if a person flags a specific log in as unauthorized.\n\nTo revoke an Automatic Sign-In token, call [doc:\/\/com.apple.videosubscriberaccount\/documentation\/VideoSubscriberAccount\/VSUserAccountManager\/deleteAutoSignInToken()], and the framework sets the token:\n\n- [doc:\/\/com.apple.videosubscriberaccount\/documentation\/VideoSubscriberAccount\/VSUserAccountManager\/AutoSignInToken-swift.struct\/value] to `nil`\n- [doc:\/\/com.apple.videosubscriberaccount\/documentation\/VideoSubscriberAccount\/VSUserAccountManager\/AutoSignInToken-swift.struct\/authorization] to [doc:\/\/com.apple.videosubscriberaccount\/documentation\/VideoSubscriberAccount\/VSUserAccountManager\/AutoSignInAuthorization\/notDetermined].\n\nThe [doc:\/\/com.apple.videosubscriberaccount\/documentation\/AutomaticSignInAPI] enables you to manage tokens on your web sever. For example, you might allow the person to opt out of Automatic Sign-In from your website.\n\nTo remove the current token value from your web server, call the [doc:\/\/com.apple.videosubscriberaccount\/documentation\/AutomaticSignInAPI\/Delete-this-token-for-all-associated-users] endpoint:\n\n```other\nhttps:\/\/api.storekit.itunes.apple.com\/account\/v1\/autoSignIn\/delete\n```\n\nIn addition, you can update the current token value from your web server by calling [doc:\/\/com.apple.videosubscriberaccount\/documentation\/AutomaticSignInAPI\/Update-this-token-for-all-associated-users]:\n\n```other\nhttps:\/\/api.storekit.itunes.apple.com\/account\/v1\/autoSignIn\/update\n```\n\n## User account management\n\n- **VSUserAccountManager**: The object that coordinates your app’s user account actions.\n- **VSUserAccount**: An object that represents a user’s account.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "The object that coordinates your app’s user account actions.",
          "name" : "VSUserAccountManager",
          "url" : "https:\/\/developer.apple.com\/documentation\/VideoSubscriberAccount\/VSUserAccountManager"
        },
        {
          "description" : "An object that represents a user’s account.",
          "name" : "VSUserAccount",
          "url" : "https:\/\/developer.apple.com\/documentation\/VideoSubscriberAccount\/VSUserAccount-swift.struct"
        }
      ],
      "title" : "User account management"
    }
  ],
  "source" : "appleJSON",
  "title" : "Signing people in to their media accounts automatically",
  "url" : "https:\/\/developer.apple.com\/documentation\/videosubscriberaccount\/signing-people-in-to-media-apps-automatically"
}