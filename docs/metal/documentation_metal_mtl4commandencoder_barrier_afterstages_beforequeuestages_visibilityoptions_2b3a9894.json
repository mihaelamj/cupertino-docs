{
  "abstract" : "Encodes a producer barrier on work committed to the same command queue.",
  "codeExamples" : [

  ],
  "contentHash" : "0f6bbd8f30532d1bbc550c2d95dfd8522146bf08a241454e9cdfe4fab11518eb",
  "crawledAt" : "2025-12-04T23:35:23Z",
  "declaration" : {
    "code" : "func barrier(afterStages: MTLStages, beforeQueueStages: MTLStages, visibilityOptions: MTL4VisibilityOptions = [ .device ])",
    "language" : "swift"
  },
  "id" : "509EFC20-74D8-42DA-8970-93D190CAF15A",
  "kind" : "method",
  "language" : "swift",
  "module" : "Metal",
  "overview" : "## Discussion\n\nThis method encodes a barrier that guarantees that any work you encode using *subsequent command encoders*, corresponding to `beforeQueueStages`, don’t begin until all commands you previously encode in the current encoder (and prior encoders), corresponding to `afterStages`, complete.\n\nWhen calling this method, you can pass any [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLStages] to parameters `afterStages` and `beforeQueueStages`, even stages that don’t relate to the current or prior command encoders.",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "tvOS",
    "visionOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/Metal\/MTL4CommandEncoder\/barrier(afterStages:beforeQueueStages:visibilityOptions:)\ncrawled: 2025-12-04T23:35:23Z\n---\n\n# barrier(afterStages:beforeQueueStages:visibilityOptions:)\n\n**Instance Method**\n\nEncodes a producer barrier on work committed to the same command queue.\n\n## Declaration\n\n```swift\nfunc barrier(afterStages: MTLStages, beforeQueueStages: MTLStages, visibilityOptions: MTL4VisibilityOptions = [ .device ])\n```\n\n## Parameters\n\n- **afterStages**: [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLStages] mask that represents the stages of work to wait for. This argument applies to work corresponding to these stages you encode in the current command encoder prior to this barrier command.\n- **beforeQueueStages**: [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLStages] mask that represents the stages of work that need to wait. This argument applies to subsequent encoders and not to work in the current command encoder.\n- **visibilityOptions**: [doc:\/\/com.apple.metal\/documentation\/Metal\/MTL4VisibilityOptions] of the barrier, controlling cache flush behavior.\n\n## Discussion\n\nThis method encodes a barrier that guarantees that any work you encode using *subsequent command encoders*, corresponding to `beforeQueueStages`, don’t begin until all commands you previously encode in the current encoder (and prior encoders), corresponding to `afterStages`, complete.\n\nWhen calling this method, you can pass any [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLStages] to parameters `afterStages` and `beforeQueueStages`, even stages that don’t relate to the current or prior command encoders.\n\n",
  "sections" : [

  ],
  "source" : "appleJSON",
  "title" : "barrier(afterStages:beforeQueueStages:visibilityOptions:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTL4CommandEncoder\/barrier(afterStages:beforeQueueStages:visibilityOptions:)"
}