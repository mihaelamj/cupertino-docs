{
  "abstract" : "Optimize a texture’s data to improve GPU or CPU access.",
  "codeExamples" : [

  ],
  "contentHash" : "813c0660651a2f1950ff725a265bb3ac9b5efcd99b83bec7459b8699e27a66e2",
  "crawledAt" : "2025-12-04T22:36:04Z",
  "id" : "EB81CCD0-35E8-4893-9496-57EECA34B49E",
  "kind" : "article",
  "language" : "swift",
  "module" : "Metal",
  "overview" : "## Overview\n\nBy default, Metal attempts to optimize a texture’s data for both GPU and CPU memory operations based on the texture’s storage mode and usage options. You can improve a texture’s performance on the GPU or CPU by optimizing the texture’s data for either use case. You can also opt out of optimization altogether. Optimizing a texture’s performance for one use can decrease that texture’s performance for another.\n\nBefore optimizing texture data, carefully consider the storage modes and usage options for your textures. For guidance on resource storage modes, see [doc:\/\/com.apple.metal\/documentation\/Metal\/setting-resource-storage-modes]. For guidance on texture usage options, see [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLTextureUsage].\n\n### Optimize texture data for GPU access\n\nBy default, Metal attempts to optimize texture data for GPU access if it meets any of these conditions:\n\nIf the texture doesn’t meet any of these conditions, you can optimize your texture data explicitly. After you create your texture and populate its contents, encode and commit an [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLBlitCommandEncoder\/optimizeContentsForGPUAccess(texture:)] or [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLBlitCommandEncoder\/optimizeContentsForGPUAccess(texture:slice:level:)] command.\n\nTo optimize a drawable from an [doc:\/\/com.apple.documentation\/documentation\/MetalKit\/MTKView] for GPU access, set the view’s [doc:\/\/com.apple.documentation\/documentation\/MetalKit\/MTKView\/framebufferOnly] property to [doc:\/\/com.apple.documentation\/documentation\/Swift\/true]. This property configures the texture exclusively as a render target and displayable resource.\n\n### Optimize texture data for CPU access\n\nBy default, Metal attempts to optimize texture data for CPU access if it meets both of these conditions:\n\nIf you don’t meet both of these conditions, you can optimize your texture data explicitly. After you create your texture and populate its contents, encode and commit an [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLBlitCommandEncoder\/optimizeContentsForCPUAccess(texture:)] or [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLBlitCommandEncoder\/optimizeContentsForCPUAccess(texture:slice:level:)] command.\n\n### Apply lossless compression to a texture on Apple GPUs\n\nLossless compression is a specific form of GPU optimization that Metal applies to a texture without discarding any of its data. Memory operations with textures that apply lossless compression typically need less memory bandwidth than equivalent memory operations with the same texture without compression. However, the overall memory footprint of a texture with lossless compression might increase slightly because it needs to store compression metadata. On devices that support [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLGPUFamily\/apple5], Metal attempts to apply lossless compression to a texture if it meets the following conditions:\n\nAdditionally, if you meet both of the following conditions, you can optimize your texture data explicitly so Metal can apply lossless compression:\n\nFor guidance, see [doc:\/\/com.apple.metal\/documentation\/Metal\/optimizing-texture-data#Optimize-texture-data-for-GPU-access].\n\n### Opt out of texture data optimization for GPU access\n\nIn some cases, your texture data may benefit from opting out of optimization for GPU access, for example, when optimization regresses your app’s performance (particularly for render target read-backs on the CPU).\n\nFirst, create a texture descriptor and set its [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLTextureDescriptor\/allowGPUOptimizedContents] property to [doc:\/\/com.apple.documentation\/documentation\/Swift\/false].\n\nThen, set the texture descriptor’s [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLTextureDescriptor\/storageMode] property to [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLStorageMode\/shared] or [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLStorageMode\/managed].\n\nFinally, create a texture from the texture descriptor.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/metal\/optimizing-texture-data\ncrawled: 2025-12-04T22:36:04Z\n---\n\n# Optimizing texture data\n\n**Article**\n\nOptimize a texture’s data to improve GPU or CPU access.\n\n## Overview\n\nBy default, Metal attempts to optimize a texture’s data for both GPU and CPU memory operations based on the texture’s storage mode and usage options. You can improve a texture’s performance on the GPU or CPU by optimizing the texture’s data for either use case. You can also opt out of optimization altogether. Optimizing a texture’s performance for one use can decrease that texture’s performance for another.\n\nBefore optimizing texture data, carefully consider the storage modes and usage options for your textures. For guidance on resource storage modes, see [doc:\/\/com.apple.metal\/documentation\/Metal\/setting-resource-storage-modes]. For guidance on texture usage options, see [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLTextureUsage].\n\n\n\n### Optimize texture data for GPU access\n\nBy default, Metal attempts to optimize texture data for GPU access if it meets any of these conditions:\n\n- You create the texture with an [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLStorageMode\/private] mode.\n- You create the texture with an [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLTextureUsage\/renderTarget] option.\n\nIf the texture doesn’t meet any of these conditions, you can optimize your texture data explicitly. After you create your texture and populate its contents, encode and commit an [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLBlitCommandEncoder\/optimizeContentsForGPUAccess(texture:)] or [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLBlitCommandEncoder\/optimizeContentsForGPUAccess(texture:slice:level:)] command.\n\n\n\nTo optimize a drawable from an [doc:\/\/com.apple.documentation\/documentation\/MetalKit\/MTKView] for GPU access, set the view’s [doc:\/\/com.apple.documentation\/documentation\/MetalKit\/MTKView\/framebufferOnly] property to [doc:\/\/com.apple.documentation\/documentation\/Swift\/true]. This property configures the texture exclusively as a render target and displayable resource.\n\n### Optimize texture data for CPU access\n\nBy default, Metal attempts to optimize texture data for CPU access if it meets both of these conditions:\n\n- You create the texture with an [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLStorageMode\/shared] or [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLStorageMode\/managed] mode.\n- You write to the texture with the [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLTexture\/replace(region:mipmapLevel:withBytes:bytesPerRow:)] or [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLTexture\/replace(region:mipmapLevel:slice:withBytes:bytesPerRow:bytesPerImage:)] method.\n\nIf you don’t meet both of these conditions, you can optimize your texture data explicitly. After you create your texture and populate its contents, encode and commit an [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLBlitCommandEncoder\/optimizeContentsForCPUAccess(texture:)] or [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLBlitCommandEncoder\/optimizeContentsForCPUAccess(texture:slice:level:)] command.\n\n\n\n### Apply lossless compression to a texture on Apple GPUs\n\nLossless compression is a specific form of GPU optimization that Metal applies to a texture without discarding any of its data. Memory operations with textures that apply lossless compression typically need less memory bandwidth than equivalent memory operations with the same texture without compression. However, the overall memory footprint of a texture with lossless compression might increase slightly because it needs to store compression metadata. On devices that support [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLGPUFamily\/apple5], Metal attempts to apply lossless compression to a texture if it meets the following conditions:\n\n- The texture’s pixel format doesn’t apply block-compression, such as PVRTC, ASTC, or BC.\n- The texture’s usage options don’t include [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLTextureUsage\/unknown], [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLTextureUsage\/shaderWrite], or [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLTextureUsage\/pixelFormatView].\n- The texture doesn’t use any underlying [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLBuffer] instance, such as a texture that comes from a buffer’s [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLBuffer\/makeTexture(descriptor:offset:bytesPerRow:)] method.\n\nAdditionally, if you meet both of the following conditions, you can optimize your texture data explicitly so Metal can apply lossless compression:\n\n- You create the texture with an [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLStorageMode\/shared] mode.\n- You write to the texture with the [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLTexture\/replace(region:mipmapLevel:withBytes:bytesPerRow:)] or [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLTexture\/replace(region:mipmapLevel:slice:withBytes:bytesPerRow:bytesPerImage:)] method.\n\nFor guidance, see [doc:\/\/com.apple.metal\/documentation\/Metal\/optimizing-texture-data#Optimize-texture-data-for-GPU-access].\n\n### Opt out of texture data optimization for GPU access\n\nIn some cases, your texture data may benefit from opting out of optimization for GPU access, for example, when optimization regresses your app’s performance (particularly for render target read-backs on the CPU).\n\nFirst, create a texture descriptor and set its [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLTextureDescriptor\/allowGPUOptimizedContents] property to [doc:\/\/com.apple.documentation\/documentation\/Swift\/false].\n\n\n\nThen, set the texture descriptor’s [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLTextureDescriptor\/storageMode] property to [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLStorageMode\/shared] or [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLStorageMode\/managed].\n\n\n\nFinally, create a texture from the texture descriptor.\n\n\n\n## Texture basics\n\n- **Understanding color-renderable pixel format sizes**: Know the size limits of color render targets in Apple GPUs based on the target’s pixel format.\n- **MTLTexture**: A resource that holds formatted image data.\n- **MTLTextureCompressionType**\n- **MTLTextureDescriptor**: An instance that you use to configure new Metal texture instances.\n- **MTKTextureLoader**: An object that creates textures from existing data in common image formats.\n- **MTLSharedTextureHandle**: A texture handle that can be shared across process address space boundaries.\n- **MTLPixelFormat**: The data formats that describe the organization and characteristics of individual pixels in a texture.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Know the size limits of color render targets in Apple GPUs based on the target’s pixel format.",
          "name" : "Understanding color-renderable pixel format sizes",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/understanding-color-renderable-pixel-format-sizes"
        },
        {
          "description" : "A resource that holds formatted image data.",
          "name" : "MTLTexture",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLTexture"
        },
        {
          "description" : "",
          "name" : "MTLTextureCompressionType",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLTextureCompressionType"
        },
        {
          "description" : "An instance that you use to configure new Metal texture instances.",
          "name" : "MTLTextureDescriptor",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLTextureDescriptor"
        },
        {
          "description" : "An object that creates textures from existing data in common image formats.",
          "name" : "MTKTextureLoader",
          "url" : "https:\/\/developer.apple.com\/documentation\/MetalKit\/MTKTextureLoader"
        },
        {
          "description" : "A texture handle that can be shared across process address space boundaries.",
          "name" : "MTLSharedTextureHandle",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLSharedTextureHandle"
        },
        {
          "description" : "The data formats that describe the organization and characteristics of individual pixels in a texture.",
          "name" : "MTLPixelFormat",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLPixelFormat"
        }
      ],
      "title" : "Texture basics"
    }
  ],
  "source" : "appleJSON",
  "title" : "Optimizing texture data",
  "url" : "https:\/\/developer.apple.com\/documentation\/metal\/optimizing-texture-data"
}