{
  "abstract" : "Use high-speed connections between GPUs to transfer data quickly.",
  "codeExamples" : [

  ],
  "contentHash" : "afa91826cf7c1c456dd1f246e3cae2860ca5465a1dfba0b98fd887de39961dbf",
  "crawledAt" : "2025-12-04T00:47:28Z",
  "id" : "EEDC9A6D-63A8-4D8B-96DC-428E14F92733",
  "kind" : "article",
  "language" : "swift",
  "module" : "Metal",
  "overview" : "## Overview\n\nIn macOS 10.15 and later, some Mac systems directly connect GPUs to each other, allowing you to quickly transfer data between them. These connections are not only faster, but they also avoid using the memory bus between the CPU and GPUs, leaving it available for other tasks. If your app uses multiple GPUs, test to see if they’re connected, and when they are, use the transfer mechanism described here.\n\nWhen GPUs are connected to each other, they’re said to be in the same *peer group*. You determine whether a GPU is in a peer group by reading the device instance’s [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLDevice\/peerGroupID] property. A nonzero value indicates that the GPU is in a peer group.\n\nGPUs in the same peer group share the same peer group ID.\n\nYou can get the list of all devices associated with a peer group by filtering on this ID.\n\n### Copy resources to the GPU that needs to access them\n\nIn Metal, resources are created by device instances, and are always associated with the device instance that created them. Peer groups don’t change that association. If a resource is associated with a device instance, and you want to access it on another device instance, you need to copy the data to a resource associated with the second device instance.\n\nTo copy data between members of a peer group, make a *remote view* on the second GPU that’s connected to the resource you want to copy. A remote view is a resource instance that contains no storage of its own; it references the storage on the original GPU. You can only use remote views to copy data; using them in other Metal commands results in an error.\n\n### Create a remote view of a resource\n\nTo create a remote view of a resource, the device instance you make the resource view on needs to share the same [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLDevice\/peerGroupID] as the device instance that created the resource. In addition, the resource needs to use the [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLStorageMode\/private] storage mode or be backed by an [doc:\/\/com.apple.documentation\/documentation\/IOSurface\/IOSurface].\n\nTo create a buffer view, call the [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLBuffer\/makeRemoteBufferView(_:)] method:\n\nSimilarly, to create a texture view, call the [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLTexture\/makeRemoteTextureView(_:)] method.\n\n### Copy data between connected GPUs\n\nCreate an [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLBlitCommandEncoder] and encode a copy command. The source for this copy command is the remote view instance:\n\nAs shown in the following illustration, there are three resource instances: the original resource that contains the data, a remote view that references the data, and a resource that receives the data.\n\n\n\n### Synchronize access to resources\n\nBlit commands used in peer-to-peer transfers follow all of the usual synchronization rules on the GPU they’re performed on. However, they don’t automatically synchronize with any commands running on the source GPU. If you encode commands that modify the source resource, ensure that those commands are complete before executing the blit command to transfer the data to the other GPU. This is the same as what you do when transferring resources between GPUs through system memory.\n\nTo synchronize commands between different device instances, use shared events. See [doc:\/\/com.apple.metal\/documentation\/Metal\/synchronizing-events-across-multiple-devices-or-processes] and [doc:\/\/com.apple.metal\/documentation\/Metal\/implementing-a-multistage-image-filter-using-heaps-and-events].",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/Metal\/transferring-data-between-connected-gpus\ncrawled: 2025-12-04T00:47:28Z\n---\n\n# Transferring data between connected GPUs\n\n**Article**\n\nUse high-speed connections between GPUs to transfer data quickly.\n\n## Overview\n\nIn macOS 10.15 and later, some Mac systems directly connect GPUs to each other, allowing you to quickly transfer data between them. These connections are not only faster, but they also avoid using the memory bus between the CPU and GPUs, leaving it available for other tasks. If your app uses multiple GPUs, test to see if they’re connected, and when they are, use the transfer mechanism described here.\n\nWhen GPUs are connected to each other, they’re said to be in the same *peer group*. You determine whether a GPU is in a peer group by reading the device instance’s [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLDevice\/peerGroupID] property. A nonzero value indicates that the GPU is in a peer group.\n\n\n\nGPUs in the same peer group share the same peer group ID.\n\n\n\nYou can get the list of all devices associated with a peer group by filtering on this ID.\n\n\n\n### Copy resources to the GPU that needs to access them\n\nIn Metal, resources are created by device instances, and are always associated with the device instance that created them. Peer groups don’t change that association. If a resource is associated with a device instance, and you want to access it on another device instance, you need to copy the data to a resource associated with the second device instance.\n\nTo copy data between members of a peer group, make a *remote view* on the second GPU that’s connected to the resource you want to copy. A remote view is a resource instance that contains no storage of its own; it references the storage on the original GPU. You can only use remote views to copy data; using them in other Metal commands results in an error.\n\n### Create a remote view of a resource\n\nTo create a remote view of a resource, the device instance you make the resource view on needs to share the same [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLDevice\/peerGroupID] as the device instance that created the resource. In addition, the resource needs to use the [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLStorageMode\/private] storage mode or be backed by an [doc:\/\/com.apple.documentation\/documentation\/IOSurface\/IOSurface].\n\nTo create a buffer view, call the [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLBuffer\/makeRemoteBufferView(_:)] method:\n\n\n\nSimilarly, to create a texture view, call the [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLTexture\/makeRemoteTextureView(_:)] method.\n\n\n\n### Copy data between connected GPUs\n\nCreate an [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLBlitCommandEncoder] and encode a copy command. The source for this copy command is the remote view instance:\n\n\n\nAs shown in the following illustration, there are three resource instances: the original resource that contains the data, a remote view that references the data, and a resource that receives the data.\n\n\n\n### Synchronize access to resources\n\nBlit commands used in peer-to-peer transfers follow all of the usual synchronization rules on the GPU they’re performed on. However, they don’t automatically synchronize with any commands running on the source GPU. If you encode commands that modify the source resource, ensure that those commands are complete before executing the blit command to transfer the data to the other GPU. This is the same as what you do when transferring resources between GPUs through system memory.\n\nTo synchronize commands between different device instances, use shared events. See [doc:\/\/com.apple.metal\/documentation\/Metal\/synchronizing-events-across-multiple-devices-or-processes] and [doc:\/\/com.apple.metal\/documentation\/Metal\/implementing-a-multistage-image-filter-using-heaps-and-events].\n\n## Resource management\n\n- **Setting resource storage modes**: Set a storage mode that defines the memory location and access permissions of a resource.\n- **Choosing a resource storage mode for Apple GPUs**: Select an appropriate storage mode for your textures and buffers on Apple GPUs.\n- **Choosing a resource storage mode for Intel and AMD GPUs**: Select an appropriate storage mode for your textures and buffers on AMD and Intel GPUs.\n- **Copying data to a private resource**: Use a blit command encoder to copy buffer or texture data to a private resource.\n- **Synchronizing a managed resource in macOS**: Manually synchronize memory for a Metal resource in apps.\n- **Reducing the memory footprint of Metal apps**: Learn best practices for using memory efficiently in iOS and tvOS.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Set a storage mode that defines the memory location and access permissions of a resource.",
          "name" : "Setting resource storage modes",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/setting-resource-storage-modes"
        },
        {
          "description" : "Select an appropriate storage mode for your textures and buffers on Apple GPUs.",
          "name" : "Choosing a resource storage mode for Apple GPUs",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/choosing-a-resource-storage-mode-for-apple-gpus"
        },
        {
          "description" : "Select an appropriate storage mode for your textures and buffers on AMD and Intel GPUs.",
          "name" : "Choosing a resource storage mode for Intel and AMD GPUs",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/choosing-a-resource-storage-mode-for-intel-and-amd-gpus"
        },
        {
          "description" : "Use a blit command encoder to copy buffer or texture data to a private resource.",
          "name" : "Copying data to a private resource",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/copying-data-to-a-private-resource"
        },
        {
          "description" : "Manually synchronize memory for a Metal resource in apps.",
          "name" : "Synchronizing a managed resource in macOS",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/synchronizing-a-managed-resource-in-macos"
        },
        {
          "description" : "Learn best practices for using memory efficiently in iOS and tvOS.",
          "name" : "Reducing the memory footprint of Metal apps",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/reducing-the-memory-footprint-of-metal-apps"
        }
      ],
      "title" : "Resource management"
    }
  ],
  "source" : "appleJSON",
  "title" : "Transferring data between connected GPUs",
  "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/transferring-data-between-connected-gpus"
}