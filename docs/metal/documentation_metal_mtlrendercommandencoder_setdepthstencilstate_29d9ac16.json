{
  "abstract" : "Configures the combined depth and stencil state.",
  "codeExamples" : [

  ],
  "contentHash" : "9df1d5d2df41f32fa3957ce5e71a1074df4b8cc4b0b6d337b73c1a5c08f1b656",
  "crawledAt" : "2025-12-06T11:07:29Z",
  "declaration" : {
    "code" : "func setDepthStencilState(_ depthStencilState: (any MTLDepthStencilState)?)",
    "language" : "swift"
  },
  "id" : "67FBAD0C-41FB-40E8-A7F9-0203163C9FEA",
  "kind" : "method",
  "language" : "swift",
  "module" : "Metal",
  "overview" : "## Discussion\n\nThis method changes the combined depth and stencil state for the render command encoder that’s compatible with its depth and stencil attachment configuration. For example, if the new state enables depth testing or depth writing, the render pass needs to have a depth attachment. Similarly, if the new state enables stencil testing or stencil writing, the render pass’s stencil needs to have a stencil attachment. You create depth and stencil attachments for a render pass by assigning the [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLRenderPassDescriptor\/depthAttachment] and [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLRenderPassDescriptor\/stencilAttachment] properties of the [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLRenderPassDescriptor] instance that creates it.\n\nPass `nil` to clear the state from the previous call, which restores a state that’s equivalent to the default values of an [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLDepthStencilDescriptor] instance’s properties.",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "tvOS",
    "visionOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/Metal\/MTLRenderCommandEncoder\/setDepthStencilState(_:)\ncrawled: 2025-12-06T11:07:29Z\n---\n\n# setDepthStencilState(_:)\n\n**Instance Method**\n\nConfigures the combined depth and stencil state.\n\n## Declaration\n\n```swift\nfunc setDepthStencilState(_ depthStencilState: (any MTLDepthStencilState)?)\n```\n\n## Parameters\n\n- **depthStencilState**: An instance that conforms to the [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLDepthStencilState] protocol.\n\n## Discussion\n\nThis method changes the combined depth and stencil state for the render command encoder that’s compatible with its depth and stencil attachment configuration. For example, if the new state enables depth testing or depth writing, the render pass needs to have a depth attachment. Similarly, if the new state enables stencil testing or stencil writing, the render pass’s stencil needs to have a stencil attachment. You create depth and stencil attachments for a render pass by assigning the [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLRenderPassDescriptor\/depthAttachment] and [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLRenderPassDescriptor\/stencilAttachment] properties of the [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLRenderPassDescriptor] instance that creates it.\n\nPass `nil` to clear the state from the previous call, which restores a state that’s equivalent to the default values of an [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLDepthStencilDescriptor] instance’s properties.\n\n## Configuring depth and stencil behavior\n\n- **setDepthBias(_:slopeScale:clamp:)**: Configures the adjustments a render pass applies to depth values from fragment functions by a scaling factor and bias.\n- **setDepthClipMode(_:)**: Configures how the render pipeline handles fragments outside the near and far planes of the view frustum.\n- **setDepthTestBounds(_:)**: Configures the range for depth bounds testing.\n- **setStencilReferenceValue(_:)**: Configures the same comparison value for front- and back-facing primitives.\n- **setStencilReferenceValues(front:back:)**: Configures different comparison values for front- and back-facing primitives.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Configures the adjustments a render pass applies to depth values from fragment functions by a scaling factor and bias.",
          "name" : "setDepthBias(_:slopeScale:clamp:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLRenderCommandEncoder\/setDepthBias(_:slopeScale:clamp:)"
        },
        {
          "description" : "Configures how the render pipeline handles fragments outside the near and far planes of the view frustum.",
          "name" : "setDepthClipMode(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLRenderCommandEncoder\/setDepthClipMode(_:)"
        },
        {
          "description" : "Configures the range for depth bounds testing.",
          "name" : "setDepthTestBounds(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLRenderCommandEncoder\/setDepthTestBounds(_:)"
        },
        {
          "description" : "Configures the same comparison value for front- and back-facing primitives.",
          "name" : "setStencilReferenceValue(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLRenderCommandEncoder\/setStencilReferenceValue(_:)"
        },
        {
          "description" : "Configures different comparison values for front- and back-facing primitives.",
          "name" : "setStencilReferenceValues(front:back:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLRenderCommandEncoder\/setStencilReferenceValues(front:back:)"
        }
      ],
      "title" : "Configuring depth and stencil behavior"
    }
  ],
  "source" : "appleJSON",
  "title" : "setDepthStencilState(_:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLRenderCommandEncoder\/setDepthStencilState(_:)"
}