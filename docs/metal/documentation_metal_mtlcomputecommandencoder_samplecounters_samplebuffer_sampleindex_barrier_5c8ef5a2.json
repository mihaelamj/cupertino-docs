{
  "abstract" : "Encodes a command to sample hardware counters, providing performance information.",
  "codeExamples" : [

  ],
  "contentHash" : "5d537da7832976e83824a0b4d76982716e68046cb2e143d28acce0ae450fb4ed",
  "crawledAt" : "2025-12-05T11:52:06Z",
  "declaration" : {
    "code" : "func sampleCounters(sampleBuffer: any MTLCounterSampleBuffer, sampleIndex: Int, barrier: Bool)",
    "language" : "swift"
  },
  "id" : "51D1A9C5-1CA6-43DA-B54A-8E7873B07192",
  "kind" : "method",
  "language" : "swift",
  "module" : "Metal",
  "overview" : "## Discussion\n\nSee [doc:\/\/com.apple.metal\/documentation\/Metal\/gpu-counters-and-counter-sample-buffers], [doc:\/\/com.apple.metal\/documentation\/Metal\/sampling-gpu-data-into-counter-sample-buffers], and [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLCounter] for more information.",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "tvOS",
    "visionOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/Metal\/MTLComputeCommandEncoder\/sampleCounters(sampleBuffer:sampleIndex:barrier:)\ncrawled: 2025-12-05T11:52:06Z\n---\n\n# sampleCounters(sampleBuffer:sampleIndex:barrier:)\n\n**Instance Method**\n\nEncodes a command to sample hardware counters, providing performance information.\n\n## Declaration\n\n```swift\nfunc sampleCounters(sampleBuffer: any MTLCounterSampleBuffer, sampleIndex: Int, barrier: Bool)\n```\n\n## Parameters\n\n- **sampleBuffer**: An [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLCounterSampleBuffer] instance that stores the GPU hardware data.\n- **sampleIndex**: An index within `sampleBuffer` the command stores the data to.\n- **barrier**: Whether or not the command inserts a barrier before sampling the counterâ€™s data.\n\nA barrier ensures that the commands you encode before this one complete before the GPU samples the hardware counters, but can negatively impact runtime performance.\n\nRunning this command without a barrier means the GPU can sample counters concurrently with other commands from the encoder.\n\nThe `barrier` parameter for the command has no impact on sampling commands from other passes.\n\n## Discussion\n\n\n\nSee [doc:\/\/com.apple.metal\/documentation\/Metal\/gpu-counters-and-counter-sample-buffers], [doc:\/\/com.apple.metal\/documentation\/Metal\/sampling-gpu-data-into-counter-sample-buffers], and [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLCounter] for more information.\n\n",
  "sections" : [

  ],
  "source" : "appleJSON",
  "title" : "sampleCounters(sampleBuffer:sampleIndex:barrier:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLComputeCommandEncoder\/sampleCounters(sampleBuffer:sampleIndex:barrier:)"
}