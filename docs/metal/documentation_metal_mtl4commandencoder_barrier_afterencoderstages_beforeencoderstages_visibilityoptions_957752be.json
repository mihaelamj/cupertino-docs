{
  "abstract" : "Encodes an intra-pass barrier.",
  "codeExamples" : [

  ],
  "contentHash" : "d4bb52c756567edb25bd96c7518b43f03725e47344d3a2f78ca47430bd9c3ad8",
  "crawledAt" : "2025-12-04T22:04:55Z",
  "declaration" : {
    "code" : "func barrier(afterEncoderStages: MTLStages, beforeEncoderStages: MTLStages, visibilityOptions: MTL4VisibilityOptions = [ .device ])",
    "language" : "swift"
  },
  "id" : "E7336350-FEBB-4B76-B689-6E4AF8F6579D",
  "kind" : "method",
  "language" : "swift",
  "module" : "Metal",
  "overview" : "## Discussion\n\nEncode a barrier that guarantees that any subsequent work you encode in the *current command encoder*, corresponding to `beforeEncoderStages`, doesn’t begin until all prior commands in this command encoder, corresponding to `afterEncoderStages`, completes.\n\nWhen calling this method, it’s your responsibility to ensure parameters `afterEncoderStages` and `beforeEncoderStages` contain a combination of [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLStages] for which this encoder can encode commands. For example, for a [doc:\/\/com.apple.metal\/documentation\/Metal\/MTL4ComputeCommandEncoder] instance, you can provide any combination of [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLStages\/dispatch], [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLStages\/blit] and [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLStages\/accelerationStructure].",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "tvOS",
    "visionOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/Metal\/MTL4CommandEncoder\/barrier(afterEncoderStages:beforeEncoderStages:visibilityOptions:)\ncrawled: 2025-12-04T22:04:55Z\n---\n\n# barrier(afterEncoderStages:beforeEncoderStages:visibilityOptions:)\n\n**Instance Method**\n\nEncodes an intra-pass barrier.\n\n## Declaration\n\n```swift\nfunc barrier(afterEncoderStages: MTLStages, beforeEncoderStages: MTLStages, visibilityOptions: MTL4VisibilityOptions = [ .device ])\n```\n\n## Parameters\n\n- **afterEncoderStages**: [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLStages] mask that represents the stages of work to wait for. This argument only applies to subsequent work you encode in the current command encoder.\n- **beforeEncoderStages**: [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLStages] mask that represents the stages of work that wait. This argument only applies to work you encode in the current command encoder prior to this barrier.\n- **visibilityOptions**: [doc:\/\/com.apple.metal\/documentation\/Metal\/MTL4VisibilityOptions] of the barrier, controlling cache flush behavior.\n\n## Discussion\n\nEncode a barrier that guarantees that any subsequent work you encode in the *current command encoder*, corresponding to `beforeEncoderStages`, doesn’t begin until all prior commands in this command encoder, corresponding to `afterEncoderStages`, completes.\n\nWhen calling this method, it’s your responsibility to ensure parameters `afterEncoderStages` and `beforeEncoderStages` contain a combination of [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLStages] for which this encoder can encode commands. For example, for a [doc:\/\/com.apple.metal\/documentation\/Metal\/MTL4ComputeCommandEncoder] instance, you can provide any combination of [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLStages\/dispatch], [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLStages\/blit] and [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLStages\/accelerationStructure].\n\n",
  "sections" : [

  ],
  "source" : "appleJSON",
  "title" : "barrier(afterEncoderStages:beforeEncoderStages:visibilityOptions:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTL4CommandEncoder\/barrier(afterEncoderStages:beforeEncoderStages:visibilityOptions:)"
}