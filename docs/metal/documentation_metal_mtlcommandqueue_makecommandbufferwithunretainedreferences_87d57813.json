{
  "abstract" : "Returns a command buffer from the command queue that doesn’t maintain strong references to resources.",
  "codeExamples" : [

  ],
  "contentHash" : "ee378c4382bb89396404af33cbb435cb233eae75045bff4c7f666c444d029325",
  "crawledAt" : "2025-12-04T23:36:36Z",
  "declaration" : {
    "code" : "func makeCommandBufferWithUnretainedReferences() -> (any MTLCommandBuffer)?",
    "language" : "swift"
  },
  "id" : "ACA6E500-58FD-460B-9B9B-1E4A07DCB690",
  "kind" : "method",
  "language" : "swift",
  "module" : "Metal",
  "overview" : "## Discussion\n\nUse this method to create a command buffer that doesn’t retain or release any of the resources it needs to run its commands.\n\nApps typically create command buffers that don’t maintain references to resources for extremely performance-critical situations. Even though the runtime cost for retaining or releasing a single resource is trivial, the aggregate time savings may be worth it.\n\nIt’s your app’s responsibility to maintain strong references to all the resources the command buffer uses until it finishes running on the GPU.\n\nThis method sets the [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLCommandBuffer\/retainedReferences] property to [doc:\/\/com.apple.documentation\/documentation\/Swift\/false] for the command buffer it creates.\n\nEach command queue has a fixed number of command buffers for its lifetime (see [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLDevice\/makeCommandQueue(maxCommandBufferCount:)]). This method blocks the calling CPU thread when the queue doesn’t have any free command buffers, and returns after the GPU finishes executing one.",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "tvOS",
    "visionOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/Metal\/MTLCommandQueue\/makeCommandBufferWithUnretainedReferences()\ncrawled: 2025-12-04T23:36:36Z\n---\n\n# makeCommandBufferWithUnretainedReferences()\n\n**Instance Method**\n\nReturns a command buffer from the command queue that doesn’t maintain strong references to resources.\n\n## Declaration\n\n```swift\nfunc makeCommandBufferWithUnretainedReferences() -> (any MTLCommandBuffer)?\n```\n\n## Discussion\n\nUse this method to create a command buffer that doesn’t retain or release any of the resources it needs to run its commands.\n\nApps typically create command buffers that don’t maintain references to resources for extremely performance-critical situations. Even though the runtime cost for retaining or releasing a single resource is trivial, the aggregate time savings may be worth it.\n\nIt’s your app’s responsibility to maintain strong references to all the resources the command buffer uses until it finishes running on the GPU.\n\n\n\nThis method sets the [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLCommandBuffer\/retainedReferences] property to [doc:\/\/com.apple.documentation\/documentation\/Swift\/false] for the command buffer it creates.\n\nEach command queue has a fixed number of command buffers for its lifetime (see [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLDevice\/makeCommandQueue(maxCommandBufferCount:)]). This method blocks the calling CPU thread when the queue doesn’t have any free command buffers, and returns after the GPU finishes executing one.\n\n## Creating command buffers\n\n- **makeCommandBuffer(descriptor:)**: Returns a command buffer from the command queue that you configure with a descriptor.\n- **makeCommandBuffer()**: Returns a command buffer from the command queue that maintains strong references to resources.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Returns a command buffer from the command queue that you configure with a descriptor.",
          "name" : "makeCommandBuffer(descriptor:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLCommandQueue\/makeCommandBuffer(descriptor:)"
        },
        {
          "description" : "Returns a command buffer from the command queue that maintains strong references to resources.",
          "name" : "makeCommandBuffer()",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLCommandQueue\/makeCommandBuffer()"
        }
      ],
      "title" : "Creating command buffers"
    }
  ],
  "source" : "appleJSON",
  "title" : "makeCommandBufferWithUnretainedReferences()",
  "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLCommandQueue\/makeCommandBufferWithUnretainedReferences()"
}