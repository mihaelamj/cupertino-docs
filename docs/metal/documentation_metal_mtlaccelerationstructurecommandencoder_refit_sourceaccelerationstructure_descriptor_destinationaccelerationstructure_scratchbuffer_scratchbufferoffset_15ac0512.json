{
  "abstract" : "Updates an acceleration structure with new geometry or instance data.",
  "codeExamples" : [

  ],
  "contentHash" : "e2b3670b3454a0f4470474e1c6f67fdac35e9f07fdc551f42bff65f18e34dc99",
  "crawledAt" : "2025-12-05T11:56:51Z",
  "declaration" : {
    "code" : "func refit(sourceAccelerationStructure: any MTLAccelerationStructure, descriptor: MTLAccelerationStructureDescriptor, destinationAccelerationStructure: (any MTLAccelerationStructure)?, scratchBuffer: (any MTLBuffer)?, scratchBufferOffset: Int)",
    "language" : "swift"
  },
  "id" : "78D2E18C-CFDD-46CF-8D31-A68C6E6EB0AE",
  "kind" : "method",
  "language" : "swift",
  "module" : "Metal",
  "overview" : "## Discussion\n\nUse refitting to update an acceleration structure when you make small changes to the underlying geometry. Refitting performs much faster than rebuilding an acceleration structure from scratch. However, ray-tracing performance may degrade, based on how many changes you make to the geometry data.\n\nYou can’t use refitting to add or remove geometry in the acceleration structure.\n\nIf the source and destination acceleration structures aren’t the same, they can’t overlap in memory. The destination acceleration structure and the scratch buffer need to have enough space in memory to hold the acceleration structure data. Get the minimum amount of space it needs by calling the [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLDevice\/accelerationStructureSizes(descriptor:)] method of the Metal device instance. If you’re compacting the source structure, the destination needs to be at least as large as the compact size of the source acceleration structure.",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "tvOS",
    "visionOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/Metal\/MTLAccelerationStructureCommandEncoder\/refit(sourceAccelerationStructure:descriptor:destinationAccelerationStructure:scratchBuffer:scratchBufferOffset:)\ncrawled: 2025-12-05T11:56:51Z\n---\n\n# refit(sourceAccelerationStructure:descriptor:destinationAccelerationStructure:scratchBuffer:scratchBufferOffset:)\n\n**Instance Method**\n\nUpdates an acceleration structure with new geometry or instance data.\n\n## Declaration\n\n```swift\nfunc refit(sourceAccelerationStructure: any MTLAccelerationStructure, descriptor: MTLAccelerationStructureDescriptor, destinationAccelerationStructure: (any MTLAccelerationStructure)?, scratchBuffer: (any MTLBuffer)?, scratchBufferOffset: Int)\n```\n\n## Parameters\n\n- **sourceAccelerationStructure**: The source acceleration structure.\n- **descriptor**: A description of the updated acceleration structure.\n- **destinationAccelerationStructure**: The destination to write the new acceleration structure to. Pass the same acceleration structure or `nil` to refit the structure in place.\n- **scratchBuffer**: A buffer used to hold data while building the acceleration structure. Pass `nil` if [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLAccelerationStructureSizes\/refitScratchBufferSize] returns zero.\n- **scratchBufferOffset**: An offset, in bytes, in the scratch buffer where the scratch memory starts.\n\n## Discussion\n\nUse refitting to update an acceleration structure when you make small changes to the underlying geometry. Refitting performs much faster than rebuilding an acceleration structure from scratch. However, ray-tracing performance may degrade, based on how many changes you make to the geometry data.\n\nYou can’t use refitting to add or remove geometry in the acceleration structure.\n\nIf the source and destination acceleration structures aren’t the same, they can’t overlap in memory. The destination acceleration structure and the scratch buffer need to have enough space in memory to hold the acceleration structure data. Get the minimum amount of space it needs by calling the [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLDevice\/accelerationStructureSizes(descriptor:)] method of the Metal device instance. If you’re compacting the source structure, the destination needs to be at least as large as the compact size of the source acceleration structure.\n\n## Refitting an acceleration structure\n\n- **refit(sourceAccelerationStructure:descriptor:destinationAccelerationStructure:scratchBuffer:scratchBufferOffset:options:)**: Updates an acceleration structure with new geometry or instance data, with options that control the refitting process.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Updates an acceleration structure with new geometry or instance data, with options that control the refitting process.",
          "name" : "refit(sourceAccelerationStructure:descriptor:destinationAccelerationStructure:scratchBuffer:scratchBufferOffset:options:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLAccelerationStructureCommandEncoder\/refit(sourceAccelerationStructure:descriptor:destinationAccelerationStructure:scratchBuffer:scratchBufferOffset:options:)"
        }
      ],
      "title" : "Refitting an acceleration structure"
    }
  ],
  "source" : "appleJSON",
  "title" : "refit(sourceAccelerationStructure:descriptor:destinationAccelerationStructure:scratchBuffer:scratchBufferOffset:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLAccelerationStructureCommandEncoder\/refit(sourceAccelerationStructure:descriptor:destinationAccelerationStructure:scratchBuffer:scratchBufferOffset:)"
}