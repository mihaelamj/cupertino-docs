{
  "abstract" : "Manually synchronize memory for a Metal resource in apps.",
  "codeExamples" : [

  ],
  "contentHash" : "fcd7385b39320ecff5b8434c3c298b1b6d496f50404ce3e8f5d1c1afe45c14ac",
  "crawledAt" : "2025-12-04T00:47:27Z",
  "id" : "8D0F173D-EDCC-4878-9039-F48282AECB16",
  "kind" : "article",
  "language" : "swift",
  "module" : "Metal",
  "overview" : "## Overview\n\nFor Mac computers with Intel or external GPUs, Metal offers *managed resources.* Managed resources are [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLResource] instances, such as an [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLTexture] or [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLBuffer], which use memory that your app can copy between the CPU and GPU. Managed resources use a [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLResource\/storageMode] of [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLStorageMode\/managed].\n\nYou need to manually synchronize managed resources, copying changed memory between the CPU and GPU. This is different from Apple family GPUs, which use [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLStorageMode\/shared] for resources that the CPU and GPU can both access. Synchronize after your code finishes memory writes. After data synchronizes, you can safely read it in both your app and GPU functions.\n\nAs a best practice, try to keep your data synchronization points to a minimum. Even synchronization calls which don’t copy data can result in a small performance hit.\n\n### Synchronize a managed buffer\n\nFirst, create an [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLBuffer] with the option [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLStorageMode\/managed], which tells Metal to reserve managed memory space for the resource:\n\nNext, modify the buffer’s data on the CPU:\n\nAfter completing a CPU modification, call the [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLBuffer\/didModifyRange:] method. This method updates a specific range of data and keeps the buffer synchronized. Before calling this method, the modified buffer’s data on the GPU is in an undefined state.\n\nAfter encoding a GPU modification, encode a [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLBlitCommandEncoder\/synchronize(resource:)] command. This command updates the entire buffer and keeps it synchronized. Before executing this command, the modified buffer’s data on the CPU is in an undefined state.\n\n### Synchronize a managed texture\n\nFirst, create an [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLTexture] in managed memory from an [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLTextureDescriptor] with its storage mode set to [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLStorageMode\/managed]:\n\nTo perform a CPU modification and simultaneously notify Metal about the change, call the [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLTexture\/replace(region:mipmapLevel:withBytes:bytesPerRow:)] method. This method updates a specific region of data and keeps the texture synchronized. To update a specific texture slice, call the [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLTexture\/replace(region:mipmapLevel:slice:withBytes:bytesPerRow:bytesPerImage:)] method instead. Before calling one of these methods, the modified texture’s data on the GPU is in an undefined state.\n\nAfter encoding a GPU modification, encode a [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLBlitCommandEncoder\/synchronize(resource:)] command. This command updates the entire texture and keeps it synchronized. To update a specific texture slice or mipmap level, encode the [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLBlitCommandEncoder\/synchronize(texture:slice:level:)] command instead. Before executing this command, the modified texture’s data on the CPU is in an undefined state.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/Metal\/synchronizing-a-managed-resource-in-macos\ncrawled: 2025-12-04T00:47:27Z\n---\n\n# Synchronizing a managed resource in macOS\n\n**Article**\n\nManually synchronize memory for a Metal resource in apps.\n\n## Overview\n\nFor Mac computers with Intel or external GPUs, Metal offers *managed resources.* Managed resources are [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLResource] instances, such as an [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLTexture] or [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLBuffer], which use memory that your app can copy between the CPU and GPU. Managed resources use a [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLResource\/storageMode] of [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLStorageMode\/managed].\n\nYou need to manually synchronize managed resources, copying changed memory between the CPU and GPU. This is different from Apple family GPUs, which use [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLStorageMode\/shared] for resources that the CPU and GPU can both access. Synchronize after your code finishes memory writes. After data synchronizes, you can safely read it in both your app and GPU functions.\n\nAs a best practice, try to keep your data synchronization points to a minimum. Even synchronization calls which don’t copy data can result in a small performance hit.\n\n\n\n### Synchronize a managed buffer\n\nFirst, create an [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLBuffer] with the option [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLStorageMode\/managed], which tells Metal to reserve managed memory space for the resource:\n\n\n\nNext, modify the buffer’s data on the CPU:\n\n\n\nAfter completing a CPU modification, call the [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLBuffer\/didModifyRange:] method. This method updates a specific range of data and keeps the buffer synchronized. Before calling this method, the modified buffer’s data on the GPU is in an undefined state.\n\n\n\nAfter encoding a GPU modification, encode a [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLBlitCommandEncoder\/synchronize(resource:)] command. This command updates the entire buffer and keeps it synchronized. Before executing this command, the modified buffer’s data on the CPU is in an undefined state.\n\n\n\n### Synchronize a managed texture\n\nFirst, create an [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLTexture] in managed memory from an [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLTextureDescriptor] with its storage mode set to [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLStorageMode\/managed]:\n\n\n\nTo perform a CPU modification and simultaneously notify Metal about the change, call the [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLTexture\/replace(region:mipmapLevel:withBytes:bytesPerRow:)] method. This method updates a specific region of data and keeps the texture synchronized. To update a specific texture slice, call the [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLTexture\/replace(region:mipmapLevel:slice:withBytes:bytesPerRow:bytesPerImage:)] method instead. Before calling one of these methods, the modified texture’s data on the GPU is in an undefined state.\n\n\n\nAfter encoding a GPU modification, encode a [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLBlitCommandEncoder\/synchronize(resource:)] command. This command updates the entire texture and keeps it synchronized. To update a specific texture slice or mipmap level, encode the [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLBlitCommandEncoder\/synchronize(texture:slice:level:)] command instead. Before executing this command, the modified texture’s data on the CPU is in an undefined state.\n\n\n\n## Resource management\n\n- **Setting resource storage modes**: Set a storage mode that defines the memory location and access permissions of a resource.\n- **Choosing a resource storage mode for Apple GPUs**: Select an appropriate storage mode for your textures and buffers on Apple GPUs.\n- **Choosing a resource storage mode for Intel and AMD GPUs**: Select an appropriate storage mode for your textures and buffers on AMD and Intel GPUs.\n- **Copying data to a private resource**: Use a blit command encoder to copy buffer or texture data to a private resource.\n- **Transferring data between connected GPUs**: Use high-speed connections between GPUs to transfer data quickly.\n- **Reducing the memory footprint of Metal apps**: Learn best practices for using memory efficiently in iOS and tvOS.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Set a storage mode that defines the memory location and access permissions of a resource.",
          "name" : "Setting resource storage modes",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/setting-resource-storage-modes"
        },
        {
          "description" : "Select an appropriate storage mode for your textures and buffers on Apple GPUs.",
          "name" : "Choosing a resource storage mode for Apple GPUs",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/choosing-a-resource-storage-mode-for-apple-gpus"
        },
        {
          "description" : "Select an appropriate storage mode for your textures and buffers on AMD and Intel GPUs.",
          "name" : "Choosing a resource storage mode for Intel and AMD GPUs",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/choosing-a-resource-storage-mode-for-intel-and-amd-gpus"
        },
        {
          "description" : "Use a blit command encoder to copy buffer or texture data to a private resource.",
          "name" : "Copying data to a private resource",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/copying-data-to-a-private-resource"
        },
        {
          "description" : "Use high-speed connections between GPUs to transfer data quickly.",
          "name" : "Transferring data between connected GPUs",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/transferring-data-between-connected-gpus"
        },
        {
          "description" : "Learn best practices for using memory efficiently in iOS and tvOS.",
          "name" : "Reducing the memory footprint of Metal apps",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/reducing-the-memory-footprint-of-metal-apps"
        }
      ],
      "title" : "Resource management"
    }
  ],
  "source" : "appleJSON",
  "title" : "Synchronizing a managed resource in macOS",
  "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/synchronizing-a-managed-resource-in-macos"
}