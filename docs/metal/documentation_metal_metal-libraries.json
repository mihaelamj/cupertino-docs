{
  "abstract" : "Compile and manage Metal libraries from the command line.",
  "codeExamples" : [

  ],
  "contentHash" : "33bf53c37db72fd1f4596c88e9fba4e5e40a51d5698a1873e45d260eef840f78",
  "crawledAt" : "2025-12-02T19:44:41Z",
  "id" : "BD949549-7104-4CBA-A6D9-327A0EEE34AF",
  "kind" : "collection",
  "language" : "swift",
  "module" : "Metal",
  "overview" : "## Overview\n\nBy default, your Metal shaders compile as a format called *Metal intermediate representation* (Metal IR), a GPU-independent bytecode. At your app’s runtime, Metal compiles this bytecode to a GPU-specific binary for the host device. If you provide your shader functions as strings, they first compile to Metal IR on device, and then go through a secondary compilation for GPU.\n\nMetal source files you add to an app’s source compilation Build Phase compile to a Metal IR library named `default.metallib`. Load this library at runtime by calling the [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLDevice\/makeDefaultLibrary()] method of an [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLDevice] in your app. For more complicated projects, you may want to create individual targets for Metal libraries, modify them in build scripts, or perform other optimizations.\n\nCompilation of Metal IR completes before executing a shader function call. When your library consists of utility functions that other shaders use, use [doc:\/\/com.apple.metal\/documentation\/Metal\/metal-dynamic-libraries]. To distribute GPU-specific binaries and avoid runtime shader compilation, use [doc:\/\/com.apple.metal\/documentation\/Metal\/metal-binary-archives].",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/Metal\/metal-libraries\ncrawled: 2025-12-02T19:44:41Z\n---\n\n# Metal libraries\n\nCompile and manage Metal libraries from the command line.\n\n## Overview\n\nBy default, your Metal shaders compile as a format called *Metal intermediate representation* (Metal IR), a GPU-independent bytecode. At your app’s runtime, Metal compiles this bytecode to a GPU-specific binary for the host device. If you provide your shader functions as strings, they first compile to Metal IR on device, and then go through a secondary compilation for GPU.\n\nMetal source files you add to an app’s source compilation Build Phase compile to a Metal IR library named `default.metallib`. Load this library at runtime by calling the [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLDevice\/makeDefaultLibrary()] method of an [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLDevice] in your app. For more complicated projects, you may want to create individual targets for Metal libraries, modify them in build scripts, or perform other optimizations.\n\nCompilation of Metal IR completes before executing a shader function call. When your library consists of utility functions that other shaders use, use [doc:\/\/com.apple.metal\/documentation\/Metal\/metal-dynamic-libraries]. To distribute GPU-specific binaries and avoid runtime shader compilation, use [doc:\/\/com.apple.metal\/documentation\/Metal\/metal-binary-archives].\n\n## Working with Metal intermediate representation libraries\n\n- **Building a shader library by precompiling source files**: Create a shader library that you can add to an Xcode project with the Metal compiler tools in a command-line environment.\n- **Minimizing the binary size of a shader library**: Reduce the storage footprint of your shaders, and potentially reduce their compile time, by selecting the Metal compiler’s size optimization option.\n- **Generating and loading a Metal library symbol file**: Debug your Metal shaders from your production apps by creating companion symbol files at compile time and loading them at debug time.\n\n## Shader compilation\n\n- **Metal dynamic libraries**: Create a single Metal library containing reusable code to reduce library size and avoid repeated shader compilation at runtime.\n- **Metal binary archives**: Distribute precompiled GPU-specific binaries as part of your app to avoid runtime compilation of Metal shaders.\n- **MTL4Compiler**: A abstraction for a pipeline state and shader function compiler.\n- **MTL4CompilerDescriptor**: Groups together properties for creating a compiler context.\n- **MTL4CompilerTaskOptions**: The configuration options that control the behavior of a compilation task for a Metal 4 compiler instance.\n- **MTL4CompilerTaskStatus**: Represents the status of a compiler task.\n- **MTL4Archive**: A read-only container that stores pipeline states from a shader compiler.\n- **MTL4BinaryFunction**: Represents a binary function.\n- **MTL4BinaryFunctionDescriptor**: Base interface for other function-derived interfaces.\n- **MTL4BinaryFunctionOptions**: Options for configuring the creation of binary functions.\n- **MTL4PipelineStageDynamicLinkingDescriptor**: Groups together properties to drive the dynamic linking process of a pipeline stage.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Create a shader library that you can add to an Xcode project with the Metal compiler tools in a command-line environment.",
          "name" : "Building a shader library by precompiling source files",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/building-a-shader-library-by-precompiling-source-files"
        },
        {
          "description" : "Reduce the storage footprint of your shaders, and potentially reduce their compile time, by selecting the Metal compiler’s size optimization option.",
          "name" : "Minimizing the binary size of a shader library",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/minimizing-the-binary-size-of-a-shader-library"
        },
        {
          "description" : "Debug your Metal shaders from your production apps by creating companion symbol files at compile time and loading them at debug time.",
          "name" : "Generating and loading a Metal library symbol file",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/generating-and-loading-a-metal-library-symbol-file"
        }
      ],
      "title" : "Working with Metal intermediate representation libraries"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Create a single Metal library containing reusable code to reduce library size and avoid repeated shader compilation at runtime.",
          "name" : "Metal dynamic libraries",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/metal-dynamic-libraries"
        },
        {
          "description" : "Distribute precompiled GPU-specific binaries as part of your app to avoid runtime compilation of Metal shaders.",
          "name" : "Metal binary archives",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/metal-binary-archives"
        },
        {
          "description" : "A abstraction for a pipeline state and shader function compiler.",
          "name" : "MTL4Compiler",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTL4Compiler"
        },
        {
          "description" : "Groups together properties for creating a compiler context.",
          "name" : "MTL4CompilerDescriptor",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTL4CompilerDescriptor"
        },
        {
          "description" : "The configuration options that control the behavior of a compilation task for a Metal 4 compiler instance.",
          "name" : "MTL4CompilerTaskOptions",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTL4CompilerTaskOptions"
        },
        {
          "description" : "Represents the status of a compiler task.",
          "name" : "MTL4CompilerTaskStatus",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTL4CompilerTaskStatus"
        },
        {
          "description" : "A read-only container that stores pipeline states from a shader compiler.",
          "name" : "MTL4Archive",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTL4Archive"
        },
        {
          "description" : "Represents a binary function.",
          "name" : "MTL4BinaryFunction",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTL4BinaryFunction"
        },
        {
          "description" : "Base interface for other function-derived interfaces.",
          "name" : "MTL4BinaryFunctionDescriptor",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTL4BinaryFunctionDescriptor"
        },
        {
          "description" : "Options for configuring the creation of binary functions.",
          "name" : "MTL4BinaryFunctionOptions",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTL4BinaryFunctionOptions"
        },
        {
          "description" : "Groups together properties to drive the dynamic linking process of a pipeline stage.",
          "name" : "MTL4PipelineStageDynamicLinkingDescriptor",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTL4PipelineStageDynamicLinkingDescriptor"
        }
      ],
      "title" : "Shader compilation"
    }
  ],
  "source" : "appleJSON",
  "title" : "Metal libraries",
  "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/metal-libraries"
}