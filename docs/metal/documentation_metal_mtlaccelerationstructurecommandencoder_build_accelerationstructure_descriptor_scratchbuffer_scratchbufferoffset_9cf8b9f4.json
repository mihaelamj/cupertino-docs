{
  "abstract" : "Encodes a command to build a new acceleration structure.",
  "codeExamples" : [

  ],
  "contentHash" : "edc14f67e5a2df409286941621e3c1d5dbab8b1796db5c1525d962fab5a522ed",
  "crawledAt" : "2025-12-05T11:56:46Z",
  "declaration" : {
    "code" : "func build(accelerationStructure: any MTLAccelerationStructure, descriptor: MTLAccelerationStructureDescriptor, scratchBuffer: any MTLBuffer, scratchBufferOffset: Int)",
    "language" : "swift"
  },
  "id" : "D3AAC946-BB86-49B7-BCA4-96DADDA9094B",
  "kind" : "method",
  "language" : "swift",
  "module" : "Metal",
  "overview" : "## Discussion\n\nThe destination acceleration structure and the scratch buffer needs enough space in memory to hold the acceleration structure data. Call the [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLDevice\/accelerationStructureSizes(descriptor:)] method on the Metal device object to get the required space.\n\nThe resulting acceleration structure contains references to any other acceleration structures referenced by the descriptor, but not any other underlying buffer data. As part of creating the structure, the GPU overwrites data in the scratch buffer.\n\nBy default, Metal automatically synchronizes GPU access to the acceleration structure and any resources contained in the acceleration descriptor. For example, you can use a single encoder to build multiple geometry acceleration structures and then build the instanced structure that uses them. Similarly, you can use the acceleration structure in an encoder scheduled after this encoder.\n\nIf you are using untracked resources, you are responsible for synchronizing access to any untracked resources, including the acceleration structure. For example, you could use one encoder to build the geometry acceleration structures and update a fence, and a second encoder that waits on the fence and builds the instance acceleration structure.",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "tvOS",
    "visionOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/Metal\/MTLAccelerationStructureCommandEncoder\/build(accelerationStructure:descriptor:scratchBuffer:scratchBufferOffset:)\ncrawled: 2025-12-05T11:56:46Z\n---\n\n# build(accelerationStructure:descriptor:scratchBuffer:scratchBufferOffset:)\n\n**Instance Method**\n\nEncodes a command to build a new acceleration structure.\n\n## Declaration\n\n```swift\nfunc build(accelerationStructure: any MTLAccelerationStructure, descriptor: MTLAccelerationStructureDescriptor, scratchBuffer: any MTLBuffer, scratchBufferOffset: Int)\n```\n\n## Parameters\n\n- **accelerationStructure**: The acceleration structure to build into.\n- **descriptor**: A description of the new acceleration structure.\n- **scratchBuffer**: A buffer used to hold data while building the acceleration structure.\n- **scratchBufferOffset**: An offset, in, bytes, in the scratch buffer where the scratch memory starts.\n\n## Discussion\n\nThe destination acceleration structure and the scratch buffer needs enough space in memory to hold the acceleration structure data. Call the [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLDevice\/accelerationStructureSizes(descriptor:)] method on the Metal device object to get the required space.\n\nThe resulting acceleration structure contains references to any other acceleration structures referenced by the descriptor, but not any other underlying buffer data. As part of creating the structure, the GPU overwrites data in the scratch buffer.\n\nBy default, Metal automatically synchronizes GPU access to the acceleration structure and any resources contained in the acceleration descriptor. For example, you can use a single encoder to build multiple geometry acceleration structures and then build the instanced structure that uses them. Similarly, you can use the acceleration structure in an encoder scheduled after this encoder.\n\nIf you are using untracked resources, you are responsible for synchronizing access to any untracked resources, including the acceleration structure. For example, you could use one encoder to build the geometry acceleration structures and update a fence, and a second encoder that waits on the fence and builds the instance acceleration structure.\n\n",
  "sections" : [

  ],
  "source" : "appleJSON",
  "title" : "build(accelerationStructure:descriptor:scratchBuffer:scratchBufferOffset:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLAccelerationStructureCommandEncoder\/build(accelerationStructure:descriptor:scratchBuffer:scratchBufferOffset:)"
}