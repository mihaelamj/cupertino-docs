{
  "abstract" : "Load assets in your games and apps quickly by running a dedicated input\/output queue alongside your GPU tasks.",
  "codeExamples" : [

  ],
  "contentHash" : "76d3c669b33e371ddfb11e9901ab6fee89018d0d1bdb52f581d1bd626300b80a",
  "crawledAt" : "2025-12-02T16:45:12Z",
  "id" : "3CE0F675-CC3A-4F04-8246-F7A323F3D62A",
  "kind" : "collection",
  "language" : "swift",
  "module" : "Metal",
  "overview" : "## Overview\n\nMetal 3 adds input\/output command queues and buffers that make the most of a device’s storage hardware, including flash storage and the unified memory architecture of Apple silicon, when available. When you run a dedicated input\/output queue alongside your GPU tasks, you can synchronize them with Metal shared events. With this approach, you can minimize load screen times by fetching the essential assets first and streaming the rest as you need them. You can also start multiple input\/output command buffers to load different asset batches and later cancel the ones you don’t need. Ensure that time-sensitive assets, such as sound effects, load with lower latency by running those command buffers on higher-priority queues that you create.\n\nFirst, create [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLIOCommandQueue] instances by configuring an [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLIOCommandQueueDescriptor] instance and passing it to an [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLDevice] instance’s [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLDevice\/makeIOCommandQueue(descriptor:)] method.\n\nFor each queue, create one or more [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLIOCommandBuffer] instances by calling the queue’s [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLIOCommandQueue\/makeCommandBuffer()] or [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLIOCommandQueue\/makeCommandBufferWithUnretainedReferences()] method. For each command buffer, load the assets you want by calling any of the [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLIOCommandBuffer] protocol’s load methods. For example:\n\nFor each asset, create an [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLIOFileHandle] instance using the input\/output command buffer’s load methods. To create a file handle for your asset, call an [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLDevice] instance’s [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLDevice\/makeIOHandle(url:)] or [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLDevice\/makeIOHandle(url:compressionMethod:)] method.\n\nTo help minimize your appʼs storage footprint, compress your assets at development time. First, create a new compression context with the [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLIOCreateCompressionContext] function. Then, add data for an asset to the compression context using the [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLIOCompressionContextAppendData(_:_:_:)] function. Finally, call the  [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLIOFlushAndDestroyCompressionContext(_:)] function to save the context to a compressed file that you add to your project.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/Metal\/resource-loading\ncrawled: 2025-12-02T16:45:12Z\n---\n\n# Resource loading\n\n**API Collection**\n\nLoad assets in your games and apps quickly by running a dedicated input\/output queue alongside your GPU tasks.\n\n## Overview\n\nMetal 3 adds input\/output command queues and buffers that make the most of a device’s storage hardware, including flash storage and the unified memory architecture of Apple silicon, when available. When you run a dedicated input\/output queue alongside your GPU tasks, you can synchronize them with Metal shared events. With this approach, you can minimize load screen times by fetching the essential assets first and streaming the rest as you need them. You can also start multiple input\/output command buffers to load different asset batches and later cancel the ones you don’t need. Ensure that time-sensitive assets, such as sound effects, load with lower latency by running those command buffers on higher-priority queues that you create.\n\nFirst, create [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLIOCommandQueue] instances by configuring an [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLIOCommandQueueDescriptor] instance and passing it to an [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLDevice] instance’s [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLDevice\/makeIOCommandQueue(descriptor:)] method.\n\n\n\nFor each queue, create one or more [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLIOCommandBuffer] instances by calling the queue’s [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLIOCommandQueue\/makeCommandBuffer()] or [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLIOCommandQueue\/makeCommandBufferWithUnretainedReferences()] method. For each command buffer, load the assets you want by calling any of the [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLIOCommandBuffer] protocol’s load methods. For example:\n\n- The [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLIOCommandBuffer\/load(_:offset:size:sourceHandle:sourceHandleOffset:)] method loads an asset into an [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLBuffer].\n- The [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLIOCommandBuffer\/load(_:slice:level:size:sourceBytesPerRow:sourceBytesPerImage:destinationOrigin:sourceHandle:sourceHandleOffset:)] method loads an asset into an [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLTexture].\n- The [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLIOCommandBuffer\/loadBytes(_:size:sourceHandle:sourceHandleOffset:)] method loads an asset, such as an audio file, into a CPU-accessible memory buffer.\n\n\n\nFor each asset, create an [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLIOFileHandle] instance using the input\/output command buffer’s load methods. To create a file handle for your asset, call an [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLDevice] instance’s [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLDevice\/makeIOHandle(url:)] or [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLDevice\/makeIOHandle(url:compressionMethod:)] method.\n\n\n\n\n\nTo help minimize your appʼs storage footprint, compress your assets at development time. First, create a new compression context with the [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLIOCreateCompressionContext] function. Then, add data for an asset to the compression context using the [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLIOCompressionContextAppendData(_:_:_:)] function. Finally, call the  [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLIOFlushAndDestroyCompressionContext(_:)] function to save the context to a compressed file that you add to your project.\n\n## I\/O command queues\n\n- **MTLIOCommandQueue**: A command queue that schedules input\/output commands for reading files in the file system, and writing to GPU resources and memory.\n- **MTLIOCommandQueueDescriptor**: A configuration template you use to create a new input\/output command queue.\n- **MTLIOPriority**: Designates the priority for a new input\/output command queue.\n- **MTLIOCommandQueueType**: Designates the queue type for a new input\/output command queue.\n- **MTLIOScratchBufferAllocator**: A protocol your app implements to provide scratch memory to an input\/output command queue.\n- **MTLIOScratchBuffer**: A protocol your app implements that wraps a Metal buffer instance to serve as scratch memory for an input\/output command queue.\n\n## I\/O command buffers\n\n- **MTLIOCommandBuffer**: A command buffer that contains input\/output commands that work with files in the file systems and Metal resources.\n- **MTLIOFileHandle**: Represents a raw or compressed file, such as a resource asset file in your app’s bundle.\n- **MTLIOCommandBufferHandler**: A convenience type that defines the signature of an input\/output command buffer’s completion handler.\n- **MTLIOStatus**: Represents the state of an input\/output command buffer.\n- **MTLIOError.Code**: The error codes for creating an input\/output file handle.\n- **MTLIOErrorDomain**: The domain for input\/output command queue errors.\n\n## Asset compression\n\n- **MTLIOCreateCompressionContext(_:_:_:)**: Creates a compression context that you use to compress data into a single file.\n- **MTLIOCompressionMethod**: The compression codecs that Metal supports for input\/output handles.\n- **MTLIOCompressionContextDefaultChunkSize()**: Returns a compression chunk size you can use as a default for creating a compression context.\n- **MTLIOCompressionContext**: A pointer that represents the state of a file compression session in progress.\n- **MTLIOCompressionContextAppendData(_:_:_:)**: Adds data to a compression context.\n- **MTLIOFlushAndDestroyCompressionContext(_:)**: Finishes compressing and saves the file that a compression context represents.\n- **MTLIOCompressionStatus**: Represents the final state of a compression context.\n\n## Resources\n\n- **Resource fundamentals**: Control the common attributes of all Metal memory resources, including buffers and textures, and how to configure their underlying memory.\n- **Buffers**: Create and manage untyped data your app uses to exchange information with its shader functions.\n- **Textures**: Create and manage typed data your app uses to exchange information with its shader functions.\n- **Memory heaps**: Take control of your app’s GPU memory management by creating a large memory allocation for various buffers, textures, and other resources.\n- **Resource synchronization**: Prevent multiple commands that can access the same resources simultaneously by coordinating those reads and writes with barriers, fences, or events.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "A command queue that schedules input\/output commands for reading files in the file system, and writing to GPU resources and memory.",
          "name" : "MTLIOCommandQueue",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLIOCommandQueue"
        },
        {
          "description" : "A configuration template you use to create a new input\/output command queue.",
          "name" : "MTLIOCommandQueueDescriptor",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLIOCommandQueueDescriptor"
        },
        {
          "description" : "Designates the priority for a new input\/output command queue.",
          "name" : "MTLIOPriority",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLIOPriority"
        },
        {
          "description" : "Designates the queue type for a new input\/output command queue.",
          "name" : "MTLIOCommandQueueType",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLIOCommandQueueType"
        },
        {
          "description" : "A protocol your app implements to provide scratch memory to an input\/output command queue.",
          "name" : "MTLIOScratchBufferAllocator",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLIOScratchBufferAllocator"
        },
        {
          "description" : "A protocol your app implements that wraps a Metal buffer instance to serve as scratch memory for an input\/output command queue.",
          "name" : "MTLIOScratchBuffer",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLIOScratchBuffer"
        }
      ],
      "title" : "I\/O command queues"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "A command buffer that contains input\/output commands that work with files in the file systems and Metal resources.",
          "name" : "MTLIOCommandBuffer",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLIOCommandBuffer"
        },
        {
          "description" : "Represents a raw or compressed file, such as a resource asset file in your app’s bundle.",
          "name" : "MTLIOFileHandle",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLIOFileHandle"
        },
        {
          "description" : "A convenience type that defines the signature of an input\/output command buffer’s completion handler.",
          "name" : "MTLIOCommandBufferHandler",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLIOCommandBufferHandler"
        },
        {
          "description" : "Represents the state of an input\/output command buffer.",
          "name" : "MTLIOStatus",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLIOStatus"
        },
        {
          "description" : "The error codes for creating an input\/output file handle.",
          "name" : "MTLIOError.Code",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLIOError-swift.struct\/Code"
        },
        {
          "description" : "The domain for input\/output command queue errors.",
          "name" : "MTLIOErrorDomain",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLIOErrorDomain"
        }
      ],
      "title" : "I\/O command buffers"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Creates a compression context that you use to compress data into a single file.",
          "name" : "MTLIOCreateCompressionContext(_:_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLIOCreateCompressionContext(_:_:_:)"
        },
        {
          "description" : "The compression codecs that Metal supports for input\/output handles.",
          "name" : "MTLIOCompressionMethod",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLIOCompressionMethod"
        },
        {
          "description" : "Returns a compression chunk size you can use as a default for creating a compression context.",
          "name" : "MTLIOCompressionContextDefaultChunkSize()",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLIOCompressionContextDefaultChunkSize()"
        },
        {
          "description" : "A pointer that represents the state of a file compression session in progress.",
          "name" : "MTLIOCompressionContext",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLIOCompressionContext"
        },
        {
          "description" : "Adds data to a compression context.",
          "name" : "MTLIOCompressionContextAppendData(_:_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLIOCompressionContextAppendData(_:_:_:)"
        },
        {
          "description" : "Finishes compressing and saves the file that a compression context represents.",
          "name" : "MTLIOFlushAndDestroyCompressionContext(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLIOFlushAndDestroyCompressionContext(_:)"
        },
        {
          "description" : "Represents the final state of a compression context.",
          "name" : "MTLIOCompressionStatus",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLIOCompressionStatus"
        }
      ],
      "title" : "Asset compression"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Control the common attributes of all Metal memory resources, including buffers and textures, and how to configure their underlying memory.",
          "name" : "Resource fundamentals",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/resource-fundamentals"
        },
        {
          "description" : "Create and manage untyped data your app uses to exchange information with its shader functions.",
          "name" : "Buffers",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/buffers"
        },
        {
          "description" : "Create and manage typed data your app uses to exchange information with its shader functions.",
          "name" : "Textures",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/textures"
        },
        {
          "description" : "Take control of your app’s GPU memory management by creating a large memory allocation for various buffers, textures, and other resources.",
          "name" : "Memory heaps",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/memory-heaps"
        },
        {
          "description" : "Prevent multiple commands that can access the same resources simultaneously by coordinating those reads and writes with barriers, fences, or events.",
          "name" : "Resource synchronization",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/resource-synchronization"
        }
      ],
      "title" : "Resources"
    }
  ],
  "source" : "appleJSON",
  "title" : "Resource loading",
  "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/resource-loading"
}