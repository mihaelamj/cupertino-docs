{
  "abstract" : "Take direct control of memory allocation for texture data by using sparse textures.",
  "codeExamples" : [
    {
      "code" : "- (Boolean) supportsSparseTextures\n{\n    return [_device supportsFamily: MTLGPUFamilyApple6 ];\n}",
      "language" : "objective-c"
    }
  ],
  "contentHash" : "9d95ccd2172bde64cc5489c1538dd1cffd6f4ed57f3f7afb18e0075ab9103d2e",
  "crawledAt" : "2025-12-02T05:50:31Z",
  "id" : "91402B5A-ED84-43F5-B8B8-139A20F3AFC8",
  "kind" : "article",
  "module" : "Metal",
  "overview" : "## Overview\n\nWhen you create a texture, by default, Metal allocates memory to hold the texture’s pixel data. In some cases, such as when you’re implementing texture streaming, you generally use only a fraction of this memory. When you use sparse textures, you take ownership of memory management for texture data and decide when to allocate and deallocate memory for a texture. In this way, sparse textures help you to use memory more efficiently.\n\nTo use sparse textures, allocate a sparse heap from which to allocate memory, and then create sparse textures from this heap. Initially, a texture has no storage. To add storage to a region inside the texture, ask the GPU to map memory from the heap for that region. A *sparse tile* is a memory allocation (as opposed to memory tiles a GPU uses for tile-based rendering). Sparse tiles are conceptually similar to virtual memory pages. When you don’t need a region to have storage, you can unmap its sparse tile and recover that memory.\n\n\n\nBecause sparse textures work closely with texture mipmaps, you should be familiar with mipmaps before using sparse textures. For more information, see [doc:\/\/com.apple.metal\/documentation\/Metal\/improving-texture-sampling-quality-and-performance-with-mipmaps].\n\n### Check for sparse texture support\n\nNot all GPUs support sparse textures. Check for support on the device object before attempting to use sparse textures:",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/Metal\/managing-sparse-texture-memory\ncrawled: 2025-12-02T05:50:31Z\n---\n\n# Managing sparse texture memory\n\n**Article**\n\nTake direct control of memory allocation for texture data by using sparse textures.\n\n## Overview\n\nWhen you create a texture, by default, Metal allocates memory to hold the texture’s pixel data. In some cases, such as when you’re implementing texture streaming, you generally use only a fraction of this memory. When you use sparse textures, you take ownership of memory management for texture data and decide when to allocate and deallocate memory for a texture. In this way, sparse textures help you to use memory more efficiently.\n\nTo use sparse textures, allocate a sparse heap from which to allocate memory, and then create sparse textures from this heap. Initially, a texture has no storage. To add storage to a region inside the texture, ask the GPU to map memory from the heap for that region. A *sparse tile* is a memory allocation (as opposed to memory tiles a GPU uses for tile-based rendering). Sparse tiles are conceptually similar to virtual memory pages. When you don’t need a region to have storage, you can unmap its sparse tile and recover that memory.\n\n\n\nBecause sparse textures work closely with texture mipmaps, you should be familiar with mipmaps before using sparse textures. For more information, see [doc:\/\/com.apple.metal\/documentation\/Metal\/improving-texture-sampling-quality-and-performance-with-mipmaps].\n\n### Check for sparse texture support\n\nNot all GPUs support sparse textures. Check for support on the device object before attempting to use sparse textures:\n\n```objective-c\n- (Boolean) supportsSparseTextures\n{\n    return [_device supportsFamily: MTLGPUFamilyApple6 ];\n}\n```\n\n## Sparse textures\n\n- **Creating sparse heaps and sparse textures**: Allocate memory for sparse textures by creating a sparse heap.\n- **Converting between pixel regions and sparse tile regions**: Learn how a sparse texture’s contents are organized in memory.\n- **Assigning memory to sparse textures**: Use a resource state encoder to allocate and deallocate sparse tiles for a sparse texture.\n- **Reading and writing to sparse textures**: Decide how to handle access to unmapped texture regions.\n- **Estimating how often a texture region is accessed**: Use texture access patterns to determine when you need to map a texture region.\n- **MTLResourceStatePassDescriptor**: A configuration for a resource state pass, used to create a resource state command encoder.\n- **MTLResourceStatePassSampleBufferAttachmentDescriptor**: A description of where to store GPU counter information at the start and end of a resource state pass.\n- **MTLResourceStatePassSampleBufferAttachmentDescriptorArray**: An array of sample buffer attachments for a resource state pass.\n- **MTLResourceStateCommandEncoder**: An encoder that encodes commands that modify resource configurations.\n- **MTLMapIndirectArguments**: The data layout for mapping sparse texture regions when using indirect commands.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Allocate memory for sparse textures by creating a sparse heap.",
          "name" : "Creating sparse heaps and sparse textures",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/creating-sparse-heaps-and-sparse-textures"
        },
        {
          "description" : "Learn how a sparse texture’s contents are organized in memory.",
          "name" : "Converting between pixel regions and sparse tile regions",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/converting-between-pixel-regions-and-sparse-tile-regions"
        },
        {
          "description" : "Use a resource state encoder to allocate and deallocate sparse tiles for a sparse texture.",
          "name" : "Assigning memory to sparse textures",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/assigning-memory-to-sparse-textures"
        },
        {
          "description" : "Decide how to handle access to unmapped texture regions.",
          "name" : "Reading and writing to sparse textures",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/reading-and-writing-to-sparse-textures"
        },
        {
          "description" : "Use texture access patterns to determine when you need to map a texture region.",
          "name" : "Estimating how often a texture region is accessed",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/estimating-how-often-a-texture-region-is-accessed"
        },
        {
          "description" : "A configuration for a resource state pass, used to create a resource state command encoder.",
          "name" : "MTLResourceStatePassDescriptor",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLResourceStatePassDescriptor"
        },
        {
          "description" : "A description of where to store GPU counter information at the start and end of a resource state pass.",
          "name" : "MTLResourceStatePassSampleBufferAttachmentDescriptor",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLResourceStatePassSampleBufferAttachmentDescriptor"
        },
        {
          "description" : "An array of sample buffer attachments for a resource state pass.",
          "name" : "MTLResourceStatePassSampleBufferAttachmentDescriptorArray",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLResourceStatePassSampleBufferAttachmentDescriptorArray"
        },
        {
          "description" : "An encoder that encodes commands that modify resource configurations.",
          "name" : "MTLResourceStateCommandEncoder",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLResourceStateCommandEncoder"
        },
        {
          "description" : "The data layout for mapping sparse texture regions when using indirect commands.",
          "name" : "MTLMapIndirectArguments",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLMapIndirectArguments"
        }
      ],
      "title" : "Sparse textures"
    }
  ],
  "source" : "appleJSON",
  "title" : "Managing sparse texture memory",
  "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/managing-sparse-texture-memory"
}