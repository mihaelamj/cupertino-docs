{
  "abstract" : "Use indirect commands if you don’t know your draw or dispatch call arguments when you encode the command.",
  "codeExamples" : [

  ],
  "contentHash" : "fd5edc07e5edc2eab59dbd0f780f159931091e823d366830896b425b966a70f0",
  "crawledAt" : "2025-12-02T16:13:06Z",
  "id" : "E625DE2F-371A-4755-93D5-9DA41C988392",
  "kind" : "article",
  "language" : "swift",
  "module" : "Metal",
  "overview" : "## Overview\n\nAn indirect command obtains its arguments from data stored in an [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLBuffer] instance, with a specific data layout for each kind of drawing or dispatch command. The supported layouts are defined by the following structures:\n\nThe arguments can be dynamically generated after the indirect command is encoded, but they need to be available by the time their associated render or compute pass begins execution. Dynamic arguments are typically generated by the GPU; for example, a patch kernel can dynamically generate the arguments for a patch draw call.\n\n### Eliminate unnecessary data transfers and reduce processor idle time\n\nIf you are using the GPU to calculate arguments for a future drawing or dispatch command, use an indirect command to encode the second call, and avoid accessing the arguments from the CPU for other reasons. Following this practice eliminates unnecessary transfers between the GPU and CPU and stalls between the CPU and GPU.\n\nIf you create this workflow using a direct call, the timeline looks something like the figure below. First, the CPU encodes a command buffer with a compute operation to calculate the arguments. After commiting this command buffer, the CPU needs to wait until the GPU completes the command. Then, the CPU reads the results, creates a new command buffer, encodes a second command using the calculated arguments, and commits it. You pay a performance penalty because the processor stalls in the middle of this workflow, and additional time is spent reading back the results.\n\n\n\nWith indirect commands, the CPU can encode both commands in a single command buffer. After the CPU commits the command buffer, the GPU executes both passes, generating the arguments in the first pass, and executing the indirect call in the other. If your app needs to process this workflow repeatedly, it is easier for you to process work on one iteration on the GPU while you encode commands for the next iteration.\n\n",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/Metal\/specifying-drawing-and-dispatch-arguments-indirectly\ncrawled: 2025-12-02T16:13:06Z\n---\n\n# Specifying drawing and dispatch arguments indirectly\n\n**Article**\n\nUse indirect commands if you don’t know your draw or dispatch call arguments when you encode the command.\n\n## Overview\n\nAn indirect command obtains its arguments from data stored in an [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLBuffer] instance, with a specific data layout for each kind of drawing or dispatch command. The supported layouts are defined by the following structures:\n\n- [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLDrawPrimitivesIndirectArguments]\n- [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLDrawIndexedPrimitivesIndirectArguments]\n- [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLDrawPatchIndirectArguments]\n- [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLDispatchThreadgroupsIndirectArguments]\n\nThe arguments can be dynamically generated after the indirect command is encoded, but they need to be available by the time their associated render or compute pass begins execution. Dynamic arguments are typically generated by the GPU; for example, a patch kernel can dynamically generate the arguments for a patch draw call.\n\n### Eliminate unnecessary data transfers and reduce processor idle time\n\nIf you are using the GPU to calculate arguments for a future drawing or dispatch command, use an indirect command to encode the second call, and avoid accessing the arguments from the CPU for other reasons. Following this practice eliminates unnecessary transfers between the GPU and CPU and stalls between the CPU and GPU.\n\nIf you create this workflow using a direct call, the timeline looks something like the figure below. First, the CPU encodes a command buffer with a compute operation to calculate the arguments. After commiting this command buffer, the CPU needs to wait until the GPU completes the command. Then, the CPU reads the results, creates a new command buffer, encodes a second command using the calculated arguments, and commits it. You pay a performance penalty because the processor stalls in the middle of this workflow, and additional time is spent reading back the results.\n\n\n\nWith indirect commands, the CPU can encode both commands in a single command buffer. After the CPU commits the command buffer, the GPU executes both passes, generating the arguments in the first pass, and executing the indirect call in the other. If your app needs to process this workflow repeatedly, it is easier for you to process work on one iteration on the GPU while you encode commands for the next iteration.\n\n\n\n## Indirect command buffers\n\n- **Creating an indirect command buffer**: Configure a descriptor to specify the properties of an indirect command buffer.\n- **Encoding indirect command buffers on the CPU**: Reduce CPU overhead and simplify your command execution by reusing commands.\n- **Encoding indirect command buffers on the GPU**: Maximize CPU to GPU parallelization by generating render commands on the GPU.\n- **MTLIndirectCommandBuffer**: A command buffer containing reusable commands, encoded either on the CPU or GPU.\n- **MTLIndirectCommandBufferDescriptor**: A configuration you create to customize an indirect command buffer.\n- **MTLIndirectCommandType**: The types of commands that you can encode into the indirect command buffer.\n- **MTLIndirectCommandBufferExecutionRange**: A range of commands in an indirect command buffer.\n- **MTLIndirectCommandBufferExecutionRangeMake(_:_:)**: Creates a command execution range.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Configure a descriptor to specify the properties of an indirect command buffer.",
          "name" : "Creating an indirect command buffer",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/creating-an-indirect-command-buffer"
        },
        {
          "description" : "Reduce CPU overhead and simplify your command execution by reusing commands.",
          "name" : "Encoding indirect command buffers on the CPU",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/encoding-indirect-command-buffers-on-the-cpu"
        },
        {
          "description" : "Maximize CPU to GPU parallelization by generating render commands on the GPU.",
          "name" : "Encoding indirect command buffers on the GPU",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/encoding-indirect-command-buffers-on-the-gpu"
        },
        {
          "description" : "A command buffer containing reusable commands, encoded either on the CPU or GPU.",
          "name" : "MTLIndirectCommandBuffer",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLIndirectCommandBuffer"
        },
        {
          "description" : "A configuration you create to customize an indirect command buffer.",
          "name" : "MTLIndirectCommandBufferDescriptor",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLIndirectCommandBufferDescriptor"
        },
        {
          "description" : "The types of commands that you can encode into the indirect command buffer.",
          "name" : "MTLIndirectCommandType",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLIndirectCommandType"
        },
        {
          "description" : "A range of commands in an indirect command buffer.",
          "name" : "MTLIndirectCommandBufferExecutionRange",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLIndirectCommandBufferExecutionRange"
        },
        {
          "description" : "Creates a command execution range.",
          "name" : "MTLIndirectCommandBufferExecutionRangeMake(_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLIndirectCommandBufferExecutionRangeMake(_:_:)"
        }
      ],
      "title" : "Indirect command buffers"
    }
  ],
  "source" : "appleJSON",
  "title" : "Specifying drawing and dispatch arguments indirectly",
  "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/specifying-drawing-and-dispatch-arguments-indirectly"
}