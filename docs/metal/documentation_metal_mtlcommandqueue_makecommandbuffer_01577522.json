{
  "abstract" : "Returns a command buffer from the command queue that maintains strong references to resources.",
  "codeExamples" : [

  ],
  "contentHash" : "9648476b7338d824062c00566e1450cd66d497f3ebd922556a65d96362ba27ac",
  "crawledAt" : "2025-12-04T23:36:35Z",
  "declaration" : {
    "code" : "func makeCommandBuffer() -> (any MTLCommandBuffer)?",
    "language" : "swift"
  },
  "id" : "7723D5D7-EC86-43E7-9EBE-84C5D8DA14DB",
  "kind" : "method",
  "language" : "swift",
  "module" : "Metal",
  "overview" : "## Discussion\n\nThe command buffers you create with this method maintain strong references to the resources you encode into it, including buffers, textures, samplers, and pipeline states. The command buffer releases these references after it finishes running on the GPU.\n\nThis method sets the [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLCommandBuffer\/retainedReferences] property to [doc:\/\/com.apple.documentation\/documentation\/Swift\/true] for the command buffer it creates.\n\nEach command queue has a fixed number of command buffers for its lifetime (see [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLDevice\/makeCommandQueue(maxCommandBufferCount:)]). This method blocks the calling CPU thread when the queue doesn’t have any free command buffers, and returns after the GPU finishes executing one.",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "tvOS",
    "visionOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/Metal\/MTLCommandQueue\/makeCommandBuffer()\ncrawled: 2025-12-04T23:36:35Z\n---\n\n# makeCommandBuffer()\n\n**Instance Method**\n\nReturns a command buffer from the command queue that maintains strong references to resources.\n\n## Declaration\n\n```swift\nfunc makeCommandBuffer() -> (any MTLCommandBuffer)?\n```\n\n## Discussion\n\nThe command buffers you create with this method maintain strong references to the resources you encode into it, including buffers, textures, samplers, and pipeline states. The command buffer releases these references after it finishes running on the GPU.\n\nThis method sets the [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLCommandBuffer\/retainedReferences] property to [doc:\/\/com.apple.documentation\/documentation\/Swift\/true] for the command buffer it creates.\n\nEach command queue has a fixed number of command buffers for its lifetime (see [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLDevice\/makeCommandQueue(maxCommandBufferCount:)]). This method blocks the calling CPU thread when the queue doesn’t have any free command buffers, and returns after the GPU finishes executing one.\n\n## Creating command buffers\n\n- **makeCommandBuffer(descriptor:)**: Returns a command buffer from the command queue that you configure with a descriptor.\n- **makeCommandBufferWithUnretainedReferences()**: Returns a command buffer from the command queue that doesn’t maintain strong references to resources.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Returns a command buffer from the command queue that you configure with a descriptor.",
          "name" : "makeCommandBuffer(descriptor:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLCommandQueue\/makeCommandBuffer(descriptor:)"
        },
        {
          "description" : "Returns a command buffer from the command queue that doesn’t maintain strong references to resources.",
          "name" : "makeCommandBufferWithUnretainedReferences()",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLCommandQueue\/makeCommandBufferWithUnretainedReferences()"
        }
      ],
      "title" : "Creating command buffers"
    }
  ],
  "source" : "appleJSON",
  "title" : "makeCommandBuffer()",
  "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLCommandQueue\/makeCommandBuffer()"
}