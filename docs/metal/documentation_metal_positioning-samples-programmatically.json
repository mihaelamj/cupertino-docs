{
  "abstract" : "Configure the position of samples when rendering to a multisampled render target.",
  "codeExamples" : [
    {
      "code" : "MTLSamplePosition samplePositions[4];\n[_device getDefaultSamplePositions:samplePositions count:4];",
      "language" : "swift"
    },
    {
      "code" : "static const MTLSamplePosition samplePositions[4] = {\n    0.25, 0.25,\n    0.75, 0.25,\n    0.75, 0.75,\n    0.25, 0.75,\n};\n[renderPassDescriptor setSamplePositions:samplePositions count:4];",
      "language" : "objective-c"
    }
  ],
  "contentHash" : "421b6c74372d28264439466f01ed5c8505b9ea08f0da0d450e226204cb3d78bd",
  "crawledAt" : "2025-12-03T12:53:41Z",
  "id" : "40CE4719-80EB-4641-87F3-0EE05FA92A71",
  "kind" : "article",
  "language" : "swift",
  "module" : "Metal",
  "overview" : "## Overview\n\nWhen you perform a render pass that uses multisample antialiasing (MSAA) operations, the GPU samples and resolves subpixels using a specific visual pattern. On GPUs that support programmable sample positions, you can change this pattern. Programmable sample positions unlock additional rendering techniques because you can configure them into custom patterns that you reuse or reposition in each render pass.\n\n### Verify support for programmable sample positions\n\nNot all GPUs support programmable sample positions. Check for support by reading the [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLDevice\/areProgrammableSamplePositionsSupported] property on a device instance. If this property’s value is [doc:\/\/com.apple.documentation\/documentation\/Swift\/false], the device instance uses fixed sample positions that you can’t query or modify.\n\nAdditionally, the number of sample positions that the device instance supports may vary. Call the [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLDevice\/supportsTextureSampleCount(_:)] method to determine if a given number of samples is usable on that device instance.\n\n### Get the default sample positions\n\nProgrammable sample positions are set on a 4-bit subpixel grid (16 x 16 subpixels). Floating-point values are in the `[0.0,1.0)` range along each axis, with the origin `(0,0)` defined at the top-left corner.  You can set values from `0\/16` up to `15\/16`, inclusive, in `1\/16` increments along each axis.\n\n\n\nMetal uses the same default sample positions on all GPUs that support programmable sample positions. Get the default sample positions for a given sample count by calling the [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLDevice\/getDefaultSamplePositions:count:] method, as shown in the code below. Programmable sample positions are defined as an array of [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLSamplePosition] values.\n\nFor example, the following table and grid show the position index, values, and placement for the default one-sample position. The complete set of default sample positions is described in [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLDevice\/getDefaultSamplePositions:count:].\n\n\n\n### Set the sample positions in a render pass\n\nTo change the sample positions in a render pass, call the [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLRenderPassDescriptor\/setSamplePositions:count:] method of an [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLRenderPassDescriptor], as shown below, passing in the array of sample positions you want to use.\n\nThe following grid shows the programmable sample positions in the `samplePositions` array:\n\n",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/Metal\/positioning-samples-programmatically\ncrawled: 2025-12-03T12:53:41Z\n---\n\n# Positioning samples programmatically\n\n**Article**\n\nConfigure the position of samples when rendering to a multisampled render target.\n\n## Overview\n\nWhen you perform a render pass that uses multisample antialiasing (MSAA) operations, the GPU samples and resolves subpixels using a specific visual pattern. On GPUs that support programmable sample positions, you can change this pattern. Programmable sample positions unlock additional rendering techniques because you can configure them into custom patterns that you reuse or reposition in each render pass.\n\n### Verify support for programmable sample positions\n\nNot all GPUs support programmable sample positions. Check for support by reading the [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLDevice\/areProgrammableSamplePositionsSupported] property on a device instance. If this property’s value is [doc:\/\/com.apple.documentation\/documentation\/Swift\/false], the device instance uses fixed sample positions that you can’t query or modify.\n\nAdditionally, the number of sample positions that the device instance supports may vary. Call the [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLDevice\/supportsTextureSampleCount(_:)] method to determine if a given number of samples is usable on that device instance.\n\n### Get the default sample positions\n\nProgrammable sample positions are set on a 4-bit subpixel grid (16 x 16 subpixels). Floating-point values are in the `[0.0,1.0)` range along each axis, with the origin `(0,0)` defined at the top-left corner.  You can set values from `0\/16` up to `15\/16`, inclusive, in `1\/16` increments along each axis.\n\n\n\nMetal uses the same default sample positions on all GPUs that support programmable sample positions. Get the default sample positions for a given sample count by calling the [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLDevice\/getDefaultSamplePositions:count:] method, as shown in the code below. Programmable sample positions are defined as an array of [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLSamplePosition] values.\n\n```swift\nMTLSamplePosition samplePositions[4];\n[_device getDefaultSamplePositions:samplePositions count:4];\n```\n\nFor example, the following table and grid show the position index, values, and placement for the default one-sample position. The complete set of default sample positions is described in [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLDevice\/getDefaultSamplePositions:count:].\n\n\n\n\n\n### Set the sample positions in a render pass\n\nTo change the sample positions in a render pass, call the [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLRenderPassDescriptor\/setSamplePositions:count:] method of an [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLRenderPassDescriptor], as shown below, passing in the array of sample positions you want to use.\n\n```objective-c\nstatic const MTLSamplePosition samplePositions[4] = {\n    0.25, 0.25,\n    0.75, 0.25,\n    0.75, 0.75,\n    0.25, 0.75,\n};\n[renderPassDescriptor setSamplePositions:samplePositions count:4];\n```\n\nThe following grid shows the programmable sample positions in the `samplePositions` array:\n\n\n\n## Advanced multisampling\n\n- **Storing data a pass makes with custom sample positions for a subsequent pass**: Inform Metal when your app uses programmable sample positions for its depth render targets or copies MSAA depth data.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Inform Metal when your app uses programmable sample positions for its depth render targets or copies MSAA depth data.",
          "name" : "Storing data a pass makes with custom sample positions for a subsequent pass",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/storing-data-a-pass-makes-with-custom-sample-positions-for-a-subsequent-pass"
        }
      ],
      "title" : "Advanced multisampling"
    }
  ],
  "source" : "appleJSON",
  "title" : "Positioning samples programmatically",
  "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/positioning-samples-programmatically"
}