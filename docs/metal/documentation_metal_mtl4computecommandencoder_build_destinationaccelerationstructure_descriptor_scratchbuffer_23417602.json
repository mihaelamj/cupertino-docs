{
  "abstract" : "Encodes an acceleration structure build into the command buffer.",
  "codeExamples" : [

  ],
  "contentHash" : "2b9adab5b0e8c0a6aeddd55a081a0d285302396114a3098e1874b401f1723634",
  "crawledAt" : "2025-12-05T10:20:15Z",
  "declaration" : {
    "code" : "func build(destinationAccelerationStructure accelerationStructure: any MTLAccelerationStructure, descriptor: MTL4AccelerationStructureDescriptor, scratchBuffer: MTL4BufferRange)",
    "language" : "swift"
  },
  "id" : "76881FDC-81C7-43A9-B3FC-0C8F2D960FB7",
  "kind" : "method",
  "language" : "swift",
  "module" : "Metal",
  "overview" : "## Discussion\n\nBefore you build an instance acceleration structure, you are responsible for ensuring the build operations for all primitive acceleration structures is complete. The built acceleration structure doesn’t retain any references to the input buffers of the descriptor, such as the vertex buffer or instance buffer, among others.\n\nThe acceleration structure build process may continue as long as the command buffer is not completed. However, you can safely encode ray tracing work against the acceleration structure if you schedule and synchronize the command buffers that contain this ray tracing work such that the command buffer with the build command is complete by the time ray tracing starts.\n\nYou are responsible for ensuring that the acceleration structure and scratch buffer are at least the size that the query [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLDevice\/accelerationStructureSizes(descriptor:)] returns.\n\nUse an instance of [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLResidencySet] to mark residency of the scratch buffer the `scratchBuffer` parameter references, as well as for all the primitive acceleration structures you directly and indirectly reference.",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "tvOS",
    "visionOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/Metal\/MTL4ComputeCommandEncoder\/build(destinationAccelerationStructure:descriptor:scratchBuffer:)\ncrawled: 2025-12-05T10:20:15Z\n---\n\n# build(destinationAccelerationStructure:descriptor:scratchBuffer:)\n\n**Instance Method**\n\nEncodes an acceleration structure build into the command buffer.\n\n## Declaration\n\n```swift\nfunc build(destinationAccelerationStructure accelerationStructure: any MTLAccelerationStructure, descriptor: MTL4AccelerationStructureDescriptor, scratchBuffer: MTL4BufferRange)\n```\n\n## Parameters\n\n- **accelerationStructure**: Acceleration structure storage to build into.\n- **descriptor**: A descriptor for the acceleration structure Metal builds.\n- **scratchBuffer**: Scratch buffer Metal can use while building the acceleration structure. Metal may overwrite the contents of this buffer, and you should consider them “undefined” after the refit operation starts and completes.\n\n## Discussion\n\nBefore you build an instance acceleration structure, you are responsible for ensuring the build operations for all primitive acceleration structures is complete. The built acceleration structure doesn’t retain any references to the input buffers of the descriptor, such as the vertex buffer or instance buffer, among others.\n\nThe acceleration structure build process may continue as long as the command buffer is not completed. However, you can safely encode ray tracing work against the acceleration structure if you schedule and synchronize the command buffers that contain this ray tracing work such that the command buffer with the build command is complete by the time ray tracing starts.\n\nYou are responsible for ensuring that the acceleration structure and scratch buffer are at least the size that the query [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLDevice\/accelerationStructureSizes(descriptor:)] returns.\n\nUse an instance of [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLResidencySet] to mark residency of the scratch buffer the `scratchBuffer` parameter references, as well as for all the primitive acceleration structures you directly and indirectly reference.\n\n",
  "sections" : [

  ],
  "source" : "appleJSON",
  "title" : "build(destinationAccelerationStructure:descriptor:scratchBuffer:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTL4ComputeCommandEncoder\/build(destinationAccelerationStructure:descriptor:scratchBuffer:)"
}