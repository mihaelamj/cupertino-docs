{
  "abstract" : "Select an appropriate storage mode for your textures and buffers on AMD and Intel GPUs.",
  "codeExamples" : [

  ],
  "contentHash" : "5f9bbe9a05a939dac95eda51595ebe0280c179d80aba0686e54582b74348d6f4",
  "crawledAt" : "2025-12-04T00:47:25Z",
  "id" : "0F42776E-2255-4C31-9ECA-B15C9B799487",
  "kind" : "article",
  "language" : "swift",
  "module" : "Metal",
  "overview" : "## Overview\n\nA Mac can have multiple GPUs, each with a unified or discrete memory model. In a *unified memory model*, the CPU and the GPU share system memory. However, CPU and GPU access to that memory depends on the storage mode you choose for your resources. In a *discrete memory model*, system memory is separate from video memory. System memory is accessible to both the CPU and the GPU, but video memory is accessible only to the GPU.\n\nThe Metal framework’s resource storage mode API works for both unified and discrete memory models, so you don’t need to write specific code for either.\n\n### Understand the different Metal memory modes\n\nIn both memory models, a resource with an [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLStorageMode\/shared] mode resides in system memory accessible to both the CPU and the GPU. Shared resources are only available on systems with integrated graphics, such as Apple silicon and integrated GPUs on Intel-based Mac computers.\n\n\n\nA resource with an [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLStorageMode\/private] mode is accessible only to the GPU. In a unified memory model, this resource resides in system memory. In a discrete memory model, it resides in video memory. In both memory models, Metal optimizes GPU access to private resources.\n\n\n\nIn a discrete memory model, Metal always attempts to store private resources in video memory. However, under certain memory constraints, Metal may evict a private resource into system memory. When you use a private resource that Metal previously evicted, Metal attempts to copy it back into video memory before you use it.\n\nIn a unified memory model, a resource with an [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLStorageMode\/managed] mode resides in system memory accessible to both the CPU and the GPU.\n\nIn a discrete memory model, a managed resource exists as a synchronized pair of memory allocations. One copy of the resource resides in system memory accessible only to the CPU; the other resides in video memory accessible only to the GPU. However, you don’t manage the copies separately; Metal creates a single [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLResource] instance to access both.\n\nIn both memory models, Metal optimizes CPU and GPU access to managed resources. However, you need to explicitly synchronize a managed resource after modifying its contents with the CPU or the GPU. For information about synchronizing a managed resource, see [doc:\/\/com.apple.metal\/documentation\/Metal\/synchronizing-a-managed-resource-in-macos].\n\n\n\n### Choose a storage mode for resources\n\nYour storage mode should depend on the resource type and how your application uses storage accessed by Metal. Understanding the underlying memory architecture gives context and helps you investigate where you can optimize storage and synchronization. On Intel-based Mac computers, follow these guidelines:\n\nYou’re responsible for signaling synchronization between the CPU and GPU with managed and shared storage. Regardless of your resource size, try and keep your synchronization points as light and infrequent as possible. Batch GPU work together to help reduce frequent synchronization. See [doc:\/\/com.apple.metal\/documentation\/Metal\/synchronizing-a-managed-resource-in-macos] for details.\n\nTo detect the GPU architecture and features at runtime, use the [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLDevice\/supportsFamily(_:)] method. See [doc:\/\/com.apple.metal\/documentation\/Metal\/detecting-gpu-features-and-metal-software-versions] for more information, and the [https:\/\/developer.apple.com\/metal\/Metal-Feature-Set-Tables.pdf] for full information on hardware support in Apple devices and computers.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/Metal\/choosing-a-resource-storage-mode-for-intel-and-amd-gpus\ncrawled: 2025-12-04T00:47:25Z\n---\n\n# Choosing a resource storage mode for Intel and AMD GPUs\n\n**Article**\n\nSelect an appropriate storage mode for your textures and buffers on AMD and Intel GPUs.\n\n## Overview\n\nA Mac can have multiple GPUs, each with a unified or discrete memory model. In a *unified memory model*, the CPU and the GPU share system memory. However, CPU and GPU access to that memory depends on the storage mode you choose for your resources. In a *discrete memory model*, system memory is separate from video memory. System memory is accessible to both the CPU and the GPU, but video memory is accessible only to the GPU.\n\nThe Metal framework’s resource storage mode API works for both unified and discrete memory models, so you don’t need to write specific code for either.\n\n### Understand the different Metal memory modes\n\nIn both memory models, a resource with an [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLStorageMode\/shared] mode resides in system memory accessible to both the CPU and the GPU. Shared resources are only available on systems with integrated graphics, such as Apple silicon and integrated GPUs on Intel-based Mac computers.\n\n\n\nA resource with an [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLStorageMode\/private] mode is accessible only to the GPU. In a unified memory model, this resource resides in system memory. In a discrete memory model, it resides in video memory. In both memory models, Metal optimizes GPU access to private resources.\n\n\n\nIn a discrete memory model, Metal always attempts to store private resources in video memory. However, under certain memory constraints, Metal may evict a private resource into system memory. When you use a private resource that Metal previously evicted, Metal attempts to copy it back into video memory before you use it.\n\nIn a unified memory model, a resource with an [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLStorageMode\/managed] mode resides in system memory accessible to both the CPU and the GPU.\n\nIn a discrete memory model, a managed resource exists as a synchronized pair of memory allocations. One copy of the resource resides in system memory accessible only to the CPU; the other resides in video memory accessible only to the GPU. However, you don’t manage the copies separately; Metal creates a single [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLResource] instance to access both.\n\nIn both memory models, Metal optimizes CPU and GPU access to managed resources. However, you need to explicitly synchronize a managed resource after modifying its contents with the CPU or the GPU. For information about synchronizing a managed resource, see [doc:\/\/com.apple.metal\/documentation\/Metal\/synchronizing-a-managed-resource-in-macos].\n\n\n\n### Choose a storage mode for resources\n\nYour storage mode should depend on the resource type and how your application uses storage accessed by Metal. Understanding the underlying memory architecture gives context and helps you investigate where you can optimize storage and synchronization. On Intel-based Mac computers, follow these guidelines:\n\n- Prefer the default storage mode selected by Metal. Metal selects the optimal mode for the resource type and hardware.\n- Use the [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLStorageMode\/private] mode when creating a resource that’s only accessed by the GPU. This includes temporary targets for render passes.\n- To optimize for workloads initialized from CPU and then only processed on GPU, copy from a CPU-populated resource in the default storage mode to a GPU-only [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLResource] with [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLStorageMode\/private] storage. See [doc:\/\/com.apple.metal\/documentation\/Metal\/copying-data-to-a-private-resource] for details.\n\nYou’re responsible for signaling synchronization between the CPU and GPU with managed and shared storage. Regardless of your resource size, try and keep your synchronization points as light and infrequent as possible. Batch GPU work together to help reduce frequent synchronization. See [doc:\/\/com.apple.metal\/documentation\/Metal\/synchronizing-a-managed-resource-in-macos] for details.\n\nTo detect the GPU architecture and features at runtime, use the [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLDevice\/supportsFamily(_:)] method. See [doc:\/\/com.apple.metal\/documentation\/Metal\/detecting-gpu-features-and-metal-software-versions] for more information, and the [https:\/\/developer.apple.com\/metal\/Metal-Feature-Set-Tables.pdf] for full information on hardware support in Apple devices and computers.\n\n## Resource management\n\n- **Setting resource storage modes**: Set a storage mode that defines the memory location and access permissions of a resource.\n- **Choosing a resource storage mode for Apple GPUs**: Select an appropriate storage mode for your textures and buffers on Apple GPUs.\n- **Copying data to a private resource**: Use a blit command encoder to copy buffer or texture data to a private resource.\n- **Synchronizing a managed resource in macOS**: Manually synchronize memory for a Metal resource in apps.\n- **Transferring data between connected GPUs**: Use high-speed connections between GPUs to transfer data quickly.\n- **Reducing the memory footprint of Metal apps**: Learn best practices for using memory efficiently in iOS and tvOS.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Set a storage mode that defines the memory location and access permissions of a resource.",
          "name" : "Setting resource storage modes",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/setting-resource-storage-modes"
        },
        {
          "description" : "Select an appropriate storage mode for your textures and buffers on Apple GPUs.",
          "name" : "Choosing a resource storage mode for Apple GPUs",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/choosing-a-resource-storage-mode-for-apple-gpus"
        },
        {
          "description" : "Use a blit command encoder to copy buffer or texture data to a private resource.",
          "name" : "Copying data to a private resource",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/copying-data-to-a-private-resource"
        },
        {
          "description" : "Manually synchronize memory for a Metal resource in apps.",
          "name" : "Synchronizing a managed resource in macOS",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/synchronizing-a-managed-resource-in-macos"
        },
        {
          "description" : "Use high-speed connections between GPUs to transfer data quickly.",
          "name" : "Transferring data between connected GPUs",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/transferring-data-between-connected-gpus"
        },
        {
          "description" : "Learn best practices for using memory efficiently in iOS and tvOS.",
          "name" : "Reducing the memory footprint of Metal apps",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/reducing-the-memory-footprint-of-metal-apps"
        }
      ],
      "title" : "Resource management"
    }
  ],
  "source" : "appleJSON",
  "title" : "Choosing a resource storage mode for Intel and AMD GPUs",
  "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/choosing-a-resource-storage-mode-for-intel-and-amd-gpus"
}