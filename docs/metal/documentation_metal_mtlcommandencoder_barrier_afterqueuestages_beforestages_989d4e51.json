{
  "abstract" : "Encodes a consumer barrier on work you commit to the same command queue.",
  "codeExamples" : [

  ],
  "contentHash" : "b865b8adceec49d8a2b90a2c782cc798e3d225beaad467bb86dfb51ae9cc1c49",
  "crawledAt" : "2025-12-04T23:37:33Z",
  "declaration" : {
    "code" : "func barrier(afterQueueStages: MTLStages, beforeStages: MTLStages)",
    "language" : "swift"
  },
  "id" : "7627274F-B9BD-4C19-978A-E64FC4E2DDD9",
  "kind" : "method",
  "language" : "swift",
  "module" : "Metal",
  "overview" : "## Discussion\n\nEncode a barrier that guarantees that any subsequent work you encode in the current command encoder that corresponds to the `beforeStages` stages doesn’t proceed until Metal completes all work prior to the current command encoder corresponding to the `afterQueueStages` stages, completes.\n\nMetal can reorder the exact point where it applies the barrier, so use this method for synchronizing between different passes.\n\nIf you need to synchronize work within a pass that you encode with an instance of a subclass of [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLCommandEncoder], use memory barriers instead. For subclasses of [doc:\/\/com.apple.metal\/documentation\/Metal\/MTL4CommandEncoder], use encoder barriers.\n\nYou can specify `afterQueueStages` and `beforeStages` that contain [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLStages] unrelated to the current command encoder.",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "tvOS",
    "visionOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/Metal\/MTLCommandEncoder\/barrier(afterQueueStages:beforeStages:)\ncrawled: 2025-12-04T23:37:33Z\n---\n\n# barrier(afterQueueStages:beforeStages:)\n\n**Instance Method**\n\nEncodes a consumer barrier on work you commit to the same command queue.\n\n## Declaration\n\n```swift\nfunc barrier(afterQueueStages: MTLStages, beforeStages: MTLStages)\n```\n\n## Parameters\n\n- **afterQueueStages**: [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLStages] mask that represents the stages of work to wait for. This argument applies to work corresponding to these stages you encode in prior command encoders, and not for the current encoder.\n- **beforeStages**: [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLStages] mask that represents the stages of work that wait. This argument applies to work you encode in the current command encoder.\n\n## Discussion\n\nEncode a barrier that guarantees that any subsequent work you encode in the current command encoder that corresponds to the `beforeStages` stages doesn’t proceed until Metal completes all work prior to the current command encoder corresponding to the `afterQueueStages` stages, completes.\n\nMetal can reorder the exact point where it applies the barrier, so use this method for synchronizing between different passes.\n\nIf you need to synchronize work within a pass that you encode with an instance of a subclass of [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLCommandEncoder], use memory barriers instead. For subclasses of [doc:\/\/com.apple.metal\/documentation\/Metal\/MTL4CommandEncoder], use encoder barriers.\n\nYou can specify `afterQueueStages` and `beforeStages` that contain [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLStages] unrelated to the current command encoder.\n\n",
  "sections" : [

  ],
  "source" : "appleJSON",
  "title" : "barrier(afterQueueStages:beforeStages:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLCommandEncoder\/barrier(afterQueueStages:beforeStages:)"
}