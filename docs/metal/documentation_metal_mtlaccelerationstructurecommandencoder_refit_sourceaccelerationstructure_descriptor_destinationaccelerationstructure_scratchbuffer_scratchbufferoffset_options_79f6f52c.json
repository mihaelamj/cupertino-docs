{
  "abstract" : "Updates an acceleration structure with new geometry or instance data, with options that control the refitting process.",
  "codeExamples" : [

  ],
  "contentHash" : "2cc67ff120ebb1b5ef77c685016d993ac764d6dbbca7ac1de420fa7dd34a336d",
  "crawledAt" : "2025-12-05T10:25:45Z",
  "declaration" : {
    "code" : "func refit(sourceAccelerationStructure: any MTLAccelerationStructure, descriptor: MTLAccelerationStructureDescriptor, destinationAccelerationStructure: (any MTLAccelerationStructure)?, scratchBuffer: (any MTLBuffer)?, scratchBufferOffset: Int, options: MTLAccelerationStructureRefitOptions = [])",
    "language" : "swift"
  },
  "id" : "8B19EBCF-1D04-44E3-97D0-DA0F292C014D",
  "kind" : "method",
  "language" : "swift",
  "module" : "Metal",
  "overview" : "## Discussion\n\nUse refitting to update an acceleration structure when you make small changes to the underlying geometry. Refitting performs much faster than rebuilding an acceleration structure from scratch. However, ray-tracing performance may degrade, based on how many changes you make to the geometry data.\n\nYou can’t use refitting to add or remove geometry in the acceleration structure.\n\nIf the source and destination acceleration structures are not the same, they need to avoid overlapping in memory. The destination acceleration structure and the scratch buffer need to have enough space in memory to hold the acceleration structure data. Call the [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLDevice\/accelerationStructureSizes(descriptor:)] method on the Metal device object to get the required space. If you compact the source structure, the destination needs to be at least as large as the compacted size of the source acceleration structure.",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "tvOS",
    "visionOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/Metal\/MTLAccelerationStructureCommandEncoder\/refit(sourceAccelerationStructure:descriptor:destinationAccelerationStructure:scratchBuffer:scratchBufferOffset:options:)\ncrawled: 2025-12-05T10:25:45Z\n---\n\n# refit(sourceAccelerationStructure:descriptor:destinationAccelerationStructure:scratchBuffer:scratchBufferOffset:options:)\n\n**Instance Method**\n\nUpdates an acceleration structure with new geometry or instance data, with options that control the refitting process.\n\n## Declaration\n\n```swift\nfunc refit(sourceAccelerationStructure: any MTLAccelerationStructure, descriptor: MTLAccelerationStructureDescriptor, destinationAccelerationStructure: (any MTLAccelerationStructure)?, scratchBuffer: (any MTLBuffer)?, scratchBufferOffset: Int, options: MTLAccelerationStructureRefitOptions = [])\n```\n\n## Parameters\n\n- **sourceAccelerationStructure**: The source acceleration structure.\n- **descriptor**: A description of the updated acceleration structure.\n- **destinationAccelerationStructure**: The destination to write the new acceleration structure to. Pass the same acceleration structure or `nil` to refit the structure in place.\n- **scratchBuffer**: A buffer used to hold data while building the acceleration structure. Pass `nil` if [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLAccelerationStructureSizes\/refitScratchBufferSize] returns zero.\n- **scratchBufferOffset**: An offset, in bytes, in the scratch buffer where the scratch memory starts.\n- **options**: Options that control the refitting process.\n\n## Discussion\n\nUse refitting to update an acceleration structure when you make small changes to the underlying geometry. Refitting performs much faster than rebuilding an acceleration structure from scratch. However, ray-tracing performance may degrade, based on how many changes you make to the geometry data.\n\nYou can’t use refitting to add or remove geometry in the acceleration structure.\n\nIf the source and destination acceleration structures are not the same, they need to avoid overlapping in memory. The destination acceleration structure and the scratch buffer need to have enough space in memory to hold the acceleration structure data. Call the [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLDevice\/accelerationStructureSizes(descriptor:)] method on the Metal device object to get the required space. If you compact the source structure, the destination needs to be at least as large as the compacted size of the source acceleration structure.\n\n## Refitting an acceleration structure\n\n- **refit(sourceAccelerationStructure:descriptor:destinationAccelerationStructure:scratchBuffer:scratchBufferOffset:)**: Updates an acceleration structure with new geometry or instance data.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Updates an acceleration structure with new geometry or instance data.",
          "name" : "refit(sourceAccelerationStructure:descriptor:destinationAccelerationStructure:scratchBuffer:scratchBufferOffset:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLAccelerationStructureCommandEncoder\/refit(sourceAccelerationStructure:descriptor:destinationAccelerationStructure:scratchBuffer:scratchBufferOffset:)"
        }
      ],
      "title" : "Refitting an acceleration structure"
    }
  ],
  "source" : "appleJSON",
  "title" : "refit(sourceAccelerationStructure:descriptor:destinationAccelerationStructure:scratchBuffer:scratchBufferOffset:options:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLAccelerationStructureCommandEncoder\/refit(sourceAccelerationStructure:descriptor:destinationAccelerationStructure:scratchBuffer:scratchBufferOffset:options:)"
}