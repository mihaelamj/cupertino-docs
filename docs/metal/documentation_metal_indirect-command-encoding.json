{
  "abstract" : "Store draw commands in Metal buffers and run them at a later time on the GPU, either once or repeatedly.",
  "codeExamples" : [

  ],
  "contentHash" : "1e5a9c9ccf3418dc4e28159216d0b9e7b48981f6e7be390acc81ced802315ff0",
  "crawledAt" : "2025-12-03T04:12:55Z",
  "id" : "D6412A6E-2731-4768-A3DE-BD2C93E59253",
  "kind" : "collection",
  "language" : "swift",
  "module" : "Metal",
  "overview" : "## Overview\n\nYou can use an [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLIndirectCommandBuffer] instance to store draw commands and invoke them at a later time. Metal executes all the draw commands in an indirect command buffer each time you submit it. This means you can use indirect command buffers multiple times, unlike [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLCommandBuffer] instances, which are all single-use.\n\nYou can encode an indirect command buffer to run on either the CPU or the GPU. However, the GPU gives you the ability to immediately use the output of one pass as the input of a subsequent pass. For example, you can create an indirect command buffer with commands that conditionally draw visible items by running:",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/Metal\/indirect-command-encoding\ncrawled: 2025-12-03T04:12:55Z\n---\n\n# Indirect command encoding\n\n**API Collection**\n\nStore draw commands in Metal buffers and run them at a later time on the GPU, either once or repeatedly.\n\n## Overview\n\nYou can use an [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLIndirectCommandBuffer] instance to store draw commands and invoke them at a later time. Metal executes all the draw commands in an indirect command buffer each time you submit it. This means you can use indirect command buffers multiple times, unlike [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLCommandBuffer] instances, which are all single-use.\n\nYou can encode an indirect command buffer to run on either the CPU or the GPU. However, the GPU gives you the ability to immediately use the output of one pass as the input of a subsequent pass. For example, you can create an indirect command buffer with commands that conditionally draw visible items by running:\n\n1. A compute kernel that identifies visible geometry and saves it to a result buffer\n2. An indirect command buffer that uses the result buffer as its input to make decisions on what to draw\n\n## Indirect command buffers\n\n- **Creating an indirect command buffer**: Configure a descriptor to specify the properties of an indirect command buffer.\n- **Specifying drawing and dispatch arguments indirectly**: Use indirect commands if you don’t know your draw or dispatch call arguments when you encode the command.\n- **Encoding indirect command buffers on the CPU**: Reduce CPU overhead and simplify your command execution by reusing commands.\n- **Encoding indirect command buffers on the GPU**: Maximize CPU to GPU parallelization by generating render commands on the GPU.\n- **MTLIndirectCommandBuffer**: A command buffer containing reusable commands, encoded either on the CPU or GPU.\n- **MTLIndirectCommandBufferDescriptor**: A configuration you create to customize an indirect command buffer.\n- **MTLIndirectCommandType**: The types of commands that you can encode into the indirect command buffer.\n- **MTLIndirectCommandBufferExecutionRange**: A range of commands in an indirect command buffer.\n- **MTLIndirectCommandBufferExecutionRangeMake(_:_:)**: Creates a command execution range.\n\n## Indirect compute commands\n\n- **MTLIndirectComputeCommand**: A compute command in an indirect command buffer.\n- **MTLRegion**: The bounds for a subset of an instance’s elements.\n- **MTLSize**: A type that represents one, two, or three dimensions of a type instance, such as an array or texture.\n- **MTLOrigin**: The coordinates for the front upper-left corner of a region.\n- **MTLStageInRegionIndirectArguments**: The data layout required for the arguments needed to specify the stage-in region.\n- **MTLDispatchThreadgroupsIndirectArguments**: The data layout required for arguments needed to specify the size of threadgroups.\n\n## Render compute commands\n\n- **MTLIndirectRenderCommand**: A render command in an indirect command buffer.\n- **MTLDrawPatchIndirectArguments**: The data layout required for drawing patches via indirect buffer calls.\n- **MTLDrawPrimitivesIndirectArguments**: The data layout required for drawing primitives via indirect buffer calls.\n- **MTLDrawIndexedPrimitivesIndirectArguments**: The data layout required for drawing indexed primitives via indirect buffer calls.\n\n## Command encoders\n\n- **Render passes**: Encode a render pass to draw graphics into an image.\n- **Compute passes**: Encode a compute pass that runs computations in parallel on a thread grid, processing and manipulating Metal resource data on multiple cores of a GPU.\n- **Machine-learning passes**: Add machine-learning model inference to your Metal app’s GPU workflow.\n- **Blit passes**: Encode a block information transfer pass to adjust and copy data to and from GPU resources, such as buffers and textures.\n- **Ray tracing with acceleration structures**: Build a representation of your scene’s geometry using triangles and bounding volumes to quickly trace rays through the scene.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Configure a descriptor to specify the properties of an indirect command buffer.",
          "name" : "Creating an indirect command buffer",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/creating-an-indirect-command-buffer"
        },
        {
          "description" : "Use indirect commands if you don’t know your draw or dispatch call arguments when you encode the command.",
          "name" : "Specifying drawing and dispatch arguments indirectly",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/specifying-drawing-and-dispatch-arguments-indirectly"
        },
        {
          "description" : "Reduce CPU overhead and simplify your command execution by reusing commands.",
          "name" : "Encoding indirect command buffers on the CPU",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/encoding-indirect-command-buffers-on-the-cpu"
        },
        {
          "description" : "Maximize CPU to GPU parallelization by generating render commands on the GPU.",
          "name" : "Encoding indirect command buffers on the GPU",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/encoding-indirect-command-buffers-on-the-gpu"
        },
        {
          "description" : "A command buffer containing reusable commands, encoded either on the CPU or GPU.",
          "name" : "MTLIndirectCommandBuffer",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLIndirectCommandBuffer"
        },
        {
          "description" : "A configuration you create to customize an indirect command buffer.",
          "name" : "MTLIndirectCommandBufferDescriptor",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLIndirectCommandBufferDescriptor"
        },
        {
          "description" : "The types of commands that you can encode into the indirect command buffer.",
          "name" : "MTLIndirectCommandType",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLIndirectCommandType"
        },
        {
          "description" : "A range of commands in an indirect command buffer.",
          "name" : "MTLIndirectCommandBufferExecutionRange",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLIndirectCommandBufferExecutionRange"
        },
        {
          "description" : "Creates a command execution range.",
          "name" : "MTLIndirectCommandBufferExecutionRangeMake(_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLIndirectCommandBufferExecutionRangeMake(_:_:)"
        }
      ],
      "title" : "Indirect command buffers"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "A compute command in an indirect command buffer.",
          "name" : "MTLIndirectComputeCommand",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLIndirectComputeCommand"
        },
        {
          "description" : "The bounds for a subset of an instance’s elements.",
          "name" : "MTLRegion",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLRegion"
        },
        {
          "description" : "A type that represents one, two, or three dimensions of a type instance, such as an array or texture.",
          "name" : "MTLSize",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLSize"
        },
        {
          "description" : "The coordinates for the front upper-left corner of a region.",
          "name" : "MTLOrigin",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLOrigin"
        },
        {
          "description" : "The data layout required for the arguments needed to specify the stage-in region.",
          "name" : "MTLStageInRegionIndirectArguments",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLStageInRegionIndirectArguments"
        },
        {
          "description" : "The data layout required for arguments needed to specify the size of threadgroups.",
          "name" : "MTLDispatchThreadgroupsIndirectArguments",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLDispatchThreadgroupsIndirectArguments"
        }
      ],
      "title" : "Indirect compute commands"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "A render command in an indirect command buffer.",
          "name" : "MTLIndirectRenderCommand",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLIndirectRenderCommand"
        },
        {
          "description" : "The data layout required for drawing patches via indirect buffer calls.",
          "name" : "MTLDrawPatchIndirectArguments",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLDrawPatchIndirectArguments"
        },
        {
          "description" : "The data layout required for drawing primitives via indirect buffer calls.",
          "name" : "MTLDrawPrimitivesIndirectArguments",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLDrawPrimitivesIndirectArguments"
        },
        {
          "description" : "The data layout required for drawing indexed primitives via indirect buffer calls.",
          "name" : "MTLDrawIndexedPrimitivesIndirectArguments",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLDrawIndexedPrimitivesIndirectArguments"
        }
      ],
      "title" : "Render compute commands"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Encode a render pass to draw graphics into an image.",
          "name" : "Render passes",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/render-passes"
        },
        {
          "description" : "Encode a compute pass that runs computations in parallel on a thread grid, processing and manipulating Metal resource data on multiple cores of a GPU.",
          "name" : "Compute passes",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/compute-passes"
        },
        {
          "description" : "Add machine-learning model inference to your Metal app’s GPU workflow.",
          "name" : "Machine-learning passes",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/machine-learning-passes"
        },
        {
          "description" : "Encode a block information transfer pass to adjust and copy data to and from GPU resources, such as buffers and textures.",
          "name" : "Blit passes",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/blit-passes"
        },
        {
          "description" : "Build a representation of your scene’s geometry using triangles and bounding volumes to quickly trace rays through the scene.",
          "name" : "Ray tracing with acceleration structures",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/ray-tracing-with-acceleration-structures"
        }
      ],
      "title" : "Command encoders"
    }
  ],
  "source" : "appleJSON",
  "title" : "Indirect command encoding",
  "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/indirect-command-encoding"
}