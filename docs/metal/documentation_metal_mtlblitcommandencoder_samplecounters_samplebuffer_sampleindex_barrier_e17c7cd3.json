{
  "abstract" : "Encodes a command that samples the GPU’s hardware counters during a blit pass and stores the data in a counter sample buffer.",
  "codeExamples" : [

  ],
  "contentHash" : "d582ef53c1311cb5fa74d3e445a4d1e5ce10bc52e8bb5a80ab4c4c6393ca0be2",
  "crawledAt" : "2025-12-05T10:21:55Z",
  "declaration" : {
    "code" : "func sampleCounters(sampleBuffer: any MTLCounterSampleBuffer, sampleIndex: Int, barrier: Bool)",
    "language" : "swift"
  },
  "id" : "C50BFF5D-2066-4E0F-9970-5FCCEF4DCCA4",
  "kind" : "method",
  "language" : "swift",
  "module" : "Metal",
  "overview" : "## Discussion\n\nInserting a barrier ensures that any work you encode with this encoder is complete before the GPU samples the hardware counters. If you don’t insert a barrier, the GPU can sample the counters concurrently with other commands you encode with this encoder. Using a barrier can help the counter results be more predictable and repeatable, but it may adversely affect your app’s runtime performance.",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "tvOS",
    "visionOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/Metal\/MTLBlitCommandEncoder\/sampleCounters(sampleBuffer:sampleIndex:barrier:)\ncrawled: 2025-12-05T10:21:55Z\n---\n\n# sampleCounters(sampleBuffer:sampleIndex:barrier:)\n\n**Instance Method**\n\nEncodes a command that samples the GPU’s hardware counters during a blit pass and stores the data in a counter sample buffer.\n\n## Declaration\n\n```swift\nfunc sampleCounters(sampleBuffer: any MTLCounterSampleBuffer, sampleIndex: Int, barrier: Bool)\n```\n\n## Parameters\n\n- **sampleBuffer**: A counter sample buffer where the command stores the sample data.\n- **sampleIndex**: A location within `sampleBuffer` where the command stores the sample data.\n- **barrier**: A Boolean value that indicates whether the command inserts a barrier before taking the sample.\n\n## Discussion\n\nInserting a barrier ensures that any work you encode with this encoder is complete before the GPU samples the hardware counters. If you don’t insert a barrier, the GPU can sample the counters concurrently with other commands you encode with this encoder. Using a barrier can help the counter results be more predictable and repeatable, but it may adversely affect your app’s runtime performance.\n\n\n\n## Sampling counters\n\n- **resolveCounters(_:range:destinationBuffer:destinationOffset:)**: Encodes a command that resolves the data from the samples in a sample counter buffer and stores the results into a buffer.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Encodes a command that resolves the data from the samples in a sample counter buffer and stores the results into a buffer.",
          "name" : "resolveCounters(_:range:destinationBuffer:destinationOffset:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLBlitCommandEncoder\/resolveCounters(_:range:destinationBuffer:destinationOffset:)"
        }
      ],
      "title" : "Sampling counters"
    }
  ],
  "source" : "appleJSON",
  "title" : "sampleCounters(sampleBuffer:sampleIndex:barrier:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLBlitCommandEncoder\/sampleCounters(sampleBuffer:sampleIndex:barrier:)"
}