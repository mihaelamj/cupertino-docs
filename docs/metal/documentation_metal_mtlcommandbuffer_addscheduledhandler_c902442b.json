{
  "abstract" : "Registers a completion handler the GPU device calls immediately after it schedules the command buffer to run on the GPU.",
  "codeExamples" : [

  ],
  "contentHash" : "6cc4fab20848d369c6490607db8c3c9a908b6ffdb66cdb9c4e54e25b292a97dc",
  "crawledAt" : "2025-12-04T22:06:24Z",
  "declaration" : {
    "code" : "func addScheduledHandler(_ block: @escaping MTLCommandBufferHandler)",
    "language" : "swift"
  },
  "id" : "09AE8CFD-1679-430A-B1F2-6CCD54F46987",
  "kind" : "method",
  "language" : "swift",
  "module" : "Metal",
  "overview" : "## Discussion\n\nYou can register one or more scheduling completion handlers for the same command buffer. The GPU device’s driver (on the CPU) calls the completion handlers after it finishes scheduling the command buffer to run on the GPU.\n\nThe GPU device schedules each command buffer — along with tasks from other command buffers — after it identifies the command buffer’s dependencies. At that time, the GPU device sets the command buffer’s status to [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLCommandBufferStatus\/scheduled] and calls your completion handler.\n\nYou can use the command buffer’s [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLCommandBuffer\/kernelEndTime] and [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLCommandBuffer\/kernelStartTime] properties to calculate how much time the CPU spends scheduling the command buffer.",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "tvOS",
    "visionOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/Metal\/MTLCommandBuffer\/addScheduledHandler(_:)\ncrawled: 2025-12-04T22:06:24Z\n---\n\n# addScheduledHandler(_:)\n\n**Instance Method**\n\nRegisters a completion handler the GPU device calls immediately after it schedules the command buffer to run on the GPU.\n\n## Declaration\n\n```swift\nfunc addScheduledHandler(_ block: @escaping MTLCommandBufferHandler)\n```\n\n## Parameters\n\n- **block**: A Swift closure or an Objective-C block that Metal calls after it schedules the command buffer to run on the GPU.\n\n## Discussion\n\nYou can register one or more scheduling completion handlers for the same command buffer. The GPU device’s driver (on the CPU) calls the completion handlers after it finishes scheduling the command buffer to run on the GPU.\n\n\n\nThe GPU device schedules each command buffer — along with tasks from other command buffers — after it identifies the command buffer’s dependencies. At that time, the GPU device sets the command buffer’s status to [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLCommandBufferStatus\/scheduled] and calls your completion handler.\n\n\n\nYou can use the command buffer’s [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLCommandBuffer\/kernelEndTime] and [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLCommandBuffer\/kernelStartTime] properties to calculate how much time the CPU spends scheduling the command buffer.\n\n\n\n## Registering state change handlers\n\n- **addCompletedHandler(_:)**: Registers a completion handler the GPU device calls immediately after the GPU finishes running the commands in the command buffer.\n- **MTLCommandBufferHandler**: A completion handler signature a GPU device calls when it finishes scheduling a command buffer, or when the GPU finishes running it.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Registers a completion handler the GPU device calls immediately after the GPU finishes running the commands in the command buffer.",
          "name" : "addCompletedHandler(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLCommandBuffer\/addCompletedHandler(_:)"
        },
        {
          "description" : "A completion handler signature a GPU device calls when it finishes scheduling a command buffer, or when the GPU finishes running it.",
          "name" : "MTLCommandBufferHandler",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLCommandBufferHandler"
        }
      ],
      "title" : "Registering state change handlers"
    }
  ],
  "source" : "appleJSON",
  "title" : "addScheduledHandler(_:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLCommandBuffer\/addScheduledHandler(_:)"
}