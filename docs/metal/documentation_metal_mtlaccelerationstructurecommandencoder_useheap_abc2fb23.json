{
  "abstract" : "Makes the resources contained in the specified heap available to the acceleration structure pass.",
  "codeExamples" : [

  ],
  "contentHash" : "1057e7634e343e11b2092bbbb25cea0163a36f7e7b6609b69ec939a4915ad495",
  "crawledAt" : "2025-12-05T10:25:47Z",
  "declaration" : {
    "code" : "func useHeap(_ heap: any MTLHeap)",
    "language" : "swift"
  },
  "id" : "21C8A841-B0FD-49CD-AEBA-45B08EBA9D12",
  "kind" : "method",
  "language" : "swift",
  "module" : "Metal",
  "overview" : "## Discussion\n\nThis method makes all the resources in the heap resident for the duration of a compute pass and ensures that they’re in a format compatible with the compute function.\n\nCall this method before issuing any dispatch calls that may access the resources in the heap.\n\nYou can only read or sample resources in the specified heap. This method ignores render targets (textures that specify a [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLTextureUsage\/renderTarget] usage option) and writable textures (textures that specify a [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLTextureUsage\/shaderWrite] usage option) within the heap. To use these resources, you need to call the [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLComputeCommandEncoder\/useResource(_:usage:)] method instead.",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "tvOS",
    "visionOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/Metal\/MTLAccelerationStructureCommandEncoder\/useHeap(_:)\ncrawled: 2025-12-05T10:25:47Z\n---\n\n# useHeap(_:)\n\n**Instance Method**\n\nMakes the resources contained in the specified heap available to the acceleration structure pass.\n\n## Declaration\n\n```swift\nfunc useHeap(_ heap: any MTLHeap)\n```\n\n## Parameters\n\n- **heap**: A heap that contains resources within an argument buffer.\n\n## Discussion\n\nThis method makes all the resources in the heap resident for the duration of a compute pass and ensures that they’re in a format compatible with the compute function.\n\nCall this method before issuing any dispatch calls that may access the resources in the heap.\n\nYou can only read or sample resources in the specified heap. This method ignores render targets (textures that specify a [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLTextureUsage\/renderTarget] usage option) and writable textures (textures that specify a [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLTextureUsage\/shaderWrite] usage option) within the heap. To use these resources, you need to call the [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLComputeCommandEncoder\/useResource(_:usage:)] method instead.\n\n\n\n## Making indirect resources resident\n\n- **useHeaps(_:)**: Makes the resources contained in the specified heaps available to the acceleration structure pass.\n- **useResource(_:usage:)**: Makes a resource available to the acceleration structure pass.\n- **useResources(_:usage:)**: Makes multiple resources available to the acceleration structure pass.\n- **MTLResourceUsage**: Options that describe how a graphics or compute function uses an argument buffer’s resource.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Makes the resources contained in the specified heaps available to the acceleration structure pass.",
          "name" : "useHeaps(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLAccelerationStructureCommandEncoder\/useHeaps(_:)"
        },
        {
          "description" : "Makes a resource available to the acceleration structure pass.",
          "name" : "useResource(_:usage:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLAccelerationStructureCommandEncoder\/useResource(_:usage:)"
        },
        {
          "description" : "Makes multiple resources available to the acceleration structure pass.",
          "name" : "useResources(_:usage:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLAccelerationStructureCommandEncoder\/useResources(_:usage:)"
        },
        {
          "description" : "Options that describe how a graphics or compute function uses an argument buffer’s resource.",
          "name" : "MTLResourceUsage",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLResourceUsage"
        }
      ],
      "title" : "Making indirect resources resident"
    }
  ],
  "source" : "appleJSON",
  "title" : "useHeap(_:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLAccelerationStructureCommandEncoder\/useHeap(_:)"
}