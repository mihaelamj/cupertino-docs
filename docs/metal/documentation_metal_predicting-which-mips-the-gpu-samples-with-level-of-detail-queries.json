{
  "abstract" : "Determine in advance which mipmap levels the GPU requires to sample a texture.",
  "codeExamples" : [
    {
      "code" : "float clampedLOD = texture.calculate_clamped_lod(mySampler, coords);\nfloat unclampedLOD = texture.calculate_unclamped_lod(mySampler, coords);",
      "language" : "metal"
    }
  ],
  "contentHash" : "4e7d42c7c09194e531dea1a8cf189664d623f1a61b7047f367887362002b84a6",
  "crawledAt" : "2025-12-02T05:50:30Z",
  "id" : "86E6A337-F4E7-4AC1-88A2-7B8D626AA367",
  "kind" : "article",
  "module" : "Metal",
  "overview" : "## Overview\n\nWhen you sample a texture, the GPU automatically chooses which mipmaps to access and fetches pixels from them. Each mipmap represents a different level-of-detail (LOD).\n\nSometimes, you want to know which mipmaps the GPU would read from. For example, if only some of your mipmaps have data, you might use a clamp operation to limit the range of mipmaps the GPU can sample from, but want to know when the GPU requires sampling higher mipmaps. Metal Shading Language provides texture functions that you can use to determine which mipmaps your shader would access if it were to sample the texture.\n\n### Check for level-of-detail support\n\nBefore loading any shaders that use LOD queries, make sure the GPU supports them by checking if it supports one of the following:\n\n### Determine level of detail\n\nIn your shader, the functions that return LOD information have signatures that are similar to those of functions used to sample textures. There are two kinds of these functions: clamped and unclamped. The clamped kind restricts LOD selection by applying the sampler’s range of permitted values, the range of mipmaps provided in the texture, and the sampler’s anisotropy settings. The unclamped kind returns the raw calculation.\n\nA fractional part in a returned value indicates that the value is between two mipmaps. The fractional part of the number is the blending weight between the two mipmaps if you’ve specified linear mipmap blending.\n\n### Determine level of detail when shader support is unavailable\n\nAlternatively, you can get the LOD by performing the calculation yourself, based on the size of the model object and its distance from the camera. For an example of this technique, see [doc:\/\/com.apple.metal\/documentation\/Metal\/using-function-specialization-to-build-pipeline-variants].",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/Metal\/predicting-which-mips-the-gpu-samples-with-level-of-detail-queries\ncrawled: 2025-12-02T05:50:30Z\n---\n\n# Predicting which mips the GPU samples with level-of-detail queries\n\n**Article**\n\nDetermine in advance which mipmap levels the GPU requires to sample a texture.\n\n## Overview\n\nWhen you sample a texture, the GPU automatically chooses which mipmaps to access and fetches pixels from them. Each mipmap represents a different level-of-detail (LOD).\n\nSometimes, you want to know which mipmaps the GPU would read from. For example, if only some of your mipmaps have data, you might use a clamp operation to limit the range of mipmaps the GPU can sample from, but want to know when the GPU requires sampling higher mipmaps. Metal Shading Language provides texture functions that you can use to determine which mipmaps your shader would access if it were to sample the texture.\n\n### Check for level-of-detail support\n\nBefore loading any shaders that use LOD queries, make sure the GPU supports them by checking if it supports one of the following:\n\n- The [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLGPUFamily\/mac2] feature set.\n- The [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLGPUFamily\/apple7] feature set.\n\n\n\n### Determine level of detail\n\nIn your shader, the functions that return LOD information have signatures that are similar to those of functions used to sample textures. There are two kinds of these functions: clamped and unclamped. The clamped kind restricts LOD selection by applying the sampler’s range of permitted values, the range of mipmaps provided in the texture, and the sampler’s anisotropy settings. The unclamped kind returns the raw calculation.\n\n```metal\nfloat clampedLOD = texture.calculate_clamped_lod(mySampler, coords);\nfloat unclampedLOD = texture.calculate_unclamped_lod(mySampler, coords);\n```\n\nA fractional part in a returned value indicates that the value is between two mipmaps. The fractional part of the number is the blending weight between the two mipmaps if you’ve specified linear mipmap blending.\n\n### Determine level of detail when shader support is unavailable\n\nAlternatively, you can get the LOD by performing the calculation yourself, based on the size of the model object and its distance from the camera. For an example of this technique, see [doc:\/\/com.apple.metal\/documentation\/Metal\/using-function-specialization-to-build-pipeline-variants].\n\n## Texture mipmapping\n\n- **Improving texture sampling quality and performance with mipmaps**: Avoid texture-rendering artifacts and reduce the GPU’s workload by creating smaller versions of a texture.\n- **Creating a mipmapped texture**: Decide whether a texture that you’re creating needs mipmaps.\n- **Copying data into or out of mipmaps**: Specify which mipmaps that the data transfer affects.\n- **Generating mipmap data**: Create your mipmaps either when you author content or at runtime.\n- **Adding mipmap filtering to samplers**: Specify how the GPU samples mipmaps in your textures.\n- **Restricting access to specific mipmaps**: Set the range of mipmap levels that a sampler can access.\n- **Dynamically adjusting texture level of detail**: Defer generating or loading larger mipmaps until that level of detail is needed.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Avoid texture-rendering artifacts and reduce the GPU’s workload by creating smaller versions of a texture.",
          "name" : "Improving texture sampling quality and performance with mipmaps",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/improving-texture-sampling-quality-and-performance-with-mipmaps"
        },
        {
          "description" : "Decide whether a texture that you’re creating needs mipmaps.",
          "name" : "Creating a mipmapped texture",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/creating-a-mipmapped-texture"
        },
        {
          "description" : "Specify which mipmaps that the data transfer affects.",
          "name" : "Copying data into or out of mipmaps",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/copying-data-into-or-out-of-mipmaps"
        },
        {
          "description" : "Create your mipmaps either when you author content or at runtime.",
          "name" : "Generating mipmap data",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/generating-mipmap-data"
        },
        {
          "description" : "Specify how the GPU samples mipmaps in your textures.",
          "name" : "Adding mipmap filtering to samplers",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/adding-mipmap-filtering-to-samplers"
        },
        {
          "description" : "Set the range of mipmap levels that a sampler can access.",
          "name" : "Restricting access to specific mipmaps",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/restricting-access-to-specific-mipmaps"
        },
        {
          "description" : "Defer generating or loading larger mipmaps until that level of detail is needed.",
          "name" : "Dynamically adjusting texture level of detail",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/dynamically-adjusting-texture-level-of-detail"
        }
      ],
      "title" : "Texture mipmapping"
    }
  ],
  "source" : "appleJSON",
  "title" : "Predicting which mips the GPU samples with level-of-detail queries",
  "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/predicting-which-mips-the-gpu-samples-with-level-of-detail-queries"
}