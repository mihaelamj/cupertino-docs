{
  "abstract" : "Ensures kernel calls that the system encodes in subsequent commands have access to multiple resources.",
  "codeExamples" : [

  ],
  "contentHash" : "74973f2dd31b7be2d221e4e04e6dfd6a3a2c0de01a2bff641e25490719618624",
  "crawledAt" : "2025-12-05T10:20:39Z",
  "declaration" : {
    "code" : "func useResources(_ resources: [any MTLResource], usage: MTLResourceUsage)",
    "language" : "swift"
  },
  "id" : "9438291B-6361-4D9B-9773-C54B76854F34",
  "kind" : "method",
  "language" : "swift",
  "module" : "Metal",
  "overview" : "## Discussion\n\nYou can make many resources *resident* (available in GPU memory) for the remaining duration of the compute pass by calling this method. Call the method before encoding function calls that may access these `resources` through an argument buffer. The method ensures the resource is in a format that’s compatible with the kernels that depend on it.\n\nThe method also informs Metal when to apply hazard tracking for a resource you create with [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLHazardTrackingMode\/tracked]. For a resource you create with [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLHazardTrackingMode\/untracked], you need to apply an [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLFence] or an [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLEvent] to account for potential reading and writing hazards.\n\nYou can reconfigure an individual resource’s `usage` options for subsequent draw calls with the [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLComputeCommandEncoder\/useResource(_:usage:)] method.\n\nApps typically call this method for a resource in an argument buffer as a part of their *bindless* implementation. For more information about argument buffers and bindless implementations, see [doc:\/\/com.apple.metal\/documentation\/Metal\/improving-cpu-performance-by-using-argument-buffers] and [https:\/\/developer.apple.com\/videos\/play\/wwdc2022\/10101\/], respectively.",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "tvOS",
    "visionOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/Metal\/MTLComputeCommandEncoder\/useResources(_:usage:)\ncrawled: 2025-12-05T10:20:39Z\n---\n\n# useResources(_:usage:)\n\n**Instance Method**\n\nEnsures kernel calls that the system encodes in subsequent commands have access to multiple resources.\n\n## Declaration\n\n```swift\nfunc useResources(_ resources: [any MTLResource], usage: MTLResourceUsage)\n```\n\n## Parameters\n\n- **resources**: A list of [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLResource] instances used in one or more argument buffers.\n- **usage**: All the applicable access types for use of these resources, including [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLResourceUsage\/read] and [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLResourceUsage\/write]. Your resource usage type applies to all resources passed to this method call.\n\nFor applicable resources, you may be able to prevent the GPU from unnecessarily decompressing color attachments on some devices by setting `usage` to [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLResourceUsage\/read].\n\n## Discussion\n\nYou can make many resources *resident* (available in GPU memory) for the remaining duration of the compute pass by calling this method. Call the method before encoding function calls that may access these `resources` through an argument buffer. The method ensures the resource is in a format that’s compatible with the kernels that depend on it.\n\n\n\nThe method also informs Metal when to apply hazard tracking for a resource you create with [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLHazardTrackingMode\/tracked]. For a resource you create with [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLHazardTrackingMode\/untracked], you need to apply an [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLFence] or an [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLEvent] to account for potential reading and writing hazards.\n\nYou can reconfigure an individual resource’s `usage` options for subsequent draw calls with the [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLComputeCommandEncoder\/useResource(_:usage:)] method.\n\nApps typically call this method for a resource in an argument buffer as a part of their *bindless* implementation. For more information about argument buffers and bindless implementations, see [doc:\/\/com.apple.metal\/documentation\/Metal\/improving-cpu-performance-by-using-argument-buffers] and [https:\/\/developer.apple.com\/videos\/play\/wwdc2022\/10101\/], respectively.\n\n## Making indirect resources resident\n\n- **useResource(_:usage:)**: Ensures kernel calls that the system encodes in subsequent commands have access to a resource.\n- **useHeap(_:)**: Ensures the shaders in the render pass’s subsequent draw commands have access to all of the resources you allocate from a heap.\n- **useHeaps(_:)**: Ensures the shaders in the render pass’s subsequent draw commands have access to all of the resources you allocate from multiple heaps.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Ensures kernel calls that the system encodes in subsequent commands have access to a resource.",
          "name" : "useResource(_:usage:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLComputeCommandEncoder\/useResource(_:usage:)"
        },
        {
          "description" : "Ensures the shaders in the render pass’s subsequent draw commands have access to all of the resources you allocate from a heap.",
          "name" : "useHeap(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLComputeCommandEncoder\/useHeap(_:)"
        },
        {
          "description" : "Ensures the shaders in the render pass’s subsequent draw commands have access to all of the resources you allocate from multiple heaps.",
          "name" : "useHeaps(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLComputeCommandEncoder\/useHeaps(_:)"
        }
      ],
      "title" : "Making indirect resources resident"
    }
  ],
  "source" : "appleJSON",
  "title" : "useResources(_:usage:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLComputeCommandEncoder\/useResources(_:usage:)"
}