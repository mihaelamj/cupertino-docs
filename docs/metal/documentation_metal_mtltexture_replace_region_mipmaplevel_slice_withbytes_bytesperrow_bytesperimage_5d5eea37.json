{
  "abstract" : "Copies pixel data into a section of a texture slice.",
  "codeExamples" : [

  ],
  "contentHash" : "c3ce1bf2f7a350944d724cdc684f9d2c184df6fc68c57dba086068ee8ff1c321",
  "crawledAt" : "2025-12-03T13:18:51Z",
  "declaration" : {
    "code" : "func replace(region: MTLRegion, mipmapLevel level: Int, slice: Int, withBytes pixelBytes: UnsafeRawPointer, bytesPerRow: Int, bytesPerImage: Int)",
    "language" : "swift"
  },
  "id" : "7E6A8DD4-CC0E-4754-9A78-AE06FC3C75AD",
  "kind" : "method",
  "language" : "swift",
  "module" : "Metal",
  "overview" : "## Discussion\n\nThis method runs on the CPU and immediately copies the pixel data into the texture. It doesn’t synchronize against any GPU memory operations to the texture. Ensure all operations that write or render to the texture complete before reading the texture’s contents using one of the following methods:\n\nIf the texture image has a compressed pixel format, only write to block-aligned regions. If the size of a dimension of region isn’t a multiple of the block size, include both the edge block and additional space up to the texture dimensions in `bytesPerRow`.\n\nTo copy your data to a private texture, copy your data to a temporary texture with non-private storage, and then use an [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLBlitCommandEncoder] to copy the data to the private texture for GPU use.",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "tvOS",
    "visionOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/Metal\/MTLTexture\/replace(region:mipmapLevel:slice:withBytes:bytesPerRow:bytesPerImage:)\ncrawled: 2025-12-03T13:18:51Z\n---\n\n# replace(region:mipmapLevel:slice:withBytes:bytesPerRow:bytesPerImage:)\n\n**Instance Method**\n\nCopies pixel data into a section of a texture slice.\n\n## Declaration\n\n```swift\nfunc replace(region: MTLRegion, mipmapLevel level: Int, slice: Int, withBytes pixelBytes: UnsafeRawPointer, bytesPerRow: Int, bytesPerImage: Int)\n```\n\n## Parameters\n\n- **region**: The location of a block of pixels in the texture slice. The region needs to be within the dimensions of the slice.\n- **level**: A zero-indexed value that specifies which mipmap level is the destination. If the texture doesn’t have mipmaps, use `0`.\n- **slice**: A zero-indexed value that specifies which texture slice is the destination:\n\n- For a cube texture, `slice` is a value between `0` and `5`, inclusive, that defines which cube face is the destination.\n- For a texture array, `slice` is the element index.\n- For a cube texture array, slice defines both the cube face and an array index. To determine the correct slice for a cube texture array, treat it as having a stride of `6`: `slice = cubeFace + arrayIndex * 6.`\n- For all other texture types, use `0`.\n- **pixelBytes**: A pointer to the bytes in memory to copy.\n- **bytesPerRow**: The stride, in bytes, of one row in the source data. For [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLTextureType\/type1D] and [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLTextureType\/type1DArray], use `0`. For raw and packed pixel types, the stride is the number of pixels in one row. For compressed pixel formats, the stride is the number of bytes from the beginning of one row of blocks to the beginning of the next. When source data consists of only a single row, use `0`.\n\nYour data type determines how you should compute `bytesPerRow`:\n\n- For raw or packed pixel data, use a value greater than or equal to the size of data in one row, and less than `32767 * pixel size`.\n- For compressed pixel data, use a multiple of the compression block size. When working with PowerVR Texture Compression (PVRTC), use `0.`\n\nNonzero values smaller than the texture width or not a multiple of the pixel size cause an error.\n- **bytesPerImage**: The stride, in bytes, between images in the source data. Supply a nonzero value only when you copy data to an [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLTextureType\/type3D] type texture. Your data type determines how you should compute `bytesPerImage`:\n\n- For data that consists only of a single image, use `0`.\n- For ordinary or packed pixel formats, use a multiple of pixel size.\n- For compressed pixel data, use a multiple of the compression block size. When working with PVRTC, use `0`.\n\nWhen copying data to a type of texture other than [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLTextureType\/type3D], use `0`.\n\n## Discussion\n\nThis method runs on the CPU and immediately copies the pixel data into the texture. It doesn’t synchronize against any GPU memory operations to the texture. Ensure all operations that write or render to the texture complete before reading the texture’s contents using one of the following methods:\n\n- Synchronize on the GPU with a [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLBlitCommandEncoder\/synchronize(resource:)] or [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLBlitCommandEncoder\/synchronize(texture:slice:level:)] command in an [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLBlitCommandEncoder].\n- Synchronize on the CPU with a callback passed to the [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLCommandBuffer\/addCompletedHandler(_:)] method to handle completion asynchronously, or the [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLCommandBuffer\/waitUntilCompleted()] method to block thread execution until the GPU work completes.\n\nIf the texture image has a compressed pixel format, only write to block-aligned regions. If the size of a dimension of region isn’t a multiple of the block size, include both the edge block and additional space up to the texture dimensions in `bytesPerRow`.\n\nTo copy your data to a private texture, copy your data to a temporary texture with non-private storage, and then use an [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLBlitCommandEncoder] to copy the data to the private texture for GPU use.\n\n## Related Documentation\n\n- **Metal Shading Language Guide**\n- **MTLPixelFormat**: The data formats that describe the organization and characteristics of individual pixels in a texture.\n- **Metal Programming Guide**\n\n## Copying data into a texture image\n\n- **replace(region:mipmapLevel:withBytes:bytesPerRow:)**: Copies a block of pixels into a section of texture slice 0.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "name" : "Metal Shading Language Guide"
        },
        {
          "description" : "The data formats that describe the organization and characteristics of individual pixels in a texture.",
          "name" : "MTLPixelFormat",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLPixelFormat"
        },
        {
          "name" : "Metal Programming Guide"
        }
      ],
      "title" : "Related Documentation"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Copies a block of pixels into a section of texture slice 0.",
          "name" : "replace(region:mipmapLevel:withBytes:bytesPerRow:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLTexture\/replace(region:mipmapLevel:withBytes:bytesPerRow:)"
        }
      ],
      "title" : "Copying data into a texture image"
    }
  ],
  "source" : "appleJSON",
  "title" : "replace(region:mipmapLevel:slice:withBytes:bytesPerRow:bytesPerImage:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLTexture\/replace(region:mipmapLevel:slice:withBytes:bytesPerRow:bytesPerImage:)"
}