{
  "abstract" : "Use EDR metadata to apply the default system tone mapping to a layer.",
  "codeExamples" : [

  ],
  "contentHash" : "d3a89b80327a0f6200e882baf08d18425a9168ff8de96fd33e86ff9162165214",
  "crawledAt" : "2025-12-02T15:54:20Z",
  "id" : "B7425F0F-3BB0-4D8D-A7C6-A2C540833A54",
  "kind" : "article",
  "language" : "swift",
  "module" : "Metal",
  "overview" : "## Overview\n\nWhen processing video content, you usually want to work in a linear color space. You also want to display content that’s consistent with how playback would appear in AVFoundation or other playback mechanisms. To create content in your app that is consistent with the system behavior, create a Metal layer with a linear color space and attach an [doc:\/\/com.apple.documentation\/documentation\/QuartzCore\/CAEDRMetadata] object defining how the system should tone map the video content.\n\nThe code below creates a Metal layer with an extended linear BT.2020 color space and metadata that applies an HDR10 tone mapping based on the reference display.\n\nYour rendering code needs to generate pixel values consistent with the EDR metadata object. For example, in the above code, the `opticalOutputScale` was set to `100`, so a pixel value of `1.0` corresponds to `100` nits. For more information, see [doc:\/\/com.apple.documentation\/documentation\/QuartzCore\/CAEDRMetadata].",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/Metal\/using-system-tone-mapping-on-video-content\ncrawled: 2025-12-02T15:54:20Z\n---\n\n# Using system tone mapping on video content\n\n**Article**\n\nUse EDR metadata to apply the default system tone mapping to a layer.\n\n## Overview\n\nWhen processing video content, you usually want to work in a linear color space. You also want to display content that’s consistent with how playback would appear in AVFoundation or other playback mechanisms. To create content in your app that is consistent with the system behavior, create a Metal layer with a linear color space and attach an [doc:\/\/com.apple.documentation\/documentation\/QuartzCore\/CAEDRMetadata] object defining how the system should tone map the video content.\n\nThe code below creates a Metal layer with an extended linear BT.2020 color space and metadata that applies an HDR10 tone mapping based on the reference display.\n\n\n\nYour rendering code needs to generate pixel values consistent with the EDR metadata object. For example, in the above code, the `opticalOutputScale` was set to `100`, so a pixel value of `1.0` corresponds to `100` nits. For more information, see [doc:\/\/com.apple.documentation\/documentation\/QuartzCore\/CAEDRMetadata].\n\n## High dynamic range content\n\n- **Processing HDR images with Metal**: Implement a post-processing pipeline using the latest features on Apple GPUs.\n- **Displaying HDR content in a Metal layer**: Bring your high dynamic range (HDR) content to compatible Mac displays.\n- **Determining support for EDR values**: Check whether a display supports EDR.\n- **Using color spaces to display HDR content**: Use a color space when you don’t need to edit or process the pixel data.\n- **Performing your own tone mapping**: Apply your own tone mapping to get the exact behavior you want.\n- **Implementing tone mapping on reference displays**: Detect reference displays and keep your content within the capabilities of the display hardware.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Implement a post-processing pipeline using the latest features on Apple GPUs.",
          "name" : "Processing HDR images with Metal",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/processing-hdr-images-with-metal"
        },
        {
          "description" : "Bring your high dynamic range (HDR) content to compatible Mac displays.",
          "name" : "Displaying HDR content in a Metal layer",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/displaying-hdr-content-in-a-metal-layer"
        },
        {
          "description" : "Check whether a display supports EDR.",
          "name" : "Determining support for EDR values",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/determining-support-for-edr-values"
        },
        {
          "description" : "Use a color space when you don’t need to edit or process the pixel data.",
          "name" : "Using color spaces to display HDR content",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/using-color-spaces-to-display-hdr-content"
        },
        {
          "description" : "Apply your own tone mapping to get the exact behavior you want.",
          "name" : "Performing your own tone mapping",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/performing-your-own-tone-mapping"
        },
        {
          "description" : "Detect reference displays and keep your content within the capabilities of the display hardware.",
          "name" : "Implementing tone mapping on reference displays",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/implementing-tone-mapping-on-reference-displays"
        }
      ],
      "title" : "High dynamic range content"
    }
  ],
  "source" : "appleJSON",
  "title" : "Using system tone mapping on video content",
  "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/using-system-tone-mapping-on-video-content"
}