{
  "abstract" : "Optimize resource performance within an argument buffer.",
  "codeExamples" : [

  ],
  "contentHash" : "03d761361058a77305f346ac471d9189d90de2eb614584dda6afdca58f74e955",
  "crawledAt" : "2025-12-02T19:37:40Z",
  "id" : "50A8453A-F5FB-4D2B-899D-72C05671C353",
  "kind" : "article",
  "language" : "swift",
  "module" : "Metal",
  "overview" : "## Overview\n\nThe Metal driver can’t automatically track the residency of argument buffer resources, but you can track it manually.\n\n### Track argument buffer resource residency manually\n\nCall an [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLRenderCommandEncoder] or [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLComputeCommandEncoder] method:\n\nThese methods perform two important functions:\n\nThe methods with a `stages` parameter also insert dependency hazards, similar to [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLFence] instances for that stage.\n\nCall these methods before issuing any draw or dispatch calls that may access the specified resources.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/metal\/tracking-the-resource-residency-of-argument-buffers\ncrawled: 2025-12-02T19:37:40Z\n---\n\n# Tracking the resource residency of argument buffers\n\n**Article**\n\nOptimize resource performance within an argument buffer.\n\n## Overview\n\nThe Metal driver can’t automatically track the residency of argument buffer resources, but you can track it manually.\n\n### Track argument buffer resource residency manually\n\nCall an [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLRenderCommandEncoder] or [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLComputeCommandEncoder] method:\n\n- For individual resources, call [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLRenderCommandEncoder\/useResource(_:usage:stages:)] or [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLComputeCommandEncoder\/useResource(_:usage:)].\n- For all resources in a heap, call [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLRenderCommandEncoder\/useHeap(_:stages:)] or [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLComputeCommandEncoder\/useHeap(_:)].\n\nThese methods perform two important functions:\n\n- They add argument buffer resources to the set of resources that the render or compute pass needs resident.\n- They ensure that argument buffer resources are in a format that’s compatible with the required function operation, as an [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLResourceUsage] value specifies.\n\nThe methods with a `stages` parameter also insert dependency hazards, similar to [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLFence] instances for that stage.\n\nCall these methods before issuing any draw or dispatch calls that may access the specified resources.\n\n\n\n## Argument buffers\n\n- **Improving CPU performance by using argument buffers**: Optimize your app’s performance by grouping your resources into argument buffers.\n- **Managing groups of resources with argument buffers**: Create argument buffers to organize related resources.\n- **Indexing argument buffers**: Assign resource indices within an argument buffer.\n- **Rendering terrain dynamically with argument buffers**: Use argument buffers to render terrain in real time with a GPU-driven pipeline.\n- **Encoding argument buffers on the GPU**: Use a compute pass to encode an argument buffer and access its arguments in a subsequent render pass.\n- **Using argument buffers with resource heaps**: Reduce CPU overhead by using arrays inside argument buffers and combining them with resource heaps.\n- **MTLArgumentDescriptor**: A representation of an argument within an argument buffer.\n- **MTLArgumentEncoder**: An interface you can use to encode argument data into an argument buffer.\n- **MTLAttributeStrideStatic**\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Optimize your app’s performance by grouping your resources into argument buffers.",
          "name" : "Improving CPU performance by using argument buffers",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/improving-cpu-performance-by-using-argument-buffers"
        },
        {
          "description" : "Create argument buffers to organize related resources.",
          "name" : "Managing groups of resources with argument buffers",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/managing-groups-of-resources-with-argument-buffers"
        },
        {
          "description" : "Assign resource indices within an argument buffer.",
          "name" : "Indexing argument buffers",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/indexing-argument-buffers"
        },
        {
          "description" : "Use argument buffers to render terrain in real time with a GPU-driven pipeline.",
          "name" : "Rendering terrain dynamically with argument buffers",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/rendering-terrain-dynamically-with-argument-buffers"
        },
        {
          "description" : "Use a compute pass to encode an argument buffer and access its arguments in a subsequent render pass.",
          "name" : "Encoding argument buffers on the GPU",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/encoding-argument-buffers-on-the-gpu"
        },
        {
          "description" : "Reduce CPU overhead by using arrays inside argument buffers and combining them with resource heaps.",
          "name" : "Using argument buffers with resource heaps",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/using-argument-buffers-with-resource-heaps"
        },
        {
          "description" : "A representation of an argument within an argument buffer.",
          "name" : "MTLArgumentDescriptor",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLArgumentDescriptor"
        },
        {
          "description" : "An interface you can use to encode argument data into an argument buffer.",
          "name" : "MTLArgumentEncoder",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLArgumentEncoder"
        },
        {
          "description" : "",
          "name" : "MTLAttributeStrideStatic",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/MTLAttributeStrideStatic"
        }
      ],
      "title" : "Argument buffers"
    }
  ],
  "source" : "appleJSON",
  "title" : "Tracking the resource residency of argument buffers",
  "url" : "https:\/\/developer.apple.com\/documentation\/metal\/tracking-the-resource-residency-of-argument-buffers"
}