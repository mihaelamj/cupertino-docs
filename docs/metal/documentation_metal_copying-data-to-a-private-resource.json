{
  "abstract" : "Use a blit command encoder to copy buffer or texture data to a private resource.",
  "codeExamples" : [

  ],
  "contentHash" : "9456f46bb003e0082d3348db7d9d389b124a865c1fa861a175375fc5666a2ffe",
  "crawledAt" : "2025-12-04T02:19:15Z",
  "id" : "1064DE9E-11FE-4750-96CB-3821067819F9",
  "kind" : "article",
  "language" : "swift",
  "module" : "Metal",
  "overview" : "## Overview\n\nResources with an [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLStorageMode\/private] storage mode are accessible only to the GPU. Private resources perform better than shared resources, and you don’t have to explicitly synchronize them the way you do for managed resources.\n\nHowever, because private resources aren’t accessible to the CPU, you can’t populate them with it. To write data from the CPU to a private resource, you need to first write the data to a shared or managed resource. You can then copy the data from that resource to the private resource.\n\nFor more information about resource storage modes, see [doc:\/\/com.apple.metal\/documentation\/Metal\/setting-resource-storage-modes].\n\n### Copying data from a shared buffer to a private buffer\n\nFirst, create a shared buffer and populate its contents using the [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLDevice\/makeBuffer(bytes:length:options:)] method.\n\nNext, create a private buffer that’s large enough to store your buffer data using the [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLDevice\/makeBuffer(length:options:)] method.\n\nFinally, encode and commit an [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLBlitCommandEncoder\/copy(from:sourceOffset:to:destinationOffset:size:)] command. Set the shared buffer as the `sourceBuffer` parameter. Set the private buffer as the `destinationBuffer` parameter.\n\n### Copying data from a shared buffer to a private texture\n\nUse this implementation to copy texture data from the CPU to a private texture in one operation, without having to synchronize a managed texture.\n\nFirst, create a shared buffer and populate its contents with your texture data.\n\nNext, create a private texture with a suitable configuration for the texture data.\n\nFinally, encode and commit an [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLBlitCommandEncoder\/copy(from:sourceOffset:sourceBytesPerRow:sourceBytesPerImage:sourceSize:to:destinationSlice:destinationLevel:destinationOrigin:)] command. Set the shared buffer as the `sourceBuffer` parameter. Set the private texture as the `destinationTexture` parameter.\n\n### Copying data from a shared or managed texture to a private texture\n\nFirst, create a shared texture or for Mac apps, a managed texture. For more information about creating buffers and textures with specific storage modes, see [doc:\/\/com.apple.metal\/documentation\/Metal\/setting-resource-storage-modes].\n\nThen populate the contents of the source texture using the [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLTexture\/replace(region:mipmapLevel:withBytes:bytesPerRow:)] method.\n\nNext, create a private texture with a suitable configuration for your texture data. If appropriate, reuse the texture descriptor that you configured for the shared or managed texture.\n\nFinally, encode and commit an [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLBlitCommandEncoder\/copy(from:sourceSlice:sourceLevel:sourceOrigin:sourceSize:to:destinationSlice:destinationLevel:destinationOrigin:)] command. Set the shared or managed texture as the `sourceTexture` parameter. Set the private texture as the `destinationTexture` parameter.\n\nCopying data from a managed texture to a private texture involves two copy operations. For the first operation, Metal synchronizes the managed texture and copies the texture data from CPU-accessible memory to GPU-accessible memory. For the second operation, Metal copies the texture data from the managed texture to the private texture.\n\n### Copying data from a private texture to a shared buffer\n\nUse this implementation to copy texture data from the GPU to a shared buffer, without having to synchronize a managed texture.\n\nFirst, create a private texture.\n\nNext, create a shared buffer that’s large enough to store your texture data.\n\nNext, encode a compute, render, or blit pass to populate the contents of your private texture.\n\nFinally, encode and commit an [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLBlitCommandEncoder\/copy(from:sourceSlice:sourceLevel:sourceOrigin:sourceSize:to:destinationOffset:destinationBytesPerRow:destinationBytesPerImage:)] command. Set the private texture as the `sourceTexture` parameter. Set the shared buffer as the `destinationBuffer` parameter.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/Metal\/copying-data-to-a-private-resource\ncrawled: 2025-12-04T02:19:15Z\n---\n\n# Copying data to a private resource\n\n**Article**\n\nUse a blit command encoder to copy buffer or texture data to a private resource.\n\n## Overview\n\nResources with an [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLStorageMode\/private] storage mode are accessible only to the GPU. Private resources perform better than shared resources, and you don’t have to explicitly synchronize them the way you do for managed resources.\n\nHowever, because private resources aren’t accessible to the CPU, you can’t populate them with it. To write data from the CPU to a private resource, you need to first write the data to a shared or managed resource. You can then copy the data from that resource to the private resource.\n\nFor more information about resource storage modes, see [doc:\/\/com.apple.metal\/documentation\/Metal\/setting-resource-storage-modes].\n\n### Copying data from a shared buffer to a private buffer\n\nFirst, create a shared buffer and populate its contents using the [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLDevice\/makeBuffer(bytes:length:options:)] method.\n\n\n\nNext, create a private buffer that’s large enough to store your buffer data using the [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLDevice\/makeBuffer(length:options:)] method.\n\n\n\nFinally, encode and commit an [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLBlitCommandEncoder\/copy(from:sourceOffset:to:destinationOffset:size:)] command. Set the shared buffer as the `sourceBuffer` parameter. Set the private buffer as the `destinationBuffer` parameter.\n\n\n\n\n\n### Copying data from a shared buffer to a private texture\n\nUse this implementation to copy texture data from the CPU to a private texture in one operation, without having to synchronize a managed texture.\n\nFirst, create a shared buffer and populate its contents with your texture data.\n\n\n\nNext, create a private texture with a suitable configuration for the texture data.\n\n\n\nFinally, encode and commit an [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLBlitCommandEncoder\/copy(from:sourceOffset:sourceBytesPerRow:sourceBytesPerImage:sourceSize:to:destinationSlice:destinationLevel:destinationOrigin:)] command. Set the shared buffer as the `sourceBuffer` parameter. Set the private texture as the `destinationTexture` parameter.\n\n\n\n### Copying data from a shared or managed texture to a private texture\n\nFirst, create a shared texture or for Mac apps, a managed texture. For more information about creating buffers and textures with specific storage modes, see [doc:\/\/com.apple.metal\/documentation\/Metal\/setting-resource-storage-modes].\n\nThen populate the contents of the source texture using the [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLTexture\/replace(region:mipmapLevel:withBytes:bytesPerRow:)] method.\n\n\n\nNext, create a private texture with a suitable configuration for your texture data. If appropriate, reuse the texture descriptor that you configured for the shared or managed texture.\n\n\n\nFinally, encode and commit an [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLBlitCommandEncoder\/copy(from:sourceSlice:sourceLevel:sourceOrigin:sourceSize:to:destinationSlice:destinationLevel:destinationOrigin:)] command. Set the shared or managed texture as the `sourceTexture` parameter. Set the private texture as the `destinationTexture` parameter.\n\n\n\nCopying data from a managed texture to a private texture involves two copy operations. For the first operation, Metal synchronizes the managed texture and copies the texture data from CPU-accessible memory to GPU-accessible memory. For the second operation, Metal copies the texture data from the managed texture to the private texture.\n\n### Copying data from a private texture to a shared buffer\n\nUse this implementation to copy texture data from the GPU to a shared buffer, without having to synchronize a managed texture.\n\nFirst, create a private texture.\n\n\n\nNext, create a shared buffer that’s large enough to store your texture data.\n\n\n\nNext, encode a compute, render, or blit pass to populate the contents of your private texture.\n\n\n\nFinally, encode and commit an [doc:\/\/com.apple.metal\/documentation\/Metal\/MTLBlitCommandEncoder\/copy(from:sourceSlice:sourceLevel:sourceOrigin:sourceSize:to:destinationOffset:destinationBytesPerRow:destinationBytesPerImage:)] command. Set the private texture as the `sourceTexture` parameter. Set the shared buffer as the `destinationBuffer` parameter.\n\n\n\n## Resource management\n\n- **Setting resource storage modes**: Set a storage mode that defines the memory location and access permissions of a resource.\n- **Choosing a resource storage mode for Apple GPUs**: Select an appropriate storage mode for your textures and buffers on Apple GPUs.\n- **Choosing a resource storage mode for Intel and AMD GPUs**: Select an appropriate storage mode for your textures and buffers on AMD and Intel GPUs.\n- **Synchronizing a managed resource in macOS**: Manually synchronize memory for a Metal resource in apps.\n- **Transferring data between connected GPUs**: Use high-speed connections between GPUs to transfer data quickly.\n- **Reducing the memory footprint of Metal apps**: Learn best practices for using memory efficiently in iOS and tvOS.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Set a storage mode that defines the memory location and access permissions of a resource.",
          "name" : "Setting resource storage modes",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/setting-resource-storage-modes"
        },
        {
          "description" : "Select an appropriate storage mode for your textures and buffers on Apple GPUs.",
          "name" : "Choosing a resource storage mode for Apple GPUs",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/choosing-a-resource-storage-mode-for-apple-gpus"
        },
        {
          "description" : "Select an appropriate storage mode for your textures and buffers on AMD and Intel GPUs.",
          "name" : "Choosing a resource storage mode for Intel and AMD GPUs",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/choosing-a-resource-storage-mode-for-intel-and-amd-gpus"
        },
        {
          "description" : "Manually synchronize memory for a Metal resource in apps.",
          "name" : "Synchronizing a managed resource in macOS",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/synchronizing-a-managed-resource-in-macos"
        },
        {
          "description" : "Use high-speed connections between GPUs to transfer data quickly.",
          "name" : "Transferring data between connected GPUs",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/transferring-data-between-connected-gpus"
        },
        {
          "description" : "Learn best practices for using memory efficiently in iOS and tvOS.",
          "name" : "Reducing the memory footprint of Metal apps",
          "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/reducing-the-memory-footprint-of-metal-apps"
        }
      ],
      "title" : "Resource management"
    }
  ],
  "source" : "appleJSON",
  "title" : "Copying data to a private resource",
  "url" : "https:\/\/developer.apple.com\/documentation\/Metal\/copying-data-to-a-private-resource"
}