{
  "abstract" : "Creates a format description for a video media stream using HEVC (H.265) parameter set NAL units.",
  "codeExamples" : [

  ],
  "contentHash" : "5a279a3dbc1f45ebde4c154c20364d18b9f22ed35874fc1922c7e5d01cb750d6",
  "crawledAt" : "2025-12-07T23:09:21Z",
  "declaration" : {
    "code" : "func CMVideoFormatDescriptionCreateFromHEVCParameterSets(allocator: CFAllocator?, parameterSetCount: Int, parameterSetPointers: UnsafePointer<UnsafePointer<UInt8>>, parameterSetSizes: UnsafePointer<Int>, nalUnitHeaderLength NALUnitHeaderLength: Int32, extensions: CFDictionary?, formatDescriptionOut: UnsafeMutablePointer<CMFormatDescription?>) -> OSStatus",
    "language" : "swift"
  },
  "id" : "58336767-B9A9-4756-95E7-B5173C95E9D8",
  "kind" : "function",
  "language" : "swift",
  "module" : "Core Media",
  "overview" : "## Discussion\n\nThis method parses the dimensions from the parameter sets and creates a format description suitable for an HEVC (H.265) stream. The parameter sets’ data can come from raw NAL units and needs to include emulation prevention bytes as necessary.\n\nThe supported NAL unit types to include in the format description are:",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "tvOS",
    "visionOS",
    "watchOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/CoreMedia\/CMVideoFormatDescriptionCreateFromHEVCParameterSets(allocator:parameterSetCount:parameterSetPointers:parameterSetSizes:nalUnitHeaderLength:extensions:formatDescriptionOut:)\ncrawled: 2025-12-07T23:09:21Z\n---\n\n# CMVideoFormatDescriptionCreateFromHEVCParameterSets(allocator:parameterSetCount:parameterSetPointers:parameterSetSizes:nalUnitHeaderLength:extensions:formatDescriptionOut:)\n\n**Function**\n\nCreates a format description for a video media stream using HEVC (H.265) parameter set NAL units.\n\n## Declaration\n\n```swift\nfunc CMVideoFormatDescriptionCreateFromHEVCParameterSets(allocator: CFAllocator?, parameterSetCount: Int, parameterSetPointers: UnsafePointer<UnsafePointer<UInt8>>, parameterSetSizes: UnsafePointer<Int>, nalUnitHeaderLength NALUnitHeaderLength: Int32, extensions: CFDictionary?, formatDescriptionOut: UnsafeMutablePointer<CMFormatDescription?>) -> OSStatus\n```\n\n## Parameters\n\n- **allocator**: The `CFAllocator` for creating the format description, or pass `nil` to use the default allocator.\n- **parameterSetCount**: The number of parameter sets to include in the format description, which needs to be at least `2`.\n- **parameterSetPointers**: Points to a C array containing `parameterSetCount` pointers to parameter sets.\n- **parameterSetSizes**: Points to a C array containing the size, in bytes, of each of the parameter sets.\n- **NALUnitHeaderLength**: The size, in bytes, of the `NALUnitLength` field in an AVC video sample or an AVC parameter set sample. Pass `1`, `2`, or `4`.\n- **extensions**: An optional dictionary of extension key-value pairs. Keys are [doc:\/\/com.apple.documentation\/documentation\/CoreFoundation\/CFString] and values are property list objects, such as [doc:\/\/com.apple.documentation\/documentation\/CoreFoundation\/CFData], [doc:\/\/com.apple.documentation\/documentation\/CoreFoundation\/CFBoolean], [doc:\/\/com.apple.documentation\/documentation\/CoreFoundation\/CFNumber], [doc:\/\/com.apple.documentation\/documentation\/CoreFoundation\/CFString], [doc:\/\/com.apple.documentation\/documentation\/CoreFoundation\/CFDate], [doc:\/\/com.apple.documentation\/documentation\/CoreFoundation\/CFArray], and [doc:\/\/com.apple.documentation\/documentation\/CoreFoundation\/CFDictionary].\n- **formatDescriptionOut**: The newly created video format description.\n\n## Discussion\n\nThis method parses the dimensions from the parameter sets and creates a format description suitable for an HEVC (H.265) stream. The parameter sets’ data can come from raw NAL units and needs to include emulation prevention bytes as necessary.\n\nThe supported NAL unit types to include in the format description are:\n\n\n\n\n\n## Working with Video Descriptions\n\n- **CMImageDescriptionFlavor**: Types that represent image format descriptions.\n- **CMVideoFormatDescriptionCreate(allocator:codecType:width:height:extensions:formatDescriptionOut:)**: Creates a format description for a video media stream.\n- **CMVideoFormatDescriptionCreateForImageBuffer(allocator:imageBuffer:formatDescriptionOut:)**: Creates a format description for a video media stream by using an image buffer.\n- **CMVideoFormatDescriptionGetCleanAperture(_:originIsAtTopLeft:)**: Returns a rectangle that defines the portion of the encoded pixel dimensions that represent the image data that’s valid for displaying.\n- **CMVideoFormatDescriptionGetDimensions(_:)**: Returns the video dimensions, in encoded pixels.\n- **CMVideoFormatDescriptionGetExtensionKeysCommonWithImageBuffers()**: Returns an array of keys that you use for video format description extensions, image buffer attachments, and attributes.\n- **CMVideoFormatDescriptionGetPresentationDimensions(_:usePixelAspectRatio:useCleanAperture:)**: Returns the dimensions after taking the pixel aspect ratio and clean aperture into account.\n- **CMVideoFormatDescriptionMatchesImageBuffer(_:imageBuffer:)**: Returns a Boolean value that indicates whether a format description matches an image buffer.\n- **CMVideoFormatDescriptionCreateFromH264ParameterSets(allocator:parameterSetCount:parameterSetPointers:parameterSetSizes:nalUnitHeaderLength:formatDescriptionOut:)**: Creates a format description for a video media stream that the parameter set describes.\n- **CMVideoFormatDescriptionGetH264ParameterSetAtIndex(_:parameterSetIndex:parameterSetPointerOut:parameterSetSizeOut:parameterSetCountOut:nalUnitHeaderLengthOut:)**: Returns a parameter set that an H.264 format description contains.\n- **CMVideoFormatDescriptionCopyAsBigEndianImageDescriptionBlockBuffer(allocator:videoFormatDescription:stringEncoding:flavor:blockBufferOut:)**: Copies the contents of a video format description to a buffer in big-endian byte ordering.\n- **CMVideoFormatDescriptionCreateFromBigEndianImageDescriptionBlockBuffer(allocator:bigEndianImageDescriptionBlockBuffer:stringEncoding:flavor:formatDescriptionOut:)**: Creates a video format description from a big-endian image description inside a buffer.\n- **CMVideoFormatDescriptionCreateFromBigEndianImageDescriptionData(allocator:bigEndianImageDescriptionData:size:stringEncoding:flavor:formatDescriptionOut:)**: Creates a video format description from a big-endian image description structure.\n- **CMSwapBigEndianImageDescriptionToHost(_:_:)**: Converts an image description data structure from big-endian to host-endian, in place.\n- **CMSwapHostEndianImageDescriptionToBig(_:_:)**: Converts an image description data structure from host-endian to big-endian, in place.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Types that represent image format descriptions.",
          "name" : "CMImageDescriptionFlavor",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreMedia\/CMImageDescriptionFlavor"
        },
        {
          "description" : "Creates a format description for a video media stream.",
          "name" : "CMVideoFormatDescriptionCreate(allocator:codecType:width:height:extensions:formatDescriptionOut:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreMedia\/CMVideoFormatDescriptionCreate(allocator:codecType:width:height:extensions:formatDescriptionOut:)"
        },
        {
          "description" : "Creates a format description for a video media stream by using an image buffer.",
          "name" : "CMVideoFormatDescriptionCreateForImageBuffer(allocator:imageBuffer:formatDescriptionOut:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreMedia\/CMVideoFormatDescriptionCreateForImageBuffer(allocator:imageBuffer:formatDescriptionOut:)"
        },
        {
          "description" : "Returns a rectangle that defines the portion of the encoded pixel dimensions that represent the image data that’s valid for displaying.",
          "name" : "CMVideoFormatDescriptionGetCleanAperture(_:originIsAtTopLeft:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreMedia\/CMVideoFormatDescriptionGetCleanAperture(_:originIsAtTopLeft:)"
        },
        {
          "description" : "Returns the video dimensions, in encoded pixels.",
          "name" : "CMVideoFormatDescriptionGetDimensions(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreMedia\/CMVideoFormatDescriptionGetDimensions(_:)"
        },
        {
          "description" : "Returns an array of keys that you use for video format description extensions, image buffer attachments, and attributes.",
          "name" : "CMVideoFormatDescriptionGetExtensionKeysCommonWithImageBuffers()",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreMedia\/CMVideoFormatDescriptionGetExtensionKeysCommonWithImageBuffers()"
        },
        {
          "description" : "Returns the dimensions after taking the pixel aspect ratio and clean aperture into account.",
          "name" : "CMVideoFormatDescriptionGetPresentationDimensions(_:usePixelAspectRatio:useCleanAperture:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreMedia\/CMVideoFormatDescriptionGetPresentationDimensions(_:usePixelAspectRatio:useCleanAperture:)"
        },
        {
          "description" : "Returns a Boolean value that indicates whether a format description matches an image buffer.",
          "name" : "CMVideoFormatDescriptionMatchesImageBuffer(_:imageBuffer:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreMedia\/CMVideoFormatDescriptionMatchesImageBuffer(_:imageBuffer:)"
        },
        {
          "description" : "Creates a format description for a video media stream that the parameter set describes.",
          "name" : "CMVideoFormatDescriptionCreateFromH264ParameterSets(allocator:parameterSetCount:parameterSetPointers:parameterSetSizes:nalUnitHeaderLength:formatDescriptionOut:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreMedia\/CMVideoFormatDescriptionCreateFromH264ParameterSets(allocator:parameterSetCount:parameterSetPointers:parameterSetSizes:nalUnitHeaderLength:formatDescriptionOut:)"
        },
        {
          "description" : "Returns a parameter set that an H.264 format description contains.",
          "name" : "CMVideoFormatDescriptionGetH264ParameterSetAtIndex(_:parameterSetIndex:parameterSetPointerOut:parameterSetSizeOut:parameterSetCountOut:nalUnitHeaderLengthOut:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreMedia\/CMVideoFormatDescriptionGetH264ParameterSetAtIndex(_:parameterSetIndex:parameterSetPointerOut:parameterSetSizeOut:parameterSetCountOut:nalUnitHeaderLengthOut:)"
        },
        {
          "description" : "Copies the contents of a video format description to a buffer in big-endian byte ordering.",
          "name" : "CMVideoFormatDescriptionCopyAsBigEndianImageDescriptionBlockBuffer(allocator:videoFormatDescription:stringEncoding:flavor:blockBufferOut:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreMedia\/CMVideoFormatDescriptionCopyAsBigEndianImageDescriptionBlockBuffer(allocator:videoFormatDescription:stringEncoding:flavor:blockBufferOut:)"
        },
        {
          "description" : "Creates a video format description from a big-endian image description inside a buffer.",
          "name" : "CMVideoFormatDescriptionCreateFromBigEndianImageDescriptionBlockBuffer(allocator:bigEndianImageDescriptionBlockBuffer:stringEncoding:flavor:formatDescriptionOut:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreMedia\/CMVideoFormatDescriptionCreateFromBigEndianImageDescriptionBlockBuffer(allocator:bigEndianImageDescriptionBlockBuffer:stringEncoding:flavor:formatDescriptionOut:)"
        },
        {
          "description" : "Creates a video format description from a big-endian image description structure.",
          "name" : "CMVideoFormatDescriptionCreateFromBigEndianImageDescriptionData(allocator:bigEndianImageDescriptionData:size:stringEncoding:flavor:formatDescriptionOut:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreMedia\/CMVideoFormatDescriptionCreateFromBigEndianImageDescriptionData(allocator:bigEndianImageDescriptionData:size:stringEncoding:flavor:formatDescriptionOut:)"
        },
        {
          "description" : "Converts an image description data structure from big-endian to host-endian, in place.",
          "name" : "CMSwapBigEndianImageDescriptionToHost(_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreMedia\/CMSwapBigEndianImageDescriptionToHost(_:_:)"
        },
        {
          "description" : "Converts an image description data structure from host-endian to big-endian, in place.",
          "name" : "CMSwapHostEndianImageDescriptionToBig(_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreMedia\/CMSwapHostEndianImageDescriptionToBig(_:_:)"
        }
      ],
      "title" : "Working with Video Descriptions"
    }
  ],
  "source" : "appleJSON",
  "title" : "CMVideoFormatDescriptionCreateFromHEVCParameterSets(allocator:parameterSetCount:parameterSetPointers:parameterSetSizes:nalUnitHeaderLength:extensions:formatDescriptionOut:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/CoreMedia\/CMVideoFormatDescriptionCreateFromHEVCParameterSets(allocator:parameterSetCount:parameterSetPointers:parameterSetSizes:nalUnitHeaderLength:extensions:formatDescriptionOut:)"
}