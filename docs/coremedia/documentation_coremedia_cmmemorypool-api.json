{
  "abstract" : "An object that optimizes memory allocation when working with large blocks of memory.",
  "codeExamples" : [

  ],
  "contentHash" : "c4923113df44b2a34a717b2901467cdad7eb207e32a1753a289c3a3255a79a0d",
  "crawledAt" : "2025-12-08T00:32:24Z",
  "id" : "84389CA0-52B1-4248-8EA9-192A518FC8AC",
  "kind" : "collection",
  "language" : "swift",
  "module" : "Core Media",
  "overview" : "## Overview\n\nAn instance of `CMMemoryPool` is a memory allocation service that holds a pool of recently deallocated memory. Its purpose is to speed up subsequent allocations of the same size. Use this API in cases where you need to repeatedly allocate large blocks of memory, such as a video encoding app that outputs compressed data.\n\nThis object allocates memory by page. It doesn’t suballocate memory within pages, so don’t use it to allocate small blocks. For example, when calling the [doc:\/\/com.apple.coremedia\/documentation\/CoreMedia\/CMBlockBufferCreateWithMemoryBlock(allocator:memoryBlock:blockLength:blockAllocator:customBlockSource:offsetToData:dataLength:flags:blockBufferOut:)] function, you can use it as the `blockAllocator` argument, but not as the `structureAllocator` argument (use [doc:\/\/com.apple.documentation\/documentation\/CoreFoundation\/kCFAllocatorDefault] instead).\n\nWhen you no longer need to allocate memory from the pool, invalidate it by calling the [doc:\/\/com.apple.coremedia\/documentation\/CoreMedia\/CMMemoryPoolInvalidate(_:)] function, which tells the pool to stop holding memory for reuse.\n\nA memory pool deallocates memory if it isn’t reused in `0.5` seconds, so that short-term peak usage doesn’t cause persistent bloat. You can override this period by specifying a value for [doc:\/\/com.apple.coremedia\/documentation\/CoreMedia\/kCMMemoryPoolOption_AgeOutPeriod]. The system does this “aging out” during the pool’s [doc:\/\/com.apple.documentation\/documentation\/CoreFoundation\/CFAllocatorAllocate(_:_:_:)] and [doc:\/\/com.apple.documentation\/documentation\/CoreFoundation\/CFAllocatorDeallocate(_:_:)] calls.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/CoreMedia\/cmmemorypool-api\ncrawled: 2025-12-08T00:32:24Z\n---\n\n# CMMemoryPool\n\n**API Collection**\n\nAn object that optimizes memory allocation when working with large blocks of memory.\n\n## Overview\n\nAn instance of `CMMemoryPool` is a memory allocation service that holds a pool of recently deallocated memory. Its purpose is to speed up subsequent allocations of the same size. Use this API in cases where you need to repeatedly allocate large blocks of memory, such as a video encoding app that outputs compressed data.\n\nThis object allocates memory by page. It doesn’t suballocate memory within pages, so don’t use it to allocate small blocks. For example, when calling the [doc:\/\/com.apple.coremedia\/documentation\/CoreMedia\/CMBlockBufferCreateWithMemoryBlock(allocator:memoryBlock:blockLength:blockAllocator:customBlockSource:offsetToData:dataLength:flags:blockBufferOut:)] function, you can use it as the `blockAllocator` argument, but not as the `structureAllocator` argument (use [doc:\/\/com.apple.documentation\/documentation\/CoreFoundation\/kCFAllocatorDefault] instead).\n\nWhen you no longer need to allocate memory from the pool, invalidate it by calling the [doc:\/\/com.apple.coremedia\/documentation\/CoreMedia\/CMMemoryPoolInvalidate(_:)] function, which tells the pool to stop holding memory for reuse.\n\n\n\nA memory pool deallocates memory if it isn’t reused in `0.5` seconds, so that short-term peak usage doesn’t cause persistent bloat. You can override this period by specifying a value for [doc:\/\/com.apple.coremedia\/documentation\/CoreMedia\/kCMMemoryPoolOption_AgeOutPeriod]. The system does this “aging out” during the pool’s [doc:\/\/com.apple.documentation\/documentation\/CoreFoundation\/CFAllocatorAllocate(_:_:_:)] and [doc:\/\/com.apple.documentation\/documentation\/CoreFoundation\/CFAllocatorDeallocate(_:_:)] calls.\n\n## Creating a Memory Pool\n\n- **CMMemoryPoolCreate(options:)**: Creates a memory pool.\n\n## Managing a Memory Pool\n\n- **CMMemoryPoolGetAllocator(_:)**: Returns the allocator for the memory pool.\n- **CMMemoryPoolFlush(_:)**: Deallocates all memory the pool holds.\n- **CMMemoryPoolInvalidate(_:)**: Invalidates the memory pool, which causes its allocator to stop recycling memory.\n\n## Accessing the Type Identifier\n\n- **CMMemoryPoolGetTypeID()**: Returns the type identifier of memory pool objects.\n\n## Data Types\n\n- **CMMemoryPool**: An instance that optimizes memory allocation when working with large blocks of memory.\n\n## Errors\n\n- **kCMMemoryPoolError_AllocationFailed**: An error that indicates the system failed to allocate an internal data structure.\n- **kCMMemoryPoolError_InvalidParameter**: An error that indicates you called an API with an invalid parameter.\n\n## Queues\n\n- **CMSimpleQueue**: A simple, lockless FIFO queue of elements.\n- **CMBufferQueue**: A queue of timed buffers.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Creates a memory pool.",
          "name" : "CMMemoryPoolCreate(options:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreMedia\/CMMemoryPoolCreate(options:)"
        }
      ],
      "title" : "Creating a Memory Pool"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Returns the allocator for the memory pool.",
          "name" : "CMMemoryPoolGetAllocator(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreMedia\/CMMemoryPoolGetAllocator(_:)"
        },
        {
          "description" : "Deallocates all memory the pool holds.",
          "name" : "CMMemoryPoolFlush(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreMedia\/CMMemoryPoolFlush(_:)"
        },
        {
          "description" : "Invalidates the memory pool, which causes its allocator to stop recycling memory.",
          "name" : "CMMemoryPoolInvalidate(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreMedia\/CMMemoryPoolInvalidate(_:)"
        }
      ],
      "title" : "Managing a Memory Pool"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Returns the type identifier of memory pool objects.",
          "name" : "CMMemoryPoolGetTypeID()",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreMedia\/CMMemoryPoolGetTypeID()"
        }
      ],
      "title" : "Accessing the Type Identifier"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "An instance that optimizes memory allocation when working with large blocks of memory.",
          "name" : "CMMemoryPool",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreMedia\/CMMemoryPool"
        }
      ],
      "title" : "Data Types"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "An error that indicates the system failed to allocate an internal data structure.",
          "name" : "kCMMemoryPoolError_AllocationFailed",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreMedia\/kCMMemoryPoolError_AllocationFailed"
        },
        {
          "description" : "An error that indicates you called an API with an invalid parameter.",
          "name" : "kCMMemoryPoolError_InvalidParameter",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreMedia\/kCMMemoryPoolError_InvalidParameter"
        }
      ],
      "title" : "Errors"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "A simple, lockless FIFO queue of elements.",
          "name" : "CMSimpleQueue",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreMedia\/cmsimplequeue-api"
        },
        {
          "description" : "A queue of timed buffers.",
          "name" : "CMBufferQueue",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreMedia\/cmbufferqueue-api"
        }
      ],
      "title" : "Queues"
    }
  ],
  "source" : "appleJSON",
  "title" : "CMMemoryPool",
  "url" : "https:\/\/developer.apple.com\/documentation\/CoreMedia\/cmmemorypool-api"
}