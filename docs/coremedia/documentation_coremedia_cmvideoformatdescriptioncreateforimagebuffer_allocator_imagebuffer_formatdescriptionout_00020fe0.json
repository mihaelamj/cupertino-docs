{
  "abstract" : "Creates a format description for a video media stream by using an image buffer.",
  "codeExamples" : [
    {
      "code" : "CMVideoFormatDescriptionCreate ( allocator, ( CVPixelBufferGetTypeID() == CFGetTypeID( imageBuffer ) ? CVPixelBufferGetPixelFormatType( imageBuffer ) : 0,  width of image,  height of image, extensions );\n                                                ",
      "language" : "objc"
    }
  ],
  "contentHash" : "fa09b40c8af976b020b47d6ef359f755058024a784d80df3530287a2ced2051b",
  "crawledAt" : "2025-12-07T23:09:13Z",
  "declaration" : {
    "code" : "func CMVideoFormatDescriptionCreateForImageBuffer(allocator: CFAllocator?, imageBuffer: CVImageBuffer, formatDescriptionOut: UnsafeMutablePointer<CMVideoFormatDescription?>) -> OSStatus",
    "language" : "swift"
  },
  "id" : "69BCCF16-1E71-44D9-BCF2-7B4426E84968",
  "kind" : "function",
  "language" : "swift",
  "module" : "Core Media",
  "overview" : "## Return Value\n\nA result code. Returns `noErr` if successful.\n\n## Discussion\n\nThis convenience function is equivalent to:\n\n`extensions` is a `CFDictionary` of attachments to image buffer with keys specified by `CMVideoFormatDescriptionGetExtensionKeysCommonWithImageBuffers`, and also `kCMFormatDescriptionExtension_BytesPerRow` if applicable.",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "tvOS",
    "visionOS",
    "watchOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/CoreMedia\/CMVideoFormatDescriptionCreateForImageBuffer(allocator:imageBuffer:formatDescriptionOut:)\ncrawled: 2025-12-07T23:09:13Z\n---\n\n# CMVideoFormatDescriptionCreateForImageBuffer(allocator:imageBuffer:formatDescriptionOut:)\n\n**Function**\n\nCreates a format description for a video media stream by using an image buffer.\n\n## Declaration\n\n```swift\nfunc CMVideoFormatDescriptionCreateForImageBuffer(allocator: CFAllocator?, imageBuffer: CVImageBuffer, formatDescriptionOut: UnsafeMutablePointer<CMVideoFormatDescription?>) -> OSStatus\n```\n\n## Parameters\n\n- **allocator**: `CFAllocator` to be used when creating the `CMFormatDescription`. Pass `NULL` to use the default allocator.\n- **imageBuffer**: Image buffer for which we are creating the format description.\n- **formatDescriptionOut**: On output, returns newly created video `CMFormatDescription`.\n\n## Return Value\n\nA result code. Returns `noErr` if successful.\n\n## Discussion\n\nThis convenience function is equivalent to:\n\n```objc\nCMVideoFormatDescriptionCreate ( allocator, ( CVPixelBufferGetTypeID() == CFGetTypeID( imageBuffer ) ? CVPixelBufferGetPixelFormatType( imageBuffer ) : 0,  width of image,  height of image, extensions );\n                                                \n```\n\n`extensions` is a `CFDictionary` of attachments to image buffer with keys specified by `CMVideoFormatDescriptionGetExtensionKeysCommonWithImageBuffers`, and also `kCMFormatDescriptionExtension_BytesPerRow` if applicable.\n\n## Working with Video Descriptions\n\n- **CMImageDescriptionFlavor**: Types that represent image format descriptions.\n- **CMVideoFormatDescriptionCreate(allocator:codecType:width:height:extensions:formatDescriptionOut:)**: Creates a format description for a video media stream.\n- **CMVideoFormatDescriptionGetCleanAperture(_:originIsAtTopLeft:)**: Returns a rectangle that defines the portion of the encoded pixel dimensions that represent the image data that’s valid for displaying.\n- **CMVideoFormatDescriptionGetDimensions(_:)**: Returns the video dimensions, in encoded pixels.\n- **CMVideoFormatDescriptionGetExtensionKeysCommonWithImageBuffers()**: Returns an array of keys that you use for video format description extensions, image buffer attachments, and attributes.\n- **CMVideoFormatDescriptionGetPresentationDimensions(_:usePixelAspectRatio:useCleanAperture:)**: Returns the dimensions after taking the pixel aspect ratio and clean aperture into account.\n- **CMVideoFormatDescriptionMatchesImageBuffer(_:imageBuffer:)**: Returns a Boolean value that indicates whether a format description matches an image buffer.\n- **CMVideoFormatDescriptionCreateFromH264ParameterSets(allocator:parameterSetCount:parameterSetPointers:parameterSetSizes:nalUnitHeaderLength:formatDescriptionOut:)**: Creates a format description for a video media stream that the parameter set describes.\n- **CMVideoFormatDescriptionCreateFromHEVCParameterSets(allocator:parameterSetCount:parameterSetPointers:parameterSetSizes:nalUnitHeaderLength:extensions:formatDescriptionOut:)**: Creates a format description for a video media stream using HEVC (H.265) parameter set NAL units.\n- **CMVideoFormatDescriptionGetH264ParameterSetAtIndex(_:parameterSetIndex:parameterSetPointerOut:parameterSetSizeOut:parameterSetCountOut:nalUnitHeaderLengthOut:)**: Returns a parameter set that an H.264 format description contains.\n- **CMVideoFormatDescriptionCopyAsBigEndianImageDescriptionBlockBuffer(allocator:videoFormatDescription:stringEncoding:flavor:blockBufferOut:)**: Copies the contents of a video format description to a buffer in big-endian byte ordering.\n- **CMVideoFormatDescriptionCreateFromBigEndianImageDescriptionBlockBuffer(allocator:bigEndianImageDescriptionBlockBuffer:stringEncoding:flavor:formatDescriptionOut:)**: Creates a video format description from a big-endian image description inside a buffer.\n- **CMVideoFormatDescriptionCreateFromBigEndianImageDescriptionData(allocator:bigEndianImageDescriptionData:size:stringEncoding:flavor:formatDescriptionOut:)**: Creates a video format description from a big-endian image description structure.\n- **CMSwapBigEndianImageDescriptionToHost(_:_:)**: Converts an image description data structure from big-endian to host-endian, in place.\n- **CMSwapHostEndianImageDescriptionToBig(_:_:)**: Converts an image description data structure from host-endian to big-endian, in place.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Types that represent image format descriptions.",
          "name" : "CMImageDescriptionFlavor",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreMedia\/CMImageDescriptionFlavor"
        },
        {
          "description" : "Creates a format description for a video media stream.",
          "name" : "CMVideoFormatDescriptionCreate(allocator:codecType:width:height:extensions:formatDescriptionOut:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreMedia\/CMVideoFormatDescriptionCreate(allocator:codecType:width:height:extensions:formatDescriptionOut:)"
        },
        {
          "description" : "Returns a rectangle that defines the portion of the encoded pixel dimensions that represent the image data that’s valid for displaying.",
          "name" : "CMVideoFormatDescriptionGetCleanAperture(_:originIsAtTopLeft:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreMedia\/CMVideoFormatDescriptionGetCleanAperture(_:originIsAtTopLeft:)"
        },
        {
          "description" : "Returns the video dimensions, in encoded pixels.",
          "name" : "CMVideoFormatDescriptionGetDimensions(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreMedia\/CMVideoFormatDescriptionGetDimensions(_:)"
        },
        {
          "description" : "Returns an array of keys that you use for video format description extensions, image buffer attachments, and attributes.",
          "name" : "CMVideoFormatDescriptionGetExtensionKeysCommonWithImageBuffers()",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreMedia\/CMVideoFormatDescriptionGetExtensionKeysCommonWithImageBuffers()"
        },
        {
          "description" : "Returns the dimensions after taking the pixel aspect ratio and clean aperture into account.",
          "name" : "CMVideoFormatDescriptionGetPresentationDimensions(_:usePixelAspectRatio:useCleanAperture:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreMedia\/CMVideoFormatDescriptionGetPresentationDimensions(_:usePixelAspectRatio:useCleanAperture:)"
        },
        {
          "description" : "Returns a Boolean value that indicates whether a format description matches an image buffer.",
          "name" : "CMVideoFormatDescriptionMatchesImageBuffer(_:imageBuffer:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreMedia\/CMVideoFormatDescriptionMatchesImageBuffer(_:imageBuffer:)"
        },
        {
          "description" : "Creates a format description for a video media stream that the parameter set describes.",
          "name" : "CMVideoFormatDescriptionCreateFromH264ParameterSets(allocator:parameterSetCount:parameterSetPointers:parameterSetSizes:nalUnitHeaderLength:formatDescriptionOut:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreMedia\/CMVideoFormatDescriptionCreateFromH264ParameterSets(allocator:parameterSetCount:parameterSetPointers:parameterSetSizes:nalUnitHeaderLength:formatDescriptionOut:)"
        },
        {
          "description" : "Creates a format description for a video media stream using HEVC (H.265) parameter set NAL units.",
          "name" : "CMVideoFormatDescriptionCreateFromHEVCParameterSets(allocator:parameterSetCount:parameterSetPointers:parameterSetSizes:nalUnitHeaderLength:extensions:formatDescriptionOut:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreMedia\/CMVideoFormatDescriptionCreateFromHEVCParameterSets(allocator:parameterSetCount:parameterSetPointers:parameterSetSizes:nalUnitHeaderLength:extensions:formatDescriptionOut:)"
        },
        {
          "description" : "Returns a parameter set that an H.264 format description contains.",
          "name" : "CMVideoFormatDescriptionGetH264ParameterSetAtIndex(_:parameterSetIndex:parameterSetPointerOut:parameterSetSizeOut:parameterSetCountOut:nalUnitHeaderLengthOut:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreMedia\/CMVideoFormatDescriptionGetH264ParameterSetAtIndex(_:parameterSetIndex:parameterSetPointerOut:parameterSetSizeOut:parameterSetCountOut:nalUnitHeaderLengthOut:)"
        },
        {
          "description" : "Copies the contents of a video format description to a buffer in big-endian byte ordering.",
          "name" : "CMVideoFormatDescriptionCopyAsBigEndianImageDescriptionBlockBuffer(allocator:videoFormatDescription:stringEncoding:flavor:blockBufferOut:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreMedia\/CMVideoFormatDescriptionCopyAsBigEndianImageDescriptionBlockBuffer(allocator:videoFormatDescription:stringEncoding:flavor:blockBufferOut:)"
        },
        {
          "description" : "Creates a video format description from a big-endian image description inside a buffer.",
          "name" : "CMVideoFormatDescriptionCreateFromBigEndianImageDescriptionBlockBuffer(allocator:bigEndianImageDescriptionBlockBuffer:stringEncoding:flavor:formatDescriptionOut:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreMedia\/CMVideoFormatDescriptionCreateFromBigEndianImageDescriptionBlockBuffer(allocator:bigEndianImageDescriptionBlockBuffer:stringEncoding:flavor:formatDescriptionOut:)"
        },
        {
          "description" : "Creates a video format description from a big-endian image description structure.",
          "name" : "CMVideoFormatDescriptionCreateFromBigEndianImageDescriptionData(allocator:bigEndianImageDescriptionData:size:stringEncoding:flavor:formatDescriptionOut:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreMedia\/CMVideoFormatDescriptionCreateFromBigEndianImageDescriptionData(allocator:bigEndianImageDescriptionData:size:stringEncoding:flavor:formatDescriptionOut:)"
        },
        {
          "description" : "Converts an image description data structure from big-endian to host-endian, in place.",
          "name" : "CMSwapBigEndianImageDescriptionToHost(_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreMedia\/CMSwapBigEndianImageDescriptionToHost(_:_:)"
        },
        {
          "description" : "Converts an image description data structure from host-endian to big-endian, in place.",
          "name" : "CMSwapHostEndianImageDescriptionToBig(_:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreMedia\/CMSwapHostEndianImageDescriptionToBig(_:_:)"
        }
      ],
      "title" : "Working with Video Descriptions"
    }
  ],
  "source" : "appleJSON",
  "title" : "CMVideoFormatDescriptionCreateForImageBuffer(allocator:imageBuffer:formatDescriptionOut:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/CoreMedia\/CMVideoFormatDescriptionCreateForImageBuffer(allocator:imageBuffer:formatDescriptionOut:)"
}