{
  "abstract" : "Sets or adds an attachment to an attachment bearer object.",
  "codeExamples" : [

  ],
  "contentHash" : "23f0817393ada45661a8fc0132bd77bbdb1f67ebc69ddd58d0cce38276d7aa48",
  "crawledAt" : "2025-12-08T00:36:41Z",
  "declaration" : {
    "code" : "func CMSetAttachment(_ target: CMAttachmentBearer, key: CFString, value: CFTypeRef?, attachmentMode: CMAttachmentMode)",
    "language" : "swift"
  },
  "id" : "E3AAA840-541B-492A-B9F0-E94F232B093F",
  "kind" : "function",
  "language" : "swift",
  "module" : "Core Media",
  "overview" : "## Discussion\n\nYou can attach any Core Foundation object to a `CMAttachmentBearer` object to store additional information. `CMSetAttachment` stores an attachment identified by a key. If the key doesn’t currently exist for the `CMAttachmentBearer` object when you call this function, the function adds the new attachment. If the key does exist, the function replaces the existing attachment. In both cases the function increments the retain count of the attachment. The value can be any `CFType` but a `NULL` value results in an error. Given a [doc:\/\/com.apple.documentation\/documentation\/CoreVideo\/CVBuffer], `CMSetAttachment` is equivalent to `CVBufferSetAttachment`.",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "tvOS",
    "visionOS",
    "watchOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/CoreMedia\/CMSetAttachment(_:key:value:attachmentMode:)\ncrawled: 2025-12-08T00:36:41Z\n---\n\n# CMSetAttachment(_:key:value:attachmentMode:)\n\n**Function**\n\nSets or adds an attachment to an attachment bearer object.\n\n## Declaration\n\n```swift\nfunc CMSetAttachment(_ target: CMAttachmentBearer, key: CFString, value: CFTypeRef?, attachmentMode: CMAttachmentMode)\n```\n\n## Parameters\n\n- **target**: The `CMAttachmentBearer` object on which to add or set attachments.\n- **key**: A `CFString` key identifying the desired attachment.\n- **value**: A Core Foundation object attachment. If this parameter is `NULL`, the function returns an error.\n- **attachmentMode**: Specifies the attachment mode for this attachment. Any given attachment key may exist in only one mode at a time.\n\n## Discussion\n\nYou can attach any Core Foundation object to a `CMAttachmentBearer` object to store additional information. `CMSetAttachment` stores an attachment identified by a key. If the key doesn’t currently exist for the `CMAttachmentBearer` object when you call this function, the function adds the new attachment. If the key does exist, the function replaces the existing attachment. In both cases the function increments the retain count of the attachment. The value can be any `CFType` but a `NULL` value results in an error. Given a [doc:\/\/com.apple.documentation\/documentation\/CoreVideo\/CVBuffer], `CMSetAttachment` is equivalent to `CVBufferSetAttachment`.\n\n## Processing Attachments\n\n- **CMGetAttachment(_:key:attachmentModeOut:)**: Returns an attachment from an attachment bearer object.\n- **CMCopyDictionaryOfAttachments(allocator:target:attachmentMode:)**: Returns a dictionary of all attachments for an attachment bearer object.\n- **CMSetAttachments(_:attachments:attachmentMode:)**: Sets a dictionary of attachments on an attachment bearer object.\n- **CMRemoveAttachment(_:key:)**: Removes a specific attachment from an attachment bearer object.\n- **CMRemoveAllAttachments(_:)**: Removes all attachments from an attachment bearer object.\n- **CMPropagateAttachments(_:destination:)**: Copies all propagable attachments from one attachment bearer object to another.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Returns an attachment from an attachment bearer object.",
          "name" : "CMGetAttachment(_:key:attachmentModeOut:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreMedia\/CMGetAttachment(_:key:attachmentModeOut:)"
        },
        {
          "description" : "Returns a dictionary of all attachments for an attachment bearer object.",
          "name" : "CMCopyDictionaryOfAttachments(allocator:target:attachmentMode:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreMedia\/CMCopyDictionaryOfAttachments(allocator:target:attachmentMode:)"
        },
        {
          "description" : "Sets a dictionary of attachments on an attachment bearer object.",
          "name" : "CMSetAttachments(_:attachments:attachmentMode:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreMedia\/CMSetAttachments(_:attachments:attachmentMode:)"
        },
        {
          "description" : "Removes a specific attachment from an attachment bearer object.",
          "name" : "CMRemoveAttachment(_:key:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreMedia\/CMRemoveAttachment(_:key:)"
        },
        {
          "description" : "Removes all attachments from an attachment bearer object.",
          "name" : "CMRemoveAllAttachments(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreMedia\/CMRemoveAllAttachments(_:)"
        },
        {
          "description" : "Copies all propagable attachments from one attachment bearer object to another.",
          "name" : "CMPropagateAttachments(_:destination:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreMedia\/CMPropagateAttachments(_:destination:)"
        }
      ],
      "title" : "Processing Attachments"
    }
  ],
  "source" : "appleJSON",
  "title" : "CMSetAttachment(_:key:value:attachmentMode:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/CoreMedia\/CMSetAttachment(_:key:value:attachmentMode:)"
}