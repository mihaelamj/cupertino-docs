{
  "abstract" : "Associates a block buffer of media data with a sample buffer.",
  "codeExamples" : [

  ],
  "contentHash" : "d5e805e806b2f25578ea836fba9d4b58eaefdd5c95503454e3a199fc41670f26",
  "crawledAt" : "2025-12-08T01:41:30Z",
  "declaration" : {
    "code" : "func setDataBuffer(_ dataBuffer: CMBlockBuffer) throws",
    "language" : "swift"
  },
  "id" : "FCED42FC-2F63-4BCE-910C-5F223E29EC38",
  "kind" : "method",
  "language" : "swift",
  "module" : "Core Media",
  "overview" : "## Discussion\n\nCalling this method is a write-once operation; it fails if the sample buffer already has a data buffer.\n\nThe purpose of this API is to allow you to create a sample buffer with timing and format information, before associating it with media data. For example, some media services may have access to sample size, timing, and format information, but only load the media data when accessed. Such services may create sample buffers with that information and insert them into queues early, and use this API to attach the media data when it’s ready.",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "tvOS",
    "visionOS",
    "watchOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/CoreMedia\/CMSampleBuffer\/setDataBuffer(_:)\ncrawled: 2025-12-08T01:41:30Z\n---\n\n# setDataBuffer(_:)\n\n**Instance Method**\n\nAssociates a block buffer of media data with a sample buffer.\n\n## Declaration\n\n```swift\nfunc setDataBuffer(_ dataBuffer: CMBlockBuffer) throws\n```\n\n## Parameters\n\n- **dataBuffer**: A buffer that contains the media data.\n\n## Discussion\n\nCalling this method is a write-once operation; it fails if the sample buffer already has a data buffer.\n\nThe purpose of this API is to allow you to create a sample buffer with timing and format information, before associating it with media data. For example, some media services may have access to sample size, timing, and format information, but only load the media data when accessed. Such services may create sample buffers with that information and insert them into queues early, and use this API to attach the media data when it’s ready.\n\n## Modifying Sample Buffers\n\n- **dataBuffer**: A block buffer that contains the media data.\n- **imageBuffer**: An image buffer that contains the media data.\n- **withAudioBufferList(blockBufferMemoryAllocator:flags:body:)**: Calls a closure with an audio buffer list that contains the data from a sample buffer and a block buffer backing the audio buffers.\n- **setDataBuffer(fromAudioBufferList:blockBufferMemoryAllocator:flags:)**: Creates a block buffer that contains a copy of the data from an audio buffer list, and sets it as the sample buffer’s data.\n- **copyPCMData(fromRange:into:)**: Copies PCM audio data from a sample buffer into a prepopulated audio buffer list.\n- **audioStreamPacketDescriptions()**: Creates an array of audio stream packet descriptions for the variable bytes per packet or variable frames per packet audio data in a sample buffer.\n- **withUnsafeAudioStreamPacketDescriptions(_:)**: Calls a closure with an audio stream packet description.\n- **singleSampleBuffers()**: Returns all samples in a sample buffer.\n- **CMSampleBuffer.SingleSampleBuffers**\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "A block buffer that contains the media data.",
          "name" : "dataBuffer",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreMedia\/CMSampleBuffer\/dataBuffer"
        },
        {
          "description" : "An image buffer that contains the media data.",
          "name" : "imageBuffer",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreMedia\/CMSampleBuffer\/imageBuffer"
        },
        {
          "description" : "Calls a closure with an audio buffer list that contains the data from a sample buffer and a block buffer backing the audio buffers.",
          "name" : "withAudioBufferList(blockBufferMemoryAllocator:flags:body:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreMedia\/CMSampleBuffer\/withAudioBufferList(blockBufferMemoryAllocator:flags:body:)"
        },
        {
          "description" : "Creates a block buffer that contains a copy of the data from an audio buffer list, and sets it as the sample buffer’s data.",
          "name" : "setDataBuffer(fromAudioBufferList:blockBufferMemoryAllocator:flags:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreMedia\/CMSampleBuffer\/setDataBuffer(fromAudioBufferList:blockBufferMemoryAllocator:flags:)"
        },
        {
          "description" : "Copies PCM audio data from a sample buffer into a prepopulated audio buffer list.",
          "name" : "copyPCMData(fromRange:into:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreMedia\/CMSampleBuffer\/copyPCMData(fromRange:into:)"
        },
        {
          "description" : "Creates an array of audio stream packet descriptions for the variable bytes per packet or variable frames per packet audio data in a sample buffer.",
          "name" : "audioStreamPacketDescriptions()",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreMedia\/CMSampleBuffer\/audioStreamPacketDescriptions()"
        },
        {
          "description" : "Calls a closure with an audio stream packet description.",
          "name" : "withUnsafeAudioStreamPacketDescriptions(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreMedia\/CMSampleBuffer\/withUnsafeAudioStreamPacketDescriptions(_:)"
        },
        {
          "description" : "Returns all samples in a sample buffer.",
          "name" : "singleSampleBuffers()",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreMedia\/CMSampleBuffer\/singleSampleBuffers()"
        },
        {
          "description" : "",
          "name" : "CMSampleBuffer.SingleSampleBuffers",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreMedia\/CMSampleBuffer\/SingleSampleBuffers"
        }
      ],
      "title" : "Modifying Sample Buffers"
    }
  ],
  "source" : "appleJSON",
  "title" : "setDataBuffer(_:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/CoreMedia\/CMSampleBuffer\/setDataBuffer(_:)"
}