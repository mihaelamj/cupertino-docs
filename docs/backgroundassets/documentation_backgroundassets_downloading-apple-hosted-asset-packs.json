{
  "abstract" : "Configure your project and write the code to download asset packs hosted by Apple.",
  "codeExamples" : [
    {
      "code" : "let assetPack = try await AssetPackManager.shared.assetPack(withID: \"Tutorial\")",
      "language" : "swift"
    },
    {
      "code" : "try await AssetPackManager.shared.ensureLocalAvailability(of: assetPack)",
      "language" : "swift"
    },
    {
      "code" : "let statusUpdates = AssetPackManager.shared.statusUpdates(forAssetPackWithID: \"Tutorial\")\nfor await statusUpdate in statusUpdates {\n\tswitch statusUpdate {\n\tcase began(let assetPack): \/\/ …\n\tcase paused(let assetPack): \/\/ …\n\tcase downloading(let assetPack, let progress): \/\/ …\n\tcase finished(let assetPack): \/\/ …\n\tcase failed(let assetPack, let error): \/\/ …\n\t}\n}",
      "language" : "swift"
    },
    {
      "code" : "@interface ManagedAssetPackDownloadDelegate : NSObject <BAManagedAssetPackDownloadDelegate>\n\n@end\n\n@implementation ManagedAssetPackDownloadDelegate\n\n- (void)downloadOfAssetPackBegan:(BAAssetPack*)assetPack { \/* … *\/ }\n\n- (void)downloadOfAssetPackPaused:(BAAssetPack*)assetPack { \/* … *\/ }\n\n- (void)downloadOfAssetPack:(BAAssetPack*)assetPack hasProgress:(NSProgress*)progress { \/* … *\/ }\n\n- (void)downloadOfAssetPackFinished:(BAAssetPack*)assetPack { \/* … *\/ }\n\n- (void)downloadOfAssetPack:(BAAssetPack*)assetPack failedWithError:(NSError*)error { \/* … *\/ }\n\n@end",
      "language" : "objc"
    },
    {
      "code" : "ManagedAssetPackDownloadDelegate* delegate = [[ManagedAssetPackDownloadDelegate alloc] init];\n[[BAAssetPackManager sharedManager] setDelegate:delegate];",
      "language" : "objc"
    },
    {
      "code" : "switch statusUpdate {\ncase downloading(let assetPack, let progress) where assetPack.id == \"Tutorial\":\n    progress.cancel()\ndefault: \/\/ …\n}",
      "language" : "swift"
    },
    {
      "code" : "let videoData = try AssetPackManager.shared.contents(at: \"Videos\/Introduction.m4v\")",
      "language" : "swift"
    },
    {
      "code" : "let videoDescriptor = try AssetPackManager.shared.descriptor(for: \"Videos\/Introduction.m4v\")\ndefer {\n\tdo {\n\t\ttry videoDescriptor.close()\n\t} catch {\n\t\tprint(\"The file descriptor couldn’t be closed: \\(error)\")\n\t}\n}",
      "language" : "swift"
    },
    {
      "code" : "try await AssetPackManager.shared.remove(assetPackWithID: \"Tutorial\")",
      "language" : "swift"
    }
  ],
  "contentHash" : "b3c0260ef9a6365c9386784b3ae971e6d9d860740708b2684c489b9322d88d42",
  "crawledAt" : "2025-12-03T03:51:41Z",
  "id" : "62DD2555-6A6E-4CC3-B811-CFE7553B4B46",
  "kind" : "article",
  "language" : "swift",
  "module" : "Background Assets",
  "overview" : "## Overview\n\nLet Apple host your app’s assets for you with your Apple Developer Program membership. Apple-Hosted Background Assets hosts up to 200GB of compressed assets and is available for apps on TestFlight or the App Store that use the Managed Background Assets features on all platforms except watchOS. You can use the service to host many different types of assets — such as texture files, machine learning models, Metal shader libraries, and videos — and update them independent of your app build. Background Assets provides a default implementation of a downloader extension that manages asset pack downloads, background updates, compression, and more on people’s systems that you can customize in your downloader extension code.\n\nTo create asset packs with a manifest file that the system manages, see [doc:\/\/com.apple.backgroundassets\/documentation\/BackgroundAssets\/creating-managed-asset-packs]. To test your asset packs before uploading them to App Store Connect, see [doc:\/\/com.apple.backgroundassets\/documentation\/BackgroundAssets\/testing-asset-packs-locally].\n\n### Configure your project for Apple-Hosted Background Assets\n\nTo use Apple-Hosted Background Assets, add a downloader extension target to your project, configure the App Groups capability for both the app and the extension targets, and add some Background Assets information property list keys.\n\nBackground Assets uses your app’s downloader extension to schedule downloads when your app isn’t running. Add a downloader extension that is preconfigured for Managed Background Assets to your Xcode project from a template. Choose New > Target and, in the sheet that appears, choose the Background Download template under Application Extension, and click Next. In the dialog, enter a target name, choose Apple-Hosted, Managed as the extension type, and click Finish. In the next dialog, click Activate to use the extension scheme Xcode creates.\n\nYour app and your downloader extension target need to share an app group, which Background Assets uses to facilitate coordination between the two. Add each of the two targets to a shared app group in the Signing & Capabilities tab of the target editor in Xcode.\n\nIn the project editor, select the app target and click the Info tab. Then, add the following keys to the information property list file:\n\nFor apps that use Apple-Hosted Background Assets, omit all other Background Assets information property list keys from your project.\n\n### Customize downloads\n\nThe default system implementation supports automatic downloads, background updates, compression, and more that you can customize. The system calls the [doc:\/\/com.apple.backgroundassets\/documentation\/BackgroundAssets\/ManagedDownloaderExtension\/shouldDownload(_:)] method each time it downloads a new asset pack based on its download policy. Optionally, use this method to filter downloads at runtime.\n\n\n\nIf you don’t need to customize the download behavior for your asset packs beyond the download policies that you configure in the manifest files, remove the [doc:\/\/com.apple.backgroundassets\/documentation\/BackgroundAssets\/ManagedDownloaderExtension\/shouldDownload(_:)] method implementation from your downloader-extension structure. Otherwise, if your asset packs have specific compatibility requirements, provide a custom implementation for the [doc:\/\/com.apple.backgroundassets\/documentation\/BackgroundAssets\/ManagedDownloaderExtension\/shouldDownload(_:)] method.\n\n### Download asset packs from your app\n\nAn instance of the [doc:\/\/com.apple.backgroundassets\/documentation\/BackgroundAssets\/AssetPack] structure represents an individual asset pack that’s available for download from the server, including metadata, such as its identifier that you set in the manifest file. To obtain an [doc:\/\/com.apple.backgroundassets\/documentation\/BackgroundAssets\/AssetPack] instance, call the [doc:\/\/com.apple.backgroundassets\/documentation\/BackgroundAssets\/AssetPackManager\/assetPack(withID:)] method on the shared asset-pack manager:\n\nTo ensure that the system downloads an asset pack, pass it to the [doc:\/\/com.apple.backgroundassets\/documentation\/BackgroundAssets\/AssetPackManager\/ensureLocalAvailability(of:)] method:\n\nIf the system previously downloaded the asset pack, the [doc:\/\/com.apple.backgroundassets\/documentation\/BackgroundAssets\/AssetPackManager\/ensureLocalAvailability(of:)] method returns quickly without downloading it again. For an asset pack with an essential or a prefetch download policy, the system may finish downloading the asset pack before you call this method. To download an asset pack with an on-demand download policy, this method initiates the download and waits for it to finish before returning. If this method returns without throwing an error, the asset pack is available to access locally.\n\n### Show download progress\n\nWhen downloading asset packs in the foreground, display a progress indicator.\n\nIn Swift, you can await status updates on the asynchronous sequence that the [doc:\/\/com.apple.backgroundassets\/documentation\/BackgroundAssets\/AssetPackManager\/statusUpdates(forAssetPackWithID:)] method returns:\n\nIn Objective-C, you can create a class that conforms to the [doc:\/\/com.apple.backgroundassets\/documentation\/BackgroundAssets\/BAManagedAssetPackDownloadDelegate] protocol:\n\nThen, set the shared asset-pack manager’s [doc:\/\/com.apple.backgroundassets\/documentation\/BackgroundAssets\/BAAssetPackManager\/delegate] property to an instance of that class.\n\nTo cancel a download, call the [doc:\/\/com.apple.documentation\/documentation\/Foundation\/Progress\/cancel()] method on any of the [doc:\/\/com.apple.documentation\/documentation\/Foundation\/Progress] objects that you receive in the download status updates:\n\n### Load files in a downloaded asset pack\n\nTo read the contents of an asset pack, call the [doc:\/\/com.apple.backgroundassets\/documentation\/BackgroundAssets\/AssetPackManager\/contents(at:searchingInAssetPackWithID:options:)] method on the shared asset-pack manager, passing a relative path from the root of the source repository — the folder where you ran the packaging tool command — to the file that you want to read:\n\nThe system automatically merges all of your asset packs into a shared namespace, effectively reconstructing your asset root folder as if it were pasted on a person’s device. This way, you can access individual files without needing to know which asset pack they reside in.\n\nBy default, the [doc:\/\/com.apple.backgroundassets\/documentation\/BackgroundAssets\/AssetPackManager\/contents(at:searchingInAssetPackWithID:options:)] method returns a memory-mapped [doc:\/\/com.apple.documentation\/documentation\/Foundation\/Data] instance, which is suitable even for large asset files that take up a lot of space in memory. If you need low-level access to the file descriptor — for example, to read a file into memory procedurally — then you can use the [doc:\/\/com.apple.backgroundassets\/documentation\/BackgroundAssets\/AssetPackManager\/descriptor(for:searchingInAssetPackWithID:)] method instead:\n\nThe system tracks which asset packs you download and automatically keeps them up to date in the background. However, the system won’t automatically remove your asset packs while your app is installed. Therefore, when you are done with an asset pack, call the [doc:\/\/com.apple.backgroundassets\/documentation\/BackgroundAssets\/AssetPackManager\/remove(assetPackWithID:)] method on the shared asset-pack manager to free up storage space on the device. For example, remove the tutorial asset pack when a person finishes playing the tutorial:\n\nTo redownload an asset pack, call the [doc:\/\/com.apple.backgroundassets\/documentation\/BackgroundAssets\/AssetPackManager\/ensureLocalAvailability(of:)] method again.",
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/BackgroundAssets\/downloading-apple-hosted-asset-packs\ncrawled: 2025-12-03T03:51:41Z\n---\n\n# Downloading Apple-hosted asset packs\n\n**Article**\n\nConfigure your project and write the code to download asset packs hosted by Apple.\n\n## Overview\n\nLet Apple host your app’s assets for you with your Apple Developer Program membership. Apple-Hosted Background Assets hosts up to 200GB of compressed assets and is available for apps on TestFlight or the App Store that use the Managed Background Assets features on all platforms except watchOS. You can use the service to host many different types of assets — such as texture files, machine learning models, Metal shader libraries, and videos — and update them independent of your app build. Background Assets provides a default implementation of a downloader extension that manages asset pack downloads, background updates, compression, and more on people’s systems that you can customize in your downloader extension code.\n\nTo create asset packs with a manifest file that the system manages, see [doc:\/\/com.apple.backgroundassets\/documentation\/BackgroundAssets\/creating-managed-asset-packs]. To test your asset packs before uploading them to App Store Connect, see [doc:\/\/com.apple.backgroundassets\/documentation\/BackgroundAssets\/testing-asset-packs-locally].\n\n### Configure your project for Apple-Hosted Background Assets\n\nTo use Apple-Hosted Background Assets, add a downloader extension target to your project, configure the App Groups capability for both the app and the extension targets, and add some Background Assets information property list keys.\n\nBackground Assets uses your app’s downloader extension to schedule downloads when your app isn’t running. Add a downloader extension that is preconfigured for Managed Background Assets to your Xcode project from a template. Choose New > Target and, in the sheet that appears, choose the Background Download template under Application Extension, and click Next. In the dialog, enter a target name, choose Apple-Hosted, Managed as the extension type, and click Finish. In the next dialog, click Activate to use the extension scheme Xcode creates.\n\nYour app and your downloader extension target need to share an app group, which Background Assets uses to facilitate coordination between the two. Add each of the two targets to a shared app group in the Signing & Capabilities tab of the target editor in Xcode.\n\nIn the project editor, select the app target and click the Info tab. Then, add the following keys to the information property list file:\n\n\n\nFor apps that use Apple-Hosted Background Assets, omit all other Background Assets information property list keys from your project.\n\n### Customize downloads\n\nThe default system implementation supports automatic downloads, background updates, compression, and more that you can customize. The system calls the [doc:\/\/com.apple.backgroundassets\/documentation\/BackgroundAssets\/ManagedDownloaderExtension\/shouldDownload(_:)] method each time it downloads a new asset pack based on its download policy. Optionally, use this method to filter downloads at runtime.\n\n\n\nIf you don’t need to customize the download behavior for your asset packs beyond the download policies that you configure in the manifest files, remove the [doc:\/\/com.apple.backgroundassets\/documentation\/BackgroundAssets\/ManagedDownloaderExtension\/shouldDownload(_:)] method implementation from your downloader-extension structure. Otherwise, if your asset packs have specific compatibility requirements, provide a custom implementation for the [doc:\/\/com.apple.backgroundassets\/documentation\/BackgroundAssets\/ManagedDownloaderExtension\/shouldDownload(_:)] method.\n\n### Download asset packs from your app\n\nAn instance of the [doc:\/\/com.apple.backgroundassets\/documentation\/BackgroundAssets\/AssetPack] structure represents an individual asset pack that’s available for download from the server, including metadata, such as its identifier that you set in the manifest file. To obtain an [doc:\/\/com.apple.backgroundassets\/documentation\/BackgroundAssets\/AssetPack] instance, call the [doc:\/\/com.apple.backgroundassets\/documentation\/BackgroundAssets\/AssetPackManager\/assetPack(withID:)] method on the shared asset-pack manager:\n\n```swift\nlet assetPack = try await AssetPackManager.shared.assetPack(withID: \"Tutorial\")\n```\n\nTo ensure that the system downloads an asset pack, pass it to the [doc:\/\/com.apple.backgroundassets\/documentation\/BackgroundAssets\/AssetPackManager\/ensureLocalAvailability(of:)] method:\n\n```swift\ntry await AssetPackManager.shared.ensureLocalAvailability(of: assetPack)\n```\n\nIf the system previously downloaded the asset pack, the [doc:\/\/com.apple.backgroundassets\/documentation\/BackgroundAssets\/AssetPackManager\/ensureLocalAvailability(of:)] method returns quickly without downloading it again. For an asset pack with an essential or a prefetch download policy, the system may finish downloading the asset pack before you call this method. To download an asset pack with an on-demand download policy, this method initiates the download and waits for it to finish before returning. If this method returns without throwing an error, the asset pack is available to access locally.\n\n\n\n### Show download progress\n\nWhen downloading asset packs in the foreground, display a progress indicator.\n\nIn Swift, you can await status updates on the asynchronous sequence that the [doc:\/\/com.apple.backgroundassets\/documentation\/BackgroundAssets\/AssetPackManager\/statusUpdates(forAssetPackWithID:)] method returns:\n\n```swift\nlet statusUpdates = AssetPackManager.shared.statusUpdates(forAssetPackWithID: \"Tutorial\")\nfor await statusUpdate in statusUpdates {\n\tswitch statusUpdate {\n\tcase began(let assetPack): \/\/ …\n\tcase paused(let assetPack): \/\/ …\n\tcase downloading(let assetPack, let progress): \/\/ …\n\tcase finished(let assetPack): \/\/ …\n\tcase failed(let assetPack, let error): \/\/ …\n\t}\n}\n```\n\nIn Objective-C, you can create a class that conforms to the [doc:\/\/com.apple.backgroundassets\/documentation\/BackgroundAssets\/BAManagedAssetPackDownloadDelegate] protocol:\n\n```objc\n@interface ManagedAssetPackDownloadDelegate : NSObject <BAManagedAssetPackDownloadDelegate>\n\n@end\n\n@implementation ManagedAssetPackDownloadDelegate\n\n- (void)downloadOfAssetPackBegan:(BAAssetPack*)assetPack { \/* … *\/ }\n\n- (void)downloadOfAssetPackPaused:(BAAssetPack*)assetPack { \/* … *\/ }\n\n- (void)downloadOfAssetPack:(BAAssetPack*)assetPack hasProgress:(NSProgress*)progress { \/* … *\/ }\n\n- (void)downloadOfAssetPackFinished:(BAAssetPack*)assetPack { \/* … *\/ }\n\n- (void)downloadOfAssetPack:(BAAssetPack*)assetPack failedWithError:(NSError*)error { \/* … *\/ }\n\n@end\n```\n\nThen, set the shared asset-pack manager’s [doc:\/\/com.apple.backgroundassets\/documentation\/BackgroundAssets\/BAAssetPackManager\/delegate] property to an instance of that class.\n\n```objc\nManagedAssetPackDownloadDelegate* delegate = [[ManagedAssetPackDownloadDelegate alloc] init];\n[[BAAssetPackManager sharedManager] setDelegate:delegate];\n```\n\nTo cancel a download, call the [doc:\/\/com.apple.documentation\/documentation\/Foundation\/Progress\/cancel()] method on any of the [doc:\/\/com.apple.documentation\/documentation\/Foundation\/Progress] objects that you receive in the download status updates:\n\n```swift\nswitch statusUpdate {\ncase downloading(let assetPack, let progress) where assetPack.id == \"Tutorial\":\n    progress.cancel()\ndefault: \/\/ …\n}\n```\n\n### Load files in a downloaded asset pack\n\nTo read the contents of an asset pack, call the [doc:\/\/com.apple.backgroundassets\/documentation\/BackgroundAssets\/AssetPackManager\/contents(at:searchingInAssetPackWithID:options:)] method on the shared asset-pack manager, passing a relative path from the root of the source repository — the folder where you ran the packaging tool command — to the file that you want to read:\n\n```swift\nlet videoData = try AssetPackManager.shared.contents(at: \"Videos\/Introduction.m4v\")\n```\n\nThe system automatically merges all of your asset packs into a shared namespace, effectively reconstructing your asset root folder as if it were pasted on a person’s device. This way, you can access individual files without needing to know which asset pack they reside in.\n\nBy default, the [doc:\/\/com.apple.backgroundassets\/documentation\/BackgroundAssets\/AssetPackManager\/contents(at:searchingInAssetPackWithID:options:)] method returns a memory-mapped [doc:\/\/com.apple.documentation\/documentation\/Foundation\/Data] instance, which is suitable even for large asset files that take up a lot of space in memory. If you need low-level access to the file descriptor — for example, to read a file into memory procedurally — then you can use the [doc:\/\/com.apple.backgroundassets\/documentation\/BackgroundAssets\/AssetPackManager\/descriptor(for:searchingInAssetPackWithID:)] method instead:\n\n```swift\nlet videoDescriptor = try AssetPackManager.shared.descriptor(for: \"Videos\/Introduction.m4v\")\ndefer {\n\tdo {\n\t\ttry videoDescriptor.close()\n\t} catch {\n\t\tprint(\"The file descriptor couldn’t be closed: \\(error)\")\n\t}\n}\n```\n\n\n\nThe system tracks which asset packs you download and automatically keeps them up to date in the background. However, the system won’t automatically remove your asset packs while your app is installed. Therefore, when you are done with an asset pack, call the [doc:\/\/com.apple.backgroundassets\/documentation\/BackgroundAssets\/AssetPackManager\/remove(assetPackWithID:)] method on the shared asset-pack manager to free up storage space on the device. For example, remove the tutorial asset pack when a person finishes playing the tutorial:\n\n```swift\ntry await AssetPackManager.shared.remove(assetPackWithID: \"Tutorial\")\n```\n\nTo redownload an asset pack, call the [doc:\/\/com.apple.backgroundassets\/documentation\/BackgroundAssets\/AssetPackManager\/ensureLocalAvailability(of:)] method again.\n\n## Essentials\n\n- **Creating managed asset packs**: Create managed asset packs, choose download options, and upload Apple-hosted asset packs  to App Store Connect.\n- **Testing asset packs locally**: Test your system-managed asset packs using a mock server on your Mac.\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "Create managed asset packs, choose download options, and upload Apple-hosted asset packs  to App Store Connect.",
          "name" : "Creating managed asset packs",
          "url" : "https:\/\/developer.apple.com\/documentation\/BackgroundAssets\/creating-managed-asset-packs"
        },
        {
          "description" : "Test your system-managed asset packs using a mock server on your Mac.",
          "name" : "Testing asset packs locally",
          "url" : "https:\/\/developer.apple.com\/documentation\/BackgroundAssets\/testing-asset-packs-locally"
        }
      ],
      "title" : "Essentials"
    }
  ],
  "source" : "appleJSON",
  "title" : "Downloading Apple-hosted asset packs",
  "url" : "https:\/\/developer.apple.com\/documentation\/BackgroundAssets\/downloading-apple-hosted-asset-packs"
}