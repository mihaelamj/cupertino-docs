{
  "abstract" : "An object that manages the queue of scheduled asset downloads.",
  "codeExamples" : [
    {
      "code" : "let url = URL(string: \"https:\/\/cdn.example.com\/level-resources.zip\")!\nlet request = URLRequest(url: url)\nlet identifier = \"group.com.example.my-game\"\n\n\/\/ Create an asset download.\nlet download = BAURLDownload(identifier: \"level-resources\",\n                             request: request,\n                             applicationGroupIdentifier: identifier)\n\n\/\/ Access the shared download manager.\nlet manager = BADownloadManager.shared\n\n\/\/ Assign the manager's delegate so the framework can notify\n\/\/ the app of asset download events.\nmanager.delegate = self\n\ndo {\n    \/\/ Attempt to acquire exclusive control of the manager.\n    manager.withExclusiveControl { error in\n        \/\/ Return immediately if that attempt fails.\n        if let error {\n            print(error.localizedDescription)\n            return\n        }\n        \n        \/\/ Use the manager to schedule the asset download.\n        try manager.schedule(download)\n    }\n} catch {\n    \/\/ Handle the error.\n    print(error.localizedDescription)\n}\n",
      "language" : "swift"
    }
  ],
  "conformsTo" : [
    "CVarArg",
    "CustomDebugStringConvertible",
    "CustomStringConvertible",
    "Equatable",
    "Hashable",
    "NSObjectProtocol"
  ],
  "contentHash" : "3b067d9fd24fb2a45929cfd4efef769aa6e26cd86515c72099959a33cec34ca2",
  "crawledAt" : "2025-12-02T18:43:53Z",
  "declaration" : {
    "code" : "class BADownloadManager",
    "language" : "swift"
  },
  "id" : "0710E992-B322-4EA9-B198-8B1DBFCA666C",
  "kind" : "class",
  "language" : "swift",
  "module" : "Background Assets",
  "overview" : "## Overview\n\nUse [doc:\/\/com.apple.backgroundassets\/documentation\/BackgroundAssets\/BADownloadManager] to schedule and cancel asset downloads, monitor their progress, and access the queue of pending downloads. You don’t create instances of this class directly; instead, use the [doc:\/\/com.apple.backgroundassets\/documentation\/BackgroundAssets\/BADownloadManager\/shared] property to access the framework’s singleton that it shares between your app and the app’s extension. Because the download manager is a shared resource, prevent race conditions by using the [doc:\/\/com.apple.backgroundassets\/documentation\/BackgroundAssets\/BADownloadManager\/withExclusiveControl(_:)] and [doc:\/\/com.apple.backgroundassets\/documentation\/BackgroundAssets\/BADownloadManager\/withExclusiveControl(beforeDate:perform:)] methods to assume absolute control of the manager before you schedule asset downloads or manipulate those already in the manager’s queue. To respond to asset download events and process concluded downloads, create a type that conforms to the [doc:\/\/com.apple.backgroundassets\/documentation\/BackgroundAssets\/BADownloadManagerDelegate] protocol and assign an instance of it to the download manager’s [doc:\/\/com.apple.backgroundassets\/documentation\/BackgroundAssets\/BADownloadManager\/delegate] property.\n\nThe following example shows how to create an asset download, acquire exclusive control of the shared download manager, and then use the manager to schedule the download:",
  "platforms" : [
    "iOS",
    "iPadOS",
    "macOS",
    "tvOS",
    "visionOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/backgroundassets\/badownloadmanager\ncrawled: 2025-12-02T18:43:53Z\n---\n\n# BADownloadManager\n\n**Class**\n\nAn object that manages the queue of scheduled asset downloads.\n\n## Declaration\n\n```swift\nclass BADownloadManager\n```\n\n## Overview\n\nUse [doc:\/\/com.apple.backgroundassets\/documentation\/BackgroundAssets\/BADownloadManager] to schedule and cancel asset downloads, monitor their progress, and access the queue of pending downloads. You don’t create instances of this class directly; instead, use the [doc:\/\/com.apple.backgroundassets\/documentation\/BackgroundAssets\/BADownloadManager\/shared] property to access the framework’s singleton that it shares between your app and the app’s extension. Because the download manager is a shared resource, prevent race conditions by using the [doc:\/\/com.apple.backgroundassets\/documentation\/BackgroundAssets\/BADownloadManager\/withExclusiveControl(_:)] and [doc:\/\/com.apple.backgroundassets\/documentation\/BackgroundAssets\/BADownloadManager\/withExclusiveControl(beforeDate:perform:)] methods to assume absolute control of the manager before you schedule asset downloads or manipulate those already in the manager’s queue. To respond to asset download events and process concluded downloads, create a type that conforms to the [doc:\/\/com.apple.backgroundassets\/documentation\/BackgroundAssets\/BADownloadManagerDelegate] protocol and assign an instance of it to the download manager’s [doc:\/\/com.apple.backgroundassets\/documentation\/BackgroundAssets\/BADownloadManager\/delegate] property.\n\nThe following example shows how to create an asset download, acquire exclusive control of the shared download manager, and then use the manager to schedule the download:\n\n```swift\nlet url = URL(string: \"https:\/\/cdn.example.com\/level-resources.zip\")!\nlet request = URLRequest(url: url)\nlet identifier = \"group.com.example.my-game\"\n\n\/\/ Create an asset download.\nlet download = BAURLDownload(identifier: \"level-resources\",\n                             request: request,\n                             applicationGroupIdentifier: identifier)\n\n\/\/ Access the shared download manager.\nlet manager = BADownloadManager.shared\n\n\/\/ Assign the manager's delegate so the framework can notify\n\/\/ the app of asset download events.\nmanager.delegate = self\n\ndo {\n    \/\/ Attempt to acquire exclusive control of the manager.\n    manager.withExclusiveControl { error in\n        \/\/ Return immediately if that attempt fails.\n        if let error {\n            print(error.localizedDescription)\n            return\n        }\n        \n        \/\/ Use the manager to schedule the asset download.\n        try manager.schedule(download)\n    }\n} catch {\n    \/\/ Handle the error.\n    print(error.localizedDescription)\n}\n\n```\n\n## Accessing the download manager\n\n- **shared**: The download manager that both the app and the extension share.\n\n## Managing downloads\n\n- **scheduleDownload(_:)**: Schedules an asset download to execute in the background at a nonspecific time in the future.\n- **startForegroundDownload(_:)**: Schedules an asset download that executes immediately in the foreground.\n- **cancel(_:)**: Cancels an asset download.\n\n## Monitoring downloads\n\n- **delegate**: The download manager’s delegate.\n- **BADownloadManagerDelegate**: An interface for reacting to asset download events and processing concluded downloads.\n\n## Fetching in-progress downloads\n\n- **fetchCurrentDownloads()**\n- **fetchCurrentDownloads(completionHandler:)**: Fetches the contents of the manager’s download queue.\n\n## Synchronizing manager access\n\n- **withExclusiveControl(_:)**: Attempts to acquire immediate, exclusive access to the download manager.\n- **withExclusiveControl(beforeDate:perform:)**\n\n## Unmanaged asset downloads\n\n- **Configuring an unmanaged Background Assets project**: Manage and download individual assets yourself by configuring your app and extension targets.\n- **Downloading essential assets in the background**: Fetch the assets your app requires before its first launch using an app extension and the Background Assets framework.\n- **BAManifestURL**: The location URL of the app’s manifest file that contains the names and sizes of assets.\n- **BAInitialDownloadRestrictions**: The restrictions that apply to the set of assets that download immediately after app installation.\n- **BAEssentialMaxInstallSize**: The combined, maximum size of the essential assets that the system downloads before it launches your app in bytes.\n- **BAMaxInstallSize**: The combined, maximum size, in bytes, of the non-essential assets that download immediately after app installation.\n- **BADownloaderExtension**: An interface for reacting to app life-cycle events and processing concluded asset downloads while your app isn’t running.\n- **BADownloaderExtensionConfiguration**\n- **BAURLDownload**: An object that represents a remote asset to download.\n- **BADownload**: An object that represents an in-progress or concluded asset download.\n\n## Inherits From\n\n- NSObject\n\n## Conforms To\n\n- CVarArg\n- CustomDebugStringConvertible\n- CustomStringConvertible\n- Equatable\n- Hashable\n- NSObjectProtocol\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "The download manager that both the app and the extension share.",
          "name" : "shared",
          "url" : "https:\/\/developer.apple.com\/documentation\/BackgroundAssets\/BADownloadManager\/shared"
        }
      ],
      "title" : "Accessing the download manager"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Schedules an asset download to execute in the background at a nonspecific time in the future.",
          "name" : "scheduleDownload(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/BackgroundAssets\/BADownloadManager\/scheduleDownload(_:)"
        },
        {
          "description" : "Schedules an asset download that executes immediately in the foreground.",
          "name" : "startForegroundDownload(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/BackgroundAssets\/BADownloadManager\/startForegroundDownload(_:)"
        },
        {
          "description" : "Cancels an asset download.",
          "name" : "cancel(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/BackgroundAssets\/BADownloadManager\/cancel(_:)"
        }
      ],
      "title" : "Managing downloads"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "The download manager’s delegate.",
          "name" : "delegate",
          "url" : "https:\/\/developer.apple.com\/documentation\/BackgroundAssets\/BADownloadManager\/delegate"
        },
        {
          "description" : "An interface for reacting to asset download events and processing concluded downloads.",
          "name" : "BADownloadManagerDelegate",
          "url" : "https:\/\/developer.apple.com\/documentation\/BackgroundAssets\/BADownloadManagerDelegate"
        }
      ],
      "title" : "Monitoring downloads"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "",
          "name" : "fetchCurrentDownloads()",
          "url" : "https:\/\/developer.apple.com\/documentation\/BackgroundAssets\/BADownloadManager\/fetchCurrentDownloads()"
        },
        {
          "description" : "Fetches the contents of the manager’s download queue.",
          "name" : "fetchCurrentDownloads(completionHandler:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/BackgroundAssets\/BADownloadManager\/fetchCurrentDownloads(completionHandler:)"
        }
      ],
      "title" : "Fetching in-progress downloads"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Attempts to acquire immediate, exclusive access to the download manager.",
          "name" : "withExclusiveControl(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/BackgroundAssets\/BADownloadManager\/withExclusiveControl(_:)"
        },
        {
          "description" : "",
          "name" : "withExclusiveControl(beforeDate:perform:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/BackgroundAssets\/BADownloadManager\/withExclusiveControl(beforeDate:perform:)"
        }
      ],
      "title" : "Synchronizing manager access"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Manage and download individual assets yourself by configuring your app and extension targets.",
          "name" : "Configuring an unmanaged Background Assets project",
          "url" : "https:\/\/developer.apple.com\/documentation\/BackgroundAssets\/configuring-an-unmanaged-background-assets-project"
        },
        {
          "description" : "Fetch the assets your app requires before its first launch using an app extension and the Background Assets framework.",
          "name" : "Downloading essential assets in the background",
          "url" : "https:\/\/developer.apple.com\/documentation\/BackgroundAssets\/downloading-essential-assets-in-the-background"
        },
        {
          "description" : "The location URL of the app’s manifest file that contains the names and sizes of assets.",
          "name" : "BAManifestURL",
          "url" : "https:\/\/developer.apple.com\/documentation\/BundleResources\/Information-Property-List\/BAManifestURL"
        },
        {
          "description" : "The restrictions that apply to the set of assets that download immediately after app installation.",
          "name" : "BAInitialDownloadRestrictions",
          "url" : "https:\/\/developer.apple.com\/documentation\/BundleResources\/Information-Property-List\/BAInitialDownloadRestrictions"
        },
        {
          "description" : "The combined, maximum size of the essential assets that the system downloads before it launches your app in bytes.",
          "name" : "BAEssentialMaxInstallSize",
          "url" : "https:\/\/developer.apple.com\/documentation\/BundleResources\/Information-Property-List\/BAEssentialMaxInstallSize"
        },
        {
          "description" : "The combined, maximum size, in bytes, of the non-essential assets that download immediately after app installation.",
          "name" : "BAMaxInstallSize",
          "url" : "https:\/\/developer.apple.com\/documentation\/BundleResources\/Information-Property-List\/BAMaxInstallSize"
        },
        {
          "description" : "An interface for reacting to app life-cycle events and processing concluded asset downloads while your app isn’t running.",
          "name" : "BADownloaderExtension",
          "url" : "https:\/\/developer.apple.com\/documentation\/BackgroundAssets\/BADownloaderExtension-qwaw"
        },
        {
          "description" : "",
          "name" : "BADownloaderExtensionConfiguration",
          "url" : "https:\/\/developer.apple.com\/documentation\/BackgroundAssets\/BADownloaderExtensionConfiguration"
        },
        {
          "description" : "An object that represents a remote asset to download.",
          "name" : "BAURLDownload",
          "url" : "https:\/\/developer.apple.com\/documentation\/BackgroundAssets\/BAURLDownload"
        },
        {
          "description" : "An object that represents an in-progress or concluded asset download.",
          "name" : "BADownload",
          "url" : "https:\/\/developer.apple.com\/documentation\/BackgroundAssets\/BADownload"
        }
      ],
      "title" : "Unmanaged asset downloads"
    },
    {
      "content" : "",
      "items" : [
        {
          "name" : "NSObject"
        }
      ],
      "title" : "Inherits From"
    }
  ],
  "source" : "appleJSON",
  "title" : "BADownloadManager",
  "url" : "https:\/\/developer.apple.com\/documentation\/backgroundassets\/badownloadmanager"
}