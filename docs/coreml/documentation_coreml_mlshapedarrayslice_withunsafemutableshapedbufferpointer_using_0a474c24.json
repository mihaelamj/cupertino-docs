{
  "abstract" : "Calls the given closure with a pointer to the array’s mutable storage that has a specified buffer layout.",
  "codeExamples" : [
    {
      "code" : "\/\/ Initialize the middle 2x2 of 4x4 shaped array using an external data that lays out\n\/\/ scalars in last-major order.\nlet data: [Int32] = [1, 3,\n                     2, 4]\nvar array = MLShapedArray<Int32>(repeating: 0, shape: [4, 4])\narray[1...2, 1...2].withUnsafeMutableShapedBufferPointer(using: .lastMajorContiguous) { destinationPtr, _, _ in\n    data.withUnsafeBufferPointer() { sourcePtr in\n        destinationPtr.update(from: sourcePtr)\n    }\n}\n\n\/\/ array.scalars == [0, 0, 0, 0,\n\/\/                   0, 1, 2, 0,\n\/\/                   0, 3, 4, 0,\n\/\/                   0, 0, 0, 0,])",
      "language" : "swift"
    }
  ],
  "contentHash" : "fb208989791d57aebfd612ca783607d669c1287c93ee364862137c0d87868562",
  "crawledAt" : "2025-12-05T19:07:55Z",
  "declaration" : {
    "code" : "mutating func withUnsafeMutableShapedBufferPointer<R>(using bufferLayout: MLShapedArrayBufferLayout, _ body: (inout UnsafeMutableBufferPointer<Scalar>, [Int], [Int]) throws -> R) rethrows -> R",
    "language" : "swift"
  },
  "id" : "7D296E79-0A6C-4E8C-8F8B-3D51551E52C1",
  "kind" : "method",
  "language" : "swift",
  "module" : "Core ML",
  "overview" : "## Discussion\n\nThe storage contains the scalars according to buffer layout parameter. For example, the scalar at `[x1, x2, ... xn]` with strides `[s1, s2, ... sn]` is stored at `ptr[x1 * s1 + x2 * s2 + ... + xn * sn]`\n\nUnlike `withUnsafeMutableShapedBufferPointer(:)`, this function allows the caller to specify the buffer layout.",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "tvOS",
    "visionOS",
    "watchOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/CoreML\/MLShapedArraySlice\/withUnsafeMutableShapedBufferPointer(using:_:)\ncrawled: 2025-12-05T19:07:55Z\n---\n\n# withUnsafeMutableShapedBufferPointer(using:_:)\n\n**Instance Method**\n\nCalls the given closure with a pointer to the array’s mutable storage that has a specified buffer layout.\n\n## Declaration\n\n```swift\nmutating func withUnsafeMutableShapedBufferPointer<R>(using bufferLayout: MLShapedArrayBufferLayout, _ body: (inout UnsafeMutableBufferPointer<Scalar>, [Int], [Int]) throws -> R) rethrows -> R\n```\n\n## Discussion\n\nThe storage contains the scalars according to buffer layout parameter. For example, the scalar at `[x1, x2, ... xn]` with strides `[s1, s2, ... sn]` is stored at `ptr[x1 * s1 + x2 * s2 + ... + xn * sn]`\n\nUnlike `withUnsafeMutableShapedBufferPointer(:)`, this function allows the caller to specify the buffer layout.\n\n```swift\n\/\/ Initialize the middle 2x2 of 4x4 shaped array using an external data that lays out\n\/\/ scalars in last-major order.\nlet data: [Int32] = [1, 3,\n                     2, 4]\nvar array = MLShapedArray<Int32>(repeating: 0, shape: [4, 4])\narray[1...2, 1...2].withUnsafeMutableShapedBufferPointer(using: .lastMajorContiguous) { destinationPtr, _, _ in\n    data.withUnsafeBufferPointer() { sourcePtr in\n        destinationPtr.update(from: sourcePtr)\n    }\n}\n\n\/\/ array.scalars == [0, 0, 0, 0,\n\/\/                   0, 1, 2, 0,\n\/\/                   0, 3, 4, 0,\n\/\/                   0, 0, 0, 0,])\n```\n\n",
  "sections" : [

  ],
  "source" : "appleJSON",
  "title" : "withUnsafeMutableShapedBufferPointer(using:_:)",
  "url" : "https:\/\/developer.apple.com\/documentation\/CoreML\/MLShapedArraySlice\/withUnsafeMutableShapedBufferPointer(using:_:)"
}