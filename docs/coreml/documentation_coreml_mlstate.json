{
  "abstract" : "Handle to the state buffers.",
  "codeExamples" : [
    {
      "code" : "\/\/ Load a stateful model\nlet modelAsset = try MLModelAsset(url: modelURL)\nlet model = try await MLModel.load(asset: modelAsset, configuration: MLModelConfiguration())\n\n\/\/ Request a state\nlet state = model.newState()\n\n\/\/ Run predictions\nfor _ in 0 ..< 42 {\n  _ = try await model.prediction(from: inputFeatures, using: state)\n}\n\n\/\/ Access the state buffer.\nstate.withMultiArray(for: \"accumulator\") { stateMultiArray in\n  ...\n}",
      "language" : "swift"
    }
  ],
  "conformsTo" : [
    "CVarArg",
    "CustomDebugStringConvertible",
    "CustomStringConvertible",
    "Equatable",
    "Hashable",
    "NSObjectProtocol",
    "Sendable",
    "SendableMetatype"
  ],
  "contentHash" : "34537da02731e908d00598dbaa2279a3b15802204e90f5c81974f3747da8f18e",
  "crawledAt" : "2025-12-03T12:22:04Z",
  "declaration" : {
    "code" : "class MLState",
    "language" : "swift"
  },
  "id" : "280B7A3B-2397-4D10-AC22-F10A507DBD2D",
  "kind" : "class",
  "language" : "swift",
  "module" : "Core ML",
  "overview" : "## Overview\n\nA stateful model maintains a state from one prediction to another by storing the information in the state buffers. To use such a model, the client must request the model to create state buffers and get `MLState` object, which is the handle to those buffers. Then, at the prediction time, pass the `MLState` object in one of the stateful prediction functions.\n\nThe object is a handle to the state buffers. The client shall not read or write the buffers while a prediction is in-flight.\n\nEach stateful prediction that uses the same `MLState` must be serialized. Otherwise, if two such predictions run concurrently, the behavior is undefined.",
  "platforms" : [
    "iOS",
    "iPadOS",
    "Mac Catalyst",
    "macOS",
    "tvOS",
    "visionOS",
    "watchOS"
  ],
  "rawMarkdown" : "---\nsource: https:\/\/developer.apple.com\/documentation\/coreml\/mlstate\ncrawled: 2025-12-03T12:22:04Z\n---\n\n# MLState\n\n**Class**\n\nHandle to the state buffers.\n\n## Declaration\n\n```swift\nclass MLState\n```\n\n## Overview\n\nA stateful model maintains a state from one prediction to another by storing the information in the state buffers. To use such a model, the client must request the model to create state buffers and get `MLState` object, which is the handle to those buffers. Then, at the prediction time, pass the `MLState` object in one of the stateful prediction functions.\n\n```swift\n\/\/ Load a stateful model\nlet modelAsset = try MLModelAsset(url: modelURL)\nlet model = try await MLModel.load(asset: modelAsset, configuration: MLModelConfiguration())\n\n\/\/ Request a state\nlet state = model.newState()\n\n\/\/ Run predictions\nfor _ in 0 ..< 42 {\n  _ = try await model.prediction(from: inputFeatures, using: state)\n}\n\n\/\/ Access the state buffer.\nstate.withMultiArray(for: \"accumulator\") { stateMultiArray in\n  ...\n}\n```\n\nThe object is a handle to the state buffers. The client shall not read or write the buffers while a prediction is in-flight.\n\nEach stateful prediction that uses the same `MLState` must be serialized. Otherwise, if two such predictions run concurrently, the behavior is undefined.\n\n## Getting a state buffer\n\n- **withMultiArray(for:_:)**\n- **withMultiArray(_:)**\n\n## Model state\n\n- **MLStateConstraint**: Constraint of a state feature value.\n\n## Inherits From\n\n- NSObject\n\n## Conforms To\n\n- CVarArg\n- CustomDebugStringConvertible\n- CustomStringConvertible\n- Equatable\n- Hashable\n- NSObjectProtocol\n- Sendable\n- SendableMetatype\n\n",
  "sections" : [
    {
      "content" : "",
      "items" : [
        {
          "description" : "",
          "name" : "withMultiArray(for:_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreML\/MLState\/withMultiArray(for:_:)"
        },
        {
          "description" : "",
          "name" : "withMultiArray(_:)",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreML\/MLState\/withMultiArray(_:)"
        }
      ],
      "title" : "Getting a state buffer"
    },
    {
      "content" : "",
      "items" : [
        {
          "description" : "Constraint of a state feature value.",
          "name" : "MLStateConstraint",
          "url" : "https:\/\/developer.apple.com\/documentation\/CoreML\/MLStateConstraint"
        }
      ],
      "title" : "Model state"
    },
    {
      "content" : "",
      "items" : [
        {
          "name" : "NSObject"
        }
      ],
      "title" : "Inherits From"
    }
  ],
  "source" : "appleJSON",
  "title" : "MLState",
  "url" : "https:\/\/developer.apple.com\/documentation\/coreml\/mlstate"
}